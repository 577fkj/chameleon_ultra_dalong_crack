	var __wxAppData = __wxAppData || {}; 	var __wxRoute = __wxRoute || ""; 	var __wxRouteBegin = __wxRouteBegin || ""; 	var __wxAppCode__ = __wxAppCode__ || {};	var global = global || {};	var __WXML_GLOBAL__=__WXML_GLOBAL__ || {};	var __wxAppCurrentFile__=__wxAppCurrentFile__||""; 	var Component = Component || function(){};	var definePlugin = definePlugin || function(){};	var requirePlugin = requirePlugin || function(){};	var Behavior = Behavior || function(){};	var __vd_version_info__ = __vd_version_info__ || {};
	/*v0.5vv_20211229_syb_scopedata*/global.__wcc_version__='v0.5vv_20211229_syb_scopedata';global.__wcc_version_info__={"customComponents":true,"fixZeroRpx":true,"propValueDeepCopy":false};
var $gwxc
var $gaic={}
$gwx=function(path,global){
if(typeof global === 'undefined') global={};if(typeof __WXML_GLOBAL__ === 'undefined') {__WXML_GLOBAL__={};
}__WXML_GLOBAL__.modules = __WXML_GLOBAL__.modules || {};
function _(a,b){if(typeof(b)!='undefined')a.children.push(b);}
function _v(k){if(typeof(k)!='undefined')return {tag:'virtual','wxKey':k,children:[]};return {tag:'virtual',children:[]};}
function _n(tag){return {tag:'wx-'+tag,attr:{},children:[],n:[],raw:{},generics:{}}}
function _p(a,b){b&&a.properities.push(b);}
function _s(scope,env,key){return typeof(scope[key])!='undefined'?scope[key]:env[key]}
function _wp(m){console.warn("WXMLRT_$gwx:"+m)}
function _wl(tname,prefix){_wp(prefix+':-1:-1:-1: Template `' + tname + '` is being called recursively, will be stop.')}
$gwn=console.warn;
$gwl=console.log;
function $gwh()
{
function x()
{
}
x.prototype = 
{
hn: function( obj, all )
{
if( typeof(obj) == 'object' )
{
var cnt=0;
var any1=false,any2=false;
for(var x in obj)
{
any1=any1|x==='__value__';
any2=any2|x==='__wxspec__';
cnt++;
if(cnt>2)break;
}
return cnt == 2 && any1 && any2 && ( all || obj.__wxspec__ !== 'm' || this.hn(obj.__value__) === 'h' ) ? "h" : "n";
}
return "n";
},
nh: function( obj, special )
{
return { __value__: obj, __wxspec__: special ? special : true }
},
rv: function( obj )
{
return this.hn(obj,true)==='n'?obj:this.rv(obj.__value__);
},
hm: function( obj )
{
if( typeof(obj) == 'object' )
{
var cnt=0;
var any1=false,any2=false;
for(var x in obj)
{
any1=any1|x==='__value__';
any2=any2|x==='__wxspec__';
cnt++;
if(cnt>2)break;
}
return cnt == 2 && any1 && any2 && (obj.__wxspec__ === 'm' || this.hm(obj.__value__) );
}
return false;
}
}
return new x;
}
wh=$gwh();
function $gstack(s){
var tmp=s.split('\n '+' '+' '+' ');
for(var i=0;i<tmp.length;++i){
if(0==i) continue;
if(")"===tmp[i][tmp[i].length-1])
tmp[i]=tmp[i].replace(/\s\(.*\)$/,"");
else
tmp[i]="at anonymous function";
}
return tmp.join('\n '+' '+' '+' ');
}
function $gwrt( should_pass_type_info )
{
function ArithmeticEv( ops, e, s, g, o )
{
var _f = false;
var rop = ops[0][1];
var _a,_b,_c,_d, _aa, _bb;
switch( rop )
{
case '?:':
_a = rev( ops[1], e, s, g, o, _f );
_c = should_pass_type_info && ( wh.hn(_a) === 'h' );
_d = wh.rv( _a ) ? rev( ops[2], e, s, g, o, _f ) : rev( ops[3], e, s, g, o, _f );
_d = _c && wh.hn( _d ) === 'n' ? wh.nh( _d, 'c' ) : _d;
return _d;
break;
case '&&':
_a = rev( ops[1], e, s, g, o, _f );
_c = should_pass_type_info && ( wh.hn(_a) === 'h' );
_d = wh.rv( _a ) ? rev( ops[2], e, s, g, o, _f ) : wh.rv( _a );
_d = _c && wh.hn( _d ) === 'n' ? wh.nh( _d, 'c' ) : _d;
return _d;
break;
case '||':
_a = rev( ops[1], e, s, g, o, _f );
_c = should_pass_type_info && ( wh.hn(_a) === 'h' );
_d = wh.rv( _a ) ? wh.rv(_a) : rev( ops[2], e, s, g, o, _f );
_d = _c && wh.hn( _d ) === 'n' ? wh.nh( _d, 'c' ) : _d;
return _d;
break;
case '+':
case '*':
case '/':
case '%':
case '|':
case '^':
case '&':
case '===':
case '==':
case '!=':
case '!==':
case '>=':
case '<=':
case '>':
case '<':
case '<<':
case '>>':
_a = rev( ops[1], e, s, g, o, _f );
_b = rev( ops[2], e, s, g, o, _f );
_c = should_pass_type_info && (wh.hn( _a ) === 'h' || wh.hn( _b ) === 'h');
switch( rop )
{
case '+':
_d = wh.rv( _a ) + wh.rv( _b );
break;
case '*':
_d = wh.rv( _a ) * wh.rv( _b );
break;
case '/':
_d = wh.rv( _a ) / wh.rv( _b );
break;
case '%':
_d = wh.rv( _a ) % wh.rv( _b );
break;
case '|':
_d = wh.rv( _a ) | wh.rv( _b );
break;
case '^':
_d = wh.rv( _a ) ^ wh.rv( _b );
break;
case '&':
_d = wh.rv( _a ) & wh.rv( _b );
break;
case '===':
_d = wh.rv( _a ) === wh.rv( _b );
break;
case '==':
_d = wh.rv( _a ) == wh.rv( _b );
break;
case '!=':
_d = wh.rv( _a ) != wh.rv( _b );
break;
case '!==':
_d = wh.rv( _a ) !== wh.rv( _b );
break;
case '>=':
_d = wh.rv( _a ) >= wh.rv( _b );
break;
case '<=':
_d = wh.rv( _a ) <= wh.rv( _b );
break;
case '>':
_d = wh.rv( _a ) > wh.rv( _b );
break;
case '<':
_d = wh.rv( _a ) < wh.rv( _b );
break;
case '<<':
_d = wh.rv( _a ) << wh.rv( _b );
break;
case '>>':
_d = wh.rv( _a ) >> wh.rv( _b );
break;
default:
break;
}
return _c ? wh.nh( _d, "c" ) : _d;
break;
case '-':
_a = ops.length === 3 ? rev( ops[1], e, s, g, o, _f ) : 0;
_b = ops.length === 3 ? rev( ops[2], e, s, g, o, _f ) : rev( ops[1], e, s, g, o, _f );
_c = should_pass_type_info && (wh.hn( _a ) === 'h' || wh.hn( _b ) === 'h');
_d = _c ? wh.rv( _a ) - wh.rv( _b ) : _a - _b;
return _c ? wh.nh( _d, "c" ) : _d;
break;
case '!':
_a = rev( ops[1], e, s, g, o, _f );
_c = should_pass_type_info && (wh.hn( _a ) == 'h');
_d = !wh.rv(_a);
return _c ? wh.nh( _d, "c" ) : _d;
case '~':
_a = rev( ops[1], e, s, g, o, _f );
_c = should_pass_type_info && (wh.hn( _a ) == 'h');
_d = ~wh.rv(_a);
return _c ? wh.nh( _d, "c" ) : _d;
default:
$gwn('unrecognized op' + rop );
}
}
function rev( ops, e, s, g, o, newap )
{
var op = ops[0];
var _f = false;
if ( typeof newap !== "undefined" ) o.ap = newap;
if( typeof(op)==='object' )
{
var vop=op[0];
var _a, _aa, _b, _bb, _c, _d, _s, _e, _ta, _tb, _td;
switch(vop)
{
case 2:
return ArithmeticEv(ops,e,s,g,o);
break;
case 4: 
return rev( ops[1], e, s, g, o, _f );
break;
case 5: 
switch( ops.length )
{
case 2: 
_a = rev( ops[1],e,s,g,o,_f );
return should_pass_type_info?[_a]:[wh.rv(_a)];
return [_a];
break;
case 1: 
return [];
break;
default:
_a = rev( ops[1],e,s,g,o,_f );
_b = rev( ops[2],e,s,g,o,_f );
_a.push( 
should_pass_type_info ?
_b :
wh.rv( _b )
);
return _a;
break;
}
break;
case 6:
_a = rev(ops[1],e,s,g,o);
var ap = o.ap;
_ta = wh.hn(_a)==='h';
_aa = _ta ? wh.rv(_a) : _a;
o.is_affected |= _ta;
if( should_pass_type_info )
{
if( _aa===null || typeof(_aa) === 'undefined' )
{
return _ta ? wh.nh(undefined, 'e') : undefined;
}
_b = rev(ops[2],e,s,g,o,_f);
_tb = wh.hn(_b) === 'h';
_bb = _tb ? wh.rv(_b) : _b;
o.ap = ap;
o.is_affected |= _tb;
if( _bb===null || typeof(_bb) === 'undefined' || 
_bb === "__proto__" || _bb === "prototype" || _bb === "caller" ) 
{
return (_ta || _tb) ? wh.nh(undefined, 'e') : undefined;
}
_d = _aa[_bb];
if ( typeof _d === 'function' && !ap ) _d = undefined;
_td = wh.hn(_d)==='h';
o.is_affected |= _td;
return (_ta || _tb) ? (_td ? _d : wh.nh(_d, 'e')) : _d;
}
else
{
if( _aa===null || typeof(_aa) === 'undefined' )
{
return undefined;
}
_b = rev(ops[2],e,s,g,o,_f);
_tb = wh.hn(_b) === 'h';
_bb = _tb ? wh.rv(_b) : _b;
o.ap = ap;
o.is_affected |= _tb;
if( _bb===null || typeof(_bb) === 'undefined' || 
_bb === "__proto__" || _bb === "prototype" || _bb === "caller" ) 
{
return undefined;
}
_d = _aa[_bb];
if ( typeof _d === 'function' && !ap ) _d = undefined;
_td = wh.hn(_d)==='h';
o.is_affected |= _td;
return _td ? wh.rv(_d) : _d;
}
case 7: 
switch(ops[1][0])
{
case 11:
o.is_affected |= wh.hn(g)==='h';
return g;
case 3:
_s = wh.rv( s );
_e = wh.rv( e );
_b = ops[1][1];
if (g && g.f && g.f.hasOwnProperty(_b) )
{
_a = g.f;
o.ap = true;
}
else
{
_a = _s && _s.hasOwnProperty(_b) ? 
s : (_e && _e.hasOwnProperty(_b) ? e : undefined );
}
if( should_pass_type_info )
{
if( _a )
{
_ta = wh.hn(_a) === 'h';
_aa = _ta ? wh.rv( _a ) : _a;
_d = _aa[_b];
_td = wh.hn(_d) === 'h';
o.is_affected |= _ta || _td;
_d = _ta && !_td ? wh.nh(_d,'e') : _d;
return _d;
}
}
else
{
if( _a )
{
_ta = wh.hn(_a) === 'h';
_aa = _ta ? wh.rv( _a ) : _a;
_d = _aa[_b];
_td = wh.hn(_d) === 'h';
o.is_affected |= _ta || _td;
return wh.rv(_d);
}
}
return undefined;
}
break;
case 8: 
_a = {};
_a[ops[1]] = rev(ops[2],e,s,g,o,_f);
return _a;
break;
case 9: 
_a = rev(ops[1],e,s,g,o,_f);
_b = rev(ops[2],e,s,g,o,_f);
function merge( _a, _b, _ow )
{
var ka, _bbk;
_ta = wh.hn(_a)==='h';
_tb = wh.hn(_b)==='h';
_aa = wh.rv(_a);
_bb = wh.rv(_b);
for(var k in _bb)
{
if ( _ow || !_aa.hasOwnProperty(k) )
{
_aa[k] = should_pass_type_info ? (_tb ? wh.nh(_bb[k],'e') : _bb[k]) : wh.rv(_bb[k]);
}
}
return _a;
}
var _c = _a
var _ow = true
if ( typeof(ops[1][0]) === "object" && ops[1][0][0] === 10 ) {
_a = _b
_b = _c
_ow = false
}
if ( typeof(ops[1][0]) === "object" && ops[1][0][0] === 10 ) {
var _r = {}
return merge( merge( _r, _a, _ow ), _b, _ow );
}
else
return merge( _a, _b, _ow );
break;
case 10:
_a = rev(ops[1],e,s,g,o,_f);
_a = should_pass_type_info ? _a : wh.rv( _a );
return _a ;
break;
case 12:
var _r;
_a = rev(ops[1],e,s,g,o);
if ( !o.ap )
{
return should_pass_type_info && wh.hn(_a)==='h' ? wh.nh( _r, 'f' ) : _r;
}
var ap = o.ap;
_b = rev(ops[2],e,s,g,o,_f);
o.ap = ap;
_ta = wh.hn(_a)==='h';
_tb = _ca(_b);
_aa = wh.rv(_a);	
_bb = wh.rv(_b); snap_bb=$gdc(_bb,"nv_");
try{
_r = typeof _aa === "function" ? $gdc(_aa.apply(null, snap_bb)) : undefined;
} catch (e){
e.message = e.message.replace(/nv_/g,"");
e.stack = e.stack.substring(0,e.stack.indexOf("\n", e.stack.lastIndexOf("at nv_")));
e.stack = e.stack.replace(/\snv_/g," "); 
e.stack = $gstack(e.stack);	
if(g.debugInfo)
{
e.stack += "\n "+" "+" "+" at "+g.debugInfo[0]+":"+g.debugInfo[1]+":"+g.debugInfo[2];
console.error(e);
}
_r = undefined;
}
return should_pass_type_info && (_tb || _ta) ? wh.nh( _r, 'f' ) : _r;
}
}
else
{
if( op === 3 || op === 1) return ops[1];
else if( op === 11 ) 
{
var _a='';
for( var i = 1 ; i < ops.length ; i++ )
{
var xp = wh.rv(rev(ops[i],e,s,g,o,_f));
_a += typeof(xp) === 'undefined' ? '' : xp;
}
return _a;
}
}
}
function wrapper( ops, e, s, g, o, newap )
{
if( ops[0] == '11182016' )
{
g.debugInfo = ops[2];
return rev( ops[1], e, s, g, o, newap );
}
else
{
g.debugInfo = null;
return rev( ops, e, s, g, o, newap );
}
}
return wrapper;
}
gra=$gwrt(true); 
grb=$gwrt(false); 
function TestTest( expr, ops, e,s,g, expect_a, expect_b, expect_affected )
{
{
var o = {is_affected:false};
var a = gra( ops, e,s,g, o );
if( JSON.stringify(a) != JSON.stringify( expect_a )
|| o.is_affected != expect_affected )
{
console.warn( "A. " + expr + " get result " + JSON.stringify(a) + ", " + o.is_affected + ", but " + JSON.stringify( expect_a ) + ", " + expect_affected + " is expected" );
}
}
{
var o = {is_affected:false};
var a = grb( ops, e,s,g, o );
if( JSON.stringify(a) != JSON.stringify( expect_b )
|| o.is_affected != expect_affected )
{
console.warn( "B. " + expr + " get result " + JSON.stringify(a) + ", " + o.is_affected + ", but " + JSON.stringify( expect_b ) + ", " + expect_affected + " is expected" );
}
}
}

function wfor( to_iter, func, env, _s, global, father, itemname, indexname, keyname )
{
var _n = wh.hn( to_iter ) === 'n'; 
var scope = wh.rv( _s ); 
var has_old_item = scope.hasOwnProperty(itemname);
var has_old_index = scope.hasOwnProperty(indexname);
var old_item = scope[itemname];
var old_index = scope[indexname];
var full = Object.prototype.toString.call(wh.rv(to_iter));
var type = full[8]; 
if( type === 'N' && full[10] === 'l' ) type = 'X'; 
var _y;
if( _n )
{
if( type === 'A' ) 
{
var r_iter_item;
for( var i = 0 ; i < to_iter.length ; i++ )
{
scope[itemname] = to_iter[i];
scope[indexname] = _n ? i : wh.nh(i, 'h');
r_iter_item = wh.rv(to_iter[i]);
var key = keyname && r_iter_item ? (keyname==="*this" ? r_iter_item : wh.rv(r_iter_item[keyname])) : undefined;
_y = _v(key);
_(father,_y);
func( env, scope, _y, global );
}
}
else if( type === 'O' ) 
{
var i = 0;
var r_iter_item;
for( var k in to_iter )
{
scope[itemname] = to_iter[k];
scope[indexname] = _n ? k : wh.nh(k, 'h');
r_iter_item = wh.rv(to_iter[k]);
var key = keyname && r_iter_item ? (keyname==="*this" ? r_iter_item : wh.rv(r_iter_item[keyname])) : undefined;
_y = _v(key);
_(father,_y);
func( env,scope,_y,global );
i++;
}
}
else if( type === 'S' ) 
{
for( var i = 0 ; i < to_iter.length ; i++ )
{
scope[itemname] = to_iter[i];
scope[indexname] = _n ? i : wh.nh(i, 'h');
_y = _v( to_iter[i] + i );
_(father,_y);
func( env,scope,_y,global );
}
}
else if( type === 'N' ) 
{
for( var i = 0 ; i < to_iter ; i++ )
{
scope[itemname] = i;
scope[indexname] = _n ? i : wh.nh(i, 'h');
_y = _v( i );
_(father,_y);
func(env,scope,_y,global);
}
}
else
{
}
}
else
{
var r_to_iter = wh.rv(to_iter);
var r_iter_item, iter_item;
if( type === 'A' ) 
{
for( var i = 0 ; i < r_to_iter.length ; i++ )
{
iter_item = r_to_iter[i];
iter_item = wh.hn(iter_item)==='n' ? wh.nh(iter_item,'h') : iter_item;
r_iter_item = wh.rv( iter_item );
scope[itemname] = iter_item
scope[indexname] = _n ? i : wh.nh(i, 'h');
var key = keyname && r_iter_item ? (keyname==="*this" ? r_iter_item : wh.rv(r_iter_item[keyname])) : undefined;
_y = _v(key);
_(father,_y);
func( env, scope, _y, global );
}
}
else if( type === 'O' ) 
{
var i=0;
for( var k in r_to_iter )
{
iter_item = r_to_iter[k];
iter_item = wh.hn(iter_item)==='n'? wh.nh(iter_item,'h') : iter_item;
r_iter_item = wh.rv( iter_item );
scope[itemname] = iter_item;
scope[indexname] = _n ? k : wh.nh(k, 'h');
var key = keyname && r_iter_item ? (keyname==="*this" ? r_iter_item : wh.rv(r_iter_item[keyname])) : undefined;
_y=_v(key);
_(father,_y);
func( env, scope, _y, global );
i++
}
}
else if( type === 'S' ) 
{
for( var i = 0 ; i < r_to_iter.length ; i++ )
{
iter_item = wh.nh(r_to_iter[i],'h');
scope[itemname] = iter_item;
scope[indexname] = _n ? i : wh.nh(i, 'h');
_y = _v( to_iter[i] + i );
_(father,_y);
func( env, scope, _y, global );
}
}
else if( type === 'N' ) 
{
for( var i = 0 ; i < r_to_iter ; i++ )
{
iter_item = wh.nh(i,'h');
scope[itemname] = iter_item;
scope[indexname]= _n ? i : wh.nh(i,'h');
_y = _v( i );
_(father,_y);
func(env,scope,_y,global);
}
}
else
{
}
}
if(has_old_item)
{
scope[itemname]=old_item;
}
else
{
delete scope[itemname];
}
if(has_old_index)
{
scope[indexname]=old_index;
}
else
{
delete scope[indexname];
}
}

function _ca(o)
{ 
if ( wh.hn(o) == 'h' ) return true;
if ( typeof o !== "object" ) return false;
for(var i in o){ 
if ( o.hasOwnProperty(i) ){
if (_ca(o[i])) return true;
}
}
return false;
}
function _da( node, attrname, opindex, raw, o )
{
var isaffected = false;
var value = $gdc( raw, "", 2 );
if ( o.ap && value && value.constructor===Function ) 
{
attrname = "$wxs:" + attrname; 
node.attr["$gdc"] = $gdc;
}
if ( o.is_affected || _ca(raw) ) 
{
node.n.push( attrname );
node.raw[attrname] = raw;
}
node.attr[attrname] = value;
}
function _r( node, attrname, opindex, env, scope, global ) 
{
global.opindex=opindex;
var o = {}, _env;
var a = grb( z[opindex], env, scope, global, o );
_da( node, attrname, opindex, a, o );
}
function _rz( z, node, attrname, opindex, env, scope, global ) 
{
global.opindex=opindex;
var o = {}, _env;
var a = grb( z[opindex], env, scope, global, o );
_da( node, attrname, opindex, a, o );
}
function _o( opindex, env, scope, global )
{
global.opindex=opindex;
var nothing = {};
var r = grb( z[opindex], env, scope, global, nothing );
return (r&&r.constructor===Function) ? undefined : r;
}
function _oz( z, opindex, env, scope, global )
{
global.opindex=opindex;
var nothing = {};
var r = grb( z[opindex], env, scope, global, nothing );
return (r&&r.constructor===Function) ? undefined : r;
}
function _1( opindex, env, scope, global, o )
{
var o = o || {};
global.opindex=opindex;
return gra( z[opindex], env, scope, global, o );
}
function _1z( z, opindex, env, scope, global, o )
{
var o = o || {};
global.opindex=opindex;
return gra( z[opindex], env, scope, global, o );
}
function _2( opindex, func, env, scope, global, father, itemname, indexname, keyname )
{
var o = {};
var to_iter = _1( opindex, env, scope, global );
wfor( to_iter, func, env, scope, global, father, itemname, indexname, keyname );
}
function _2z( z, opindex, func, env, scope, global, father, itemname, indexname, keyname )
{
var o = {};
var to_iter = _1z( z, opindex, env, scope, global );
wfor( to_iter, func, env, scope, global, father, itemname, indexname, keyname );
}


function _m(tag,attrs,generics,env,scope,global)
{
var tmp=_n(tag);
var base=0;
for(var i = 0 ; i < attrs.length ; i+=2 )
{
if(base+attrs[i+1]<0)
{
tmp.attr[attrs[i]]=true;
}
else
{
_r(tmp,attrs[i],base+attrs[i+1],env,scope,global);
if(base===0)base=attrs[i+1];
}
}
for(var i=0;i<generics.length;i+=2)
{
if(base+generics[i+1]<0)
{
tmp.generics[generics[i]]="";
}
else
{
var $t=grb(z[base+generics[i+1]],env,scope,global);
if ($t!="") $t="wx-"+$t;
tmp.generics[generics[i]]=$t;
if(base===0)base=generics[i+1];
}
}
return tmp;
}
function _mz(z,tag,attrs,generics,env,scope,global)
{
var tmp=_n(tag);
var base=0;
for(var i = 0 ; i < attrs.length ; i+=2 )
{
if(base+attrs[i+1]<0)
{
tmp.attr[attrs[i]]=true;
}
else
{
_rz(z, tmp,attrs[i],base+attrs[i+1],env,scope,global);
if(base===0)base=attrs[i+1];
}
}
for(var i=0;i<generics.length;i+=2)
{
if(base+generics[i+1]<0)
{
tmp.generics[generics[i]]="";
}
else
{
var $t=grb(z[base+generics[i+1]],env,scope,global);
if ($t!="") $t="wx-"+$t;
tmp.generics[generics[i]]=$t;
if(base===0)base=generics[i+1];
}
}
return tmp;
}

var nf_init=function(){
if(typeof __WXML_GLOBAL__==="undefined"||undefined===__WXML_GLOBAL__.wxs_nf_init){
nf_init_Object();nf_init_Function();nf_init_Array();nf_init_String();nf_init_Boolean();nf_init_Number();nf_init_Math();nf_init_Date();nf_init_RegExp();
}
if(typeof __WXML_GLOBAL__!=="undefined") __WXML_GLOBAL__.wxs_nf_init=true;
};
var nf_init_Object=function(){
Object.defineProperty(Object.prototype,"nv_constructor",{writable:true,value:"Object"})
Object.defineProperty(Object.prototype,"nv_toString",{writable:true,value:function(){return "[object Object]"}})
}
var nf_init_Function=function(){
Object.defineProperty(Function.prototype,"nv_constructor",{writable:true,value:"Function"})
Object.defineProperty(Function.prototype,"nv_length",{get:function(){return this.length;},set:function(){}});
Object.defineProperty(Function.prototype,"nv_toString",{writable:true,value:function(){return "[function Function]"}})
}
var nf_init_Array=function(){
Object.defineProperty(Array.prototype,"nv_toString",{writable:true,value:function(){return this.nv_join();}})
Object.defineProperty(Array.prototype,"nv_join",{writable:true,value:function(s){
s=undefined==s?',':s;
var r="";
for(var i=0;i<this.length;++i){
if(0!=i) r+=s;
if(null==this[i]||undefined==this[i]) r+='';	
else if(typeof this[i]=='function') r+=this[i].nv_toString();
else if(typeof this[i]=='object'&&this[i].nv_constructor==="Array") r+=this[i].nv_join();
else r+=this[i].toString();
}
return r;
}})
Object.defineProperty(Array.prototype,"nv_constructor",{writable:true,value:"Array"})
Object.defineProperty(Array.prototype,"nv_concat",{writable:true,value:Array.prototype.concat})
Object.defineProperty(Array.prototype,"nv_pop",{writable:true,value:Array.prototype.pop})
Object.defineProperty(Array.prototype,"nv_push",{writable:true,value:Array.prototype.push})
Object.defineProperty(Array.prototype,"nv_reverse",{writable:true,value:Array.prototype.reverse})
Object.defineProperty(Array.prototype,"nv_shift",{writable:true,value:Array.prototype.shift})
Object.defineProperty(Array.prototype,"nv_slice",{writable:true,value:Array.prototype.slice})
Object.defineProperty(Array.prototype,"nv_sort",{writable:true,value:Array.prototype.sort})
Object.defineProperty(Array.prototype,"nv_splice",{writable:true,value:Array.prototype.splice})
Object.defineProperty(Array.prototype,"nv_unshift",{writable:true,value:Array.prototype.unshift})
Object.defineProperty(Array.prototype,"nv_indexOf",{writable:true,value:Array.prototype.indexOf})
Object.defineProperty(Array.prototype,"nv_lastIndexOf",{writable:true,value:Array.prototype.lastIndexOf})
Object.defineProperty(Array.prototype,"nv_every",{writable:true,value:Array.prototype.every})
Object.defineProperty(Array.prototype,"nv_some",{writable:true,value:Array.prototype.some})
Object.defineProperty(Array.prototype,"nv_forEach",{writable:true,value:Array.prototype.forEach})
Object.defineProperty(Array.prototype,"nv_map",{writable:true,value:Array.prototype.map})
Object.defineProperty(Array.prototype,"nv_filter",{writable:true,value:Array.prototype.filter})
Object.defineProperty(Array.prototype,"nv_reduce",{writable:true,value:Array.prototype.reduce})
Object.defineProperty(Array.prototype,"nv_reduceRight",{writable:true,value:Array.prototype.reduceRight})
Object.defineProperty(Array.prototype,"nv_length",{get:function(){return this.length;},set:function(value){this.length=value;}});
}
var nf_init_String=function(){
Object.defineProperty(String.prototype,"nv_constructor",{writable:true,value:"String"})
Object.defineProperty(String.prototype,"nv_toString",{writable:true,value:String.prototype.toString})
Object.defineProperty(String.prototype,"nv_valueOf",{writable:true,value:String.prototype.valueOf})
Object.defineProperty(String.prototype,"nv_charAt",{writable:true,value:String.prototype.charAt})
Object.defineProperty(String.prototype,"nv_charCodeAt",{writable:true,value:String.prototype.charCodeAt})
Object.defineProperty(String.prototype,"nv_concat",{writable:true,value:String.prototype.concat})
Object.defineProperty(String.prototype,"nv_indexOf",{writable:true,value:String.prototype.indexOf})
Object.defineProperty(String.prototype,"nv_lastIndexOf",{writable:true,value:String.prototype.lastIndexOf})
Object.defineProperty(String.prototype,"nv_localeCompare",{writable:true,value:String.prototype.localeCompare})
Object.defineProperty(String.prototype,"nv_match",{writable:true,value:String.prototype.match})
Object.defineProperty(String.prototype,"nv_replace",{writable:true,value:String.prototype.replace})
Object.defineProperty(String.prototype,"nv_search",{writable:true,value:String.prototype.search})
Object.defineProperty(String.prototype,"nv_slice",{writable:true,value:String.prototype.slice})
Object.defineProperty(String.prototype,"nv_split",{writable:true,value:String.prototype.split})
Object.defineProperty(String.prototype,"nv_substring",{writable:true,value:String.prototype.substring})
Object.defineProperty(String.prototype,"nv_toLowerCase",{writable:true,value:String.prototype.toLowerCase})
Object.defineProperty(String.prototype,"nv_toLocaleLowerCase",{writable:true,value:String.prototype.toLocaleLowerCase})
Object.defineProperty(String.prototype,"nv_toUpperCase",{writable:true,value:String.prototype.toUpperCase})
Object.defineProperty(String.prototype,"nv_toLocaleUpperCase",{writable:true,value:String.prototype.toLocaleUpperCase})
Object.defineProperty(String.prototype,"nv_trim",{writable:true,value:String.prototype.trim})
Object.defineProperty(String.prototype,"nv_length",{get:function(){return this.length;},set:function(value){this.length=value;}});
}
var nf_init_Boolean=function(){
Object.defineProperty(Boolean.prototype,"nv_constructor",{writable:true,value:"Boolean"})
Object.defineProperty(Boolean.prototype,"nv_toString",{writable:true,value:Boolean.prototype.toString})
Object.defineProperty(Boolean.prototype,"nv_valueOf",{writable:true,value:Boolean.prototype.valueOf})
}
var nf_init_Number=function(){
Object.defineProperty(Number,"nv_MAX_VALUE",{writable:false,value:Number.MAX_VALUE})
Object.defineProperty(Number,"nv_MIN_VALUE",{writable:false,value:Number.MIN_VALUE})
Object.defineProperty(Number,"nv_NEGATIVE_INFINITY",{writable:false,value:Number.NEGATIVE_INFINITY})
Object.defineProperty(Number,"nv_POSITIVE_INFINITY",{writable:false,value:Number.POSITIVE_INFINITY})
Object.defineProperty(Number.prototype,"nv_constructor",{writable:true,value:"Number"})
Object.defineProperty(Number.prototype,"nv_toString",{writable:true,value:Number.prototype.toString})
Object.defineProperty(Number.prototype,"nv_toLocaleString",{writable:true,value:Number.prototype.toLocaleString})
Object.defineProperty(Number.prototype,"nv_valueOf",{writable:true,value:Number.prototype.valueOf})
Object.defineProperty(Number.prototype,"nv_toFixed",{writable:true,value:Number.prototype.toFixed})
Object.defineProperty(Number.prototype,"nv_toExponential",{writable:true,value:Number.prototype.toExponential})
Object.defineProperty(Number.prototype,"nv_toPrecision",{writable:true,value:Number.prototype.toPrecision})
}
var nf_init_Math=function(){
Object.defineProperty(Math,"nv_E",{writable:false,value:Math.E})
Object.defineProperty(Math,"nv_LN10",{writable:false,value:Math.LN10})
Object.defineProperty(Math,"nv_LN2",{writable:false,value:Math.LN2})
Object.defineProperty(Math,"nv_LOG2E",{writable:false,value:Math.LOG2E})
Object.defineProperty(Math,"nv_LOG10E",{writable:false,value:Math.LOG10E})
Object.defineProperty(Math,"nv_PI",{writable:false,value:Math.PI})
Object.defineProperty(Math,"nv_SQRT1_2",{writable:false,value:Math.SQRT1_2})
Object.defineProperty(Math,"nv_SQRT2",{writable:false,value:Math.SQRT2})
Object.defineProperty(Math,"nv_abs",{writable:false,value:Math.abs})
Object.defineProperty(Math,"nv_acos",{writable:false,value:Math.acos})
Object.defineProperty(Math,"nv_asin",{writable:false,value:Math.asin})
Object.defineProperty(Math,"nv_atan",{writable:false,value:Math.atan})
Object.defineProperty(Math,"nv_atan2",{writable:false,value:Math.atan2})
Object.defineProperty(Math,"nv_ceil",{writable:false,value:Math.ceil})
Object.defineProperty(Math,"nv_cos",{writable:false,value:Math.cos})
Object.defineProperty(Math,"nv_exp",{writable:false,value:Math.exp})
Object.defineProperty(Math,"nv_floor",{writable:false,value:Math.floor})
Object.defineProperty(Math,"nv_log",{writable:false,value:Math.log})
Object.defineProperty(Math,"nv_max",{writable:false,value:Math.max})
Object.defineProperty(Math,"nv_min",{writable:false,value:Math.min})
Object.defineProperty(Math,"nv_pow",{writable:false,value:Math.pow})
Object.defineProperty(Math,"nv_random",{writable:false,value:Math.random})
Object.defineProperty(Math,"nv_round",{writable:false,value:Math.round})
Object.defineProperty(Math,"nv_sin",{writable:false,value:Math.sin})
Object.defineProperty(Math,"nv_sqrt",{writable:false,value:Math.sqrt})
Object.defineProperty(Math,"nv_tan",{writable:false,value:Math.tan})
}
var nf_init_Date=function(){
Object.defineProperty(Date.prototype,"nv_constructor",{writable:true,value:"Date"})
Object.defineProperty(Date,"nv_parse",{writable:true,value:Date.parse})
Object.defineProperty(Date,"nv_UTC",{writable:true,value:Date.UTC})
Object.defineProperty(Date,"nv_now",{writable:true,value:Date.now})
Object.defineProperty(Date.prototype,"nv_toString",{writable:true,value:Date.prototype.toString})
Object.defineProperty(Date.prototype,"nv_toDateString",{writable:true,value:Date.prototype.toDateString})
Object.defineProperty(Date.prototype,"nv_toTimeString",{writable:true,value:Date.prototype.toTimeString})
Object.defineProperty(Date.prototype,"nv_toLocaleString",{writable:true,value:Date.prototype.toLocaleString})
Object.defineProperty(Date.prototype,"nv_toLocaleDateString",{writable:true,value:Date.prototype.toLocaleDateString})
Object.defineProperty(Date.prototype,"nv_toLocaleTimeString",{writable:true,value:Date.prototype.toLocaleTimeString})
Object.defineProperty(Date.prototype,"nv_valueOf",{writable:true,value:Date.prototype.valueOf})
Object.defineProperty(Date.prototype,"nv_getTime",{writable:true,value:Date.prototype.getTime})
Object.defineProperty(Date.prototype,"nv_getFullYear",{writable:true,value:Date.prototype.getFullYear})
Object.defineProperty(Date.prototype,"nv_getUTCFullYear",{writable:true,value:Date.prototype.getUTCFullYear})
Object.defineProperty(Date.prototype,"nv_getMonth",{writable:true,value:Date.prototype.getMonth})
Object.defineProperty(Date.prototype,"nv_getUTCMonth",{writable:true,value:Date.prototype.getUTCMonth})
Object.defineProperty(Date.prototype,"nv_getDate",{writable:true,value:Date.prototype.getDate})
Object.defineProperty(Date.prototype,"nv_getUTCDate",{writable:true,value:Date.prototype.getUTCDate})
Object.defineProperty(Date.prototype,"nv_getDay",{writable:true,value:Date.prototype.getDay})
Object.defineProperty(Date.prototype,"nv_getUTCDay",{writable:true,value:Date.prototype.getUTCDay})
Object.defineProperty(Date.prototype,"nv_getHours",{writable:true,value:Date.prototype.getHours})
Object.defineProperty(Date.prototype,"nv_getUTCHours",{writable:true,value:Date.prototype.getUTCHours})
Object.defineProperty(Date.prototype,"nv_getMinutes",{writable:true,value:Date.prototype.getMinutes})
Object.defineProperty(Date.prototype,"nv_getUTCMinutes",{writable:true,value:Date.prototype.getUTCMinutes})
Object.defineProperty(Date.prototype,"nv_getSeconds",{writable:true,value:Date.prototype.getSeconds})
Object.defineProperty(Date.prototype,"nv_getUTCSeconds",{writable:true,value:Date.prototype.getUTCSeconds})
Object.defineProperty(Date.prototype,"nv_getMilliseconds",{writable:true,value:Date.prototype.getMilliseconds})
Object.defineProperty(Date.prototype,"nv_getUTCMilliseconds",{writable:true,value:Date.prototype.getUTCMilliseconds})
Object.defineProperty(Date.prototype,"nv_getTimezoneOffset",{writable:true,value:Date.prototype.getTimezoneOffset})
Object.defineProperty(Date.prototype,"nv_setTime",{writable:true,value:Date.prototype.setTime})
Object.defineProperty(Date.prototype,"nv_setMilliseconds",{writable:true,value:Date.prototype.setMilliseconds})
Object.defineProperty(Date.prototype,"nv_setUTCMilliseconds",{writable:true,value:Date.prototype.setUTCMilliseconds})
Object.defineProperty(Date.prototype,"nv_setSeconds",{writable:true,value:Date.prototype.setSeconds})
Object.defineProperty(Date.prototype,"nv_setUTCSeconds",{writable:true,value:Date.prototype.setUTCSeconds})
Object.defineProperty(Date.prototype,"nv_setMinutes",{writable:true,value:Date.prototype.setMinutes})
Object.defineProperty(Date.prototype,"nv_setUTCMinutes",{writable:true,value:Date.prototype.setUTCMinutes})
Object.defineProperty(Date.prototype,"nv_setHours",{writable:true,value:Date.prototype.setHours})
Object.defineProperty(Date.prototype,"nv_setUTCHours",{writable:true,value:Date.prototype.setUTCHours})
Object.defineProperty(Date.prototype,"nv_setDate",{writable:true,value:Date.prototype.setDate})
Object.defineProperty(Date.prototype,"nv_setUTCDate",{writable:true,value:Date.prototype.setUTCDate})
Object.defineProperty(Date.prototype,"nv_setMonth",{writable:true,value:Date.prototype.setMonth})
Object.defineProperty(Date.prototype,"nv_setUTCMonth",{writable:true,value:Date.prototype.setUTCMonth})
Object.defineProperty(Date.prototype,"nv_setFullYear",{writable:true,value:Date.prototype.setFullYear})
Object.defineProperty(Date.prototype,"nv_setUTCFullYear",{writable:true,value:Date.prototype.setUTCFullYear})
Object.defineProperty(Date.prototype,"nv_toUTCString",{writable:true,value:Date.prototype.toUTCString})
Object.defineProperty(Date.prototype,"nv_toISOString",{writable:true,value:Date.prototype.toISOString})
Object.defineProperty(Date.prototype,"nv_toJSON",{writable:true,value:Date.prototype.toJSON})
}
var nf_init_RegExp=function(){
Object.defineProperty(RegExp.prototype,"nv_constructor",{writable:true,value:"RegExp"})
Object.defineProperty(RegExp.prototype,"nv_exec",{writable:true,value:RegExp.prototype.exec})
Object.defineProperty(RegExp.prototype,"nv_test",{writable:true,value:RegExp.prototype.test})
Object.defineProperty(RegExp.prototype,"nv_toString",{writable:true,value:RegExp.prototype.toString})
Object.defineProperty(RegExp.prototype,"nv_source",{get:function(){return this.source;},set:function(){}});
Object.defineProperty(RegExp.prototype,"nv_global",{get:function(){return this.global;},set:function(){}});
Object.defineProperty(RegExp.prototype,"nv_ignoreCase",{get:function(){return this.ignoreCase;},set:function(){}});
Object.defineProperty(RegExp.prototype,"nv_multiline",{get:function(){return this.multiline;},set:function(){}});
Object.defineProperty(RegExp.prototype,"nv_lastIndex",{get:function(){return this.lastIndex;},set:function(v){this.lastIndex=v;}});
}
nf_init();
var nv_getDate=function(){var args=Array.prototype.slice.call(arguments);args.unshift(Date);return new(Function.prototype.bind.apply(Date, args));}
var nv_getRegExp=function(){var args=Array.prototype.slice.call(arguments);args.unshift(RegExp);return new(Function.prototype.bind.apply(RegExp, args));}
var nv_console={}
nv_console.nv_log=function(){var res="WXSRT:";for(var i=0;i<arguments.length;++i)res+=arguments[i]+" ";console.log(res);}
var nv_parseInt = parseInt, nv_parseFloat = parseFloat, nv_isNaN = isNaN, nv_isFinite = isFinite, nv_decodeURI = decodeURI, nv_decodeURIComponent = decodeURIComponent, nv_encodeURI = encodeURI, nv_encodeURIComponent = encodeURIComponent;
function $gdc(o,p,r) {
o=wh.rv(o);
if(o===null||o===undefined) return o;
if(typeof o==="string"||typeof o==="boolean"||typeof o==="number") return o;
if(o.constructor===Object){
var copy={};
for(var k in o)
if(Object.prototype.hasOwnProperty.call(o,k))
if(undefined===p) copy[k.substring(3)]=$gdc(o[k],p,r);
else copy[p+k]=$gdc(o[k],p,r);
return copy;
}
if(o.constructor===Array){
var copy=[];
for(var i=0;i<o.length;i++) copy.push($gdc(o[i],p,r));
return copy;
}
if(o.constructor===Date){
var copy=new Date();
copy.setTime(o.getTime());
return copy;
}
if(o.constructor===RegExp){
var f="";
if(o.global) f+="g";
if(o.ignoreCase) f+="i";
if(o.multiline) f+="m";
return (new RegExp(o.source,f));
}
if(r&&typeof o==="function"){
if ( r == 1 ) return $gdc(o(),undefined, 2);
if ( r == 2 ) return o;
}
return null;
}
var nv_JSON={}
nv_JSON.nv_stringify=function(o){
JSON.stringify(o);
return JSON.stringify($gdc(o));
}
nv_JSON.nv_parse=function(o){
if(o===undefined) return undefined;
var t=JSON.parse(o);
return $gdc(t,'nv_');
}

function _af(p, a, r, c){
p.extraAttr = {"t_action": a, "t_rawid": r };
if ( typeof(c) != 'undefined' ) p.extraAttr.t_cid = c;
}

function _ai(i,p,e,me,r,c){var x=_grp(p,e,me);if(x)i.push(x);else{i.push('');_wp(me+':import:'+r+':'+c+': Path `'+p+'` not found from `'+me+'`.')}}
function _grp(p,e,me){if(p[0]!='/'){var mepart=me.split('/');mepart.pop();var ppart=p.split('/');for(var i=0;i<ppart.length;i++){if( ppart[i]=='..')mepart.pop();else if(!ppart[i]||ppart[i]=='.')continue;else mepart.push(ppart[i]);}p=mepart.join('/');}if(me[0]=='.'&&p[0]=='/')p='.'+p;if(e[p])return p;if(e[p+'.wxml'])return p+'.wxml';}
function _gd(p,c,e,d){if(!c)return;if(d[p][c])return d[p][c];for(var x=e[p].i.length-1;x>=0;x--){if(e[p].i[x]&&d[e[p].i[x]][c])return d[e[p].i[x]][c]};for(var x=e[p].ti.length-1;x>=0;x--){var q=_grp(e[p].ti[x],e,p);if(q&&d[q][c])return d[q][c]}var ii=_gapi(e,p);for(var x=0;x<ii.length;x++){if(ii[x]&&d[ii[x]][c])return d[ii[x]][c]}for(var k=e[p].j.length-1;k>=0;k--)if(e[p].j[k]){for(var q=e[e[p].j[k]].ti.length-1;q>=0;q--){var pp=_grp(e[e[p].j[k]].ti[q],e,p);if(pp&&d[pp][c]){return d[pp][c]}}}}
function _gapi(e,p){if(!p)return [];if($gaic[p]){return $gaic[p]};var ret=[],q=[],h=0,t=0,put={},visited={};q.push(p);visited[p]=true;t++;while(h<t){var a=q[h++];for(var i=0;i<e[a].ic.length;i++){var nd=e[a].ic[i];var np=_grp(nd,e,a);if(np&&!visited[np]){visited[np]=true;q.push(np);t++;}}for(var i=0;a!=p&&i<e[a].ti.length;i++){var ni=e[a].ti[i];var nm=_grp(ni,e,a);if(nm&&!put[nm]){put[nm]=true;ret.push(nm);}}}$gaic[p]=ret;return ret;}
var $ixc={};function _ic(p,ent,me,e,s,r,gg){var x=_grp(p,ent,me);ent[me].j.push(x);if(x){if($ixc[x]){_wp('-1:include:-1:-1: `'+p+'` is being included in a loop, will be stop.');return;}$ixc[x]=true;try{ent[x].f(e,s,r,gg)}catch(e){}$ixc[x]=false;}else{_wp(me+':include:-1:-1: Included path `'+p+'` not found from `'+me+'`.')}}
function _w(tn,f,line,c){_wp(f+':template:'+line+':'+c+': Template `'+tn+'` not found.');}function _ev(dom){var changed=false;delete dom.properities;delete dom.n;if(dom.children){do{changed=false;var newch = [];for(var i=0;i<dom.children.length;i++){var ch=dom.children[i];if( ch.tag=='virtual'){changed=true;for(var j=0;ch.children&&j<ch.children.length;j++){newch.push(ch.children[j]);}}else { newch.push(ch); } } dom.children = newch; }while(changed);for(var i=0;i<dom.children.length;i++){_ev(dom.children[i]);}} return dom; }
function _tsd( root )
{
if( root.tag == "wx-wx-scope" ) 
{
root.tag = "virtual";
root.wxCkey = "11";
root['wxScopeData'] = root.attr['wx:scope-data'];
delete root.n;
delete root.raw;
delete root.generics;
delete root.attr;
}
for( var i = 0 ; root.children && i < root.children.length ; i++ )
{
_tsd( root.children[i] );
}
return root;
}

var e_={}
if(typeof(global.entrys)==='undefined')global.entrys={};e_=global.entrys;
var d_={}
if(typeof(global.defines)==='undefined')global.defines={};d_=global.defines;
var f_={}
if(typeof(global.modules)==='undefined')global.modules={};f_=global.modules || {};
var p_={}
__WXML_GLOBAL__.ops_cached = __WXML_GLOBAL__.ops_cached || {}
__WXML_GLOBAL__.ops_set = __WXML_GLOBAL__.ops_set || {};
__WXML_GLOBAL__.ops_init = __WXML_GLOBAL__.ops_init || {};
var z=__WXML_GLOBAL__.ops_set.$gwx || [];
function gz$gwx_1(){
if( __WXML_GLOBAL__.ops_cached.$gwx_1)return __WXML_GLOBAL__.ops_cached.$gwx_1
__WXML_GLOBAL__.ops_cached.$gwx_1=[];
(function(z){var a=11;function Z(ops){z.push(ops)}
Z([3,'card-data-viewer data-v-b99b25cd'])
Z([[7],[3,'a']])
Z([3,'mifare-classic-data data-v-b99b25cd'])
Z([[7],[3,'b']])
Z([3,'header-actions data-v-b99b25cd'])
Z([[7],[3,'c']])
Z([[7],[3,'e']])
Z([3,'quick-edit-btn data-v-b99b25cd'])
Z([[7],[3,'d']])
Z([3,'__l'])
Z([3,'data-v-b99b25cd'])
Z([3,'b99b25cd-0'])
Z(z[8])
Z([[7],[3,'f']])
Z([[7],[3,'h']])
Z([3,'edit-btn data-v-b99b25cd'])
Z([[7],[3,'g']])
Z(z[9])
Z(z[10])
Z([3,'b99b25cd-1'])
Z(z[16])
Z([[7],[3,'j']])
Z([3,'save-btn data-v-b99b25cd'])
Z([[7],[3,'i']])
Z(z[9])
Z(z[10])
Z([3,'b99b25cd-2'])
Z(z[23])
Z([3,'simple-table data-v-b99b25cd'])
Z([[7],[3,'k']])
Z([3,'sector'])
Z([[7],[3,'l']])
Z([3,'b'])
Z([3,'block'])
Z([[6],[[7],[3,'sector']],[3,'a']])
Z([3,'h'])
Z([[7],[3,'m']])
Z([[6],[[7],[3,'block']],[3,'g']])
Z([3,'edit-block-btn data-v-b99b25cd'])
Z([[6],[[7],[3,'block']],[3,'f']])
Z(z[9])
Z(z[10])
Z([[6],[[7],[3,'block']],[3,'e']])
Z(z[39])
Z([[7],[3,'n']])
Z([3,'ntag-data data-v-b99b25cd'])
Z([[7],[3,'o']])
Z(z[4])
Z([[7],[3,'p']])
Z([[7],[3,'r']])
Z(z[7])
Z([[7],[3,'q']])
Z(z[9])
Z(z[10])
Z([3,'b99b25cd-4'])
Z(z[51])
Z([[7],[3,'s']])
Z([[7],[3,'v']])
Z(z[15])
Z([[7],[3,'t']])
Z(z[9])
Z(z[10])
Z([3,'b99b25cd-5'])
Z(z[59])
Z([[7],[3,'x']])
Z(z[22])
Z([[7],[3,'w']])
Z(z[9])
Z(z[10])
Z([3,'b99b25cd-6'])
Z(z[66])
Z(z[28])
Z([[7],[3,'y']])
Z([3,'page'])
Z([[7],[3,'z']])
Z([3,'l'])
Z([[4],[[5],[[5],[[5],[[5],[[5],[1,'table-row']],[1,'data-v-b99b25cd']],[[2,'&&'],[[6],[[7],[3,'page']],[3,'m']],[1,'header-page']]],[[2,'&&'],[[6],[[7],[3,'page']],[3,'n']],[1,'user-page']]],[[2,'&&'],[[6],[[7],[3,'page']],[3,'o']],[1,'config-page']]]])
Z([[6],[[7],[3,'page']],[3,'f']])
Z([[7],[3,'A']])
Z([[6],[[7],[3,'page']],[3,'h']])
Z([[6],[[7],[3,'page']],[3,'k']])
Z([3,'edit-page-btn data-v-b99b25cd'])
Z([[6],[[7],[3,'page']],[3,'j']])
Z(z[9])
Z(z[10])
Z([[6],[[7],[3,'page']],[3,'i']])
Z(z[82])
Z([[7],[3,'B']])
Z([[7],[3,'C']])
Z([[7],[3,'E']])
Z([3,'copy-btn data-v-b99b25cd'])
Z([[7],[3,'D']])
Z(z[9])
Z(z[10])
Z([3,'b99b25cd-8'])
Z(z[91])
Z([[7],[3,'H']])
Z([[7],[3,'J']])
Z(z[90])
Z([[7],[3,'I']])
Z(z[9])
Z(z[10])
Z([3,'b99b25cd-9'])
Z(z[99])
Z([[7],[3,'X']])
Z(z[9])
Z([3,'r data-v-b99b25cd'])
Z([3,'b99b25cd-10'])
Z(z[104])
Z([3,'quickEditPopup'])
Z([[4],[[5],[1,'d']]])
Z([[7],[3,'r0']])
Z([[7],[3,'aj']])
Z(z[9])
Z(z[106])
Z([3,'b99b25cd-11'])
Z(z[112])
Z([3,'editPopup'])
Z(z[110])
Z(z[111])
})(__WXML_GLOBAL__.ops_cached.$gwx_1);return __WXML_GLOBAL__.ops_cached.$gwx_1
}
function gz$gwx_2(){
if( __WXML_GLOBAL__.ops_cached.$gwx_2)return __WXML_GLOBAL__.ops_cached.$gwx_2
__WXML_GLOBAL__.ops_cached.$gwx_2=[];
(function(z){var a=11;function Z(ops){z.push(ops)}
Z([[7],[3,'f']])
Z([3,'data-v-a80667a0'])
Z([[7],[3,'d']])
Z([[7],[3,'e']])
Z([[7],[3,'c']])
Z([3,'__l'])
Z(z[1])
Z([3,'a80667a0-0'])
Z(z[4])
})(__WXML_GLOBAL__.ops_cached.$gwx_2);return __WXML_GLOBAL__.ops_cached.$gwx_2
}
function gz$gwx_3(){
if( __WXML_GLOBAL__.ops_cached.$gwx_3)return __WXML_GLOBAL__.ops_cached.$gwx_3
__WXML_GLOBAL__.ops_cached.$gwx_3=[];
(function(z){var a=11;function Z(ops){z.push(ops)}
Z([[7],[3,'e']])
Z([[4],[[5],[[5],[[5],[[5],[1,'uni-icons']],[[7],[3,'b']]],[[7],[3,'c']]],[[7],[3,'d']]]])
Z([[7],[3,'a']])
})(__WXML_GLOBAL__.ops_cached.$gwx_3);return __WXML_GLOBAL__.ops_cached.$gwx_3
}
function gz$gwx_4(){
if( __WXML_GLOBAL__.ops_cached.$gwx_4)return __WXML_GLOBAL__.ops_cached.$gwx_4
__WXML_GLOBAL__.ops_cached.$gwx_4=[];
(function(z){var a=11;function Z(ops){z.push(ops)}
Z([[7],[3,'q']])
Z([3,'uni-load-more'])
Z([[7],[3,'n']])
})(__WXML_GLOBAL__.ops_cached.$gwx_4);return __WXML_GLOBAL__.ops_cached.$gwx_4
}
function gz$gwx_5(){
if( __WXML_GLOBAL__.ops_cached.$gwx_5)return __WXML_GLOBAL__.ops_cached.$gwx_5
__WXML_GLOBAL__.ops_cached.$gwx_5=[];
(function(z){var a=11;function Z(ops){z.push(ops)}
Z([3,'uni-popup-dialog'])
Z([[7],[3,'c']])
Z([3,'uni-dialog-content'])
Z([[6],[[7],[3,'$slots']],[3,'d']])
Z(z[2])
Z(z[3])
Z([[7],[3,'r0']])
Z([[7],[3,'k']])
})(__WXML_GLOBAL__.ops_cached.$gwx_5);return __WXML_GLOBAL__.ops_cached.$gwx_5
}
function gz$gwx_6(){
if( __WXML_GLOBAL__.ops_cached.$gwx_6)return __WXML_GLOBAL__.ops_cached.$gwx_6
__WXML_GLOBAL__.ops_cached.$gwx_6=[];
(function(z){var a=11;function Z(ops){z.push(ops)}
Z([[7],[3,'a']])
Z([[7],[3,'j']])
Z([[7],[3,'b']])
Z([3,'__l'])
Z([[7],[3,'c']])
Z([3,'1'])
Z([3,'6083195e-0'])
Z([[7],[3,'d']])
Z([[7],[3,'i']])
Z(z[3])
Z([[7],[3,'h']])
Z([3,'2'])
Z([3,'6083195e-1'])
Z(z[8])
Z([[4],[[5],[1,'d']]])
Z([[7],[3,'g']])
Z([[4],[[5],[[5],[1,'uni-popup__wrapper']],[[7],[3,'f']]]])
Z([[7],[3,'e']])
})(__WXML_GLOBAL__.ops_cached.$gwx_6);return __WXML_GLOBAL__.ops_cached.$gwx_6
}
function gz$gwx_7(){
if( __WXML_GLOBAL__.ops_cached.$gwx_7)return __WXML_GLOBAL__.ops_cached.$gwx_7
__WXML_GLOBAL__.ops_cached.$gwx_7=[];
(function(z){var a=11;function Z(ops){z.push(ops)}
Z([3,'uni-searchbar'])
Z([[7],[3,'s']])
Z([3,'uni-searchbar__box'])
Z([[2,'+'],[[2,'+'],[[2,'+'],[1,'border-radius:'],[[7],[3,'q']]],[1,';']],[[2,'+'],[1,'background-color:'],[[7],[3,'r']]]])
Z([3,'uni-searchbar__box-icon-search'])
Z([[6],[[7],[3,'$slots']],[3,'searchIcon']])
Z([3,'searchIcon'])
Z([[7],[3,'a']])
Z([3,'__l'])
Z([3,'16151c51-0'])
Z(z[7])
Z([[7],[3,'n']])
Z([[7],[3,'p']])
Z([3,'uni-searchbar__box-icon-clear'])
Z([[6],[[7],[3,'$slots']],[3,'clearIcon']])
Z([3,'clearIcon'])
Z([[7],[3,'o']])
Z(z[8])
Z([3,'16151c51-1'])
Z(z[16])
Z([[7],[3,'t']])
})(__WXML_GLOBAL__.ops_cached.$gwx_7);return __WXML_GLOBAL__.ops_cached.$gwx_7
}
function gz$gwx_8(){
if( __WXML_GLOBAL__.ops_cached.$gwx_8)return __WXML_GLOBAL__.ops_cached.$gwx_8
__WXML_GLOBAL__.ops_cached.$gwx_8=[];
(function(z){var a=11;function Z(ops){z.push(ops)}
Z([[7],[3,'b']])
Z([[7],[3,'e']])
Z([[7],[3,'c']])
Z([[2,'!'],[[7],[3,'a']]])
Z([3,'ani'])
Z([[7],[3,'d']])
})(__WXML_GLOBAL__.ops_cached.$gwx_8);return __WXML_GLOBAL__.ops_cached.$gwx_8
}
function gz$gwx_9(){
if( __WXML_GLOBAL__.ops_cached.$gwx_9)return __WXML_GLOBAL__.ops_cached.$gwx_9
__WXML_GLOBAL__.ops_cached.$gwx_9=[];
(function(z){var a=11;function Z(ops){z.push(ops)}
Z([3,'card-detail-container data-v-fdb5dbe3'])
Z([3,'header-actions data-v-fdb5dbe3'])
Z([[7],[3,'d']])
Z([3,'action-btn data-v-fdb5dbe3'])
Z([[7],[3,'b']])
Z([3,'__l'])
Z([3,'data-v-fdb5dbe3'])
Z([3,'fdb5dbe3-0'])
Z(z[4])
Z([[7],[3,'e']])
Z([[7],[3,'g']])
Z(z[3])
Z([[7],[3,'f']])
Z(z[5])
Z(z[6])
Z([3,'fdb5dbe3-1'])
Z(z[12])
Z([3,'content-scroll data-v-fdb5dbe3'])
Z([3,'true'])
Z([3,'section data-v-fdb5dbe3'])
Z([[7],[3,'h']])
Z([3,'form-item data-v-fdb5dbe3'])
Z([[7],[3,'z']])
Z([[7],[3,'F']])
Z(z[19])
Z([[7],[3,'L']])
Z([3,'card-data-container data-v-fdb5dbe3'])
Z([[7],[3,'Q']])
Z([3,'data-section data-v-fdb5dbe3'])
Z([[7],[3,'aa']])
Z([[7],[3,'r0']])
Z([[7],[3,'ag']])
Z(z[5])
Z([[7],[3,'ad']])
Z([[7],[3,'af']])
Z([[7],[3,'ae']])
Z(z[6])
Z([3,'fdb5dbe3-2'])
Z(z[31])
Z([[7],[3,'ah']])
Z(z[26])
Z([[7],[3,'am']])
Z(z[21])
Z([[7],[3,'ao']])
Z([[7],[3,'av']])
Z(z[5])
Z([[7],[3,'ar']])
Z([[7],[3,'at']])
Z([[7],[3,'as']])
Z(z[6])
Z([3,'fdb5dbe3-3'])
Z(z[44])
Z(z[28])
Z([[7],[3,'aw']])
Z([3,'data-editor data-v-fdb5dbe3'])
Z(z[30])
Z([[7],[3,'az']])
Z([[7],[3,'aE']])
Z(z[5])
Z([[7],[3,'aB']])
Z([[7],[3,'aD']])
Z([[7],[3,'aC']])
Z(z[6])
Z([3,'fdb5dbe3-4'])
Z(z[57])
Z([3,'actions-section data-v-fdb5dbe3'])
Z([[7],[3,'aJ']])
Z([3,'edit-actions data-v-fdb5dbe3'])
Z([[7],[3,'aL']])
Z([3,'btn-secondary data-v-fdb5dbe3'])
Z([[7],[3,'aK']])
Z(z[5])
Z(z[6])
Z([3,'fdb5dbe3-5'])
Z(z[70])
Z([[7],[3,'aN']])
Z([3,'btn-primary data-v-fdb5dbe3'])
Z([[7],[3,'aO']])
Z([[7],[3,'aM']])
Z(z[5])
Z(z[6])
Z([3,'fdb5dbe3-6'])
Z(z[78])
Z([[7],[3,'aP']])
Z([3,'view-actions data-v-fdb5dbe3'])
Z([[7],[3,'aR']])
Z([3,'btn-outline data-v-fdb5dbe3'])
Z([[7],[3,'aQ']])
Z(z[5])
Z(z[6])
Z([3,'fdb5dbe3-7'])
Z(z[87])
Z([[7],[3,'aT']])
Z(z[86])
Z([[7],[3,'aS']])
Z(z[5])
Z(z[6])
Z([3,'fdb5dbe3-8'])
Z(z[94])
Z([[7],[3,'aV']])
Z(z[86])
Z([[7],[3,'aU']])
Z(z[5])
Z(z[6])
Z([3,'fdb5dbe3-9'])
Z(z[101])
Z([[7],[3,'aW']])
})(__WXML_GLOBAL__.ops_cached.$gwx_9);return __WXML_GLOBAL__.ops_cached.$gwx_9
}
function gz$gwx_10(){
if( __WXML_GLOBAL__.ops_cached.$gwx_10)return __WXML_GLOBAL__.ops_cached.$gwx_10
__WXML_GLOBAL__.ops_cached.$gwx_10=[];
(function(z){var a=11;function Z(ops){z.push(ops)}
Z([3,'card-select-page data-v-63df2d62'])
Z([[7],[3,'d']])
Z([3,'__l'])
Z([[7],[3,'b']])
Z([[7],[3,'a']])
Z([[7],[3,'c']])
Z([3,'data-v-63df2d62'])
Z([3,'63df2d62-0'])
Z(z[1])
Z([3,'filter-bar data-v-63df2d62'])
Z([3,'category'])
Z([[7],[3,'e']])
Z([3,'f'])
Z([[6],[[7],[3,'category']],[3,'h']])
Z([[4],[[5],[[5],[[5],[1,'data-v-63df2d62']],[1,'filter-tab']],[[6],[[7],[3,'category']],[3,'g']]]])
Z([[6],[[7],[3,'category']],[3,'b']])
Z(z[2])
Z(z[6])
Z([[6],[[7],[3,'category']],[3,'a']])
Z(z[15])
Z([[6],[[7],[3,'category']],[3,'d']])
Z([3,'filter-actions data-v-63df2d62'])
Z([[7],[3,'g']])
Z([3,'action-btn data-v-63df2d62'])
Z([[7],[3,'f']])
Z(z[2])
Z(z[6])
Z([3,'63df2d62-2'])
Z(z[24])
Z([[7],[3,'i']])
Z(z[23])
Z([[7],[3,'h']])
Z(z[2])
Z(z[6])
Z([3,'63df2d62-3'])
Z(z[31])
Z([[7],[3,'r']])
Z([3,'cards-scroll data-v-63df2d62'])
Z([3,'true'])
Z([[7],[3,'j']])
Z([3,'empty-state data-v-63df2d62'])
Z([[7],[3,'k']])
Z(z[2])
Z(z[6])
Z([3,'63df2d62-4'])
Z(z[41])
Z([[7],[3,'m']])
Z([3,'empty-action data-v-63df2d62'])
Z([[7],[3,'l']])
Z(z[2])
Z(z[6])
Z([3,'63df2d62-5'])
Z(z[48])
Z([[7],[3,'n']])
Z([3,'card'])
Z([[7],[3,'o']])
Z([3,'j'])
Z([[6],[[7],[3,'card']],[3,'l']])
Z([[6],[[7],[3,'card']],[3,'k']])
Z([3,'card-item-grid data-v-63df2d62'])
Z([[6],[[7],[3,'card']],[3,'b']])
Z(z[2])
Z(z[6])
Z([[6],[[7],[3,'card']],[3,'a']])
Z(z[60])
Z([[6],[[7],[3,'card']],[3,'f']])
Z(z[54])
Z([[7],[3,'p']])
Z([3,'m'])
Z([[6],[[7],[3,'card']],[3,'o']])
Z([[6],[[7],[3,'card']],[3,'n']])
Z([3,'card-item-list data-v-63df2d62'])
Z(z[60])
Z(z[2])
Z(z[6])
Z(z[63])
Z(z[60])
Z([[6],[[7],[3,'card']],[3,'h']])
Z(z[57])
Z(z[23])
Z([[7],[3,'q']])
Z(z[2])
Z(z[6])
Z(z[58])
Z(z[80])
Z([[7],[3,'s']])
Z([[7],[3,'x']])
Z([3,'deploy-btn data-v-63df2d62'])
Z([[7],[3,'w']])
Z([[7],[3,'v']])
Z(z[2])
Z(z[6])
Z([3,'63df2d62-9'])
Z(z[89])
Z([[7],[3,'C']])
Z(z[2])
Z([3,'r data-v-63df2d62'])
Z([3,'63df2d62-10'])
Z(z[94])
Z([3,'sortPopup'])
Z([[4],[[5],[1,'d']]])
Z([3,'sort-popup data-v-63df2d62'])
Z([[7],[3,'z']])
Z([3,'popup-close data-v-63df2d62'])
Z([[7],[3,'y']])
Z(z[2])
Z(z[6])
Z([3,'63df2d62-11,63df2d62-10'])
Z(z[104])
Z([3,'option'])
Z([[7],[3,'A']])
Z([3,'e'])
Z([[6],[[7],[3,'option']],[3,'g']])
Z([[4],[[5],[[5],[[5],[1,'data-v-63df2d62']],[1,'sort-option']],[[6],[[7],[3,'option']],[3,'f']]]])
Z([[6],[[7],[3,'option']],[3,'b']])
Z(z[2])
Z(z[6])
Z([[6],[[7],[3,'option']],[3,'c']])
Z([[6],[[7],[3,'option']],[3,'d']])
Z([[7],[3,'R']])
Z(z[2])
Z(z[96])
Z([3,'63df2d62-13'])
Z(z[119])
Z([3,'detailPopup'])
Z(z[100])
Z([[7],[3,'D']])
Z([3,'detail-popup data-v-63df2d62'])
Z([[7],[3,'G']])
Z(z[103])
Z([[7],[3,'F']])
Z(z[2])
Z(z[6])
Z([3,'63df2d62-14,63df2d62-13'])
Z(z[130])
Z([[7],[3,'I']])
Z([[7],[3,'O']])
})(__WXML_GLOBAL__.ops_cached.$gwx_10);return __WXML_GLOBAL__.ops_cached.$gwx_10
}
function gz$gwx_11(){
if( __WXML_GLOBAL__.ops_cached.$gwx_11)return __WXML_GLOBAL__.ops_cached.$gwx_11
__WXML_GLOBAL__.ops_cached.$gwx_11=[];
(function(z){var a=11;function Z(ops){z.push(ops)}
Z([3,'write-card-container data-v-64ca8dc1'])
Z([3,'content data-v-64ca8dc1'])
Z([3,'status-bar data-v-64ca8dc1'])
Z([[7],[3,'a']])
Z([3,'__l'])
Z([3,'data-v-64ca8dc1'])
Z([3,'64ca8dc1-0'])
Z(z[3])
Z([[7],[3,'d']])
Z(z[4])
Z(z[5])
Z([3,'64ca8dc1-1'])
Z(z[8])
Z([3,'write-wizard data-v-64ca8dc1'])
Z([3,'step'])
Z([[7],[3,'g']])
Z([3,'f'])
Z([3,'step-circle data-v-64ca8dc1'])
Z([[6],[[7],[3,'step']],[3,'a']])
Z(z[4])
Z(z[5])
Z([[6],[[7],[3,'step']],[3,'b']])
Z([[6],[[7],[3,'step']],[3,'c']])
Z([3,'step-content data-v-64ca8dc1'])
Z([[7],[3,'h']])
Z([3,'step-panel data-v-64ca8dc1'])
Z([3,'card-selector data-v-64ca8dc1'])
Z([[7],[3,'j']])
Z([[7],[3,'p']])
Z([3,'selected-card-display data-v-64ca8dc1'])
Z([[7],[3,'k']])
Z(z[4])
Z(z[5])
Z([3,'64ca8dc1-3'])
Z(z[30])
Z([[7],[3,'o']])
Z(z[4])
Z(z[5])
Z([3,'64ca8dc1-4'])
Z(z[35])
Z([[7],[3,'r']])
Z([3,'card-selection-placeholder data-v-64ca8dc1'])
Z([[7],[3,'q']])
Z(z[4])
Z(z[5])
Z([3,'64ca8dc1-5'])
Z(z[42])
Z([[7],[3,'s']])
Z([[7],[3,'t']])
Z(z[4])
Z(z[5])
Z([3,'64ca8dc1-6'])
Z(z[48])
Z([[7],[3,'v']])
Z([3,'magic-card-detector data-v-64ca8dc1'])
Z([[7],[3,'x']])
Z([3,'detection-area data-v-64ca8dc1'])
Z([[7],[3,'z']])
Z(z[4])
Z([[4],[[5],[[5],[1,'data-v-64ca8dc1']],[[2,'&&'],[[7],[3,'y']],[1,'rotating']]]])
Z([3,'64ca8dc1-7'])
Z(z[57])
Z([[7],[3,'F']])
Z([3,'detect-button data-v-64ca8dc1'])
Z([[7],[3,'E']])
Z([[7],[3,'C']])
Z(z[4])
Z(z[5])
Z([3,'64ca8dc1-8'])
Z(z[65])
Z([3,'detected-card data-v-64ca8dc1'])
Z([[7],[3,'G']])
Z(z[4])
Z(z[5])
Z([3,'64ca8dc1-9'])
Z(z[71])
Z([[7],[3,'O']])
Z([[7],[3,'P']])
Z(z[4])
Z(z[5])
Z([3,'64ca8dc1-10'])
Z(z[77])
Z([[7],[3,'R']])
Z([3,'re-detect-button data-v-64ca8dc1'])
Z([[7],[3,'Q']])
Z(z[4])
Z(z[5])
Z([3,'64ca8dc1-11'])
Z(z[84])
Z([[7],[3,'S']])
Z([3,'write-operation data-v-64ca8dc1'])
Z([[7],[3,'U']])
Z([3,'write-ready data-v-64ca8dc1'])
Z([[7],[3,'V']])
Z(z[4])
Z(z[5])
Z([3,'64ca8dc1-12'])
Z(z[93])
Z([[7],[3,'Z']])
Z([[7],[3,'aa']])
Z(z[4])
Z(z[5])
Z([3,'64ca8dc1-13'])
Z(z[99])
Z([[7],[3,'ac']])
Z([3,'writing-progress data-v-64ca8dc1'])
Z([[7],[3,'ag']])
Z([[7],[3,'ai']])
Z([[7],[3,'ak']])
Z([3,'write-complete data-v-64ca8dc1'])
Z([[7],[3,'al']])
Z(z[4])
Z(z[5])
Z([3,'64ca8dc1-14'])
Z(z[110])
Z([[7],[3,'an']])
Z([3,'wizard-actions data-v-64ca8dc1'])
Z([[7],[3,'ap']])
Z([[7],[3,'ar']])
Z([3,'action-button secondary data-v-64ca8dc1'])
Z([[7],[3,'aq']])
Z(z[4])
Z(z[5])
Z([3,'64ca8dc1-15'])
Z(z[120])
Z([[7],[3,'as']])
Z([[7],[3,'aw']])
Z([3,'action-button primary data-v-64ca8dc1'])
Z([[7],[3,'av']])
Z([[7],[3,'at']])
Z(z[4])
Z(z[5])
Z([3,'64ca8dc1-16'])
Z(z[129])
Z([[7],[3,'ax']])
Z([[7],[3,'aA']])
Z([3,'action-button primary write-button data-v-64ca8dc1'])
Z([[7],[3,'az']])
Z([[7],[3,'ay']])
Z(z[4])
Z(z[5])
Z([3,'64ca8dc1-17'])
Z(z[138])
Z([[7],[3,'aB']])
Z([[7],[3,'aD']])
Z(z[127])
Z([[7],[3,'aC']])
Z(z[4])
Z(z[5])
Z([3,'64ca8dc1-18'])
Z(z[146])
Z([[7],[3,'aE']])
Z([[7],[3,'aG']])
Z(z[119])
Z([[7],[3,'aF']])
Z(z[4])
Z(z[5])
Z([3,'64ca8dc1-19'])
Z(z[154])
Z([[7],[3,'aL']])
Z(z[4])
Z([3,'r data-v-64ca8dc1'])
Z([3,'64ca8dc1-20'])
Z(z[159])
Z([3,'cardSelectionPopup'])
Z([[4],[[5],[1,'d']]])
Z([3,'card-selection-popup data-v-64ca8dc1'])
Z([[7],[3,'aI']])
Z(z[4])
Z([[7],[3,'aH']])
Z(z[5])
Z([3,'64ca8dc1-21,64ca8dc1-20'])
Z(z[167])
Z([3,'card'])
Z([[7],[3,'aJ']])
Z([3,'j'])
Z([[6],[[7],[3,'card']],[3,'l']])
Z([[4],[[5],[[5],[[5],[1,'card-item']],[1,'data-v-64ca8dc1']],[[2,'&&'],[[6],[[7],[3,'card']],[3,'k']],[1,'selected']]]])
Z([[6],[[7],[3,'card']],[3,'b']])
Z(z[4])
Z(z[5])
Z([[6],[[7],[3,'card']],[3,'a']])
Z(z[178])
Z([[6],[[7],[3,'card']],[3,'g']])
Z(z[4])
Z(z[5])
Z([[6],[[7],[3,'card']],[3,'h']])
Z([[6],[[7],[3,'card']],[3,'i']])
})(__WXML_GLOBAL__.ops_cached.$gwx_11);return __WXML_GLOBAL__.ops_cached.$gwx_11
}
function gz$gwx_12(){
if( __WXML_GLOBAL__.ops_cached.$gwx_12)return __WXML_GLOBAL__.ops_cached.$gwx_12
__WXML_GLOBAL__.ops_cached.$gwx_12=[];
(function(z){var a=11;function Z(ops){z.push(ops)}
Z([3,'cards-container data-v-c46d9c99'])
Z([3,'header-toolbar data-v-c46d9c99'])
Z([3,'search-box data-v-c46d9c99'])
Z([[7],[3,'a']])
Z([3,'__l'])
Z([3,'data-v-c46d9c99'])
Z([3,'c46d9c99-0'])
Z(z[3])
Z([[7],[3,'d']])
Z([[7],[3,'f']])
Z([3,'clear-btn data-v-c46d9c99'])
Z([[7],[3,'e']])
Z(z[4])
Z(z[5])
Z([3,'c46d9c99-1'])
Z(z[11])
Z([3,'toolbar-buttons data-v-c46d9c99'])
Z([[7],[3,'h']])
Z([3,'tool-btn data-v-c46d9c99'])
Z([[7],[3,'g']])
Z(z[4])
Z(z[5])
Z([3,'c46d9c99-2'])
Z(z[19])
Z([[7],[3,'j']])
Z(z[18])
Z([[7],[3,'i']])
Z(z[4])
Z(z[5])
Z([3,'c46d9c99-3'])
Z(z[26])
Z([3,'category'])
Z([[7],[3,'k']])
Z([3,'e'])
Z([[6],[[7],[3,'category']],[3,'g']])
Z([[4],[[5],[[5],[[5],[1,'data-v-c46d9c99']],[1,'category-item']],[[6],[[7],[3,'category']],[3,'f']]]])
Z([[6],[[7],[3,'category']],[3,'b']])
Z(z[4])
Z(z[5])
Z([[6],[[7],[3,'category']],[3,'a']])
Z(z[36])
Z([[7],[3,'n']])
Z([[7],[3,'D']])
Z([3,'cards-scroll data-v-c46d9c99'])
Z([3,'true'])
Z([[7],[3,'p']])
Z([3,'card'])
Z([[7],[3,'q']])
Z([3,'v'])
Z([[6],[[7],[3,'card']],[3,'y']])
Z([[6],[[7],[3,'card']],[3,'x']])
Z([[4],[[5],[[5],[[5],[1,'data-v-c46d9c99']],[1,'card-item-grid']],[[6],[[7],[3,'card']],[3,'w']]]])
Z([[7],[3,'r']])
Z([[6],[[7],[3,'card']],[3,'a']])
Z(z[4])
Z(z[5])
Z([[6],[[7],[3,'card']],[3,'b']])
Z([[6],[[7],[3,'card']],[3,'c']])
Z([3,'card-header data-v-c46d9c99'])
Z([[6],[[7],[3,'card']],[3,'f']])
Z(z[4])
Z(z[5])
Z([[6],[[7],[3,'card']],[3,'e']])
Z(z[59])
Z([[6],[[7],[3,'card']],[3,'h']])
Z([[6],[[7],[3,'card']],[3,'j']])
Z(z[4])
Z(z[5])
Z([[6],[[7],[3,'card']],[3,'i']])
Z(z[65])
Z([[6],[[7],[3,'card']],[3,'n']])
Z([[6],[[7],[3,'card']],[3,'p']])
Z([[6],[[7],[3,'card']],[3,'r']])
Z(z[46])
Z([[7],[3,'s']])
Z([3,'y'])
Z([[6],[[7],[3,'card']],[3,'B']])
Z([[6],[[7],[3,'card']],[3,'A']])
Z([[4],[[5],[[5],[[5],[1,'data-v-c46d9c99']],[1,'card-item-list']],[[6],[[7],[3,'card']],[3,'z']]]])
Z([[7],[3,'t']])
Z(z[53])
Z(z[4])
Z(z[5])
Z(z[56])
Z(z[57])
Z(z[59])
Z(z[4])
Z(z[5])
Z(z[62])
Z(z[59])
Z([3,'card-info data-v-c46d9c99'])
Z(z[68])
Z([[6],[[7],[3,'card']],[3,'k']])
Z(z[4])
Z(z[5])
Z(z[65])
Z(z[92])
Z([[6],[[7],[3,'card']],[3,'m']])
Z([[6],[[7],[3,'card']],[3,'o']])
Z([[6],[[7],[3,'card']],[3,'q']])
Z([3,'card-actions data-v-c46d9c99'])
Z([[6],[[7],[3,'card']],[3,'v']])
Z([3,'action-btn data-v-c46d9c99'])
Z([[7],[3,'v']])
Z(z[4])
Z(z[5])
Z([[6],[[7],[3,'card']],[3,'t']])
Z(z[103])
Z(z[50])
Z(z[102])
Z([[7],[3,'w']])
Z(z[4])
Z(z[5])
Z([[6],[[7],[3,'card']],[3,'w']])
Z(z[110])
Z([[7],[3,'x']])
Z([3,'empty-state data-v-c46d9c99'])
Z([[7],[3,'y']])
Z(z[4])
Z(z[5])
Z([3,'c46d9c99-13'])
Z(z[117])
Z([[7],[3,'A']])
Z([[7],[3,'C']])
Z([[7],[3,'E']])
Z([[7],[3,'O']])
Z([[7],[3,'W']])
Z([3,'popup-overlay data-v-c46d9c99'])
Z([[7],[3,'V']])
Z([3,'popup-content data-v-c46d9c99'])
Z([[7],[3,'Q']])
Z([3,'popup-close data-v-c46d9c99'])
Z([[7],[3,'P']])
Z(z[4])
Z(z[5])
Z([3,'c46d9c99-14'])
Z(z[132])
Z([3,'menu-list data-v-c46d9c99'])
Z([[7],[3,'S']])
Z([3,'menu-item data-v-c46d9c99'])
Z([[7],[3,'R']])
Z(z[4])
Z(z[5])
Z([3,'c46d9c99-15'])
Z(z[140])
Z([[7],[3,'U']])
Z(z[139])
Z([[7],[3,'T']])
Z(z[4])
Z(z[5])
Z([3,'c46d9c99-16'])
Z(z[147])
Z([[7],[3,'X']])
Z([[7],[3,'ak']])
Z(z[127])
Z([[7],[3,'aj']])
Z(z[129])
Z([[7],[3,'Z']])
Z(z[131])
Z([[7],[3,'Y']])
Z(z[4])
Z(z[5])
Z([3,'c46d9c99-17'])
Z(z[159])
Z([3,'option'])
Z([[7],[3,'aa']])
Z(z[33])
Z([[6],[[7],[3,'option']],[3,'g']])
Z([[4],[[5],[[5],[[5],[1,'data-v-c46d9c99']],[1,'menu-item']],[[6],[[7],[3,'option']],[3,'f']]]])
Z([[6],[[7],[3,'option']],[3,'b']])
Z([[6],[[7],[3,'option']],[3,'d']])
Z(z[4])
Z(z[5])
Z([[6],[[7],[3,'option']],[3,'c']])
Z(z[170])
Z(z[137])
Z([[7],[3,'ae']])
Z([[4],[[5],[[5],[[5],[1,'data-v-c46d9c99']],[1,'menu-item']],[[7],[3,'ad']]]])
Z([[7],[3,'ab']])
Z([[7],[3,'ac']])
Z(z[4])
Z(z[5])
Z([3,'c46d9c99-19'])
Z(z[179])
Z([[7],[3,'ai']])
Z([[4],[[5],[[5],[[5],[1,'data-v-c46d9c99']],[1,'menu-item']],[[7],[3,'ah']]]])
Z([[7],[3,'af']])
Z([[7],[3,'ag']])
Z(z[4])
Z(z[5])
Z([3,'c46d9c99-20'])
Z(z[187])
})(__WXML_GLOBAL__.ops_cached.$gwx_12);return __WXML_GLOBAL__.ops_cached.$gwx_12
}
function gz$gwx_13(){
if( __WXML_GLOBAL__.ops_cached.$gwx_13)return __WXML_GLOBAL__.ops_cached.$gwx_13
__WXML_GLOBAL__.ops_cached.$gwx_13=[];
(function(z){var a=11;function Z(ops){z.push(ops)}
Z([3,'connect-page data-v-b4f65ab7'])
Z([3,'content data-v-b4f65ab7'])
Z([[7],[3,'a']])
Z([[4],[[5],[[5],[[5],[1,'activation-card']],[1,'data-v-b4f65ab7']],[[2,'&&'],[[7],[3,'v']],[1,'activated']]]])
Z([3,'activation-header data-v-b4f65ab7'])
Z([[7],[3,'b']])
Z([3,'__l'])
Z([3,'data-v-b4f65ab7'])
Z([3,'b4f65ab7-0'])
Z(z[5])
Z([[7],[3,'e']])
Z(z[6])
Z([[7],[3,'d']])
Z(z[7])
Z([3,'b4f65ab7-1'])
Z(z[10])
Z([[7],[3,'f']])
Z([3,'activation-info data-v-b4f65ab7'])
Z([[7],[3,'i']])
Z(z[6])
Z([[7],[3,'h']])
Z(z[7])
Z([3,'b4f65ab7-2'])
Z(z[18])
Z([[7],[3,'l']])
Z(z[6])
Z([[7],[3,'k']])
Z(z[7])
Z([3,'b4f65ab7-3'])
Z(z[24])
Z([[7],[3,'p']])
Z([3,'btn-copy data-v-b4f65ab7'])
Z([[7],[3,'o']])
Z(z[6])
Z(z[7])
Z([3,'b4f65ab7-4'])
Z(z[32])
Z([[7],[3,'q']])
Z([3,'status-card data-v-b4f65ab7'])
Z([[7],[3,'y']])
Z([3,'action-buttons data-v-b4f65ab7'])
Z([[7],[3,'C']])
Z([[7],[3,'G']])
Z([[7],[3,'I']])
Z([3,'device-list-card data-v-b4f65ab7'])
Z([[7],[3,'K']])
Z([[7],[3,'L']])
Z(z[6])
Z(z[7])
Z([3,'b4f65ab7-5'])
Z(z[46])
Z([[7],[3,'M']])
Z([[7],[3,'N']])
Z(z[6])
Z(z[7])
Z([3,'b4f65ab7-6'])
Z(z[52])
Z([[7],[3,'O']])
Z([3,'device'])
Z([[7],[3,'P']])
Z([3,'f'])
Z([[6],[[7],[3,'device']],[3,'g']])
Z([3,'device-item-card data-v-b4f65ab7'])
Z([[7],[3,'Q']])
Z(z[6])
Z(z[7])
Z([[6],[[7],[3,'device']],[3,'d']])
Z(z[63])
Z([[7],[3,'R']])
Z([[7],[3,'T']])
Z(z[6])
Z([[7],[3,'S']])
Z(z[7])
Z([3,'b4f65ab7-8'])
Z(z[69])
Z([[7],[3,'ak']])
Z(z[6])
Z([3,'r data-v-b4f65ab7'])
Z([[2,'!'],[[7],[3,'aj']]])
Z([3,'b4f65ab7-9'])
Z(z[75])
Z([3,'activationPopup'])
Z([[4],[[5],[1,'d']]])
Z([[7],[3,'ah']])
Z(z[6])
Z([[7],[3,'af']])
Z([[7],[3,'ag']])
Z(z[7])
Z([3,'b4f65ab7-10,b4f65ab7-9'])
Z(z[83])
Z(z[82])
Z([3,'activation-dialog-content data-v-b4f65ab7'])
Z([[7],[3,'ab']])
Z([[7],[3,'ad']])
Z([[7],[3,'ae']])
Z(z[6])
Z(z[7])
Z([3,'b4f65ab7-11,b4f65ab7-10'])
Z(z[94])
Z([[7],[3,'ap']])
Z(z[6])
Z(z[77])
Z([3,'b4f65ab7-12'])
Z(z[99])
Z([3,'firmwarePopup'])
Z(z[82])
Z([[7],[3,'an']])
Z(z[6])
Z([[7],[3,'al']])
Z([[7],[3,'am']])
Z(z[7])
Z([3,'b4f65ab7-13,b4f65ab7-12'])
Z(z[106])
Z(z[82])
Z([[7],[3,'av']])
Z(z[6])
Z(z[77])
Z([3,'b4f65ab7-14'])
Z(z[114])
Z([3,'dfuPopup'])
Z(z[82])
Z([[7],[3,'as']])
Z(z[6])
Z([[7],[3,'aq']])
Z([[7],[3,'ar']])
Z(z[7])
Z([3,'b4f65ab7-15,b4f65ab7-14'])
Z(z[121])
Z(z[82])
Z([[7],[3,'aD']])
Z(z[6])
Z(z[77])
Z([3,'b4f65ab7-16'])
Z(z[129])
Z([3,'updatePopup'])
Z(z[82])
Z([[7],[3,'aB']])
Z(z[6])
Z([[7],[3,'az']])
Z([[7],[3,'aA']])
Z(z[7])
Z([3,'b4f65ab7-17,b4f65ab7-16'])
Z(z[136])
Z(z[82])
Z([[7],[3,'ax']])
})(__WXML_GLOBAL__.ops_cached.$gwx_13);return __WXML_GLOBAL__.ops_cached.$gwx_13
}
function gz$gwx_14(){
if( __WXML_GLOBAL__.ops_cached.$gwx_14)return __WXML_GLOBAL__.ops_cached.$gwx_14
__WXML_GLOBAL__.ops_cached.$gwx_14=[];
(function(z){var a=11;function Z(ops){z.push(ops)}
Z([3,'firmware-page data-v-2926a4f6'])
Z([3,'content data-v-2926a4f6'])
Z([[7],[3,'a']])
Z([[7],[3,'b']])
Z([3,'__l'])
Z([3,'data-v-2926a4f6'])
Z([3,'2926a4f6-0'])
Z(z[3])
Z([3,'firmware-container data-v-2926a4f6'])
Z([[7],[3,'d']])
Z(z[4])
Z(z[5])
Z([3,'2926a4f6-1'])
Z(z[9])
Z([3,'firmware-card data-v-2926a4f6'])
Z([[7],[3,'h']])
Z(z[4])
Z(z[5])
Z([3,'2926a4f6-2'])
Z(z[15])
Z([[7],[3,'j']])
Z([3,'firmware-actions data-v-2926a4f6'])
Z([[7],[3,'o']])
Z([3,'btn-check-update data-v-2926a4f6'])
Z([[7],[3,'p']])
Z([[7],[3,'m']])
Z(z[4])
Z(z[5])
Z([3,'2926a4f6-3'])
Z(z[25])
Z([[7],[3,'s']])
Z([3,'btn-update data-v-2926a4f6'])
Z([[7],[3,'t']])
Z([[7],[3,'q']])
Z(z[4])
Z(z[5])
Z([3,'2926a4f6-4'])
Z(z[33])
Z([[7],[3,'v']])
Z([[7],[3,'x']])
Z(z[4])
Z(z[5])
Z([3,'2926a4f6-5'])
Z(z[39])
Z([[7],[3,'C']])
Z(z[4])
Z([3,'r data-v-2926a4f6'])
Z([3,'2926a4f6-6'])
Z(z[44])
Z([3,'resultPopup'])
Z([[4],[[5],[1,'d']]])
Z([[7],[3,'A']])
Z(z[4])
Z([[7],[3,'z']])
Z(z[5])
Z([3,'2926a4f6-7,2926a4f6-6'])
Z(z[51])
Z(z[50])
})(__WXML_GLOBAL__.ops_cached.$gwx_14);return __WXML_GLOBAL__.ops_cached.$gwx_14
}
function gz$gwx_15(){
if( __WXML_GLOBAL__.ops_cached.$gwx_15)return __WXML_GLOBAL__.ops_cached.$gwx_15
__WXML_GLOBAL__.ops_cached.$gwx_15=[];
(function(z){var a=11;function Z(ops){z.push(ops)}
Z([3,'edit-page data-v-b20df31c'])
Z([[7],[3,'g']])
Z([3,'data-v-b20df31c'])
Z([[7],[3,'e']])
Z([3,'label'])
Z([[7],[3,'f']])
Z([[7],[3,'d']])
Z([3,'__l'])
Z(z[2])
Z([3,'b20df31c-0'])
Z(z[6])
Z([[7],[3,'k']])
Z([3,'point'])
Z([[7],[3,'l']])
Z([3,'f'])
Z([[6],[[7],[3,'point']],[3,'e']])
Z([3,'btn-remove data-v-b20df31c'])
Z([[7],[3,'m']])
Z(z[7])
Z(z[2])
Z([[6],[[7],[3,'point']],[3,'d']])
Z(z[17])
Z([[7],[3,'p']])
Z([[7],[3,'V']])
Z(z[7])
Z([3,'r data-v-b20df31c'])
Z([3,'b20df31c-2'])
Z(z[23])
Z([3,'mapDialog'])
Z([[4],[[5],[1,'d']]])
Z([3,'map-dialog data-v-b20df31c'])
Z([[7],[3,'z']])
Z([3,'btn-close data-v-b20df31c'])
Z([[7],[3,'y']])
Z(z[7])
Z(z[2])
Z([3,'b20df31c-3,b20df31c-2'])
Z(z[33])
Z([3,'dialog-map-container data-v-b20df31c'])
Z([3,'map-toolbar data-v-b20df31c'])
Z([[7],[3,'I']])
Z([3,'map-tool-btn data-v-b20df31c'])
Z([[7],[3,'H']])
Z(z[7])
Z(z[2])
Z([3,'b20df31c-4,b20df31c-2'])
Z(z[42])
Z([[7],[3,'K']])
Z(z[41])
Z([[7],[3,'J']])
Z(z[7])
Z(z[2])
Z([3,'b20df31c-5,b20df31c-2'])
Z(z[49])
Z([[7],[3,'L']])
Z([[7],[3,'N']])
Z(z[41])
Z([[7],[3,'M']])
Z(z[7])
Z(z[2])
Z([3,'b20df31c-6,b20df31c-2'])
Z(z[57])
Z([[7],[3,'O']])
})(__WXML_GLOBAL__.ops_cached.$gwx_15);return __WXML_GLOBAL__.ops_cached.$gwx_15
}
function gz$gwx_16(){
if( __WXML_GLOBAL__.ops_cached.$gwx_16)return __WXML_GLOBAL__.ops_cached.$gwx_16
__WXML_GLOBAL__.ops_cached.$gwx_16=[];
(function(z){var a=11;function Z(ops){z.push(ops)}
Z([3,'geofence-page data-v-5cad4b6b'])
Z([3,'status-row data-v-5cad4b6b'])
Z([3,'status-indicators data-v-5cad4b6b'])
Z([[7],[3,'a']])
Z([3,'__l'])
Z([3,'data-v-5cad4b6b'])
Z([3,'5cad4b6b-0'])
Z(z[3])
Z([[7],[3,'d']])
Z(z[4])
Z(z[5])
Z([3,'5cad4b6b-1'])
Z(z[8])
Z([[7],[3,'g']])
Z(z[4])
Z(z[5])
Z([3,'5cad4b6b-2'])
Z(z[13])
Z([[7],[3,'n']])
Z([[4],[[5],[[5],[[5],[[5],[1,'btn-toggle-compact']],[1,'data-v-5cad4b6b']],[[2,'&&'],[[7],[3,'l']],[1,'active']]],[[2,'&&'],[[7],[3,'m']],[1,'disabled']]]])
Z([[7],[3,'o']])
Z([[7],[3,'j']])
Z(z[4])
Z(z[5])
Z([3,'5cad4b6b-3'])
Z(z[21])
Z([3,'map-container data-v-5cad4b6b'])
Z([3,'map-toolbar data-v-5cad4b6b'])
Z([[7],[3,'A']])
Z([3,'tool-btn-compact location-btn data-v-5cad4b6b'])
Z([[7],[3,'B']])
Z([[7],[3,'z']])
Z(z[4])
Z(z[5])
Z([3,'5cad4b6b-4'])
Z(z[31])
Z([[7],[3,'C']])
Z([[7],[3,'E']])
Z([3,'tool-btn-compact add-btn data-v-5cad4b6b'])
Z([[7],[3,'F']])
Z([[7],[3,'D']])
Z(z[4])
Z(z[5])
Z([3,'5cad4b6b-5'])
Z(z[40])
Z([[7],[3,'G']])
Z([[7],[3,'I']])
Z([3,'tool-btn-compact finish-btn data-v-5cad4b6b'])
Z([[7],[3,'J']])
Z([[7],[3,'H']])
Z(z[4])
Z(z[5])
Z([3,'5cad4b6b-6'])
Z(z[49])
Z([[7],[3,'K']])
Z([[7],[3,'M']])
Z([3,'tool-btn-compact check-btn data-v-5cad4b6b'])
Z([[7],[3,'L']])
Z(z[4])
Z(z[5])
Z([3,'5cad4b6b-7'])
Z(z[57])
Z([[7],[3,'N']])
Z([3,'geofence-list data-v-5cad4b6b'])
Z([[7],[3,'U']])
Z([[7],[3,'W']])
Z([3,'btn-add-mini data-v-5cad4b6b'])
Z([[7],[3,'X']])
Z([[7],[3,'V']])
Z(z[4])
Z(z[5])
Z([3,'5cad4b6b-8'])
Z(z[68])
Z([[7],[3,'Y']])
Z([3,'geofence'])
Z([[7],[3,'Z']])
Z([3,'w'])
Z([[6],[[7],[3,'geofence']],[3,'z']])
Z([[4],[[5],[[5],[[5],[[5],[1,'geofence-card']],[1,'data-v-5cad4b6b']],[[2,'&&'],[[6],[[7],[3,'geofence']],[3,'x']],[1,'enabled']]],[[2,'&&'],[[6],[[7],[3,'geofence']],[3,'y']],[1,'current']]]])
Z([3,'geofence-meta data-v-5cad4b6b'])
Z([[7],[3,'aa']])
Z(z[4])
Z(z[5])
Z([[6],[[7],[3,'geofence']],[3,'b']])
Z(z[80])
Z([[7],[3,'ab']])
Z(z[4])
Z(z[5])
Z([[6],[[7],[3,'geofence']],[3,'d']])
Z(z[85])
Z([[6],[[7],[3,'geofence']],[3,'f']])
Z([[6],[[7],[3,'geofence']],[3,'h']])
Z(z[4])
Z(z[5])
Z([[6],[[7],[3,'geofence']],[3,'g']])
Z(z[91])
Z([[6],[[7],[3,'geofence']],[3,'t']])
Z([3,'card-actions data-v-5cad4b6b'])
Z([[6],[[7],[3,'geofence']],[3,'m']])
Z([3,'action-btn edit-btn data-v-5cad4b6b'])
Z([[7],[3,'ac']])
Z(z[4])
Z(z[5])
Z([[6],[[7],[3,'geofence']],[3,'l']])
Z(z[100])
Z([[6],[[7],[3,'geofence']],[3,'q']])
Z([3,'action-btn toggle-btn data-v-5cad4b6b'])
Z([[6],[[7],[3,'geofence']],[3,'o']])
Z(z[4])
Z(z[5])
Z([[6],[[7],[3,'geofence']],[3,'n']])
Z(z[107])
Z([[6],[[7],[3,'geofence']],[3,'s']])
Z([3,'action-btn delete-btn data-v-5cad4b6b'])
Z([[7],[3,'ad']])
Z(z[4])
Z(z[5])
Z([[6],[[7],[3,'geofence']],[3,'r']])
Z(z[114])
Z([[6],[[7],[3,'geofence']],[3,'v']])
Z([3,'empty-state data-v-5cad4b6b'])
Z([[7],[3,'ae']])
Z(z[4])
Z(z[5])
Z([3,'5cad4b6b-15'])
Z(z[121])
Z([[7],[3,'ag']])
Z([3,'btn-create data-v-5cad4b6b'])
Z([[7],[3,'ah']])
Z([[7],[3,'af']])
Z(z[4])
Z(z[5])
Z([3,'5cad4b6b-16'])
Z(z[129])
Z([[7],[3,'ai']])
Z([[7],[3,'ap']])
Z([[7],[3,'aw']])
Z(z[4])
Z([3,'r data-v-5cad4b6b'])
Z([3,'5cad4b6b-17'])
Z(z[136])
Z([3,'addDialog'])
Z([[4],[[5],[1,'d']]])
Z([[7],[3,'at']])
Z(z[4])
Z([[7],[3,'as']])
Z([[7],[3,'ar']])
Z(z[5])
Z([3,'5cad4b6b-18,5cad4b6b-17'])
Z(z[143])
Z([[7],[3,'aW']])
Z(z[4])
Z(z[138])
Z([3,'5cad4b6b-19'])
Z(z[150])
Z([3,'configDialog'])
Z(z[142])
Z([3,'config-dialog data-v-5cad4b6b'])
Z([[7],[3,'ay']])
Z([3,'btn-close data-v-5cad4b6b'])
Z([[7],[3,'ax']])
Z(z[4])
Z(z[5])
Z([3,'5cad4b6b-20,5cad4b6b-19'])
Z(z[160])
Z([3,'dialog-content data-v-5cad4b6b'])
Z([3,'form-item data-v-5cad4b6b'])
Z([[7],[3,'aC']])
Z([3,'btn-refresh-slots data-v-5cad4b6b'])
Z([[7],[3,'aD']])
Z([[7],[3,'aB']])
Z(z[4])
Z(z[5])
Z([3,'5cad4b6b-21,5cad4b6b-19'])
Z(z[170])
Z([[7],[3,'aH']])
Z(z[5])
Z([[7],[3,'aG']])
Z([3,'label'])
Z([[7],[3,'aF']])
Z(z[4])
Z(z[5])
Z([3,'5cad4b6b-22,5cad4b6b-19'])
Z(z[179])
Z([[7],[3,'aJ']])
Z([3,'slot-cards data-v-5cad4b6b'])
Z([[7],[3,'aK']])
Z([[7],[3,'aL']])
Z(z[4])
Z(z[5])
Z([3,'5cad4b6b-23,5cad4b6b-19'])
Z(z[187])
Z([[7],[3,'aN']])
Z([[7],[3,'aO']])
Z(z[4])
Z(z[5])
Z([3,'5cad4b6b-24,5cad4b6b-19'])
Z(z[193])
Z([[7],[3,'aQ']])
Z([[7],[3,'aR']])
Z(z[4])
Z(z[5])
Z([3,'5cad4b6b-25,5cad4b6b-19'])
Z(z[199])
})(__WXML_GLOBAL__.ops_cached.$gwx_16);return __WXML_GLOBAL__.ops_cached.$gwx_16
}
function gz$gwx_17(){
if( __WXML_GLOBAL__.ops_cached.$gwx_17)return __WXML_GLOBAL__.ops_cached.$gwx_17
__WXML_GLOBAL__.ops_cached.$gwx_17=[];
(function(z){var a=11;function Z(ops){z.push(ops)}
Z([3,'content data-v-971c2681'])
Z([3,'device-status-card data-v-971c2681'])
Z([3,'status-header data-v-971c2681'])
Z([[7],[3,'a']])
Z([3,'__l'])
Z([3,'data-v-971c2681'])
Z([3,'971c2681-0'])
Z(z[3])
Z([3,'status-actions data-v-971c2681'])
Z([[7],[3,'e']])
Z(z[4])
Z([[7],[3,'g']])
Z(z[5])
Z([3,'971c2681-1'])
Z([[2,'||'],[[7],[3,'h']],[1,'']])
Z([[7],[3,'i']])
Z([[7],[3,'p']])
Z([3,'function-grid data-v-971c2681'])
Z([[7],[3,'v']])
Z([[4],[[5],[[5],[[5],[1,'function-card']],[1,'data-v-971c2681']],[[2,'&&'],[[7],[3,'t']],[1,'disabled']]]])
Z([[7],[3,'q']])
Z(z[4])
Z(z[5])
Z([3,'971c2681-2'])
Z(z[20])
Z([[7],[3,'r']])
Z([[7],[3,'s']])
Z(z[4])
Z(z[5])
Z([3,'971c2681-3'])
Z(z[26])
Z([[7],[3,'A']])
Z([[4],[[5],[[5],[[5],[1,'function-card']],[1,'data-v-971c2681']],[[2,'&&'],[[7],[3,'z']],[1,'disabled']]]])
Z([[7],[3,'w']])
Z(z[4])
Z(z[5])
Z([3,'971c2681-4'])
Z(z[33])
Z([[7],[3,'x']])
Z([[7],[3,'y']])
Z(z[4])
Z(z[5])
Z([3,'971c2681-5'])
Z(z[39])
Z([[7],[3,'F']])
Z([[4],[[5],[[5],[[5],[1,'function-card']],[1,'data-v-971c2681']],[[2,'&&'],[[7],[3,'E']],[1,'disabled']]]])
Z([[7],[3,'B']])
Z(z[4])
Z(z[5])
Z([3,'971c2681-6'])
Z(z[46])
Z([[7],[3,'C']])
Z([[7],[3,'D']])
Z(z[4])
Z(z[5])
Z([3,'971c2681-7'])
Z(z[52])
Z([[7],[3,'K']])
Z([[4],[[5],[[5],[[5],[1,'function-card']],[1,'data-v-971c2681']],[[2,'&&'],[[7],[3,'J']],[1,'disabled']]]])
Z([[7],[3,'G']])
Z(z[4])
Z(z[5])
Z([3,'971c2681-8'])
Z(z[59])
Z([[7],[3,'H']])
Z([[7],[3,'I']])
Z(z[4])
Z(z[5])
Z([3,'971c2681-9'])
Z(z[65])
Z([[7],[3,'M']])
Z([3,'function-card data-v-971c2681'])
Z([[7],[3,'L']])
Z(z[4])
Z(z[5])
Z([3,'971c2681-10'])
Z(z[72])
})(__WXML_GLOBAL__.ops_cached.$gwx_17);return __WXML_GLOBAL__.ops_cached.$gwx_17
}
function gz$gwx_18(){
if( __WXML_GLOBAL__.ops_cached.$gwx_18)return __WXML_GLOBAL__.ops_cached.$gwx_18
__WXML_GLOBAL__.ops_cached.$gwx_18=[];
(function(z){var a=11;function Z(ops){z.push(ops)}
Z([3,'content data-v-77ae6d1e'])
Z([3,'status-bar data-v-77ae6d1e'])
Z([[7],[3,'a']])
Z([3,'__l'])
Z([3,'data-v-77ae6d1e'])
Z([3,'77ae6d1e-0'])
Z(z[2])
Z([[7],[3,'d']])
Z(z[3])
Z(z[4])
Z([3,'77ae6d1e-1'])
Z(z[7])
Z([3,'mode-tabs data-v-77ae6d1e'])
Z([[7],[3,'i']])
Z([[4],[[5],[[5],[[5],[1,'mode-tab']],[1,'data-v-77ae6d1e']],[[2,'&&'],[[7],[3,'h']],[1,'active']]]])
Z([[7],[3,'g']])
Z(z[3])
Z(z[4])
Z([3,'77ae6d1e-2'])
Z(z[15])
Z([[7],[3,'l']])
Z([[4],[[5],[[5],[[5],[1,'mode-tab']],[1,'data-v-77ae6d1e']],[[2,'&&'],[[7],[3,'k']],[1,'active']]]])
Z([[7],[3,'j']])
Z(z[3])
Z(z[4])
Z([3,'77ae6d1e-3'])
Z(z[22])
Z([3,'cardType'])
Z([[7],[3,'m']])
Z([3,'d'])
Z([[6],[[7],[3,'cardType']],[3,'b']])
Z(z[3])
Z(z[4])
Z([[6],[[7],[3,'cardType']],[3,'a']])
Z(z[30])
Z([[4],[[5],[[5],[[5],[1,'scan-card']],[1,'data-v-77ae6d1e']],[[2,'&&'],[[7],[3,'D']],[1,'scanning']]]])
Z([[7],[3,'n']])
Z([3,'scan-content data-v-77ae6d1e'])
Z([[7],[3,'o']])
Z(z[3])
Z(z[4])
Z([3,'77ae6d1e-5'])
Z(z[38])
Z([[7],[3,'r']])
Z([3,'progress-container data-v-77ae6d1e'])
Z([[7],[3,'w']])
Z([[7],[3,'z']])
Z([[7],[3,'B']])
Z([3,'detail'])
Z([[7],[3,'C']])
Z(z[29])
Z([[6],[[7],[3,'detail']],[3,'b']])
Z(z[3])
Z(z[4])
Z([[6],[[7],[3,'detail']],[3,'a']])
Z(z[51])
Z([3,'control-buttons data-v-77ae6d1e'])
Z([[7],[3,'J']])
Z([[4],[[5],[[5],[[5],[[5],[1,'scan-button']],[1,'data-v-77ae6d1e']],[[2,'&&'],[[7],[3,'G']],[1,'disabled']]],[[2,'&&'],[[7],[3,'H']],[1,'scanning']]]])
Z([[7],[3,'I']])
Z([[7],[3,'E']])
Z(z[3])
Z(z[4])
Z([3,'77ae6d1e-7'])
Z(z[60])
Z([[7],[3,'K']])
Z([[7],[3,'N']])
Z([3,'init-button data-v-77ae6d1e'])
Z([[7],[3,'O']])
Z([[7],[3,'L']])
Z(z[3])
Z(z[4])
Z([3,'77ae6d1e-8'])
Z(z[69])
Z([[7],[3,'P']])
Z([3,'card-info data-v-77ae6d1e'])
Z([3,'info-grid data-v-77ae6d1e'])
Z([[7],[3,'T']])
Z([[7],[3,'V']])
Z([[7],[3,'X']])
Z([[7],[3,'ab']])
Z([3,'data-status data-v-77ae6d1e'])
Z([[7],[3,'ae']])
Z(z[3])
Z(z[4])
Z([3,'77ae6d1e-9'])
Z(z[82])
Z([[7],[3,'ai']])
Z([3,'card-actions data-v-77ae6d1e'])
Z([[7],[3,'al']])
Z([3,'action-button save-button data-v-77ae6d1e'])
Z([[7],[3,'ak']])
Z(z[3])
Z(z[4])
Z([3,'77ae6d1e-10'])
Z(z[91])
Z([[7],[3,'an']])
Z([3,'action-button write-button data-v-77ae6d1e'])
Z([[7],[3,'am']])
Z(z[3])
Z(z[4])
Z([3,'77ae6d1e-11'])
Z(z[98])
Z([[7],[3,'ao']])
Z([[7],[3,'aq']])
Z([3,'action-button retry-button data-v-77ae6d1e'])
Z([[7],[3,'ap']])
Z(z[3])
Z(z[4])
Z([3,'77ae6d1e-12'])
Z(z[106])
Z([[7],[3,'ar']])
Z([[7],[3,'at']])
Z([3,'action-button detail-button data-v-77ae6d1e'])
Z([[7],[3,'as']])
Z(z[3])
Z(z[4])
Z([3,'77ae6d1e-13'])
Z(z[114])
Z([[7],[3,'av']])
Z([[7],[3,'ax']])
Z(z[113])
Z([[7],[3,'aw']])
Z(z[3])
Z(z[4])
Z([3,'77ae6d1e-14'])
Z(z[122])
Z([[7],[3,'az']])
Z([3,'action-button export-button data-v-77ae6d1e'])
Z([[7],[3,'ay']])
Z(z[3])
Z(z[4])
Z([3,'77ae6d1e-15'])
Z(z[129])
Z([[7],[3,'aA']])
Z([3,'item'])
Z([[7],[3,'aC']])
Z([3,'f'])
Z([[6],[[7],[3,'item']],[3,'g']])
Z([3,'history-item data-v-77ae6d1e'])
Z([[6],[[7],[3,'item']],[3,'b']])
Z(z[3])
Z(z[4])
Z([[6],[[7],[3,'item']],[3,'a']])
Z(z[140])
Z([[7],[3,'bI']])
Z(z[3])
Z([3,'r data-v-77ae6d1e'])
Z([3,'77ae6d1e-17'])
Z(z[145])
Z([3,'advancedReadPopup'])
Z([[4],[[5],[1,'d']]])
Z([3,'advanced-read-popup data-v-77ae6d1e'])
Z([3,'header-actions data-v-77ae6d1e'])
Z([[7],[3,'aJ']])
Z([3,'preset-button data-v-77ae6d1e'])
Z([[7],[3,'aI']])
Z(z[3])
Z(z[4])
Z([3,'77ae6d1e-18,77ae6d1e-17'])
Z(z[156])
Z([[7],[3,'aL']])
Z(z[3])
Z([[7],[3,'aK']])
Z(z[4])
Z([3,'77ae6d1e-19,77ae6d1e-17'])
Z(z[161])
Z([3,'popup-content data-v-77ae6d1e'])
Z([3,'option-section data-v-77ae6d1e'])
Z([[7],[3,'aN']])
Z([3,'help-button data-v-77ae6d1e'])
Z([[7],[3,'aM']])
Z(z[3])
Z(z[4])
Z([3,'77ae6d1e-20,77ae6d1e-17'])
Z(z[171])
Z([[7],[3,'aR']])
Z([3,'keyName'])
Z([[7],[3,'aS']])
Z([3,'e'])
Z([[6],[[7],[3,'keyName']],[3,'g']])
Z([[4],[[5],[[5],[[5],[1,'dictionary-item']],[1,'data-v-77ae6d1e']],[[2,'&&'],[[6],[[7],[3,'keyName']],[3,'f']],[1,'selected']]]])
Z([[6],[[7],[3,'keyName']],[3,'d']])
Z(z[3])
Z(z[4])
Z([[6],[[7],[3,'keyName']],[3,'c']])
Z(z[182])
Z([[7],[3,'aZ']])
Z([3,'key'])
Z([[7],[3,'bc']])
Z(z[29])
Z([[7],[3,'bd']])
Z(z[3])
Z([[6],[[7],[3,'key']],[3,'b']])
Z(z[4])
Z([[6],[[7],[3,'key']],[3,'c']])
Z(z[191])
Z([3,'strategy-selector data-v-77ae6d1e'])
Z([[7],[3,'bh']])
Z([[4],[[5],[[5],[[5],[1,'strategy-item']],[1,'data-v-77ae6d1e']],[[2,'&&'],[[7],[3,'bg']],[1,'active']]]])
Z([[7],[3,'be']])
Z(z[3])
Z(z[4])
Z([3,'77ae6d1e-23,77ae6d1e-17'])
Z(z[200])
Z([[7],[3,'bf']])
Z(z[3])
Z(z[4])
Z([3,'77ae6d1e-24,77ae6d1e-17'])
Z(z[205])
Z([[7],[3,'bl']])
Z([[4],[[5],[[5],[[5],[1,'strategy-item']],[1,'data-v-77ae6d1e']],[[2,'&&'],[[7],[3,'bk']],[1,'active']]]])
Z([[7],[3,'bi']])
Z(z[3])
Z(z[4])
Z([3,'77ae6d1e-25,77ae6d1e-17'])
Z(z[212])
Z([[7],[3,'bj']])
Z(z[3])
Z(z[4])
Z([3,'77ae6d1e-26,77ae6d1e-17'])
Z(z[217])
Z([[7],[3,'bp']])
Z([[4],[[5],[[5],[[5],[1,'strategy-item']],[1,'data-v-77ae6d1e']],[[2,'&&'],[[7],[3,'bo']],[1,'active']]]])
Z([[7],[3,'bm']])
Z(z[3])
Z(z[4])
Z([3,'77ae6d1e-27,77ae6d1e-17'])
Z(z[224])
Z([[7],[3,'bn']])
Z(z[3])
Z(z[4])
Z([3,'77ae6d1e-28,77ae6d1e-17'])
Z(z[229])
Z([[7],[3,'bt']])
Z([[4],[[5],[[5],[[5],[1,'strategy-item']],[1,'data-v-77ae6d1e']],[[2,'&&'],[[7],[3,'bs']],[1,'active']]]])
Z([[7],[3,'bq']])
Z(z[3])
Z(z[4])
Z([3,'77ae6d1e-29,77ae6d1e-17'])
Z(z[236])
Z([[7],[3,'br']])
Z(z[3])
Z(z[4])
Z([3,'77ae6d1e-30,77ae6d1e-17'])
Z(z[241])
Z([[7],[3,'bP']])
Z(z[3])
Z(z[147])
Z([3,'77ae6d1e-31'])
Z(z[246])
Z([3,'pageDetailsPopup'])
Z(z[151])
Z([3,'page-details-popup data-v-77ae6d1e'])
Z([[7],[3,'bK']])
Z(z[3])
Z([[7],[3,'bJ']])
Z(z[4])
Z([3,'77ae6d1e-32,77ae6d1e-31'])
Z(z[254])
Z([[7],[3,'bL']])
Z([3,'page'])
Z([[7],[3,'bM']])
Z([3,'h'])
Z([[4],[[5],[[5],[[5],[[5],[1,'page-item']],[1,'data-v-77ae6d1e']],[[2,'&&'],[[6],[[7],[3,'page']],[3,'i']],[1,'special-page']]],[[2,'&&'],[[6],[[7],[3,'page']],[3,'j']],[1,'user-page']]]])
Z([[6],[[7],[3,'page']],[3,'e']])
Z([3,'copy-page-button data-v-77ae6d1e'])
Z([[7],[3,'bN']])
Z(z[3])
Z(z[4])
Z([[6],[[7],[3,'page']],[3,'d']])
Z(z[267])
Z([[6],[[7],[3,'page']],[3,'f']])
Z([[7],[3,'ce']])
Z(z[3])
Z(z[147])
Z([3,'77ae6d1e-34'])
Z(z[273])
Z([3,'errorDetailsPopup'])
Z(z[151])
Z([3,'error-details-popup data-v-77ae6d1e'])
Z([[7],[3,'bR']])
Z(z[3])
Z([[7],[3,'bQ']])
Z(z[4])
Z([3,'77ae6d1e-35,77ae6d1e-34'])
Z(z[281])
Z([[7],[3,'bS']])
Z([3,'error-info data-v-77ae6d1e'])
Z([[7],[3,'bT']])
Z(z[3])
Z(z[4])
Z([3,'77ae6d1e-36,77ae6d1e-34'])
Z(z[289])
Z([[7],[3,'bW']])
Z([[7],[3,'bY']])
Z([[7],[3,'cD']])
Z(z[3])
Z(z[147])
Z([3,'77ae6d1e-37'])
Z(z[296])
Z([3,'saveOptionsPopup'])
Z(z[151])
Z([3,'save-options-popup data-v-77ae6d1e'])
Z([[7],[3,'cg']])
Z(z[3])
Z([[7],[3,'cf']])
Z(z[4])
Z([3,'77ae6d1e-38,77ae6d1e-37'])
Z(z[304])
Z([3,'card-preview data-v-77ae6d1e'])
Z([[7],[3,'ch']])
Z(z[3])
Z(z[4])
Z([3,'77ae6d1e-39,77ae6d1e-37'])
Z(z[311])
Z([3,'preview-details data-v-77ae6d1e'])
Z([[7],[3,'cl']])
Z([[7],[3,'cn']])
Z([[7],[3,'cq']])
Z([[7],[3,'cE']])
Z([[7],[3,'cH']])
Z([3,'error-content data-v-77ae6d1e'])
Z([[7],[3,'cF']])
Z(z[3])
Z(z[4])
Z([3,'77ae6d1e-40'])
Z(z[323])
})(__WXML_GLOBAL__.ops_cached.$gwx_18);return __WXML_GLOBAL__.ops_cached.$gwx_18
}
function gz$gwx_19(){
if( __WXML_GLOBAL__.ops_cached.$gwx_19)return __WXML_GLOBAL__.ops_cached.$gwx_19
__WXML_GLOBAL__.ops_cached.$gwx_19=[];
(function(z){var a=11;function Z(ops){z.push(ops)}
Z([3,'sector-details-page data-v-3320a0d2'])
Z([[7],[3,'g']])
Z([3,'export-all-button data-v-3320a0d2'])
Z([[7],[3,'f']])
Z([3,'__l'])
Z([3,'data-v-3320a0d2'])
Z([3,'3320a0d2-0'])
Z(z[3])
Z([[7],[3,'l']])
Z([[7],[3,'p']])
Z(z[4])
Z([[7],[3,'m']])
Z([[7],[3,'o']])
Z([[7],[3,'n']])
Z(z[5])
Z([3,'3320a0d2-1'])
Z(z[9])
Z([3,'sector'])
Z([[7],[3,'q']])
Z([3,'k'])
Z([[4],[[5],[[5],[[5],[[5],[1,'sector-card']],[1,'data-v-3320a0d2']],[[2,'&&'],[[6],[[7],[3,'sector']],[3,'l']],[1,'readable']]],[[2,'&&'],[[6],[[7],[3,'sector']],[3,'m']],[1,'unreadable']]]])
Z([[6],[[7],[3,'sector']],[3,'c']])
Z(z[4])
Z(z[5])
Z([[6],[[7],[3,'sector']],[3,'b']])
Z(z[21])
Z([[6],[[7],[3,'sector']],[3,'e']])
Z([3,'block'])
Z([[6],[[7],[3,'sector']],[3,'f']])
Z([3,'f'])
Z([[6],[[7],[3,'block']],[3,'d']])
Z([3,'copy-button data-v-3320a0d2'])
Z([[6],[[7],[3,'sector']],[3,'g']])
Z(z[4])
Z(z[5])
Z([[6],[[7],[3,'block']],[3,'c']])
Z(z[32])
Z([[6],[[7],[3,'sector']],[3,'h']])
Z([[6],[[7],[3,'sector']],[3,'j']])
Z(z[4])
Z(z[5])
Z([[6],[[7],[3,'sector']],[3,'i']])
Z(z[38])
})(__WXML_GLOBAL__.ops_cached.$gwx_19);return __WXML_GLOBAL__.ops_cached.$gwx_19
}
function gz$gwx_20(){
if( __WXML_GLOBAL__.ops_cached.$gwx_20)return __WXML_GLOBAL__.ops_cached.$gwx_20
__WXML_GLOBAL__.ops_cached.$gwx_20=[];
(function(z){var a=11;function Z(ops){z.push(ops)}
Z([3,'content data-v-3baa783e'])
Z([[7],[3,'a']])
Z([[7],[3,'b']])
Z([3,'__l'])
Z([3,'data-v-3baa783e'])
Z([3,'3baa783e-0'])
Z(z[2])
Z([3,'settings-container data-v-3baa783e'])
Z([[7],[3,'d']])
Z([[7],[3,'e']])
Z(z[3])
Z(z[4])
Z([3,'3baa783e-1'])
Z(z[9])
Z([[7],[3,'f']])
Z(z[4])
Z([[7],[3,'g']])
Z(z[3])
Z(z[4])
Z([3,'3baa783e-2'])
Z(z[16])
Z([[7],[3,'l']])
Z(z[3])
Z(z[4])
Z([3,'3baa783e-3'])
Z(z[21])
Z([3,'setting-card data-v-3baa783e'])
Z([[7],[3,'o']])
Z(z[3])
Z(z[4])
Z([3,'3baa783e-4'])
Z(z[27])
Z([[7],[3,'q']])
Z(z[3])
Z([[7],[3,'p']])
Z(z[4])
Z([3,'3baa783e-5'])
Z(z[32])
Z([[7],[3,'s']])
Z(z[3])
Z([[7],[3,'r']])
Z(z[4])
Z([3,'3baa783e-6'])
Z(z[38])
Z([[7],[3,'v']])
Z(z[3])
Z([[7],[3,'t']])
Z(z[4])
Z([3,'3baa783e-7'])
Z(z[44])
Z([[7],[3,'x']])
Z(z[3])
Z([[7],[3,'w']])
Z(z[4])
Z([3,'3baa783e-8'])
Z(z[50])
Z(z[26])
Z([[7],[3,'y']])
Z(z[3])
Z(z[4])
Z([3,'3baa783e-9'])
Z(z[57])
Z([[7],[3,'B']])
Z([[7],[3,'D']])
Z([[7],[3,'E']])
Z(z[3])
Z(z[4])
Z([3,'3baa783e-10'])
Z(z[64])
Z(z[26])
Z([[7],[3,'P']])
Z(z[3])
Z(z[4])
Z([3,'3baa783e-11'])
Z(z[70])
Z([[7],[3,'R']])
Z([3,'slot-polling-actions data-v-3baa783e'])
Z([[7],[3,'T']])
Z([3,'btn-save-slot data-v-3baa783e'])
Z([[7],[3,'S']])
Z(z[3])
Z(z[4])
Z([3,'3baa783e-12'])
Z(z[79])
Z([[7],[3,'V']])
Z([3,'btn-reset-slot data-v-3baa783e'])
Z([[7],[3,'U']])
Z(z[3])
Z(z[4])
Z([3,'3baa783e-13'])
Z(z[86])
Z([[7],[3,'W']])
Z(z[3])
Z(z[4])
Z([3,'3baa783e-14'])
Z(z[91])
Z(z[26])
Z([[7],[3,'Z']])
Z(z[3])
Z(z[4])
Z([3,'3baa783e-15'])
Z(z[97])
Z([3,'firmware-actions data-v-3baa783e'])
Z([[7],[3,'ab']])
Z([3,'btn-firmware data-v-3baa783e'])
Z([[7],[3,'aa']])
Z(z[3])
Z(z[4])
Z([3,'3baa783e-16'])
Z(z[105])
Z([[7],[3,'ad']])
Z([3,'btn-dfu data-v-3baa783e'])
Z([[7],[3,'ac']])
Z(z[3])
Z(z[4])
Z([3,'3baa783e-17'])
Z(z[112])
Z([[7],[3,'af']])
Z([3,'btn-refresh data-v-3baa783e'])
Z([[7],[3,'ae']])
Z(z[3])
Z(z[4])
Z([3,'3baa783e-18'])
Z(z[119])
Z([[7],[3,'ag']])
Z(z[3])
Z(z[4])
Z([3,'3baa783e-19'])
Z(z[124])
})(__WXML_GLOBAL__.ops_cached.$gwx_20);return __WXML_GLOBAL__.ops_cached.$gwx_20
}
function gz$gwx_21(){
if( __WXML_GLOBAL__.ops_cached.$gwx_21)return __WXML_GLOBAL__.ops_cached.$gwx_21
__WXML_GLOBAL__.ops_cached.$gwx_21=[];
(function(z){var a=11;function Z(ops){z.push(ops)}
Z([3,'slot-edit-page data-v-7f581d10'])
Z([3,'content data-v-7f581d10'])
Z([3,'section data-v-7f581d10'])
Z([[7],[3,'b']])
Z([3,'header-btn data-v-7f581d10'])
Z([[7],[3,'a']])
Z([3,'__l'])
Z([3,'data-v-7f581d10'])
Z([3,'7f581d10-0'])
Z(z[5])
Z([3,'section-content data-v-7f581d10'])
Z([[7],[3,'j']])
Z([[7],[3,'p']])
Z(z[7])
Z([3,'selector'])
Z([[7],[3,'o']])
Z([3,'name'])
Z([[7],[3,'n']])
Z([[7],[3,'m']])
Z(z[6])
Z(z[7])
Z([3,'7f581d10-1'])
Z(z[18])
Z([[7],[3,'q']])
Z(z[10])
Z([3,'form-row data-v-7f581d10'])
Z([[7],[3,'w']])
Z([[7],[3,'y']])
Z([3,'copy-btn data-v-7f581d10'])
Z([[7],[3,'x']])
Z(z[6])
Z(z[7])
Z([3,'7f581d10-2'])
Z(z[29])
Z([[7],[3,'z']])
Z(z[25])
Z([[7],[3,'F']])
Z([[7],[3,'H']])
Z(z[28])
Z([[7],[3,'G']])
Z(z[6])
Z(z[7])
Z([3,'7f581d10-3'])
Z(z[39])
Z([[7],[3,'I']])
Z(z[25])
Z([[7],[3,'O']])
Z([[7],[3,'Q']])
Z(z[28])
Z([[7],[3,'P']])
Z(z[6])
Z(z[7])
Z([3,'7f581d10-4'])
Z(z[49])
Z([[7],[3,'R']])
Z(z[25])
Z([[7],[3,'X']])
Z([[7],[3,'Z']])
Z(z[28])
Z([[7],[3,'Y']])
Z(z[6])
Z(z[7])
Z([3,'7f581d10-5'])
Z(z[59])
Z([[7],[3,'aa']])
Z([[7],[3,'ac']])
Z([[7],[3,'at']])
Z(z[7])
Z(z[14])
Z([[7],[3,'as']])
Z(z[16])
Z([[7],[3,'ar']])
Z([[7],[3,'aq']])
Z(z[6])
Z(z[7])
Z([3,'7f581d10-6'])
Z(z[72])
Z([[7],[3,'av']])
Z([[7],[3,'ax']])
Z([3,'action-btn danger data-v-7f581d10'])
Z([[7],[3,'ay']])
Z([[7],[3,'aw']])
Z(z[6])
Z(z[7])
Z([3,'7f581d10-7'])
Z(z[81])
Z([[7],[3,'aD']])
Z([[7],[3,'aE']])
Z(z[6])
Z(z[7])
Z([3,'7f581d10-8'])
Z(z[87])
Z([[7],[3,'aF']])
Z([[7],[3,'aG']])
Z(z[6])
Z(z[7])
Z([3,'7f581d10-9'])
Z(z[93])
Z([[7],[3,'aW']])
Z(z[6])
Z([3,'r data-v-7f581d10'])
Z([3,'7f581d10-10'])
Z(z[98])
Z([3,'cardPackagePopup'])
Z([[4],[[5],[1,'d']]])
Z([3,'card-package-popup data-v-7f581d10'])
Z([[7],[3,'aJ']])
Z([3,'popup-close data-v-7f581d10'])
Z([[7],[3,'aI']])
Z(z[6])
Z(z[7])
Z([3,'7f581d10-11,7f581d10-10'])
Z(z[108])
Z([3,'popup-content data-v-7f581d10'])
Z([[7],[3,'aN']])
Z(z[6])
Z([[7],[3,'aL']])
Z([[7],[3,'aK']])
Z([[7],[3,'aM']])
Z(z[7])
Z([3,'7f581d10-12,7f581d10-10'])
Z(z[114])
Z([3,'filter'])
Z([[7],[3,'aO']])
Z([3,'f'])
Z([[6],[[7],[3,'filter']],[3,'h']])
Z([[4],[[5],[[5],[[5],[1,'data-v-7f581d10']],[1,'filter-tag']],[[6],[[7],[3,'filter']],[3,'g']]]])
Z([[6],[[7],[3,'filter']],[3,'b']])
Z(z[6])
Z(z[7])
Z([[6],[[7],[3,'filter']],[3,'a']])
Z(z[127])
Z([[6],[[7],[3,'filter']],[3,'d']])
Z([3,'cards-list data-v-7f581d10'])
Z([[7],[3,'aP']])
Z([3,'empty-cards data-v-7f581d10'])
Z([[7],[3,'aQ']])
Z(z[6])
Z(z[7])
Z([3,'7f581d10-14,7f581d10-10'])
Z(z[136])
Z([[7],[3,'aS']])
Z([3,'empty-action data-v-7f581d10'])
Z([[7],[3,'aR']])
Z(z[6])
Z(z[7])
Z([3,'7f581d10-15,7f581d10-10'])
Z(z[143])
Z([3,'card'])
Z([[7],[3,'aT']])
Z([3,'l'])
Z([[6],[[7],[3,'card']],[3,'n']])
Z([[6],[[7],[3,'card']],[3,'m']])
Z([3,'card-item data-v-7f581d10'])
Z([[6],[[7],[3,'card']],[3,'b']])
Z(z[6])
Z(z[7])
Z([[6],[[7],[3,'card']],[3,'a']])
Z(z[154])
Z([[6],[[7],[3,'card']],[3,'f']])
Z([[6],[[7],[3,'card']],[3,'k']])
Z([3,'card-preview data-v-7f581d10'])
Z([[7],[3,'aU']])
Z(z[6])
Z(z[7])
Z([[6],[[7],[3,'card']],[3,'j']])
Z(z[162])
Z([[7],[3,'br']])
Z(z[6])
Z(z[100])
Z([3,'7f581d10-18'])
Z(z[167])
Z([3,'cardDetailPopup'])
Z(z[104])
Z([[7],[3,'aX']])
Z([3,'card-detail-popup data-v-7f581d10'])
Z([[7],[3,'ba']])
Z(z[107])
Z([[7],[3,'aZ']])
Z(z[6])
Z(z[7])
Z([3,'7f581d10-19,7f581d10-18'])
Z(z[178])
Z([3,'detail-content data-v-7f581d10'])
Z([[7],[3,'bc']])
Z([[7],[3,'bf']])
Z([[7],[3,'bh']])
Z([[7],[3,'bj']])
})(__WXML_GLOBAL__.ops_cached.$gwx_21);return __WXML_GLOBAL__.ops_cached.$gwx_21
}
function gz$gwx_22(){
if( __WXML_GLOBAL__.ops_cached.$gwx_22)return __WXML_GLOBAL__.ops_cached.$gwx_22
__WXML_GLOBAL__.ops_cached.$gwx_22=[];
(function(z){var a=11;function Z(ops){z.push(ops)}
Z([3,'slots-page data-v-66e607d7'])
Z([3,'content data-v-66e607d7'])
Z([[7],[3,'a']])
Z([3,'active-slot-card data-v-66e607d7'])
Z([[7],[3,'b']])
Z([3,'__l'])
Z([3,'data-v-66e607d7'])
Z([3,'66e607d7-0'])
Z(z[4])
Z([3,'cards-overview data-v-66e607d7'])
Z([[7],[3,'e']])
Z([[7],[3,'f']])
Z(z[5])
Z(z[6])
Z([3,'66e607d7-1'])
Z(z[11])
Z([[7],[3,'h']])
Z([[7],[3,'i']])
Z(z[5])
Z(z[6])
Z([3,'66e607d7-2'])
Z(z[17])
Z([3,'quick-actions-bar data-v-66e607d7'])
Z([[7],[3,'l']])
Z([3,'quick-btn data-v-66e607d7'])
Z([[7],[3,'m']])
Z([[7],[3,'k']])
Z(z[5])
Z(z[6])
Z([3,'66e607d7-3'])
Z(z[26])
Z([[7],[3,'o']])
Z(z[24])
Z([[7],[3,'p']])
Z([[7],[3,'n']])
Z(z[5])
Z(z[6])
Z([3,'66e607d7-4'])
Z(z[34])
Z([[7],[3,'s']])
Z([3,'quick-btn refresh-btn data-v-66e607d7'])
Z([[7],[3,'t']])
Z([[7],[3,'r']])
Z(z[5])
Z([[4],[[5],[[5],[1,'data-v-66e607d7']],[[2,'&&'],[[7],[3,'q']],[1,'rotating']]]])
Z([3,'66e607d7-5'])
Z(z[42])
Z([3,'slots-section data-v-66e607d7'])
Z([[7],[3,'x']])
Z([[7],[3,'y']])
Z(z[5])
Z(z[6])
Z([3,'66e607d7-6'])
Z(z[49])
Z([3,'slot'])
Z([[7],[3,'z']])
Z([3,'N'])
Z([[6],[[7],[3,'slot']],[3,'R']])
Z([[4],[[5],[[5],[[5],[[5],[[5],[1,'slot-item']],[1,'data-v-66e607d7']],[[2,'&&'],[[6],[[7],[3,'slot']],[3,'O']],[1,'active']]],[[2,'&&'],[[6],[[7],[3,'slot']],[3,'P']],[1,'used']]],[[2,'&&'],[[6],[[7],[3,'slot']],[3,'Q']],[1,'disabled']]]])
Z([3,'slot-item-header data-v-66e607d7'])
Z([3,'slot-status data-v-66e607d7'])
Z([[6],[[7],[3,'slot']],[3,'c']])
Z([[6],[[7],[3,'slot']],[3,'e']])
Z(z[5])
Z(z[6])
Z([[6],[[7],[3,'slot']],[3,'d']])
Z(z[62])
Z([[6],[[7],[3,'slot']],[3,'f']])
Z([[6],[[7],[3,'slot']],[3,'h']])
Z(z[6])
Z([[7],[3,'A']])
Z(z[5])
Z(z[6])
Z([[6],[[7],[3,'slot']],[3,'g']])
Z(z[70])
Z([[6],[[7],[3,'slot']],[3,'i']])
Z([3,'frequency-section data-v-66e607d7'])
Z([[6],[[7],[3,'slot']],[3,'k']])
Z(z[5])
Z(z[6])
Z([[6],[[7],[3,'slot']],[3,'j']])
Z(z[77])
Z([[6],[[7],[3,'slot']],[3,'v']])
Z([3,'frequency-content data-v-66e607d7'])
Z([[6],[[7],[3,'slot']],[3,'t']])
Z(z[5])
Z(z[6])
Z([[6],[[7],[3,'slot']],[3,'s']])
Z(z[84])
Z([[6],[[7],[3,'slot']],[3,'w']])
Z(z[76])
Z([[6],[[7],[3,'slot']],[3,'y']])
Z(z[5])
Z(z[6])
Z([[6],[[7],[3,'slot']],[3,'x']])
Z(z[91])
Z([[6],[[7],[3,'slot']],[3,'I']])
Z(z[83])
Z([[6],[[7],[3,'slot']],[3,'H']])
Z(z[5])
Z(z[6])
Z([[6],[[7],[3,'slot']],[3,'G']])
Z(z[98])
Z([[6],[[7],[3,'slot']],[3,'J']])
Z([[6],[[7],[3,'slot']],[3,'M']])
Z([3,'empty-slot-hint data-v-66e607d7'])
Z([[6],[[7],[3,'slot']],[3,'L']])
Z(z[5])
Z(z[6])
Z([[6],[[7],[3,'slot']],[3,'K']])
Z(z[106])
Z([[7],[3,'B']])
Z([[7],[3,'J']])
Z([3,'popup-overlay data-v-66e607d7'])
Z([[7],[3,'I']])
Z([3,'settings-popup data-v-66e607d7'])
Z([[7],[3,'D']])
Z([3,'close-btn data-v-66e607d7'])
Z([[7],[3,'C']])
Z(z[5])
Z(z[6])
Z([3,'66e607d7-14'])
Z(z[118])
})(__WXML_GLOBAL__.ops_cached.$gwx_22);return __WXML_GLOBAL__.ops_cached.$gwx_22
}
__WXML_GLOBAL__.ops_set.$gwx=z;
__WXML_GLOBAL__.ops_init.$gwx=true;
var nv_require=function(){var nnm={};var nom={};return function(n){if(n[0]==='p'&&n[1]==='_'&&f_[n.slice(2)])return f_[n.slice(2)];return function(){if(!nnm[n]) return undefined;try{if(!nom[n])nom[n]=nnm[n]();return nom[n];}catch(e){e.message=e.message.replace(/nv_/g,'');var tmp = e.stack.substring(0,e.stack.lastIndexOf(n));e.stack = tmp.substring(0,tmp.lastIndexOf('\n'));e.stack = e.stack.replace(/\snv_/g,' ');e.stack = $gstack(e.stack);e.stack += '\n    at ' + n.substring(2);console.error(e);}
}}}()
var x=['./components/card-data-viewer/card-data-viewer.wxml','./components/setting-item.wxml','./node-modules/@dcloudio/uni-ui/lib/uni-icons/uni-icons.wxml','./node-modules/@dcloudio/uni-ui/lib/uni-load-more/uni-load-more.wxml','./node-modules/@dcloudio/uni-ui/lib/uni-popup-dialog/uni-popup-dialog.wxml','./node-modules/@dcloudio/uni-ui/lib/uni-popup/uni-popup.wxml','./node-modules/@dcloudio/uni-ui/lib/uni-search-bar/uni-search-bar.wxml','./node-modules/@dcloudio/uni-ui/lib/uni-transition/uni-transition.wxml','./pages/card-detail/card-detail.wxml','./pages/card-select/card-select.wxml','./pages/card-write/card-write.wxml','./pages/cards/cards.wxml','./pages/connect/connect.wxml','./pages/firmware/firmware.wxml','./pages/geofence-edit/geofence-edit.wxml','./pages/geofence/geofence.wxml','./pages/home/home.wxml','./pages/reader/reader.wxml','./pages/sector-details/sector-details.wxml','./pages/settings/settings.wxml','./pages/slot-edit/slot-edit.wxml','./pages/slots/slots.wxml'];d_[x[0]]={}
var m0=function(e,s,r,gg){
var z=gz$gwx_1()
var oB=_n('view')
_rz(z,oB,'class',0,e,s,gg)
var xC=_v()
_(oB,xC)
if(_oz(z,1,e,s,gg)){xC.wxVkey=1
var cF=_n('view')
_rz(z,cF,'class',2,e,s,gg)
var hG=_v()
_(cF,hG)
if(_oz(z,3,e,s,gg)){hG.wxVkey=1
var oH=_n('view')
_rz(z,oH,'class',4,e,s,gg)
var cI=_v()
_(oH,cI)
if(_oz(z,5,e,s,gg)){cI.wxVkey=1
var lK=_mz(z,'button',['bindtap',6,'class',1],[],e,s,gg)
var aL=_v()
_(lK,aL)
if(_oz(z,8,e,s,gg)){aL.wxVkey=1
var tM=_mz(z,'uni-icons',['bind:__l',9,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(aL,tM)
}
aL.wxXCkey=1
aL.wxXCkey=3
_(cI,lK)
}
var oJ=_v()
_(oH,oJ)
if(_oz(z,13,e,s,gg)){oJ.wxVkey=1
var eN=_mz(z,'button',['bindtap',14,'class',1],[],e,s,gg)
var bO=_v()
_(eN,bO)
if(_oz(z,16,e,s,gg)){bO.wxVkey=1
var oP=_mz(z,'uni-icons',['bind:__l',17,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(bO,oP)
}
bO.wxXCkey=1
bO.wxXCkey=3
_(oJ,eN)
}
else{oJ.wxVkey=2
var xQ=_mz(z,'button',['bindtap',21,'class',1],[],e,s,gg)
var oR=_v()
_(xQ,oR)
if(_oz(z,23,e,s,gg)){oR.wxVkey=1
var fS=_mz(z,'uni-icons',['bind:__l',24,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(oR,fS)
}
oR.wxXCkey=1
oR.wxXCkey=3
_(oJ,xQ)
}
cI.wxXCkey=1
cI.wxXCkey=3
oJ.wxXCkey=1
oJ.wxXCkey=3
oJ.wxXCkey=3
_(hG,oH)
}
var cT=_n('view')
_rz(z,cT,'class',28,e,s,gg)
var hU=_v()
_(cT,hU)
if(_oz(z,29,e,s,gg)){hU.wxVkey=1
}
var oV=_v()
_(cT,oV)
var cW=function(lY,oX,aZ,gg){
var e2=_v()
_(aZ,e2)
var b3=function(x5,o4,o6,gg){
var c8=_v()
_(o6,c8)
if(_oz(z,36,x5,o4,gg)){c8.wxVkey=1
var h9=_mz(z,'button',['bindtap',37,'class',1],[],x5,o4,gg)
var o0=_v()
_(h9,o0)
if(_oz(z,39,x5,o4,gg)){o0.wxVkey=1
var cAB=_mz(z,'uni-icons',['bind:__l',40,'class',1,'uI',2,'uP',3],[],x5,o4,gg)
_(o0,cAB)
}
o0.wxXCkey=1
o0.wxXCkey=3
_(c8,h9)
}
c8.wxXCkey=1
c8.wxXCkey=3
return o6
}
e2.wxXCkey=4
_2z(z,34,b3,lY,oX,gg,e2,'block','index','h')
return aZ
}
oV.wxXCkey=4
_2z(z,31,cW,e,s,gg,oV,'sector','index','b')
hU.wxXCkey=1
_(cF,cT)
hG.wxXCkey=1
hG.wxXCkey=3
_(xC,cF)
}
else if(_oz(z,44,e,s,gg)){xC.wxVkey=2
var oBB=_n('view')
_rz(z,oBB,'class',45,e,s,gg)
var lCB=_v()
_(oBB,lCB)
if(_oz(z,46,e,s,gg)){lCB.wxVkey=1
var aDB=_n('view')
_rz(z,aDB,'class',47,e,s,gg)
var tEB=_v()
_(aDB,tEB)
if(_oz(z,48,e,s,gg)){tEB.wxVkey=1
var bGB=_mz(z,'button',['bindtap',49,'class',1],[],e,s,gg)
var oHB=_v()
_(bGB,oHB)
if(_oz(z,51,e,s,gg)){oHB.wxVkey=1
var xIB=_mz(z,'uni-icons',['bind:__l',52,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(oHB,xIB)
}
oHB.wxXCkey=1
oHB.wxXCkey=3
_(tEB,bGB)
}
var eFB=_v()
_(aDB,eFB)
if(_oz(z,56,e,s,gg)){eFB.wxVkey=1
var oJB=_mz(z,'button',['bindtap',57,'class',1],[],e,s,gg)
var fKB=_v()
_(oJB,fKB)
if(_oz(z,59,e,s,gg)){fKB.wxVkey=1
var cLB=_mz(z,'uni-icons',['bind:__l',60,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(fKB,cLB)
}
fKB.wxXCkey=1
fKB.wxXCkey=3
_(eFB,oJB)
}
else{eFB.wxVkey=2
var hMB=_mz(z,'button',['bindtap',64,'class',1],[],e,s,gg)
var oNB=_v()
_(hMB,oNB)
if(_oz(z,66,e,s,gg)){oNB.wxVkey=1
var cOB=_mz(z,'uni-icons',['bind:__l',67,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(oNB,cOB)
}
oNB.wxXCkey=1
oNB.wxXCkey=3
_(eFB,hMB)
}
tEB.wxXCkey=1
tEB.wxXCkey=3
eFB.wxXCkey=1
eFB.wxXCkey=3
eFB.wxXCkey=3
_(lCB,aDB)
}
var oPB=_n('view')
_rz(z,oPB,'class',71,e,s,gg)
var lQB=_v()
_(oPB,lQB)
if(_oz(z,72,e,s,gg)){lQB.wxVkey=1
}
var aRB=_v()
_(oPB,aRB)
var tSB=function(bUB,eTB,oVB,gg){
var oXB=_n('view')
_rz(z,oXB,'class',76,bUB,eTB,gg)
var fYB=_v()
_(oXB,fYB)
if(_oz(z,77,bUB,eTB,gg)){fYB.wxVkey=1
}
var cZB=_v()
_(oXB,cZB)
if(_oz(z,78,bUB,eTB,gg)){cZB.wxVkey=1
var h1B=_v()
_(cZB,h1B)
if(_oz(z,79,bUB,eTB,gg)){h1B.wxVkey=1
var o2B=_mz(z,'button',['bindtap',80,'class',1],[],bUB,eTB,gg)
var c3B=_v()
_(o2B,c3B)
if(_oz(z,82,bUB,eTB,gg)){c3B.wxVkey=1
var o4B=_mz(z,'uni-icons',['bind:__l',83,'class',1,'uI',2,'uP',3],[],bUB,eTB,gg)
_(c3B,o4B)
}
c3B.wxXCkey=1
c3B.wxXCkey=3
_(h1B,o2B)
}
h1B.wxXCkey=1
h1B.wxXCkey=3
}
fYB.wxXCkey=1
cZB.wxXCkey=1
cZB.wxXCkey=3
_(oVB,oXB)
return oVB
}
aRB.wxXCkey=4
_2z(z,74,tSB,e,s,gg,aRB,'page','index','l')
lQB.wxXCkey=1
_(oBB,oPB)
lCB.wxXCkey=1
lCB.wxXCkey=3
_(xC,oBB)
}
else if(_oz(z,87,e,s,gg)){xC.wxVkey=3
var l5B=_v()
_(xC,l5B)
if(_oz(z,88,e,s,gg)){l5B.wxVkey=1
var a6B=_mz(z,'button',['bindtap',89,'class',1],[],e,s,gg)
var t7B=_v()
_(a6B,t7B)
if(_oz(z,91,e,s,gg)){t7B.wxVkey=1
var e8B=_mz(z,'uni-icons',['bind:__l',92,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(t7B,e8B)
}
t7B.wxXCkey=1
t7B.wxXCkey=3
_(l5B,a6B)
}
l5B.wxXCkey=1
l5B.wxXCkey=3
}
else{xC.wxVkey=4
var b9B=_v()
_(xC,b9B)
if(_oz(z,96,e,s,gg)){b9B.wxVkey=1
var o0B=_mz(z,'button',['bindtap',97,'class',1],[],e,s,gg)
var xAC=_v()
_(o0B,xAC)
if(_oz(z,99,e,s,gg)){xAC.wxVkey=1
var oBC=_mz(z,'uni-icons',['bind:__l',100,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(xAC,oBC)
}
xAC.wxXCkey=1
xAC.wxXCkey=3
_(b9B,o0B)
}
b9B.wxXCkey=1
b9B.wxXCkey=3
}
var oD=_v()
_(oB,oD)
if(_oz(z,104,e,s,gg)){oD.wxVkey=1
var fCC=_mz(z,'uni-popup',['bind:__l',105,'class',1,'uI',2,'uP',3,'uR',4,'uS',5],[],e,s,gg)
var cDC=_v()
_(fCC,cDC)
if(_oz(z,111,e,s,gg)){cDC.wxVkey=1
}
cDC.wxXCkey=1
_(oD,fCC)
}
var fE=_v()
_(oB,fE)
if(_oz(z,112,e,s,gg)){fE.wxVkey=1
var hEC=_mz(z,'uni-popup',['bind:__l',113,'class',1,'uI',2,'uP',3,'uR',4,'uS',5],[],e,s,gg)
var oFC=_v()
_(hEC,oFC)
if(_oz(z,119,e,s,gg)){oFC.wxVkey=1
}
oFC.wxXCkey=1
_(fE,hEC)
}
xC.wxXCkey=1
xC.wxXCkey=3
xC.wxXCkey=3
xC.wxXCkey=3
xC.wxXCkey=3
oD.wxXCkey=1
oD.wxXCkey=3
fE.wxXCkey=1
fE.wxXCkey=3
_(r,oB)
return r
}
e_[x[0]]={f:m0,j:[],i:[],ti:[],ic:[]}
d_[x[1]]={}
var m1=function(e,s,r,gg){
var z=gz$gwx_2()
var oHC=_mz(z,'picker',['bindchange',0,'class',1,'range',1,'value',2],[],e,s,gg)
var lIC=_v()
_(oHC,lIC)
if(_oz(z,4,e,s,gg)){lIC.wxVkey=1
var aJC=_mz(z,'uni-icons',['bind:__l',5,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(lIC,aJC)
}
lIC.wxXCkey=1
lIC.wxXCkey=3
_(r,oHC)
return r
}
e_[x[1]]={f:m1,j:[],i:[],ti:[],ic:[]}
d_[x[2]]={}
var m2=function(e,s,r,gg){
var z=gz$gwx_3()
var eLC=_mz(z,'text',['bindtap',0,'class',1,'style',1],[],e,s,gg)
var bMC=_n('slot')
_(eLC,bMC)
_(r,eLC)
return r
}
e_[x[2]]={f:m2,j:[],i:[],ti:[],ic:[]}
d_[x[3]]={}
var m3=function(e,s,r,gg){
var z=gz$gwx_4()
var xOC=_mz(z,'view',['bindtap',0,'class',1],[],e,s,gg)
var oPC=_v()
_(xOC,oPC)
if(_oz(z,2,e,s,gg)){oPC.wxVkey=1
}
oPC.wxXCkey=1
_(r,xOC)
return r
}
e_[x[3]]={f:m3,j:[],i:[],ti:[],ic:[]}
d_[x[4]]={}
var m4=function(e,s,r,gg){
var z=gz$gwx_5()
var cRC=_n('view')
_rz(z,cRC,'class',0,e,s,gg)
var hSC=_v()
_(cRC,hSC)
if(_oz(z,1,e,s,gg)){hSC.wxVkey=1
var cUC=_n('view')
_rz(z,cUC,'class',2,e,s,gg)
var oVC=_v()
_(cUC,oVC)
if(_oz(z,3,e,s,gg)){oVC.wxVkey=1
var lWC=_n('slot')
_(oVC,lWC)
}
else{oVC.wxVkey=2
}
oVC.wxXCkey=1
_(hSC,cUC)
}
else{hSC.wxVkey=2
var aXC=_n('view')
_rz(z,aXC,'class',4,e,s,gg)
var tYC=_v()
_(aXC,tYC)
if(_oz(z,5,e,s,gg)){tYC.wxVkey=1
var eZC=_n('slot')
_(tYC,eZC)
}
else{tYC.wxVkey=2
var b1C=_v()
_(tYC,b1C)
if(_oz(z,6,e,s,gg)){b1C.wxVkey=1
}
b1C.wxXCkey=1
}
tYC.wxXCkey=1
_(hSC,aXC)
}
var oTC=_v()
_(cRC,oTC)
if(_oz(z,7,e,s,gg)){oTC.wxVkey=1
}
hSC.wxXCkey=1
oTC.wxXCkey=1
_(r,cRC)
return r
}
e_[x[4]]={f:m4,j:[],i:[],ti:[],ic:[]}
d_[x[5]]={}
var m5=function(e,s,r,gg){
var z=gz$gwx_6()
var x3C=_v()
_(r,x3C)
if(_oz(z,0,e,s,gg)){x3C.wxVkey=1
var o4C=_n('view')
_rz(z,o4C,'bindtouchstart',1,e,s,gg)
var f5C=_v()
_(o4C,f5C)
if(_oz(z,2,e,s,gg)){f5C.wxVkey=1
var h7C=_mz(z,'uni-transition',['bind:__l',3,'bindclick',1,'key',2,'uI',3,'uP',4],[],e,s,gg)
_(f5C,h7C)
}
var c6C=_v()
_(o4C,c6C)
if(_oz(z,8,e,s,gg)){c6C.wxVkey=1
var o8C=_mz(z,'uni-transition',['bind:__l',9,'bindclick',1,'key',2,'uI',3,'uP',4,'uS',5],[],e,s,gg)
var c9C=_mz(z,'view',['bindtap',15,'class',1,'style',2],[],e,s,gg)
var o0C=_n('slot')
_(c9C,o0C)
_(o8C,c9C)
_(c6C,o8C)
}
f5C.wxXCkey=1
f5C.wxXCkey=3
c6C.wxXCkey=1
c6C.wxXCkey=3
_(x3C,o4C)
}
x3C.wxXCkey=1
x3C.wxXCkey=3
return r
}
e_[x[5]]={f:m5,j:[],i:[],ti:[],ic:[]}
d_[x[6]]={}
var m6=function(e,s,r,gg){
var z=gz$gwx_7()
var aBD=_n('view')
_rz(z,aBD,'class',0,e,s,gg)
var eDD=_mz(z,'view',['bindtap',1,'class',1,'style',2],[],e,s,gg)
var oFD=_n('view')
_rz(z,oFD,'class',4,e,s,gg)
var xGD=_v()
_(oFD,xGD)
if(_oz(z,5,e,s,gg)){xGD.wxVkey=1
var oHD=_n('slot')
_rz(z,oHD,'name',6,e,s,gg)
_(xGD,oHD)
}
else{xGD.wxVkey=2
var fID=_v()
_(xGD,fID)
if(_oz(z,7,e,s,gg)){fID.wxVkey=1
var cJD=_mz(z,'uni-icons',['bind:__l',8,'uI',1,'uP',2],[],e,s,gg)
_(fID,cJD)
}
fID.wxXCkey=1
fID.wxXCkey=3
}
xGD.wxXCkey=1
xGD.wxXCkey=3
_(eDD,oFD)
var bED=_v()
_(eDD,bED)
if(_oz(z,11,e,s,gg)){bED.wxVkey=1
var hKD=_mz(z,'view',['bindtap',12,'class',1],[],e,s,gg)
var oLD=_v()
_(hKD,oLD)
if(_oz(z,14,e,s,gg)){oLD.wxVkey=1
var cMD=_n('slot')
_rz(z,cMD,'name',15,e,s,gg)
_(oLD,cMD)
}
else{oLD.wxVkey=2
var oND=_v()
_(oLD,oND)
if(_oz(z,16,e,s,gg)){oND.wxVkey=1
var lOD=_mz(z,'uni-icons',['bind:__l',17,'uI',1,'uP',2],[],e,s,gg)
_(oND,lOD)
}
oND.wxXCkey=1
oND.wxXCkey=3
}
oLD.wxXCkey=1
oLD.wxXCkey=3
_(bED,hKD)
}
bED.wxXCkey=1
bED.wxXCkey=3
_(aBD,eDD)
var tCD=_v()
_(aBD,tCD)
if(_oz(z,20,e,s,gg)){tCD.wxVkey=1
}
tCD.wxXCkey=1
_(r,aBD)
return r
}
e_[x[6]]={f:m6,j:[],i:[],ti:[],ic:[]}
d_[x[7]]={}
var m7=function(e,s,r,gg){
var z=gz$gwx_8()
var tQD=_mz(z,'view',['animation',0,'bindtap',1,'class',1,'hidden',2,'ref',3,'style',4],[],e,s,gg)
var eRD=_n('slot')
_(tQD,eRD)
_(r,tQD)
return r
}
e_[x[7]]={f:m7,j:[],i:[],ti:[],ic:[]}
d_[x[8]]={}
var m8=function(e,s,r,gg){
var z=gz$gwx_9()
var oTD=_n('view')
_rz(z,oTD,'class',0,e,s,gg)
var oVD=_n('view')
_rz(z,oVD,'class',1,e,s,gg)
var cXD=_mz(z,'view',['bindtap',2,'class',1],[],e,s,gg)
var hYD=_v()
_(cXD,hYD)
if(_oz(z,4,e,s,gg)){hYD.wxVkey=1
var oZD=_mz(z,'uni-icons',['bind:__l',5,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(hYD,oZD)
}
hYD.wxXCkey=1
hYD.wxXCkey=3
_(oVD,cXD)
var fWD=_v()
_(oVD,fWD)
if(_oz(z,9,e,s,gg)){fWD.wxVkey=1
var c1D=_mz(z,'view',['bindtap',10,'class',1],[],e,s,gg)
var o2D=_v()
_(c1D,o2D)
if(_oz(z,12,e,s,gg)){o2D.wxVkey=1
var l3D=_mz(z,'uni-icons',['bind:__l',13,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(o2D,l3D)
}
o2D.wxXCkey=1
o2D.wxXCkey=3
_(fWD,c1D)
}
fWD.wxXCkey=1
fWD.wxXCkey=3
_(oTD,oVD)
var a4D=_mz(z,'scroll-view',['class',17,'scrollY',1],[],e,s,gg)
var t5D=_n('view')
_rz(z,t5D,'class',19,e,s,gg)
var e6D=_v()
_(t5D,e6D)
if(_oz(z,20,e,s,gg)){e6D.wxVkey=1
}
var b7D=_n('view')
_rz(z,b7D,'class',21,e,s,gg)
var o8D=_v()
_(b7D,o8D)
if(_oz(z,22,e,s,gg)){o8D.wxVkey=1
}
else{o8D.wxVkey=2
var x9D=_v()
_(o8D,x9D)
if(_oz(z,23,e,s,gg)){x9D.wxVkey=1
}
x9D.wxXCkey=1
}
o8D.wxXCkey=1
_(t5D,b7D)
e6D.wxXCkey=1
_(a4D,t5D)
var o0D=_n('view')
_rz(z,o0D,'class',24,e,s,gg)
var fAE=_v()
_(o0D,fAE)
if(_oz(z,25,e,s,gg)){fAE.wxVkey=1
var cBE=_n('view')
_rz(z,cBE,'class',26,e,s,gg)
var hCE=_v()
_(cBE,hCE)
if(_oz(z,27,e,s,gg)){hCE.wxVkey=1
}
var oDE=_n('view')
_rz(z,oDE,'class',28,e,s,gg)
var cEE=_v()
_(oDE,cEE)
if(_oz(z,29,e,s,gg)){cEE.wxVkey=1
var oFE=_v()
_(cEE,oFE)
if(_oz(z,30,e,s,gg)){oFE.wxVkey=1
}
oFE.wxXCkey=1
}
else{cEE.wxVkey=2
var lGE=_v()
_(cEE,lGE)
if(_oz(z,31,e,s,gg)){lGE.wxVkey=1
var aHE=_mz(z,'card-data-viewer',['bind:__l',32,'binddataChanged',1,'bindeditCancel',2,'bindeditStart',3,'class',4,'uI',5,'uP',6],[],e,s,gg)
_(lGE,aHE)
}
lGE.wxXCkey=1
lGE.wxXCkey=3
}
cEE.wxXCkey=1
cEE.wxXCkey=3
_(cBE,oDE)
hCE.wxXCkey=1
_(fAE,cBE)
}
else if(_oz(z,39,e,s,gg)){fAE.wxVkey=2
var tIE=_n('view')
_rz(z,tIE,'class',40,e,s,gg)
var eJE=_v()
_(tIE,eJE)
if(_oz(z,41,e,s,gg)){eJE.wxVkey=1
}
var bKE=_n('view')
_rz(z,bKE,'class',42,e,s,gg)
var oLE=_v()
_(bKE,oLE)
if(_oz(z,43,e,s,gg)){oLE.wxVkey=1
}
else{oLE.wxVkey=2
var xME=_v()
_(oLE,xME)
if(_oz(z,44,e,s,gg)){xME.wxVkey=1
var oNE=_mz(z,'card-data-viewer',['bind:__l',45,'binddataChanged',1,'bindeditCancel',2,'bindeditStart',3,'class',4,'uI',5,'uP',6],[],e,s,gg)
_(xME,oNE)
}
xME.wxXCkey=1
xME.wxXCkey=3
}
oLE.wxXCkey=1
oLE.wxXCkey=3
_(tIE,bKE)
eJE.wxXCkey=1
_(fAE,tIE)
}
else{fAE.wxVkey=3
var fOE=_n('view')
_rz(z,fOE,'class',52,e,s,gg)
var cPE=_v()
_(fOE,cPE)
if(_oz(z,53,e,s,gg)){cPE.wxVkey=1
var hQE=_n('view')
_rz(z,hQE,'class',54,e,s,gg)
var oRE=_v()
_(hQE,oRE)
if(_oz(z,55,e,s,gg)){oRE.wxVkey=1
}
var cSE=_v()
_(hQE,cSE)
if(_oz(z,56,e,s,gg)){cSE.wxVkey=1
}
oRE.wxXCkey=1
cSE.wxXCkey=1
_(cPE,hQE)
}
else{cPE.wxVkey=2
var oTE=_v()
_(cPE,oTE)
if(_oz(z,57,e,s,gg)){oTE.wxVkey=1
var lUE=_mz(z,'card-data-viewer',['bind:__l',58,'binddataChanged',1,'bindeditCancel',2,'bindeditStart',3,'class',4,'uI',5,'uP',6],[],e,s,gg)
_(oTE,lUE)
}
oTE.wxXCkey=1
oTE.wxXCkey=3
}
cPE.wxXCkey=1
cPE.wxXCkey=3
_(fAE,fOE)
}
fAE.wxXCkey=1
fAE.wxXCkey=3
fAE.wxXCkey=3
fAE.wxXCkey=3
_(a4D,o0D)
var aVE=_n('view')
_rz(z,aVE,'class',65,e,s,gg)
var tWE=_v()
_(aVE,tWE)
if(_oz(z,66,e,s,gg)){tWE.wxVkey=1
var bYE=_n('view')
_rz(z,bYE,'class',67,e,s,gg)
var oZE=_mz(z,'button',['bindtap',68,'class',1],[],e,s,gg)
var x1E=_v()
_(oZE,x1E)
if(_oz(z,70,e,s,gg)){x1E.wxVkey=1
var o2E=_mz(z,'uni-icons',['bind:__l',71,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(x1E,o2E)
}
x1E.wxXCkey=1
x1E.wxXCkey=3
_(bYE,oZE)
var f3E=_mz(z,'button',['bindtap',75,'class',1,'disabled',2],[],e,s,gg)
var c4E=_v()
_(f3E,c4E)
if(_oz(z,78,e,s,gg)){c4E.wxVkey=1
var h5E=_mz(z,'uni-icons',['bind:__l',79,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(c4E,h5E)
}
c4E.wxXCkey=1
c4E.wxXCkey=3
_(bYE,f3E)
_(tWE,bYE)
}
var eXE=_v()
_(aVE,eXE)
if(_oz(z,83,e,s,gg)){eXE.wxVkey=1
var o6E=_n('view')
_rz(z,o6E,'class',84,e,s,gg)
var c7E=_mz(z,'button',['bindtap',85,'class',1],[],e,s,gg)
var o8E=_v()
_(c7E,o8E)
if(_oz(z,87,e,s,gg)){o8E.wxVkey=1
var l9E=_mz(z,'uni-icons',['bind:__l',88,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(o8E,l9E)
}
o8E.wxXCkey=1
o8E.wxXCkey=3
_(o6E,c7E)
var a0E=_mz(z,'button',['bindtap',92,'class',1],[],e,s,gg)
var tAF=_v()
_(a0E,tAF)
if(_oz(z,94,e,s,gg)){tAF.wxVkey=1
var eBF=_mz(z,'uni-icons',['bind:__l',95,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(tAF,eBF)
}
tAF.wxXCkey=1
tAF.wxXCkey=3
_(o6E,a0E)
var bCF=_mz(z,'button',['bindtap',99,'class',1],[],e,s,gg)
var oDF=_v()
_(bCF,oDF)
if(_oz(z,101,e,s,gg)){oDF.wxVkey=1
var xEF=_mz(z,'uni-icons',['bind:__l',102,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(oDF,xEF)
}
oDF.wxXCkey=1
oDF.wxXCkey=3
_(o6E,bCF)
_(eXE,o6E)
}
tWE.wxXCkey=1
tWE.wxXCkey=3
eXE.wxXCkey=1
eXE.wxXCkey=3
_(a4D,aVE)
_(oTD,a4D)
var xUD=_v()
_(oTD,xUD)
if(_oz(z,106,e,s,gg)){xUD.wxVkey=1
}
xUD.wxXCkey=1
_(r,oTD)
return r
}
e_[x[8]]={f:m8,j:[],i:[],ti:[],ic:[]}
d_[x[9]]={}
var m9=function(e,s,r,gg){
var z=gz$gwx_10()
var fGF=_n('view')
_rz(z,fGF,'class',0,e,s,gg)
var cHF=_v()
_(fGF,cHF)
if(_oz(z,1,e,s,gg)){cHF.wxVkey=1
var oLF=_mz(z,'uni-search-bar',['bind:__l',2,'bindclear',1,'bindinput',2,'bindupdateModelValue',3,'class',4,'uI',5,'uP',6],[],e,s,gg)
_(cHF,oLF)
}
var lMF=_n('view')
_rz(z,lMF,'class',9,e,s,gg)
var aNF=_v()
_(lMF,aNF)
var tOF=function(bQF,ePF,oRF,gg){
var oTF=_mz(z,'view',['bindtap',13,'class',1],[],bQF,ePF,gg)
var fUF=_v()
_(oTF,fUF)
if(_oz(z,15,bQF,ePF,gg)){fUF.wxVkey=1
var hWF=_mz(z,'uni-icons',['bind:__l',16,'class',1,'uI',2,'uP',3],[],bQF,ePF,gg)
_(fUF,hWF)
}
var cVF=_v()
_(oTF,cVF)
if(_oz(z,20,bQF,ePF,gg)){cVF.wxVkey=1
}
fUF.wxXCkey=1
fUF.wxXCkey=3
cVF.wxXCkey=1
_(oRF,oTF)
return oRF
}
aNF.wxXCkey=4
_2z(z,11,tOF,e,s,gg,aNF,'category','index','f')
var oXF=_n('view')
_rz(z,oXF,'class',21,e,s,gg)
var cYF=_mz(z,'view',['bindtap',22,'class',1],[],e,s,gg)
var oZF=_v()
_(cYF,oZF)
if(_oz(z,24,e,s,gg)){oZF.wxVkey=1
var l1F=_mz(z,'uni-icons',['bind:__l',25,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(oZF,l1F)
}
oZF.wxXCkey=1
oZF.wxXCkey=3
_(oXF,cYF)
var a2F=_mz(z,'view',['bindtap',29,'class',1],[],e,s,gg)
var t3F=_v()
_(a2F,t3F)
if(_oz(z,31,e,s,gg)){t3F.wxVkey=1
var e4F=_mz(z,'uni-icons',['bind:__l',32,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(t3F,e4F)
}
t3F.wxXCkey=1
t3F.wxXCkey=3
_(oXF,a2F)
_(lMF,oXF)
_(fGF,lMF)
var b5F=_mz(z,'scroll-view',['bindscrolltolower',36,'class',1,'scrollY',2],[],e,s,gg)
var o6F=_v()
_(b5F,o6F)
if(_oz(z,39,e,s,gg)){o6F.wxVkey=1
var x7F=_n('view')
_rz(z,x7F,'class',40,e,s,gg)
var o8F=_v()
_(x7F,o8F)
if(_oz(z,41,e,s,gg)){o8F.wxVkey=1
var f9F=_mz(z,'uni-icons',['bind:__l',42,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(o8F,f9F)
}
var c0F=_mz(z,'button',['bindtap',46,'class',1],[],e,s,gg)
var hAG=_v()
_(c0F,hAG)
if(_oz(z,48,e,s,gg)){hAG.wxVkey=1
var oBG=_mz(z,'uni-icons',['bind:__l',49,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(hAG,oBG)
}
hAG.wxXCkey=1
hAG.wxXCkey=3
_(x7F,c0F)
o8F.wxXCkey=1
o8F.wxXCkey=3
_(o6F,x7F)
}
else if(_oz(z,53,e,s,gg)){o6F.wxVkey=2
var cCG=_v()
_(o6F,cCG)
var oDG=function(aFG,lEG,tGG,gg){
var bIG=_mz(z,'view',['bindlongpress',57,'bindtap',1,'class',2],[],aFG,lEG,gg)
var oJG=_v()
_(bIG,oJG)
if(_oz(z,60,aFG,lEG,gg)){oJG.wxVkey=1
var oLG=_mz(z,'uni-icons',['bind:__l',61,'class',1,'uI',2,'uP',3],[],aFG,lEG,gg)
_(oJG,oLG)
}
var xKG=_v()
_(bIG,xKG)
if(_oz(z,65,aFG,lEG,gg)){xKG.wxVkey=1
}
oJG.wxXCkey=1
oJG.wxXCkey=3
xKG.wxXCkey=1
_(tGG,bIG)
return tGG
}
cCG.wxXCkey=4
_2z(z,55,oDG,e,s,gg,cCG,'card','index','j')
}
else{o6F.wxVkey=3
var fMG=_v()
_(o6F,fMG)
var cNG=function(oPG,hOG,cQG,gg){
var lSG=_mz(z,'view',['bindlongpress',69,'bindtap',1,'class',2],[],oPG,hOG,gg)
var aTG=_v()
_(lSG,aTG)
if(_oz(z,72,oPG,hOG,gg)){aTG.wxVkey=1
var eVG=_mz(z,'uni-icons',['bind:__l',73,'class',1,'uI',2,'uP',3],[],oPG,hOG,gg)
_(aTG,eVG)
}
var tUG=_v()
_(lSG,tUG)
if(_oz(z,77,oPG,hOG,gg)){tUG.wxVkey=1
}
var bWG=_mz(z,'view',['catchtap',78,'class',1],[],oPG,hOG,gg)
var oXG=_v()
_(bWG,oXG)
if(_oz(z,80,oPG,hOG,gg)){oXG.wxVkey=1
var xYG=_mz(z,'uni-icons',['bind:__l',81,'class',1,'uI',2,'uP',3],[],oPG,hOG,gg)
_(oXG,xYG)
}
oXG.wxXCkey=1
oXG.wxXCkey=3
_(lSG,bWG)
aTG.wxXCkey=1
aTG.wxXCkey=3
tUG.wxXCkey=1
_(cQG,lSG)
return cQG
}
fMG.wxXCkey=4
_2z(z,67,cNG,e,s,gg,fMG,'card','index','m')
}
o6F.wxXCkey=1
o6F.wxXCkey=3
o6F.wxXCkey=3
o6F.wxXCkey=3
_(fGF,b5F)
var hIF=_v()
_(fGF,hIF)
if(_oz(z,85,e,s,gg)){hIF.wxVkey=1
var oZG=_mz(z,'button',['bindtap',86,'class',1,'disabled',2],[],e,s,gg)
var f1G=_v()
_(oZG,f1G)
if(_oz(z,89,e,s,gg)){f1G.wxVkey=1
var c2G=_mz(z,'uni-icons',['bind:__l',90,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(f1G,c2G)
}
f1G.wxXCkey=1
f1G.wxXCkey=3
_(hIF,oZG)
}
var oJF=_v()
_(fGF,oJF)
if(_oz(z,94,e,s,gg)){oJF.wxVkey=1
var h3G=_mz(z,'uni-popup',['bind:__l',95,'class',1,'uI',2,'uP',3,'uR',4,'uS',5],[],e,s,gg)
var o4G=_n('view')
_rz(z,o4G,'class',101,e,s,gg)
var c5G=_mz(z,'button',['bindtap',102,'class',1],[],e,s,gg)
var o6G=_v()
_(c5G,o6G)
if(_oz(z,104,e,s,gg)){o6G.wxVkey=1
var l7G=_mz(z,'uni-icons',['bind:__l',105,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(o6G,l7G)
}
o6G.wxXCkey=1
o6G.wxXCkey=3
_(o4G,c5G)
var a8G=_v()
_(o4G,a8G)
var t9G=function(bAH,e0G,oBH,gg){
var oDH=_mz(z,'view',['bindtap',112,'class',1],[],bAH,e0G,gg)
var fEH=_v()
_(oDH,fEH)
if(_oz(z,114,bAH,e0G,gg)){fEH.wxVkey=1
var cFH=_mz(z,'uni-icons',['bind:__l',115,'class',1,'uI',2,'uP',3],[],bAH,e0G,gg)
_(fEH,cFH)
}
fEH.wxXCkey=1
fEH.wxXCkey=3
_(oBH,oDH)
return oBH
}
a8G.wxXCkey=4
_2z(z,110,t9G,e,s,gg,a8G,'option','index','e')
_(h3G,o4G)
_(oJF,h3G)
}
var cKF=_v()
_(fGF,cKF)
if(_oz(z,119,e,s,gg)){cKF.wxVkey=1
var hGH=_mz(z,'uni-popup',['bind:__l',120,'class',1,'uI',2,'uP',3,'uR',4,'uS',5],[],e,s,gg)
var oHH=_v()
_(hGH,oHH)
if(_oz(z,126,e,s,gg)){oHH.wxVkey=1
var cIH=_n('view')
_rz(z,cIH,'class',127,e,s,gg)
var aLH=_mz(z,'button',['bindtap',128,'class',1],[],e,s,gg)
var tMH=_v()
_(aLH,tMH)
if(_oz(z,130,e,s,gg)){tMH.wxVkey=1
var eNH=_mz(z,'uni-icons',['bind:__l',131,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(tMH,eNH)
}
tMH.wxXCkey=1
tMH.wxXCkey=3
_(cIH,aLH)
var oJH=_v()
_(cIH,oJH)
if(_oz(z,135,e,s,gg)){oJH.wxVkey=1
}
var lKH=_v()
_(cIH,lKH)
if(_oz(z,136,e,s,gg)){lKH.wxVkey=1
}
oJH.wxXCkey=1
lKH.wxXCkey=1
_(oHH,cIH)
}
oHH.wxXCkey=1
oHH.wxXCkey=3
_(cKF,hGH)
}
cHF.wxXCkey=1
cHF.wxXCkey=3
hIF.wxXCkey=1
hIF.wxXCkey=3
oJF.wxXCkey=1
oJF.wxXCkey=3
cKF.wxXCkey=1
cKF.wxXCkey=3
_(r,fGF)
return r
}
e_[x[9]]={f:m9,j:[],i:[],ti:[],ic:[]}
d_[x[10]]={}
var m10=function(e,s,r,gg){
var z=gz$gwx_11()
var oPH=_n('view')
_rz(z,oPH,'class',0,e,s,gg)
var oRH=_n('view')
_rz(z,oRH,'class',1,e,s,gg)
var fSH=_n('view')
_rz(z,fSH,'class',2,e,s,gg)
var cTH=_v()
_(fSH,cTH)
if(_oz(z,3,e,s,gg)){cTH.wxVkey=1
var oVH=_mz(z,'uni-icons',['bind:__l',4,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(cTH,oVH)
}
var hUH=_v()
_(fSH,hUH)
if(_oz(z,8,e,s,gg)){hUH.wxVkey=1
var cWH=_mz(z,'uni-icons',['bind:__l',9,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(hUH,cWH)
}
cTH.wxXCkey=1
cTH.wxXCkey=3
hUH.wxXCkey=1
hUH.wxXCkey=3
_(oRH,fSH)
var oXH=_n('view')
_rz(z,oXH,'class',13,e,s,gg)
var lYH=_v()
_(oXH,lYH)
var aZH=function(e2H,t1H,b3H,gg){
var x5H=_n('view')
_rz(z,x5H,'class',17,e2H,t1H,gg)
var o6H=_v()
_(x5H,o6H)
if(_oz(z,18,e2H,t1H,gg)){o6H.wxVkey=1
var f7H=_mz(z,'uni-icons',['bind:__l',19,'class',1,'uI',2,'uP',3],[],e2H,t1H,gg)
_(o6H,f7H)
}
else{o6H.wxVkey=2
}
o6H.wxXCkey=1
o6H.wxXCkey=3
_(b3H,x5H)
return b3H
}
lYH.wxXCkey=4
_2z(z,15,aZH,e,s,gg,lYH,'step','index','f')
var c8H=_n('view')
_rz(z,c8H,'class',23,e,s,gg)
var h9H=_v()
_(c8H,h9H)
if(_oz(z,24,e,s,gg)){h9H.wxVkey=1
var oBI=_n('view')
_rz(z,oBI,'class',25,e,s,gg)
var aDI=_n('view')
_rz(z,aDI,'class',26,e,s,gg)
var tEI=_v()
_(aDI,tEI)
if(_oz(z,27,e,s,gg)){tEI.wxVkey=1
var eFI=_mz(z,'view',['bindtap',28,'class',1],[],e,s,gg)
var bGI=_v()
_(eFI,bGI)
if(_oz(z,30,e,s,gg)){bGI.wxVkey=1
var xII=_mz(z,'uni-icons',['bind:__l',31,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(bGI,xII)
}
var oHI=_v()
_(eFI,oHI)
if(_oz(z,35,e,s,gg)){oHI.wxVkey=1
var oJI=_mz(z,'uni-icons',['bind:__l',36,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(oHI,oJI)
}
bGI.wxXCkey=1
bGI.wxXCkey=3
oHI.wxXCkey=1
oHI.wxXCkey=3
_(tEI,eFI)
}
else{tEI.wxVkey=2
var fKI=_mz(z,'view',['bindtap',40,'class',1],[],e,s,gg)
var cLI=_v()
_(fKI,cLI)
if(_oz(z,42,e,s,gg)){cLI.wxVkey=1
var hMI=_mz(z,'uni-icons',['bind:__l',43,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(cLI,hMI)
}
cLI.wxXCkey=1
cLI.wxXCkey=3
_(tEI,fKI)
}
tEI.wxXCkey=1
tEI.wxXCkey=3
tEI.wxXCkey=3
_(oBI,aDI)
var lCI=_v()
_(oBI,lCI)
if(_oz(z,47,e,s,gg)){lCI.wxVkey=1
var oNI=_v()
_(lCI,oNI)
if(_oz(z,48,e,s,gg)){oNI.wxVkey=1
var cOI=_mz(z,'uni-icons',['bind:__l',49,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(oNI,cOI)
}
oNI.wxXCkey=1
oNI.wxXCkey=3
}
lCI.wxXCkey=1
lCI.wxXCkey=3
_(h9H,oBI)
}
var o0H=_v()
_(c8H,o0H)
if(_oz(z,53,e,s,gg)){o0H.wxVkey=1
var oPI=_n('view')
_rz(z,oPI,'class',54,e,s,gg)
var lQI=_v()
_(oPI,lQI)
if(_oz(z,55,e,s,gg)){lQI.wxVkey=1
var aRI=_n('view')
_rz(z,aRI,'class',56,e,s,gg)
var tSI=_v()
_(aRI,tSI)
if(_oz(z,57,e,s,gg)){tSI.wxVkey=1
var eTI=_mz(z,'uni-icons',['bind:__l',58,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(tSI,eTI)
}
var bUI=_mz(z,'button',['bindtap',62,'class',1,'disabled',2],[],e,s,gg)
var oVI=_v()
_(bUI,oVI)
if(_oz(z,65,e,s,gg)){oVI.wxVkey=1
var xWI=_mz(z,'uni-icons',['bind:__l',66,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(oVI,xWI)
}
oVI.wxXCkey=1
oVI.wxXCkey=3
_(aRI,bUI)
tSI.wxXCkey=1
tSI.wxXCkey=3
_(lQI,aRI)
}
else{lQI.wxVkey=2
var oXI=_n('view')
_rz(z,oXI,'class',70,e,s,gg)
var fYI=_v()
_(oXI,fYI)
if(_oz(z,71,e,s,gg)){fYI.wxVkey=1
var h1I=_mz(z,'uni-icons',['bind:__l',72,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(fYI,h1I)
}
var cZI=_v()
_(oXI,cZI)
if(_oz(z,76,e,s,gg)){cZI.wxVkey=1
var o2I=_v()
_(cZI,o2I)
if(_oz(z,77,e,s,gg)){o2I.wxVkey=1
var c3I=_mz(z,'uni-icons',['bind:__l',78,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(o2I,c3I)
}
o2I.wxXCkey=1
o2I.wxXCkey=3
}
var o4I=_mz(z,'button',['bindtap',82,'class',1],[],e,s,gg)
var l5I=_v()
_(o4I,l5I)
if(_oz(z,84,e,s,gg)){l5I.wxVkey=1
var a6I=_mz(z,'uni-icons',['bind:__l',85,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(l5I,a6I)
}
l5I.wxXCkey=1
l5I.wxXCkey=3
_(oXI,o4I)
fYI.wxXCkey=1
fYI.wxXCkey=3
cZI.wxXCkey=1
cZI.wxXCkey=3
_(lQI,oXI)
}
lQI.wxXCkey=1
lQI.wxXCkey=3
lQI.wxXCkey=3
_(o0H,oPI)
}
var cAI=_v()
_(c8H,cAI)
if(_oz(z,89,e,s,gg)){cAI.wxVkey=1
var t7I=_n('view')
_rz(z,t7I,'class',90,e,s,gg)
var e8I=_v()
_(t7I,e8I)
if(_oz(z,91,e,s,gg)){e8I.wxVkey=1
var b9I=_n('view')
_rz(z,b9I,'class',92,e,s,gg)
var o0I=_v()
_(b9I,o0I)
if(_oz(z,93,e,s,gg)){o0I.wxVkey=1
var oBJ=_mz(z,'uni-icons',['bind:__l',94,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(o0I,oBJ)
}
var xAJ=_v()
_(b9I,xAJ)
if(_oz(z,98,e,s,gg)){xAJ.wxVkey=1
var fCJ=_v()
_(xAJ,fCJ)
if(_oz(z,99,e,s,gg)){fCJ.wxVkey=1
var cDJ=_mz(z,'uni-icons',['bind:__l',100,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(fCJ,cDJ)
}
fCJ.wxXCkey=1
fCJ.wxXCkey=3
}
o0I.wxXCkey=1
o0I.wxXCkey=3
xAJ.wxXCkey=1
xAJ.wxXCkey=3
_(e8I,b9I)
}
else if(_oz(z,104,e,s,gg)){e8I.wxVkey=2
var hEJ=_n('view')
_rz(z,hEJ,'class',105,e,s,gg)
var oFJ=_v()
_(hEJ,oFJ)
if(_oz(z,106,e,s,gg)){oFJ.wxVkey=1
}
var cGJ=_v()
_(hEJ,cGJ)
if(_oz(z,107,e,s,gg)){cGJ.wxVkey=1
}
oFJ.wxXCkey=1
cGJ.wxXCkey=1
_(e8I,hEJ)
}
else if(_oz(z,108,e,s,gg)){e8I.wxVkey=3
var oHJ=_n('view')
_rz(z,oHJ,'class',109,e,s,gg)
var lIJ=_v()
_(oHJ,lIJ)
if(_oz(z,110,e,s,gg)){lIJ.wxVkey=1
var tKJ=_mz(z,'uni-icons',['bind:__l',111,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(lIJ,tKJ)
}
var aJJ=_v()
_(oHJ,aJJ)
if(_oz(z,115,e,s,gg)){aJJ.wxVkey=1
}
lIJ.wxXCkey=1
lIJ.wxXCkey=3
aJJ.wxXCkey=1
_(e8I,oHJ)
}
e8I.wxXCkey=1
e8I.wxXCkey=3
e8I.wxXCkey=3
_(cAI,t7I)
}
h9H.wxXCkey=1
h9H.wxXCkey=3
o0H.wxXCkey=1
o0H.wxXCkey=3
cAI.wxXCkey=1
cAI.wxXCkey=3
_(oXH,c8H)
var eLJ=_n('view')
_rz(z,eLJ,'class',116,e,s,gg)
var bMJ=_v()
_(eLJ,bMJ)
if(_oz(z,117,e,s,gg)){bMJ.wxVkey=1
var cRJ=_mz(z,'button',['bindtap',118,'class',1],[],e,s,gg)
var hSJ=_v()
_(cRJ,hSJ)
if(_oz(z,120,e,s,gg)){hSJ.wxVkey=1
var oTJ=_mz(z,'uni-icons',['bind:__l',121,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(hSJ,oTJ)
}
hSJ.wxXCkey=1
hSJ.wxXCkey=3
_(bMJ,cRJ)
}
var oNJ=_v()
_(eLJ,oNJ)
if(_oz(z,125,e,s,gg)){oNJ.wxVkey=1
var cUJ=_mz(z,'button',['bindtap',126,'class',1,'disabled',2],[],e,s,gg)
var oVJ=_v()
_(cUJ,oVJ)
if(_oz(z,129,e,s,gg)){oVJ.wxVkey=1
var lWJ=_mz(z,'uni-icons',['bind:__l',130,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(oVJ,lWJ)
}
oVJ.wxXCkey=1
oVJ.wxXCkey=3
_(oNJ,cUJ)
}
var xOJ=_v()
_(eLJ,xOJ)
if(_oz(z,134,e,s,gg)){xOJ.wxVkey=1
var aXJ=_mz(z,'button',['bindtap',135,'class',1,'disabled',2],[],e,s,gg)
var tYJ=_v()
_(aXJ,tYJ)
if(_oz(z,138,e,s,gg)){tYJ.wxVkey=1
var eZJ=_mz(z,'uni-icons',['bind:__l',139,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(tYJ,eZJ)
}
tYJ.wxXCkey=1
tYJ.wxXCkey=3
_(xOJ,aXJ)
}
var oPJ=_v()
_(eLJ,oPJ)
if(_oz(z,143,e,s,gg)){oPJ.wxVkey=1
var b1J=_mz(z,'button',['bindtap',144,'class',1],[],e,s,gg)
var o2J=_v()
_(b1J,o2J)
if(_oz(z,146,e,s,gg)){o2J.wxVkey=1
var x3J=_mz(z,'uni-icons',['bind:__l',147,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(o2J,x3J)
}
o2J.wxXCkey=1
o2J.wxXCkey=3
_(oPJ,b1J)
}
var fQJ=_v()
_(eLJ,fQJ)
if(_oz(z,151,e,s,gg)){fQJ.wxVkey=1
var o4J=_mz(z,'button',['bindtap',152,'class',1],[],e,s,gg)
var f5J=_v()
_(o4J,f5J)
if(_oz(z,154,e,s,gg)){f5J.wxVkey=1
var c6J=_mz(z,'uni-icons',['bind:__l',155,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(f5J,c6J)
}
f5J.wxXCkey=1
f5J.wxXCkey=3
_(fQJ,o4J)
}
bMJ.wxXCkey=1
bMJ.wxXCkey=3
oNJ.wxXCkey=1
oNJ.wxXCkey=3
xOJ.wxXCkey=1
xOJ.wxXCkey=3
oPJ.wxXCkey=1
oPJ.wxXCkey=3
fQJ.wxXCkey=1
fQJ.wxXCkey=3
_(oXH,eLJ)
_(oRH,oXH)
_(oPH,oRH)
var xQH=_v()
_(oPH,xQH)
if(_oz(z,159,e,s,gg)){xQH.wxVkey=1
var h7J=_mz(z,'uni-popup',['bind:__l',160,'class',1,'uI',2,'uP',3,'uR',4,'uS',5],[],e,s,gg)
var o8J=_n('view')
_rz(z,o8J,'class',166,e,s,gg)
var c9J=_v()
_(o8J,c9J)
if(_oz(z,167,e,s,gg)){c9J.wxVkey=1
var o0J=_mz(z,'uni-icons',['bind:__l',168,'bindclick',1,'class',2,'uI',3,'uP',4],[],e,s,gg)
_(c9J,o0J)
}
var lAK=_v()
_(o8J,lAK)
var aBK=function(eDK,tCK,bEK,gg){
var xGK=_mz(z,'view',['bindtap',176,'class',1],[],eDK,tCK,gg)
var oHK=_v()
_(xGK,oHK)
if(_oz(z,178,eDK,tCK,gg)){oHK.wxVkey=1
var cJK=_mz(z,'uni-icons',['bind:__l',179,'class',1,'uI',2,'uP',3],[],eDK,tCK,gg)
_(oHK,cJK)
}
var fIK=_v()
_(xGK,fIK)
if(_oz(z,183,eDK,tCK,gg)){fIK.wxVkey=1
var hKK=_mz(z,'uni-icons',['bind:__l',184,'class',1,'uI',2,'uP',3],[],eDK,tCK,gg)
_(fIK,hKK)
}
oHK.wxXCkey=1
oHK.wxXCkey=3
fIK.wxXCkey=1
fIK.wxXCkey=3
_(bEK,xGK)
return bEK
}
lAK.wxXCkey=4
_2z(z,174,aBK,e,s,gg,lAK,'card','index','j')
c9J.wxXCkey=1
c9J.wxXCkey=3
_(h7J,o8J)
_(xQH,h7J)
}
xQH.wxXCkey=1
xQH.wxXCkey=3
_(r,oPH)
return r
}
e_[x[10]]={f:m10,j:[],i:[],ti:[],ic:[]}
d_[x[11]]={}
var m11=function(e,s,r,gg){
var z=gz$gwx_12()
var cMK=_n('view')
_rz(z,cMK,'class',0,e,s,gg)
var eRK=_n('view')
_rz(z,eRK,'class',1,e,s,gg)
var bSK=_n('view')
_rz(z,bSK,'class',2,e,s,gg)
var oTK=_v()
_(bSK,oTK)
if(_oz(z,3,e,s,gg)){oTK.wxVkey=1
var oVK=_mz(z,'uni-icons',['bind:__l',4,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(oTK,oVK)
}
var xUK=_v()
_(bSK,xUK)
if(_oz(z,8,e,s,gg)){xUK.wxVkey=1
var fWK=_mz(z,'view',['bindtap',9,'class',1],[],e,s,gg)
var cXK=_v()
_(fWK,cXK)
if(_oz(z,11,e,s,gg)){cXK.wxVkey=1
var hYK=_mz(z,'uni-icons',['bind:__l',12,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(cXK,hYK)
}
cXK.wxXCkey=1
cXK.wxXCkey=3
_(xUK,fWK)
}
oTK.wxXCkey=1
oTK.wxXCkey=3
xUK.wxXCkey=1
xUK.wxXCkey=3
_(eRK,bSK)
var oZK=_n('view')
_rz(z,oZK,'class',16,e,s,gg)
var c1K=_mz(z,'view',['bindtap',17,'class',1],[],e,s,gg)
var o2K=_v()
_(c1K,o2K)
if(_oz(z,19,e,s,gg)){o2K.wxVkey=1
var l3K=_mz(z,'uni-icons',['bind:__l',20,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(o2K,l3K)
}
o2K.wxXCkey=1
o2K.wxXCkey=3
_(oZK,c1K)
var a4K=_mz(z,'view',['bindtap',24,'class',1],[],e,s,gg)
var t5K=_v()
_(a4K,t5K)
if(_oz(z,26,e,s,gg)){t5K.wxVkey=1
var e6K=_mz(z,'uni-icons',['bind:__l',27,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(t5K,e6K)
}
t5K.wxXCkey=1
t5K.wxXCkey=3
_(oZK,a4K)
_(eRK,oZK)
_(cMK,eRK)
var b7K=_v()
_(cMK,b7K)
var o8K=function(o0K,x9K,fAL,gg){
var hCL=_mz(z,'view',['bindtap',34,'class',1],[],o0K,x9K,gg)
var oDL=_v()
_(hCL,oDL)
if(_oz(z,36,o0K,x9K,gg)){oDL.wxVkey=1
var cEL=_mz(z,'uni-icons',['bind:__l',37,'class',1,'uI',2,'uP',3],[],o0K,x9K,gg)
_(oDL,cEL)
}
oDL.wxXCkey=1
oDL.wxXCkey=3
_(fAL,hCL)
return fAL
}
b7K.wxXCkey=4
_2z(z,32,o8K,e,s,gg,b7K,'category','index','e')
var oNK=_v()
_(cMK,oNK)
if(_oz(z,41,e,s,gg)){oNK.wxVkey=1
}
var oFL=_mz(z,'scroll-view',['bindscrolltolower',42,'class',1,'scrollY',2],[],e,s,gg)
var lGL=_v()
_(oFL,lGL)
if(_oz(z,45,e,s,gg)){lGL.wxVkey=1
var eJL=_v()
_(lGL,eJL)
var bKL=function(xML,oLL,oNL,gg){
var cPL=_mz(z,'view',['bindlongpress',49,'bindtap',1,'class',2],[],xML,oLL,gg)
var hQL=_v()
_(cPL,hQL)
if(_oz(z,52,xML,oLL,gg)){hQL.wxVkey=1
var oTL=_v()
_(hQL,oTL)
if(_oz(z,53,xML,oLL,gg)){oTL.wxVkey=1
var lUL=_mz(z,'uni-icons',['bind:__l',54,'class',1,'uI',2,'uP',3],[],xML,oLL,gg)
_(oTL,lUL)
}
oTL.wxXCkey=1
oTL.wxXCkey=3
}
var aVL=_n('view')
_rz(z,aVL,'class',58,xML,oLL,gg)
var tWL=_v()
_(aVL,tWL)
if(_oz(z,59,xML,oLL,gg)){tWL.wxVkey=1
var bYL=_mz(z,'uni-icons',['bind:__l',60,'class',1,'uI',2,'uP',3],[],xML,oLL,gg)
_(tWL,bYL)
}
var eXL=_v()
_(aVL,eXL)
if(_oz(z,64,xML,oLL,gg)){eXL.wxVkey=1
var oZL=_v()
_(eXL,oZL)
if(_oz(z,65,xML,oLL,gg)){oZL.wxVkey=1
var x1L=_mz(z,'uni-icons',['bind:__l',66,'class',1,'uI',2,'uP',3],[],xML,oLL,gg)
_(oZL,x1L)
}
oZL.wxXCkey=1
oZL.wxXCkey=3
}
tWL.wxXCkey=1
tWL.wxXCkey=3
eXL.wxXCkey=1
eXL.wxXCkey=3
_(cPL,aVL)
var oRL=_v()
_(cPL,oRL)
if(_oz(z,70,xML,oLL,gg)){oRL.wxVkey=1
}
var cSL=_v()
_(cPL,cSL)
if(_oz(z,71,xML,oLL,gg)){cSL.wxVkey=1
var o2L=_v()
_(cSL,o2L)
if(_oz(z,72,xML,oLL,gg)){o2L.wxVkey=1
}
o2L.wxXCkey=1
}
hQL.wxXCkey=1
hQL.wxXCkey=3
oRL.wxXCkey=1
cSL.wxXCkey=1
_(oNL,cPL)
return oNL
}
eJL.wxXCkey=4
_2z(z,47,bKL,e,s,gg,eJL,'card','index','v')
}
else{lGL.wxVkey=2
var f3L=_v()
_(lGL,f3L)
var c4L=function(o6L,h5L,c7L,gg){
var l9L=_mz(z,'view',['bindlongpress',76,'bindtap',1,'class',2],[],o6L,h5L,gg)
var a0L=_v()
_(l9L,a0L)
if(_oz(z,79,o6L,h5L,gg)){a0L.wxVkey=1
var eBM=_v()
_(a0L,eBM)
if(_oz(z,80,o6L,h5L,gg)){eBM.wxVkey=1
var bCM=_mz(z,'uni-icons',['bind:__l',81,'class',1,'uI',2,'uP',3],[],o6L,h5L,gg)
_(eBM,bCM)
}
eBM.wxXCkey=1
eBM.wxXCkey=3
}
var tAM=_v()
_(l9L,tAM)
if(_oz(z,85,o6L,h5L,gg)){tAM.wxVkey=1
var oDM=_mz(z,'uni-icons',['bind:__l',86,'class',1,'uI',2,'uP',3],[],o6L,h5L,gg)
_(tAM,oDM)
}
var xEM=_n('view')
_rz(z,xEM,'class',90,o6L,h5L,gg)
var oFM=_v()
_(xEM,oFM)
if(_oz(z,91,o6L,h5L,gg)){oFM.wxVkey=1
var oJM=_v()
_(oFM,oJM)
if(_oz(z,92,o6L,h5L,gg)){oJM.wxVkey=1
var cKM=_mz(z,'uni-icons',['bind:__l',93,'class',1,'uI',2,'uP',3],[],o6L,h5L,gg)
_(oJM,cKM)
}
oJM.wxXCkey=1
oJM.wxXCkey=3
}
var fGM=_v()
_(xEM,fGM)
if(_oz(z,97,o6L,h5L,gg)){fGM.wxVkey=1
}
var cHM=_v()
_(xEM,cHM)
if(_oz(z,98,o6L,h5L,gg)){cHM.wxVkey=1
}
var hIM=_v()
_(xEM,hIM)
if(_oz(z,99,o6L,h5L,gg)){hIM.wxVkey=1
}
oFM.wxXCkey=1
oFM.wxXCkey=3
fGM.wxXCkey=1
cHM.wxXCkey=1
hIM.wxXCkey=1
_(l9L,xEM)
var oLM=_n('view')
_rz(z,oLM,'class',100,o6L,h5L,gg)
var lMM=_mz(z,'view',['catchtap',101,'class',1],[],o6L,h5L,gg)
var aNM=_v()
_(lMM,aNM)
if(_oz(z,103,o6L,h5L,gg)){aNM.wxVkey=1
var tOM=_mz(z,'uni-icons',['bind:__l',104,'class',1,'uI',2,'uP',3],[],o6L,h5L,gg)
_(aNM,tOM)
}
aNM.wxXCkey=1
aNM.wxXCkey=3
_(oLM,lMM)
var ePM=_mz(z,'view',['catchtap',108,'class',1],[],o6L,h5L,gg)
var bQM=_v()
_(ePM,bQM)
if(_oz(z,110,o6L,h5L,gg)){bQM.wxVkey=1
var oRM=_mz(z,'uni-icons',['bind:__l',111,'class',1,'uI',2,'uP',3],[],o6L,h5L,gg)
_(bQM,oRM)
}
bQM.wxXCkey=1
bQM.wxXCkey=3
_(oLM,ePM)
_(l9L,oLM)
a0L.wxXCkey=1
a0L.wxXCkey=3
tAM.wxXCkey=1
tAM.wxXCkey=3
_(c7L,l9L)
return c7L
}
f3L.wxXCkey=4
_2z(z,74,c4L,e,s,gg,f3L,'card','index','y')
}
var aHL=_v()
_(oFL,aHL)
if(_oz(z,115,e,s,gg)){aHL.wxVkey=1
var xSM=_n('view')
_rz(z,xSM,'class',116,e,s,gg)
var oTM=_v()
_(xSM,oTM)
if(_oz(z,117,e,s,gg)){oTM.wxVkey=1
var cVM=_mz(z,'uni-icons',['bind:__l',118,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(oTM,cVM)
}
var fUM=_v()
_(xSM,fUM)
if(_oz(z,122,e,s,gg)){fUM.wxVkey=1
}
oTM.wxXCkey=1
oTM.wxXCkey=3
fUM.wxXCkey=1
_(aHL,xSM)
}
var tIL=_v()
_(oFL,tIL)
if(_oz(z,123,e,s,gg)){tIL.wxVkey=1
}
lGL.wxXCkey=1
lGL.wxXCkey=3
lGL.wxXCkey=3
aHL.wxXCkey=1
aHL.wxXCkey=3
tIL.wxXCkey=1
_(cMK,oFL)
var lOK=_v()
_(cMK,lOK)
if(_oz(z,124,e,s,gg)){lOK.wxVkey=1
}
var aPK=_v()
_(cMK,aPK)
if(_oz(z,125,e,s,gg)){aPK.wxVkey=1
var hWM=_mz(z,'view',['bindtap',126,'class',1],[],e,s,gg)
var oXM=_mz(z,'view',['catchtap',128,'class',1],[],e,s,gg)
var cYM=_mz(z,'view',['bindtap',130,'class',1],[],e,s,gg)
var oZM=_v()
_(cYM,oZM)
if(_oz(z,132,e,s,gg)){oZM.wxVkey=1
var l1M=_mz(z,'uni-icons',['bind:__l',133,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(oZM,l1M)
}
oZM.wxXCkey=1
oZM.wxXCkey=3
_(oXM,cYM)
var a2M=_n('view')
_rz(z,a2M,'class',137,e,s,gg)
var t3M=_mz(z,'view',['bindtap',138,'class',1],[],e,s,gg)
var e4M=_v()
_(t3M,e4M)
if(_oz(z,140,e,s,gg)){e4M.wxVkey=1
var b5M=_mz(z,'uni-icons',['bind:__l',141,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(e4M,b5M)
}
e4M.wxXCkey=1
e4M.wxXCkey=3
_(a2M,t3M)
var o6M=_mz(z,'view',['bindtap',145,'class',1],[],e,s,gg)
var x7M=_v()
_(o6M,x7M)
if(_oz(z,147,e,s,gg)){x7M.wxVkey=1
var o8M=_mz(z,'uni-icons',['bind:__l',148,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(x7M,o8M)
}
x7M.wxXCkey=1
x7M.wxXCkey=3
_(a2M,o6M)
_(oXM,a2M)
_(hWM,oXM)
_(aPK,hWM)
}
var tQK=_v()
_(cMK,tQK)
if(_oz(z,152,e,s,gg)){tQK.wxVkey=1
var f9M=_mz(z,'view',['bindtap',153,'class',1],[],e,s,gg)
var c0M=_mz(z,'view',['catchtap',155,'class',1],[],e,s,gg)
var hAN=_mz(z,'view',['bindtap',157,'class',1],[],e,s,gg)
var oBN=_v()
_(hAN,oBN)
if(_oz(z,159,e,s,gg)){oBN.wxVkey=1
var cCN=_mz(z,'uni-icons',['bind:__l',160,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(oBN,cCN)
}
oBN.wxXCkey=1
oBN.wxXCkey=3
_(c0M,hAN)
var oDN=_v()
_(c0M,oDN)
var lEN=function(tGN,aFN,eHN,gg){
var oJN=_mz(z,'view',['bindtap',167,'class',1],[],tGN,aFN,gg)
var xKN=_v()
_(oJN,xKN)
if(_oz(z,169,tGN,aFN,gg)){xKN.wxVkey=1
var oLN=_v()
_(xKN,oLN)
if(_oz(z,170,tGN,aFN,gg)){oLN.wxVkey=1
var fMN=_mz(z,'uni-icons',['bind:__l',171,'class',1,'uI',2,'uP',3],[],tGN,aFN,gg)
_(oLN,fMN)
}
oLN.wxXCkey=1
oLN.wxXCkey=3
}
xKN.wxXCkey=1
xKN.wxXCkey=3
_(eHN,oJN)
return eHN
}
oDN.wxXCkey=4
_2z(z,165,lEN,e,s,gg,oDN,'option','index','e')
var cNN=_n('view')
_rz(z,cNN,'class',175,e,s,gg)
var hON=_mz(z,'view',['bindtap',176,'class',1],[],e,s,gg)
var oPN=_v()
_(hON,oPN)
if(_oz(z,178,e,s,gg)){oPN.wxVkey=1
var cQN=_v()
_(oPN,cQN)
if(_oz(z,179,e,s,gg)){cQN.wxVkey=1
var oRN=_mz(z,'uni-icons',['bind:__l',180,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(cQN,oRN)
}
cQN.wxXCkey=1
cQN.wxXCkey=3
}
oPN.wxXCkey=1
oPN.wxXCkey=3
_(cNN,hON)
var lSN=_mz(z,'view',['bindtap',184,'class',1],[],e,s,gg)
var aTN=_v()
_(lSN,aTN)
if(_oz(z,186,e,s,gg)){aTN.wxVkey=1
var tUN=_v()
_(aTN,tUN)
if(_oz(z,187,e,s,gg)){tUN.wxVkey=1
var eVN=_mz(z,'uni-icons',['bind:__l',188,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(tUN,eVN)
}
tUN.wxXCkey=1
tUN.wxXCkey=3
}
aTN.wxXCkey=1
aTN.wxXCkey=3
_(cNN,lSN)
_(c0M,cNN)
_(f9M,c0M)
_(tQK,f9M)
}
oNK.wxXCkey=1
lOK.wxXCkey=1
aPK.wxXCkey=1
aPK.wxXCkey=3
tQK.wxXCkey=1
tQK.wxXCkey=3
_(r,cMK)
return r
}
e_[x[11]]={f:m11,j:[],i:[],ti:[],ic:[]}
d_[x[12]]={}
var m12=function(e,s,r,gg){
var z=gz$gwx_13()
var oXN=_n('view')
_rz(z,oXN,'class',0,e,s,gg)
var h3N=_n('view')
_rz(z,h3N,'class',1,e,s,gg)
var o4N=_v()
_(h3N,o4N)
if(_oz(z,2,e,s,gg)){o4N.wxVkey=1
var l7N=_n('view')
_rz(z,l7N,'class',3,e,s,gg)
var e0N=_n('view')
_rz(z,e0N,'class',4,e,s,gg)
var bAO=_v()
_(e0N,bAO)
if(_oz(z,5,e,s,gg)){bAO.wxVkey=1
var xCO=_mz(z,'uni-icons',['bind:__l',6,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(bAO,xCO)
}
var oBO=_v()
_(e0N,oBO)
if(_oz(z,10,e,s,gg)){oBO.wxVkey=1
var oDO=_mz(z,'uni-icons',['bind:__l',11,'bindclick',1,'class',2,'uI',3,'uP',4],[],e,s,gg)
_(oBO,oDO)
}
bAO.wxXCkey=1
bAO.wxXCkey=3
oBO.wxXCkey=1
oBO.wxXCkey=3
_(l7N,e0N)
var a8N=_v()
_(l7N,a8N)
if(_oz(z,16,e,s,gg)){a8N.wxVkey=1
var fEO=_n('view')
_rz(z,fEO,'class',17,e,s,gg)
var cFO=_v()
_(fEO,cFO)
if(_oz(z,18,e,s,gg)){cFO.wxVkey=1
var oHO=_mz(z,'uni-icons',['bind:__l',19,'bindclick',1,'class',2,'uI',3,'uP',4],[],e,s,gg)
_(cFO,oHO)
}
var hGO=_v()
_(fEO,hGO)
if(_oz(z,24,e,s,gg)){hGO.wxVkey=1
var cIO=_mz(z,'uni-icons',['bind:__l',25,'bindclick',1,'class',2,'uI',3,'uP',4],[],e,s,gg)
_(hGO,cIO)
}
cFO.wxXCkey=1
cFO.wxXCkey=3
hGO.wxXCkey=1
hGO.wxXCkey=3
_(a8N,fEO)
}
else{a8N.wxVkey=2
var oJO=_mz(z,'button',['bindtap',30,'class',1],[],e,s,gg)
var lKO=_v()
_(oJO,lKO)
if(_oz(z,32,e,s,gg)){lKO.wxVkey=1
var aLO=_mz(z,'uni-icons',['bind:__l',33,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(lKO,aLO)
}
lKO.wxXCkey=1
lKO.wxXCkey=3
_(a8N,oJO)
}
var t9N=_v()
_(l7N,t9N)
if(_oz(z,37,e,s,gg)){t9N.wxVkey=1
}
a8N.wxXCkey=1
a8N.wxXCkey=3
a8N.wxXCkey=3
t9N.wxXCkey=1
_(o4N,l7N)
}
var tMO=_n('view')
_rz(z,tMO,'class',38,e,s,gg)
var eNO=_v()
_(tMO,eNO)
if(_oz(z,39,e,s,gg)){eNO.wxVkey=1
}
var bOO=_n('view')
_rz(z,bOO,'class',40,e,s,gg)
var oPO=_v()
_(bOO,oPO)
if(_oz(z,41,e,s,gg)){oPO.wxVkey=1
}
var xQO=_v()
_(bOO,xQO)
if(_oz(z,42,e,s,gg)){xQO.wxVkey=1
}
oPO.wxXCkey=1
xQO.wxXCkey=1
_(tMO,bOO)
eNO.wxXCkey=1
_(h3N,tMO)
var c5N=_v()
_(h3N,c5N)
if(_oz(z,43,e,s,gg)){c5N.wxVkey=1
var oRO=_n('view')
_rz(z,oRO,'class',44,e,s,gg)
var fSO=_v()
_(oRO,fSO)
if(_oz(z,45,e,s,gg)){fSO.wxVkey=1
var oVO=_v()
_(fSO,oVO)
if(_oz(z,46,e,s,gg)){oVO.wxVkey=1
var cWO=_mz(z,'uni-icons',['bind:__l',47,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(oVO,cWO)
}
oVO.wxXCkey=1
oVO.wxXCkey=3
}
var cTO=_v()
_(oRO,cTO)
if(_oz(z,51,e,s,gg)){cTO.wxVkey=1
var oXO=_v()
_(cTO,oXO)
if(_oz(z,52,e,s,gg)){oXO.wxVkey=1
var lYO=_mz(z,'uni-load-more',['bind:__l',53,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(oXO,lYO)
}
oXO.wxXCkey=1
oXO.wxXCkey=3
}
var hUO=_v()
_(oRO,hUO)
if(_oz(z,57,e,s,gg)){hUO.wxVkey=1
var aZO=_v()
_(hUO,aZO)
var t1O=function(b3O,e2O,o4O,gg){
var o6O=_mz(z,'view',['bindtap',61,'class',1],[],b3O,e2O,gg)
var f7O=_v()
_(o6O,f7O)
if(_oz(z,63,b3O,e2O,gg)){f7O.wxVkey=1
var c8O=_mz(z,'uni-icons',['bind:__l',64,'class',1,'uI',2,'uP',3],[],b3O,e2O,gg)
_(f7O,c8O)
}
f7O.wxXCkey=1
f7O.wxXCkey=3
_(o4O,o6O)
return o4O
}
aZO.wxXCkey=4
_2z(z,59,t1O,e,s,gg,aZO,'device','index','f')
}
fSO.wxXCkey=1
fSO.wxXCkey=3
cTO.wxXCkey=1
cTO.wxXCkey=3
hUO.wxXCkey=1
hUO.wxXCkey=3
_(c5N,oRO)
}
var o6N=_v()
_(h3N,o6N)
if(_oz(z,68,e,s,gg)){o6N.wxVkey=1
var h9O=_v()
_(o6N,h9O)
if(_oz(z,69,e,s,gg)){h9O.wxVkey=1
var o0O=_mz(z,'uni-icons',['bind:__l',70,'bindclick',1,'class',2,'uI',3,'uP',4],[],e,s,gg)
_(h9O,o0O)
}
h9O.wxXCkey=1
h9O.wxXCkey=3
}
o4N.wxXCkey=1
o4N.wxXCkey=3
c5N.wxXCkey=1
c5N.wxXCkey=3
o6N.wxXCkey=1
o6N.wxXCkey=3
_(oXN,h3N)
var xYN=_v()
_(oXN,xYN)
if(_oz(z,75,e,s,gg)){xYN.wxVkey=1
var cAP=_mz(z,'uni-popup',['bind:__l',76,'class',1,'data-c-h',2,'uI',3,'uP',4,'uR',5,'uS',6],[],e,s,gg)
var oBP=_v()
_(cAP,oBP)
if(_oz(z,83,e,s,gg)){oBP.wxVkey=1
var lCP=_mz(z,'uni-popup-dialog',['bind:__l',84,'bindclose',1,'bindconfirm',2,'class',3,'uI',4,'uP',5,'uS',6],[],e,s,gg)
var aDP=_n('view')
_rz(z,aDP,'class',91,e,s,gg)
var tEP=_v()
_(aDP,tEP)
if(_oz(z,92,e,s,gg)){tEP.wxVkey=1
}
var eFP=_v()
_(aDP,eFP)
if(_oz(z,93,e,s,gg)){eFP.wxVkey=1
var bGP=_v()
_(eFP,bGP)
if(_oz(z,94,e,s,gg)){bGP.wxVkey=1
var oHP=_mz(z,'uni-load-more',['bind:__l',95,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(bGP,oHP)
}
bGP.wxXCkey=1
bGP.wxXCkey=3
}
tEP.wxXCkey=1
eFP.wxXCkey=1
eFP.wxXCkey=3
_(lCP,aDP)
_(oBP,lCP)
}
oBP.wxXCkey=1
oBP.wxXCkey=3
_(xYN,cAP)
}
var oZN=_v()
_(oXN,oZN)
if(_oz(z,99,e,s,gg)){oZN.wxVkey=1
var xIP=_mz(z,'uni-popup',['bind:__l',100,'class',1,'uI',2,'uP',3,'uR',4,'uS',5],[],e,s,gg)
var oJP=_v()
_(xIP,oJP)
if(_oz(z,106,e,s,gg)){oJP.wxVkey=1
var fKP=_mz(z,'uni-popup-dialog',['bind:__l',107,'bindclose',1,'bindconfirm',2,'class',3,'uI',4,'uP',5,'uS',6],[],e,s,gg)
_(oJP,fKP)
}
oJP.wxXCkey=1
oJP.wxXCkey=3
_(oZN,xIP)
}
var f1N=_v()
_(oXN,f1N)
if(_oz(z,114,e,s,gg)){f1N.wxVkey=1
var cLP=_mz(z,'uni-popup',['bind:__l',115,'class',1,'uI',2,'uP',3,'uR',4,'uS',5],[],e,s,gg)
var hMP=_v()
_(cLP,hMP)
if(_oz(z,121,e,s,gg)){hMP.wxVkey=1
var oNP=_mz(z,'uni-popup-dialog',['bind:__l',122,'bindclose',1,'bindconfirm',2,'class',3,'uI',4,'uP',5,'uS',6],[],e,s,gg)
_(hMP,oNP)
}
hMP.wxXCkey=1
hMP.wxXCkey=3
_(f1N,cLP)
}
var c2N=_v()
_(oXN,c2N)
if(_oz(z,129,e,s,gg)){c2N.wxVkey=1
var cOP=_mz(z,'uni-popup',['bind:__l',130,'class',1,'uI',2,'uP',3,'uR',4,'uS',5],[],e,s,gg)
var oPP=_v()
_(cOP,oPP)
if(_oz(z,136,e,s,gg)){oPP.wxVkey=1
var lQP=_mz(z,'uni-popup-dialog',['bind:__l',137,'bindclose',1,'bindconfirm',2,'class',3,'uI',4,'uP',5,'uS',6],[],e,s,gg)
var aRP=_v()
_(lQP,aRP)
if(_oz(z,144,e,s,gg)){aRP.wxVkey=1
}
aRP.wxXCkey=1
_(oPP,lQP)
}
oPP.wxXCkey=1
oPP.wxXCkey=3
_(c2N,cOP)
}
xYN.wxXCkey=1
xYN.wxXCkey=3
oZN.wxXCkey=1
oZN.wxXCkey=3
f1N.wxXCkey=1
f1N.wxXCkey=3
c2N.wxXCkey=1
c2N.wxXCkey=3
_(r,oXN)
return r
}
e_[x[12]]={f:m12,j:[],i:[],ti:[],ic:[]}
d_[x[13]]={}
var m13=function(e,s,r,gg){
var z=gz$gwx_14()
var eTP=_n('view')
_rz(z,eTP,'class',0,e,s,gg)
var oVP=_n('view')
_rz(z,oVP,'class',1,e,s,gg)
var xWP=_v()
_(oVP,xWP)
if(_oz(z,2,e,s,gg)){xWP.wxVkey=1
var oXP=_v()
_(xWP,oXP)
if(_oz(z,3,e,s,gg)){oXP.wxVkey=1
var fYP=_mz(z,'uni-icons',['bind:__l',4,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(oXP,fYP)
}
oXP.wxXCkey=1
oXP.wxXCkey=3
}
else{xWP.wxVkey=2
var cZP=_n('view')
_rz(z,cZP,'class',8,e,s,gg)
var h1P=_v()
_(cZP,h1P)
if(_oz(z,9,e,s,gg)){h1P.wxVkey=1
var c3P=_mz(z,'uni-icons',['bind:__l',10,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(h1P,c3P)
}
var o4P=_n('view')
_rz(z,o4P,'class',14,e,s,gg)
var l5P=_v()
_(o4P,l5P)
if(_oz(z,15,e,s,gg)){l5P.wxVkey=1
var e8P=_mz(z,'uni-icons',['bind:__l',16,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(l5P,e8P)
}
var a6P=_v()
_(o4P,a6P)
if(_oz(z,20,e,s,gg)){a6P.wxVkey=1
}
var b9P=_n('view')
_rz(z,b9P,'class',21,e,s,gg)
var o0P=_mz(z,'button',['bindtap',22,'class',1,'disabled',2],[],e,s,gg)
var xAQ=_v()
_(o0P,xAQ)
if(_oz(z,25,e,s,gg)){xAQ.wxVkey=1
var oBQ=_mz(z,'uni-icons',['bind:__l',26,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(xAQ,oBQ)
}
xAQ.wxXCkey=1
xAQ.wxXCkey=3
_(b9P,o0P)
var fCQ=_mz(z,'button',['bindtap',30,'class',1,'disabled',2],[],e,s,gg)
var cDQ=_v()
_(fCQ,cDQ)
if(_oz(z,33,e,s,gg)){cDQ.wxVkey=1
var hEQ=_mz(z,'uni-icons',['bind:__l',34,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(cDQ,hEQ)
}
cDQ.wxXCkey=1
cDQ.wxXCkey=3
_(b9P,fCQ)
_(o4P,b9P)
var t7P=_v()
_(o4P,t7P)
if(_oz(z,38,e,s,gg)){t7P.wxVkey=1
}
l5P.wxXCkey=1
l5P.wxXCkey=3
a6P.wxXCkey=1
t7P.wxXCkey=1
_(cZP,o4P)
var o2P=_v()
_(cZP,o2P)
if(_oz(z,39,e,s,gg)){o2P.wxVkey=1
var oFQ=_mz(z,'uni-icons',['bind:__l',40,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(o2P,oFQ)
}
h1P.wxXCkey=1
h1P.wxXCkey=3
o2P.wxXCkey=1
o2P.wxXCkey=3
_(xWP,cZP)
}
xWP.wxXCkey=1
xWP.wxXCkey=3
xWP.wxXCkey=3
_(eTP,oVP)
var bUP=_v()
_(eTP,bUP)
if(_oz(z,44,e,s,gg)){bUP.wxVkey=1
var cGQ=_mz(z,'uni-popup',['bind:__l',45,'class',1,'uI',2,'uP',3,'uR',4,'uS',5],[],e,s,gg)
var oHQ=_v()
_(cGQ,oHQ)
if(_oz(z,51,e,s,gg)){oHQ.wxVkey=1
var lIQ=_mz(z,'uni-popup-dialog',['bind:__l',52,'bindconfirm',1,'class',2,'uI',3,'uP',4,'uS',5],[],e,s,gg)
_(oHQ,lIQ)
}
oHQ.wxXCkey=1
oHQ.wxXCkey=3
_(bUP,cGQ)
}
bUP.wxXCkey=1
bUP.wxXCkey=3
_(r,eTP)
return r
}
e_[x[13]]={f:m13,j:[],i:[],ti:[],ic:[]}
d_[x[14]]={}
var m14=function(e,s,r,gg){
var z=gz$gwx_15()
var tKQ=_n('view')
_rz(z,tKQ,'class',0,e,s,gg)
var xOQ=_mz(z,'picker',['bindchange',1,'class',1,'range',2,'rangeKey',3,'value',4],[],e,s,gg)
var oPQ=_v()
_(xOQ,oPQ)
if(_oz(z,6,e,s,gg)){oPQ.wxVkey=1
var fQQ=_mz(z,'uni-icons',['bind:__l',7,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(oPQ,fQQ)
}
oPQ.wxXCkey=1
oPQ.wxXCkey=3
_(tKQ,xOQ)
var eLQ=_v()
_(tKQ,eLQ)
if(_oz(z,11,e,s,gg)){eLQ.wxVkey=1
var cRQ=_v()
_(eLQ,cRQ)
var hSQ=function(cUQ,oTQ,oVQ,gg){
var aXQ=_mz(z,'button',['bindtap',15,'class',1],[],cUQ,oTQ,gg)
var tYQ=_v()
_(aXQ,tYQ)
if(_oz(z,17,cUQ,oTQ,gg)){tYQ.wxVkey=1
var eZQ=_mz(z,'uni-icons',['bind:__l',18,'class',1,'uI',2,'uP',3],[],cUQ,oTQ,gg)
_(tYQ,eZQ)
}
tYQ.wxXCkey=1
tYQ.wxXCkey=3
_(oVQ,aXQ)
return oVQ
}
cRQ.wxXCkey=4
_2z(z,13,hSQ,e,s,gg,cRQ,'point','index','f')
}
var bMQ=_v()
_(tKQ,bMQ)
if(_oz(z,22,e,s,gg)){bMQ.wxVkey=1
}
var oNQ=_v()
_(tKQ,oNQ)
if(_oz(z,23,e,s,gg)){oNQ.wxVkey=1
var b1Q=_mz(z,'uni-popup',['bind:__l',24,'class',1,'uI',2,'uP',3,'uR',4,'uS',5],[],e,s,gg)
var o2Q=_n('view')
_rz(z,o2Q,'class',30,e,s,gg)
var x3Q=_mz(z,'button',['bindtap',31,'class',1],[],e,s,gg)
var o4Q=_v()
_(x3Q,o4Q)
if(_oz(z,33,e,s,gg)){o4Q.wxVkey=1
var f5Q=_mz(z,'uni-icons',['bind:__l',34,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(o4Q,f5Q)
}
o4Q.wxXCkey=1
o4Q.wxXCkey=3
_(o2Q,x3Q)
var c6Q=_n('view')
_rz(z,c6Q,'class',38,e,s,gg)
var o8Q=_n('view')
_rz(z,o8Q,'class',39,e,s,gg)
var o0Q=_mz(z,'button',['bindtap',40,'class',1],[],e,s,gg)
var lAR=_v()
_(o0Q,lAR)
if(_oz(z,42,e,s,gg)){lAR.wxVkey=1
var aBR=_mz(z,'uni-icons',['bind:__l',43,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(lAR,aBR)
}
lAR.wxXCkey=1
lAR.wxXCkey=3
_(o8Q,o0Q)
var tCR=_mz(z,'button',['bindtap',47,'class',1],[],e,s,gg)
var eDR=_v()
_(tCR,eDR)
if(_oz(z,49,e,s,gg)){eDR.wxVkey=1
var bER=_mz(z,'uni-icons',['bind:__l',50,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(eDR,bER)
}
eDR.wxXCkey=1
eDR.wxXCkey=3
_(o8Q,tCR)
var c9Q=_v()
_(o8Q,c9Q)
if(_oz(z,54,e,s,gg)){c9Q.wxVkey=1
var oFR=_mz(z,'button',['bindtap',55,'class',1],[],e,s,gg)
var xGR=_v()
_(oFR,xGR)
if(_oz(z,57,e,s,gg)){xGR.wxVkey=1
var oHR=_mz(z,'uni-icons',['bind:__l',58,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(xGR,oHR)
}
xGR.wxXCkey=1
xGR.wxXCkey=3
_(c9Q,oFR)
}
c9Q.wxXCkey=1
c9Q.wxXCkey=3
_(c6Q,o8Q)
var h7Q=_v()
_(c6Q,h7Q)
if(_oz(z,62,e,s,gg)){h7Q.wxVkey=1
}
h7Q.wxXCkey=1
_(o2Q,c6Q)
_(b1Q,o2Q)
_(oNQ,b1Q)
}
eLQ.wxXCkey=1
eLQ.wxXCkey=3
bMQ.wxXCkey=1
oNQ.wxXCkey=1
oNQ.wxXCkey=3
_(r,tKQ)
return r
}
e_[x[14]]={f:m14,j:[],i:[],ti:[],ic:[]}
d_[x[15]]={}
var m15=function(e,s,r,gg){
var z=gz$gwx_16()
var cJR=_n('view')
_rz(z,cJR,'class',0,e,s,gg)
var oNR=_n('view')
_rz(z,oNR,'class',1,e,s,gg)
var lOR=_n('view')
_rz(z,lOR,'class',2,e,s,gg)
var aPR=_v()
_(lOR,aPR)
if(_oz(z,3,e,s,gg)){aPR.wxVkey=1
var bSR=_mz(z,'uni-icons',['bind:__l',4,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(aPR,bSR)
}
var tQR=_v()
_(lOR,tQR)
if(_oz(z,8,e,s,gg)){tQR.wxVkey=1
var oTR=_mz(z,'uni-icons',['bind:__l',9,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(tQR,oTR)
}
var eRR=_v()
_(lOR,eRR)
if(_oz(z,13,e,s,gg)){eRR.wxVkey=1
var xUR=_mz(z,'uni-icons',['bind:__l',14,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(eRR,xUR)
}
aPR.wxXCkey=1
aPR.wxXCkey=3
tQR.wxXCkey=1
tQR.wxXCkey=3
eRR.wxXCkey=1
eRR.wxXCkey=3
_(oNR,lOR)
var oVR=_mz(z,'button',['bindtap',18,'class',1,'disabled',2],[],e,s,gg)
var fWR=_v()
_(oVR,fWR)
if(_oz(z,21,e,s,gg)){fWR.wxVkey=1
var cXR=_mz(z,'uni-icons',['bind:__l',22,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(fWR,cXR)
}
fWR.wxXCkey=1
fWR.wxXCkey=3
_(oNR,oVR)
_(cJR,oNR)
var hYR=_n('view')
_rz(z,hYR,'class',26,e,s,gg)
var c1R=_n('view')
_rz(z,c1R,'class',27,e,s,gg)
var t5R=_mz(z,'button',['bindtap',28,'class',1,'disabled',2],[],e,s,gg)
var e6R=_v()
_(t5R,e6R)
if(_oz(z,31,e,s,gg)){e6R.wxVkey=1
var b7R=_mz(z,'uni-icons',['bind:__l',32,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(e6R,b7R)
}
e6R.wxXCkey=1
e6R.wxXCkey=3
_(c1R,t5R)
var o2R=_v()
_(c1R,o2R)
if(_oz(z,36,e,s,gg)){o2R.wxVkey=1
var o8R=_mz(z,'button',['bindtap',37,'class',1,'disabled',2],[],e,s,gg)
var x9R=_v()
_(o8R,x9R)
if(_oz(z,40,e,s,gg)){x9R.wxVkey=1
var o0R=_mz(z,'uni-icons',['bind:__l',41,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(x9R,o0R)
}
x9R.wxXCkey=1
x9R.wxXCkey=3
_(o2R,o8R)
}
var l3R=_v()
_(c1R,l3R)
if(_oz(z,45,e,s,gg)){l3R.wxVkey=1
var fAS=_mz(z,'button',['bindtap',46,'class',1,'disabled',2],[],e,s,gg)
var cBS=_v()
_(fAS,cBS)
if(_oz(z,49,e,s,gg)){cBS.wxVkey=1
var hCS=_mz(z,'uni-icons',['bind:__l',50,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(cBS,hCS)
}
cBS.wxXCkey=1
cBS.wxXCkey=3
_(l3R,fAS)
}
var a4R=_v()
_(c1R,a4R)
if(_oz(z,54,e,s,gg)){a4R.wxVkey=1
var oDS=_mz(z,'button',['bindtap',55,'class',1],[],e,s,gg)
var cES=_v()
_(oDS,cES)
if(_oz(z,57,e,s,gg)){cES.wxVkey=1
var oFS=_mz(z,'uni-icons',['bind:__l',58,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(cES,oFS)
}
cES.wxXCkey=1
cES.wxXCkey=3
_(a4R,oDS)
}
o2R.wxXCkey=1
o2R.wxXCkey=3
l3R.wxXCkey=1
l3R.wxXCkey=3
a4R.wxXCkey=1
a4R.wxXCkey=3
_(hYR,c1R)
var oZR=_v()
_(hYR,oZR)
if(_oz(z,62,e,s,gg)){oZR.wxVkey=1
}
oZR.wxXCkey=1
_(cJR,hYR)
var lGS=_n('view')
_rz(z,lGS,'class',63,e,s,gg)
var aHS=_v()
_(lGS,aHS)
if(_oz(z,64,e,s,gg)){aHS.wxVkey=1
var eJS=_mz(z,'button',['bindtap',65,'class',1,'disabled',2],[],e,s,gg)
var bKS=_v()
_(eJS,bKS)
if(_oz(z,68,e,s,gg)){bKS.wxVkey=1
var oLS=_mz(z,'uni-icons',['bind:__l',69,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(bKS,oLS)
}
bKS.wxXCkey=1
bKS.wxXCkey=3
_(aHS,eJS)
}
var tIS=_v()
_(lGS,tIS)
if(_oz(z,73,e,s,gg)){tIS.wxVkey=1
var xMS=_v()
_(tIS,xMS)
var oNS=function(cPS,fOS,hQS,gg){
var cSS=_mz(z,'view',['bindtap',77,'class',1],[],cPS,fOS,gg)
var lUS=_n('view')
_rz(z,lUS,'class',79,cPS,fOS,gg)
var aVS=_v()
_(lUS,aVS)
if(_oz(z,80,cPS,fOS,gg)){aVS.wxVkey=1
var bYS=_mz(z,'uni-icons',['bind:__l',81,'class',1,'uI',2,'uP',3],[],cPS,fOS,gg)
_(aVS,bYS)
}
var tWS=_v()
_(lUS,tWS)
if(_oz(z,85,cPS,fOS,gg)){tWS.wxVkey=1
var oZS=_mz(z,'uni-icons',['bind:__l',86,'class',1,'uI',2,'uP',3],[],cPS,fOS,gg)
_(tWS,oZS)
}
var eXS=_v()
_(lUS,eXS)
if(_oz(z,90,cPS,fOS,gg)){eXS.wxVkey=1
var x1S=_v()
_(eXS,x1S)
if(_oz(z,91,cPS,fOS,gg)){x1S.wxVkey=1
var o2S=_mz(z,'uni-icons',['bind:__l',92,'class',1,'uI',2,'uP',3],[],cPS,fOS,gg)
_(x1S,o2S)
}
x1S.wxXCkey=1
x1S.wxXCkey=3
}
aVS.wxXCkey=1
aVS.wxXCkey=3
tWS.wxXCkey=1
tWS.wxXCkey=3
eXS.wxXCkey=1
eXS.wxXCkey=3
_(cSS,lUS)
var f3S=_mz(z,'view',['catchtap',96,'class',1],[],cPS,fOS,gg)
var c4S=_mz(z,'button',['bindtap',98,'class',1],[],cPS,fOS,gg)
var h5S=_v()
_(c4S,h5S)
if(_oz(z,100,cPS,fOS,gg)){h5S.wxVkey=1
var o6S=_mz(z,'uni-icons',['bind:__l',101,'class',1,'uI',2,'uP',3],[],cPS,fOS,gg)
_(h5S,o6S)
}
h5S.wxXCkey=1
h5S.wxXCkey=3
_(f3S,c4S)
var c7S=_mz(z,'button',['bindtap',105,'class',1],[],cPS,fOS,gg)
var o8S=_v()
_(c7S,o8S)
if(_oz(z,107,cPS,fOS,gg)){o8S.wxVkey=1
var l9S=_mz(z,'uni-icons',['bind:__l',108,'class',1,'uI',2,'uP',3],[],cPS,fOS,gg)
_(o8S,l9S)
}
o8S.wxXCkey=1
o8S.wxXCkey=3
_(f3S,c7S)
var a0S=_mz(z,'button',['bindtap',112,'class',1],[],cPS,fOS,gg)
var tAT=_v()
_(a0S,tAT)
if(_oz(z,114,cPS,fOS,gg)){tAT.wxVkey=1
var eBT=_mz(z,'uni-icons',['bind:__l',115,'class',1,'uI',2,'uP',3],[],cPS,fOS,gg)
_(tAT,eBT)
}
tAT.wxXCkey=1
tAT.wxXCkey=3
_(f3S,a0S)
_(cSS,f3S)
var oTS=_v()
_(cSS,oTS)
if(_oz(z,119,cPS,fOS,gg)){oTS.wxVkey=1
}
oTS.wxXCkey=1
_(hQS,cSS)
return hQS
}
xMS.wxXCkey=4
_2z(z,75,oNS,e,s,gg,xMS,'geofence','index','w')
}
else{tIS.wxVkey=2
var bCT=_n('view')
_rz(z,bCT,'class',120,e,s,gg)
var oDT=_v()
_(bCT,oDT)
if(_oz(z,121,e,s,gg)){oDT.wxVkey=1
var xET=_mz(z,'uni-icons',['bind:__l',122,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(oDT,xET)
}
var oFT=_mz(z,'button',['bindtap',126,'class',1,'disabled',2],[],e,s,gg)
var fGT=_v()
_(oFT,fGT)
if(_oz(z,129,e,s,gg)){fGT.wxVkey=1
var cHT=_mz(z,'uni-icons',['bind:__l',130,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(fGT,cHT)
}
fGT.wxXCkey=1
fGT.wxXCkey=3
_(bCT,oFT)
oDT.wxXCkey=1
oDT.wxXCkey=3
_(tIS,bCT)
}
aHS.wxXCkey=1
aHS.wxXCkey=3
tIS.wxXCkey=1
tIS.wxXCkey=3
tIS.wxXCkey=3
_(cJR,lGS)
var hKR=_v()
_(cJR,hKR)
if(_oz(z,134,e,s,gg)){hKR.wxVkey=1
var hIT=_v()
_(hKR,hIT)
if(_oz(z,135,e,s,gg)){hIT.wxVkey=1
}
hIT.wxXCkey=1
}
var oLR=_v()
_(cJR,oLR)
if(_oz(z,136,e,s,gg)){oLR.wxVkey=1
var oJT=_mz(z,'uni-popup',['bind:__l',137,'class',1,'uI',2,'uP',3,'uR',4,'uS',5],[],e,s,gg)
var cKT=_v()
_(oJT,cKT)
if(_oz(z,143,e,s,gg)){cKT.wxVkey=1
var oLT=_mz(z,'uni-popup-dialog',['bind:__l',144,'bindclose',1,'bindconfirm',2,'class',3,'uI',4,'uP',5],[],e,s,gg)
_(cKT,oLT)
}
cKT.wxXCkey=1
cKT.wxXCkey=3
_(oLR,oJT)
}
var cMR=_v()
_(cJR,cMR)
if(_oz(z,150,e,s,gg)){cMR.wxVkey=1
var lMT=_mz(z,'uni-popup',['bind:__l',151,'class',1,'uI',2,'uP',3,'uR',4,'uS',5],[],e,s,gg)
var aNT=_n('view')
_rz(z,aNT,'class',157,e,s,gg)
var tOT=_mz(z,'button',['bindtap',158,'class',1],[],e,s,gg)
var ePT=_v()
_(tOT,ePT)
if(_oz(z,160,e,s,gg)){ePT.wxVkey=1
var bQT=_mz(z,'uni-icons',['bind:__l',161,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(ePT,bQT)
}
ePT.wxXCkey=1
ePT.wxXCkey=3
_(aNT,tOT)
var oRT=_n('view')
_rz(z,oRT,'class',165,e,s,gg)
var oTT=_n('view')
_rz(z,oTT,'class',166,e,s,gg)
var fUT=_mz(z,'button',['bindtap',167,'class',1,'disabled',2],[],e,s,gg)
var cVT=_v()
_(fUT,cVT)
if(_oz(z,170,e,s,gg)){cVT.wxVkey=1
var hWT=_mz(z,'uni-icons',['bind:__l',171,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(cVT,hWT)
}
cVT.wxXCkey=1
cVT.wxXCkey=3
_(oTT,fUT)
var oXT=_mz(z,'picker',['bindchange',175,'class',1,'range',2,'rangeKey',3],[],e,s,gg)
var cYT=_v()
_(oXT,cYT)
if(_oz(z,179,e,s,gg)){cYT.wxVkey=1
var oZT=_mz(z,'uni-icons',['bind:__l',180,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(cYT,oZT)
}
cYT.wxXCkey=1
cYT.wxXCkey=3
_(oTT,oXT)
_(oRT,oTT)
var xST=_v()
_(oRT,xST)
if(_oz(z,184,e,s,gg)){xST.wxVkey=1
var l1T=_n('view')
_rz(z,l1T,'class',185,e,s,gg)
var a2T=_v()
_(l1T,a2T)
if(_oz(z,186,e,s,gg)){a2T.wxVkey=1
var b5T=_v()
_(a2T,b5T)
if(_oz(z,187,e,s,gg)){b5T.wxVkey=1
var o6T=_mz(z,'uni-icons',['bind:__l',188,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(b5T,o6T)
}
b5T.wxXCkey=1
b5T.wxXCkey=3
}
var t3T=_v()
_(l1T,t3T)
if(_oz(z,192,e,s,gg)){t3T.wxVkey=1
var x7T=_v()
_(t3T,x7T)
if(_oz(z,193,e,s,gg)){x7T.wxVkey=1
var o8T=_mz(z,'uni-icons',['bind:__l',194,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(x7T,o8T)
}
x7T.wxXCkey=1
x7T.wxXCkey=3
}
var e4T=_v()
_(l1T,e4T)
if(_oz(z,198,e,s,gg)){e4T.wxVkey=1
var f9T=_v()
_(e4T,f9T)
if(_oz(z,199,e,s,gg)){f9T.wxVkey=1
var c0T=_mz(z,'uni-icons',['bind:__l',200,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(f9T,c0T)
}
f9T.wxXCkey=1
f9T.wxXCkey=3
}
a2T.wxXCkey=1
a2T.wxXCkey=3
t3T.wxXCkey=1
t3T.wxXCkey=3
e4T.wxXCkey=1
e4T.wxXCkey=3
_(xST,l1T)
}
xST.wxXCkey=1
xST.wxXCkey=3
_(aNT,oRT)
_(lMT,aNT)
_(cMR,lMT)
}
hKR.wxXCkey=1
oLR.wxXCkey=1
oLR.wxXCkey=3
cMR.wxXCkey=1
cMR.wxXCkey=3
_(r,cJR)
return r
}
e_[x[15]]={f:m15,j:[],i:[],ti:[],ic:[]}
d_[x[16]]={}
var m16=function(e,s,r,gg){
var z=gz$gwx_17()
var oBU=_n('view')
_rz(z,oBU,'class',0,e,s,gg)
var cCU=_n('view')
_rz(z,cCU,'class',1,e,s,gg)
var aFU=_n('view')
_rz(z,aFU,'class',2,e,s,gg)
var tGU=_v()
_(aFU,tGU)
if(_oz(z,3,e,s,gg)){tGU.wxVkey=1
var eHU=_mz(z,'uni-icons',['bind:__l',4,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(tGU,eHU)
}
var bIU=_n('view')
_rz(z,bIU,'class',8,e,s,gg)
var oJU=_v()
_(bIU,oJU)
if(_oz(z,9,e,s,gg)){oJU.wxVkey=1
}
else{oJU.wxVkey=2
var xKU=_mz(z,'uni-icons',['bind:__l',10,'bindclick',1,'class',2,'uI',3,'uP',4],[],e,s,gg)
_(oJU,xKU)
}
oJU.wxXCkey=1
oJU.wxXCkey=3
_(aFU,bIU)
tGU.wxXCkey=1
tGU.wxXCkey=3
_(cCU,aFU)
var oDU=_v()
_(cCU,oDU)
if(_oz(z,15,e,s,gg)){oDU.wxVkey=1
}
var lEU=_v()
_(cCU,lEU)
if(_oz(z,16,e,s,gg)){lEU.wxVkey=1
}
oDU.wxXCkey=1
lEU.wxXCkey=1
_(oBU,cCU)
var oLU=_n('view')
_rz(z,oLU,'class',17,e,s,gg)
var fMU=_mz(z,'view',['bindtap',18,'class',1],[],e,s,gg)
var cNU=_v()
_(fMU,cNU)
if(_oz(z,20,e,s,gg)){cNU.wxVkey=1
var oPU=_mz(z,'uni-icons',['bind:__l',21,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(cNU,oPU)
}
var hOU=_v()
_(fMU,hOU)
if(_oz(z,25,e,s,gg)){hOU.wxVkey=1
var cQU=_v()
_(hOU,cQU)
if(_oz(z,26,e,s,gg)){cQU.wxVkey=1
var oRU=_mz(z,'uni-icons',['bind:__l',27,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(cQU,oRU)
}
cQU.wxXCkey=1
cQU.wxXCkey=3
}
cNU.wxXCkey=1
cNU.wxXCkey=3
hOU.wxXCkey=1
hOU.wxXCkey=3
_(oLU,fMU)
var lSU=_mz(z,'view',['bindtap',31,'class',1],[],e,s,gg)
var aTU=_v()
_(lSU,aTU)
if(_oz(z,33,e,s,gg)){aTU.wxVkey=1
var eVU=_mz(z,'uni-icons',['bind:__l',34,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(aTU,eVU)
}
var tUU=_v()
_(lSU,tUU)
if(_oz(z,38,e,s,gg)){tUU.wxVkey=1
var bWU=_v()
_(tUU,bWU)
if(_oz(z,39,e,s,gg)){bWU.wxVkey=1
var oXU=_mz(z,'uni-icons',['bind:__l',40,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(bWU,oXU)
}
bWU.wxXCkey=1
bWU.wxXCkey=3
}
aTU.wxXCkey=1
aTU.wxXCkey=3
tUU.wxXCkey=1
tUU.wxXCkey=3
_(oLU,lSU)
var xYU=_mz(z,'view',['bindtap',44,'class',1],[],e,s,gg)
var oZU=_v()
_(xYU,oZU)
if(_oz(z,46,e,s,gg)){oZU.wxVkey=1
var c2U=_mz(z,'uni-icons',['bind:__l',47,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(oZU,c2U)
}
var f1U=_v()
_(xYU,f1U)
if(_oz(z,51,e,s,gg)){f1U.wxVkey=1
var h3U=_v()
_(f1U,h3U)
if(_oz(z,52,e,s,gg)){h3U.wxVkey=1
var o4U=_mz(z,'uni-icons',['bind:__l',53,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(h3U,o4U)
}
h3U.wxXCkey=1
h3U.wxXCkey=3
}
oZU.wxXCkey=1
oZU.wxXCkey=3
f1U.wxXCkey=1
f1U.wxXCkey=3
_(oLU,xYU)
var c5U=_mz(z,'view',['bindtap',57,'class',1],[],e,s,gg)
var o6U=_v()
_(c5U,o6U)
if(_oz(z,59,e,s,gg)){o6U.wxVkey=1
var a8U=_mz(z,'uni-icons',['bind:__l',60,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(o6U,a8U)
}
var l7U=_v()
_(c5U,l7U)
if(_oz(z,64,e,s,gg)){l7U.wxVkey=1
var t9U=_v()
_(l7U,t9U)
if(_oz(z,65,e,s,gg)){t9U.wxVkey=1
var e0U=_mz(z,'uni-icons',['bind:__l',66,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(t9U,e0U)
}
t9U.wxXCkey=1
t9U.wxXCkey=3
}
o6U.wxXCkey=1
o6U.wxXCkey=3
l7U.wxXCkey=1
l7U.wxXCkey=3
_(oLU,c5U)
var bAV=_mz(z,'view',['bindtap',70,'class',1],[],e,s,gg)
var oBV=_v()
_(bAV,oBV)
if(_oz(z,72,e,s,gg)){oBV.wxVkey=1
var xCV=_mz(z,'uni-icons',['bind:__l',73,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(oBV,xCV)
}
oBV.wxXCkey=1
oBV.wxXCkey=3
_(oLU,bAV)
_(oBU,oLU)
_(r,oBU)
return r
}
e_[x[16]]={f:m16,j:[],i:[],ti:[],ic:[]}
d_[x[17]]={}
var m17=function(e,s,r,gg){
var z=gz$gwx_18()
var fEV=_n('view')
_rz(z,fEV,'class',0,e,s,gg)
var tMV=_n('view')
_rz(z,tMV,'class',1,e,s,gg)
var eNV=_v()
_(tMV,eNV)
if(_oz(z,2,e,s,gg)){eNV.wxVkey=1
var oPV=_mz(z,'uni-icons',['bind:__l',3,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(eNV,oPV)
}
var bOV=_v()
_(tMV,bOV)
if(_oz(z,7,e,s,gg)){bOV.wxVkey=1
var xQV=_mz(z,'uni-icons',['bind:__l',8,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(bOV,xQV)
}
eNV.wxXCkey=1
eNV.wxXCkey=3
bOV.wxXCkey=1
bOV.wxXCkey=3
_(fEV,tMV)
var oRV=_n('view')
_rz(z,oRV,'class',12,e,s,gg)
var fSV=_mz(z,'view',['bindtap',13,'class',1],[],e,s,gg)
var cTV=_v()
_(fSV,cTV)
if(_oz(z,15,e,s,gg)){cTV.wxVkey=1
var hUV=_mz(z,'uni-icons',['bind:__l',16,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(cTV,hUV)
}
cTV.wxXCkey=1
cTV.wxXCkey=3
_(oRV,fSV)
var oVV=_mz(z,'view',['bindtap',20,'class',1],[],e,s,gg)
var cWV=_v()
_(oVV,cWV)
if(_oz(z,22,e,s,gg)){cWV.wxVkey=1
var oXV=_mz(z,'uni-icons',['bind:__l',23,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(cWV,oXV)
}
cWV.wxXCkey=1
cWV.wxXCkey=3
_(oRV,oVV)
_(fEV,oRV)
var lYV=_v()
_(fEV,lYV)
var aZV=function(e2V,t1V,b3V,gg){
var x5V=_v()
_(b3V,x5V)
if(_oz(z,30,e2V,t1V,gg)){x5V.wxVkey=1
var o6V=_mz(z,'uni-icons',['bind:__l',31,'class',1,'uI',2,'uP',3],[],e2V,t1V,gg)
_(x5V,o6V)
}
x5V.wxXCkey=1
x5V.wxXCkey=3
return b3V
}
lYV.wxXCkey=4
_2z(z,28,aZV,e,s,gg,lYV,'cardType','index','d')
var f7V=_n('view')
_rz(z,f7V,'class',35,e,s,gg)
var c8V=_v()
_(f7V,c8V)
if(_oz(z,36,e,s,gg)){c8V.wxVkey=1
}
var h9V=_n('view')
_rz(z,h9V,'class',37,e,s,gg)
var o0V=_v()
_(h9V,o0V)
if(_oz(z,38,e,s,gg)){o0V.wxVkey=1
var oBW=_mz(z,'uni-icons',['bind:__l',39,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(o0V,oBW)
}
var cAW=_v()
_(h9V,cAW)
if(_oz(z,43,e,s,gg)){cAW.wxVkey=1
var lCW=_n('view')
_rz(z,lCW,'class',44,e,s,gg)
var aDW=_v()
_(lCW,aDW)
if(_oz(z,45,e,s,gg)){aDW.wxVkey=1
var eFW=_v()
_(aDW,eFW)
if(_oz(z,46,e,s,gg)){eFW.wxVkey=1
}
eFW.wxXCkey=1
}
var tEW=_v()
_(lCW,tEW)
if(_oz(z,47,e,s,gg)){tEW.wxVkey=1
var bGW=_v()
_(tEW,bGW)
var oHW=function(oJW,xIW,fKW,gg){
var hMW=_v()
_(fKW,hMW)
if(_oz(z,51,oJW,xIW,gg)){hMW.wxVkey=1
var oNW=_mz(z,'uni-icons',['bind:__l',52,'class',1,'uI',2,'uP',3],[],oJW,xIW,gg)
_(hMW,oNW)
}
hMW.wxXCkey=1
hMW.wxXCkey=3
return fKW
}
bGW.wxXCkey=4
_2z(z,49,oHW,e,s,gg,bGW,'detail','index','d')
}
aDW.wxXCkey=1
tEW.wxXCkey=1
tEW.wxXCkey=3
_(cAW,lCW)
}
o0V.wxXCkey=1
o0V.wxXCkey=3
cAW.wxXCkey=1
cAW.wxXCkey=3
_(f7V,h9V)
c8V.wxXCkey=1
_(fEV,f7V)
var cOW=_n('view')
_rz(z,cOW,'class',56,e,s,gg)
var lQW=_mz(z,'button',['bindtap',57,'class',1,'disabled',2],[],e,s,gg)
var aRW=_v()
_(lQW,aRW)
if(_oz(z,60,e,s,gg)){aRW.wxVkey=1
var tSW=_mz(z,'uni-icons',['bind:__l',61,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(aRW,tSW)
}
aRW.wxXCkey=1
aRW.wxXCkey=3
_(cOW,lQW)
var oPW=_v()
_(cOW,oPW)
if(_oz(z,65,e,s,gg)){oPW.wxVkey=1
var eTW=_mz(z,'button',['bindtap',66,'class',1,'disabled',2],[],e,s,gg)
var bUW=_v()
_(eTW,bUW)
if(_oz(z,69,e,s,gg)){bUW.wxVkey=1
var oVW=_mz(z,'uni-icons',['bind:__l',70,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(bUW,oVW)
}
bUW.wxXCkey=1
bUW.wxXCkey=3
_(oPW,eTW)
}
oPW.wxXCkey=1
oPW.wxXCkey=3
_(fEV,cOW)
var cFV=_v()
_(fEV,cFV)
if(_oz(z,74,e,s,gg)){cFV.wxVkey=1
var xWW=_n('view')
_rz(z,xWW,'class',75,e,s,gg)
var oXW=_n('view')
_rz(z,oXW,'class',76,e,s,gg)
var fYW=_v()
_(oXW,fYW)
if(_oz(z,77,e,s,gg)){fYW.wxVkey=1
}
var cZW=_v()
_(oXW,cZW)
if(_oz(z,78,e,s,gg)){cZW.wxVkey=1
}
var h1W=_v()
_(oXW,h1W)
if(_oz(z,79,e,s,gg)){h1W.wxVkey=1
}
var o2W=_v()
_(oXW,o2W)
if(_oz(z,80,e,s,gg)){o2W.wxVkey=1
}
fYW.wxXCkey=1
cZW.wxXCkey=1
h1W.wxXCkey=1
o2W.wxXCkey=1
_(xWW,oXW)
var c3W=_n('view')
_rz(z,c3W,'class',81,e,s,gg)
var o4W=_v()
_(c3W,o4W)
if(_oz(z,82,e,s,gg)){o4W.wxVkey=1
var a6W=_mz(z,'uni-icons',['bind:__l',83,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(o4W,a6W)
}
var l5W=_v()
_(c3W,l5W)
if(_oz(z,87,e,s,gg)){l5W.wxVkey=1
}
o4W.wxXCkey=1
o4W.wxXCkey=3
l5W.wxXCkey=1
_(xWW,c3W)
var t7W=_n('view')
_rz(z,t7W,'class',88,e,s,gg)
var xAX=_mz(z,'button',['bindtap',89,'class',1],[],e,s,gg)
var oBX=_v()
_(xAX,oBX)
if(_oz(z,91,e,s,gg)){oBX.wxVkey=1
var fCX=_mz(z,'uni-icons',['bind:__l',92,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(oBX,fCX)
}
oBX.wxXCkey=1
oBX.wxXCkey=3
_(t7W,xAX)
var cDX=_mz(z,'button',['bindtap',96,'class',1],[],e,s,gg)
var hEX=_v()
_(cDX,hEX)
if(_oz(z,98,e,s,gg)){hEX.wxVkey=1
var oFX=_mz(z,'uni-icons',['bind:__l',99,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(hEX,oFX)
}
hEX.wxXCkey=1
hEX.wxXCkey=3
_(t7W,cDX)
var e8W=_v()
_(t7W,e8W)
if(_oz(z,103,e,s,gg)){e8W.wxVkey=1
var cGX=_mz(z,'button',['bindtap',104,'class',1],[],e,s,gg)
var oHX=_v()
_(cGX,oHX)
if(_oz(z,106,e,s,gg)){oHX.wxVkey=1
var lIX=_mz(z,'uni-icons',['bind:__l',107,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(oHX,lIX)
}
oHX.wxXCkey=1
oHX.wxXCkey=3
_(e8W,cGX)
}
var b9W=_v()
_(t7W,b9W)
if(_oz(z,111,e,s,gg)){b9W.wxVkey=1
var aJX=_mz(z,'button',['bindtap',112,'class',1],[],e,s,gg)
var tKX=_v()
_(aJX,tKX)
if(_oz(z,114,e,s,gg)){tKX.wxVkey=1
var eLX=_mz(z,'uni-icons',['bind:__l',115,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(tKX,eLX)
}
tKX.wxXCkey=1
tKX.wxXCkey=3
_(b9W,aJX)
}
var o0W=_v()
_(t7W,o0W)
if(_oz(z,119,e,s,gg)){o0W.wxVkey=1
var bMX=_mz(z,'button',['bindtap',120,'class',1],[],e,s,gg)
var oNX=_v()
_(bMX,oNX)
if(_oz(z,122,e,s,gg)){oNX.wxVkey=1
var xOX=_mz(z,'uni-icons',['bind:__l',123,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(oNX,xOX)
}
oNX.wxXCkey=1
oNX.wxXCkey=3
_(o0W,bMX)
}
var oPX=_mz(z,'button',['bindtap',127,'class',1],[],e,s,gg)
var fQX=_v()
_(oPX,fQX)
if(_oz(z,129,e,s,gg)){fQX.wxVkey=1
var cRX=_mz(z,'uni-icons',['bind:__l',130,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(fQX,cRX)
}
fQX.wxXCkey=1
fQX.wxXCkey=3
_(t7W,oPX)
e8W.wxXCkey=1
e8W.wxXCkey=3
b9W.wxXCkey=1
b9W.wxXCkey=3
o0W.wxXCkey=1
o0W.wxXCkey=3
_(xWW,t7W)
_(cFV,xWW)
}
var hGV=_v()
_(fEV,hGV)
if(_oz(z,134,e,s,gg)){hGV.wxVkey=1
var hSX=_v()
_(hGV,hSX)
var oTX=function(oVX,cUX,lWX,gg){
var tYX=_mz(z,'view',['bindtap',138,'class',1],[],oVX,cUX,gg)
var eZX=_v()
_(tYX,eZX)
if(_oz(z,140,oVX,cUX,gg)){eZX.wxVkey=1
var b1X=_mz(z,'uni-icons',['bind:__l',141,'class',1,'uI',2,'uP',3],[],oVX,cUX,gg)
_(eZX,b1X)
}
eZX.wxXCkey=1
eZX.wxXCkey=3
_(lWX,tYX)
return lWX
}
hSX.wxXCkey=4
_2z(z,136,oTX,e,s,gg,hSX,'item','index','f')
}
var oHV=_v()
_(fEV,oHV)
if(_oz(z,145,e,s,gg)){oHV.wxVkey=1
var o2X=_mz(z,'uni-popup',['bind:__l',146,'class',1,'uI',2,'uP',3,'uR',4,'uS',5],[],e,s,gg)
var x3X=_n('view')
_rz(z,x3X,'class',152,e,s,gg)
var o4X=_n('view')
_rz(z,o4X,'class',153,e,s,gg)
var c6X=_mz(z,'button',['bindtap',154,'class',1],[],e,s,gg)
var h7X=_v()
_(c6X,h7X)
if(_oz(z,156,e,s,gg)){h7X.wxVkey=1
var o8X=_mz(z,'uni-icons',['bind:__l',157,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(h7X,o8X)
}
h7X.wxXCkey=1
h7X.wxXCkey=3
_(o4X,c6X)
var f5X=_v()
_(o4X,f5X)
if(_oz(z,161,e,s,gg)){f5X.wxVkey=1
var c9X=_mz(z,'uni-icons',['bind:__l',162,'bindclick',1,'class',2,'uI',3,'uP',4],[],e,s,gg)
_(f5X,c9X)
}
f5X.wxXCkey=1
f5X.wxXCkey=3
_(x3X,o4X)
var o0X=_n('view')
_rz(z,o0X,'class',167,e,s,gg)
var aBY=_n('view')
_rz(z,aBY,'class',168,e,s,gg)
var eDY=_mz(z,'button',['bindtap',169,'class',1],[],e,s,gg)
var bEY=_v()
_(eDY,bEY)
if(_oz(z,171,e,s,gg)){bEY.wxVkey=1
var oFY=_mz(z,'uni-icons',['bind:__l',172,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(bEY,oFY)
}
bEY.wxXCkey=1
bEY.wxXCkey=3
_(aBY,eDY)
var tCY=_v()
_(aBY,tCY)
if(_oz(z,176,e,s,gg)){tCY.wxVkey=1
var xGY=_v()
_(tCY,xGY)
var oHY=function(cJY,fIY,hKY,gg){
var cMY=_mz(z,'view',['bindtap',180,'class',1],[],cJY,fIY,gg)
var oNY=_v()
_(cMY,oNY)
if(_oz(z,182,cJY,fIY,gg)){oNY.wxVkey=1
var lOY=_mz(z,'uni-icons',['bind:__l',183,'class',1,'uI',2,'uP',3],[],cJY,fIY,gg)
_(oNY,lOY)
}
oNY.wxXCkey=1
oNY.wxXCkey=3
_(hKY,cMY)
return hKY
}
xGY.wxXCkey=4
_2z(z,178,oHY,e,s,gg,xGY,'keyName','index','e')
}
tCY.wxXCkey=1
tCY.wxXCkey=3
_(o0X,aBY)
var lAY=_v()
_(o0X,lAY)
if(_oz(z,187,e,s,gg)){lAY.wxVkey=1
var aPY=_v()
_(lAY,aPY)
var tQY=function(bSY,eRY,oTY,gg){
var oVY=_v()
_(oTY,oVY)
if(_oz(z,191,bSY,eRY,gg)){oVY.wxVkey=1
var fWY=_mz(z,'uni-icons',['bind:__l',192,'bindclick',1,'class',2,'uI',3,'uP',4],[],bSY,eRY,gg)
_(oVY,fWY)
}
oVY.wxXCkey=1
oVY.wxXCkey=3
return oTY
}
aPY.wxXCkey=4
_2z(z,189,tQY,e,s,gg,aPY,'key','index','d')
}
var cXY=_n('view')
_rz(z,cXY,'class',197,e,s,gg)
var hYY=_mz(z,'view',['bindtap',198,'class',1],[],e,s,gg)
var oZY=_v()
_(hYY,oZY)
if(_oz(z,200,e,s,gg)){oZY.wxVkey=1
var o2Y=_mz(z,'uni-icons',['bind:__l',201,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(oZY,o2Y)
}
var c1Y=_v()
_(hYY,c1Y)
if(_oz(z,205,e,s,gg)){c1Y.wxVkey=1
var l3Y=_mz(z,'uni-icons',['bind:__l',206,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(c1Y,l3Y)
}
oZY.wxXCkey=1
oZY.wxXCkey=3
c1Y.wxXCkey=1
c1Y.wxXCkey=3
_(cXY,hYY)
var a4Y=_mz(z,'view',['bindtap',210,'class',1],[],e,s,gg)
var t5Y=_v()
_(a4Y,t5Y)
if(_oz(z,212,e,s,gg)){t5Y.wxVkey=1
var b7Y=_mz(z,'uni-icons',['bind:__l',213,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(t5Y,b7Y)
}
var e6Y=_v()
_(a4Y,e6Y)
if(_oz(z,217,e,s,gg)){e6Y.wxVkey=1
var o8Y=_mz(z,'uni-icons',['bind:__l',218,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(e6Y,o8Y)
}
t5Y.wxXCkey=1
t5Y.wxXCkey=3
e6Y.wxXCkey=1
e6Y.wxXCkey=3
_(cXY,a4Y)
var x9Y=_mz(z,'view',['bindtap',222,'class',1],[],e,s,gg)
var o0Y=_v()
_(x9Y,o0Y)
if(_oz(z,224,e,s,gg)){o0Y.wxVkey=1
var cBZ=_mz(z,'uni-icons',['bind:__l',225,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(o0Y,cBZ)
}
var fAZ=_v()
_(x9Y,fAZ)
if(_oz(z,229,e,s,gg)){fAZ.wxVkey=1
var hCZ=_mz(z,'uni-icons',['bind:__l',230,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(fAZ,hCZ)
}
o0Y.wxXCkey=1
o0Y.wxXCkey=3
fAZ.wxXCkey=1
fAZ.wxXCkey=3
_(cXY,x9Y)
var oDZ=_mz(z,'view',['bindtap',234,'class',1],[],e,s,gg)
var cEZ=_v()
_(oDZ,cEZ)
if(_oz(z,236,e,s,gg)){cEZ.wxVkey=1
var lGZ=_mz(z,'uni-icons',['bind:__l',237,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(cEZ,lGZ)
}
var oFZ=_v()
_(oDZ,oFZ)
if(_oz(z,241,e,s,gg)){oFZ.wxVkey=1
var aHZ=_mz(z,'uni-icons',['bind:__l',242,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(oFZ,aHZ)
}
cEZ.wxXCkey=1
cEZ.wxXCkey=3
oFZ.wxXCkey=1
oFZ.wxXCkey=3
_(cXY,oDZ)
_(o0X,cXY)
lAY.wxXCkey=1
lAY.wxXCkey=3
_(x3X,o0X)
_(o2X,x3X)
_(oHV,o2X)
}
var cIV=_v()
_(fEV,cIV)
if(_oz(z,246,e,s,gg)){cIV.wxVkey=1
var tIZ=_mz(z,'uni-popup',['bind:__l',247,'class',1,'uI',2,'uP',3,'uR',4,'uS',5],[],e,s,gg)
var eJZ=_n('view')
_rz(z,eJZ,'class',253,e,s,gg)
var bKZ=_v()
_(eJZ,bKZ)
if(_oz(z,254,e,s,gg)){bKZ.wxVkey=1
var xMZ=_mz(z,'uni-icons',['bind:__l',255,'bindclick',1,'class',2,'uI',3,'uP',4],[],e,s,gg)
_(bKZ,xMZ)
}
var oLZ=_v()
_(eJZ,oLZ)
if(_oz(z,260,e,s,gg)){oLZ.wxVkey=1
var oNZ=_v()
_(oLZ,oNZ)
var fOZ=function(hQZ,cPZ,oRZ,gg){
var oTZ=_n('view')
_rz(z,oTZ,'class',264,hQZ,cPZ,gg)
var aVZ=_mz(z,'button',['bindtap',265,'class',1],[],hQZ,cPZ,gg)
var tWZ=_v()
_(aVZ,tWZ)
if(_oz(z,267,hQZ,cPZ,gg)){tWZ.wxVkey=1
var eXZ=_mz(z,'uni-icons',['bind:__l',268,'class',1,'uI',2,'uP',3],[],hQZ,cPZ,gg)
_(tWZ,eXZ)
}
tWZ.wxXCkey=1
tWZ.wxXCkey=3
_(oTZ,aVZ)
var lUZ=_v()
_(oTZ,lUZ)
if(_oz(z,272,hQZ,cPZ,gg)){lUZ.wxVkey=1
}
lUZ.wxXCkey=1
_(oRZ,oTZ)
return oRZ
}
oNZ.wxXCkey=4
_2z(z,262,fOZ,e,s,gg,oNZ,'page','index','h')
}
bKZ.wxXCkey=1
bKZ.wxXCkey=3
oLZ.wxXCkey=1
oLZ.wxXCkey=3
_(tIZ,eJZ)
_(cIV,tIZ)
}
var oJV=_v()
_(fEV,oJV)
if(_oz(z,273,e,s,gg)){oJV.wxVkey=1
var bYZ=_mz(z,'uni-popup',['bind:__l',274,'class',1,'uI',2,'uP',3,'uR',4,'uS',5],[],e,s,gg)
var oZZ=_n('view')
_rz(z,oZZ,'class',280,e,s,gg)
var x1Z=_v()
_(oZZ,x1Z)
if(_oz(z,281,e,s,gg)){x1Z.wxVkey=1
var f3Z=_mz(z,'uni-icons',['bind:__l',282,'bindclick',1,'class',2,'uI',3,'uP',4],[],e,s,gg)
_(x1Z,f3Z)
}
var o2Z=_v()
_(oZZ,o2Z)
if(_oz(z,287,e,s,gg)){o2Z.wxVkey=1
var c4Z=_n('view')
_rz(z,c4Z,'class',288,e,s,gg)
var h5Z=_v()
_(c4Z,h5Z)
if(_oz(z,289,e,s,gg)){h5Z.wxVkey=1
var o8Z=_mz(z,'uni-icons',['bind:__l',290,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(h5Z,o8Z)
}
var o6Z=_v()
_(c4Z,o6Z)
if(_oz(z,294,e,s,gg)){o6Z.wxVkey=1
}
var c7Z=_v()
_(c4Z,c7Z)
if(_oz(z,295,e,s,gg)){c7Z.wxVkey=1
}
h5Z.wxXCkey=1
h5Z.wxXCkey=3
o6Z.wxXCkey=1
c7Z.wxXCkey=1
_(o2Z,c4Z)
}
x1Z.wxXCkey=1
x1Z.wxXCkey=3
o2Z.wxXCkey=1
o2Z.wxXCkey=3
_(bYZ,oZZ)
_(oJV,bYZ)
}
var lKV=_v()
_(fEV,lKV)
if(_oz(z,296,e,s,gg)){lKV.wxVkey=1
var l9Z=_mz(z,'uni-popup',['bind:__l',297,'class',1,'uI',2,'uP',3,'uR',4,'uS',5],[],e,s,gg)
var a0Z=_n('view')
_rz(z,a0Z,'class',303,e,s,gg)
var tA1=_v()
_(a0Z,tA1)
if(_oz(z,304,e,s,gg)){tA1.wxVkey=1
var eB1=_mz(z,'uni-icons',['bind:__l',305,'bindclick',1,'class',2,'uI',3,'uP',4],[],e,s,gg)
_(tA1,eB1)
}
var bC1=_n('view')
_rz(z,bC1,'class',310,e,s,gg)
var oD1=_v()
_(bC1,oD1)
if(_oz(z,311,e,s,gg)){oD1.wxVkey=1
var xE1=_mz(z,'uni-icons',['bind:__l',312,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(oD1,xE1)
}
var oF1=_n('view')
_rz(z,oF1,'class',316,e,s,gg)
var fG1=_v()
_(oF1,fG1)
if(_oz(z,317,e,s,gg)){fG1.wxVkey=1
}
var cH1=_v()
_(oF1,cH1)
if(_oz(z,318,e,s,gg)){cH1.wxVkey=1
}
var hI1=_v()
_(oF1,hI1)
if(_oz(z,319,e,s,gg)){hI1.wxVkey=1
}
fG1.wxXCkey=1
cH1.wxXCkey=1
hI1.wxXCkey=1
_(bC1,oF1)
oD1.wxXCkey=1
oD1.wxXCkey=3
_(a0Z,bC1)
tA1.wxXCkey=1
tA1.wxXCkey=3
_(l9Z,a0Z)
_(lKV,l9Z)
}
var aLV=_v()
_(fEV,aLV)
if(_oz(z,320,e,s,gg)){aLV.wxVkey=1
var oJ1=_mz(z,'view',['bindtap',321,'class',1],[],e,s,gg)
var cK1=_v()
_(oJ1,cK1)
if(_oz(z,323,e,s,gg)){cK1.wxVkey=1
var oL1=_mz(z,'uni-icons',['bind:__l',324,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(cK1,oL1)
}
cK1.wxXCkey=1
cK1.wxXCkey=3
_(aLV,oJ1)
}
cFV.wxXCkey=1
cFV.wxXCkey=3
hGV.wxXCkey=1
hGV.wxXCkey=3
oHV.wxXCkey=1
oHV.wxXCkey=3
cIV.wxXCkey=1
cIV.wxXCkey=3
oJV.wxXCkey=1
oJV.wxXCkey=3
lKV.wxXCkey=1
lKV.wxXCkey=3
aLV.wxXCkey=1
aLV.wxXCkey=3
_(r,fEV)
return r
}
e_[x[17]]={f:m17,j:[],i:[],ti:[],ic:[]}
d_[x[18]]={}
var m18=function(e,s,r,gg){
var z=gz$gwx_19()
var aN1=_n('view')
_rz(z,aN1,'class',0,e,s,gg)
var eP1=_mz(z,'button',['bindtap',1,'class',1],[],e,s,gg)
var bQ1=_v()
_(eP1,bQ1)
if(_oz(z,3,e,s,gg)){bQ1.wxVkey=1
var oR1=_mz(z,'uni-icons',['bind:__l',4,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(bQ1,oR1)
}
bQ1.wxXCkey=1
bQ1.wxXCkey=3
_(aN1,eP1)
var tO1=_v()
_(aN1,tO1)
if(_oz(z,8,e,s,gg)){tO1.wxVkey=1
var xS1=_v()
_(tO1,xS1)
if(_oz(z,9,e,s,gg)){xS1.wxVkey=1
var oT1=_mz(z,'card-data-viewer',['bind:__l',10,'binddataChanged',1,'bindeditCancel',2,'bindeditStart',3,'class',4,'uI',5,'uP',6],[],e,s,gg)
_(xS1,oT1)
}
xS1.wxXCkey=1
xS1.wxXCkey=3
}
else{tO1.wxVkey=2
var fU1=_v()
_(tO1,fU1)
var cV1=function(oX1,hW1,cY1,gg){
var l11=_n('view')
_rz(z,l11,'class',20,oX1,hW1,gg)
var a21=_v()
_(l11,a21)
if(_oz(z,21,oX1,hW1,gg)){a21.wxVkey=1
var b51=_mz(z,'uni-icons',['bind:__l',22,'class',1,'uI',2,'uP',3],[],oX1,hW1,gg)
_(a21,b51)
}
var t31=_v()
_(l11,t31)
if(_oz(z,26,oX1,hW1,gg)){t31.wxVkey=1
var o61=_v()
_(t31,o61)
var x71=function(f91,o81,c01,gg){
var oB2=_mz(z,'button',['bindtap',30,'class',1],[],f91,o81,gg)
var cC2=_v()
_(oB2,cC2)
if(_oz(z,32,f91,o81,gg)){cC2.wxVkey=1
var oD2=_mz(z,'uni-icons',['bind:__l',33,'class',1,'uI',2,'uP',3],[],f91,o81,gg)
_(cC2,oD2)
}
cC2.wxXCkey=1
cC2.wxXCkey=3
_(c01,oB2)
return c01
}
o61.wxXCkey=4
_2z(z,28,x71,oX1,hW1,gg,o61,'block','index','f')
}
var e41=_v()
_(l11,e41)
if(_oz(z,37,oX1,hW1,gg)){e41.wxVkey=1
var lE2=_v()
_(e41,lE2)
if(_oz(z,38,oX1,hW1,gg)){lE2.wxVkey=1
var aF2=_mz(z,'uni-icons',['bind:__l',39,'class',1,'uI',2,'uP',3],[],oX1,hW1,gg)
_(lE2,aF2)
}
lE2.wxXCkey=1
lE2.wxXCkey=3
}
a21.wxXCkey=1
a21.wxXCkey=3
t31.wxXCkey=1
t31.wxXCkey=3
e41.wxXCkey=1
e41.wxXCkey=3
_(cY1,l11)
return cY1
}
fU1.wxXCkey=4
_2z(z,18,cV1,e,s,gg,fU1,'sector','index','k')
}
tO1.wxXCkey=1
tO1.wxXCkey=3
tO1.wxXCkey=3
_(r,aN1)
return r
}
e_[x[18]]={f:m18,j:[],i:[],ti:[],ic:[]}
d_[x[19]]={}
var m19=function(e,s,r,gg){
var z=gz$gwx_20()
var eH2=_n('view')
_rz(z,eH2,'class',0,e,s,gg)
var bI2=_v()
_(eH2,bI2)
if(_oz(z,1,e,s,gg)){bI2.wxVkey=1
var oJ2=_v()
_(bI2,oJ2)
if(_oz(z,2,e,s,gg)){oJ2.wxVkey=1
var xK2=_mz(z,'uni-icons',['bind:__l',3,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(oJ2,xK2)
}
oJ2.wxXCkey=1
oJ2.wxXCkey=3
}
else{bI2.wxVkey=2
var oL2=_n('view')
_rz(z,oL2,'class',7,e,s,gg)
var fM2=_v()
_(oL2,fM2)
if(_oz(z,8,e,s,gg)){fM2.wxVkey=1
var cN2=_v()
_(fM2,cN2)
if(_oz(z,9,e,s,gg)){cN2.wxVkey=1
var hO2=_mz(z,'uni-load-more',['bind:__l',10,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(cN2,hO2)
}
cN2.wxXCkey=1
cN2.wxXCkey=3
}
else if(_oz(z,14,e,s,gg)){fM2.wxVkey=2
var oP2=_n('view')
_rz(z,oP2,'class',15,e,s,gg)
var cQ2=_v()
_(oP2,cQ2)
if(_oz(z,16,e,s,gg)){cQ2.wxVkey=1
var tU2=_mz(z,'uni-icons',['bind:__l',17,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(cQ2,tU2)
}
var oR2=_v()
_(oP2,oR2)
if(_oz(z,21,e,s,gg)){oR2.wxVkey=1
var eV2=_mz(z,'uni-icons',['bind:__l',22,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(oR2,eV2)
}
var bW2=_n('view')
_rz(z,bW2,'class',26,e,s,gg)
var oX2=_v()
_(bW2,oX2)
if(_oz(z,27,e,s,gg)){oX2.wxVkey=1
var h32=_mz(z,'uni-icons',['bind:__l',28,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(oX2,h32)
}
var xY2=_v()
_(bW2,xY2)
if(_oz(z,32,e,s,gg)){xY2.wxVkey=1
var o42=_mz(z,'setting-item',['bind:__l',33,'bindchange',1,'class',2,'uI',3,'uP',4],[],e,s,gg)
_(xY2,o42)
}
var oZ2=_v()
_(bW2,oZ2)
if(_oz(z,38,e,s,gg)){oZ2.wxVkey=1
var c52=_mz(z,'setting-item',['bind:__l',39,'bindchange',1,'class',2,'uI',3,'uP',4],[],e,s,gg)
_(oZ2,c52)
}
var f12=_v()
_(bW2,f12)
if(_oz(z,44,e,s,gg)){f12.wxVkey=1
var o62=_mz(z,'setting-item',['bind:__l',45,'bindchange',1,'class',2,'uI',3,'uP',4],[],e,s,gg)
_(f12,o62)
}
var c22=_v()
_(bW2,c22)
if(_oz(z,50,e,s,gg)){c22.wxVkey=1
var l72=_mz(z,'setting-item',['bind:__l',51,'bindchange',1,'class',2,'uI',3,'uP',4],[],e,s,gg)
_(c22,l72)
}
oX2.wxXCkey=1
oX2.wxXCkey=3
xY2.wxXCkey=1
xY2.wxXCkey=3
oZ2.wxXCkey=1
oZ2.wxXCkey=3
f12.wxXCkey=1
f12.wxXCkey=3
c22.wxXCkey=1
c22.wxXCkey=3
_(oP2,bW2)
var a82=_n('view')
_rz(z,a82,'class',56,e,s,gg)
var t92=_v()
_(a82,t92)
if(_oz(z,57,e,s,gg)){t92.wxVkey=1
var oB3=_mz(z,'uni-icons',['bind:__l',58,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(t92,oB3)
}
var e02=_v()
_(a82,e02)
if(_oz(z,62,e,s,gg)){e02.wxVkey=1
}
var bA3=_v()
_(a82,bA3)
if(_oz(z,63,e,s,gg)){bA3.wxVkey=1
}
t92.wxXCkey=1
t92.wxXCkey=3
e02.wxXCkey=1
bA3.wxXCkey=1
_(oP2,a82)
var lS2=_v()
_(oP2,lS2)
if(_oz(z,64,e,s,gg)){lS2.wxVkey=1
var xC3=_mz(z,'uni-icons',['bind:__l',65,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(lS2,xC3)
}
var oD3=_n('view')
_rz(z,oD3,'class',69,e,s,gg)
var fE3=_v()
_(oD3,fE3)
if(_oz(z,70,e,s,gg)){fE3.wxVkey=1
var hG3=_mz(z,'uni-icons',['bind:__l',71,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(fE3,hG3)
}
var cF3=_v()
_(oD3,cF3)
if(_oz(z,75,e,s,gg)){cF3.wxVkey=1
var oH3=_n('view')
_rz(z,oH3,'class',76,e,s,gg)
var cI3=_mz(z,'button',['bindtap',77,'class',1],[],e,s,gg)
var oJ3=_v()
_(cI3,oJ3)
if(_oz(z,79,e,s,gg)){oJ3.wxVkey=1
var lK3=_mz(z,'uni-icons',['bind:__l',80,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(oJ3,lK3)
}
oJ3.wxXCkey=1
oJ3.wxXCkey=3
_(oH3,cI3)
var aL3=_mz(z,'button',['bindtap',84,'class',1],[],e,s,gg)
var tM3=_v()
_(aL3,tM3)
if(_oz(z,86,e,s,gg)){tM3.wxVkey=1
var eN3=_mz(z,'uni-icons',['bind:__l',87,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(tM3,eN3)
}
tM3.wxXCkey=1
tM3.wxXCkey=3
_(oH3,aL3)
_(cF3,oH3)
}
fE3.wxXCkey=1
fE3.wxXCkey=3
cF3.wxXCkey=1
cF3.wxXCkey=3
_(oP2,oD3)
var aT2=_v()
_(oP2,aT2)
if(_oz(z,91,e,s,gg)){aT2.wxVkey=1
var bO3=_mz(z,'uni-icons',['bind:__l',92,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(aT2,bO3)
}
var oP3=_n('view')
_rz(z,oP3,'class',96,e,s,gg)
var xQ3=_v()
_(oP3,xQ3)
if(_oz(z,97,e,s,gg)){xQ3.wxVkey=1
var oR3=_mz(z,'uni-icons',['bind:__l',98,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(xQ3,oR3)
}
var fS3=_n('view')
_rz(z,fS3,'class',102,e,s,gg)
var cT3=_mz(z,'button',['bindtap',103,'class',1],[],e,s,gg)
var hU3=_v()
_(cT3,hU3)
if(_oz(z,105,e,s,gg)){hU3.wxVkey=1
var oV3=_mz(z,'uni-icons',['bind:__l',106,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(hU3,oV3)
}
hU3.wxXCkey=1
hU3.wxXCkey=3
_(fS3,cT3)
var cW3=_mz(z,'button',['bindtap',110,'class',1],[],e,s,gg)
var oX3=_v()
_(cW3,oX3)
if(_oz(z,112,e,s,gg)){oX3.wxVkey=1
var lY3=_mz(z,'uni-icons',['bind:__l',113,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(oX3,lY3)
}
oX3.wxXCkey=1
oX3.wxXCkey=3
_(fS3,cW3)
_(oP3,fS3)
xQ3.wxXCkey=1
xQ3.wxXCkey=3
_(oP2,oP3)
var aZ3=_mz(z,'button',['bindtap',117,'class',1],[],e,s,gg)
var t13=_v()
_(aZ3,t13)
if(_oz(z,119,e,s,gg)){t13.wxVkey=1
var e23=_mz(z,'uni-icons',['bind:__l',120,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(t13,e23)
}
t13.wxXCkey=1
t13.wxXCkey=3
_(oP2,aZ3)
cQ2.wxXCkey=1
cQ2.wxXCkey=3
oR2.wxXCkey=1
oR2.wxXCkey=3
lS2.wxXCkey=1
lS2.wxXCkey=3
aT2.wxXCkey=1
aT2.wxXCkey=3
_(fM2,oP2)
}
else{fM2.wxVkey=3
var b33=_v()
_(fM2,b33)
if(_oz(z,124,e,s,gg)){b33.wxVkey=1
var o43=_mz(z,'uni-icons',['bind:__l',125,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(b33,o43)
}
b33.wxXCkey=1
b33.wxXCkey=3
}
fM2.wxXCkey=1
fM2.wxXCkey=3
fM2.wxXCkey=3
fM2.wxXCkey=3
_(bI2,oL2)
}
bI2.wxXCkey=1
bI2.wxXCkey=3
bI2.wxXCkey=3
_(r,eH2)
return r
}
e_[x[19]]={f:m19,j:[],i:[],ti:[],ic:[]}
d_[x[20]]={}
var m20=function(e,s,r,gg){
var z=gz$gwx_21()
var o63=_n('view')
_rz(z,o63,'class',0,e,s,gg)
var cA4=_n('view')
_rz(z,cA4,'class',1,e,s,gg)
var tE4=_n('view')
_rz(z,tE4,'class',2,e,s,gg)
var eF4=_mz(z,'button',['bindtap',3,'class',1],[],e,s,gg)
var bG4=_v()
_(eF4,bG4)
if(_oz(z,5,e,s,gg)){bG4.wxVkey=1
var oH4=_mz(z,'uni-icons',['bind:__l',6,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(bG4,oH4)
}
bG4.wxXCkey=1
bG4.wxXCkey=3
_(tE4,eF4)
var xI4=_n('view')
_rz(z,xI4,'class',10,e,s,gg)
var oJ4=_v()
_(xI4,oJ4)
if(_oz(z,11,e,s,gg)){oJ4.wxVkey=1
}
var fK4=_mz(z,'picker',['bindchange',12,'class',1,'mode',2,'range',3,'rangeKey',4,'value',5],[],e,s,gg)
var cL4=_v()
_(fK4,cL4)
if(_oz(z,18,e,s,gg)){cL4.wxVkey=1
var hM4=_mz(z,'uni-icons',['bind:__l',19,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(cL4,hM4)
}
cL4.wxXCkey=1
cL4.wxXCkey=3
_(xI4,fK4)
oJ4.wxXCkey=1
_(tE4,xI4)
_(cA4,tE4)
var oB4=_v()
_(cA4,oB4)
if(_oz(z,23,e,s,gg)){oB4.wxVkey=1
var oN4=_n('view')
_rz(z,oN4,'class',24,e,s,gg)
var cO4=_n('view')
_rz(z,cO4,'class',25,e,s,gg)
var oP4=_v()
_(cO4,oP4)
if(_oz(z,26,e,s,gg)){oP4.wxVkey=1
var aR4=_mz(z,'view',['bindtap',27,'class',1],[],e,s,gg)
var tS4=_v()
_(aR4,tS4)
if(_oz(z,29,e,s,gg)){tS4.wxVkey=1
var eT4=_mz(z,'uni-icons',['bind:__l',30,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(tS4,eT4)
}
tS4.wxXCkey=1
tS4.wxXCkey=3
_(oP4,aR4)
}
var lQ4=_v()
_(cO4,lQ4)
if(_oz(z,34,e,s,gg)){lQ4.wxVkey=1
}
oP4.wxXCkey=1
oP4.wxXCkey=3
lQ4.wxXCkey=1
_(oN4,cO4)
var bU4=_n('view')
_rz(z,bU4,'class',35,e,s,gg)
var oV4=_v()
_(bU4,oV4)
if(_oz(z,36,e,s,gg)){oV4.wxVkey=1
var oX4=_mz(z,'view',['bindtap',37,'class',1],[],e,s,gg)
var fY4=_v()
_(oX4,fY4)
if(_oz(z,39,e,s,gg)){fY4.wxVkey=1
var cZ4=_mz(z,'uni-icons',['bind:__l',40,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(fY4,cZ4)
}
fY4.wxXCkey=1
fY4.wxXCkey=3
_(oV4,oX4)
}
var xW4=_v()
_(bU4,xW4)
if(_oz(z,44,e,s,gg)){xW4.wxVkey=1
}
oV4.wxXCkey=1
oV4.wxXCkey=3
xW4.wxXCkey=1
_(oN4,bU4)
var h14=_n('view')
_rz(z,h14,'class',45,e,s,gg)
var o24=_v()
_(h14,o24)
if(_oz(z,46,e,s,gg)){o24.wxVkey=1
var o44=_mz(z,'view',['bindtap',47,'class',1],[],e,s,gg)
var l54=_v()
_(o44,l54)
if(_oz(z,49,e,s,gg)){l54.wxVkey=1
var a64=_mz(z,'uni-icons',['bind:__l',50,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(l54,a64)
}
l54.wxXCkey=1
l54.wxXCkey=3
_(o24,o44)
}
var c34=_v()
_(h14,c34)
if(_oz(z,54,e,s,gg)){c34.wxVkey=1
}
o24.wxXCkey=1
o24.wxXCkey=3
c34.wxXCkey=1
_(oN4,h14)
var t74=_n('view')
_rz(z,t74,'class',55,e,s,gg)
var e84=_v()
_(t74,e84)
if(_oz(z,56,e,s,gg)){e84.wxVkey=1
var o04=_mz(z,'view',['bindtap',57,'class',1],[],e,s,gg)
var xA5=_v()
_(o04,xA5)
if(_oz(z,59,e,s,gg)){xA5.wxVkey=1
var oB5=_mz(z,'uni-icons',['bind:__l',60,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(xA5,oB5)
}
xA5.wxXCkey=1
xA5.wxXCkey=3
_(e84,o04)
}
var b94=_v()
_(t74,b94)
if(_oz(z,64,e,s,gg)){b94.wxVkey=1
}
e84.wxXCkey=1
e84.wxXCkey=3
b94.wxXCkey=1
_(oN4,t74)
_(oB4,oN4)
}
var lC4=_v()
_(cA4,lC4)
if(_oz(z,65,e,s,gg)){lC4.wxVkey=1
var fC5=_mz(z,'picker',['bindchange',66,'class',1,'mode',2,'range',3,'rangeKey',4,'value',5],[],e,s,gg)
var cD5=_v()
_(fC5,cD5)
if(_oz(z,72,e,s,gg)){cD5.wxVkey=1
var hE5=_mz(z,'uni-icons',['bind:__l',73,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(cD5,hE5)
}
cD5.wxXCkey=1
cD5.wxXCkey=3
_(lC4,fC5)
}
var aD4=_v()
_(cA4,aD4)
if(_oz(z,77,e,s,gg)){aD4.wxVkey=1
var oF5=_mz(z,'button',['bindtap',78,'class',1,'disabled',2],[],e,s,gg)
var cG5=_v()
_(oF5,cG5)
if(_oz(z,81,e,s,gg)){cG5.wxVkey=1
var oH5=_mz(z,'uni-icons',['bind:__l',82,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(cG5,oH5)
}
cG5.wxXCkey=1
cG5.wxXCkey=3
_(aD4,oF5)
}
oB4.wxXCkey=1
oB4.wxXCkey=3
lC4.wxXCkey=1
lC4.wxXCkey=3
aD4.wxXCkey=1
aD4.wxXCkey=3
_(o63,cA4)
var f73=_v()
_(o63,f73)
if(_oz(z,86,e,s,gg)){f73.wxVkey=1
var lI5=_v()
_(f73,lI5)
if(_oz(z,87,e,s,gg)){lI5.wxVkey=1
var aJ5=_mz(z,'uni-load-more',['bind:__l',88,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(lI5,aJ5)
}
lI5.wxXCkey=1
lI5.wxXCkey=3
}
var c83=_v()
_(o63,c83)
if(_oz(z,92,e,s,gg)){c83.wxVkey=1
var tK5=_v()
_(c83,tK5)
if(_oz(z,93,e,s,gg)){tK5.wxVkey=1
var eL5=_mz(z,'uni-icons',['bind:__l',94,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(tK5,eL5)
}
tK5.wxXCkey=1
tK5.wxXCkey=3
}
var h93=_v()
_(o63,h93)
if(_oz(z,98,e,s,gg)){h93.wxVkey=1
var bM5=_mz(z,'uni-popup',['bind:__l',99,'class',1,'uI',2,'uP',3,'uR',4,'uS',5],[],e,s,gg)
var oN5=_n('view')
_rz(z,oN5,'class',105,e,s,gg)
var xO5=_mz(z,'button',['bindtap',106,'class',1],[],e,s,gg)
var oP5=_v()
_(xO5,oP5)
if(_oz(z,108,e,s,gg)){oP5.wxVkey=1
var fQ5=_mz(z,'uni-icons',['bind:__l',109,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(oP5,fQ5)
}
oP5.wxXCkey=1
oP5.wxXCkey=3
_(oN5,xO5)
var cR5=_n('view')
_rz(z,cR5,'class',113,e,s,gg)
var hS5=_v()
_(cR5,hS5)
if(_oz(z,114,e,s,gg)){hS5.wxVkey=1
var oT5=_mz(z,'uni-search-bar',['bind:__l',115,'bindclear',1,'bindinput',2,'bindupdateModelValue',3,'class',4,'uI',5,'uP',6],[],e,s,gg)
_(hS5,oT5)
}
var cU5=_v()
_(cR5,cU5)
var oV5=function(aX5,lW5,tY5,gg){
var b15=_mz(z,'view',['bindtap',125,'class',1],[],aX5,lW5,gg)
var o25=_v()
_(b15,o25)
if(_oz(z,127,aX5,lW5,gg)){o25.wxVkey=1
var o45=_mz(z,'uni-icons',['bind:__l',128,'class',1,'uI',2,'uP',3],[],aX5,lW5,gg)
_(o25,o45)
}
var x35=_v()
_(b15,x35)
if(_oz(z,132,aX5,lW5,gg)){x35.wxVkey=1
}
o25.wxXCkey=1
o25.wxXCkey=3
x35.wxXCkey=1
_(tY5,b15)
return tY5
}
cU5.wxXCkey=4
_2z(z,123,oV5,e,s,gg,cU5,'filter','index','f')
var f55=_n('view')
_rz(z,f55,'class',133,e,s,gg)
var c65=_v()
_(f55,c65)
if(_oz(z,134,e,s,gg)){c65.wxVkey=1
var h75=_n('view')
_rz(z,h75,'class',135,e,s,gg)
var o85=_v()
_(h75,o85)
if(_oz(z,136,e,s,gg)){o85.wxVkey=1
var c95=_mz(z,'uni-icons',['bind:__l',137,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(o85,c95)
}
var o05=_mz(z,'button',['bindtap',141,'class',1],[],e,s,gg)
var lA6=_v()
_(o05,lA6)
if(_oz(z,143,e,s,gg)){lA6.wxVkey=1
var aB6=_mz(z,'uni-icons',['bind:__l',144,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(lA6,aB6)
}
lA6.wxXCkey=1
lA6.wxXCkey=3
_(h75,o05)
o85.wxXCkey=1
o85.wxXCkey=3
_(c65,h75)
}
else{c65.wxVkey=2
var tC6=_v()
_(c65,tC6)
var eD6=function(oF6,bE6,xG6,gg){
var fI6=_mz(z,'view',['bindlongpress',151,'bindtap',1,'class',2],[],oF6,bE6,gg)
var cJ6=_v()
_(fI6,cJ6)
if(_oz(z,154,oF6,bE6,gg)){cJ6.wxVkey=1
var oL6=_mz(z,'uni-icons',['bind:__l',155,'class',1,'uI',2,'uP',3],[],oF6,bE6,gg)
_(cJ6,oL6)
}
var hK6=_v()
_(fI6,hK6)
if(_oz(z,159,oF6,bE6,gg)){hK6.wxVkey=1
}
var cM6=_mz(z,'view',['catchtap',160,'class',1],[],oF6,bE6,gg)
var oN6=_v()
_(cM6,oN6)
if(_oz(z,162,oF6,bE6,gg)){oN6.wxVkey=1
var lO6=_mz(z,'uni-icons',['bind:__l',163,'class',1,'uI',2,'uP',3],[],oF6,bE6,gg)
_(oN6,lO6)
}
oN6.wxXCkey=1
oN6.wxXCkey=3
_(fI6,cM6)
cJ6.wxXCkey=1
cJ6.wxXCkey=3
hK6.wxXCkey=1
_(xG6,fI6)
return xG6
}
tC6.wxXCkey=4
_2z(z,149,eD6,e,s,gg,tC6,'card','index','l')
}
c65.wxXCkey=1
c65.wxXCkey=3
c65.wxXCkey=3
_(cR5,f55)
hS5.wxXCkey=1
hS5.wxXCkey=3
_(oN5,cR5)
_(bM5,oN5)
_(h93,bM5)
}
var o03=_v()
_(o63,o03)
if(_oz(z,167,e,s,gg)){o03.wxVkey=1
var aP6=_mz(z,'uni-popup',['bind:__l',168,'class',1,'uI',2,'uP',3,'uR',4,'uS',5],[],e,s,gg)
var tQ6=_v()
_(aP6,tQ6)
if(_oz(z,174,e,s,gg)){tQ6.wxVkey=1
var eR6=_n('view')
_rz(z,eR6,'class',175,e,s,gg)
var bS6=_mz(z,'button',['bindtap',176,'class',1],[],e,s,gg)
var oT6=_v()
_(bS6,oT6)
if(_oz(z,178,e,s,gg)){oT6.wxVkey=1
var xU6=_mz(z,'uni-icons',['bind:__l',179,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(oT6,xU6)
}
oT6.wxXCkey=1
oT6.wxXCkey=3
_(eR6,bS6)
var oV6=_n('view')
_rz(z,oV6,'class',183,e,s,gg)
var fW6=_v()
_(oV6,fW6)
if(_oz(z,184,e,s,gg)){fW6.wxVkey=1
}
var cX6=_v()
_(oV6,cX6)
if(_oz(z,185,e,s,gg)){cX6.wxVkey=1
}
var hY6=_v()
_(oV6,hY6)
if(_oz(z,186,e,s,gg)){hY6.wxVkey=1
}
var oZ6=_v()
_(oV6,oZ6)
if(_oz(z,187,e,s,gg)){oZ6.wxVkey=1
}
fW6.wxXCkey=1
cX6.wxXCkey=1
hY6.wxXCkey=1
oZ6.wxXCkey=1
_(eR6,oV6)
_(tQ6,eR6)
}
tQ6.wxXCkey=1
tQ6.wxXCkey=3
_(o03,aP6)
}
f73.wxXCkey=1
f73.wxXCkey=3
c83.wxXCkey=1
c83.wxXCkey=3
h93.wxXCkey=1
h93.wxXCkey=3
o03.wxXCkey=1
o03.wxXCkey=3
_(r,o63)
return r
}
e_[x[20]]={f:m20,j:[],i:[],ti:[],ic:[]}
d_[x[21]]={}
var m21=function(e,s,r,gg){
var z=gz$gwx_22()
var o26=_n('view')
_rz(z,o26,'class',0,e,s,gg)
var a46=_n('view')
_rz(z,a46,'class',1,e,s,gg)
var t56=_v()
_(a46,t56)
if(_oz(z,2,e,s,gg)){t56.wxVkey=1
var e66=_n('view')
_rz(z,e66,'class',3,e,s,gg)
var b76=_v()
_(e66,b76)
if(_oz(z,4,e,s,gg)){b76.wxVkey=1
var o86=_mz(z,'uni-icons',['bind:__l',5,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(b76,o86)
}
var x96=_n('view')
_rz(z,x96,'class',9,e,s,gg)
var o06=_v()
_(x96,o06)
if(_oz(z,10,e,s,gg)){o06.wxVkey=1
var cB7=_v()
_(o06,cB7)
if(_oz(z,11,e,s,gg)){cB7.wxVkey=1
var hC7=_mz(z,'uni-icons',['bind:__l',12,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(cB7,hC7)
}
cB7.wxXCkey=1
cB7.wxXCkey=3
}
var fA7=_v()
_(x96,fA7)
if(_oz(z,16,e,s,gg)){fA7.wxVkey=1
var oD7=_v()
_(fA7,oD7)
if(_oz(z,17,e,s,gg)){oD7.wxVkey=1
var cE7=_mz(z,'uni-icons',['bind:__l',18,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(oD7,cE7)
}
oD7.wxXCkey=1
oD7.wxXCkey=3
}
o06.wxXCkey=1
o06.wxXCkey=3
fA7.wxXCkey=1
fA7.wxXCkey=3
_(e66,x96)
b76.wxXCkey=1
b76.wxXCkey=3
_(t56,e66)
}
var oF7=_n('view')
_rz(z,oF7,'class',22,e,s,gg)
var lG7=_mz(z,'button',['bindtap',23,'class',1,'disabled',2],[],e,s,gg)
var aH7=_v()
_(lG7,aH7)
if(_oz(z,26,e,s,gg)){aH7.wxVkey=1
var tI7=_mz(z,'uni-icons',['bind:__l',27,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(aH7,tI7)
}
aH7.wxXCkey=1
aH7.wxXCkey=3
_(oF7,lG7)
var eJ7=_mz(z,'button',['bindtap',31,'class',1,'disabled',2],[],e,s,gg)
var bK7=_v()
_(eJ7,bK7)
if(_oz(z,34,e,s,gg)){bK7.wxVkey=1
var oL7=_mz(z,'uni-icons',['bind:__l',35,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(bK7,oL7)
}
bK7.wxXCkey=1
bK7.wxXCkey=3
_(oF7,eJ7)
var xM7=_mz(z,'button',['bindtap',39,'class',1,'disabled',2],[],e,s,gg)
var oN7=_v()
_(xM7,oN7)
if(_oz(z,42,e,s,gg)){oN7.wxVkey=1
var fO7=_mz(z,'uni-icons',['bind:__l',43,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(oN7,fO7)
}
oN7.wxXCkey=1
oN7.wxXCkey=3
_(oF7,xM7)
_(a46,oF7)
var cP7=_n('view')
_rz(z,cP7,'class',47,e,s,gg)
var hQ7=_v()
_(cP7,hQ7)
if(_oz(z,48,e,s,gg)){hQ7.wxVkey=1
var oR7=_v()
_(hQ7,oR7)
if(_oz(z,49,e,s,gg)){oR7.wxVkey=1
var cS7=_mz(z,'uni-load-more',['bind:__l',50,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(oR7,cS7)
}
oR7.wxXCkey=1
oR7.wxXCkey=3
}
else{hQ7.wxVkey=2
var oT7=_v()
_(hQ7,oT7)
var lU7=function(tW7,aV7,eX7,gg){
var oZ7=_mz(z,'view',['bindtap',57,'class',1],[],tW7,aV7,gg)
var c47=_n('view')
_rz(z,c47,'class',59,tW7,aV7,gg)
var h57=_n('view')
_rz(z,h57,'class',60,tW7,aV7,gg)
var o67=_v()
_(h57,o67)
if(_oz(z,61,tW7,aV7,gg)){o67.wxVkey=1
var c77=_v()
_(o67,c77)
if(_oz(z,62,tW7,aV7,gg)){c77.wxVkey=1
var o87=_mz(z,'uni-icons',['bind:__l',63,'class',1,'uI',2,'uP',3],[],tW7,aV7,gg)
_(c77,o87)
}
c77.wxXCkey=1
c77.wxXCkey=3
}
else if(_oz(z,67,tW7,aV7,gg)){o67.wxVkey=2
}
else{o67.wxVkey=3
}
o67.wxXCkey=1
o67.wxXCkey=3
_(c47,h57)
var l97=_mz(z,'view',['catchtap',68,'class',1],[],tW7,aV7,gg)
var a07=_v()
_(l97,a07)
if(_oz(z,70,tW7,aV7,gg)){a07.wxVkey=1
var tA8=_mz(z,'uni-icons',['bind:__l',71,'class',1,'uI',2,'uP',3],[],tW7,aV7,gg)
_(a07,tA8)
}
a07.wxXCkey=1
a07.wxXCkey=3
_(c47,l97)
_(oZ7,c47)
var x17=_v()
_(oZ7,x17)
if(_oz(z,75,tW7,aV7,gg)){x17.wxVkey=1
var eB8=_n('view')
_rz(z,eB8,'class',76,tW7,aV7,gg)
var bC8=_v()
_(eB8,bC8)
if(_oz(z,77,tW7,aV7,gg)){bC8.wxVkey=1
var oD8=_mz(z,'uni-icons',['bind:__l',78,'class',1,'uI',2,'uP',3],[],tW7,aV7,gg)
_(bC8,oD8)
}
var xE8=_mz(z,'view',['catchtap',82,'class',1],[],tW7,aV7,gg)
var oF8=_v()
_(xE8,oF8)
if(_oz(z,84,tW7,aV7,gg)){oF8.wxVkey=1
var fG8=_mz(z,'uni-icons',['bind:__l',85,'class',1,'uI',2,'uP',3],[],tW7,aV7,gg)
_(oF8,fG8)
}
oF8.wxXCkey=1
oF8.wxXCkey=3
_(eB8,xE8)
bC8.wxXCkey=1
bC8.wxXCkey=3
_(x17,eB8)
}
var o27=_v()
_(oZ7,o27)
if(_oz(z,89,tW7,aV7,gg)){o27.wxVkey=1
var cH8=_n('view')
_rz(z,cH8,'class',90,tW7,aV7,gg)
var hI8=_v()
_(cH8,hI8)
if(_oz(z,91,tW7,aV7,gg)){hI8.wxVkey=1
var oJ8=_mz(z,'uni-icons',['bind:__l',92,'class',1,'uI',2,'uP',3],[],tW7,aV7,gg)
_(hI8,oJ8)
}
var cK8=_mz(z,'view',['catchtap',96,'class',1],[],tW7,aV7,gg)
var oL8=_v()
_(cK8,oL8)
if(_oz(z,98,tW7,aV7,gg)){oL8.wxVkey=1
var lM8=_mz(z,'uni-icons',['bind:__l',99,'class',1,'uI',2,'uP',3],[],tW7,aV7,gg)
_(oL8,lM8)
}
oL8.wxXCkey=1
oL8.wxXCkey=3
_(cH8,cK8)
hI8.wxXCkey=1
hI8.wxXCkey=3
_(o27,cH8)
}
var f37=_v()
_(oZ7,f37)
if(_oz(z,103,tW7,aV7,gg)){f37.wxVkey=1
var aN8=_mz(z,'view',['catchtap',104,'class',1],[],tW7,aV7,gg)
var tO8=_v()
_(aN8,tO8)
if(_oz(z,106,tW7,aV7,gg)){tO8.wxVkey=1
var eP8=_mz(z,'uni-icons',['bind:__l',107,'class',1,'uI',2,'uP',3],[],tW7,aV7,gg)
_(tO8,eP8)
}
tO8.wxXCkey=1
tO8.wxXCkey=3
_(f37,aN8)
}
x17.wxXCkey=1
x17.wxXCkey=3
o27.wxXCkey=1
o27.wxXCkey=3
f37.wxXCkey=1
f37.wxXCkey=3
_(eX7,oZ7)
return eX7
}
oT7.wxXCkey=4
_2z(z,55,lU7,e,s,gg,oT7,'slot','index','N')
}
hQ7.wxXCkey=1
hQ7.wxXCkey=3
hQ7.wxXCkey=3
_(a46,cP7)
t56.wxXCkey=1
t56.wxXCkey=3
_(o26,a46)
var l36=_v()
_(o26,l36)
if(_oz(z,111,e,s,gg)){l36.wxVkey=1
var bQ8=_mz(z,'view',['bindtap',112,'class',1],[],e,s,gg)
var oR8=_mz(z,'view',['catchtap',114,'class',1],[],e,s,gg)
var xS8=_mz(z,'button',['bindtap',116,'class',1],[],e,s,gg)
var oT8=_v()
_(xS8,oT8)
if(_oz(z,118,e,s,gg)){oT8.wxVkey=1
var fU8=_mz(z,'uni-icons',['bind:__l',119,'class',1,'uI',2,'uP',3],[],e,s,gg)
_(oT8,fU8)
}
oT8.wxXCkey=1
oT8.wxXCkey=3
_(oR8,xS8)
_(bQ8,oR8)
_(l36,bQ8)
}
l36.wxXCkey=1
l36.wxXCkey=3
_(r,o26)
return r
}
e_[x[21]]={f:m21,j:[],i:[],ti:[],ic:[]}
if(path&&e_[path]){
return function(env,dd,global){$gwxc=0;var root={"tag":"wx-page"};root.children=[]
var main=e_[path].f
if (typeof global==="undefined")global={};global.f=$gdc(f_[path],"",1);
try{
main(env,{},root,global);
_tsd(root)
}catch(err){
console.log(err)
}
return root;
}
}
}
	__wxAppCode__['app.json'] = {"pages":["pages/connect/connect","pages/home/home","pages/slots/slots","pages/slot-edit/slot-edit","pages/cards/cards","pages/card-detail/card-detail","pages/card-select/card-select","pages/reader/reader","pages/card-write/card-write","pages/sector-details/sector-details","pages/settings/settings","pages/firmware/firmware","pages/geofence/geofence","pages/geofence-edit/geofence-edit"],"window":{"navigationBarTextStyle":"black","navigationBarTitleText":"ChameleonUltra","navigationBarBackgroundColor":"#ffffff","backgroundColor":"#f8f8f8","backgroundTextStyle":"dark","enablePullDownRefresh":false},"tabBar":{"color":"#666666","selectedColor":"#007AFF","backgroundColor":"#ffffff","borderStyle":"black","list":[{"pagePath":"pages/connect/connect","iconPath":"static/icons/connect.png","selectedIconPath":"static/icons/connect-active.png","text":"连接"},{"pagePath":"pages/home/home","iconPath":"static/icons/home.png","selectedIconPath":"static/icons/home-active.png","text":"设备"},{"pagePath":"pages/slots/slots","iconPath":"static/icons/slots.png","selectedIconPath":"static/icons/slots-active.png","text":"卡槽"},{"pagePath":"pages/cards/cards","iconPath":"static/icons/cards.png","selectedIconPath":"static/icons/cards-active.png","text":"卡包"},{"pagePath":"pages/reader/reader","iconPath":"static/icons/reader.png","selectedIconPath":"static/icons/reader-active.png","text":"读卡"}]},"permission":{"scope.userLocation":{"desc":"电子围栏功能需要获取您的位置信息用于自动切换卡槽"}},"requiredPrivateInfos":["getLocation"],"usingComponents":{}};
		if (__vd_version_info__.delayedGwx) __wxAppCode__['app.wxml'] = [$gwx, './app.wxml'];else __wxAppCode__['app.wxml'] = $gwx( './app.wxml' );
		__wxAppCode__['components/card-data-viewer/card-data-viewer.json'] = {"component":true,"usingComponents":{"uni-icons":"../../node-modules/@dcloudio/uni-ui/lib/uni-icons/uni-icons","uni-popup":"../../node-modules/@dcloudio/uni-ui/lib/uni-popup/uni-popup"}};
		if (__vd_version_info__.delayedGwx) __wxAppCode__['components/card-data-viewer/card-data-viewer.wxml'] = [$gwx, './components/card-data-viewer/card-data-viewer.wxml'];else __wxAppCode__['components/card-data-viewer/card-data-viewer.wxml'] = $gwx( './components/card-data-viewer/card-data-viewer.wxml' );
		__wxAppCode__['components/setting-item.json'] = {"component":true,"usingComponents":{"uni-icons":"../node-modules/@dcloudio/uni-ui/lib/uni-icons/uni-icons"}};
		if (__vd_version_info__.delayedGwx) __wxAppCode__['components/setting-item.wxml'] = [$gwx, './components/setting-item.wxml'];else __wxAppCode__['components/setting-item.wxml'] = $gwx( './components/setting-item.wxml' );
		__wxAppCode__['node-modules/@dcloudio/uni-ui/lib/uni-icons/uni-icons.json'] = {"component":true,"usingComponents":{}};
		if (__vd_version_info__.delayedGwx) __wxAppCode__['node-modules/@dcloudio/uni-ui/lib/uni-icons/uni-icons.wxml'] = [$gwx, './node-modules/@dcloudio/uni-ui/lib/uni-icons/uni-icons.wxml'];else __wxAppCode__['node-modules/@dcloudio/uni-ui/lib/uni-icons/uni-icons.wxml'] = $gwx( './node-modules/@dcloudio/uni-ui/lib/uni-icons/uni-icons.wxml' );
		__wxAppCode__['node-modules/@dcloudio/uni-ui/lib/uni-load-more/uni-load-more.json'] = {"component":true,"usingComponents":{}};
		if (__vd_version_info__.delayedGwx) __wxAppCode__['node-modules/@dcloudio/uni-ui/lib/uni-load-more/uni-load-more.wxml'] = [$gwx, './node-modules/@dcloudio/uni-ui/lib/uni-load-more/uni-load-more.wxml'];else __wxAppCode__['node-modules/@dcloudio/uni-ui/lib/uni-load-more/uni-load-more.wxml'] = $gwx( './node-modules/@dcloudio/uni-ui/lib/uni-load-more/uni-load-more.wxml' );
		__wxAppCode__['node-modules/@dcloudio/uni-ui/lib/uni-popup-dialog/uni-popup-dialog.json'] = {"component":true,"usingComponents":{}};
		if (__vd_version_info__.delayedGwx) __wxAppCode__['node-modules/@dcloudio/uni-ui/lib/uni-popup-dialog/uni-popup-dialog.wxml'] = [$gwx, './node-modules/@dcloudio/uni-ui/lib/uni-popup-dialog/uni-popup-dialog.wxml'];else __wxAppCode__['node-modules/@dcloudio/uni-ui/lib/uni-popup-dialog/uni-popup-dialog.wxml'] = $gwx( './node-modules/@dcloudio/uni-ui/lib/uni-popup-dialog/uni-popup-dialog.wxml' );
		__wxAppCode__['node-modules/@dcloudio/uni-ui/lib/uni-popup/uni-popup.json'] = {"component":true,"usingComponents":{"uni-transition":"../uni-transition/uni-transition"}};
		if (__vd_version_info__.delayedGwx) __wxAppCode__['node-modules/@dcloudio/uni-ui/lib/uni-popup/uni-popup.wxml'] = [$gwx, './node-modules/@dcloudio/uni-ui/lib/uni-popup/uni-popup.wxml'];else __wxAppCode__['node-modules/@dcloudio/uni-ui/lib/uni-popup/uni-popup.wxml'] = $gwx( './node-modules/@dcloudio/uni-ui/lib/uni-popup/uni-popup.wxml' );
		__wxAppCode__['node-modules/@dcloudio/uni-ui/lib/uni-search-bar/uni-search-bar.json'] = {"component":true,"usingComponents":{"uni-icons":"../uni-icons/uni-icons"}};
		if (__vd_version_info__.delayedGwx) __wxAppCode__['node-modules/@dcloudio/uni-ui/lib/uni-search-bar/uni-search-bar.wxml'] = [$gwx, './node-modules/@dcloudio/uni-ui/lib/uni-search-bar/uni-search-bar.wxml'];else __wxAppCode__['node-modules/@dcloudio/uni-ui/lib/uni-search-bar/uni-search-bar.wxml'] = $gwx( './node-modules/@dcloudio/uni-ui/lib/uni-search-bar/uni-search-bar.wxml' );
		__wxAppCode__['node-modules/@dcloudio/uni-ui/lib/uni-transition/uni-transition.json'] = {"component":true,"usingComponents":{}};
		if (__vd_version_info__.delayedGwx) __wxAppCode__['node-modules/@dcloudio/uni-ui/lib/uni-transition/uni-transition.wxml'] = [$gwx, './node-modules/@dcloudio/uni-ui/lib/uni-transition/uni-transition.wxml'];else __wxAppCode__['node-modules/@dcloudio/uni-ui/lib/uni-transition/uni-transition.wxml'] = $gwx( './node-modules/@dcloudio/uni-ui/lib/uni-transition/uni-transition.wxml' );
		__wxAppCode__['pages/card-detail/card-detail.json'] = {"navigationBarTitleText":"卡片详情","backgroundColor":"#f8f8f8","usingComponents":{"card-data-viewer":"../../components/card-data-viewer/card-data-viewer","uni-icons":"../../node-modules/@dcloudio/uni-ui/lib/uni-icons/uni-icons"}};
		if (__vd_version_info__.delayedGwx) __wxAppCode__['pages/card-detail/card-detail.wxml'] = [$gwx, './pages/card-detail/card-detail.wxml'];else __wxAppCode__['pages/card-detail/card-detail.wxml'] = $gwx( './pages/card-detail/card-detail.wxml' );
		__wxAppCode__['pages/card-select/card-select.json'] = {"navigationBarTitleText":"选择卡片","backgroundColor":"#f8f8f8","usingComponents":{"uni-search-bar":"../../node-modules/@dcloudio/uni-ui/lib/uni-search-bar/uni-search-bar","uni-icons":"../../node-modules/@dcloudio/uni-ui/lib/uni-icons/uni-icons","uni-popup":"../../node-modules/@dcloudio/uni-ui/lib/uni-popup/uni-popup"}};
		if (__vd_version_info__.delayedGwx) __wxAppCode__['pages/card-select/card-select.wxml'] = [$gwx, './pages/card-select/card-select.wxml'];else __wxAppCode__['pages/card-select/card-select.wxml'] = $gwx( './pages/card-select/card-select.wxml' );
		__wxAppCode__['pages/card-write/card-write.json'] = {"navigationBarTitleText":"写卡功能","backgroundColor":"#f8f8f8","usingComponents":{"uni-icons":"../../node-modules/@dcloudio/uni-ui/lib/uni-icons/uni-icons","uni-popup":"../../node-modules/@dcloudio/uni-ui/lib/uni-popup/uni-popup"}};
		if (__vd_version_info__.delayedGwx) __wxAppCode__['pages/card-write/card-write.wxml'] = [$gwx, './pages/card-write/card-write.wxml'];else __wxAppCode__['pages/card-write/card-write.wxml'] = $gwx( './pages/card-write/card-write.wxml' );
		__wxAppCode__['pages/cards/cards.json'] = {"navigationBarTitleText":"卡包管理","backgroundColor":"#f8f8f8","usingComponents":{"uni-icons":"../../node-modules/@dcloudio/uni-ui/lib/uni-icons/uni-icons"}};
		if (__vd_version_info__.delayedGwx) __wxAppCode__['pages/cards/cards.wxml'] = [$gwx, './pages/cards/cards.wxml'];else __wxAppCode__['pages/cards/cards.wxml'] = $gwx( './pages/cards/cards.wxml' );
		__wxAppCode__['pages/connect/connect.json'] = {"navigationBarTitleText":"设备连接","backgroundColor":"#f8f8f8","usingComponents":{"uni-icons":"../../node-modules/@dcloudio/uni-ui/lib/uni-icons/uni-icons","uni-load-more":"../../node-modules/@dcloudio/uni-ui/lib/uni-load-more/uni-load-more","uni-popup-dialog":"../../node-modules/@dcloudio/uni-ui/lib/uni-popup-dialog/uni-popup-dialog","uni-popup":"../../node-modules/@dcloudio/uni-ui/lib/uni-popup/uni-popup"}};
		if (__vd_version_info__.delayedGwx) __wxAppCode__['pages/connect/connect.wxml'] = [$gwx, './pages/connect/connect.wxml'];else __wxAppCode__['pages/connect/connect.wxml'] = $gwx( './pages/connect/connect.wxml' );
		__wxAppCode__['pages/firmware/firmware.json'] = {"navigationBarTitleText":"固件更新","backgroundColor":"#f8f8f8","usingComponents":{"uni-icons":"../../node-modules/@dcloudio/uni-ui/lib/uni-icons/uni-icons","uni-popup-dialog":"../../node-modules/@dcloudio/uni-ui/lib/uni-popup-dialog/uni-popup-dialog","uni-popup":"../../node-modules/@dcloudio/uni-ui/lib/uni-popup/uni-popup"}};
		if (__vd_version_info__.delayedGwx) __wxAppCode__['pages/firmware/firmware.wxml'] = [$gwx, './pages/firmware/firmware.wxml'];else __wxAppCode__['pages/firmware/firmware.wxml'] = $gwx( './pages/firmware/firmware.wxml' );
		__wxAppCode__['pages/geofence-edit/geofence-edit.json'] = {"navigationBarTitleText":"编辑围栏","backgroundColor":"#f8f8f8","usingComponents":{"uni-icons":"../../node-modules/@dcloudio/uni-ui/lib/uni-icons/uni-icons","uni-popup":"../../node-modules/@dcloudio/uni-ui/lib/uni-popup/uni-popup"}};
		if (__vd_version_info__.delayedGwx) __wxAppCode__['pages/geofence-edit/geofence-edit.wxml'] = [$gwx, './pages/geofence-edit/geofence-edit.wxml'];else __wxAppCode__['pages/geofence-edit/geofence-edit.wxml'] = $gwx( './pages/geofence-edit/geofence-edit.wxml' );
		__wxAppCode__['pages/geofence/geofence.json'] = {"navigationBarTitleText":"电子围栏","backgroundColor":"#f8f8f8","usingComponents":{"uni-icons":"../../node-modules/@dcloudio/uni-ui/lib/uni-icons/uni-icons","uni-popup-dialog":"../../node-modules/@dcloudio/uni-ui/lib/uni-popup-dialog/uni-popup-dialog","uni-popup":"../../node-modules/@dcloudio/uni-ui/lib/uni-popup/uni-popup"}};
		if (__vd_version_info__.delayedGwx) __wxAppCode__['pages/geofence/geofence.wxml'] = [$gwx, './pages/geofence/geofence.wxml'];else __wxAppCode__['pages/geofence/geofence.wxml'] = $gwx( './pages/geofence/geofence.wxml' );
		__wxAppCode__['pages/home/home.json'] = {"navigationBarTitleText":"设备信息","backgroundColor":"#f8f8f8","usingComponents":{"uni-icons":"../../node-modules/@dcloudio/uni-ui/lib/uni-icons/uni-icons"}};
		if (__vd_version_info__.delayedGwx) __wxAppCode__['pages/home/home.wxml'] = [$gwx, './pages/home/home.wxml'];else __wxAppCode__['pages/home/home.wxml'] = $gwx( './pages/home/home.wxml' );
		__wxAppCode__['pages/reader/reader.json'] = {"navigationBarTitleText":"读卡功能","backgroundColor":"#f8f8f8","usingComponents":{"uni-icons":"../../node-modules/@dcloudio/uni-ui/lib/uni-icons/uni-icons","uni-popup":"../../node-modules/@dcloudio/uni-ui/lib/uni-popup/uni-popup"}};
		if (__vd_version_info__.delayedGwx) __wxAppCode__['pages/reader/reader.wxml'] = [$gwx, './pages/reader/reader.wxml'];else __wxAppCode__['pages/reader/reader.wxml'] = $gwx( './pages/reader/reader.wxml' );
		__wxAppCode__['pages/sector-details/sector-details.json'] = {"navigationBarTitleText":"扇区详情","backgroundColor":"#f5f5f5","navigationBarBackgroundColor":"#ffffff","navigationBarTextStyle":"black","usingComponents":{"card-data-viewer":"../../components/card-data-viewer/card-data-viewer","uni-icons":"../../node-modules/@dcloudio/uni-ui/lib/uni-icons/uni-icons"}};
		if (__vd_version_info__.delayedGwx) __wxAppCode__['pages/sector-details/sector-details.wxml'] = [$gwx, './pages/sector-details/sector-details.wxml'];else __wxAppCode__['pages/sector-details/sector-details.wxml'] = $gwx( './pages/sector-details/sector-details.wxml' );
		__wxAppCode__['pages/settings/settings.json'] = {"navigationBarTitleText":"设备设置","backgroundColor":"#f8f8f8","usingComponents":{"setting-item":"../../components/setting-item","uni-icons":"../../node-modules/@dcloudio/uni-ui/lib/uni-icons/uni-icons","uni-load-more":"../../node-modules/@dcloudio/uni-ui/lib/uni-load-more/uni-load-more"}};
		if (__vd_version_info__.delayedGwx) __wxAppCode__['pages/settings/settings.wxml'] = [$gwx, './pages/settings/settings.wxml'];else __wxAppCode__['pages/settings/settings.wxml'] = $gwx( './pages/settings/settings.wxml' );
		__wxAppCode__['pages/slot-edit/slot-edit.json'] = {"navigationBarTitleText":"编辑卡槽","backgroundColor":"#f8f8f8","usingComponents":{"uni-icons":"../../node-modules/@dcloudio/uni-ui/lib/uni-icons/uni-icons","uni-load-more":"../../node-modules/@dcloudio/uni-ui/lib/uni-load-more/uni-load-more","uni-search-bar":"../../node-modules/@dcloudio/uni-ui/lib/uni-search-bar/uni-search-bar","uni-popup":"../../node-modules/@dcloudio/uni-ui/lib/uni-popup/uni-popup"}};
		if (__vd_version_info__.delayedGwx) __wxAppCode__['pages/slot-edit/slot-edit.wxml'] = [$gwx, './pages/slot-edit/slot-edit.wxml'];else __wxAppCode__['pages/slot-edit/slot-edit.wxml'] = $gwx( './pages/slot-edit/slot-edit.wxml' );
		__wxAppCode__['pages/slots/slots.json'] = {"navigationBarTitleText":"卡槽管理","backgroundColor":"#f8f8f8","usingComponents":{"uni-icons":"../../node-modules/@dcloudio/uni-ui/lib/uni-icons/uni-icons","uni-load-more":"../../node-modules/@dcloudio/uni-ui/lib/uni-load-more/uni-load-more"}};
		if (__vd_version_info__.delayedGwx) __wxAppCode__['pages/slots/slots.wxml'] = [$gwx, './pages/slots/slots.wxml'];else __wxAppCode__['pages/slots/slots.wxml'] = $gwx( './pages/slots/slots.wxml' );
		__wxAppCode__['project.config.json'] = {"miniprogramRoot":"","__compileDebugInfo__":{"useSummer":true}};
		if (__vd_version_info__.delayedGwx) __wxAppCode__['project.config.wxml'] = [$gwx, './project.config.wxml'];else __wxAppCode__['project.config.wxml'] = $gwx( './project.config.wxml' );
	
	define("@babel/runtime/helpers/Arrayincludes.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(r,e){if(null==this)throw new TypeError('"this" is null or not defined');var t=Object(this),n=t.length>>>0;if(0==n)return!1;for(var i,o,a=0|e,u=Math.max(0<=a?a:n-Math.abs(a),0);u<n;){if((i=t[u])===(o=r)||"number"==typeof i&&"number"==typeof o&&isNaN(i)&&isNaN(o))return!0;u++}return!1}}); 
 			}); 
		define("@babel/runtime/helpers/arrayLikeToArray.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
function _arrayLikeToArray(r,a){(null==a||a>r.length)&&(a=r.length);for(var e=0,n=new Array(a);e<a;e++)n[e]=r[e];return n}module.exports=_arrayLikeToArray; 
 			}); 
		define("@babel/runtime/helpers/arrayWithHoles.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
function _arrayWithHoles(r){if(Array.isArray(r))return r}module.exports=_arrayWithHoles; 
 			}); 
		define("@babel/runtime/helpers/arrayWithoutHoles.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
var arrayLikeToArray=require("./arrayLikeToArray");function _arrayWithoutHoles(r){if(Array.isArray(r))return arrayLikeToArray(r)}module.exports=_arrayWithoutHoles; 
 			}); 
		define("@babel/runtime/helpers/assertThisInitialized.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}module.exports=_assertThisInitialized; 
 			}); 
		define("@babel/runtime/helpers/asyncToGenerator.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
function asyncGeneratorStep(n,e,r,t,o,a,c){try{var i=n[a](c),u=i.value}catch(n){return void r(n)}i.done?e(u):Promise.resolve(u).then(t,o)}function _asyncToGenerator(n){return function(){var e=this,r=arguments;return new Promise((function(t,o){var a=n.apply(e,r);function c(n){asyncGeneratorStep(a,t,o,c,i,"next",n)}function i(n){asyncGeneratorStep(a,t,o,c,i,"throw",n)}c(void 0)}))}}module.exports=_asyncToGenerator; 
 			}); 
		define("@babel/runtime/helpers/classCallCheck.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
function _classCallCheck(a,l){if(!(a instanceof l))throw new TypeError("Cannot call a class as a function")}module.exports=_classCallCheck; 
 			}); 
		define("@babel/runtime/helpers/createClass.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
var toPropertyKey=require("./toPropertyKey");function _defineProperties(e,r){for(var t=0;t<r.length;t++){var o=r[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,toPropertyKey(o.key),o)}}function _createClass(e,r,t){return r&&_defineProperties(e.prototype,r),t&&_defineProperties(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e}module.exports=_createClass; 
 			}); 
		define("@babel/runtime/helpers/createForOfIteratorHelper.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
var unsupportedIterableToArray=require("./unsupportedIterableToArray");function _createForOfIteratorHelper(r,e){var t="undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(!t){if(Array.isArray(r)||(t=unsupportedIterableToArray(r))||e&&r&&"number"==typeof r.length){t&&(r=t);var n=0,o=function(){};return{s:o,n:function(){return n>=r.length?{done:!0}:{done:!1,value:r[n++]}},e:function(r){throw r},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,u=!0,i=!1;return{s:function(){t=t.call(r)},n:function(){var r=t.next();return u=r.done,r},e:function(r){i=!0,a=r},f:function(){try{u||null==t.return||t.return()}finally{if(i)throw a}}}}module.exports=_createForOfIteratorHelper; 
 			}); 
		define("@babel/runtime/helpers/createSuper.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
var getPrototypeOf=require("./getPrototypeOf"),isNativeReflectConstruct=require("./isNativeReflectConstruct"),possibleConstructorReturn=require("./possibleConstructorReturn");function _createSuper(t){var e=isNativeReflectConstruct();return function(){var r,o=getPrototypeOf(t);if(e){var s=getPrototypeOf(this).constructor;r=Reflect.construct(o,arguments,s)}else r=o.apply(this,arguments);return possibleConstructorReturn(this,r)}}module.exports=_createSuper; 
 			}); 
		define("@babel/runtime/helpers/defineProperty.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
var toPropertyKey=require("./toPropertyKey");function _defineProperty(e,r,t){return(r=toPropertyKey(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}module.exports=_defineProperty; 
 			}); 
		define("@babel/runtime/helpers/getPrototypeOf.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
function _getPrototypeOf(t){return module.exports=_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},_getPrototypeOf(t)}module.exports=_getPrototypeOf; 
 			}); 
		define("@babel/runtime/helpers/inherits.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
var setPrototypeOf=require("./setPrototypeOf");function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&setPrototypeOf(e,t)}module.exports=_inherits; 
 			}); 
		define("@babel/runtime/helpers/isNativeReflectConstruct.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}module.exports=_isNativeReflectConstruct; 
 			}); 
		define("@babel/runtime/helpers/iterableToArray.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
function _iterableToArray(r){if("undefined"!=typeof Symbol&&null!=r[Symbol.iterator]||null!=r["@@iterator"])return Array.from(r)}module.exports=_iterableToArray; 
 			}); 
		define("@babel/runtime/helpers/iterableToArrayLimit.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
function _iterableToArrayLimit(r,e){var l=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=l){var t,n,i,a,u=[],o=!0,f=!1;try{if(i=(l=l.call(r)).next,0===e){if(Object(l)!==l)return;o=!1}else for(;!(o=(t=i.call(l)).done)&&(u.push(t.value),u.length!==e);o=!0);}catch(r){f=!0,n=r}finally{try{if(!o&&null!=l.return&&(a=l.return(),Object(a)!==a))return}finally{if(f)throw n}}return u}}module.exports=_iterableToArrayLimit; 
 			}); 
		define("@babel/runtime/helpers/nonIterableRest.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}module.exports=_nonIterableRest; 
 			}); 
		define("@babel/runtime/helpers/nonIterableSpread.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}module.exports=_nonIterableSpread; 
 			}); 
		define("@babel/runtime/helpers/objectDestructuringEmpty.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
function _objectDestructuringEmpty(t){if(null==t)throw new TypeError("Cannot destructure "+t)}module.exports=_objectDestructuringEmpty; 
 			}); 
		define("@babel/runtime/helpers/objectSpread2.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
var defineProperty=require("./defineProperty");function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function _objectSpread2(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach((function(r){defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}module.exports=_objectSpread2; 
 			}); 
		define("@babel/runtime/helpers/objectWithoutProperties.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
var objectWithoutPropertiesLoose=require("./objectWithoutPropertiesLoose");function _objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=objectWithoutPropertiesLoose(e,t);if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(e);for(r=0;r<p.length;r++)o=p[r],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}module.exports=_objectWithoutProperties; 
 			}); 
		define("@babel/runtime/helpers/objectWithoutPropertiesLoose.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
function _objectWithoutPropertiesLoose(e,o){if(null==e)return{};var t,r,i={},n=Object.keys(e);for(r=0;r<n.length;r++)t=n[r],o.indexOf(t)>=0||(i[t]=e[t]);return i}module.exports=_objectWithoutPropertiesLoose; 
 			}); 
		define("@babel/runtime/helpers/possibleConstructorReturn.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
var _typeof=require("./typeof"),assertThisInitialized=require("./assertThisInitialized");function _possibleConstructorReturn(e,r){if(r&&("object"===_typeof(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return assertThisInitialized(e)}module.exports=_possibleConstructorReturn; 
 			}); 
		define("@babel/runtime/helpers/regeneratorRuntime.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
var t=require("./typeof");function r(){module.exports=r=function(){return e},module.exports.__esModule=!0,module.exports.default=module.exports;var e={},n=Object.prototype,o=n.hasOwnProperty,i=Object.defineProperty||function(t,r,e){t[r]=e.value},a="function"==typeof Symbol?Symbol:{},c=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function h(t,r,e){return Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{h({},"")}catch(t){h=function(t,r,e){return t[r]=e}}function f(t,r,e,n){var o=r&&r.prototype instanceof d?r:d,a=Object.create(o.prototype),c=new k(n||[]);return i(a,"_invoke",{value:E(t,e,c)}),a}function s(t,r,e){try{return{type:"normal",arg:t.call(r,e)}}catch(t){return{type:"throw",arg:t}}}e.wrap=f;var p={};function d(){}function v(){}function y(){}var g={};h(g,c,(function(){return this}));var m=Object.getPrototypeOf,w=m&&m(m(G([])));w&&w!==n&&o.call(w,c)&&(g=w);var x=y.prototype=d.prototype=Object.create(g);function L(t){["next","throw","return"].forEach((function(r){h(t,r,(function(t){return this._invoke(r,t)}))}))}function b(r,e){function n(i,a,c,u){var l=s(r[i],r,a);if("throw"!==l.type){var h=l.arg,f=h.value;return f&&"object"==t(f)&&o.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,c,u)}),(function(t){n("throw",t,c,u)})):e.resolve(f).then((function(t){h.value=t,c(h)}),(function(t){return n("throw",t,c,u)}))}u(l.arg)}var a;i(this,"_invoke",{value:function(t,r){function o(){return new e((function(e,o){n(t,r,e,o)}))}return a=a?a.then(o,o):o()}})}function E(t,r,e){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return N()}for(e.method=o,e.arg=i;;){var a=e.delegate;if(a){var c=_(a,e);if(c){if(c===p)continue;return c}}if("next"===e.method)e.sent=e._sent=e.arg;else if("throw"===e.method){if("suspendedStart"===n)throw n="completed",e.arg;e.dispatchException(e.arg)}else"return"===e.method&&e.abrupt("return",e.arg);n="executing";var u=s(t,r,e);if("normal"===u.type){if(n=e.done?"completed":"suspendedYield",u.arg===p)continue;return{value:u.arg,done:e.done}}"throw"===u.type&&(n="completed",e.method="throw",e.arg=u.arg)}}}function _(t,r){var e=r.method,n=t.iterator[e];if(void 0===n)return r.delegate=null,"throw"===e&&t.iterator.return&&(r.method="return",r.arg=void 0,_(t,r),"throw"===r.method)||"return"!==e&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+e+"' method")),p;var o=s(n,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,p;var i=o.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,p):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,p)}function O(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function j(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function G(t){if(t){var r=t[c];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var e=-1,n=function r(){for(;++e<t.length;)if(o.call(t,e))return r.value=t[e],r.done=!1,r;return r.value=void 0,r.done=!0,r};return n.next=n}}return{next:N}}function N(){return{value:void 0,done:!0}}return v.prototype=y,i(x,"constructor",{value:y,configurable:!0}),i(y,"constructor",{value:v,configurable:!0}),v.displayName=h(y,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===v||"GeneratorFunction"===(r.displayName||r.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,h(t,l,"GeneratorFunction")),t.prototype=Object.create(x),t},e.awrap=function(t){return{__await:t}},L(b.prototype),h(b.prototype,u,(function(){return this})),e.AsyncIterator=b,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new b(f(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},L(x),h(x,l,"Generator"),h(x,c,(function(){return this})),h(x,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var r=Object(t),e=[];for(var n in r)e.push(n);return e.reverse(),function t(){for(;e.length;){var n=e.pop();if(n in r)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=G,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!t)for(var r in this)"t"===r.charAt(0)&&o.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function e(e,n){return a.type="throw",a.arg=t,r.next=e,n&&(r.method="next",r.arg=void 0),!!n}for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],a=i.completion;if("root"===i.tryLoc)return e("end");if(i.tryLoc<=this.prev){var c=o.call(i,"catchLoc"),u=o.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return e(i.catchLoc,!0);if(this.prev<i.finallyLoc)return e(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return e(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return e(i.finallyLoc)}}}},abrupt:function(t,r){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=r&&r<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=r,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(a)},complete:function(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),p},finish:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.finallyLoc===t)return this.complete(e.completion,e.afterLoc),j(e),p}},catch:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.tryLoc===t){var n=e.completion;if("throw"===n.type){var o=n.arg;j(e)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,e){return this.delegate={iterator:G(t),resultName:r,nextLoc:e},"next"===this.method&&(this.arg=void 0),p}},e}module.exports=r,module.exports.__esModule=!0,module.exports.default=module.exports;
 
 			}); 
		define("@babel/runtime/helpers/setPrototypeOf.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
function _setPrototypeOf(t,e){return module.exports=_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},_setPrototypeOf(t,e)}module.exports=_setPrototypeOf; 
 			}); 
		define("@babel/runtime/helpers/slicedToArray.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
var arrayWithHoles=require("./arrayWithHoles"),iterableToArrayLimit=require("./iterableToArrayLimit"),unsupportedIterableToArray=require("./unsupportedIterableToArray"),nonIterableRest=require("./nonIterableRest");function _slicedToArray(r,e){return arrayWithHoles(r)||iterableToArrayLimit(r,e)||unsupportedIterableToArray(r,e)||nonIterableRest()}module.exports=_slicedToArray; 
 			}); 
		define("@babel/runtime/helpers/toConsumableArray.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
var arrayWithoutHoles=require("./arrayWithoutHoles"),iterableToArray=require("./iterableToArray"),unsupportedIterableToArray=require("./unsupportedIterableToArray"),nonIterableSpread=require("./nonIterableSpread");function _toConsumableArray(r){return arrayWithoutHoles(r)||iterableToArray(r)||unsupportedIterableToArray(r)||nonIterableSpread()}module.exports=_toConsumableArray; 
 			}); 
		define("@babel/runtime/helpers/toPrimitive.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
var _typeof=require("./typeof");function _toPrimitive(r,t){if("object"!==_typeof(r)||null===r)return r;var e=r[Symbol.toPrimitive];if(void 0!==e){var i=e.call(r,t||"default");if("object"!==_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(r)}module.exports=_toPrimitive; 
 			}); 
		define("@babel/runtime/helpers/toPropertyKey.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
var _typeof=require("./typeof"),toPrimitive=require("./toPrimitive");function _toPropertyKey(r){var t=toPrimitive(r,"string");return"symbol"===_typeof(t)?t:String(t)}module.exports=_toPropertyKey; 
 			}); 
		define("@babel/runtime/helpers/typeof.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
function _typeof(o){return module.exports=_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}module.exports=_typeof; 
 			}); 
		define("@babel/runtime/helpers/unsupportedIterableToArray.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
var arrayLikeToArray=require("./arrayLikeToArray");function _unsupportedIterableToArray(r,e){if(r){if("string"==typeof r)return arrayLikeToArray(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);return"Object"===t&&r.constructor&&(t=r.constructor.name),"Map"===t||"Set"===t?Array.from(r):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?arrayLikeToArray(r,e):void 0}}module.exports=_unsupportedIterableToArray; 
 			}); 
		define("common/vendor.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";

/**
* @vue/shared v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/
require("../@babel/runtime/helpers/Arrayincludes");
var _objectSpread2 = require("../@babel/runtime/helpers/objectSpread2");
var _inherits2 = require("../@babel/runtime/helpers/inherits");
var _createSuper2 = require("../@babel/runtime/helpers/createSuper");
var _createForOfIteratorHelper2 = require("../@babel/runtime/helpers/createForOfIteratorHelper");
var _classCallCheck2 = require("../@babel/runtime/helpers/classCallCheck");
var _createClass2 = require("../@babel/runtime/helpers/createClass");
var _defineProperty2 = require("../@babel/runtime/helpers/defineProperty");
var _slicedToArray2 = require("../@babel/runtime/helpers/slicedToArray");
var _toConsumableArray2 = require("../@babel/runtime/helpers/toConsumableArray");
var _typeof2 = require("../@babel/runtime/helpers/typeof");
function e(e, t) {
  var n = new Set(e.split(","));
  return t ? function (e) {
    return n.has(e.toLowerCase());
  } : function (e) {
    return n.has(e);
  };
}
var t = {},
  n = [],
  r = function r() {},
  i = function i() {
    return !1;
  },
  o = function o(e) {
    return 111 === e.charCodeAt(0) && 110 === e.charCodeAt(1) && (e.charCodeAt(2) > 122 || e.charCodeAt(2) < 97);
  },
  s = function s(e) {
    return e.startsWith("onUpdate:");
  },
  a = Object.assign,
  c = function c(e, t) {
    var n = e.indexOf(t);
    n > -1 && e.splice(n, 1);
  },
  l = Object.prototype.hasOwnProperty,
  u = function u(e, t) {
    return l.call(e, t);
  },
  f = Array.isArray,
  h = function h(e) {
    return "[object Map]" === b(e);
  },
  d = function d(e) {
    return "[object Set]" === b(e);
  },
  p = function p(e) {
    return "function" == typeof e;
  },
  m = function m(e) {
    return "string" == typeof e;
  },
  _ = function _(e) {
    return "symbol" == _typeof2(e);
  },
  g = function g(e) {
    return null !== e && "object" == _typeof2(e);
  },
  v = function v(e) {
    return (g(e) || p(e)) && p(e.then) && p(e.catch);
  },
  y = Object.prototype.toString,
  b = function b(e) {
    return y.call(e);
  },
  w = function w(e) {
    return "[object Object]" === b(e);
  },
  k = function k(e) {
    return m(e) && "NaN" !== e && "-" !== e[0] && "" + parseInt(e, 10) === e;
  },
  x = e(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),
  S = function S(e) {
    var t = Object.create(null);
    return function (n) {
      return t[n] || (t[n] = e(n));
    };
  },
  C = /-(\w)/g,
  E = S(function (e) {
    return e.replace(C, function (e, t) {
      return t ? t.toUpperCase() : "";
    });
  }),
  O = /\B([A-Z])/g,
  A = S(function (e) {
    return e.replace(O, "-$1").toLowerCase();
  }),
  I = S(function (e) {
    return e.charAt(0).toUpperCase() + e.slice(1);
  }),
  z = S(function (e) {
    return e ? "on".concat(I(e)) : "";
  }),
  $ = function $(e, t) {
    return !Object.is(e, t);
  },
  P = function P(e, t) {
    for (var _n2 = 0; _n2 < e.length; _n2++) e[_n2](t);
  },
  R = function R(e) {
    var t = parseFloat(e);
    return isNaN(t) ? e : t;
  };
function T(e) {
  if (f(e)) {
    var _t2 = {};
    for (var _n3 = 0; _n3 < e.length; _n3++) {
      var _r2 = e[_n3],
        _i2 = m(_r2) ? L(_r2) : T(_r2);
      if (_i2) for (var _e2 in _i2) _t2[_e2] = _i2[_e2];
    }
    return _t2;
  }
  if (m(e) || g(e)) return e;
}
var B = /;(?![^(]*\))/g,
  j = /:([^]+)/,
  D = /\/\*[^]*?\*\//g;
function L(e) {
  var t = {};
  return e.replace(D, "").split(B).forEach(function (e) {
    if (e) {
      var _n4 = e.split(j);
      _n4.length > 1 && (t[_n4[0].trim()] = _n4[1].trim());
    }
  }), t;
}
function N(e) {
  var t = "";
  if (m(e)) t = e;else if (f(e)) for (var _n5 = 0; _n5 < e.length; _n5++) {
    var _r3 = N(e[_n5]);
    _r3 && (t += _r3 + " ");
  } else if (g(e)) for (var _n6 in e) e[_n6] && (t += _n6 + " ");
  return t.trim();
}
var U = function U(e, t) {
    return t && t.__v_isRef ? U(e, t.value) : h(t) ? _defineProperty2({}, "Map(".concat(t.size, ")"), _toConsumableArray2(t.entries()).reduce(function (e, _ref, r) {
      var _ref2 = _slicedToArray2(_ref, 2),
        t = _ref2[0],
        n = _ref2[1];
      return e[F(t, r) + " =>"] = n, e;
    }, {})) : d(t) ? _defineProperty2({}, "Set(".concat(t.size, ")"), _toConsumableArray2(t.values()).map(function (e) {
      return F(e);
    })) : _(t) ? F(t) : !g(t) || f(t) || w(t) ? t : String(t);
  },
  F = function F(e) {
    var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : "";
    var n;
    return _(e) ? "Symbol(".concat(null != (n = e.description) ? n : t, ")") : e;
  };
function M(e) {
  var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;
  var n;
  return function () {
    for (var _len = arguments.length, r = new Array(_len), _key = 0; _key < _len; _key++) {
      r[_key] = arguments[_key];
    }
    return e && (n = e.apply(t, r), e = null), n;
  };
}
function W(e, t) {
  if (!m(t)) return;
  var n = (t = t.replace(/\[(\d+)\]/g, ".$1")).split(".");
  var r = n[0];
  return e || (e = {}), 1 === n.length ? e[r] : W(e[r], n.slice(1).join("."));
}
function H(e) {
  var t = {};
  return w(e) && Object.keys(e).sort().forEach(function (n) {
    var r = n;
    t[r] = e[r];
  }), Object.keys(t) ? t : e;
}
var Z = /:/g;
var V = encodeURIComponent;
function G(e) {
  var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : V;
  var n = e ? Object.keys(e).map(function (n) {
    var r = e[n];
    return void 0 === _typeof2(r) || null === r ? r = "" : w(r) && (r = JSON.stringify(r)), t(n) + "=" + t(r);
  }).filter(function (e) {
    return e.length > 0;
  }).join("&") : null;
  return n ? "?".concat(n) : "";
}
var K = ["onInit", "onLoad", "onShow", "onHide", "onUnload", "onBackPress", "onPageScroll", "onTabItemTap", "onReachBottom", "onPullDownRefresh", "onShareTimeline", "onShareAppMessage", "onShareChat", "onAddToFavorites", "onSaveExitState", "onNavigationBarButtonTap", "onNavigationBarSearchInputClicked", "onNavigationBarSearchInputChanged", "onNavigationBarSearchInputConfirmed", "onNavigationBarSearchInputFocusChanged"];
var X = ["onShow", "onHide", "onLaunch", "onError", "onThemeChange", "onPageNotFound", "onUnhandledRejection", "onExit", "onInit", "onLoad", "onReady", "onUnload", "onResize", "onBackPress", "onPageScroll", "onTabItemTap", "onReachBottom", "onPullDownRefresh", "onShareTimeline", "onAddToFavorites", "onShareAppMessage", "onShareChat", "onSaveExitState", "onNavigationBarButtonTap", "onNavigationBarSearchInputClicked", "onNavigationBarSearchInputChanged", "onNavigationBarSearchInputConfirmed", "onNavigationBarSearchInputFocusChanged"],
  Y = function () {
    return {
      onPageScroll: 1,
      onShareAppMessage: 2,
      onShareTimeline: 4
    };
  }();
function q(e, t) {
  var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : !0;
  return !(n && !p(t)) && (X.indexOf(e) > -1 || 0 === e.indexOf("on"));
}
var J;
var Q = [];
var ee = M(function (e, t) {
    return t(e);
  }),
  te = function te() {};
te.prototype = {
  _id: 1,
  on: function on(e, t, n) {
    var r = this.e || (this.e = {});
    return (r[e] || (r[e] = [])).push({
      fn: t,
      ctx: n,
      _id: this._id
    }), this._id++;
  },
  once: function once(e, t, n) {
    var r = this;
    function i() {
      r.off(e, i), t.apply(n, arguments);
    }
    return i._ = t, this.on(e, i, n);
  },
  emit: function emit(e) {
    for (var t = [].slice.call(arguments, 1), n = ((this.e || (this.e = {}))[e] || []).slice(), r = 0, i = n.length; r < i; r++) n[r].fn.apply(n[r].ctx, t);
    return this;
  },
  off: function off(e, t) {
    var n = this.e || (this.e = {}),
      r = n[e],
      i = [];
    if (r && t) {
      for (var o = r.length - 1; o >= 0; o--) if (r[o].fn === t || r[o].fn._ === t || r[o]._id === t) {
        r.splice(o, 1);
        break;
      }
      i = r;
    }
    return i.length ? n[e] = i : delete n[e], this;
  }
};
var ne = te;
var re = ["{", "}"];
var ie = /^(?:\d)+/,
  oe = /^(?:\w)+/;
var se = Object.prototype.hasOwnProperty,
  ae = function ae(e, t) {
    return se.call(e, t);
  },
  ce = new ( /*#__PURE__*/function () {
    function _class() {
      _classCallCheck2(this, _class);
      this._caches = Object.create(null);
    }
    _createClass2(_class, [{
      key: "interpolate",
      value: function interpolate(e, t) {
        var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : re;
        if (!t) return [e];
        var r = this._caches[e];
        return r || (r = function (e, _ref5) {
          var _ref6 = _slicedToArray2(_ref5, 2),
            t = _ref6[0],
            n = _ref6[1];
          var r = [];
          var i = 0,
            o = "";
          for (; i < e.length;) {
            var _s2 = e[i++];
            if (_s2 === t) {
              o && r.push({
                type: "text",
                value: o
              }), o = "";
              var _t3 = "";
              for (_s2 = e[i++]; void 0 !== _s2 && _s2 !== n;) _t3 += _s2, _s2 = e[i++];
              var _a2 = _s2 === n,
                _c = ie.test(_t3) ? "list" : _a2 && oe.test(_t3) ? "named" : "unknown";
              r.push({
                value: _t3,
                type: _c
              });
            } else o += _s2;
          }
          return o && r.push({
            type: "text",
            value: o
          }), r;
        }(e, n), this._caches[e] = r), function (e, t) {
          var n = [];
          var r = 0;
          var i = Array.isArray(t) ? "list" : (o = t, null !== o && "object" == _typeof2(o) ? "named" : "unknown");
          var o;
          if ("unknown" === i) return n;
          for (; r < e.length;) {
            var _o2 = e[r];
            switch (_o2.type) {
              case "text":
                n.push(_o2.value);
                break;
              case "list":
                n.push(t[parseInt(_o2.value, 10)]);
                break;
              case "named":
                "named" === i && n.push(t[_o2.value]);
            }
            r++;
          }
          return n;
        }(r, t);
      }
    }]);
    return _class;
  }())();
function le(e, t) {
  if (!e) return;
  if (e = e.trim().replace(/_/g, "-"), t && t[e]) return e;
  if ("chinese" === (e = e.toLowerCase())) return "zh-Hans";
  if (0 === e.indexOf("zh")) return e.indexOf("-hans") > -1 ? "zh-Hans" : e.indexOf("-hant") > -1 ? "zh-Hant" : (n = e, ["-tw", "-hk", "-mo", "-cht"].find(function (e) {
    return -1 !== n.indexOf(e);
  }) ? "zh-Hant" : "zh-Hans");
  var n;
  var r = ["en", "fr", "es"];
  t && Object.keys(t).length > 0 && (r = Object.keys(t));
  var i = function (e, t) {
    return t.find(function (t) {
      return 0 === e.indexOf(t);
    });
  }(e, r);
  return i || void 0;
}
var ue = /*#__PURE__*/function () {
  function ue(_ref7) {
    var e = _ref7.locale,
      t = _ref7.fallbackLocale,
      n = _ref7.messages,
      r = _ref7.watcher,
      i = _ref7.formater;
    _classCallCheck2(this, ue);
    this.locale = "en", this.fallbackLocale = "en", this.message = {}, this.messages = {}, this.watchers = [], t && (this.fallbackLocale = t), this.formater = i || ce, this.messages = n || {}, this.setLocale(e || "en"), r && this.watchLocale(r);
  }
  _createClass2(ue, [{
    key: "setLocale",
    value: function setLocale(e) {
      var _this = this;
      var t = this.locale;
      this.locale = le(e, this.messages) || this.fallbackLocale, this.messages[this.locale] || (this.messages[this.locale] = {}), this.message = this.messages[this.locale], t !== this.locale && this.watchers.forEach(function (e) {
        e(_this.locale, t);
      });
    }
  }, {
    key: "getLocale",
    value: function getLocale() {
      return this.locale;
    }
  }, {
    key: "watchLocale",
    value: function watchLocale(e) {
      var _this2 = this;
      var t = this.watchers.push(e) - 1;
      return function () {
        _this2.watchers.splice(t, 1);
      };
    }
  }, {
    key: "add",
    value: function add(e, t) {
      var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : !0;
      var r = this.messages[e];
      r ? n ? Object.assign(r, t) : Object.keys(t).forEach(function (e) {
        ae(r, e) || (r[e] = t[e]);
      }) : this.messages[e] = t;
    }
  }, {
    key: "f",
    value: function f(e, t, n) {
      return this.formater.interpolate(e, t, n).join("");
    }
  }, {
    key: "t",
    value: function t(e, _t4, n) {
      var r = this.message;
      return "string" == typeof _t4 ? (_t4 = le(_t4, this.messages)) && (r = this.messages[_t4]) : n = _t4, ae(r, e) ? this.formater.interpolate(r[e], n).join("") : (console.warn("Cannot translate the value of keypath ".concat(e, ". Use the value of keypath as default.")), e);
    }
  }]);
  return ue;
}();
function fe(e) {
  return function () {
    try {
      return e.apply(e, arguments);
    } catch (t) {
      console.error(t);
    }
  };
}
var he = 1;
var de = {};
function pe(e, t, n) {
  if ("number" == typeof e) {
    var _r4 = de[e];
    if (_r4) return _r4.keepAlive || delete de[e], _r4.callback(t, n);
  }
  return t;
}
var me = "success",
  _e = "fail",
  ge = "complete";
function ve(e) {
  var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
  var _ref8 = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {},
    n = _ref8.beforeAll,
    r = _ref8.beforeSuccess;
  w(t) || (t = {});
  var _ref9 = function (e) {
      var t = {};
      for (var _n7 in e) {
        var _r5 = e[_n7];
        p(_r5) && (t[_n7] = fe(_r5), delete e[_n7]);
      }
      return t;
    }(t),
    i = _ref9.success,
    o = _ref9.fail,
    s = _ref9.complete,
    a = p(i),
    c = p(o),
    l = p(s),
    u = he++;
  return function (e, t, n) {
    var r = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : !1;
    de[e] = {
      name: t,
      keepAlive: r,
      callback: n
    };
  }(u, e, function (u) {
    (u = u || {}).errMsg = function (e, t) {
      return e && -1 !== e.indexOf(":fail") ? t + e.substring(e.indexOf(":fail")) : t + ":ok";
    }(u.errMsg, e), p(n) && n(u), u.errMsg === e + ":ok" ? (p(r) && r(u, t), a && i(u)) : c && o(u), l && s(u);
  }), u;
}
var ye = "success",
  be = "fail",
  we = "complete",
  ke = {},
  xe = {};
function Se(e, t) {
  return function (n) {
    return e(n, t) || n;
  };
}
function Ce(e, t, n) {
  var r = !1;
  for (var _i3 = 0; _i3 < e.length; _i3++) {
    var _o3 = e[_i3];
    if (r) r = Promise.resolve(Se(_o3, n));else {
      var _e3 = _o3(t, n);
      if (v(_e3) && (r = Promise.resolve(_e3)), !1 === _e3) return {
        then: function then() {},
        catch: function _catch() {}
      };
    }
  }
  return r || {
    then: function then(e) {
      return e(t);
    },
    catch: function _catch() {}
  };
}
function Ee(e) {
  var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
  return [ye, be, we].forEach(function (n) {
    var r = e[n];
    if (!f(r)) return;
    var i = t[n];
    t[n] = function (e) {
      Ce(r, e, t).then(function (e) {
        return p(i) && i(e) || e;
      });
    };
  }), t;
}
function Oe(e, t) {
  var n = [];
  f(ke.returnValue) && n.push.apply(n, _toConsumableArray2(ke.returnValue));
  var r = xe[e];
  return r && f(r.returnValue) && n.push.apply(n, _toConsumableArray2(r.returnValue)), n.forEach(function (e) {
    t = e(t) || t;
  }), t;
}
function Ae(e) {
  var t = Object.create(null);
  Object.keys(ke).forEach(function (e) {
    "returnValue" !== e && (t[e] = ke[e].slice());
  });
  var n = xe[e];
  return n && Object.keys(n).forEach(function (e) {
    "returnValue" !== e && (t[e] = (t[e] || []).concat(n[e]));
  }), t;
}
function Ie(e, t, n, r) {
  var i = Ae(e);
  if (i && Object.keys(i).length) {
    if (f(i.invoke)) {
      return Ce(i.invoke, n).then(function (n) {
        return t.apply(void 0, [Ee(Ae(e), n)].concat(_toConsumableArray2(r)));
      });
    }
    return t.apply(void 0, [Ee(i, n)].concat(_toConsumableArray2(r)));
  }
  return t.apply(void 0, [n].concat(_toConsumableArray2(r)));
}
function ze(e, t) {
  return function () {
    var n = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
    for (var _len2 = arguments.length, r = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {
      r[_key2 - 1] = arguments[_key2];
    }
    return function (e) {
      return !(!w(e) || ![me, _e, ge].find(function (t) {
        return p(e[t]);
      }));
    }(n) ? Oe(e, Ie(e, t, a({}, n), r)) : Oe(e, new Promise(function (i, o) {
      Ie(e, t, a({}, n, {
        success: i,
        fail: o
      }), r);
    }));
  };
}
function $e(e, t, n) {
  var r = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};
  var i = t + ":fail";
  var o = "";
  return o = n ? 0 === n.indexOf(i) ? n : i + " " + n : i, delete r.errCode, pe(e, a({
    errMsg: o
  }, r));
}
function Pe(e, t, n, r) {
  var i = function (e, t) {
    e[0];
  }(t);
  if (i) return i;
}
function Re(e, t, n, r) {
  return function (n) {
    var i = ve(e, n, r),
      o = Pe(0, [n]);
    return o ? $e(i, e, o) : t(n, {
      resolve: function resolve(t) {
        return function (e, t, n) {
          return pe(e, a(n || {}, {
            errMsg: t + ":ok"
          }));
        }(i, e, t);
      },
      reject: function reject(t, n) {
        return $e(i, e, function (e) {
          return !e || m(e) ? e : e.stack ? ("undefined" != typeof globalThis && globalThis.harmonyChannel || console.error(e.message + "\n" + e.stack), e.message) : e;
        }(t), n);
      }
    });
  };
}
function Te(e, t, n, r) {
  return function (e, t, n, r) {
    return function () {
      for (var _len3 = arguments.length, e = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {
        e[_key3] = arguments[_key3];
      }
      var n = Pe(0, e);
      if (n) throw new Error(n);
      return t.apply(null, e);
    };
  }(0, t);
}
var Be = !1,
  je = 0,
  De = 0;
var Le = Te(0, function (e, t) {
  if (0 === je && function () {
    var e, t;
    var n, r, i;
    {
      var _o4 = (null === (e = wx.getWindowInfo) || void 0 === e ? void 0 : e.call(wx)) || wx.getSystemInfoSync(),
        _s3 = (null === (t = wx.getDeviceInfo) || void 0 === t ? void 0 : t.call(wx)) || wx.getSystemInfoSync();
      n = _o4.windowWidth, r = _o4.pixelRatio, i = _s3.platform;
    }
    je = n, De = r, Be = "ios" === i;
  }(), 0 === (e = Number(e))) return 0;
  var n = e / 750 * (t || je);
  return n < 0 && (n = -n), n = Math.floor(n + 1e-4), 0 === n && (n = 1 !== De && Be ? .5 : 1), e < 0 ? -n : n;
});
function Ne(e, t) {
  Object.keys(t).forEach(function (n) {
    p(t[n]) && (e[n] = function (e, t) {
      var n = t ? e ? e.concat(t) : f(t) ? t : [t] : e;
      return n ? function (e) {
        var t = [];
        for (var _n8 = 0; _n8 < e.length; _n8++) -1 === t.indexOf(e[_n8]) && t.push(e[_n8]);
        return t;
      }(n) : n;
    }(e[n], t[n]));
  });
}
function Ue(e, t) {
  e && t && Object.keys(t).forEach(function (n) {
    var r = e[n],
      i = t[n];
    f(r) && p(i) && c(r, i);
  });
}
var Fe = Te(0, function (e, t) {
    m(e) && w(t) ? Ne(xe[e] || (xe[e] = {}), t) : w(e) && Ne(ke, e);
  }),
  Me = Te(0, function (e, t) {
    m(e) ? w(t) ? Ue(xe[e], t) : delete xe[e] : w(e) && Ue(ke, e);
  });
var We = new ( /*#__PURE__*/function () {
    function _class2() {
      _classCallCheck2(this, _class2);
      this.$emitter = new ne();
    }
    _createClass2(_class2, [{
      key: "on",
      value: function on(e, t) {
        return this.$emitter.on(e, t);
      }
    }, {
      key: "once",
      value: function once(e, t) {
        return this.$emitter.once(e, t);
      }
    }, {
      key: "off",
      value: function off(e, t) {
        e ? this.$emitter.off(e, t) : this.$emitter.e = {};
      }
    }, {
      key: "emit",
      value: function emit(e) {
        var _this$$emitter;
        for (var _len4 = arguments.length, t = new Array(_len4 > 1 ? _len4 - 1 : 0), _key4 = 1; _key4 < _len4; _key4++) {
          t[_key4 - 1] = arguments[_key4];
        }
        (_this$$emitter = this.$emitter).emit.apply(_this$$emitter, [e].concat(t));
      }
    }]);
    return _class2;
  }())(),
  He = Te(0, function (e, t) {
    return We.on(e, t), function () {
      return We.off(e, t);
    };
  }),
  Ze = Te(0, function (e, t) {
    return We.once(e, t), function () {
      return We.off(e, t);
    };
  }),
  Ve = Te(0, function (e, t) {
    f(e) || (e = e ? [e] : []), e.forEach(function (e) {
      We.off(e, t);
    });
  }),
  Ge = Te(0, function (e) {
    for (var _len5 = arguments.length, t = new Array(_len5 > 1 ? _len5 - 1 : 0), _key5 = 1; _key5 < _len5; _key5++) {
      t[_key5 - 1] = arguments[_key5];
    }
    We.emit.apply(We, [e].concat(t));
  });
var Ke, Xe, Ye;
function qe(e) {
  try {
    return JSON.parse(e);
  } catch (t) {}
  return e;
}
var Je = [];
function Qe(e, t) {
  Je.forEach(function (n) {
    n(e, t);
  }), Je.length = 0;
}
var et = ze(tt = "getPushClientId", function (e, t, n, r) {
  return Re(e, t, 0, r);
}(tt, function (e, _ref10) {
  var t = _ref10.resolve,
    n = _ref10.reject;
  Promise.resolve().then(function () {
    void 0 === Ye && (Ye = !1, Ke = "", Xe = "uniPush is not enabled"), Je.push(function (e, r) {
      e ? t({
        cid: e
      }) : n(r);
    }), void 0 !== Ke && Qe(Ke, Xe);
  });
}, 0, nt));
var tt, nt;
var rt = [],
  it = /^\$|__f__|getLocale|setLocale|sendNativeEvent|restoreGlobal|requireGlobal|getCurrentSubNVue|getMenuButtonBoundingClientRect|^report|interceptors|Interceptor$|getSubNVueById|requireNativePlugin|upx2px|rpx2px|hideKeyboard|canIUse|^create|Sync$|Manager$|base64ToArrayBuffer|arrayBufferToBase64|getDeviceInfo|getAppBaseInfo|getWindowInfo|getSystemSetting|getAppAuthorizeSetting/,
  ot = /^create|Manager$/,
  st = ["createBLEConnection"],
  at = ["request", "downloadFile", "uploadFile", "connectSocket"],
  ct = ["createBLEConnection"],
  lt = /^on|^off/;
function ut(e) {
  return ot.test(e) && -1 === st.indexOf(e);
}
function ft(e) {
  return it.test(e) && -1 === ct.indexOf(e);
}
function ht(e) {
  return -1 !== at.indexOf(e);
}
function dt(e) {
  return !(ut(e) || ft(e) || function (e) {
    return lt.test(e) && "onPush" !== e;
  }(e));
}
function pt(e, t) {
  return dt(e) && p(t) ? function () {
    var n = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
    for (var _len6 = arguments.length, r = new Array(_len6 > 1 ? _len6 - 1 : 0), _key6 = 1; _key6 < _len6; _key6++) {
      r[_key6 - 1] = arguments[_key6];
    }
    return p(n.success) || p(n.fail) || p(n.complete) ? Oe(e, Ie(e, t, a({}, n), r)) : Oe(e, new Promise(function (i, o) {
      Ie(e, t, a({}, n, {
        success: i,
        fail: o
      }), r);
    }));
  } : t;
}
Promise.prototype.finally || (Promise.prototype.finally = function (e) {
  var t = this.constructor;
  return this.then(function (n) {
    return t.resolve(e && e()).then(function () {
      return n;
    });
  }, function (n) {
    return t.resolve(e && e()).then(function () {
      throw n;
    });
  });
});
var mt = ["success", "fail", "cancel", "complete"];
var _t = function _t() {
    var e = p(getApp) && getApp({
      allowDefault: !0
    });
    return e && e.$vm ? e.$vm.$locale : function () {
      var e;
      var t = "";
      {
        var _n9 = (null === (e = wx.getAppBaseInfo) || void 0 === e ? void 0 : e.call(wx)) || wx.getSystemInfoSync();
        t = le(_n9 && _n9.language ? _n9.language : "en") || "en";
      }
      return t;
    }();
  },
  gt = [];
"undefined" != typeof global && (global.getLocale = _t);
var vt;
function yt() {
  var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : wx;
  return function (t, n) {
    vt = vt || e.getStorageSync("__DC_STAT_UUID"), vt || (vt = Date.now() + "" + Math.floor(1e7 * Math.random()), wx.setStorage({
      key: "__DC_STAT_UUID",
      data: vt
    })), n.deviceId = vt;
  };
}
function bt(e, t) {
  if (e.safeArea) {
    var _n10 = e.safeArea;
    t.safeAreaInsets = {
      top: _n10.top,
      left: _n10.left,
      right: e.windowWidth - _n10.right,
      bottom: e.screenHeight - _n10.bottom
    };
  }
}
function wt(e, t) {
  var n = "",
    r = "";
  switch (n = e.split(" ")[0] || t, r = e.split(" ")[1] || "", n = n.toLowerCase(), n) {
    case "harmony":
    case "ohos":
    case "openharmony":
      n = "harmonyos";
      break;
    case "iphone os":
      n = "ios";
      break;
    case "mac":
    case "darwin":
      n = "macos";
      break;
    case "windows_nt":
      n = "windows";
  }
  return {
    osName: n,
    osVersion: r
  };
}
function kt(e, t) {
  var n = e.deviceType || "phone";
  {
    var _e4 = {
        ipad: "pad",
        windows: "pc",
        mac: "pc"
      },
      _r6 = Object.keys(_e4),
      _i4 = t.toLowerCase();
    for (var _t5 = 0; _t5 < _r6.length; _t5++) {
      var _o5 = _r6[_t5];
      if (-1 !== _i4.indexOf(_o5)) {
        n = _e4[_o5];
        break;
      }
    }
  }
  return n;
}
function xt(e) {
  var t = e;
  return t && (t = t.toLowerCase()), t;
}
function St(e) {
  return _t ? _t() : e;
}
function Ct(e) {
  var t = e.hostName || "WeChat";
  return e.environment ? t = e.environment : e.host && e.host.env && (t = e.host.env), t;
}
var Et = {
    returnValue: function returnValue(e, t) {
      bt(e, t), yt()(e, t), function (e, t) {
        var _e$brand = e.brand,
          n = _e$brand === void 0 ? "" : _e$brand,
          _e$model = e.model,
          r = _e$model === void 0 ? "" : _e$model,
          _e$system = e.system,
          i = _e$system === void 0 ? "" : _e$system,
          _e$language = e.language,
          o = _e$language === void 0 ? "" : _e$language,
          s = e.theme,
          c = e.version,
          l = e.platform,
          u = e.fontSizeSetting,
          f = e.SDKVersion,
          h = e.pixelRatio,
          d = e.deviceOrientation,
          _wt = wt(i, l),
          p = _wt.osName,
          m = _wt.osVersion;
        var _ = c,
          g = kt(e, r),
          v = xt(n),
          y = Ct(e),
          b = d,
          w = h,
          k = f;
        var x = (o || "").replace(/_/g, "-"),
          S = {
            appId: "__UNI__93C21A0",
            appName: "ChameleonUltra设备管理",
            appVersion: "1.0.0",
            appVersionCode: "100",
            appLanguage: St(x),
            uniCompileVersion: "4.76",
            uniCompilerVersion: "4.76",
            uniRuntimeVersion: "4.76",
            uniPlatform: "mp-weixin",
            deviceBrand: v,
            deviceModel: r,
            deviceType: g,
            devicePixelRatio: w,
            deviceOrientation: b,
            osName: p,
            osVersion: m,
            hostTheme: s,
            hostVersion: _,
            hostLanguage: x,
            hostName: y,
            hostSDKVersion: k,
            hostFontSizeSetting: u,
            windowTop: 0,
            windowBottom: 0,
            osLanguage: void 0,
            osTheme: void 0,
            ua: void 0,
            hostPackageName: void 0,
            browserName: void 0,
            browserVersion: void 0,
            isUniAppX: !1
          };
        a(t, S);
      }(e, t);
    }
  },
  Ot = Et,
  At = {
    args: function args(e, t) {
      var n = parseInt(e.current);
      if (isNaN(n)) return;
      var r = e.urls;
      if (!f(r)) return;
      var i = r.length;
      return i ? (n < 0 ? n = 0 : n >= i && (n = i - 1), n > 0 ? (t.current = r[n], t.urls = r.filter(function (e, t) {
        return !(t < n) || e !== r[n];
      })) : t.current = r[0], {
        indicator: !1,
        loop: !1
      }) : void 0;
    }
  },
  It = {
    args: function args(e, t) {
      t.alertText = e.title;
    }
  },
  zt = {
    returnValue: function returnValue(e, t) {
      var n = e.brand,
        r = e.model,
        _e$system2 = e.system,
        i = _e$system2 === void 0 ? "" : _e$system2,
        _e$platform = e.platform,
        o = _e$platform === void 0 ? "" : _e$platform;
      var s = kt(e, r),
        c = xt(n);
      yt()(e, t);
      var _wt2 = wt(i, o),
        l = _wt2.osName,
        u = _wt2.osVersion;
      t = H(a(t, {
        deviceType: s,
        deviceBrand: c,
        deviceModel: r,
        osName: l,
        osVersion: u
      }));
    }
  },
  $t = {
    returnValue: function returnValue(e, t) {
      var n = e.version,
        r = e.language,
        i = e.SDKVersion,
        o = e.theme;
      var s = Ct(e),
        c = (r || "").replace(/_/g, "-");
      var l = {
        hostVersion: n,
        hostLanguage: c,
        hostName: s,
        hostSDKVersion: i,
        hostTheme: o,
        appId: "__UNI__93C21A0",
        appName: "ChameleonUltra设备管理",
        appVersion: "1.0.0",
        appVersionCode: "100",
        appLanguage: St(c),
        isUniAppX: !1,
        uniPlatform: "mp-weixin",
        uniCompileVersion: "4.76",
        uniCompilerVersion: "4.76",
        uniRuntimeVersion: "4.76"
      };
      a(t, l);
    }
  },
  Pt = {
    returnValue: function returnValue(e, t) {
      bt(e, t), t = H(a(t, {
        windowTop: 0,
        windowBottom: 0
      }));
    }
  },
  Rt = {
    args: function args(e) {
      var t = getApp({
        allowDefault: !0
      }) || {};
      t.$vm ? hi("onError", e, t.$vm.$) : (wx.$onErrorHandlers || (wx.$onErrorHandlers = []), wx.$onErrorHandlers.push(e));
    }
  },
  Tt = {
    args: function args(e) {
      var t = getApp({
        allowDefault: !0
      }) || {};
      if (t.$vm) {
        if (e.__weh) {
          var _n11 = t.$vm.$.onError;
          if (_n11) {
            var _t6 = _n11.indexOf(e.__weh);
            _t6 > -1 && _n11.splice(_t6, 1);
          }
        }
      } else {
        if (!wx.$onErrorHandlers) return;
        var _t7 = wx.$onErrorHandlers.findIndex(function (t) {
          return t === e;
        });
        -1 !== _t7 && wx.$onErrorHandlers.splice(_t7, 1);
      }
    }
  },
  Bt = {
    args: function args() {
      if (wx.__uni_console__) {
        if (wx.__uni_console_warned__) return;
        wx.__uni_console_warned__ = !0, console.warn("开发模式下小程序日志回显会使用 socket 连接，为了避免冲突，建议使用 SocketTask 的方式去管理 WebSocket 或手动关闭日志回显功能。[详情](https://uniapp.dcloud.net.cn/tutorial/run/mp-log.html)");
      }
    }
  },
  jt = Bt,
  Dt = {
    $on: He,
    $off: Ve,
    $once: Ze,
    $emit: Ge,
    upx2px: Le,
    rpx2px: Le,
    interceptors: {},
    addInterceptor: Fe,
    removeInterceptor: Me,
    onCreateVueApp: function onCreateVueApp(e) {
      if (J) return e(J);
      Q.push(e);
    },
    invokeCreateVueAppHook: function invokeCreateVueAppHook(e) {
      J = e, Q.forEach(function (t) {
        return t(e);
      });
    },
    getLocale: _t,
    setLocale: function setLocale(e) {
      var t = p(getApp) && getApp();
      if (!t) return !1;
      return t.$vm.$locale !== e && (t.$vm.$locale = e, gt.forEach(function (t) {
        return t({
          locale: e
        });
      }), !0);
    },
    onLocaleChange: function onLocaleChange(e) {
      -1 === gt.indexOf(e) && gt.push(e);
    },
    getPushClientId: et,
    onPushMessage: function onPushMessage(e) {
      -1 === rt.indexOf(e) && rt.push(e);
    },
    offPushMessage: function offPushMessage(e) {
      if (e) {
        var _t8 = rt.indexOf(e);
        _t8 > -1 && rt.splice(_t8, 1);
      } else rt.length = 0;
    },
    invokePushCallback: function invokePushCallback(e) {
      if ("enabled" === e.type) Ye = !0;else if ("clientId" === e.type) Ke = e.cid, Xe = e.errMsg, Qe(Ke, e.errMsg);else if ("pushMsg" === e.type) {
        var _t9 = {
          type: "receive",
          data: qe(e.message)
        };
        for (var _e5 = 0; _e5 < rt.length; _e5++) {
          if ((0, rt[_e5])(_t9), _t9.stopped) break;
        }
      } else "click" === e.type && rt.forEach(function (t) {
        t({
          type: "click",
          data: qe(e.message)
        });
      });
    },
    __f__: function __f__(e, t) {
      for (var _len7 = arguments.length, n = new Array(_len7 > 2 ? _len7 - 2 : 0), _key7 = 2; _key7 < _len7; _key7++) {
        n[_key7 - 2] = arguments[_key7];
      }
      t && n.push(t), console[e].apply(console, n);
    }
  };
var Lt = ["qy", "env", "error", "version", "lanDebug", "cloud", "serviceMarket", "router", "worklet", "__webpack_require_UNI_MP_PLUGIN__"],
  Nt = ["lanDebug", "router", "worklet"],
  Ut = wx.getLaunchOptionsSync ? wx.getLaunchOptionsSync() : null;
function Ft(e) {
  return (!Ut || 1154 !== Ut.scene || !Nt.includes(e)) && (Lt.indexOf(e) > -1 || "function" == typeof wx[e]);
}
function Mt() {
  var e = {};
  for (var _t10 in wx) Ft(_t10) && (e[_t10] = wx[_t10]);
  return "undefined" != typeof globalThis && "undefined" == typeof requireMiniProgram && (globalThis.wx = e), e;
}
var Wt = ["__route__", "__wxExparserNodeId__", "__wxWebviewId__"],
  Ht = (Zt = {
    oauth: ["weixin"],
    share: ["weixin"],
    payment: ["wxpay"],
    push: ["weixin"]
  }, function (_ref11) {
    var e = _ref11.service,
      t = _ref11.success,
      n = _ref11.fail,
      r = _ref11.complete;
    var i;
    Zt[e] ? (i = {
      errMsg: "getProvider:ok",
      service: e,
      provider: Zt[e]
    }, p(t) && t(i)) : (i = {
      errMsg: "getProvider:fail:服务[" + e + "]不存在"
    }, p(n) && n(i)), p(r) && r(i);
  });
var Zt;
var Vt = Mt();
Vt.canIUse("getAppBaseInfo") || (Vt.getAppBaseInfo = Vt.getSystemInfoSync), Vt.canIUse("getWindowInfo") || (Vt.getWindowInfo = Vt.getSystemInfoSync), Vt.canIUse("getDeviceInfo") || (Vt.getDeviceInfo = Vt.getSystemInfoSync);
var Gt = Vt.getAppBaseInfo && Vt.getAppBaseInfo();
Gt || (Gt = Vt.getSystemInfoSync());
var Kt = Gt ? Gt.host : null,
  Xt = Kt && "SAAASDK" === Kt.env ? Vt.miniapp.shareVideoMessage : Vt.shareVideoMessage;
var Yt = Object.freeze({
  __proto__: null,
  createSelectorQuery: function createSelectorQuery() {
    var e = Vt.createSelectorQuery(),
      t = e.in;
    return e.in = function (e) {
      return e.$scope ? t.call(this, e.$scope) : t.call(this, function (e) {
        var t = Object.create(null);
        return Wt.forEach(function (n) {
          t[n] = e[n];
        }), t;
      }(e));
    }, e;
  },
  getProvider: Ht,
  shareVideoMessage: Xt
});
var qt = {
  args: function args(e, t) {
    e.compressedHeight && !t.compressHeight && (t.compressHeight = e.compressedHeight), e.compressedWidth && !t.compressWidth && (t.compressWidth = e.compressedWidth);
  }
};
var Jt = function (e, t) {
  var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : wx;
  var r = function (e) {
    function t(e, t, n) {
      return function (i) {
        return t(r(e, i, n));
      };
    }
    function n(e, n) {
      var r = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};
      var i = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};
      var o = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : !1;
      if (w(n)) {
        var _s4 = !0 === o ? n : {};
        p(r) && (r = r(n, _s4) || {});
        for (var _a3 in n) if (u(r, _a3)) {
          var _t11 = r[_a3];
          p(_t11) && (_t11 = _t11(n[_a3], n, _s4)), _t11 ? m(_t11) ? _s4[_t11] = n[_a3] : w(_t11) && (_s4[_t11.name ? _t11.name : _a3] = _t11.value) : console.warn("\u5FAE\u4FE1\u5C0F\u7A0B\u5E8F ".concat(e, " \u6682\u4E0D\u652F\u6301 ").concat(_a3));
        } else if (-1 !== mt.indexOf(_a3)) {
          var _r7 = n[_a3];
          p(_r7) && (_s4[_a3] = t(e, _r7, i));
        } else o || u(_s4, _a3) || (_s4[_a3] = n[_a3]);
        return _s4;
      }
      return p(n) && (p(r) && r(n, {}), n = t(e, n, i)), n;
    }
    function r(t, r, i) {
      var o = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : !1;
      return p(e.returnValue) && (r = e.returnValue(t, r)), n(t, r, i, {}, o || !1);
    }
    return function (t, i) {
      var o = u(e, t);
      if (!o && "function" != typeof wx[t]) return i;
      var s = o || p(e.returnValue) || ut(t) || ht(t),
        a = o || p(i);
      if (!o && !i) return function () {
        console.error("\u5FAE\u4FE1\u5C0F\u7A0B\u5E8F \u6682\u4E0D\u652F\u6301".concat(t));
      };
      if (!s || !a) return i;
      var c = e[t];
      return function (e, i) {
        var o = c || {};
        p(c) && (o = c(e));
        var s = [e = n(t, e, o.args, o.returnValue)];
        void 0 !== i && s.push(i);
        var a = wx[o.name || t].apply(wx, s);
        return (ut(t) || ht(t)) && a && !a.__v_skip && (a.__v_skip = !0), ft(t) ? r(t, a, o.returnValue, ut(t)) : a;
      };
    };
  }(t);
  return new Proxy({}, {
    get: function get(t, i) {
      return u(t, i) ? t[i] : u(e, i) ? pt(i, e[i]) : u(Dt, i) ? pt(i, Dt[i]) : pt(i, r(i, n[i]));
    }
  });
}(Yt, Object.freeze({
  __proto__: null,
  compressImage: qt,
  getAppAuthorizeSetting: {
    returnValue: function returnValue(e, t) {
      var n = e.locationReducedAccuracy;
      t.locationAccuracy = "unsupported", !0 === n ? t.locationAccuracy = "reduced" : !1 === n && (t.locationAccuracy = "full");
    }
  },
  getAppBaseInfo: $t,
  getDeviceInfo: zt,
  getSystemInfo: Et,
  getSystemInfoSync: Ot,
  getWindowInfo: Pt,
  offError: Tt,
  onError: Rt,
  onSocketMessage: jt,
  onSocketOpen: Bt,
  previewImage: At,
  redirectTo: {},
  showActionSheet: It
}), Mt());
var Qt, en;
var tn = /*#__PURE__*/function () {
  function tn() {
    var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : !1;
    _classCallCheck2(this, tn);
    this.detached = e, this._active = !0, this.effects = [], this.cleanups = [], this.parent = Qt, !e && Qt && (this.index = (Qt.scopes || (Qt.scopes = [])).push(this) - 1);
  }
  _createClass2(tn, [{
    key: "active",
    get: function get() {
      return this._active;
    }
  }, {
    key: "run",
    value: function run(e) {
      if (this._active) {
        var _t12 = Qt;
        try {
          return Qt = this, e();
        } finally {
          Qt = _t12;
        }
      }
    }
  }, {
    key: "on",
    value: function on() {
      Qt = this;
    }
  }, {
    key: "off",
    value: function off() {
      Qt = this.parent;
    }
  }, {
    key: "stop",
    value: function stop(e) {
      if (this._active) {
        var _t13, _n12;
        for (_t13 = 0, _n12 = this.effects.length; _t13 < _n12; _t13++) this.effects[_t13].stop();
        for (_t13 = 0, _n12 = this.cleanups.length; _t13 < _n12; _t13++) this.cleanups[_t13]();
        if (this.scopes) for (_t13 = 0, _n12 = this.scopes.length; _t13 < _n12; _t13++) this.scopes[_t13].stop(!0);
        if (!this.detached && this.parent && !e) {
          var _e6 = this.parent.scopes.pop();
          _e6 && _e6 !== this && (this.parent.scopes[this.index] = _e6, _e6.index = this.index);
        }
        this.parent = void 0, this._active = !1;
      }
    }
  }]);
  return tn;
}();
var nn = /*#__PURE__*/function () {
  function nn(e, t, n, r) {
    _classCallCheck2(this, nn);
    this.fn = e, this.trigger = t, this.scheduler = n, this.active = !0, this.deps = [], this._dirtyLevel = 4, this._trackId = 0, this._runnings = 0, this._shouldSchedule = !1, this._depsLength = 0, function (e) {
      var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : Qt;
      t && t.active && t.effects.push(e);
    }(this, r);
  }
  _createClass2(nn, [{
    key: "dirty",
    get: function get() {
      if (2 === this._dirtyLevel || 3 === this._dirtyLevel) {
        this._dirtyLevel = 1, un();
        for (var _e7 = 0; _e7 < this._depsLength; _e7++) {
          var _t14 = this.deps[_e7];
          if (_t14.computed && (_t14.computed.value, this._dirtyLevel >= 4)) break;
        }
        1 === this._dirtyLevel && (this._dirtyLevel = 0), fn();
      }
      return this._dirtyLevel >= 4;
    },
    set: function set(e) {
      this._dirtyLevel = e ? 4 : 0;
    }
  }, {
    key: "run",
    value: function run() {
      if (this._dirtyLevel = 0, !this.active) return this.fn();
      var e = an,
        t = en;
      try {
        return an = !0, en = this, this._runnings++, rn(this), this.fn();
      } finally {
        on(this), this._runnings--, en = t, an = e;
      }
    }
  }, {
    key: "stop",
    value: function stop() {
      var e;
      this.active && (rn(this), on(this), null == (e = this.onStop) || e.call(this), this.active = !1);
    }
  }]);
  return nn;
}();
function rn(e) {
  e._trackId++, e._depsLength = 0;
}
function on(e) {
  if (e.deps.length > e._depsLength) {
    for (var _t15 = e._depsLength; _t15 < e.deps.length; _t15++) sn(e.deps[_t15], e);
    e.deps.length = e._depsLength;
  }
}
function sn(e, t) {
  var n = e.get(t);
  void 0 !== n && t._trackId !== n && (e.delete(t), 0 === e.size && e.cleanup());
}
var an = !0,
  cn = 0;
var ln = [];
function un() {
  ln.push(an), an = !1;
}
function fn() {
  var e = ln.pop();
  an = void 0 === e || e;
}
function hn() {
  cn++;
}
function dn() {
  for (cn--; !cn && mn.length;) mn.shift()();
}
function pn(e, t, n) {
  if (t.get(e) !== e._trackId) {
    t.set(e, e._trackId);
    var _n13 = e.deps[e._depsLength];
    _n13 !== t ? (_n13 && sn(_n13, e), e.deps[e._depsLength++] = t) : e._depsLength++;
  }
}
var mn = [];
function _n(e, t, n) {
  hn();
  var _iterator = _createForOfIteratorHelper2(e.keys()),
    _step;
  try {
    for (_iterator.s(); !(_step = _iterator.n()).done;) {
      var _r8 = _step.value;
      var _n14 = void 0;
      _r8._dirtyLevel < t && (null != _n14 ? _n14 : _n14 = e.get(_r8) === _r8._trackId) && (_r8._shouldSchedule || (_r8._shouldSchedule = 0 === _r8._dirtyLevel), _r8._dirtyLevel = t), _r8._shouldSchedule && (null != _n14 ? _n14 : _n14 = e.get(_r8) === _r8._trackId) && (_r8.trigger(), _r8._runnings && !_r8.allowRecurse || 2 === _r8._dirtyLevel || (_r8._shouldSchedule = !1, _r8.scheduler && mn.push(_r8.scheduler)));
    }
  } catch (err) {
    _iterator.e(err);
  } finally {
    _iterator.f();
  }
  dn();
}
var gn = function gn(e, t) {
    var n = new Map();
    return n.cleanup = e, n.computed = t, n;
  },
  vn = new WeakMap(),
  yn = Symbol(""),
  bn = Symbol("");
function wn(e, t, n) {
  if (an && en) {
    var _t16 = vn.get(e);
    _t16 || vn.set(e, _t16 = new Map());
    var _r9 = _t16.get(n);
    _r9 || _t16.set(n, _r9 = gn(function () {
      return _t16.delete(n);
    })), pn(en, _r9);
  }
}
function kn(e, t, n, r, i, o) {
  var s = vn.get(e);
  if (!s) return;
  var a = [];
  if ("clear" === t) a = _toConsumableArray2(s.values());else if ("length" === n && f(e)) {
    var _e8 = Number(r);
    s.forEach(function (t, n) {
      ("length" === n || !_(n) && n >= _e8) && a.push(t);
    });
  } else switch (void 0 !== n && a.push(s.get(n)), t) {
    case "add":
      f(e) ? k(n) && a.push(s.get("length")) : (a.push(s.get(yn)), h(e) && a.push(s.get(bn)));
      break;
    case "delete":
      f(e) || (a.push(s.get(yn)), h(e) && a.push(s.get(bn)));
      break;
    case "set":
      h(e) && a.push(s.get(yn));
  }
  hn();
  var _iterator2 = _createForOfIteratorHelper2(a),
    _step2;
  try {
    for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {
      var _c2 = _step2.value;
      _c2 && _n(_c2, 4);
    }
  } catch (err) {
    _iterator2.e(err);
  } finally {
    _iterator2.f();
  }
  dn();
}
var xn = e("__proto__,__v_isRef,__isVue"),
  Sn = new Set(Object.getOwnPropertyNames(Symbol).filter(function (e) {
    return "arguments" !== e && "caller" !== e;
  }).map(function (e) {
    return Symbol[e];
  }).filter(_)),
  Cn = En();
function En() {
  var e = {};
  return ["includes", "indexOf", "lastIndexOf"].forEach(function (t) {
    e[t] = function () {
      var n = hr(this);
      for (var _t17 = 0, _i5 = this.length; _t17 < _i5; _t17++) wn(n, 0, _t17 + "");
      for (var _len8 = arguments.length, e = new Array(_len8), _key8 = 0; _key8 < _len8; _key8++) {
        e[_key8] = arguments[_key8];
      }
      var r = n[t].apply(n, e);
      return -1 === r || !1 === r ? n[t].apply(n, _toConsumableArray2(e.map(hr))) : r;
    };
  }), ["push", "pop", "shift", "unshift", "splice"].forEach(function (t) {
    e[t] = function () {
      un(), hn();
      for (var _len9 = arguments.length, e = new Array(_len9), _key9 = 0; _key9 < _len9; _key9++) {
        e[_key9] = arguments[_key9];
      }
      var n = hr(this)[t].apply(this, e);
      return dn(), fn(), n;
    };
  }), e;
}
function On(e) {
  var t = hr(this);
  return wn(t, 0, e), t.hasOwnProperty(e);
}
var An = /*#__PURE__*/function () {
  function An() {
    var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : !1;
    var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : !1;
    _classCallCheck2(this, An);
    this._isReadonly = e, this._isShallow = t;
  }
  _createClass2(An, [{
    key: "get",
    value: function get(e, t, n) {
      var r = this._isReadonly,
        i = this._isShallow;
      if ("__v_isReactive" === t) return !r;
      if ("__v_isReadonly" === t) return r;
      if ("__v_isShallow" === t) return i;
      if ("__v_raw" === t) return n === (r ? i ? ir : rr : i ? nr : tr).get(e) || Object.getPrototypeOf(e) === Object.getPrototypeOf(n) ? e : void 0;
      var o = f(e);
      if (!r) {
        if (o && u(Cn, t)) return Reflect.get(Cn, t, n);
        if ("hasOwnProperty" === t) return On;
      }
      var s = Reflect.get(e, t, n);
      return (_(t) ? Sn.has(t) : xn(t)) ? s : (r || wn(e, 0, t), i ? s : yr(s) ? o && k(t) ? s : s.value : g(s) ? r ? ar(s) : sr(s) : s);
    }
  }]);
  return An;
}();
var In = /*#__PURE__*/function (_An) {
  _inherits2(In, _An);
  var _super = _createSuper2(In);
  function In() {
    var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : !1;
    _classCallCheck2(this, In);
    return _super.call(this, !1, e);
  }
  _createClass2(In, [{
    key: "set",
    value: function set(e, t, n, r) {
      var i = e[t];
      if (!this._isShallow) {
        var _t18 = ur(i);
        if (fr(n) || ur(n) || (i = hr(i), n = hr(n)), !f(e) && yr(i) && !yr(n)) return !_t18 && (i.value = n, !0);
      }
      var o = f(e) && k(t) ? Number(t) < e.length : u(e, t),
        s = Reflect.set(e, t, n, r);
      return e === hr(r) && (o ? $(n, i) && kn(e, "set", t, n) : kn(e, "add", t, n)), s;
    }
  }, {
    key: "deleteProperty",
    value: function deleteProperty(e, t) {
      var n = u(e, t);
      e[t];
      var r = Reflect.deleteProperty(e, t);
      return r && n && kn(e, "delete", t, void 0), r;
    }
  }, {
    key: "has",
    value: function has(e, t) {
      var n = Reflect.has(e, t);
      return _(t) && Sn.has(t) || wn(e, 0, t), n;
    }
  }, {
    key: "ownKeys",
    value: function ownKeys(e) {
      return wn(e, 0, f(e) ? "length" : yn), Reflect.ownKeys(e);
    }
  }]);
  return In;
}(An);
var zn = /*#__PURE__*/function (_An2) {
  _inherits2(zn, _An2);
  var _super2 = _createSuper2(zn);
  function zn() {
    var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : !1;
    _classCallCheck2(this, zn);
    return _super2.call(this, !0, e);
  }
  _createClass2(zn, [{
    key: "set",
    value: function set(e, t) {
      return !0;
    }
  }, {
    key: "deleteProperty",
    value: function deleteProperty(e, t) {
      return !0;
    }
  }]);
  return zn;
}(An);
var $n = new In(),
  Pn = new zn(),
  Rn = new In(!0),
  Tn = function Tn(e) {
    return e;
  },
  Bn = function Bn(e) {
    return Reflect.getPrototypeOf(e);
  };
function jn(e, t) {
  var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : !1;
  var r = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : !1;
  var i = hr(e = e.__v_raw),
    o = hr(t);
  n || ($(t, o) && wn(i, 0, t), wn(i, 0, o));
  var _Bn = Bn(i),
    s = _Bn.has,
    a = r ? Tn : n ? mr : pr;
  return s.call(i, t) ? a(e.get(t)) : s.call(i, o) ? a(e.get(o)) : void (e !== i && e.get(t));
}
function Dn(e) {
  var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : !1;
  var n = this.__v_raw,
    r = hr(n),
    i = hr(e);
  return t || ($(e, i) && wn(r, 0, e), wn(r, 0, i)), e === i ? n.has(e) : n.has(e) || n.has(i);
}
function Ln(e) {
  var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : !1;
  return e = e.__v_raw, !t && wn(hr(e), 0, yn), Reflect.get(e, "size", e);
}
function Nn(e) {
  e = hr(e);
  var t = hr(this);
  return Bn(t).has.call(t, e) || (t.add(e), kn(t, "add", e, e)), this;
}
function Un(e, t) {
  t = hr(t);
  var n = hr(this),
    _Bn2 = Bn(n),
    r = _Bn2.has,
    i = _Bn2.get;
  var o = r.call(n, e);
  o || (e = hr(e), o = r.call(n, e));
  var s = i.call(n, e);
  return n.set(e, t), o ? $(t, s) && kn(n, "set", e, t) : kn(n, "add", e, t), this;
}
function Fn(e) {
  var t = hr(this),
    _Bn3 = Bn(t),
    n = _Bn3.has,
    r = _Bn3.get;
  var i = n.call(t, e);
  i || (e = hr(e), i = n.call(t, e)), r && r.call(t, e);
  var o = t.delete(e);
  return i && kn(t, "delete", e, void 0), o;
}
function Mn() {
  var e = hr(this),
    t = 0 !== e.size,
    n = e.clear();
  return t && kn(e, "clear", void 0, void 0), n;
}
function Wn(e, t) {
  return function (n, r) {
    var i = this,
      o = i.__v_raw,
      s = hr(o),
      a = t ? Tn : e ? mr : pr;
    return !e && wn(s, 0, yn), o.forEach(function (e, t) {
      return n.call(r, a(e), a(t), i);
    });
  };
}
function Hn(e, t, n) {
  return function () {
    var i = this.__v_raw,
      o = hr(i),
      s = h(o),
      a = "entries" === e || e === Symbol.iterator && s,
      c = "keys" === e && s,
      l = i[e].apply(i, arguments),
      u = n ? Tn : t ? mr : pr;
    return !t && wn(o, 0, c ? bn : yn), _defineProperty2({
      next: function next() {
        var _l$next = l.next(),
          e = _l$next.value,
          t = _l$next.done;
        return t ? {
          value: e,
          done: t
        } : {
          value: a ? [u(e[0]), u(e[1])] : u(e),
          done: t
        };
      }
    }, Symbol.iterator, function () {
      return this;
    });
  };
}
function Zn(e) {
  return function () {
    return "delete" !== e && ("clear" === e ? void 0 : this);
  };
}
function Vn() {
  var e = {
      get: function get(e) {
        return jn(this, e);
      },
      get size() {
        return Ln(this);
      },
      has: Dn,
      add: Nn,
      set: Un,
      delete: Fn,
      clear: Mn,
      forEach: Wn(!1, !1)
    },
    t = {
      get: function get(e) {
        return jn(this, e, !1, !0);
      },
      get size() {
        return Ln(this);
      },
      has: Dn,
      add: Nn,
      set: Un,
      delete: Fn,
      clear: Mn,
      forEach: Wn(!1, !0)
    },
    n = {
      get: function get(e) {
        return jn(this, e, !0);
      },
      get size() {
        return Ln(this, !0);
      },
      has: function has(e) {
        return Dn.call(this, e, !0);
      },
      add: Zn("add"),
      set: Zn("set"),
      delete: Zn("delete"),
      clear: Zn("clear"),
      forEach: Wn(!0, !1)
    },
    r = {
      get: function get(e) {
        return jn(this, e, !0, !0);
      },
      get size() {
        return Ln(this, !0);
      },
      has: function has(e) {
        return Dn.call(this, e, !0);
      },
      add: Zn("add"),
      set: Zn("set"),
      delete: Zn("delete"),
      clear: Zn("clear"),
      forEach: Wn(!0, !0)
    };
  return ["keys", "values", "entries", Symbol.iterator].forEach(function (i) {
    e[i] = Hn(i, !1, !1), n[i] = Hn(i, !0, !1), t[i] = Hn(i, !1, !0), r[i] = Hn(i, !0, !0);
  }), [e, n, t, r];
}
var _Vn = Vn(),
  _Vn2 = _slicedToArray2(_Vn, 4),
  Gn = _Vn2[0],
  Kn = _Vn2[1],
  Xn = _Vn2[2],
  Yn = _Vn2[3];
function qn(e, t) {
  var n = t ? e ? Yn : Xn : e ? Kn : Gn;
  return function (t, r, i) {
    return "__v_isReactive" === r ? !e : "__v_isReadonly" === r ? e : "__v_raw" === r ? t : Reflect.get(u(n, r) && r in t ? n : t, r, i);
  };
}
var Jn = {
    get: qn(!1, !1)
  },
  Qn = {
    get: qn(!1, !0)
  },
  er = {
    get: qn(!0, !1)
  },
  tr = new WeakMap(),
  nr = new WeakMap(),
  rr = new WeakMap(),
  ir = new WeakMap();
function or(e) {
  return e.__v_skip || !Object.isExtensible(e) ? 0 : function (e) {
    switch (e) {
      case "Object":
      case "Array":
        return 1;
      case "Map":
      case "Set":
      case "WeakMap":
      case "WeakSet":
        return 2;
      default:
        return 0;
    }
  }(function (e) {
    return b(e).slice(8, -1);
  }(e));
}
function sr(e) {
  return ur(e) ? e : cr(e, !1, $n, Jn, tr);
}
function ar(e) {
  return cr(e, !0, Pn, er, rr);
}
function cr(e, t, n, r, i) {
  if (!g(e)) return e;
  if (e.__v_raw && (!t || !e.__v_isReactive)) return e;
  var o = i.get(e);
  if (o) return o;
  var s = or(e);
  if (0 === s) return e;
  var a = new Proxy(e, 2 === s ? r : n);
  return i.set(e, a), a;
}
function lr(e) {
  return ur(e) ? lr(e.__v_raw) : !(!e || !e.__v_isReactive);
}
function ur(e) {
  return !(!e || !e.__v_isReadonly);
}
function fr(e) {
  return !(!e || !e.__v_isShallow);
}
function hr(e) {
  var t = e && e.__v_raw;
  return t ? hr(t) : e;
}
function dr(e) {
  return Object.isExtensible(e) && function (e, t, n) {
    Object.defineProperty(e, t, {
      configurable: !0,
      enumerable: !1,
      value: n
    });
  }(e, "__v_skip", !0), e;
}
var pr = function pr(e) {
    return g(e) ? sr(e) : e;
  },
  mr = function mr(e) {
    return g(e) ? ar(e) : e;
  };
var _r = /*#__PURE__*/function () {
  function _r(e, t, n, r) {
    var _this3 = this;
    _classCallCheck2(this, _r);
    this.getter = e, this._setter = t, this.dep = void 0, this.__v_isRef = !0, this.__v_isReadonly = !1, this.effect = new nn(function () {
      return e(_this3._value);
    }, function () {
      return vr(_this3, 2 === _this3.effect._dirtyLevel ? 2 : 3);
    }), this.effect.computed = this, this.effect.active = this._cacheable = !r, this.__v_isReadonly = n;
  }
  _createClass2(_r, [{
    key: "value",
    get: function get() {
      var e = hr(this);
      return e._cacheable && !e.effect.dirty || !$(e._value, e._value = e.effect.run()) || vr(e, 4), gr(e), e.effect._dirtyLevel >= 2 && vr(e, 2), e._value;
    },
    set: function set(e) {
      this._setter(e);
    }
  }, {
    key: "_dirty",
    get: function get() {
      return this.effect.dirty;
    },
    set: function set(e) {
      this.effect.dirty = e;
    }
  }]);
  return _r;
}();
function gr(e) {
  var t;
  an && en && (e = hr(e), pn(en, null != (t = e.dep) ? t : e.dep = gn(function () {
    return e.dep = void 0;
  }, e instanceof _r ? e : void 0)));
}
function vr(e) {
  var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 4;
  var n = arguments.length > 2 ? arguments[2] : undefined;
  var r = (e = hr(e)).dep;
  r && _n(r, t);
}
function yr(e) {
  return !(!e || !0 !== e.__v_isRef);
}
function br(e) {
  return function (e, t) {
    if (yr(e)) return e;
    return new wr(e, t);
  }(e, !1);
}
var wr = /*#__PURE__*/function () {
  function wr(e, t) {
    _classCallCheck2(this, wr);
    this.__v_isShallow = t, this.dep = void 0, this.__v_isRef = !0, this._rawValue = t ? e : hr(e), this._value = t ? e : pr(e);
  }
  _createClass2(wr, [{
    key: "value",
    get: function get() {
      return gr(this), this._value;
    },
    set: function set(e) {
      var t = this.__v_isShallow || fr(e) || ur(e);
      e = t ? e : hr(e), $(e, this._rawValue) && (this._rawValue = e, this._value = t ? e : pr(e), vr(this, 4));
    }
  }]);
  return wr;
}();
function kr(e) {
  return yr(e) ? e.value : e;
}
var xr = {
  get: function get(e, t, n) {
    return kr(Reflect.get(e, t, n));
  },
  set: function set(e, t, n, r) {
    var i = e[t];
    return yr(i) && !yr(n) ? (i.value = n, !0) : Reflect.set(e, t, n, r);
  }
};
function Sr(e) {
  return lr(e) ? e : new Proxy(e, xr);
}
function Cr(e, t, n, r) {
  try {
    return r ? e.apply(void 0, _toConsumableArray2(r)) : e();
  } catch (i) {
    Or(i, t, n);
  }
}
function Er(e, t, n, r) {
  if (p(e)) {
    var _i6 = Cr(e, t, n, r);
    return _i6 && v(_i6) && _i6.catch(function (e) {
      Or(e, t, n);
    }), _i6;
  }
  var i = [];
  for (var _o6 = 0; _o6 < e.length; _o6++) i.push(Er(e[_o6], t, n, r));
  return i;
}
function Or(e, t, n) {
  var r = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : !0;
  var i = t ? t.vnode : null;
  if (t) {
    var _r10 = t.parent;
    var _i7 = t.proxy,
      _o7 = "https://vuejs.org/error-reference/#runtime-".concat(n);
    for (; _r10;) {
      var _t19 = _r10.ec;
      if (_t19) for (var _n15 = 0; _n15 < _t19.length; _n15++) if (!1 === _t19[_n15](e, _i7, _o7)) return;
      _r10 = _r10.parent;
    }
    var _s5 = t.appContext.config.errorHandler;
    if (_s5) return void Cr(_s5, null, 10, [e, _i7, _o7]);
  }
  Ar(e, n, i, r);
}
function Ar(e, t, n) {
  var r = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : !0;
  console.error(e);
}
var Ir = !1,
  zr = !1;
var $r = [];
var Pr = 0;
var Rr = [];
var Tr = null,
  Br = 0;
var jr = Promise.resolve();
var Dr = null;
function Lr(e) {
  var t = Dr || jr;
  return e ? t.then(this ? e.bind(this) : e) : t;
}
function Nr(e) {
  $r.length && $r.includes(e, Ir && e.allowRecurse ? Pr + 1 : Pr) || (null == e.id ? $r.push(e) : $r.splice(function (e) {
    var t = Pr + 1,
      n = $r.length;
    for (; t < n;) {
      var _r11 = t + n >>> 1,
        _i8 = $r[_r11],
        _o8 = Wr(_i8);
      _o8 < e || _o8 === e && _i8.pre ? t = _r11 + 1 : n = _r11;
    }
    return t;
  }(e.id), 0, e), Ur());
}
function Ur() {
  Ir || zr || (zr = !0, Dr = jr.then(Zr));
}
function Fr(e) {
  f(e) ? Rr.push.apply(Rr, _toConsumableArray2(e)) : Tr && Tr.includes(e, e.allowRecurse ? Br + 1 : Br) || Rr.push(e), Ur();
}
function Mr(e, t) {
  var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : Ir ? Pr + 1 : 0;
  for (; n < $r.length; n++) {
    var _e9 = $r[n];
    _e9 && _e9.pre && ($r.splice(n, 1), n--, _e9());
  }
}
var Wr = function Wr(e) {
    return null == e.id ? 1 / 0 : e.id;
  },
  Hr = function Hr(e, t) {
    var n = Wr(e) - Wr(t);
    if (0 === n) {
      if (e.pre && !t.pre) return -1;
      if (t.pre && !e.pre) return 1;
    }
    return n;
  };
function Zr(e) {
  zr = !1, Ir = !0, $r.sort(Hr);
  try {
    for (Pr = 0; Pr < $r.length; Pr++) {
      var _e10 = $r[Pr];
      _e10 && !1 !== _e10.active && Cr(_e10, null, 14);
    }
  } finally {
    Pr = 0, $r.length = 0, function (e) {
      if (Rr.length) {
        var _Tr;
        var _e11 = _toConsumableArray2(new Set(Rr)).sort(function (e, t) {
          return Wr(e) - Wr(t);
        });
        if (Rr.length = 0, Tr) return void (_Tr = Tr).push.apply(_Tr, _toConsumableArray2(_e11));
        for (Tr = _e11, Br = 0; Br < Tr.length; Br++) Tr[Br]();
        Tr = null, Br = 0;
      }
    }(), Ir = !1, Dr = null, ($r.length || Rr.length) && Zr();
  }
}
function Vr(e, n) {
  if (e.isUnmounted) return;
  var i = e.vnode.props || t;
  for (var _len10 = arguments.length, r = new Array(_len10 > 2 ? _len10 - 2 : 0), _key10 = 2; _key10 < _len10; _key10++) {
    r[_key10 - 2] = arguments[_key10];
  }
  var o = r;
  var s = n.startsWith("update:"),
    a = s && n.slice(7);
  if (a && a in i) {
    var _e12 = "".concat("modelValue" === a ? "model" : a, "Modifiers"),
      _ref3 = i[_e12] || t,
      _n16 = _ref3.number,
      _s6 = _ref3.trim;
    _s6 && (o = r.map(function (e) {
      return m(e) ? e.trim() : e;
    })), _n16 && (o = r.map(R));
  }
  var c,
    l = i[c = z(n)] || i[c = z(E(n))];
  !l && s && (l = i[c = z(A(n))]), l && Er(l, e, 6, o);
  var u = i[c + "Once"];
  if (u) {
    if (e.emitted) {
      if (e.emitted[c]) return;
    } else e.emitted = {};
    e.emitted[c] = !0, Er(u, e, 6, o);
  }
}
function Gr(e, t) {
  var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : !1;
  var r = t.emitsCache,
    i = r.get(e);
  if (void 0 !== i) return i;
  var o = e.emits;
  var s = {},
    c = !1;
  if (!p(e)) {
    var _r12 = function _r12(e) {
      var n = Gr(e, t, !0);
      n && (c = !0, a(s, n));
    };
    !n && t.mixins.length && t.mixins.forEach(_r12), e.extends && _r12(e.extends), e.mixins && e.mixins.forEach(_r12);
  }
  return o || c ? (f(o) ? o.forEach(function (e) {
    return s[e] = null;
  }) : a(s, o), g(e) && r.set(e, s), s) : (g(e) && r.set(e, null), null);
}
function Kr(e, t) {
  return !(!e || !o(t)) && (t = t.slice(2).replace(/Once$/, ""), u(e, t[0].toLowerCase() + t.slice(1)) || u(e, A(t)) || u(e, t));
}
var Xr = null;
function Yr(e) {
  var t = Xr;
  return Xr = e, e && e.type.__scopeId, t;
}
function qr(e, t) {
  return e && (e[t] || e[E(t)] || e[I(E(t))]);
}
var Jr = {};
function Qr(e, t, n) {
  return ei(e, t, n);
}
function ei(e, n) {
  var _ref4 = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : t,
    i = _ref4.immediate,
    o = _ref4.deep,
    s = _ref4.flush,
    a = _ref4.once,
    l = _ref4.onTrack,
    u = _ref4.onTrigger;
  if (n && a) {
    var _e13 = n;
    n = function n() {
      _e13.apply(void 0, arguments), C();
    };
  }
  var h = eo,
    d = function d(e) {
      return !0 === o ? e : ri(e, !1 === o ? 1 : void 0);
    };
  var m,
    _,
    g = !1,
    v = !1;
  if (yr(e) ? (m = function m() {
    return e.value;
  }, g = fr(e)) : lr(e) ? (m = function m() {
    return d(e);
  }, g = !0) : f(e) ? (v = !0, g = e.some(function (e) {
    return lr(e) || fr(e);
  }), m = function m() {
    return e.map(function (e) {
      return yr(e) ? e.value : lr(e) ? d(e) : p(e) ? Cr(e, h, 2) : void 0;
    });
  }) : m = p(e) ? n ? function () {
    return Cr(e, h, 2);
  } : function () {
    return _ && _(), Er(e, h, 3, [y]);
  } : r, n && o) {
    var _e14 = m;
    m = function m() {
      return ri(_e14());
    };
  }
  var y = function y(e) {
      _ = x.onStop = function () {
        Cr(e, h, 4), _ = x.onStop = void 0;
      };
    },
    b = v ? new Array(e.length).fill(Jr) : Jr;
  var w = function w() {
    if (x.active && x.dirty) if (n) {
      var _e15 = x.run();
      (o || g || (v ? _e15.some(function (e, t) {
        return $(e, b[t]);
      }) : $(_e15, b))) && (_ && _(), Er(n, h, 3, [_e15, b === Jr ? void 0 : v && b[0] === Jr ? [] : b, y]), b = _e15);
    } else x.run();
  };
  var k;
  w.allowRecurse = !!n, "sync" === s ? k = w : "post" === s ? k = function k() {
    return Xi(w, h && h.suspense);
  } : (w.pre = !0, h && (w.id = h.uid), k = function k() {
    return Nr(w);
  });
  var x = new nn(m, r, k),
    S = Qt,
    C = function C() {
      x.stop(), S && c(S.effects, x);
    };
  return n ? i ? w() : b = x.run() : "post" === s ? Xi(x.run.bind(x), h && h.suspense) : x.run(), C;
}
function ti(e, t, n) {
  var r = this.proxy,
    i = m(e) ? e.includes(".") ? ni(r, e) : function () {
      return r[e];
    } : e.bind(r, r);
  var o;
  p(t) ? o = t : (o = t.handler, n = t);
  var s = io(this),
    a = ei(i, o.bind(r), n);
  return s(), a;
}
function ni(e, t) {
  var n = t.split(".");
  return function () {
    var t = e;
    for (var _e16 = 0; _e16 < n.length && t; _e16++) t = t[n[_e16]];
    return t;
  };
}
function ri(e, t) {
  var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;
  var r = arguments.length > 3 ? arguments[3] : undefined;
  if (!g(e) || e.__v_skip) return e;
  if (t && t > 0) {
    if (n >= t) return e;
    n++;
  }
  if ((r = r || new Set()).has(e)) return e;
  if (r.add(e), yr(e)) ri(e.value, t, n, r);else if (f(e)) for (var _i9 = 0; _i9 < e.length; _i9++) ri(e[_i9], t, n, r);else if (d(e) || h(e)) e.forEach(function (e) {
    ri(e, t, n, r);
  });else if (w(e)) for (var _i10 in e) ri(e[_i10], t, n, r);
  return e;
}
function ii() {
  return {
    app: null,
    config: {
      isNativeTag: i,
      performance: !1,
      globalProperties: {},
      optionMergeStrategies: {},
      errorHandler: void 0,
      warnHandler: void 0,
      compilerOptions: {}
    },
    mixins: [],
    components: {},
    directives: {},
    provides: Object.create(null),
    optionsCache: new WeakMap(),
    propsCache: new WeakMap(),
    emitsCache: new WeakMap()
  };
}
var oi = 0;
var si = null;
function ai(e, t) {
  var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : !1;
  var r = eo || Xr;
  if (r || si) {
    var _i11 = r ? null == r.parent ? r.vnode.appContext && r.vnode.appContext.provides : r.parent.provides : si._context.provides;
    if (_i11 && e in _i11) return _i11[e];
    if (arguments.length > 1) return n && p(t) ? t.call(r && r.proxy) : t;
  }
}
function ci(e, t) {
  ui(e, "a", t);
}
function li(e, t) {
  ui(e, "da", t);
}
function ui(e, t) {
  var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : eo;
  var r = e.__wdc || (e.__wdc = function () {
    var t = n;
    for (; t;) {
      if (t.isDeactivated) return;
      t = t.parent;
    }
    return e();
  });
  if (hi(t, r, n), n) {
    var _e17 = n.parent;
    for (; _e17 && _e17.parent;) _e17.parent.vnode.type.__isKeepAlive && fi(r, t, n, _e17), _e17 = _e17.parent;
  }
}
function fi(e, t, n, r) {
  var i = hi(t, e, r, !0);
  yi(function () {
    c(r[t], i);
  }, n);
}
function hi(e, t) {
  var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : eo;
  var r = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : !1;
  if (n) {
    (function (e) {
      return K.indexOf(e) > -1;
    })(e) && (n = n.root);
    var _i12 = n[e] || (n[e] = []),
      _o9 = t.__weh || (t.__weh = function () {
        if (n.isUnmounted) return;
        un();
        for (var _len11 = arguments.length, r = new Array(_len11), _key11 = 0; _key11 < _len11; _key11++) {
          r[_key11] = arguments[_key11];
        }
        var i = io(n),
          o = Er(t, n, e, r);
        return i(), fn(), o;
      });
    return r ? _i12.unshift(_o9) : _i12.push(_o9), _o9;
  }
}
var di = function di(e) {
    return function (t) {
      var n = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : eo;
      return (!ao || "sp" === e) && hi(e, function () {
        return t.apply(void 0, arguments);
      }, n);
    };
  },
  pi = di("bm"),
  mi = di("m"),
  _i = di("bu"),
  gi = di("u"),
  vi = di("bum"),
  yi = di("um"),
  bi = di("sp"),
  wi = di("rtg"),
  ki = di("rtc");
function xi(e) {
  var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : eo;
  hi("ec", e, t);
}
var Si = function Si(e) {
  return e ? so(e) ? uo(e) || e.proxy : Si(e.parent) : null;
};
var Ci = a(Object.create(null), {
    $: function $(e) {
      return e;
    },
    $el: function $el(e) {
      return e.__$el || (e.__$el = {});
    },
    $data: function $data(e) {
      return e.data;
    },
    $props: function $props(e) {
      return e.props;
    },
    $attrs: function $attrs(e) {
      return e.attrs;
    },
    $slots: function $slots(e) {
      return e.slots;
    },
    $refs: function $refs(e) {
      return e.refs;
    },
    $parent: function $parent(e) {
      return Si(e.parent);
    },
    $root: function $root(e) {
      return Si(e.root);
    },
    $emit: function $emit(e) {
      return e.emit;
    },
    $options: function $options(e) {
      return Ri(e);
    },
    $forceUpdate: function $forceUpdate(e) {
      return e.f || (e.f = function () {
        e.effect.dirty = !0, Nr(e.update);
      });
    },
    $watch: function $watch(e) {
      return ti.bind(e);
    }
  }),
  Ei = function Ei(e, n) {
    return e !== t && !e.__isScriptSetup && u(e, n);
  },
  Oi = {
    get: function get(_ref12, n) {
      var e = _ref12._;
      var r = e.ctx,
        i = e.setupState,
        o = e.data,
        s = e.props,
        a = e.accessCache,
        c = e.type,
        l = e.appContext;
      var f;
      if ("$" !== n[0]) {
        var _c3 = a[n];
        if (void 0 !== _c3) switch (_c3) {
          case 1:
            return i[n];
          case 2:
            return o[n];
          case 4:
            return r[n];
          case 3:
            return s[n];
        } else {
          if (Ei(i, n)) return a[n] = 1, i[n];
          if (o !== t && u(o, n)) return a[n] = 2, o[n];
          if ((f = e.propsOptions[0]) && u(f, n)) return a[n] = 3, s[n];
          if (r !== t && u(r, n)) return a[n] = 4, r[n];
          Ii && (a[n] = 0);
        }
      }
      var h = Ci[n];
      var d, p;
      return h ? ("$attrs" === n && wn(e, 0, n), h(e)) : (d = c.__cssModules) && (d = d[n]) ? d : r !== t && u(r, n) ? (a[n] = 4, r[n]) : (p = l.config.globalProperties, u(p, n) ? p[n] : void 0);
    },
    set: function set(_ref13, n, r) {
      var e = _ref13._;
      var i = e.data,
        o = e.setupState,
        s = e.ctx;
      return Ei(o, n) ? (o[n] = r, !0) : i !== t && u(i, n) ? (i[n] = r, !0) : !u(e.props, n) && ("$" !== n[0] || !(n.slice(1) in e)) && (s[n] = r, !0);
    },
    has: function has(_ref14, a) {
      var _ref14$_ = _ref14._,
        e = _ref14$_.data,
        n = _ref14$_.setupState,
        r = _ref14$_.accessCache,
        i = _ref14$_.ctx,
        o = _ref14$_.appContext,
        s = _ref14$_.propsOptions;
      var c;
      return !!r[a] || e !== t && u(e, a) || Ei(n, a) || (c = s[0]) && u(c, a) || u(i, a) || u(Ci, a) || u(o.config.globalProperties, a);
    },
    defineProperty: function defineProperty(e, t, n) {
      return null != n.get ? e._.accessCache[t] = 0 : u(n, "value") && this.set(e, t, n.value, null), Reflect.defineProperty(e, t, n);
    }
  };
function Ai(e) {
  return f(e) ? e.reduce(function (e, t) {
    return e[t] = null, e;
  }, {}) : e;
}
var Ii = !0;
function zi(e) {
  var t = Ri(e),
    n = e.proxy,
    i = e.ctx;
  Ii = !1, t.beforeCreate && $i(t.beforeCreate, e, "bc");
  var o = t.data,
    s = t.computed,
    a = t.methods,
    c = t.watch,
    l = t.provide,
    u = t.inject,
    h = t.created,
    d = t.beforeMount,
    m = t.mounted,
    _ = t.beforeUpdate,
    v = t.updated,
    y = t.activated,
    b = t.deactivated,
    w = t.beforeDestroy,
    k = t.beforeUnmount,
    x = t.destroyed,
    S = t.unmounted,
    C = t.render,
    E = t.renderTracked,
    O = t.renderTriggered,
    A = t.errorCaptured,
    I = t.serverPrefetch,
    z = t.expose,
    $ = t.inheritAttrs,
    P = t.components,
    R = t.directives,
    T = t.filters;
  if (u && function (e, t) {
    var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : r;
    f(e) && (e = Di(e));
    var _loop = function _loop() {
      var n = e[_r13];
      var i;
      i = g(n) ? "default" in n ? ai(n.from || _r13, n.default, !0) : ai(n.from || _r13) : ai(n), yr(i) ? Object.defineProperty(t, _r13, {
        enumerable: !0,
        configurable: !0,
        get: function get() {
          return i.value;
        },
        set: function set(e) {
          return i.value = e;
        }
      }) : t[_r13] = i;
    };
    for (var _r13 in e) {
      _loop();
    }
  }(u, i, null), a) for (var _r14 in a) {
    var _e18 = a[_r14];
    p(_e18) && (i[_r14] = _e18.bind(n));
  }
  if (o) {
    var _t20 = o.call(n, n);
    g(_t20) && (e.data = sr(_t20));
  }
  if (Ii = !0, s) {
    var _loop2 = function _loop2() {
      var e = s[_f],
        t = p(e) ? e.bind(n, n) : p(e.get) ? e.get.bind(n, n) : r,
        o = !p(e) && p(e.set) ? e.set.bind(n) : r,
        a = fo({
          get: t,
          set: o
        });
      Object.defineProperty(i, _f, {
        enumerable: !0,
        configurable: !0,
        get: function get() {
          return a.value;
        },
        set: function set(e) {
          return a.value = e;
        }
      });
    };
    for (var _f in s) {
      _loop2();
    }
  }
  if (c) for (var _r15 in c) Pi(c[_r15], i, n, _r15);
  function B(e, t) {
    f(t) ? t.forEach(function (t) {
      return e(t.bind(n));
    }) : t && e(t.bind(n));
  }
  if (function () {
    if (l) {
      var _e19 = p(l) ? l.call(n) : l;
      Reflect.ownKeys(_e19).forEach(function (t) {
        !function (e, t) {
          if (eo) {
            var _n17 = eo.provides;
            var _r16 = eo.parent && eo.parent.provides;
            _r16 === _n17 && (_n17 = eo.provides = Object.create(_r16)), _n17[e] = t, "app" === eo.type.mpType && eo.appContext.app.provide(e, t);
          }
        }(t, _e19[t]);
      });
    }
  }(), h && $i(h, e, "c"), B(pi, d), B(mi, m), B(_i, _), B(gi, v), B(ci, y), B(li, b), B(xi, A), B(ki, E), B(wi, O), B(vi, k), B(yi, S), B(bi, I), f(z)) if (z.length) {
    var _t21 = e.exposed || (e.exposed = {});
    z.forEach(function (e) {
      Object.defineProperty(_t21, e, {
        get: function get() {
          return n[e];
        },
        set: function set(t) {
          return n[e] = t;
        }
      });
    });
  } else e.exposed || (e.exposed = {});
  C && e.render === r && (e.render = C), null != $ && (e.inheritAttrs = $), P && (e.components = P), R && (e.directives = R), e.ctx.$onApplyOptions && e.ctx.$onApplyOptions(t, e, n);
}
function $i(e, t, n) {
  Er(f(e) ? e.map(function (e) {
    return e.bind(t.proxy);
  }) : e.bind(t.proxy), t, n);
}
function Pi(e, t, n, r) {
  var i = r.includes(".") ? ni(n, r) : function () {
    return n[r];
  };
  if (m(e)) {
    var _n18 = t[e];
    p(_n18) && Qr(i, _n18);
  } else if (p(e)) Qr(i, e.bind(n));else if (g(e)) if (f(e)) e.forEach(function (e) {
    return Pi(e, t, n, r);
  });else {
    var _r17 = p(e.handler) ? e.handler.bind(n) : t[e.handler];
    p(_r17) && Qr(i, _r17, e);
  }
}
function Ri(e) {
  var t = e.type,
    n = t.mixins,
    r = t.extends,
    _e$appContext = e.appContext,
    i = _e$appContext.mixins,
    o = _e$appContext.optionsCache,
    s = _e$appContext.config.optionMergeStrategies,
    a = o.get(t);
  var c;
  return a ? c = a : i.length || n || r ? (c = {}, i.length && i.forEach(function (e) {
    return Ti(c, e, s, !0);
  }), Ti(c, t, s)) : c = t, g(t) && o.set(t, c), c;
}
function Ti(e, t, n) {
  var r = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : !1;
  var i = t.mixins,
    o = t.extends;
  o && Ti(e, o, n, !0), i && i.forEach(function (t) {
    return Ti(e, t, n, !0);
  });
  for (var _s7 in t) if (r && "expose" === _s7) ;else {
    var _r18 = Bi[_s7] || n && n[_s7];
    e[_s7] = _r18 ? _r18(e[_s7], t[_s7]) : t[_s7];
  }
  return e;
}
var Bi = {
  data: ji,
  props: Ui,
  emits: Ui,
  methods: Ni,
  computed: Ni,
  beforeCreate: Li,
  created: Li,
  beforeMount: Li,
  mounted: Li,
  beforeUpdate: Li,
  updated: Li,
  beforeDestroy: Li,
  beforeUnmount: Li,
  destroyed: Li,
  unmounted: Li,
  activated: Li,
  deactivated: Li,
  errorCaptured: Li,
  serverPrefetch: Li,
  components: Ni,
  directives: Ni,
  watch: function watch(e, t) {
    if (!e) return t;
    if (!t) return e;
    var n = a(Object.create(null), e);
    for (var _r19 in t) n[_r19] = Li(e[_r19], t[_r19]);
    return n;
  },
  provide: ji,
  inject: function inject(e, t) {
    return Ni(Di(e), Di(t));
  }
};
function ji(e, t) {
  return t ? e ? function () {
    return a(p(e) ? e.call(this, this) : e, p(t) ? t.call(this, this) : t);
  } : t : e;
}
function Di(e) {
  if (f(e)) {
    var _t22 = {};
    for (var _n19 = 0; _n19 < e.length; _n19++) _t22[e[_n19]] = e[_n19];
    return _t22;
  }
  return e;
}
function Li(e, t) {
  return e ? _toConsumableArray2(new Set([].concat(e, t))) : t;
}
function Ni(e, t) {
  return e ? a(Object.create(null), e, t) : t;
}
function Ui(e, t) {
  return e ? f(e) && f(t) ? _toConsumableArray2(new Set([].concat(_toConsumableArray2(e), _toConsumableArray2(t)))) : a(Object.create(null), Ai(e), Ai(null != t ? t : {})) : t;
}
function Fi(e, t, n) {
  var r = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : !1;
  var i = {},
    o = {};
  e.propsDefaults = Object.create(null), Mi(e, t, i, o);
  for (var _s8 in e.propsOptions[0]) _s8 in i || (i[_s8] = void 0);
  n ? e.props = r ? i : cr(i, !1, Rn, Qn, nr) : e.type.props ? e.props = i : e.props = o, e.attrs = o;
}
function Mi(e, n, r, i) {
  var _e$propsOptions = _slicedToArray2(e.propsOptions, 2),
    o = _e$propsOptions[0],
    s = _e$propsOptions[1];
  var a,
    c = !1;
  if (n) for (var _t23 in n) {
    if (x(_t23)) continue;
    var _l = n[_t23];
    var _f2 = void 0;
    o && u(o, _f2 = E(_t23)) ? s && s.includes(_f2) ? (a || (a = {}))[_f2] = _l : r[_f2] = _l : Kr(e.emitsOptions, _t23) || _t23 in i && _l === i[_t23] || (i[_t23] = _l, c = !0);
  }
  if (s) {
    var _n20 = hr(r),
      _i13 = a || t;
    for (var _t24 = 0; _t24 < s.length; _t24++) {
      var _a4 = s[_t24];
      r[_a4] = Wi(o, _n20, _a4, _i13[_a4], e, !u(_i13, _a4));
    }
  }
  return c;
}
function Wi(e, t, n, r, i, o) {
  var s = e[n];
  if (null != s) {
    var _e20 = u(s, "default");
    if (_e20 && void 0 === r) {
      var _e21 = s.default;
      if (s.type !== Function && !s.skipFactory && p(_e21)) {
        var _o10 = i.propsDefaults;
        if (n in _o10) r = _o10[n];else {
          var _s9 = io(i);
          r = _o10[n] = _e21.call(null, t), _s9();
        }
      } else r = _e21;
    }
    s[0] && (o && !_e20 ? r = !1 : !s[1] || "" !== r && r !== A(n) || (r = !0));
  }
  return r;
}
function Hi(e, r) {
  var i = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : !1;
  var o = r.propsCache,
    s = o.get(e);
  if (s) return s;
  var c = e.props,
    l = {},
    h = [];
  var d = !1;
  if (!p(e)) {
    var _t25 = function _t25(e) {
      d = !0;
      var _Hi = Hi(e, r, !0),
        _Hi2 = _slicedToArray2(_Hi, 2),
        t = _Hi2[0],
        n = _Hi2[1];
      a(l, t), n && h.push.apply(h, _toConsumableArray2(n));
    };
    !i && r.mixins.length && r.mixins.forEach(_t25), e.extends && _t25(e.extends), e.mixins && e.mixins.forEach(_t25);
  }
  if (!c && !d) return g(e) && o.set(e, n), n;
  if (f(c)) for (var _n21 = 0; _n21 < c.length; _n21++) {
    var _e22 = E(c[_n21]);
    Zi(_e22) && (l[_e22] = t);
  } else if (c) for (var _t26 in c) {
    var _e23 = E(_t26);
    if (Zi(_e23)) {
      var _n22 = c[_t26],
        _r20 = l[_e23] = f(_n22) || p(_n22) ? {
          type: _n22
        } : a({}, _n22);
      if (_r20) {
        var _t27 = Ki(Boolean, _r20.type),
          _n23 = Ki(String, _r20.type);
        _r20[0] = _t27 > -1, _r20[1] = _n23 < 0 || _t27 < _n23, (_t27 > -1 || u(_r20, "default")) && h.push(_e23);
      }
    }
  }
  var m = [l, h];
  return g(e) && o.set(e, m), m;
}
function Zi(e) {
  return "$" !== e[0] && !x(e);
}
function Vi(e) {
  if (null === e) return "null";
  if ("function" == typeof e) return e.name || "";
  if ("object" == _typeof2(e)) {
    return e.constructor && e.constructor.name || "";
  }
  return "";
}
function Gi(e, t) {
  return Vi(e) === Vi(t);
}
function Ki(e, t) {
  return f(t) ? t.findIndex(function (t) {
    return Gi(t, e);
  }) : p(t) && Gi(t, e) ? 0 : -1;
}
var Xi = Fr;
function Yi(e) {
  return e ? lr(t = e) || ur(t) || "__vInternal" in e ? a({}, e) : e : null;
  var t;
}
var qi = ii();
var Ji = 0;
function Qi(e, n, r) {
  var i = e.type,
    o = (n ? n.appContext : e.appContext) || qi,
    s = {
      uid: Ji++,
      vnode: e,
      type: i,
      parent: n,
      appContext: o,
      root: null,
      next: null,
      subTree: null,
      effect: null,
      update: null,
      scope: new tn(!0),
      render: null,
      proxy: null,
      exposed: null,
      exposeProxy: null,
      withProxy: null,
      provides: n ? n.provides : Object.create(o.provides),
      accessCache: null,
      renderCache: [],
      components: null,
      directives: null,
      propsOptions: Hi(i, o),
      emitsOptions: Gr(i, o),
      emit: null,
      emitted: null,
      propsDefaults: t,
      inheritAttrs: i.inheritAttrs,
      ctx: t,
      data: t,
      props: t,
      attrs: t,
      slots: t,
      refs: t,
      setupState: t,
      setupContext: null,
      attrsProxy: null,
      slotsProxy: null,
      suspense: r,
      suspenseId: r ? r.pendingId : 0,
      asyncDep: null,
      asyncResolved: !1,
      isMounted: !1,
      isUnmounted: !1,
      isDeactivated: !1,
      bc: null,
      c: null,
      bm: null,
      m: null,
      bu: null,
      u: null,
      um: null,
      bum: null,
      da: null,
      a: null,
      rtg: null,
      rtc: null,
      ec: null,
      sp: null,
      $uniElements: new Map(),
      $templateUniElementRefs: [],
      $templateUniElementStyles: {},
      $eS: {},
      $eA: {}
    };
  return s.ctx = {
    _: s
  }, s.root = n ? n.root : s, s.emit = Vr.bind(null, s), e.ce && e.ce(s), s;
}
var eo = null;
var to = function to() {
  return eo || Xr;
};
var no, ro;
no = function no(e) {
  eo = e;
}, ro = function ro(e) {
  ao = e;
};
var io = function io(e) {
    var t = eo;
    return no(e), e.scope.on(), function () {
      e.scope.off(), no(t);
    };
  },
  oo = function oo() {
    eo && eo.scope.off(), no(null);
  };
function so(e) {
  return 4 & e.vnode.shapeFlag;
}
var ao = !1;
function co(e) {
  var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : !1;
  t && ro(t);
  var n = e.vnode.props,
    r = so(e);
  Fi(e, n, r, t);
  var i = r ? function (e, t) {
    var n = e.type;
    e.accessCache = Object.create(null), e.proxy = dr(new Proxy(e.ctx, Oi));
    var r = n.setup;
    if (r) {
      var _t28 = e.setupContext = r.length > 1 ? function (e) {
          var t = function t(_t29) {
            e.exposed = _t29 || {};
          };
          return {
            get attrs() {
              return function (e) {
                return e.attrsProxy || (e.attrsProxy = new Proxy(e.attrs, {
                  get: function get(t, n) {
                    return wn(e, 0, "$attrs"), t[n];
                  }
                }));
              }(e);
            },
            slots: e.slots,
            emit: e.emit,
            expose: t
          };
        }(e) : null,
        _n24 = io(e);
      un();
      var _i14 = Cr(r, e, 0, [e.props, _t28]);
      fn(), _n24(), v(_i14) ? _i14.then(oo, oo) : function (e, t, n) {
        p(t) ? e.render = t : g(t) && (e.setupState = Sr(t));
        lo(e);
      }(e, _i14);
    } else lo(e);
  }(e) : void 0;
  return t && ro(!1), i;
}
function lo(e, t, n) {
  var i = e.type;
  e.render || (e.render = i.render || r);
  {
    var _t30 = io(e);
    un();
    try {
      zi(e);
    } finally {
      fn(), _t30();
    }
  }
}
function uo(e) {
  if (e.exposed) return e.exposeProxy || (e.exposeProxy = new Proxy(Sr(dr(e.exposed)), {
    get: function get(t, n) {
      return n in t ? t[n] : e.proxy[n];
    },
    has: function has(e, t) {
      return t in e || t in Ci;
    }
  }));
}
var fo = function fo(e, t) {
    var n = function (e, t) {
      var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : !1;
      var i, o;
      var s = p(e);
      return s ? (i = e, o = r) : (i = e.get, o = e.set), new _r(i, o, s || !o, n);
    }(e, 0, ao);
    return n;
  },
  ho = "3.4.21";
function po(e) {
  return kr(e);
}
var mo = "[object Array]",
  _o = "[object Object]";
function go(e, t) {
  var n = {};
  return vo(e, t), yo(e, t, "", n), n;
}
function vo(e, t) {
  if ((e = po(e)) === t) return;
  var n = b(e),
    r = b(t);
  if (n == _o && r == _o) for (var _i15 in t) {
    var _n25 = e[_i15];
    void 0 === _n25 ? e[_i15] = null : vo(_n25, t[_i15]);
  } else n == mo && r == mo && e.length >= t.length && t.forEach(function (t, n) {
    vo(e[n], t);
  });
}
function yo(e, t, n, r) {
  if ((e = po(e)) === t) return;
  var i = b(e),
    o = b(t);
  if (i == _o) {
    if (o != _o || Object.keys(e).length < Object.keys(t).length) bo(r, n, e);else {
      var _loop3 = function _loop3(_s10) {
        var i = po(e[_s10]),
          o = t[_s10],
          a = b(i),
          c = b(o);
        if (a != mo && a != _o) i != o && bo(r, ("" == n ? "" : n + ".") + _s10, i);else if (a == mo) c != mo || i.length < o.length ? bo(r, ("" == n ? "" : n + ".") + _s10, i) : i.forEach(function (e, t) {
          yo(e, o[t], ("" == n ? "" : n + ".") + _s10 + "[" + t + "]", r);
        });else if (a == _o) if (c != _o || Object.keys(i).length < Object.keys(o).length) bo(r, ("" == n ? "" : n + ".") + _s10, i);else for (var _e24 in i) yo(i[_e24], o[_e24], ("" == n ? "" : n + ".") + _s10 + "." + _e24, r);
      };
      for (var _s10 in e) {
        _loop3(_s10);
      }
    }
  } else i == mo ? o != mo || e.length < t.length ? bo(r, n, e) : e.forEach(function (e, i) {
    yo(e, t[i], n + "[" + i + "]", r);
  }) : bo(r, n, e);
}
function bo(e, t, n) {
  e[t] = n;
}
function wo(e) {
  var t = e.ctx.__next_tick_callbacks;
  if (t && t.length) {
    var _e25 = t.slice(0);
    t.length = 0;
    for (var _t31 = 0; _t31 < _e25.length; _t31++) _e25[_t31]();
  }
}
function ko(e, t) {
  var n = e.ctx;
  if (!n.__next_tick_pending && !function (e) {
    return $r.includes(e.update);
  }(e)) return Lr(t && t.bind(e.proxy));
  var r;
  return n.__next_tick_callbacks || (n.__next_tick_callbacks = []), n.__next_tick_callbacks.push(function () {
    t ? Cr(t.bind(e.proxy), e, 14) : r && r(e.proxy);
  }), new Promise(function (e) {
    r = e;
  });
}
function xo(e, t) {
  var n = _typeof2(e = po(e));
  if ("object" === n && null !== e) {
    var _n26 = t.get(e);
    if (void 0 !== _n26) return _n26;
    if (f(e)) {
      var _r21 = e.length;
      _n26 = new Array(_r21), t.set(e, _n26);
      for (var _i16 = 0; _i16 < _r21; _i16++) _n26[_i16] = xo(e[_i16], t);
    } else {
      _n26 = {}, t.set(e, _n26);
      for (var _r22 in e) u(e, _r22) && (_n26[_r22] = xo(e[_r22], t));
    }
    return _n26;
  }
  if ("symbol" !== n) return e;
}
function So(e) {
  return xo(e, "undefined" != typeof WeakMap ? new WeakMap() : new Map());
}
function Co(e, t, n) {
  if (!t) return;
  (t = So(t)).$eS = e.$eS || {}, t.$eA = e.$eA || {};
  var r = e.ctx,
    i = r.mpType;
  if ("page" === i || "component" === i) {
    t.r0 = 1;
    var _i17 = r.$scope,
      _o11 = Object.keys(t),
      _s11 = go(t, n || function (e, t) {
        var n = e.data,
          r = Object.create(null);
        return t.forEach(function (e) {
          r[e] = n[e];
        }), r;
      }(_i17, _o11));
    Object.keys(_s11).length ? (r.__next_tick_pending = !0, _i17.setData(_s11, function () {
      r.__next_tick_pending = !1, wo(e);
    }), Mr()) : wo(e);
  }
}
function Eo(e, t, n) {
  t.appContext.config.globalProperties.$applyOptions(e, t, n);
  var r = e.computed;
  if (r) {
    var _e26 = Object.keys(r);
    if (_e26.length) {
      var _n27$$computedKeys;
      var _n27 = t.ctx;
      _n27.$computedKeys || (_n27.$computedKeys = []), (_n27$$computedKeys = _n27.$computedKeys).push.apply(_n27$$computedKeys, _e26);
    }
  }
  delete t.ctx.$onApplyOptions;
}
function Oo(e) {
  var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : !1;
  var n = e.setupState,
    r = e.$templateRefs,
    i = e.$templateUniElementRefs,
    _e$ctx = e.ctx,
    o = _e$ctx.$scope,
    s = _e$ctx.$mpPlatform;
  if ("mp-alipay" === s) return;
  if (!o || !r && !i) return;
  if (t) return r && r.forEach(function (e) {
    return Ao(e, null, n);
  }), void (i && i.forEach(function (e) {
    return Ao(e, null, n);
  }));
  var a = "mp-baidu" === s || "mp-toutiao" === s,
    c = function c(e) {
      if (0 === e.length) return [];
      var t = (o.selectAllComponents(".r") || []).concat(o.selectAllComponents(".r-i-f") || []);
      return e.filter(function (e) {
        var r = function (e, t) {
          var n = e.find(function (e) {
            return e && (e.properties || e.props).uI === t;
          });
          if (n) {
            var _e27 = n.$vm;
            return _e27 ? uo(_e27.$) || _e27 : function (e) {
              g(e) && dr(e);
              return e;
            }(n);
          }
          return null;
        }(t, e.i);
        return !(!a || null !== r) || (Ao(e, r, n), !1);
      });
    },
    l = function l() {
      if (r) {
        var _t32 = c(r);
        _t32.length && e.proxy && e.proxy.$scope && e.proxy.$scope.setData({
          r1: 1
        }, function () {
          c(_t32);
        });
      }
    };
  i && i.length && ko(e, function () {
    i.forEach(function (e) {
      f(e.v) ? e.v.forEach(function (t) {
        Ao(e, t, n);
      }) : Ao(e, e.v, n);
    });
  }), o._$setRef ? o._$setRef(l) : ko(e, l);
}
function Ao(_ref15, n, r) {
  var e = _ref15.r,
    t = _ref15.f;
  if (p(e)) e(n, {});else {
    var _i18 = m(e),
      _o12 = yr(e);
    if (_i18 || _o12) if (t) {
      if (!_o12) return;
      f(e.value) || (e.value = []);
      var _t33 = e.value;
      if (-1 === _t33.indexOf(n)) {
        if (_t33.push(n), !n) return;
        n.$ && vi(function () {
          return c(_t33, n);
        }, n.$);
      }
    } else _i18 ? u(r, e) && (r[e] = n) : yr(e) && (e.value = n);
  }
}
var Io = Fr;
function zo(e, t) {
  var n = e.component = Qi(e, t.parentComponent, null);
  return n.renderer = t.mpType ? t.mpType : "component", n.ctx.$onApplyOptions = Eo, n.ctx.$children = [], "app" === t.mpType && (n.render = r), t.onBeforeSetup && t.onBeforeSetup(n, t), co(n), t.parentComponent && n.proxy && t.parentComponent.ctx.$children.push(uo(n) || n.proxy), function (e) {
    var t = Ro.bind(e);
    e.$updateScopedSlots = function () {
      return Lr(function () {
        return Nr(t);
      });
    };
    var n = function n() {
        if (e.isMounted) {
          var _t34 = e.next,
            _n28 = e.bu,
            _r23 = e.u;
          To(e, !1), un(), Mr(), fn(), _n28 && P(_n28), To(e, !0), Co(e, $o(e)), _r23 && Io(_r23);
        } else vi(function () {
          Oo(e, !0);
        }, e), Co(e, $o(e));
      },
      i = e.effect = new nn(n, r, function () {
        return Nr(o);
      }, e.scope),
      o = e.update = function () {
        i.dirty && i.run();
      };
    o.id = e.uid, To(e, !0), o();
  }(n), n.proxy;
}
function $o(e) {
  var t = e.type,
    n = e.vnode,
    r = e.proxy,
    i = e.withProxy,
    s = e.props,
    _e$propsOptions2 = _slicedToArray2(e.propsOptions, 1),
    a = _e$propsOptions2[0],
    c = e.slots,
    l = e.attrs,
    u = e.emit,
    f = e.render,
    h = e.renderCache,
    d = e.data,
    p = e.setupState,
    m = e.ctx,
    _ = e.uid,
    g = e.appContext.app.config.globalProperties.pruneComponentPropsCache,
    v = e.inheritAttrs;
  var y;
  e.$uniElementIds = new Map(), e.$templateRefs = [], e.$templateUniElementRefs = [], e.$templateUniElementStyles = {}, e.$ei = 0, g(_), e.__counter = 0 === e.__counter ? 1 : 0;
  var b = Yr(e);
  try {
    if (4 & n.shapeFlag) {
      Po(v, s, a, l);
      var _e28 = i || r;
      y = f.call(_e28, _e28, h, s, p, d, m);
    } else {
      Po(v, s, a, t.props ? l : function (e) {
        var t;
        for (var _n29 in e) ("class" === _n29 || "style" === _n29 || o(_n29)) && ((t || (t = {}))[_n29] = e[_n29]);
        return t;
      }(l));
      var _e29 = t;
      y = _e29.length > 1 ? _e29(s, {
        attrs: l,
        slots: c,
        emit: u
      }) : _e29(s, null);
    }
  } catch (w) {
    Or(w, e, 1), y = !1;
  }
  return Oo(e), Yr(b), y;
}
function Po(e, t, n, r) {
  if (t && r && !1 !== e) {
    var _e30 = Object.keys(r).filter(function (e) {
      return "class" !== e && "style" !== e;
    });
    if (!_e30.length) return;
    n && _e30.some(s) ? _e30.forEach(function (e) {
      s(e) && e.slice(9) in n || (t[e] = r[e]);
    }) : _e30.forEach(function (e) {
      return t[e] = r[e];
    });
  }
}
function Ro() {
  var e = this.$scopedSlotsData;
  if (!e || 0 === e.length) return;
  var t = this.ctx.$scope,
    n = t.data,
    r = Object.create(null);
  e.forEach(function (_ref16) {
    var e = _ref16.path,
      t = _ref16.index,
      i = _ref16.data;
    var o = W(n, e),
      s = m(t) ? "".concat(e, ".").concat(t) : "".concat(e, "[").concat(t, "]");
    if (void 0 === o || void 0 === o[t]) r[s] = i;else {
      var _e31 = go(i, o[t]);
      Object.keys(_e31).forEach(function (t) {
        r[s + "." + t] = _e31[t];
      });
    }
  }), e.length = 0, Object.keys(r).length && t.setData(r);
}
function To(_ref17, n) {
  var e = _ref17.effect,
    t = _ref17.update;
  e.allowRecurse = t.allowRecurse = n;
}
var Bo = function Bo(e) {
  var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;
  p(e) || (e = a({}, e)), null == t || g(t) || (t = null);
  var n = ii(),
    r = new WeakSet(),
    i = n.app = {
      _uid: oi++,
      _component: e,
      _props: t,
      _container: null,
      _context: n,
      _instance: null,
      version: ho,
      get config() {
        return n.config;
      },
      set config(e) {},
      use: function use(e) {
        for (var _len12 = arguments.length, t = new Array(_len12 > 1 ? _len12 - 1 : 0), _key12 = 1; _key12 < _len12; _key12++) {
          t[_key12 - 1] = arguments[_key12];
        }
        return r.has(e) || (e && p(e.install) ? (r.add(e), e.install.apply(e, [i].concat(t))) : p(e) && (r.add(e), e.apply(void 0, [i].concat(t)))), i;
      },
      mixin: function mixin(e) {
        return n.mixins.includes(e) || n.mixins.push(e), i;
      },
      component: function component(e, t) {
        return t ? (n.components[e] = t, i) : n.components[e];
      },
      directive: function directive(e, t) {
        return t ? (n.directives[e] = t, i) : n.directives[e];
      },
      mount: function mount() {},
      unmount: function unmount() {},
      provide: function provide(e, t) {
        return n.provides[e] = t, i;
      },
      runWithContext: function runWithContext(e) {
        var t = si;
        si = i;
        try {
          return e();
        } finally {
          si = t;
        }
      }
    };
  return i;
};
function jo(e) {
  var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;
  ("undefined" != typeof window ? window : "undefined" != typeof globalThis ? globalThis : "undefined" != typeof global ? global : "undefined" != typeof my ? my : void 0).__VUE__ = !0;
  var n = Bo(e, t),
    i = n._context;
  i.config.globalProperties.$nextTick = function (e) {
    return ko(this.$, e);
  };
  var o = function o(e) {
      return e.appContext = i, e.shapeFlag = 6, e;
    },
    s = function s(e, t) {
      return zo(o(e), t);
    },
    a = function a(e) {
      return e && function (e) {
        var t = e.bum,
          n = e.scope,
          r = e.update,
          i = e.um;
        t && P(t);
        {
          var _t35 = e.parent;
          if (_t35) {
            var _n30 = _t35.ctx.$children,
              _r24 = uo(e) || e.proxy,
              _i19 = _n30.indexOf(_r24);
            _i19 > -1 && _n30.splice(_i19, 1);
          }
        }
        n.stop(), r && (r.active = !1), i && Io(i), Io(function () {
          e.isUnmounted = !0;
        });
      }(e.$);
    };
  return n.mount = function () {
    e.render = r;
    var t = zo(o({
      type: e
    }), {
      mpType: "app",
      mpInstance: null,
      parentComponent: null,
      slots: [],
      props: null
    });
    return n._instance = t.$, t.$app = n, t.$createComponent = s, t.$destroyComponent = a, i.$appInstance = t, t;
  }, n.unmount = function () {}, n;
}
function Do(e, t, n, r) {
  p(t) && hi(e, t.bind(n), r);
}
function Lo(e, t, n) {
  !function (e, t, n) {
    var r = e.mpType || n.$mpType;
    !r || "component" === r || "page" === r && "component" === t.renderer || Object.keys(e).forEach(function (r) {
      if (q(r, e[r], !1)) {
        var _i20 = e[r];
        f(_i20) ? _i20.forEach(function (e) {
          return Do(r, e, n, t);
        }) : Do(r, _i20, n, t);
      }
    });
  }(e, t, n);
}
function No(e, t, n) {
  return e[t] = n;
}
function Uo(e) {
  var n = this[e];
  for (var _len13 = arguments.length, t = new Array(_len13 > 1 ? _len13 - 1 : 0), _key13 = 1; _key13 < _len13; _key13++) {
    t[_key13 - 1] = arguments[_key13];
  }
  return n ? n.apply(void 0, t) : (console.error("method ".concat(e, " not found")), null);
}
function Fo(e) {
  var t = e.config.errorHandler;
  return function (n, r, i) {
    t && t(n, r, i);
    var o = e._instance;
    if (!o || !o.proxy) throw n;
    o.onError ? o.proxy.$callHook("onError", n) : Ar(n, 0, r && r.$.vnode, !1);
  };
}
function Mo(e, t) {
  return e ? _toConsumableArray2(new Set([].concat(e, t))) : t;
}
var Wo;
var Ho = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",
  Zo = /^(?:[A-Za-z\d+/]{4})*?(?:[A-Za-z\d+/]{2}(?:==)?|[A-Za-z\d+/]{3}=?)?$/;
function Vo() {
  var e = Jt.getStorageSync("uni_id_token") || "",
    t = e.split(".");
  if (!e || 3 !== t.length) return {
    uid: null,
    role: [],
    permission: [],
    tokenExpired: 0
  };
  var n;
  try {
    n = JSON.parse((r = t[1], decodeURIComponent(Wo(r).split("").map(function (e) {
      return "%" + ("00" + e.charCodeAt(0).toString(16)).slice(-2);
    }).join(""))));
  } catch (i) {
    throw new Error("获取当前用户信息出错，详细错误信息为：" + i.message);
  }
  var r;
  return n.tokenExpired = 1e3 * n.exp, delete n.exp, delete n.iat, n;
}
function Go(e) {
  var t = e.config;
  var n;
  t.errorHandler = ee(e, Fo), n = t.optionMergeStrategies, X.forEach(function (e) {
    n[e] = Mo;
  });
  var r = t.globalProperties;
  !function (e) {
    e.uniIDHasRole = function (e) {
      var _Vo = Vo(),
        t = _Vo.role;
      return t.indexOf(e) > -1;
    }, e.uniIDHasPermission = function (e) {
      var _Vo2 = Vo(),
        t = _Vo2.permission;
      return this.uniIDHasRole("admin") || t.indexOf(e) > -1;
    }, e.uniIDTokenValid = function () {
      var _Vo3 = Vo(),
        e = _Vo3.tokenExpired;
      return e > Date.now();
    };
  }(r), r.$set = No, r.$applyOptions = Lo, r.$callMethod = Uo, Jt.invokeCreateVueAppHook(e);
}
Wo = "function" != typeof atob ? function (e) {
  if (e = String(e).replace(/[\t\n\f\r ]+/g, ""), !Zo.test(e)) throw new Error("Failed to execute 'atob' on 'Window': The string to be decoded is not correctly encoded.");
  var t;
  e += "==".slice(2 - (3 & e.length));
  for (var n, r, i = "", o = 0; o < e.length;) t = Ho.indexOf(e.charAt(o++)) << 18 | Ho.indexOf(e.charAt(o++)) << 12 | (n = Ho.indexOf(e.charAt(o++))) << 6 | (r = Ho.indexOf(e.charAt(o++))), i += 64 === n ? String.fromCharCode(t >> 16 & 255) : 64 === r ? String.fromCharCode(t >> 16 & 255, t >> 8 & 255) : String.fromCharCode(t >> 16 & 255, t >> 8 & 255, 255 & t);
  return i;
} : atob;
var Ko = Object.create(null);
function Xo(e) {
  delete Ko[e];
}
function Yo(e) {
  if (!e) return;
  var _e$split = e.split(","),
    _e$split2 = _slicedToArray2(_e$split, 2),
    t = _e$split2[0],
    n = _e$split2[1];
  return Ko[t] ? Ko[t][parseInt(n)] : void 0;
}
var qo = {
  install: function install(e) {
    Go(e), e.config.globalProperties.pruneComponentPropsCache = Xo;
    var t = e.mount;
    e.mount = function (n) {
      var r = t.call(e, n),
        i = function () {
          var e = "createApp";
          if ("undefined" != typeof global && void 0 !== global[e]) return global[e];
          if ("undefined" != typeof my) return my[e];
        }();
      return i ? i(r) : "undefined" != typeof createMiniProgramApp && createMiniProgramApp(r), r;
    };
  }
};
function Jo(e) {
  return m(e) ? e : function (e) {
    var t = "";
    if (!e || m(e)) return t;
    for (var _n31 in e) t += "".concat(_n31.startsWith("--") ? _n31 : A(_n31), ":").concat(e[_n31], ";");
    return t;
  }(T(e));
}
function Qo(e, t) {
  var n = to(),
    i = n.ctx,
    o = void 0 === t || "mp-weixin" !== i.$mpPlatform && "mp-qq" !== i.$mpPlatform && "mp-xhs" !== i.$mpPlatform || !m(t) && "number" != typeof t ? "" : "_" + t,
    s = "e" + n.$ei++ + o,
    c = i.$scope;
  if (!e) return delete c[s], s;
  var l = c[s];
  return l ? l.value = e : c[s] = function (e, t) {
    var n = function n(e) {
      var i;
      (i = e).type && i.target && (i.preventDefault = r, i.stopPropagation = r, i.stopImmediatePropagation = r, u(i, "detail") || (i.detail = {}), u(i, "markerId") && (i.detail = "object" == _typeof2(i.detail) ? i.detail : {}, i.detail.markerId = i.markerId), w(i.detail) && u(i.detail, "checked") && !u(i.detail, "value") && (i.detail.value = i.detail.checked), w(i.detail) && (i.target = a({}, i.target, i.detail)));
      var o = [e];
      t && t.ctx.$getTriggerEventDetail && "number" == typeof e.detail && (e.detail = t.ctx.$getTriggerEventDetail(e.detail)), e.detail && e.detail.__args__ && (o = e.detail.__args__);
      var s = n.value,
        c = function c() {
          return Er(function (e, t) {
            if (f(t)) {
              var _n32 = e.stopImmediatePropagation;
              return e.stopImmediatePropagation = function () {
                _n32 && _n32.call(e), e._stopped = !0;
              }, t.map(function (e) {
                return function (t) {
                  return !t._stopped && e(t);
                };
              });
            }
            return t;
          }(e, s), t, 5, o);
        },
        l = e.target,
        h = !!l && !!l.dataset && "true" === String(l.dataset.eventsync);
      if (!es.includes(e.type) || h) {
        var _t36 = c();
        if ("input" === e.type && (f(_t36) || v(_t36))) return;
        return _t36;
      }
      setTimeout(c);
    };
    return n.value = e, n;
  }(e, n), s;
}
var es = ["tap", "longpress", "longtap", "transitionend", "animationstart", "animationiteration", "animationend", "touchforcechange"];
var ts = function ts(e) {
  var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;
  return e && (e.mpType = "app"), jo(e, t).use(qo);
};
var ns = ["externalClasses"];
var rs = /_(.*)_worklet_factory_/;
function is(e, t) {
  var n = e.$children;
  for (var _i21 = n.length - 1; _i21 >= 0; _i21--) {
    var _e32 = n[_i21];
    if (_e32.$scope._$vueId === t) return _e32;
  }
  var r;
  for (var _i22 = n.length - 1; _i22 >= 0; _i22--) if (r = is(n[_i22], t), r) return r;
}
var os = ["createSelectorQuery", "createIntersectionObserver", "selectAllComponents", "selectComponent"];
function ss(e, t) {
  var n = e.ctx;
  n.mpType = t.mpType, n.$mpType = t.mpType, n.$mpPlatform = "mp-weixin", n.$scope = t.mpInstance, Object.defineProperties(n, {
    virtualHostId: {
      get: function get() {
        var e = this.$scope.data.virtualHostId;
        return void 0 === e ? "" : e;
      }
    }
  }), n.$mp = {}, n._self = {}, e.slots = {}, f(t.slots) && t.slots.length && (t.slots.forEach(function (t) {
    e.slots[t] = !0;
  }), e.slots.d && (e.slots.default = !0)), n.getOpenerEventChannel = function () {
    return t.mpInstance.getOpenerEventChannel();
  }, n.$hasHook = as, n.$callHook = cs, e.emit = function (e, t) {
    return function (n) {
      var i = t.$scope;
      for (var _len14 = arguments.length, r = new Array(_len14 > 1 ? _len14 - 1 : 0), _key14 = 1; _key14 < _len14; _key14++) {
        r[_key14 - 1] = arguments[_key14];
      }
      if (i && n) {
        var _e33 = {
          __args__: r
        };
        i.triggerEvent(n, _e33);
      }
      return e.apply(this, [n].concat(r));
    };
  }(e.emit, n);
}
function as(e) {
  var t = this.$[e];
  return !(!t || !t.length);
}
function cs(e, t) {
  "mounted" === e && (cs.call(this, "bm"), this.$.isMounted = !0, e = "m");
  var n = this.$[e];
  return n && function (e, t) {
    var n;
    for (var _r25 = 0; _r25 < e.length; _r25++) n = e[_r25](t);
    return n;
  }(n, t);
}
var ls = ["onLoad", "onShow", "onHide", "onUnload", "onResize", "onTabItemTap", "onReachBottom", "onPullDownRefresh", "onAddToFavorites"];
function us(e) {
  var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : new Set();
  if (e) {
    Object.keys(e).forEach(function (n) {
      q(n, e[n]) && t.add(n);
    });
    {
      var _n33 = e.extends,
        _r26 = e.mixins;
      _r26 && _r26.forEach(function (e) {
        return us(e, t);
      }), _n33 && us(_n33, t);
    }
  }
  return t;
}
function fs(e, t, n) {
  -1 !== n.indexOf(t) || u(e, t) || (e[t] = function (e) {
    return this.$vm && this.$vm.$callHook(t, e);
  });
}
var hs = ["onReady"];
function ds(e, t) {
  var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : hs;
  t.forEach(function (t) {
    return fs(e, t, n);
  });
}
function ps(e, t) {
  var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : hs;
  us(t).forEach(function (t) {
    return fs(e, t, n);
  });
}
var ms = M(function () {
  var e = [],
    t = p(getApp) && getApp({
      allowDefault: !0
    });
  if (t && t.$vm && t.$vm.$) {
    var _n34 = t.$vm.$.appContext.mixins;
    if (f(_n34)) {
      var _t37 = Object.keys(Y);
      _n34.forEach(function (n) {
        _t37.forEach(function (t) {
          u(n, t) && !e.includes(t) && e.push(t);
        });
      });
    }
  }
  return e;
});
var _s = ["onShow", "onHide", "onError", "onThemeChange", "onPageNotFound", "onUnhandledRejection"];
function gs(e, t) {
  var n = e.$,
    r = {
      globalData: e.$options && e.$options.globalData || {},
      $vm: e,
      onLaunch: function onLaunch(t) {
        this.$vm = e;
        var r = n.ctx;
        this.$vm && r.$scope && r.$callHook || (ss(n, {
          mpType: "app",
          mpInstance: this,
          slots: []
        }), r.globalData = this.globalData, e.$callHook("onLaunch", t));
      }
    },
    i = wx.$onErrorHandlers;
  i && (i.forEach(function (e) {
    hi("onError", e, n);
  }), i.length = 0), function (e) {
    var t = br(function () {
      var e;
      var t = "";
      {
        var _n35 = (null === (e = wx.getAppBaseInfo) || void 0 === e ? void 0 : e.call(wx)) || wx.getSystemInfoSync();
        t = le(_n35 && _n35.language ? _n35.language : "en") || "en";
      }
      return t;
    }());
    Object.defineProperty(e, "$locale", {
      get: function get() {
        return t.value;
      },
      set: function set(e) {
        t.value = e;
      }
    });
  }(e);
  var o = e.$.type;
  ds(r, _s), ps(r, o);
  {
    var _e34 = o.methods;
    _e34 && a(r, _e34);
  }
  return r;
}
function vs(e, t) {
  if (p(e.onLaunch)) {
    var _t38 = wx.getLaunchOptionsSync && wx.getLaunchOptionsSync();
    e.onLaunch(_t38);
  }
  p(e.onShow) && wx.onAppShow && wx.onAppShow(function (e) {
    t.$callHook("onShow", e);
  }), p(e.onHide) && wx.onAppHide && wx.onAppHide(function (e) {
    t.$callHook("onHide", e);
  });
}
var ys = ["eO", "uR", "uRIF", "uI", "uT", "uP", "uS"];
function bs(e) {
  e.properties || (e.properties = {}), a(e.properties, function (e) {
    var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : !1;
    var n = {};
    if (!t) {
      var _e35 = function _e35(e) {
        var t = Object.create(null);
        e && e.forEach(function (e) {
          t[e] = !0;
        }), this.setData({
          $slots: t
        });
      };
      ys.forEach(function (e) {
        n[e] = {
          type: null,
          value: ""
        };
      }), n.uS = {
        type: null,
        value: []
      }, n.uS.observer = _e35;
    }
    return e.behaviors && e.behaviors.includes("wx://form-field") && (e.properties && e.properties.name || (n.name = {
      type: null,
      value: ""
    }), e.properties && e.properties.value || (n.value = {
      type: null,
      value: ""
    })), n;
  }(e), function (e) {
    var t = {};
    return e && e.virtualHost && (t.virtualHostStyle = {
      type: null,
      value: ""
    }, t.virtualHostClass = {
      type: null,
      value: ""
    }, t.virtualHostHidden = {
      type: null,
      value: ""
    }, t.virtualHostId = {
      type: null,
      value: ""
    }), t;
  }(e.options));
}
var ws = [String, Number, Boolean, Object, Array, null];
function ks(e, t) {
  var n = function (e, t) {
    return f(e) && 1 === e.length ? e[0] : e;
  }(e);
  return -1 !== ws.indexOf(n) ? n : null;
}
function xs(e, t) {
  return (t ? function (e) {
    var t = {};
    w(e) && Object.keys(e).forEach(function (n) {
      -1 === ys.indexOf(n) && (t[n] = e[n]);
    });
    return t;
  }(e) : Yo(e.uP)) || {};
}
function Ss(e) {
  var t = function t() {
    var e = this.properties.uP;
    e && (this.$vm ? function (e, t) {
      var n = hr(t.props),
        r = Yo(e) || {};
      Cs(n, r) && (!function (e, t, n, r) {
        var i = e.props,
          o = e.attrs,
          s = e.vnode.patchFlag,
          a = hr(i),
          _e$propsOptions3 = _slicedToArray2(e.propsOptions, 1),
          c = _e$propsOptions3[0];
        var l = !1;
        if (!(r || s > 0) || 16 & s) {
          var _r27;
          Mi(e, t, i, o) && (l = !0);
          for (var _o13 in a) t && (u(t, _o13) || (_r27 = A(_o13)) !== _o13 && u(t, _r27)) || (c ? !n || void 0 === n[_o13] && void 0 === n[_r27] || (i[_o13] = Wi(c, a, _o13, void 0, e, !0)) : delete i[_o13]);
          if (o !== a) for (var _e36 in o) t && u(t, _e36) || (delete o[_e36], l = !0);
        } else if (8 & s) {
          var _n36 = e.vnode.dynamicProps;
          for (var _r28 = 0; _r28 < _n36.length; _r28++) {
            var _s12 = _n36[_r28];
            if (Kr(e.emitsOptions, _s12)) continue;
            var _f3 = t[_s12];
            if (c) {
              if (u(o, _s12)) _f3 !== o[_s12] && (o[_s12] = _f3, l = !0);else {
                var _t39 = E(_s12);
                i[_t39] = Wi(c, a, _t39, _f3, e, !1);
              }
            } else _f3 !== o[_s12] && (o[_s12] = _f3, l = !0);
          }
        }
        l && kn(e, "set", "$attrs");
      }(t, r, n, !1), i = t.update, $r.indexOf(i) > -1 && function (e) {
        var t = $r.indexOf(e);
        t > Pr && $r.splice(t, 1);
      }(t.update), t.update());
      var i;
    }(e, this.$vm.$) : "m" === this.properties.uT && function (e, t) {
      var n = t.properties,
        r = Yo(e) || {};
      Cs(n, r, !1) && t.setData(r);
    }(e, this));
  };
  e.observers || (e.observers = {}), e.observers.uP = t;
}
function Cs(e, t) {
  var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : !0;
  var r = Object.keys(t);
  if (n && r.length !== Object.keys(e).length) return !0;
  for (var _i23 = 0; _i23 < r.length; _i23++) {
    var _n37 = r[_i23];
    if (t[_n37] !== e[_n37]) return !0;
  }
  return !1;
}
function Es(e, t) {
  e.data = {}, e.behaviors = function (e) {
    var t = e.behaviors;
    var n = e.props;
    n || (e.props = n = []);
    var r = [];
    return f(t) && t.forEach(function (e) {
      r.push(e.replace("uni://", "wx://")), "uni://form-field" === e && (f(n) ? (n.push("name"), n.push("modelValue")) : (n.name = {
        type: String,
        default: ""
      }, n.modelValue = {
        type: [String, Number, Boolean, Array, Object, Date],
        default: ""
      }));
    }), r;
  }(t);
}
function Os(e, _ref18) {
  var t = _ref18.parse,
    n = _ref18.mocks,
    r = _ref18.isPage,
    i = _ref18.isPageInProject,
    o = _ref18.initRelation,
    s = _ref18.handleLink,
    c = _ref18.initLifetimes;
  e = e.default || e;
  var l = {
    multipleSlots: !0,
    addGlobalClass: !0,
    pureDataPattern: /^uP$/
  };
  f(e.mixins) && e.mixins.forEach(function (e) {
    g(e.options) && a(l, e.options);
  }), e.options && a(l, e.options);
  var h = {
    options: l,
    lifetimes: c({
      mocks: n,
      isPage: r,
      initRelation: o,
      vueOptions: e
    }),
    pageLifetimes: {
      show: function show() {
        this.$vm && this.$vm.$callHook("onPageShow");
      },
      hide: function hide() {
        this.$vm && this.$vm.$callHook("onPageHide");
      },
      resize: function resize(e) {
        this.$vm && this.$vm.$callHook("onPageResize", e);
      }
    },
    methods: {
      __l: s
    }
  };
  var d, p, m, _;
  return Es(h, e), bs(h), Ss(h), function (e, t) {
    ns.forEach(function (n) {
      u(t, n) && (e[n] = t[n]);
    });
  }(h, e), d = h.methods, p = e.wxsCallMethods, f(p) && p.forEach(function (e) {
    d[e] = function (t) {
      return this.$vm[e](t);
    };
  }), m = h.methods, (_ = e.methods) && Object.keys(_).forEach(function (e) {
    var t = e.match(rs);
    if (t) {
      var _n38 = t[1];
      m[e] = _[e], m[_n38] = _[_n38];
    }
  }), t && t(h, {
    handleLink: s
  }), h;
}
var As, Is;
function zs() {
  return getApp().$vm;
}
function $s(e, t) {
  var n = t.parse,
    r = t.mocks,
    i = t.isPage,
    o = t.initRelation,
    s = t.handleLink,
    a = t.initLifetimes,
    c = Os(e, {
      mocks: r,
      isPage: i,
      isPageInProject: !0,
      initRelation: o,
      handleLink: s,
      initLifetimes: a
    });
  !function (_ref19, t) {
    var e = _ref19.properties;
    f(t) ? t.forEach(function (t) {
      e[t] = {
        type: String,
        value: ""
      };
    }) : w(t) && Object.keys(t).forEach(function (n) {
      var r = t[n];
      if (w(r)) {
        var _t40 = r.default;
        p(_t40) && (_t40 = _t40());
        var _i24 = r.type;
        r.type = ks(_i24), e[n] = {
          type: r.type,
          value: _t40
        };
      } else e[n] = {
        type: ks(r)
      };
    });
  }(c, (e.default || e).props);
  var l = c.methods;
  return l.onLoad = function (e) {
    var t;
    return this.options = e, this.$page = {
      fullPath: (t = this.route + G(e), function (e) {
        return 0 === e.indexOf("/");
      }(t) ? t : "/" + t)
    }, this.$vm && this.$vm.$callHook("onLoad", e);
  }, ds(l, ls), ps(l, e), function (e, t) {
    if (!t) return;
    Object.keys(Y).forEach(function (n) {
      t & Y[n] && fs(e, n, []);
    });
  }(l, e.__runtimeHooks), ds(l, ms()), n && n(c, {
    handleLink: s
  }), c;
}
var Ps = Page,
  Rs = Component;
function Ts(e) {
  var t = e.triggerEvent,
    n = function n(_n39) {
      for (var _len15 = arguments.length, r = new Array(_len15 > 1 ? _len15 - 1 : 0), _key15 = 1; _key15 < _len15; _key15++) {
        r[_key15 - 1] = arguments[_key15];
      }
      return t.apply(e, [(i = _n39, E(i.replace(Z, "-")))].concat(r));
      var i;
    };
  try {
    e.triggerEvent = n;
  } catch (r) {
    e._triggerEvent = n;
  }
}
function Bs(e, t, n) {
  var r = t[e];
  t[e] = r ? function () {
    for (var _len16 = arguments.length, e = new Array(_len16), _key16 = 0; _key16 < _len16; _key16++) {
      e[_key16] = arguments[_key16];
    }
    return Ts(this), r.apply(this, e);
  } : function () {
    Ts(this);
  };
}
Page = function Page(e) {
  return Bs("onLoad", e), Ps(e);
}, Component = function Component(e) {
  Bs("created", e);
  return e.properties && e.properties.uP || (bs(e), Ss(e)), Rs(e);
};
var js = Object.freeze({
  __proto__: null,
  handleLink: function handleLink(e) {
    var t = e.detail || e.value,
      n = t.vuePid;
    var r;
    n && (r = is(this.$vm, n)), r || (r = this.$vm), t.parent = r;
  },
  initLifetimes: function initLifetimes(_ref20) {
    var e = _ref20.mocks,
      t = _ref20.isPage,
      n = _ref20.initRelation,
      r = _ref20.vueOptions;
    return {
      attached: function attached() {
        var i = this.properties;
        !function (e, t) {
          if (!e) return;
          var n = e.split(","),
            r = n.length;
          1 === r ? t._$vueId = n[0] : 2 === r && (t._$vueId = n[0], t._$vuePid = n[1]);
        }(i.uI, this);
        var o = {
          vuePid: this._$vuePid
        };
        n(this, o);
        var s = this,
          a = t(s);
        var c = i;
        this.$vm = function (e, t) {
          As || (As = zs().$createComponent);
          var n = As(e, t);
          return uo(n.$) || n;
        }({
          type: r,
          props: xs(c, a)
        }, {
          mpType: a ? "page" : "component",
          mpInstance: s,
          slots: i.uS || {},
          parentComponent: o.parent && o.parent.$,
          onBeforeSetup: function onBeforeSetup(t, n) {
            !function (e, t) {
              Object.defineProperty(e, "refs", {
                get: function get() {
                  var e = {};
                  return function (e, t, n) {
                    e.selectAllComponents(t).forEach(function (e) {
                      var t = e.properties.uR;
                      n[t] = e.$vm || e;
                    });
                  }(t, ".r", e), t.selectAllComponents(".r-i-f").forEach(function (t) {
                    var n = t.properties.uR;
                    n && (e[n] || (e[n] = []), e[n].push(t.$vm || t));
                  }), e;
                }
              });
            }(t, s), function (e, t, n) {
              var r = e.ctx;
              n.forEach(function (n) {
                u(t, n) && (e[n] = r[n] = t[n]);
              });
            }(t, s, e), function (e, t) {
              ss(e, t);
              var n = e.ctx;
              os.forEach(function (e) {
                n[e] = function () {
                  var r = n.$scope;
                  for (var _len17 = arguments.length, t = new Array(_len17), _key17 = 0; _key17 < _len17; _key17++) {
                    t[_key17] = arguments[_key17];
                  }
                  if (r && r[e]) return r[e].apply(r, t);
                };
              });
            }(t, n);
          }
        }), a || function (e) {
          var t = e.$options;
          f(t.behaviors) && t.behaviors.includes("uni://form-field") && e.$watch("modelValue", function () {
            e.$scope && e.$scope.setData({
              name: e.name,
              value: e.modelValue
            });
          }, {
            immediate: !0
          });
        }(this.$vm);
      },
      ready: function ready() {
        this.$vm && (this.$vm.$callHook("mounted"), this.$vm.$callHook("onReady"));
      },
      detached: function detached() {
        var e;
        this.$vm && (Xo(this.$vm.$.uid), e = this.$vm, Is || (Is = zs().$destroyComponent), Is(e));
      }
    };
  },
  initRelation: function initRelation(e, t) {
    e.triggerEvent("__l", t);
  },
  isPage: function isPage(e) {
    return !!e.route;
  },
  mocks: ["__route__", "__wxExparserNodeId__", "__wxWebviewId__"]
});
var Ds = function Ds(e) {
    return App(gs(e));
  },
  Ls = (Ns = js, function (e) {
    return Component($s(e, Ns));
  });
var Ns;
var Us = function (e) {
    return function (t) {
      return Component(Os(t, e));
    };
  }(js),
  Fs = function Fs(e) {
    vs(gs(e), e);
  },
  Ms = function Ms(e) {
    var t = gs(e),
      n = p(getApp) && getApp({
        allowDefault: !0
      });
    if (!n) return;
    e.$.ctx.$scope = n;
    var r = n.globalData;
    r && Object.keys(t.globalData).forEach(function (e) {
      u(r, e) || (r[e] = t.globalData[e]);
    }), Object.keys(t).forEach(function (e) {
      u(n, e) || (n[e] = t[e]);
    }), vs(t, e);
  };
wx.createApp = global.createApp = Ds, wx.createPage = Ls, wx.createComponent = Us, wx.createPluginApp = global.createPluginApp = Fs, wx.createSubpackageApp = global.createSubpackageApp = Ms;
function Ws(e, t) {
  Object.keys(e).forEach(function (n) {
    return t(e[n], n);
  });
}
function Hs(e) {
  return null !== e && "object" == _typeof2(e);
}
function Zs(e, t, n) {
  return t.indexOf(e) < 0 && (n && n.prepend ? t.unshift(e) : t.push(e)), function () {
    var n = t.indexOf(e);
    n > -1 && t.splice(n, 1);
  };
}
function Vs(e, t) {
  e._actions = Object.create(null), e._mutations = Object.create(null), e._wrappedGetters = Object.create(null), e._modulesNamespaceMap = Object.create(null);
  var n = e.state;
  Ks(e, n, [], e._modules.root, !0), Gs(e, n, t);
}
function Gs(e, t, n) {
  var r = e._state,
    i = e._scope;
  e.getters = {}, e._makeLocalGettersCache = Object.create(null);
  var o = e._wrappedGetters,
    s = {},
    a = {},
    c = new tn(!0);
  c.run(function () {
    Ws(o, function (t, n) {
      s[n] = function (e, t) {
        return function () {
          return e(t);
        };
      }(t, e), a[n] = fo(function () {
        return s[n]();
      }), Object.defineProperty(e.getters, n, {
        get: function get() {
          return a[n].value;
        },
        enumerable: !0
      });
    });
  }), e._state = sr({
    data: t
  }), e._scope = c, e.strict && function (e) {
    Qr(function () {
      return e._state.data;
    }, function () {}, {
      deep: !0,
      flush: "sync"
    });
  }(e), r && n && e._withCommit(function () {
    r.data = null;
  }), i && i.stop();
}
function Ks(e, t, n, r, i) {
  var o = !n.length,
    s = e._modules.getNamespace(n);
  if (r.namespaced && (e._modulesNamespaceMap[s], e._modulesNamespaceMap[s] = r), !o && !i) {
    var a = Xs(t, n.slice(0, -1)),
      c = n[n.length - 1];
    e._withCommit(function () {
      a[c] = r.state;
    });
  }
  var l = r.context = function (e, t, n) {
    var r = "" === t,
      i = {
        dispatch: r ? e.dispatch : function (n, r, i) {
          var o = Ys(n, r, i),
            s = o.payload,
            a = o.options,
            c = o.type;
          return a && a.root || (c = t + c), e.dispatch(c, s);
        },
        commit: r ? e.commit : function (n, r, i) {
          var o = Ys(n, r, i),
            s = o.payload,
            a = o.options,
            c = o.type;
          a && a.root || (c = t + c), e.commit(c, s, a);
        }
      };
    return Object.defineProperties(i, {
      getters: {
        get: r ? function () {
          return e.getters;
        } : function () {
          return function (e, t) {
            if (!e._makeLocalGettersCache[t]) {
              var n = {},
                r = t.length;
              Object.keys(e.getters).forEach(function (i) {
                if (i.slice(0, r) === t) {
                  var o = i.slice(r);
                  Object.defineProperty(n, o, {
                    get: function get() {
                      return e.getters[i];
                    },
                    enumerable: !0
                  });
                }
              }), e._makeLocalGettersCache[t] = n;
            }
            return e._makeLocalGettersCache[t];
          }(e, t);
        }
      },
      state: {
        get: function get() {
          return Xs(e.state, n);
        }
      }
    }), i;
  }(e, s, n);
  r.forEachMutation(function (t, n) {
    !function (e, t, n, r) {
      (e._mutations[t] || (e._mutations[t] = [])).push(function (t) {
        n.call(e, r.state, t);
      });
    }(e, s + n, t, l);
  }), r.forEachAction(function (t, n) {
    var r = t.root ? n : s + n,
      i = t.handler || t;
    !function (e, t, n, r) {
      (e._actions[t] || (e._actions[t] = [])).push(function (t) {
        var i,
          o = n.call(e, {
            dispatch: r.dispatch,
            commit: r.commit,
            getters: r.getters,
            state: r.state,
            rootGetters: e.getters,
            rootState: e.state
          }, t);
        return (i = o) && "function" == typeof i.then || (o = Promise.resolve(o)), e._devtoolHook ? o.catch(function (t) {
          throw e._devtoolHook.emit("vuex:error", t), t;
        }) : o;
      });
    }(e, r, i, l);
  }), r.forEachGetter(function (t, n) {
    !function (e, t, n, r) {
      if (e._wrappedGetters[t]) return;
      e._wrappedGetters[t] = function (e) {
        return n(r.state, r.getters, e.state, e.getters);
      };
    }(e, s + n, t, l);
  }), r.forEachChild(function (r, o) {
    Ks(e, t, n.concat(o), r, i);
  });
}
function Xs(e, t) {
  return t.reduce(function (e, t) {
    return e[t];
  }, e);
}
function Ys(e, t, n) {
  return Hs(e) && e.type && (n = t, t = e, e = e.type), {
    type: e,
    payload: t,
    options: n
  };
}
var qs = function qs(e, t) {
    this.runtime = t, this._children = Object.create(null), this._rawModule = e;
    var n = e.state;
    this.state = ("function" == typeof n ? n() : n) || {};
  },
  Js = {
    namespaced: {
      configurable: !0
    }
  };
Js.namespaced.get = function () {
  return !!this._rawModule.namespaced;
}, qs.prototype.addChild = function (e, t) {
  this._children[e] = t;
}, qs.prototype.removeChild = function (e) {
  delete this._children[e];
}, qs.prototype.getChild = function (e) {
  return this._children[e];
}, qs.prototype.hasChild = function (e) {
  return e in this._children;
}, qs.prototype.update = function (e) {
  this._rawModule.namespaced = e.namespaced, e.actions && (this._rawModule.actions = e.actions), e.mutations && (this._rawModule.mutations = e.mutations), e.getters && (this._rawModule.getters = e.getters);
}, qs.prototype.forEachChild = function (e) {
  Ws(this._children, e);
}, qs.prototype.forEachGetter = function (e) {
  this._rawModule.getters && Ws(this._rawModule.getters, e);
}, qs.prototype.forEachAction = function (e) {
  this._rawModule.actions && Ws(this._rawModule.actions, e);
}, qs.prototype.forEachMutation = function (e) {
  this._rawModule.mutations && Ws(this._rawModule.mutations, e);
}, Object.defineProperties(qs.prototype, Js);
var Qs = function Qs(e) {
  this.register([], e, !1);
};
function ea(e, t, n) {
  if (t.update(n), n.modules) for (var r in n.modules) {
    if (!t.getChild(r)) return;
    ea(e.concat(r), t.getChild(r), n.modules[r]);
  }
}
Qs.prototype.get = function (e) {
  return e.reduce(function (e, t) {
    return e.getChild(t);
  }, this.root);
}, Qs.prototype.getNamespace = function (e) {
  var t = this.root;
  return e.reduce(function (e, n) {
    return e + ((t = t.getChild(n)).namespaced ? n + "/" : "");
  }, "");
}, Qs.prototype.update = function (e) {
  ea([], this.root, e);
}, Qs.prototype.register = function (e, t, n) {
  var r = this;
  void 0 === n && (n = !0);
  var i = new qs(t, n);
  0 === e.length ? this.root = i : this.get(e.slice(0, -1)).addChild(e[e.length - 1], i);
  t.modules && Ws(t.modules, function (t, i) {
    r.register(e.concat(i), t, n);
  });
}, Qs.prototype.unregister = function (e) {
  var t = this.get(e.slice(0, -1)),
    n = e[e.length - 1],
    r = t.getChild(n);
  r && r.runtime && t.removeChild(n);
}, Qs.prototype.isRegistered = function (e) {
  var t = this.get(e.slice(0, -1)),
    n = e[e.length - 1];
  return !!t && t.hasChild(n);
};
var ta = function ta(e) {
    var t = this;
    void 0 === e && (e = {});
    var n = e.plugins;
    void 0 === n && (n = []);
    var r = e.strict;
    void 0 === r && (r = !1);
    var i = e.devtools;
    this._committing = !1, this._actions = Object.create(null), this._actionSubscribers = [], this._mutations = Object.create(null), this._wrappedGetters = Object.create(null), this._modules = new Qs(e), this._modulesNamespaceMap = Object.create(null), this._subscribers = [], this._makeLocalGettersCache = Object.create(null), this._scope = null, this._devtools = i;
    var o = this,
      s = this.dispatch,
      a = this.commit;
    this.dispatch = function (e, t) {
      return s.call(o, e, t);
    }, this.commit = function (e, t, n) {
      return a.call(o, e, t, n);
    }, this.strict = r;
    var c = this._modules.root.state;
    Ks(this, c, [], this._modules.root), Gs(this, c), n.forEach(function (e) {
      return e(t);
    });
  },
  na = {
    state: {
      configurable: !0
    }
  };
ta.prototype.install = function (e, t) {
  e.provide(t || "store", this), e.config.globalProperties.$store = this, void 0 !== this._devtools && this._devtools;
}, na.state.get = function () {
  return this._state.data;
}, na.state.set = function (e) {}, ta.prototype.commit = function (e, t, n) {
  var r = this,
    i = Ys(e, t, n),
    o = i.type,
    s = i.payload,
    a = {
      type: o,
      payload: s
    },
    c = this._mutations[o];
  c && (this._withCommit(function () {
    c.forEach(function (e) {
      e(s);
    });
  }), this._subscribers.slice().forEach(function (e) {
    return e(a, r.state);
  }));
}, ta.prototype.dispatch = function (e, t) {
  var n = this,
    r = Ys(e, t),
    i = r.type,
    o = r.payload,
    s = {
      type: i,
      payload: o
    },
    a = this._actions[i];
  if (a) {
    try {
      this._actionSubscribers.slice().filter(function (e) {
        return e.before;
      }).forEach(function (e) {
        return e.before(s, n.state);
      });
    } catch (l) {}
    var c = a.length > 1 ? Promise.all(a.map(function (e) {
      return e(o);
    })) : a[0](o);
    return new Promise(function (e, t) {
      c.then(function (t) {
        try {
          n._actionSubscribers.filter(function (e) {
            return e.after;
          }).forEach(function (e) {
            return e.after(s, n.state);
          });
        } catch (l) {}
        e(t);
      }, function (e) {
        try {
          n._actionSubscribers.filter(function (e) {
            return e.error;
          }).forEach(function (t) {
            return t.error(s, n.state, e);
          });
        } catch (l) {}
        t(e);
      });
    });
  }
}, ta.prototype.subscribe = function (e, t) {
  return Zs(e, this._subscribers, t);
}, ta.prototype.subscribeAction = function (e, t) {
  return Zs("function" == typeof e ? {
    before: e
  } : e, this._actionSubscribers, t);
}, ta.prototype.watch = function (e, t, n) {
  var r = this;
  return Qr(function () {
    return e(r.state, r.getters);
  }, t, Object.assign({}, n));
}, ta.prototype.replaceState = function (e) {
  var t = this;
  this._withCommit(function () {
    t._state.data = e;
  });
}, ta.prototype.registerModule = function (e, t, n) {
  void 0 === n && (n = {}), "string" == typeof e && (e = [e]), this._modules.register(e, t), Ks(this, this.state, e, this._modules.get(e), n.preserveState), Gs(this, this.state);
}, ta.prototype.unregisterModule = function (e) {
  var t = this;
  "string" == typeof e && (e = [e]), this._modules.unregister(e), this._withCommit(function () {
    delete Xs(t.state, e.slice(0, -1))[e[e.length - 1]];
  }), Vs(this);
}, ta.prototype.hasModule = function (e) {
  return "string" == typeof e && (e = [e]), this._modules.isRegistered(e);
}, ta.prototype.hotUpdate = function (e) {
  this._modules.update(e), Vs(this, !0);
}, ta.prototype._withCommit = function (e) {
  var t = this._committing;
  this._committing = !0, e(), this._committing = t;
}, Object.defineProperties(ta.prototype, na);
var ra = aa(function (e, t) {
    var n = {};
    return sa(t).forEach(function (t) {
      var r = t.key,
        i = t.val;
      n[r] = function () {
        var t = this.$store.state,
          n = this.$store.getters;
        if (e) {
          var r = ca(this.$store, "mapState", e);
          if (!r) return;
          t = r.context.state, n = r.context.getters;
        }
        return "function" == typeof i ? i.call(this, t, n) : t[i];
      }, n[r].vuex = !0;
    }), n;
  }),
  ia = aa(function (e, t) {
    var n = {};
    return sa(t).forEach(function (t) {
      var r = t.key,
        i = t.val;
      i = e + i, n[r] = function () {
        if (!e || ca(this.$store, "mapGetters", e)) return this.$store.getters[i];
      }, n[r].vuex = !0;
    }), n;
  }),
  oa = aa(function (e, t) {
    var n = {};
    return sa(t).forEach(function (t) {
      var r = t.key,
        i = t.val;
      n[r] = function () {
        for (var t = [], n = arguments.length; n--;) t[n] = arguments[n];
        var r = this.$store.dispatch;
        if (e) {
          var o = ca(this.$store, "mapActions", e);
          if (!o) return;
          r = o.context.dispatch;
        }
        return "function" == typeof i ? i.apply(this, [r].concat(t)) : r.apply(this.$store, [i].concat(t));
      };
    }), n;
  });
function sa(e) {
  return function (e) {
    return Array.isArray(e) || Hs(e);
  }(e) ? Array.isArray(e) ? e.map(function (e) {
    return {
      key: e,
      val: e
    };
  }) : Object.keys(e).map(function (t) {
    return {
      key: t,
      val: e[t]
    };
  }) : [];
}
function aa(e) {
  return function (t, n) {
    return "string" != typeof t ? (n = t, t = "") : "/" !== t.charAt(t.length - 1) && (t += "/"), e(t, n);
  };
}
function ca(e, t, n) {
  return e._modulesNamespaceMap[n];
}
var la = "undefined" != typeof globalThis ? globalThis : "undefined" != typeof window ? window : "undefined" != typeof global ? global : "undefined" != typeof self ? self : {};
function ua(e) {
  return e && e.__esModule && Object.prototype.hasOwnProperty.call(e, "default") ? e.default : e;
}
function fa(e) {
  throw new Error('Could not dynamically require "' + e + '". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.');
}
var ha = {
  exports: {}
};
/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/
var da = ua(ha.exports = function e(t, n, r) {
    function i(s, a) {
      if (!n[s]) {
        if (!t[s]) {
          if (!a && fa) return fa(s);
          if (o) return o(s, !0);
          var c = new Error("Cannot find module '" + s + "'");
          throw c.code = "MODULE_NOT_FOUND", c;
        }
        var l = n[s] = {
          exports: {}
        };
        t[s][0].call(l.exports, function (e) {
          return i(t[s][1][e] || e);
        }, l, l.exports, e, t, n, r);
      }
      return n[s].exports;
    }
    for (var o = fa, s = 0; s < r.length; s++) i(r[s]);
    return i;
  }({
    1: [function (e, t, n) {
      var r = e("./utils"),
        i = e("./support"),
        o = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";
      n.encode = function (e) {
        for (var t, n, i, s, a, c, l, u = [], f = 0, h = e.length, d = h, p = "string" !== r.getTypeOf(e); f < e.length;) d = h - f, i = p ? (t = e[f++], n = f < h ? e[f++] : 0, f < h ? e[f++] : 0) : (t = e.charCodeAt(f++), n = f < h ? e.charCodeAt(f++) : 0, f < h ? e.charCodeAt(f++) : 0), s = t >> 2, a = (3 & t) << 4 | n >> 4, c = 1 < d ? (15 & n) << 2 | i >> 6 : 64, l = 2 < d ? 63 & i : 64, u.push(o.charAt(s) + o.charAt(a) + o.charAt(c) + o.charAt(l));
        return u.join("");
      }, n.decode = function (e) {
        var t,
          n,
          r,
          s,
          a,
          c,
          l = 0,
          u = 0,
          f = "data:";
        if (e.substr(0, f.length) === f) throw new Error("Invalid base64 input, it looks like a data url.");
        var h,
          d = 3 * (e = e.replace(/[^A-Za-z0-9+/=]/g, "")).length / 4;
        if (e.charAt(e.length - 1) === o.charAt(64) && d--, e.charAt(e.length - 2) === o.charAt(64) && d--, d % 1 != 0) throw new Error("Invalid base64 input, bad content length.");
        for (h = i.uint8array ? new Uint8Array(0 | d) : new Array(0 | d); l < e.length;) t = o.indexOf(e.charAt(l++)) << 2 | (s = o.indexOf(e.charAt(l++))) >> 4, n = (15 & s) << 4 | (a = o.indexOf(e.charAt(l++))) >> 2, r = (3 & a) << 6 | (c = o.indexOf(e.charAt(l++))), h[u++] = t, 64 !== a && (h[u++] = n), 64 !== c && (h[u++] = r);
        return h;
      };
    }, {
      "./support": 30,
      "./utils": 32
    }],
    2: [function (e, t, n) {
      var r = e("./external"),
        i = e("./stream/DataWorker"),
        o = e("./stream/Crc32Probe"),
        s = e("./stream/DataLengthProbe");
      function a(e, t, n, r, i) {
        this.compressedSize = e, this.uncompressedSize = t, this.crc32 = n, this.compression = r, this.compressedContent = i;
      }
      a.prototype = {
        getContentWorker: function getContentWorker() {
          var e = new i(r.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new s("data_length")),
            t = this;
          return e.on("end", function () {
            if (this.streamInfo.data_length !== t.uncompressedSize) throw new Error("Bug : uncompressed data size mismatch");
          }), e;
        },
        getCompressedWorker: function getCompressedWorker() {
          return new i(r.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize", this.compressedSize).withStreamInfo("uncompressedSize", this.uncompressedSize).withStreamInfo("crc32", this.crc32).withStreamInfo("compression", this.compression);
        }
      }, a.createWorkerFrom = function (e, t, n) {
        return e.pipe(new o()).pipe(new s("uncompressedSize")).pipe(t.compressWorker(n)).pipe(new s("compressedSize")).withStreamInfo("compression", t);
      }, t.exports = a;
    }, {
      "./external": 6,
      "./stream/Crc32Probe": 25,
      "./stream/DataLengthProbe": 26,
      "./stream/DataWorker": 27
    }],
    3: [function (e, t, n) {
      var r = e("./stream/GenericWorker");
      n.STORE = {
        magic: "\0\0",
        compressWorker: function compressWorker() {
          return new r("STORE compression");
        },
        uncompressWorker: function uncompressWorker() {
          return new r("STORE decompression");
        }
      }, n.DEFLATE = e("./flate");
    }, {
      "./flate": 7,
      "./stream/GenericWorker": 28
    }],
    4: [function (e, t, n) {
      var r = e("./utils"),
        i = function () {
          for (var e, t = [], n = 0; n < 256; n++) {
            e = n;
            for (var r = 0; r < 8; r++) e = 1 & e ? 3988292384 ^ e >>> 1 : e >>> 1;
            t[n] = e;
          }
          return t;
        }();
      t.exports = function (e, t) {
        return void 0 !== e && e.length ? "string" !== r.getTypeOf(e) ? function (e, t, n, r) {
          var o = i,
            s = r + n;
          e ^= -1;
          for (var a = r; a < s; a++) e = e >>> 8 ^ o[255 & (e ^ t[a])];
          return -1 ^ e;
        }(0 | t, e, e.length, 0) : function (e, t, n, r) {
          var o = i,
            s = r + n;
          e ^= -1;
          for (var a = r; a < s; a++) e = e >>> 8 ^ o[255 & (e ^ t.charCodeAt(a))];
          return -1 ^ e;
        }(0 | t, e, e.length, 0) : 0;
      };
    }, {
      "./utils": 32
    }],
    5: [function (e, t, n) {
      n.base64 = !1, n.binary = !1, n.dir = !1, n.createFolders = !0, n.date = null, n.compression = null, n.compressionOptions = null, n.comment = null, n.unixPermissions = null, n.dosPermissions = null;
    }, {}],
    6: [function (e, t, n) {
      var r = null;
      r = "undefined" != typeof Promise ? Promise : e("lie"), t.exports = {
        Promise: r
      };
    }, {
      lie: 37
    }],
    7: [function (e, t, n) {
      var r = "undefined" != typeof Uint8Array && "undefined" != typeof Uint16Array && "undefined" != typeof Uint32Array,
        i = e("pako"),
        o = e("./utils"),
        s = e("./stream/GenericWorker"),
        a = r ? "uint8array" : "array";
      function c(e, t) {
        s.call(this, "FlateWorker/" + e), this._pako = null, this._pakoAction = e, this._pakoOptions = t, this.meta = {};
      }
      n.magic = "\b\0", o.inherits(c, s), c.prototype.processChunk = function (e) {
        this.meta = e.meta, null === this._pako && this._createPako(), this._pako.push(o.transformTo(a, e.data), !1);
      }, c.prototype.flush = function () {
        s.prototype.flush.call(this), null === this._pako && this._createPako(), this._pako.push([], !0);
      }, c.prototype.cleanUp = function () {
        s.prototype.cleanUp.call(this), this._pako = null;
      }, c.prototype._createPako = function () {
        this._pako = new i[this._pakoAction]({
          raw: !0,
          level: this._pakoOptions.level || -1
        });
        var e = this;
        this._pako.onData = function (t) {
          e.push({
            data: t,
            meta: e.meta
          });
        };
      }, n.compressWorker = function (e) {
        return new c("Deflate", e);
      }, n.uncompressWorker = function () {
        return new c("Inflate", {});
      };
    }, {
      "./stream/GenericWorker": 28,
      "./utils": 32,
      pako: 38
    }],
    8: [function (e, t, n) {
      function r(e, t) {
        var n,
          r = "";
        for (n = 0; n < t; n++) r += String.fromCharCode(255 & e), e >>>= 8;
        return r;
      }
      function i(e, t, n, i, s, u) {
        var f,
          h,
          d = e.file,
          p = e.compression,
          m = u !== a.utf8encode,
          _ = o.transformTo("string", u(d.name)),
          g = o.transformTo("string", a.utf8encode(d.name)),
          v = d.comment,
          y = o.transformTo("string", u(v)),
          b = o.transformTo("string", a.utf8encode(v)),
          w = g.length !== d.name.length,
          k = b.length !== v.length,
          x = "",
          S = "",
          C = "",
          E = d.dir,
          O = d.date,
          A = {
            crc32: 0,
            compressedSize: 0,
            uncompressedSize: 0
          };
        t && !n || (A.crc32 = e.crc32, A.compressedSize = e.compressedSize, A.uncompressedSize = e.uncompressedSize);
        var I = 0;
        t && (I |= 8), m || !w && !k || (I |= 2048);
        var z,
          $,
          P,
          R = 0,
          T = 0;
        E && (R |= 16), "UNIX" === s ? (T = 798, R |= (z = d.unixPermissions, $ = E, P = z, z || (P = $ ? 16893 : 33204), (65535 & P) << 16)) : (T = 20, R |= function (e) {
          return 63 & (e || 0);
        }(d.dosPermissions)), f = O.getUTCHours(), f <<= 6, f |= O.getUTCMinutes(), f <<= 5, f |= O.getUTCSeconds() / 2, h = O.getUTCFullYear() - 1980, h <<= 4, h |= O.getUTCMonth() + 1, h <<= 5, h |= O.getUTCDate(), w && (S = r(1, 1) + r(c(_), 4) + g, x += "up" + r(S.length, 2) + S), k && (C = r(1, 1) + r(c(y), 4) + b, x += "uc" + r(C.length, 2) + C);
        var B = "";
        return B += "\n\0", B += r(I, 2), B += p.magic, B += r(f, 2), B += r(h, 2), B += r(A.crc32, 4), B += r(A.compressedSize, 4), B += r(A.uncompressedSize, 4), B += r(_.length, 2), B += r(x.length, 2), {
          fileRecord: l.LOCAL_FILE_HEADER + B + _ + x,
          dirRecord: l.CENTRAL_FILE_HEADER + r(T, 2) + B + r(y.length, 2) + "\0\0\0\0" + r(R, 4) + r(i, 4) + _ + x + y
        };
      }
      var o = e("../utils"),
        s = e("../stream/GenericWorker"),
        a = e("../utf8"),
        c = e("../crc32"),
        l = e("../signature");
      function u(e, t, n, r) {
        s.call(this, "ZipFileWorker"), this.bytesWritten = 0, this.zipComment = t, this.zipPlatform = n, this.encodeFileName = r, this.streamFiles = e, this.accumulate = !1, this.contentBuffer = [], this.dirRecords = [], this.currentSourceOffset = 0, this.entriesCount = 0, this.currentFile = null, this._sources = [];
      }
      o.inherits(u, s), u.prototype.push = function (e) {
        var t = e.meta.percent || 0,
          n = this.entriesCount,
          r = this._sources.length;
        this.accumulate ? this.contentBuffer.push(e) : (this.bytesWritten += e.data.length, s.prototype.push.call(this, {
          data: e.data,
          meta: {
            currentFile: this.currentFile,
            percent: n ? (t + 100 * (n - r - 1)) / n : 100
          }
        }));
      }, u.prototype.openedSource = function (e) {
        this.currentSourceOffset = this.bytesWritten, this.currentFile = e.file.name;
        var t = this.streamFiles && !e.file.dir;
        if (t) {
          var n = i(e, t, !1, this.currentSourceOffset, this.zipPlatform, this.encodeFileName);
          this.push({
            data: n.fileRecord,
            meta: {
              percent: 0
            }
          });
        } else this.accumulate = !0;
      }, u.prototype.closedSource = function (e) {
        this.accumulate = !1;
        var t,
          n = this.streamFiles && !e.file.dir,
          o = i(e, n, !0, this.currentSourceOffset, this.zipPlatform, this.encodeFileName);
        if (this.dirRecords.push(o.dirRecord), n) this.push({
          data: (t = e, l.DATA_DESCRIPTOR + r(t.crc32, 4) + r(t.compressedSize, 4) + r(t.uncompressedSize, 4)),
          meta: {
            percent: 100
          }
        });else for (this.push({
          data: o.fileRecord,
          meta: {
            percent: 0
          }
        }); this.contentBuffer.length;) this.push(this.contentBuffer.shift());
        this.currentFile = null;
      }, u.prototype.flush = function () {
        for (var e = this.bytesWritten, t = 0; t < this.dirRecords.length; t++) this.push({
          data: this.dirRecords[t],
          meta: {
            percent: 100
          }
        });
        var n,
          i,
          s,
          a,
          c,
          u,
          f = this.bytesWritten - e,
          h = (n = this.dirRecords.length, i = f, s = e, a = this.zipComment, c = this.encodeFileName, u = o.transformTo("string", c(a)), l.CENTRAL_DIRECTORY_END + "\0\0\0\0" + r(n, 2) + r(n, 2) + r(i, 4) + r(s, 4) + r(u.length, 2) + u);
        this.push({
          data: h,
          meta: {
            percent: 100
          }
        });
      }, u.prototype.prepareNextSource = function () {
        this.previous = this._sources.shift(), this.openedSource(this.previous.streamInfo), this.isPaused ? this.previous.pause() : this.previous.resume();
      }, u.prototype.registerPrevious = function (e) {
        this._sources.push(e);
        var t = this;
        return e.on("data", function (e) {
          t.processChunk(e);
        }), e.on("end", function () {
          t.closedSource(t.previous.streamInfo), t._sources.length ? t.prepareNextSource() : t.end();
        }), e.on("error", function (e) {
          t.error(e);
        }), this;
      }, u.prototype.resume = function () {
        return !!s.prototype.resume.call(this) && (!this.previous && this._sources.length ? (this.prepareNextSource(), !0) : this.previous || this._sources.length || this.generatedError ? void 0 : (this.end(), !0));
      }, u.prototype.error = function (e) {
        var t = this._sources;
        if (!s.prototype.error.call(this, e)) return !1;
        for (var n = 0; n < t.length; n++) try {
          t[n].error(e);
        } catch (r) {}
        return !0;
      }, u.prototype.lock = function () {
        s.prototype.lock.call(this);
        for (var e = this._sources, t = 0; t < e.length; t++) e[t].lock();
      }, t.exports = u;
    }, {
      "../crc32": 4,
      "../signature": 23,
      "../stream/GenericWorker": 28,
      "../utf8": 31,
      "../utils": 32
    }],
    9: [function (e, t, n) {
      var r = e("../compressions"),
        i = e("./ZipFileWorker");
      n.generateWorker = function (e, t, n) {
        var o = new i(t.streamFiles, n, t.platform, t.encodeFileName),
          s = 0;
        try {
          e.forEach(function (e, n) {
            s++;
            var i = function (e, t) {
                var n = e || t,
                  i = r[n];
                if (!i) throw new Error(n + " is not a valid compression method !");
                return i;
              }(n.options.compression, t.compression),
              a = n.options.compressionOptions || t.compressionOptions || {},
              c = n.dir,
              l = n.date;
            n._compressWorker(i, a).withStreamInfo("file", {
              name: e,
              dir: c,
              date: l,
              comment: n.comment || "",
              unixPermissions: n.unixPermissions,
              dosPermissions: n.dosPermissions
            }).pipe(o);
          }), o.entriesCount = s;
        } catch (a) {
          o.error(a);
        }
        return o;
      };
    }, {
      "../compressions": 3,
      "./ZipFileWorker": 8
    }],
    10: [function (e, t, n) {
      function r() {
        if (!(this instanceof r)) return new r();
        if (arguments.length) throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");
        this.files = Object.create(null), this.comment = null, this.root = "", this.clone = function () {
          var e = new r();
          for (var t in this) "function" != typeof this[t] && (e[t] = this[t]);
          return e;
        };
      }
      (r.prototype = e("./object")).loadAsync = e("./load"), r.support = e("./support"), r.defaults = e("./defaults"), r.version = "3.10.1", r.loadAsync = function (e, t) {
        return new r().loadAsync(e, t);
      }, r.external = e("./external"), t.exports = r;
    }, {
      "./defaults": 5,
      "./external": 6,
      "./load": 11,
      "./object": 15,
      "./support": 30
    }],
    11: [function (e, t, n) {
      var r = e("./utils"),
        i = e("./external"),
        o = e("./utf8"),
        s = e("./zipEntries"),
        a = e("./stream/Crc32Probe"),
        c = e("./nodejsUtils");
      function l(e) {
        return new i.Promise(function (t, n) {
          var r = e.decompressed.getContentWorker().pipe(new a());
          r.on("error", function (e) {
            n(e);
          }).on("end", function () {
            r.streamInfo.crc32 !== e.decompressed.crc32 ? n(new Error("Corrupted zip : CRC32 mismatch")) : t();
          }).resume();
        });
      }
      t.exports = function (e, t) {
        var n = this;
        return t = r.extend(t || {}, {
          base64: !1,
          checkCRC32: !1,
          optimizedBinaryString: !1,
          createFolders: !1,
          decodeFileName: o.utf8decode
        }), c.isNode && c.isStream(e) ? i.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")) : r.prepareContent("the loaded zip file", e, !0, t.optimizedBinaryString, t.base64).then(function (e) {
          var n = new s(t);
          return n.load(e), n;
        }).then(function (e) {
          var n = [i.Promise.resolve(e)],
            r = e.files;
          if (t.checkCRC32) for (var o = 0; o < r.length; o++) n.push(l(r[o]));
          return i.Promise.all(n);
        }).then(function (e) {
          for (var i = e.shift(), o = i.files, s = 0; s < o.length; s++) {
            var a = o[s],
              c = a.fileNameStr,
              l = r.resolve(a.fileNameStr);
            n.file(l, a.decompressed, {
              binary: !0,
              optimizedBinaryString: !0,
              date: a.date,
              dir: a.dir,
              comment: a.fileCommentStr.length ? a.fileCommentStr : null,
              unixPermissions: a.unixPermissions,
              dosPermissions: a.dosPermissions,
              createFolders: t.createFolders
            }), a.dir || (n.file(l).unsafeOriginalName = c);
          }
          return i.zipComment.length && (n.comment = i.zipComment), n;
        });
      };
    }, {
      "./external": 6,
      "./nodejsUtils": 14,
      "./stream/Crc32Probe": 25,
      "./utf8": 31,
      "./utils": 32,
      "./zipEntries": 33
    }],
    12: [function (e, t, n) {
      var r = e("../utils"),
        i = e("../stream/GenericWorker");
      function o(e, t) {
        i.call(this, "Nodejs stream input adapter for " + e), this._upstreamEnded = !1, this._bindStream(t);
      }
      r.inherits(o, i), o.prototype._bindStream = function (e) {
        var t = this;
        (this._stream = e).pause(), e.on("data", function (e) {
          t.push({
            data: e,
            meta: {
              percent: 0
            }
          });
        }).on("error", function (e) {
          t.isPaused ? this.generatedError = e : t.error(e);
        }).on("end", function () {
          t.isPaused ? t._upstreamEnded = !0 : t.end();
        });
      }, o.prototype.pause = function () {
        return !!i.prototype.pause.call(this) && (this._stream.pause(), !0);
      }, o.prototype.resume = function () {
        return !!i.prototype.resume.call(this) && (this._upstreamEnded ? this.end() : this._stream.resume(), !0);
      }, t.exports = o;
    }, {
      "../stream/GenericWorker": 28,
      "../utils": 32
    }],
    13: [function (e, t, n) {
      var r = e("readable-stream").Readable;
      function i(e, t, n) {
        r.call(this, t), this._helper = e;
        var i = this;
        e.on("data", function (e, t) {
          i.push(e) || i._helper.pause(), n && n(t);
        }).on("error", function (e) {
          i.emit("error", e);
        }).on("end", function () {
          i.push(null);
        });
      }
      e("../utils").inherits(i, r), i.prototype._read = function () {
        this._helper.resume();
      }, t.exports = i;
    }, {
      "../utils": 32,
      "readable-stream": 16
    }],
    14: [function (e, t, n) {
      t.exports = {
        isNode: "undefined" != typeof Buffer,
        newBufferFrom: function newBufferFrom(e, t) {
          if (Buffer.from && Buffer.from !== Uint8Array.from) return Buffer.from(e, t);
          if ("number" == typeof e) throw new Error('The "data" argument must not be a number');
          return new Buffer(e, t);
        },
        allocBuffer: function allocBuffer(e) {
          if (Buffer.alloc) return Buffer.alloc(e);
          var t = new Buffer(e);
          return t.fill(0), t;
        },
        isBuffer: function isBuffer(e) {
          return Buffer.isBuffer(e);
        },
        isStream: function isStream(e) {
          return e && "function" == typeof e.on && "function" == typeof e.pause && "function" == typeof e.resume;
        }
      };
    }, {}],
    15: [function (e, t, n) {
      function r(e, t, n) {
        var r,
          i = o.getTypeOf(t),
          a = o.extend(n || {}, c);
        a.date = a.date || new Date(), null !== a.compression && (a.compression = a.compression.toUpperCase()), "string" == typeof a.unixPermissions && (a.unixPermissions = parseInt(a.unixPermissions, 8)), a.unixPermissions && 16384 & a.unixPermissions && (a.dir = !0), a.dosPermissions && 16 & a.dosPermissions && (a.dir = !0), a.dir && (e = m(e)), a.createFolders && (r = p(e)) && _.call(this, r, !0);
        var f = "string" === i && !1 === a.binary && !1 === a.base64;
        n && void 0 !== n.binary || (a.binary = !f), (t instanceof l && 0 === t.uncompressedSize || a.dir || !t || 0 === t.length) && (a.base64 = !1, a.binary = !0, t = "", a.compression = "STORE", i = "string");
        var g = null;
        g = t instanceof l || t instanceof s ? t : h.isNode && h.isStream(t) ? new d(e, t) : o.prepareContent(e, t, a.binary, a.optimizedBinaryString, a.base64);
        var v = new u(e, g, a);
        this.files[e] = v;
      }
      var i = e("./utf8"),
        o = e("./utils"),
        s = e("./stream/GenericWorker"),
        a = e("./stream/StreamHelper"),
        c = e("./defaults"),
        l = e("./compressedObject"),
        u = e("./zipObject"),
        f = e("./generate"),
        h = e("./nodejsUtils"),
        d = e("./nodejs/NodejsStreamInputAdapter"),
        p = function p(e) {
          "/" === e.slice(-1) && (e = e.substring(0, e.length - 1));
          var t = e.lastIndexOf("/");
          return 0 < t ? e.substring(0, t) : "";
        },
        m = function m(e) {
          return "/" !== e.slice(-1) && (e += "/"), e;
        },
        _ = function _(e, t) {
          return t = void 0 !== t ? t : c.createFolders, e = m(e), this.files[e] || r.call(this, e, null, {
            dir: !0,
            createFolders: t
          }), this.files[e];
        };
      function g(e) {
        return "[object RegExp]" === Object.prototype.toString.call(e);
      }
      var v = {
        load: function load() {
          throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.");
        },
        forEach: function forEach(e) {
          var t, n, r;
          for (t in this.files) r = this.files[t], (n = t.slice(this.root.length, t.length)) && t.slice(0, this.root.length) === this.root && e(n, r);
        },
        filter: function filter(e) {
          var t = [];
          return this.forEach(function (n, r) {
            e(n, r) && t.push(r);
          }), t;
        },
        file: function file(e, t, n) {
          if (1 !== arguments.length) return e = this.root + e, r.call(this, e, t, n), this;
          if (g(e)) {
            var i = e;
            return this.filter(function (e, t) {
              return !t.dir && i.test(e);
            });
          }
          var o = this.files[this.root + e];
          return o && !o.dir ? o : null;
        },
        folder: function folder(e) {
          if (!e) return this;
          if (g(e)) return this.filter(function (t, n) {
            return n.dir && e.test(t);
          });
          var t = this.root + e,
            n = _.call(this, t),
            r = this.clone();
          return r.root = n.name, r;
        },
        remove: function remove(e) {
          e = this.root + e;
          var t = this.files[e];
          if (t || ("/" !== e.slice(-1) && (e += "/"), t = this.files[e]), t && !t.dir) delete this.files[e];else for (var n = this.filter(function (t, n) {
              return n.name.slice(0, e.length) === e;
            }), r = 0; r < n.length; r++) delete this.files[n[r].name];
          return this;
        },
        generate: function generate() {
          throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.");
        },
        generateInternalStream: function generateInternalStream(e) {
          var t,
            n = {};
          try {
            if ((n = o.extend(e || {}, {
              streamFiles: !1,
              compression: "STORE",
              compressionOptions: null,
              type: "",
              platform: "DOS",
              comment: null,
              mimeType: "application/zip",
              encodeFileName: i.utf8encode
            })).type = n.type.toLowerCase(), n.compression = n.compression.toUpperCase(), "binarystring" === n.type && (n.type = "string"), !n.type) throw new Error("No output type specified.");
            o.checkSupport(n.type), "darwin" !== n.platform && "freebsd" !== n.platform && "linux" !== n.platform && "sunos" !== n.platform || (n.platform = "UNIX"), "win32" === n.platform && (n.platform = "DOS");
            var r = n.comment || this.comment || "";
            t = f.generateWorker(this, n, r);
          } catch (c) {
            (t = new s("error")).error(c);
          }
          return new a(t, n.type || "string", n.mimeType);
        },
        generateAsync: function generateAsync(e, t) {
          return this.generateInternalStream(e).accumulate(t);
        },
        generateNodeStream: function generateNodeStream(e, t) {
          return (e = e || {}).type || (e.type = "nodebuffer"), this.generateInternalStream(e).toNodejsStream(t);
        }
      };
      t.exports = v;
    }, {
      "./compressedObject": 2,
      "./defaults": 5,
      "./generate": 9,
      "./nodejs/NodejsStreamInputAdapter": 12,
      "./nodejsUtils": 14,
      "./stream/GenericWorker": 28,
      "./stream/StreamHelper": 29,
      "./utf8": 31,
      "./utils": 32,
      "./zipObject": 35
    }],
    16: [function (e, t, n) {
      t.exports = e("stream");
    }, {
      stream: void 0
    }],
    17: [function (e, t, n) {
      var r = e("./DataReader");
      function i(e) {
        r.call(this, e);
        for (var t = 0; t < this.data.length; t++) e[t] = 255 & e[t];
      }
      e("../utils").inherits(i, r), i.prototype.byteAt = function (e) {
        return this.data[this.zero + e];
      }, i.prototype.lastIndexOfSignature = function (e) {
        for (var t = e.charCodeAt(0), n = e.charCodeAt(1), r = e.charCodeAt(2), i = e.charCodeAt(3), o = this.length - 4; 0 <= o; --o) if (this.data[o] === t && this.data[o + 1] === n && this.data[o + 2] === r && this.data[o + 3] === i) return o - this.zero;
        return -1;
      }, i.prototype.readAndCheckSignature = function (e) {
        var t = e.charCodeAt(0),
          n = e.charCodeAt(1),
          r = e.charCodeAt(2),
          i = e.charCodeAt(3),
          o = this.readData(4);
        return t === o[0] && n === o[1] && r === o[2] && i === o[3];
      }, i.prototype.readData = function (e) {
        if (this.checkOffset(e), 0 === e) return [];
        var t = this.data.slice(this.zero + this.index, this.zero + this.index + e);
        return this.index += e, t;
      }, t.exports = i;
    }, {
      "../utils": 32,
      "./DataReader": 18
    }],
    18: [function (e, t, n) {
      var r = e("../utils");
      function i(e) {
        this.data = e, this.length = e.length, this.index = 0, this.zero = 0;
      }
      i.prototype = {
        checkOffset: function checkOffset(e) {
          this.checkIndex(this.index + e);
        },
        checkIndex: function checkIndex(e) {
          if (this.length < this.zero + e || e < 0) throw new Error("End of data reached (data length = " + this.length + ", asked index = " + e + "). Corrupted zip ?");
        },
        setIndex: function setIndex(e) {
          this.checkIndex(e), this.index = e;
        },
        skip: function skip(e) {
          this.setIndex(this.index + e);
        },
        byteAt: function byteAt() {},
        readInt: function readInt(e) {
          var t,
            n = 0;
          for (this.checkOffset(e), t = this.index + e - 1; t >= this.index; t--) n = (n << 8) + this.byteAt(t);
          return this.index += e, n;
        },
        readString: function readString(e) {
          return r.transformTo("string", this.readData(e));
        },
        readData: function readData() {},
        lastIndexOfSignature: function lastIndexOfSignature() {},
        readAndCheckSignature: function readAndCheckSignature() {},
        readDate: function readDate() {
          var e = this.readInt(4);
          return new Date(Date.UTC(1980 + (e >> 25 & 127), (e >> 21 & 15) - 1, e >> 16 & 31, e >> 11 & 31, e >> 5 & 63, (31 & e) << 1));
        }
      }, t.exports = i;
    }, {
      "../utils": 32
    }],
    19: [function (e, t, n) {
      var r = e("./Uint8ArrayReader");
      function i(e) {
        r.call(this, e);
      }
      e("../utils").inherits(i, r), i.prototype.readData = function (e) {
        this.checkOffset(e);
        var t = this.data.slice(this.zero + this.index, this.zero + this.index + e);
        return this.index += e, t;
      }, t.exports = i;
    }, {
      "../utils": 32,
      "./Uint8ArrayReader": 21
    }],
    20: [function (e, t, n) {
      var r = e("./DataReader");
      function i(e) {
        r.call(this, e);
      }
      e("../utils").inherits(i, r), i.prototype.byteAt = function (e) {
        return this.data.charCodeAt(this.zero + e);
      }, i.prototype.lastIndexOfSignature = function (e) {
        return this.data.lastIndexOf(e) - this.zero;
      }, i.prototype.readAndCheckSignature = function (e) {
        return e === this.readData(4);
      }, i.prototype.readData = function (e) {
        this.checkOffset(e);
        var t = this.data.slice(this.zero + this.index, this.zero + this.index + e);
        return this.index += e, t;
      }, t.exports = i;
    }, {
      "../utils": 32,
      "./DataReader": 18
    }],
    21: [function (e, t, n) {
      var r = e("./ArrayReader");
      function i(e) {
        r.call(this, e);
      }
      e("../utils").inherits(i, r), i.prototype.readData = function (e) {
        if (this.checkOffset(e), 0 === e) return new Uint8Array(0);
        var t = this.data.subarray(this.zero + this.index, this.zero + this.index + e);
        return this.index += e, t;
      }, t.exports = i;
    }, {
      "../utils": 32,
      "./ArrayReader": 17
    }],
    22: [function (e, t, n) {
      var r = e("../utils"),
        i = e("../support"),
        o = e("./ArrayReader"),
        s = e("./StringReader"),
        a = e("./NodeBufferReader"),
        c = e("./Uint8ArrayReader");
      t.exports = function (e) {
        var t = r.getTypeOf(e);
        return r.checkSupport(t), "string" !== t || i.uint8array ? "nodebuffer" === t ? new a(e) : i.uint8array ? new c(r.transformTo("uint8array", e)) : new o(r.transformTo("array", e)) : new s(e);
      };
    }, {
      "../support": 30,
      "../utils": 32,
      "./ArrayReader": 17,
      "./NodeBufferReader": 19,
      "./StringReader": 20,
      "./Uint8ArrayReader": 21
    }],
    23: [function (e, t, n) {
      n.LOCAL_FILE_HEADER = "PK", n.CENTRAL_FILE_HEADER = "PK", n.CENTRAL_DIRECTORY_END = "PK", n.ZIP64_CENTRAL_DIRECTORY_LOCATOR = "PK", n.ZIP64_CENTRAL_DIRECTORY_END = "PK", n.DATA_DESCRIPTOR = "PK\b";
    }, {}],
    24: [function (e, t, n) {
      var r = e("./GenericWorker"),
        i = e("../utils");
      function o(e) {
        r.call(this, "ConvertWorker to " + e), this.destType = e;
      }
      i.inherits(o, r), o.prototype.processChunk = function (e) {
        this.push({
          data: i.transformTo(this.destType, e.data),
          meta: e.meta
        });
      }, t.exports = o;
    }, {
      "../utils": 32,
      "./GenericWorker": 28
    }],
    25: [function (e, t, n) {
      var r = e("./GenericWorker"),
        i = e("../crc32");
      function o() {
        r.call(this, "Crc32Probe"), this.withStreamInfo("crc32", 0);
      }
      e("../utils").inherits(o, r), o.prototype.processChunk = function (e) {
        this.streamInfo.crc32 = i(e.data, this.streamInfo.crc32 || 0), this.push(e);
      }, t.exports = o;
    }, {
      "../crc32": 4,
      "../utils": 32,
      "./GenericWorker": 28
    }],
    26: [function (e, t, n) {
      var r = e("../utils"),
        i = e("./GenericWorker");
      function o(e) {
        i.call(this, "DataLengthProbe for " + e), this.propName = e, this.withStreamInfo(e, 0);
      }
      r.inherits(o, i), o.prototype.processChunk = function (e) {
        if (e) {
          var t = this.streamInfo[this.propName] || 0;
          this.streamInfo[this.propName] = t + e.data.length;
        }
        i.prototype.processChunk.call(this, e);
      }, t.exports = o;
    }, {
      "../utils": 32,
      "./GenericWorker": 28
    }],
    27: [function (e, t, n) {
      var r = e("../utils"),
        i = e("./GenericWorker");
      function o(e) {
        i.call(this, "DataWorker");
        var t = this;
        this.dataIsReady = !1, this.index = 0, this.max = 0, this.data = null, this.type = "", this._tickScheduled = !1, e.then(function (e) {
          t.dataIsReady = !0, t.data = e, t.max = e && e.length || 0, t.type = r.getTypeOf(e), t.isPaused || t._tickAndRepeat();
        }, function (e) {
          t.error(e);
        });
      }
      r.inherits(o, i), o.prototype.cleanUp = function () {
        i.prototype.cleanUp.call(this), this.data = null;
      }, o.prototype.resume = function () {
        return !!i.prototype.resume.call(this) && (!this._tickScheduled && this.dataIsReady && (this._tickScheduled = !0, r.delay(this._tickAndRepeat, [], this)), !0);
      }, o.prototype._tickAndRepeat = function () {
        this._tickScheduled = !1, this.isPaused || this.isFinished || (this._tick(), this.isFinished || (r.delay(this._tickAndRepeat, [], this), this._tickScheduled = !0));
      }, o.prototype._tick = function () {
        if (this.isPaused || this.isFinished) return !1;
        var e = null,
          t = Math.min(this.max, this.index + 16384);
        if (this.index >= this.max) return this.end();
        switch (this.type) {
          case "string":
            e = this.data.substring(this.index, t);
            break;
          case "uint8array":
            e = this.data.subarray(this.index, t);
            break;
          case "array":
          case "nodebuffer":
            e = this.data.slice(this.index, t);
        }
        return this.index = t, this.push({
          data: e,
          meta: {
            percent: this.max ? this.index / this.max * 100 : 0
          }
        });
      }, t.exports = o;
    }, {
      "../utils": 32,
      "./GenericWorker": 28
    }],
    28: [function (e, t, n) {
      function r(e) {
        this.name = e || "default", this.streamInfo = {}, this.generatedError = null, this.extraStreamInfo = {}, this.isPaused = !0, this.isFinished = !1, this.isLocked = !1, this._listeners = {
          data: [],
          end: [],
          error: []
        }, this.previous = null;
      }
      r.prototype = {
        push: function push(e) {
          this.emit("data", e);
        },
        end: function end() {
          if (this.isFinished) return !1;
          this.flush();
          try {
            this.emit("end"), this.cleanUp(), this.isFinished = !0;
          } catch (e) {
            this.emit("error", e);
          }
          return !0;
        },
        error: function error(e) {
          return !this.isFinished && (this.isPaused ? this.generatedError = e : (this.isFinished = !0, this.emit("error", e), this.previous && this.previous.error(e), this.cleanUp()), !0);
        },
        on: function on(e, t) {
          return this._listeners[e].push(t), this;
        },
        cleanUp: function cleanUp() {
          this.streamInfo = this.generatedError = this.extraStreamInfo = null, this._listeners = [];
        },
        emit: function emit(e, t) {
          if (this._listeners[e]) for (var n = 0; n < this._listeners[e].length; n++) this._listeners[e][n].call(this, t);
        },
        pipe: function pipe(e) {
          return e.registerPrevious(this);
        },
        registerPrevious: function registerPrevious(e) {
          if (this.isLocked) throw new Error("The stream '" + this + "' has already been used.");
          this.streamInfo = e.streamInfo, this.mergeStreamInfo(), this.previous = e;
          var t = this;
          return e.on("data", function (e) {
            t.processChunk(e);
          }), e.on("end", function () {
            t.end();
          }), e.on("error", function (e) {
            t.error(e);
          }), this;
        },
        pause: function pause() {
          return !this.isPaused && !this.isFinished && (this.isPaused = !0, this.previous && this.previous.pause(), !0);
        },
        resume: function resume() {
          if (!this.isPaused || this.isFinished) return !1;
          var e = this.isPaused = !1;
          return this.generatedError && (this.error(this.generatedError), e = !0), this.previous && this.previous.resume(), !e;
        },
        flush: function flush() {},
        processChunk: function processChunk(e) {
          this.push(e);
        },
        withStreamInfo: function withStreamInfo(e, t) {
          return this.extraStreamInfo[e] = t, this.mergeStreamInfo(), this;
        },
        mergeStreamInfo: function mergeStreamInfo() {
          for (var e in this.extraStreamInfo) Object.prototype.hasOwnProperty.call(this.extraStreamInfo, e) && (this.streamInfo[e] = this.extraStreamInfo[e]);
        },
        lock: function lock() {
          if (this.isLocked) throw new Error("The stream '" + this + "' has already been used.");
          this.isLocked = !0, this.previous && this.previous.lock();
        },
        toString: function toString() {
          var e = "Worker " + this.name;
          return this.previous ? this.previous + " -> " + e : e;
        }
      }, t.exports = r;
    }, {}],
    29: [function (e, t, n) {
      var r = e("../utils"),
        i = e("./ConvertWorker"),
        o = e("./GenericWorker"),
        s = e("../base64"),
        a = e("../support"),
        c = e("../external"),
        l = null;
      if (a.nodestream) try {
        l = e("../nodejs/NodejsStreamOutputAdapter");
      } catch (h) {}
      function u(e, t) {
        return new c.Promise(function (n, i) {
          var o = [],
            a = e._internalType,
            c = e._outputType,
            l = e._mimeType;
          e.on("data", function (e, n) {
            o.push(e), t && t(n);
          }).on("error", function (e) {
            o = [], i(e);
          }).on("end", function () {
            try {
              var e = function (e, t, n) {
                switch (e) {
                  case "blob":
                    return r.newBlob(r.transformTo("arraybuffer", t), n);
                  case "base64":
                    return s.encode(t);
                  default:
                    return r.transformTo(e, t);
                }
              }(c, function (e, t) {
                var n,
                  r = 0,
                  i = null,
                  o = 0;
                for (n = 0; n < t.length; n++) o += t[n].length;
                switch (e) {
                  case "string":
                    return t.join("");
                  case "array":
                    return Array.prototype.concat.apply([], t);
                  case "uint8array":
                    for (i = new Uint8Array(o), n = 0; n < t.length; n++) i.set(t[n], r), r += t[n].length;
                    return i;
                  case "nodebuffer":
                    return Buffer.concat(t);
                  default:
                    throw new Error("concat : unsupported type '" + e + "'");
                }
              }(a, o), l);
              n(e);
            } catch (t) {
              i(t);
            }
            o = [];
          }).resume();
        });
      }
      function f(e, t, n) {
        var s = t;
        switch (t) {
          case "blob":
          case "arraybuffer":
            s = "uint8array";
            break;
          case "base64":
            s = "string";
        }
        try {
          this._internalType = s, this._outputType = t, this._mimeType = n, r.checkSupport(s), this._worker = e.pipe(new i(s)), e.lock();
        } catch (a) {
          this._worker = new o("error"), this._worker.error(a);
        }
      }
      f.prototype = {
        accumulate: function accumulate(e) {
          return u(this, e);
        },
        on: function on(e, t) {
          var n = this;
          return "data" === e ? this._worker.on(e, function (e) {
            t.call(n, e.data, e.meta);
          }) : this._worker.on(e, function () {
            r.delay(t, arguments, n);
          }), this;
        },
        resume: function resume() {
          return r.delay(this._worker.resume, [], this._worker), this;
        },
        pause: function pause() {
          return this._worker.pause(), this;
        },
        toNodejsStream: function toNodejsStream(e) {
          if (r.checkSupport("nodestream"), "nodebuffer" !== this._outputType) throw new Error(this._outputType + " is not supported by this method");
          return new l(this, {
            objectMode: "nodebuffer" !== this._outputType
          }, e);
        }
      }, t.exports = f;
    }, {
      "../base64": 1,
      "../external": 6,
      "../nodejs/NodejsStreamOutputAdapter": 13,
      "../support": 30,
      "../utils": 32,
      "./ConvertWorker": 24,
      "./GenericWorker": 28
    }],
    30: [function (e, t, n) {
      if (n.base64 = !0, n.array = !0, n.string = !0, n.arraybuffer = "undefined" != typeof ArrayBuffer && "undefined" != typeof Uint8Array, n.nodebuffer = "undefined" != typeof Buffer, n.uint8array = "undefined" != typeof Uint8Array, "undefined" == typeof ArrayBuffer) n.blob = !1;else {
        var r = new ArrayBuffer(0);
        try {
          n.blob = 0 === new Blob([r], {
            type: "application/zip"
          }).size;
        } catch (o) {
          try {
            var i = new (self.BlobBuilder || self.WebKitBlobBuilder || self.MozBlobBuilder || self.MSBlobBuilder)();
            i.append(r), n.blob = 0 === i.getBlob("application/zip").size;
          } catch (s) {
            n.blob = !1;
          }
        }
      }
      try {
        n.nodestream = !!e("readable-stream").Readable;
      } catch (o) {
        n.nodestream = !1;
      }
    }, {
      "readable-stream": 16
    }],
    31: [function (e, t, n) {
      for (var r = e("./utils"), i = e("./support"), o = e("./nodejsUtils"), s = e("./stream/GenericWorker"), a = new Array(256), c = 0; c < 256; c++) a[c] = 252 <= c ? 6 : 248 <= c ? 5 : 240 <= c ? 4 : 224 <= c ? 3 : 192 <= c ? 2 : 1;
      function l() {
        s.call(this, "utf-8 decode"), this.leftOver = null;
      }
      function u() {
        s.call(this, "utf-8 encode");
      }
      a[254] = a[254] = 1, n.utf8encode = function (e) {
        return i.nodebuffer ? o.newBufferFrom(e, "utf-8") : function (e) {
          var t,
            n,
            r,
            o,
            s,
            a = e.length,
            c = 0;
          for (o = 0; o < a; o++) 55296 == (64512 & (n = e.charCodeAt(o))) && o + 1 < a && 56320 == (64512 & (r = e.charCodeAt(o + 1))) && (n = 65536 + (n - 55296 << 10) + (r - 56320), o++), c += n < 128 ? 1 : n < 2048 ? 2 : n < 65536 ? 3 : 4;
          for (t = i.uint8array ? new Uint8Array(c) : new Array(c), o = s = 0; s < c; o++) 55296 == (64512 & (n = e.charCodeAt(o))) && o + 1 < a && 56320 == (64512 & (r = e.charCodeAt(o + 1))) && (n = 65536 + (n - 55296 << 10) + (r - 56320), o++), n < 128 ? t[s++] = n : (n < 2048 ? t[s++] = 192 | n >>> 6 : (n < 65536 ? t[s++] = 224 | n >>> 12 : (t[s++] = 240 | n >>> 18, t[s++] = 128 | n >>> 12 & 63), t[s++] = 128 | n >>> 6 & 63), t[s++] = 128 | 63 & n);
          return t;
        }(e);
      }, n.utf8decode = function (e) {
        return i.nodebuffer ? r.transformTo("nodebuffer", e).toString("utf-8") : function (e) {
          var t,
            n,
            i,
            o,
            s = e.length,
            c = new Array(2 * s);
          for (t = n = 0; t < s;) if ((i = e[t++]) < 128) c[n++] = i;else if (4 < (o = a[i])) c[n++] = 65533, t += o - 1;else {
            for (i &= 2 === o ? 31 : 3 === o ? 15 : 7; 1 < o && t < s;) i = i << 6 | 63 & e[t++], o--;
            1 < o ? c[n++] = 65533 : i < 65536 ? c[n++] = i : (i -= 65536, c[n++] = 55296 | i >> 10 & 1023, c[n++] = 56320 | 1023 & i);
          }
          return c.length !== n && (c.subarray ? c = c.subarray(0, n) : c.length = n), r.applyFromCharCode(c);
        }(e = r.transformTo(i.uint8array ? "uint8array" : "array", e));
      }, r.inherits(l, s), l.prototype.processChunk = function (e) {
        var t = r.transformTo(i.uint8array ? "uint8array" : "array", e.data);
        if (this.leftOver && this.leftOver.length) {
          if (i.uint8array) {
            var o = t;
            (t = new Uint8Array(o.length + this.leftOver.length)).set(this.leftOver, 0), t.set(o, this.leftOver.length);
          } else t = this.leftOver.concat(t);
          this.leftOver = null;
        }
        var s = function (e, t) {
            var n;
            for ((t = t || e.length) > e.length && (t = e.length), n = t - 1; 0 <= n && 128 == (192 & e[n]);) n--;
            return n < 0 || 0 === n ? t : n + a[e[n]] > t ? n : t;
          }(t),
          c = t;
        s !== t.length && (i.uint8array ? (c = t.subarray(0, s), this.leftOver = t.subarray(s, t.length)) : (c = t.slice(0, s), this.leftOver = t.slice(s, t.length))), this.push({
          data: n.utf8decode(c),
          meta: e.meta
        });
      }, l.prototype.flush = function () {
        this.leftOver && this.leftOver.length && (this.push({
          data: n.utf8decode(this.leftOver),
          meta: {}
        }), this.leftOver = null);
      }, n.Utf8DecodeWorker = l, r.inherits(u, s), u.prototype.processChunk = function (e) {
        this.push({
          data: n.utf8encode(e.data),
          meta: e.meta
        });
      }, n.Utf8EncodeWorker = u;
    }, {
      "./nodejsUtils": 14,
      "./stream/GenericWorker": 28,
      "./support": 30,
      "./utils": 32
    }],
    32: [function (e, t, n) {
      var r = e("./support"),
        i = e("./base64"),
        o = e("./nodejsUtils"),
        s = e("./external");
      function a(e) {
        return e;
      }
      function c(e, t) {
        for (var n = 0; n < e.length; ++n) t[n] = 255 & e.charCodeAt(n);
        return t;
      }
      e("setimmediate"), n.newBlob = function (e, t) {
        n.checkSupport("blob");
        try {
          return new Blob([e], {
            type: t
          });
        } catch (i) {
          try {
            var r = new (self.BlobBuilder || self.WebKitBlobBuilder || self.MozBlobBuilder || self.MSBlobBuilder)();
            return r.append(e), r.getBlob(t);
          } catch (o) {
            throw new Error("Bug : can't construct the Blob.");
          }
        }
      };
      var l = {
        stringifyByChunk: function stringifyByChunk(e, t, n) {
          var r = [],
            i = 0,
            o = e.length;
          if (o <= n) return String.fromCharCode.apply(null, e);
          for (; i < o;) "array" === t || "nodebuffer" === t ? r.push(String.fromCharCode.apply(null, e.slice(i, Math.min(i + n, o)))) : r.push(String.fromCharCode.apply(null, e.subarray(i, Math.min(i + n, o)))), i += n;
          return r.join("");
        },
        stringifyByChar: function stringifyByChar(e) {
          for (var t = "", n = 0; n < e.length; n++) t += String.fromCharCode(e[n]);
          return t;
        },
        applyCanBeUsed: {
          uint8array: function () {
            try {
              return r.uint8array && 1 === String.fromCharCode.apply(null, new Uint8Array(1)).length;
            } catch (e) {
              return !1;
            }
          }(),
          nodebuffer: function () {
            try {
              return r.nodebuffer && 1 === String.fromCharCode.apply(null, o.allocBuffer(1)).length;
            } catch (e) {
              return !1;
            }
          }()
        }
      };
      function u(e) {
        var t = 65536,
          r = n.getTypeOf(e),
          i = !0;
        if ("uint8array" === r ? i = l.applyCanBeUsed.uint8array : "nodebuffer" === r && (i = l.applyCanBeUsed.nodebuffer), i) for (; 1 < t;) try {
          return l.stringifyByChunk(e, r, t);
        } catch (o) {
          t = Math.floor(t / 2);
        }
        return l.stringifyByChar(e);
      }
      function f(e, t) {
        for (var n = 0; n < e.length; n++) t[n] = e[n];
        return t;
      }
      n.applyFromCharCode = u;
      var h = {};
      h.string = {
        string: a,
        array: function array(e) {
          return c(e, new Array(e.length));
        },
        arraybuffer: function arraybuffer(e) {
          return h.string.uint8array(e).buffer;
        },
        uint8array: function uint8array(e) {
          return c(e, new Uint8Array(e.length));
        },
        nodebuffer: function nodebuffer(e) {
          return c(e, o.allocBuffer(e.length));
        }
      }, h.array = {
        string: u,
        array: a,
        arraybuffer: function arraybuffer(e) {
          return new Uint8Array(e).buffer;
        },
        uint8array: function uint8array(e) {
          return new Uint8Array(e);
        },
        nodebuffer: function nodebuffer(e) {
          return o.newBufferFrom(e);
        }
      }, h.arraybuffer = {
        string: function string(e) {
          return u(new Uint8Array(e));
        },
        array: function array(e) {
          return f(new Uint8Array(e), new Array(e.byteLength));
        },
        arraybuffer: a,
        uint8array: function uint8array(e) {
          return new Uint8Array(e);
        },
        nodebuffer: function nodebuffer(e) {
          return o.newBufferFrom(new Uint8Array(e));
        }
      }, h.uint8array = {
        string: u,
        array: function array(e) {
          return f(e, new Array(e.length));
        },
        arraybuffer: function arraybuffer(e) {
          return e.buffer;
        },
        uint8array: a,
        nodebuffer: function nodebuffer(e) {
          return o.newBufferFrom(e);
        }
      }, h.nodebuffer = {
        string: u,
        array: function array(e) {
          return f(e, new Array(e.length));
        },
        arraybuffer: function arraybuffer(e) {
          return h.nodebuffer.uint8array(e).buffer;
        },
        uint8array: function uint8array(e) {
          return f(e, new Uint8Array(e.length));
        },
        nodebuffer: a
      }, n.transformTo = function (e, t) {
        if (t = t || "", !e) return t;
        n.checkSupport(e);
        var r = n.getTypeOf(t);
        return h[r][e](t);
      }, n.resolve = function (e) {
        for (var t = e.split("/"), n = [], r = 0; r < t.length; r++) {
          var i = t[r];
          "." === i || "" === i && 0 !== r && r !== t.length - 1 || (".." === i ? n.pop() : n.push(i));
        }
        return n.join("/");
      }, n.getTypeOf = function (e) {
        return "string" == typeof e ? "string" : "[object Array]" === Object.prototype.toString.call(e) ? "array" : r.nodebuffer && o.isBuffer(e) ? "nodebuffer" : r.uint8array && e instanceof Uint8Array ? "uint8array" : r.arraybuffer && e instanceof ArrayBuffer ? "arraybuffer" : void 0;
      }, n.checkSupport = function (e) {
        if (!r[e.toLowerCase()]) throw new Error(e + " is not supported by this platform");
      }, n.MAX_VALUE_16BITS = 65535, n.MAX_VALUE_32BITS = -1, n.pretty = function (e) {
        var t,
          n,
          r = "";
        for (n = 0; n < (e || "").length; n++) r += "\\x" + ((t = e.charCodeAt(n)) < 16 ? "0" : "") + t.toString(16).toUpperCase();
        return r;
      }, n.delay = function (e, t, n) {
        setImmediate(function () {
          e.apply(n || null, t || []);
        });
      }, n.inherits = function (e, t) {
        function n() {}
        n.prototype = t.prototype, e.prototype = new n();
      }, n.extend = function () {
        var e,
          t,
          n = {};
        for (e = 0; e < arguments.length; e++) for (t in arguments[e]) Object.prototype.hasOwnProperty.call(arguments[e], t) && void 0 === n[t] && (n[t] = arguments[e][t]);
        return n;
      }, n.prepareContent = function (e, t, o, a, l) {
        return s.Promise.resolve(t).then(function (e) {
          return r.blob && (e instanceof Blob || -1 !== ["[object File]", "[object Blob]"].indexOf(Object.prototype.toString.call(e))) && "undefined" != typeof FileReader ? new s.Promise(function (t, n) {
            var r = new FileReader();
            r.onload = function (e) {
              t(e.target.result);
            }, r.onerror = function (e) {
              n(e.target.error);
            }, r.readAsArrayBuffer(e);
          }) : e;
        }).then(function (t) {
          var u,
            f = n.getTypeOf(t);
          return f ? ("arraybuffer" === f ? t = n.transformTo("uint8array", t) : "string" === f && (l ? t = i.decode(t) : o && !0 !== a && (t = c(u = t, r.uint8array ? new Uint8Array(u.length) : new Array(u.length)))), t) : s.Promise.reject(new Error("Can't read the data of '" + e + "'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"));
        });
      };
    }, {
      "./base64": 1,
      "./external": 6,
      "./nodejsUtils": 14,
      "./support": 30,
      setimmediate: 54
    }],
    33: [function (e, t, n) {
      var r = e("./reader/readerFor"),
        i = e("./utils"),
        o = e("./signature"),
        s = e("./zipEntry"),
        a = e("./support");
      function c(e) {
        this.files = [], this.loadOptions = e;
      }
      c.prototype = {
        checkSignature: function checkSignature(e) {
          if (!this.reader.readAndCheckSignature(e)) {
            this.reader.index -= 4;
            var t = this.reader.readString(4);
            throw new Error("Corrupted zip or bug: unexpected signature (" + i.pretty(t) + ", expected " + i.pretty(e) + ")");
          }
        },
        isSignature: function isSignature(e, t) {
          var n = this.reader.index;
          this.reader.setIndex(e);
          var r = this.reader.readString(4) === t;
          return this.reader.setIndex(n), r;
        },
        readBlockEndOfCentral: function readBlockEndOfCentral() {
          this.diskNumber = this.reader.readInt(2), this.diskWithCentralDirStart = this.reader.readInt(2), this.centralDirRecordsOnThisDisk = this.reader.readInt(2), this.centralDirRecords = this.reader.readInt(2), this.centralDirSize = this.reader.readInt(4), this.centralDirOffset = this.reader.readInt(4), this.zipCommentLength = this.reader.readInt(2);
          var e = this.reader.readData(this.zipCommentLength),
            t = a.uint8array ? "uint8array" : "array",
            n = i.transformTo(t, e);
          this.zipComment = this.loadOptions.decodeFileName(n);
        },
        readBlockZip64EndOfCentral: function readBlockZip64EndOfCentral() {
          this.zip64EndOfCentralSize = this.reader.readInt(8), this.reader.skip(4), this.diskNumber = this.reader.readInt(4), this.diskWithCentralDirStart = this.reader.readInt(4), this.centralDirRecordsOnThisDisk = this.reader.readInt(8), this.centralDirRecords = this.reader.readInt(8), this.centralDirSize = this.reader.readInt(8), this.centralDirOffset = this.reader.readInt(8), this.zip64ExtensibleData = {};
          for (var e, t, n, r = this.zip64EndOfCentralSize - 44; 0 < r;) e = this.reader.readInt(2), t = this.reader.readInt(4), n = this.reader.readData(t), this.zip64ExtensibleData[e] = {
            id: e,
            length: t,
            value: n
          };
        },
        readBlockZip64EndOfCentralLocator: function readBlockZip64EndOfCentralLocator() {
          if (this.diskWithZip64CentralDirStart = this.reader.readInt(4), this.relativeOffsetEndOfZip64CentralDir = this.reader.readInt(8), this.disksCount = this.reader.readInt(4), 1 < this.disksCount) throw new Error("Multi-volumes zip are not supported");
        },
        readLocalFiles: function readLocalFiles() {
          var e, t;
          for (e = 0; e < this.files.length; e++) t = this.files[e], this.reader.setIndex(t.localHeaderOffset), this.checkSignature(o.LOCAL_FILE_HEADER), t.readLocalPart(this.reader), t.handleUTF8(), t.processAttributes();
        },
        readCentralDir: function readCentralDir() {
          var e;
          for (this.reader.setIndex(this.centralDirOffset); this.reader.readAndCheckSignature(o.CENTRAL_FILE_HEADER);) (e = new s({
            zip64: this.zip64
          }, this.loadOptions)).readCentralPart(this.reader), this.files.push(e);
          if (this.centralDirRecords !== this.files.length && 0 !== this.centralDirRecords && 0 === this.files.length) throw new Error("Corrupted zip or bug: expected " + this.centralDirRecords + " records in central dir, got " + this.files.length);
        },
        readEndOfCentral: function readEndOfCentral() {
          var e = this.reader.lastIndexOfSignature(o.CENTRAL_DIRECTORY_END);
          if (e < 0) throw this.isSignature(0, o.LOCAL_FILE_HEADER) ? new Error("Corrupted zip: can't find end of central directory") : new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");
          this.reader.setIndex(e);
          var t = e;
          if (this.checkSignature(o.CENTRAL_DIRECTORY_END), this.readBlockEndOfCentral(), this.diskNumber === i.MAX_VALUE_16BITS || this.diskWithCentralDirStart === i.MAX_VALUE_16BITS || this.centralDirRecordsOnThisDisk === i.MAX_VALUE_16BITS || this.centralDirRecords === i.MAX_VALUE_16BITS || this.centralDirSize === i.MAX_VALUE_32BITS || this.centralDirOffset === i.MAX_VALUE_32BITS) {
            if (this.zip64 = !0, (e = this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR)) < 0) throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");
            if (this.reader.setIndex(e), this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR), this.readBlockZip64EndOfCentralLocator(), !this.isSignature(this.relativeOffsetEndOfZip64CentralDir, o.ZIP64_CENTRAL_DIRECTORY_END) && (this.relativeOffsetEndOfZip64CentralDir = this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_END), this.relativeOffsetEndOfZip64CentralDir < 0)) throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");
            this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir), this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_END), this.readBlockZip64EndOfCentral();
          }
          var n = this.centralDirOffset + this.centralDirSize;
          this.zip64 && (n += 20, n += 12 + this.zip64EndOfCentralSize);
          var r = t - n;
          if (0 < r) this.isSignature(t, o.CENTRAL_FILE_HEADER) || (this.reader.zero = r);else if (r < 0) throw new Error("Corrupted zip: missing " + Math.abs(r) + " bytes.");
        },
        prepareReader: function prepareReader(e) {
          this.reader = r(e);
        },
        load: function load(e) {
          this.prepareReader(e), this.readEndOfCentral(), this.readCentralDir(), this.readLocalFiles();
        }
      }, t.exports = c;
    }, {
      "./reader/readerFor": 22,
      "./signature": 23,
      "./support": 30,
      "./utils": 32,
      "./zipEntry": 34
    }],
    34: [function (e, t, n) {
      var r = e("./reader/readerFor"),
        i = e("./utils"),
        o = e("./compressedObject"),
        s = e("./crc32"),
        a = e("./utf8"),
        c = e("./compressions"),
        l = e("./support");
      function u(e, t) {
        this.options = e, this.loadOptions = t;
      }
      u.prototype = {
        isEncrypted: function isEncrypted() {
          return 1 == (1 & this.bitFlag);
        },
        useUTF8: function useUTF8() {
          return 2048 == (2048 & this.bitFlag);
        },
        readLocalPart: function readLocalPart(e) {
          var t, n;
          if (e.skip(22), this.fileNameLength = e.readInt(2), n = e.readInt(2), this.fileName = e.readData(this.fileNameLength), e.skip(n), -1 === this.compressedSize || -1 === this.uncompressedSize) throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");
          if (null === (t = function (e) {
            for (var t in c) if (Object.prototype.hasOwnProperty.call(c, t) && c[t].magic === e) return c[t];
            return null;
          }(this.compressionMethod))) throw new Error("Corrupted zip : compression " + i.pretty(this.compressionMethod) + " unknown (inner file : " + i.transformTo("string", this.fileName) + ")");
          this.decompressed = new o(this.compressedSize, this.uncompressedSize, this.crc32, t, e.readData(this.compressedSize));
        },
        readCentralPart: function readCentralPart(e) {
          this.versionMadeBy = e.readInt(2), e.skip(2), this.bitFlag = e.readInt(2), this.compressionMethod = e.readString(2), this.date = e.readDate(), this.crc32 = e.readInt(4), this.compressedSize = e.readInt(4), this.uncompressedSize = e.readInt(4);
          var t = e.readInt(2);
          if (this.extraFieldsLength = e.readInt(2), this.fileCommentLength = e.readInt(2), this.diskNumberStart = e.readInt(2), this.internalFileAttributes = e.readInt(2), this.externalFileAttributes = e.readInt(4), this.localHeaderOffset = e.readInt(4), this.isEncrypted()) throw new Error("Encrypted zip are not supported");
          e.skip(t), this.readExtraFields(e), this.parseZIP64ExtraField(e), this.fileComment = e.readData(this.fileCommentLength);
        },
        processAttributes: function processAttributes() {
          this.unixPermissions = null, this.dosPermissions = null;
          var e = this.versionMadeBy >> 8;
          this.dir = !!(16 & this.externalFileAttributes), 0 == e && (this.dosPermissions = 63 & this.externalFileAttributes), 3 == e && (this.unixPermissions = this.externalFileAttributes >> 16 & 65535), this.dir || "/" !== this.fileNameStr.slice(-1) || (this.dir = !0);
        },
        parseZIP64ExtraField: function parseZIP64ExtraField() {
          if (this.extraFields[1]) {
            var e = r(this.extraFields[1].value);
            this.uncompressedSize === i.MAX_VALUE_32BITS && (this.uncompressedSize = e.readInt(8)), this.compressedSize === i.MAX_VALUE_32BITS && (this.compressedSize = e.readInt(8)), this.localHeaderOffset === i.MAX_VALUE_32BITS && (this.localHeaderOffset = e.readInt(8)), this.diskNumberStart === i.MAX_VALUE_32BITS && (this.diskNumberStart = e.readInt(4));
          }
        },
        readExtraFields: function readExtraFields(e) {
          var t,
            n,
            r,
            i = e.index + this.extraFieldsLength;
          for (this.extraFields || (this.extraFields = {}); e.index + 4 < i;) t = e.readInt(2), n = e.readInt(2), r = e.readData(n), this.extraFields[t] = {
            id: t,
            length: n,
            value: r
          };
          e.setIndex(i);
        },
        handleUTF8: function handleUTF8() {
          var e = l.uint8array ? "uint8array" : "array";
          if (this.useUTF8()) this.fileNameStr = a.utf8decode(this.fileName), this.fileCommentStr = a.utf8decode(this.fileComment);else {
            var t = this.findExtraFieldUnicodePath();
            if (null !== t) this.fileNameStr = t;else {
              var n = i.transformTo(e, this.fileName);
              this.fileNameStr = this.loadOptions.decodeFileName(n);
            }
            var r = this.findExtraFieldUnicodeComment();
            if (null !== r) this.fileCommentStr = r;else {
              var o = i.transformTo(e, this.fileComment);
              this.fileCommentStr = this.loadOptions.decodeFileName(o);
            }
          }
        },
        findExtraFieldUnicodePath: function findExtraFieldUnicodePath() {
          var e = this.extraFields[28789];
          if (e) {
            var t = r(e.value);
            return 1 !== t.readInt(1) || s(this.fileName) !== t.readInt(4) ? null : a.utf8decode(t.readData(e.length - 5));
          }
          return null;
        },
        findExtraFieldUnicodeComment: function findExtraFieldUnicodeComment() {
          var e = this.extraFields[25461];
          if (e) {
            var t = r(e.value);
            return 1 !== t.readInt(1) || s(this.fileComment) !== t.readInt(4) ? null : a.utf8decode(t.readData(e.length - 5));
          }
          return null;
        }
      }, t.exports = u;
    }, {
      "./compressedObject": 2,
      "./compressions": 3,
      "./crc32": 4,
      "./reader/readerFor": 22,
      "./support": 30,
      "./utf8": 31,
      "./utils": 32
    }],
    35: [function (e, t, n) {
      function r(e, t, n) {
        this.name = e, this.dir = n.dir, this.date = n.date, this.comment = n.comment, this.unixPermissions = n.unixPermissions, this.dosPermissions = n.dosPermissions, this._data = t, this._dataBinary = n.binary, this.options = {
          compression: n.compression,
          compressionOptions: n.compressionOptions
        };
      }
      var i = e("./stream/StreamHelper"),
        o = e("./stream/DataWorker"),
        s = e("./utf8"),
        a = e("./compressedObject"),
        c = e("./stream/GenericWorker");
      r.prototype = {
        internalStream: function internalStream(e) {
          var t = null,
            n = "string";
          try {
            if (!e) throw new Error("No output type specified.");
            var r = "string" === (n = e.toLowerCase()) || "text" === n;
            "binarystring" !== n && "text" !== n || (n = "string"), t = this._decompressWorker();
            var o = !this._dataBinary;
            o && !r && (t = t.pipe(new s.Utf8EncodeWorker())), !o && r && (t = t.pipe(new s.Utf8DecodeWorker()));
          } catch (a) {
            (t = new c("error")).error(a);
          }
          return new i(t, n, "");
        },
        async: function async(e, t) {
          return this.internalStream(e).accumulate(t);
        },
        nodeStream: function nodeStream(e, t) {
          return this.internalStream(e || "nodebuffer").toNodejsStream(t);
        },
        _compressWorker: function _compressWorker(e, t) {
          if (this._data instanceof a && this._data.compression.magic === e.magic) return this._data.getCompressedWorker();
          var n = this._decompressWorker();
          return this._dataBinary || (n = n.pipe(new s.Utf8EncodeWorker())), a.createWorkerFrom(n, e, t);
        },
        _decompressWorker: function _decompressWorker() {
          return this._data instanceof a ? this._data.getContentWorker() : this._data instanceof c ? this._data : new o(this._data);
        }
      };
      for (var l = ["asText", "asBinary", "asNodeBuffer", "asUint8Array", "asArrayBuffer"], u = function u() {
          throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.");
        }, f = 0; f < l.length; f++) r.prototype[l[f]] = u;
      t.exports = r;
    }, {
      "./compressedObject": 2,
      "./stream/DataWorker": 27,
      "./stream/GenericWorker": 28,
      "./stream/StreamHelper": 29,
      "./utf8": 31
    }],
    36: [function (e, t, n) {
      (function (e) {
        var n,
          r,
          i = e.MutationObserver || e.WebKitMutationObserver;
        if (i) {
          var o = 0,
            s = new i(u),
            a = e.document.createTextNode("");
          s.observe(a, {
            characterData: !0
          }), n = function n() {
            a.data = o = ++o % 2;
          };
        } else if (e.setImmediate || void 0 === e.MessageChannel) n = "document" in e && "onreadystatechange" in e.document.createElement("script") ? function () {
          var t = e.document.createElement("script");
          t.onreadystatechange = function () {
            u(), t.onreadystatechange = null, t.parentNode.removeChild(t), t = null;
          }, e.document.documentElement.appendChild(t);
        } : function () {
          setTimeout(u, 0);
        };else {
          var c = new e.MessageChannel();
          c.port1.onmessage = u, n = function n() {
            c.port2.postMessage(0);
          };
        }
        var l = [];
        function u() {
          var e, t;
          r = !0;
          for (var n = l.length; n;) {
            for (t = l, l = [], e = -1; ++e < n;) t[e]();
            n = l.length;
          }
          r = !1;
        }
        t.exports = function (e) {
          1 !== l.push(e) || r || n();
        };
      }).call(this, void 0 !== la ? la : "undefined" != typeof self ? self : "undefined" != typeof window ? window : {});
    }, {}],
    37: [function (e, t, n) {
      var r = e("immediate");
      function i() {}
      var o = {},
        s = ["REJECTED"],
        a = ["FULFILLED"],
        c = ["PENDING"];
      function l(e) {
        if ("function" != typeof e) throw new TypeError("resolver must be a function");
        this.state = c, this.queue = [], this.outcome = void 0, e !== i && d(this, e);
      }
      function u(e, t, n) {
        this.promise = e, "function" == typeof t && (this.onFulfilled = t, this.callFulfilled = this.otherCallFulfilled), "function" == typeof n && (this.onRejected = n, this.callRejected = this.otherCallRejected);
      }
      function f(e, t, n) {
        r(function () {
          var r;
          try {
            r = t(n);
          } catch (i) {
            return o.reject(e, i);
          }
          r === e ? o.reject(e, new TypeError("Cannot resolve promise with itself")) : o.resolve(e, r);
        });
      }
      function h(e) {
        var t = e && e.then;
        if (e && ("object" == _typeof2(e) || "function" == typeof e) && "function" == typeof t) return function () {
          t.apply(e, arguments);
        };
      }
      function d(e, t) {
        var n = !1;
        function r(t) {
          n || (n = !0, o.reject(e, t));
        }
        function i(t) {
          n || (n = !0, o.resolve(e, t));
        }
        var s = p(function () {
          t(i, r);
        });
        "error" === s.status && r(s.value);
      }
      function p(e, t) {
        var n = {};
        try {
          n.value = e(t), n.status = "success";
        } catch (r) {
          n.status = "error", n.value = r;
        }
        return n;
      }
      (t.exports = l).prototype.finally = function (e) {
        if ("function" != typeof e) return this;
        var t = this.constructor;
        return this.then(function (n) {
          return t.resolve(e()).then(function () {
            return n;
          });
        }, function (n) {
          return t.resolve(e()).then(function () {
            throw n;
          });
        });
      }, l.prototype.catch = function (e) {
        return this.then(null, e);
      }, l.prototype.then = function (e, t) {
        if ("function" != typeof e && this.state === a || "function" != typeof t && this.state === s) return this;
        var n = new this.constructor(i);
        return this.state !== c ? f(n, this.state === a ? e : t, this.outcome) : this.queue.push(new u(n, e, t)), n;
      }, u.prototype.callFulfilled = function (e) {
        o.resolve(this.promise, e);
      }, u.prototype.otherCallFulfilled = function (e) {
        f(this.promise, this.onFulfilled, e);
      }, u.prototype.callRejected = function (e) {
        o.reject(this.promise, e);
      }, u.prototype.otherCallRejected = function (e) {
        f(this.promise, this.onRejected, e);
      }, o.resolve = function (e, t) {
        var n = p(h, t);
        if ("error" === n.status) return o.reject(e, n.value);
        var r = n.value;
        if (r) d(e, r);else {
          e.state = a, e.outcome = t;
          for (var i = -1, s = e.queue.length; ++i < s;) e.queue[i].callFulfilled(t);
        }
        return e;
      }, o.reject = function (e, t) {
        e.state = s, e.outcome = t;
        for (var n = -1, r = e.queue.length; ++n < r;) e.queue[n].callRejected(t);
        return e;
      }, l.resolve = function (e) {
        return e instanceof this ? e : o.resolve(new this(i), e);
      }, l.reject = function (e) {
        var t = new this(i);
        return o.reject(t, e);
      }, l.all = function (e) {
        var t = this;
        if ("[object Array]" !== Object.prototype.toString.call(e)) return this.reject(new TypeError("must be an array"));
        var n = e.length,
          r = !1;
        if (!n) return this.resolve([]);
        for (var s = new Array(n), a = 0, c = -1, l = new this(i); ++c < n;) u(e[c], c);
        return l;
        function u(e, i) {
          t.resolve(e).then(function (e) {
            s[i] = e, ++a !== n || r || (r = !0, o.resolve(l, s));
          }, function (e) {
            r || (r = !0, o.reject(l, e));
          });
        }
      }, l.race = function (e) {
        var t = this;
        if ("[object Array]" !== Object.prototype.toString.call(e)) return this.reject(new TypeError("must be an array"));
        var n = e.length,
          r = !1;
        if (!n) return this.resolve([]);
        for (var s, a = -1, c = new this(i); ++a < n;) s = e[a], t.resolve(s).then(function (e) {
          r || (r = !0, o.resolve(c, e));
        }, function (e) {
          r || (r = !0, o.reject(c, e));
        });
        return c;
      };
    }, {
      immediate: 36
    }],
    38: [function (e, t, n) {
      var r = {};
      (0, e("./lib/utils/common").assign)(r, e("./lib/deflate"), e("./lib/inflate"), e("./lib/zlib/constants")), t.exports = r;
    }, {
      "./lib/deflate": 39,
      "./lib/inflate": 40,
      "./lib/utils/common": 41,
      "./lib/zlib/constants": 44
    }],
    39: [function (e, t, n) {
      var r = e("./zlib/deflate"),
        i = e("./utils/common"),
        o = e("./utils/strings"),
        s = e("./zlib/messages"),
        a = e("./zlib/zstream"),
        c = Object.prototype.toString,
        l = 0,
        u = -1,
        f = 0,
        h = 8;
      function d(e) {
        if (!(this instanceof d)) return new d(e);
        this.options = i.assign({
          level: u,
          method: h,
          chunkSize: 16384,
          windowBits: 15,
          memLevel: 8,
          strategy: f,
          to: ""
        }, e || {});
        var t = this.options;
        t.raw && 0 < t.windowBits ? t.windowBits = -t.windowBits : t.gzip && 0 < t.windowBits && t.windowBits < 16 && (t.windowBits += 16), this.err = 0, this.msg = "", this.ended = !1, this.chunks = [], this.strm = new a(), this.strm.avail_out = 0;
        var n = r.deflateInit2(this.strm, t.level, t.method, t.windowBits, t.memLevel, t.strategy);
        if (n !== l) throw new Error(s[n]);
        if (t.header && r.deflateSetHeader(this.strm, t.header), t.dictionary) {
          var p;
          if (p = "string" == typeof t.dictionary ? o.string2buf(t.dictionary) : "[object ArrayBuffer]" === c.call(t.dictionary) ? new Uint8Array(t.dictionary) : t.dictionary, (n = r.deflateSetDictionary(this.strm, p)) !== l) throw new Error(s[n]);
          this._dict_set = !0;
        }
      }
      function p(e, t) {
        var n = new d(t);
        if (n.push(e, !0), n.err) throw n.msg || s[n.err];
        return n.result;
      }
      d.prototype.push = function (e, t) {
        var n,
          s,
          a = this.strm,
          u = this.options.chunkSize;
        if (this.ended) return !1;
        s = t === ~~t ? t : !0 === t ? 4 : 0, "string" == typeof e ? a.input = o.string2buf(e) : "[object ArrayBuffer]" === c.call(e) ? a.input = new Uint8Array(e) : a.input = e, a.next_in = 0, a.avail_in = a.input.length;
        do {
          if (0 === a.avail_out && (a.output = new i.Buf8(u), a.next_out = 0, a.avail_out = u), 1 !== (n = r.deflate(a, s)) && n !== l) return this.onEnd(n), !(this.ended = !0);
          0 !== a.avail_out && (0 !== a.avail_in || 4 !== s && 2 !== s) || ("string" === this.options.to ? this.onData(o.buf2binstring(i.shrinkBuf(a.output, a.next_out))) : this.onData(i.shrinkBuf(a.output, a.next_out)));
        } while ((0 < a.avail_in || 0 === a.avail_out) && 1 !== n);
        return 4 === s ? (n = r.deflateEnd(this.strm), this.onEnd(n), this.ended = !0, n === l) : 2 !== s || (this.onEnd(l), !(a.avail_out = 0));
      }, d.prototype.onData = function (e) {
        this.chunks.push(e);
      }, d.prototype.onEnd = function (e) {
        e === l && ("string" === this.options.to ? this.result = this.chunks.join("") : this.result = i.flattenChunks(this.chunks)), this.chunks = [], this.err = e, this.msg = this.strm.msg;
      }, n.Deflate = d, n.deflate = p, n.deflateRaw = function (e, t) {
        return (t = t || {}).raw = !0, p(e, t);
      }, n.gzip = function (e, t) {
        return (t = t || {}).gzip = !0, p(e, t);
      };
    }, {
      "./utils/common": 41,
      "./utils/strings": 42,
      "./zlib/deflate": 46,
      "./zlib/messages": 51,
      "./zlib/zstream": 53
    }],
    40: [function (e, t, n) {
      var r = e("./zlib/inflate"),
        i = e("./utils/common"),
        o = e("./utils/strings"),
        s = e("./zlib/constants"),
        a = e("./zlib/messages"),
        c = e("./zlib/zstream"),
        l = e("./zlib/gzheader"),
        u = Object.prototype.toString;
      function f(e) {
        if (!(this instanceof f)) return new f(e);
        this.options = i.assign({
          chunkSize: 16384,
          windowBits: 0,
          to: ""
        }, e || {});
        var t = this.options;
        t.raw && 0 <= t.windowBits && t.windowBits < 16 && (t.windowBits = -t.windowBits, 0 === t.windowBits && (t.windowBits = -15)), !(0 <= t.windowBits && t.windowBits < 16) || e && e.windowBits || (t.windowBits += 32), 15 < t.windowBits && t.windowBits < 48 && 0 == (15 & t.windowBits) && (t.windowBits |= 15), this.err = 0, this.msg = "", this.ended = !1, this.chunks = [], this.strm = new c(), this.strm.avail_out = 0;
        var n = r.inflateInit2(this.strm, t.windowBits);
        if (n !== s.Z_OK) throw new Error(a[n]);
        this.header = new l(), r.inflateGetHeader(this.strm, this.header);
      }
      function h(e, t) {
        var n = new f(t);
        if (n.push(e, !0), n.err) throw n.msg || a[n.err];
        return n.result;
      }
      f.prototype.push = function (e, t) {
        var n,
          a,
          c,
          l,
          f,
          h,
          d = this.strm,
          p = this.options.chunkSize,
          m = this.options.dictionary,
          _ = !1;
        if (this.ended) return !1;
        a = t === ~~t ? t : !0 === t ? s.Z_FINISH : s.Z_NO_FLUSH, "string" == typeof e ? d.input = o.binstring2buf(e) : "[object ArrayBuffer]" === u.call(e) ? d.input = new Uint8Array(e) : d.input = e, d.next_in = 0, d.avail_in = d.input.length;
        do {
          if (0 === d.avail_out && (d.output = new i.Buf8(p), d.next_out = 0, d.avail_out = p), (n = r.inflate(d, s.Z_NO_FLUSH)) === s.Z_NEED_DICT && m && (h = "string" == typeof m ? o.string2buf(m) : "[object ArrayBuffer]" === u.call(m) ? new Uint8Array(m) : m, n = r.inflateSetDictionary(this.strm, h)), n === s.Z_BUF_ERROR && !0 === _ && (n = s.Z_OK, _ = !1), n !== s.Z_STREAM_END && n !== s.Z_OK) return this.onEnd(n), !(this.ended = !0);
          d.next_out && (0 !== d.avail_out && n !== s.Z_STREAM_END && (0 !== d.avail_in || a !== s.Z_FINISH && a !== s.Z_SYNC_FLUSH) || ("string" === this.options.to ? (c = o.utf8border(d.output, d.next_out), l = d.next_out - c, f = o.buf2string(d.output, c), d.next_out = l, d.avail_out = p - l, l && i.arraySet(d.output, d.output, c, l, 0), this.onData(f)) : this.onData(i.shrinkBuf(d.output, d.next_out)))), 0 === d.avail_in && 0 === d.avail_out && (_ = !0);
        } while ((0 < d.avail_in || 0 === d.avail_out) && n !== s.Z_STREAM_END);
        return n === s.Z_STREAM_END && (a = s.Z_FINISH), a === s.Z_FINISH ? (n = r.inflateEnd(this.strm), this.onEnd(n), this.ended = !0, n === s.Z_OK) : a !== s.Z_SYNC_FLUSH || (this.onEnd(s.Z_OK), !(d.avail_out = 0));
      }, f.prototype.onData = function (e) {
        this.chunks.push(e);
      }, f.prototype.onEnd = function (e) {
        e === s.Z_OK && ("string" === this.options.to ? this.result = this.chunks.join("") : this.result = i.flattenChunks(this.chunks)), this.chunks = [], this.err = e, this.msg = this.strm.msg;
      }, n.Inflate = f, n.inflate = h, n.inflateRaw = function (e, t) {
        return (t = t || {}).raw = !0, h(e, t);
      }, n.ungzip = h;
    }, {
      "./utils/common": 41,
      "./utils/strings": 42,
      "./zlib/constants": 44,
      "./zlib/gzheader": 47,
      "./zlib/inflate": 49,
      "./zlib/messages": 51,
      "./zlib/zstream": 53
    }],
    41: [function (e, t, n) {
      var r = "undefined" != typeof Uint8Array && "undefined" != typeof Uint16Array && "undefined" != typeof Int32Array;
      n.assign = function (e) {
        for (var t = Array.prototype.slice.call(arguments, 1); t.length;) {
          var n = t.shift();
          if (n) {
            if ("object" != _typeof2(n)) throw new TypeError(n + "must be non-object");
            for (var r in n) n.hasOwnProperty(r) && (e[r] = n[r]);
          }
        }
        return e;
      }, n.shrinkBuf = function (e, t) {
        return e.length === t ? e : e.subarray ? e.subarray(0, t) : (e.length = t, e);
      };
      var i = {
          arraySet: function arraySet(e, t, n, r, i) {
            if (t.subarray && e.subarray) e.set(t.subarray(n, n + r), i);else for (var o = 0; o < r; o++) e[i + o] = t[n + o];
          },
          flattenChunks: function flattenChunks(e) {
            var t, n, r, i, o, s;
            for (t = r = 0, n = e.length; t < n; t++) r += e[t].length;
            for (s = new Uint8Array(r), t = i = 0, n = e.length; t < n; t++) o = e[t], s.set(o, i), i += o.length;
            return s;
          }
        },
        o = {
          arraySet: function arraySet(e, t, n, r, i) {
            for (var o = 0; o < r; o++) e[i + o] = t[n + o];
          },
          flattenChunks: function flattenChunks(e) {
            return [].concat.apply([], e);
          }
        };
      n.setTyped = function (e) {
        e ? (n.Buf8 = Uint8Array, n.Buf16 = Uint16Array, n.Buf32 = Int32Array, n.assign(n, i)) : (n.Buf8 = Array, n.Buf16 = Array, n.Buf32 = Array, n.assign(n, o));
      }, n.setTyped(r);
    }, {}],
    42: [function (e, t, n) {
      var r = e("./common"),
        i = !0,
        o = !0;
      try {
        String.fromCharCode.apply(null, [0]);
      } catch (l) {
        i = !1;
      }
      try {
        String.fromCharCode.apply(null, new Uint8Array(1));
      } catch (l) {
        o = !1;
      }
      for (var s = new r.Buf8(256), a = 0; a < 256; a++) s[a] = 252 <= a ? 6 : 248 <= a ? 5 : 240 <= a ? 4 : 224 <= a ? 3 : 192 <= a ? 2 : 1;
      function c(e, t) {
        if (t < 65537 && (e.subarray && o || !e.subarray && i)) return String.fromCharCode.apply(null, r.shrinkBuf(e, t));
        for (var n = "", s = 0; s < t; s++) n += String.fromCharCode(e[s]);
        return n;
      }
      s[254] = s[254] = 1, n.string2buf = function (e) {
        var t,
          n,
          i,
          o,
          s,
          a = e.length,
          c = 0;
        for (o = 0; o < a; o++) 55296 == (64512 & (n = e.charCodeAt(o))) && o + 1 < a && 56320 == (64512 & (i = e.charCodeAt(o + 1))) && (n = 65536 + (n - 55296 << 10) + (i - 56320), o++), c += n < 128 ? 1 : n < 2048 ? 2 : n < 65536 ? 3 : 4;
        for (t = new r.Buf8(c), o = s = 0; s < c; o++) 55296 == (64512 & (n = e.charCodeAt(o))) && o + 1 < a && 56320 == (64512 & (i = e.charCodeAt(o + 1))) && (n = 65536 + (n - 55296 << 10) + (i - 56320), o++), n < 128 ? t[s++] = n : (n < 2048 ? t[s++] = 192 | n >>> 6 : (n < 65536 ? t[s++] = 224 | n >>> 12 : (t[s++] = 240 | n >>> 18, t[s++] = 128 | n >>> 12 & 63), t[s++] = 128 | n >>> 6 & 63), t[s++] = 128 | 63 & n);
        return t;
      }, n.buf2binstring = function (e) {
        return c(e, e.length);
      }, n.binstring2buf = function (e) {
        for (var t = new r.Buf8(e.length), n = 0, i = t.length; n < i; n++) t[n] = e.charCodeAt(n);
        return t;
      }, n.buf2string = function (e, t) {
        var n,
          r,
          i,
          o,
          a = t || e.length,
          l = new Array(2 * a);
        for (n = r = 0; n < a;) if ((i = e[n++]) < 128) l[r++] = i;else if (4 < (o = s[i])) l[r++] = 65533, n += o - 1;else {
          for (i &= 2 === o ? 31 : 3 === o ? 15 : 7; 1 < o && n < a;) i = i << 6 | 63 & e[n++], o--;
          1 < o ? l[r++] = 65533 : i < 65536 ? l[r++] = i : (i -= 65536, l[r++] = 55296 | i >> 10 & 1023, l[r++] = 56320 | 1023 & i);
        }
        return c(l, r);
      }, n.utf8border = function (e, t) {
        var n;
        for ((t = t || e.length) > e.length && (t = e.length), n = t - 1; 0 <= n && 128 == (192 & e[n]);) n--;
        return n < 0 || 0 === n ? t : n + s[e[n]] > t ? n : t;
      };
    }, {
      "./common": 41
    }],
    43: [function (e, t, n) {
      t.exports = function (e, t, n, r) {
        for (var i = 65535 & e | 0, o = e >>> 16 & 65535 | 0, s = 0; 0 !== n;) {
          for (n -= s = 2e3 < n ? 2e3 : n; o = o + (i = i + t[r++] | 0) | 0, --s;);
          i %= 65521, o %= 65521;
        }
        return i | o << 16 | 0;
      };
    }, {}],
    44: [function (e, t, n) {
      t.exports = {
        Z_NO_FLUSH: 0,
        Z_PARTIAL_FLUSH: 1,
        Z_SYNC_FLUSH: 2,
        Z_FULL_FLUSH: 3,
        Z_FINISH: 4,
        Z_BLOCK: 5,
        Z_TREES: 6,
        Z_OK: 0,
        Z_STREAM_END: 1,
        Z_NEED_DICT: 2,
        Z_ERRNO: -1,
        Z_STREAM_ERROR: -2,
        Z_DATA_ERROR: -3,
        Z_BUF_ERROR: -5,
        Z_NO_COMPRESSION: 0,
        Z_BEST_SPEED: 1,
        Z_BEST_COMPRESSION: 9,
        Z_DEFAULT_COMPRESSION: -1,
        Z_FILTERED: 1,
        Z_HUFFMAN_ONLY: 2,
        Z_RLE: 3,
        Z_FIXED: 4,
        Z_DEFAULT_STRATEGY: 0,
        Z_BINARY: 0,
        Z_TEXT: 1,
        Z_UNKNOWN: 2,
        Z_DEFLATED: 8
      };
    }, {}],
    45: [function (e, t, n) {
      var r = function () {
        for (var e, t = [], n = 0; n < 256; n++) {
          e = n;
          for (var r = 0; r < 8; r++) e = 1 & e ? 3988292384 ^ e >>> 1 : e >>> 1;
          t[n] = e;
        }
        return t;
      }();
      t.exports = function (e, t, n, i) {
        var o = r,
          s = i + n;
        e ^= -1;
        for (var a = i; a < s; a++) e = e >>> 8 ^ o[255 & (e ^ t[a])];
        return -1 ^ e;
      };
    }, {}],
    46: [function (e, t, n) {
      var r,
        i = e("../utils/common"),
        o = e("./trees"),
        s = e("./adler32"),
        a = e("./crc32"),
        c = e("./messages"),
        l = 0,
        u = 4,
        f = 0,
        h = -2,
        d = -1,
        p = 4,
        m = 2,
        _ = 8,
        g = 9,
        v = 286,
        y = 30,
        b = 19,
        w = 2 * v + 1,
        k = 15,
        x = 3,
        S = 258,
        C = S + x + 1,
        E = 42,
        O = 113,
        A = 1,
        I = 2,
        z = 3,
        $ = 4;
      function P(e, t) {
        return e.msg = c[t], t;
      }
      function R(e) {
        return (e << 1) - (4 < e ? 9 : 0);
      }
      function T(e) {
        for (var t = e.length; 0 <= --t;) e[t] = 0;
      }
      function B(e) {
        var t = e.state,
          n = t.pending;
        n > e.avail_out && (n = e.avail_out), 0 !== n && (i.arraySet(e.output, t.pending_buf, t.pending_out, n, e.next_out), e.next_out += n, t.pending_out += n, e.total_out += n, e.avail_out -= n, t.pending -= n, 0 === t.pending && (t.pending_out = 0));
      }
      function j(e, t) {
        o._tr_flush_block(e, 0 <= e.block_start ? e.block_start : -1, e.strstart - e.block_start, t), e.block_start = e.strstart, B(e.strm);
      }
      function D(e, t) {
        e.pending_buf[e.pending++] = t;
      }
      function L(e, t) {
        e.pending_buf[e.pending++] = t >>> 8 & 255, e.pending_buf[e.pending++] = 255 & t;
      }
      function N(e, t) {
        var n,
          r,
          i = e.max_chain_length,
          o = e.strstart,
          s = e.prev_length,
          a = e.nice_match,
          c = e.strstart > e.w_size - C ? e.strstart - (e.w_size - C) : 0,
          l = e.window,
          u = e.w_mask,
          f = e.prev,
          h = e.strstart + S,
          d = l[o + s - 1],
          p = l[o + s];
        e.prev_length >= e.good_match && (i >>= 2), a > e.lookahead && (a = e.lookahead);
        do {
          if (l[(n = t) + s] === p && l[n + s - 1] === d && l[n] === l[o] && l[++n] === l[o + 1]) {
            o += 2, n++;
            do {} while (l[++o] === l[++n] && l[++o] === l[++n] && l[++o] === l[++n] && l[++o] === l[++n] && l[++o] === l[++n] && l[++o] === l[++n] && l[++o] === l[++n] && l[++o] === l[++n] && o < h);
            if (r = S - (h - o), o = h - S, s < r) {
              if (e.match_start = t, a <= (s = r)) break;
              d = l[o + s - 1], p = l[o + s];
            }
          }
        } while ((t = f[t & u]) > c && 0 != --i);
        return s <= e.lookahead ? s : e.lookahead;
      }
      function U(e) {
        var t,
          n,
          r,
          o,
          c,
          l,
          u,
          f,
          h,
          d,
          p = e.w_size;
        do {
          if (o = e.window_size - e.lookahead - e.strstart, e.strstart >= p + (p - C)) {
            for (i.arraySet(e.window, e.window, p, p, 0), e.match_start -= p, e.strstart -= p, e.block_start -= p, t = n = e.hash_size; r = e.head[--t], e.head[t] = p <= r ? r - p : 0, --n;);
            for (t = n = p; r = e.prev[--t], e.prev[t] = p <= r ? r - p : 0, --n;);
            o += p;
          }
          if (0 === e.strm.avail_in) break;
          if (l = e.strm, u = e.window, f = e.strstart + e.lookahead, d = void 0, (h = o) < (d = l.avail_in) && (d = h), n = 0 === d ? 0 : (l.avail_in -= d, i.arraySet(u, l.input, l.next_in, d, f), 1 === l.state.wrap ? l.adler = s(l.adler, u, d, f) : 2 === l.state.wrap && (l.adler = a(l.adler, u, d, f)), l.next_in += d, l.total_in += d, d), e.lookahead += n, e.lookahead + e.insert >= x) for (c = e.strstart - e.insert, e.ins_h = e.window[c], e.ins_h = (e.ins_h << e.hash_shift ^ e.window[c + 1]) & e.hash_mask; e.insert && (e.ins_h = (e.ins_h << e.hash_shift ^ e.window[c + x - 1]) & e.hash_mask, e.prev[c & e.w_mask] = e.head[e.ins_h], e.head[e.ins_h] = c, c++, e.insert--, !(e.lookahead + e.insert < x)););
        } while (e.lookahead < C && 0 !== e.strm.avail_in);
      }
      function F(e, t) {
        for (var n, r;;) {
          if (e.lookahead < C) {
            if (U(e), e.lookahead < C && t === l) return A;
            if (0 === e.lookahead) break;
          }
          if (n = 0, e.lookahead >= x && (e.ins_h = (e.ins_h << e.hash_shift ^ e.window[e.strstart + x - 1]) & e.hash_mask, n = e.prev[e.strstart & e.w_mask] = e.head[e.ins_h], e.head[e.ins_h] = e.strstart), 0 !== n && e.strstart - n <= e.w_size - C && (e.match_length = N(e, n)), e.match_length >= x) {
            if (r = o._tr_tally(e, e.strstart - e.match_start, e.match_length - x), e.lookahead -= e.match_length, e.match_length <= e.max_lazy_match && e.lookahead >= x) {
              for (e.match_length--; e.strstart++, e.ins_h = (e.ins_h << e.hash_shift ^ e.window[e.strstart + x - 1]) & e.hash_mask, n = e.prev[e.strstart & e.w_mask] = e.head[e.ins_h], e.head[e.ins_h] = e.strstart, 0 != --e.match_length;);
              e.strstart++;
            } else e.strstart += e.match_length, e.match_length = 0, e.ins_h = e.window[e.strstart], e.ins_h = (e.ins_h << e.hash_shift ^ e.window[e.strstart + 1]) & e.hash_mask;
          } else r = o._tr_tally(e, 0, e.window[e.strstart]), e.lookahead--, e.strstart++;
          if (r && (j(e, !1), 0 === e.strm.avail_out)) return A;
        }
        return e.insert = e.strstart < x - 1 ? e.strstart : x - 1, t === u ? (j(e, !0), 0 === e.strm.avail_out ? z : $) : e.last_lit && (j(e, !1), 0 === e.strm.avail_out) ? A : I;
      }
      function M(e, t) {
        for (var n, r, i;;) {
          if (e.lookahead < C) {
            if (U(e), e.lookahead < C && t === l) return A;
            if (0 === e.lookahead) break;
          }
          if (n = 0, e.lookahead >= x && (e.ins_h = (e.ins_h << e.hash_shift ^ e.window[e.strstart + x - 1]) & e.hash_mask, n = e.prev[e.strstart & e.w_mask] = e.head[e.ins_h], e.head[e.ins_h] = e.strstart), e.prev_length = e.match_length, e.prev_match = e.match_start, e.match_length = x - 1, 0 !== n && e.prev_length < e.max_lazy_match && e.strstart - n <= e.w_size - C && (e.match_length = N(e, n), e.match_length <= 5 && (1 === e.strategy || e.match_length === x && 4096 < e.strstart - e.match_start) && (e.match_length = x - 1)), e.prev_length >= x && e.match_length <= e.prev_length) {
            for (i = e.strstart + e.lookahead - x, r = o._tr_tally(e, e.strstart - 1 - e.prev_match, e.prev_length - x), e.lookahead -= e.prev_length - 1, e.prev_length -= 2; ++e.strstart <= i && (e.ins_h = (e.ins_h << e.hash_shift ^ e.window[e.strstart + x - 1]) & e.hash_mask, n = e.prev[e.strstart & e.w_mask] = e.head[e.ins_h], e.head[e.ins_h] = e.strstart), 0 != --e.prev_length;);
            if (e.match_available = 0, e.match_length = x - 1, e.strstart++, r && (j(e, !1), 0 === e.strm.avail_out)) return A;
          } else if (e.match_available) {
            if ((r = o._tr_tally(e, 0, e.window[e.strstart - 1])) && j(e, !1), e.strstart++, e.lookahead--, 0 === e.strm.avail_out) return A;
          } else e.match_available = 1, e.strstart++, e.lookahead--;
        }
        return e.match_available && (r = o._tr_tally(e, 0, e.window[e.strstart - 1]), e.match_available = 0), e.insert = e.strstart < x - 1 ? e.strstart : x - 1, t === u ? (j(e, !0), 0 === e.strm.avail_out ? z : $) : e.last_lit && (j(e, !1), 0 === e.strm.avail_out) ? A : I;
      }
      function W(e, t, n, r, i) {
        this.good_length = e, this.max_lazy = t, this.nice_length = n, this.max_chain = r, this.func = i;
      }
      function H() {
        this.strm = null, this.status = 0, this.pending_buf = null, this.pending_buf_size = 0, this.pending_out = 0, this.pending = 0, this.wrap = 0, this.gzhead = null, this.gzindex = 0, this.method = _, this.last_flush = -1, this.w_size = 0, this.w_bits = 0, this.w_mask = 0, this.window = null, this.window_size = 0, this.prev = null, this.head = null, this.ins_h = 0, this.hash_size = 0, this.hash_bits = 0, this.hash_mask = 0, this.hash_shift = 0, this.block_start = 0, this.match_length = 0, this.prev_match = 0, this.match_available = 0, this.strstart = 0, this.match_start = 0, this.lookahead = 0, this.prev_length = 0, this.max_chain_length = 0, this.max_lazy_match = 0, this.level = 0, this.strategy = 0, this.good_match = 0, this.nice_match = 0, this.dyn_ltree = new i.Buf16(2 * w), this.dyn_dtree = new i.Buf16(2 * (2 * y + 1)), this.bl_tree = new i.Buf16(2 * (2 * b + 1)), T(this.dyn_ltree), T(this.dyn_dtree), T(this.bl_tree), this.l_desc = null, this.d_desc = null, this.bl_desc = null, this.bl_count = new i.Buf16(k + 1), this.heap = new i.Buf16(2 * v + 1), T(this.heap), this.heap_len = 0, this.heap_max = 0, this.depth = new i.Buf16(2 * v + 1), T(this.depth), this.l_buf = 0, this.lit_bufsize = 0, this.last_lit = 0, this.d_buf = 0, this.opt_len = 0, this.static_len = 0, this.matches = 0, this.insert = 0, this.bi_buf = 0, this.bi_valid = 0;
      }
      function Z(e) {
        var t;
        return e && e.state ? (e.total_in = e.total_out = 0, e.data_type = m, (t = e.state).pending = 0, t.pending_out = 0, t.wrap < 0 && (t.wrap = -t.wrap), t.status = t.wrap ? E : O, e.adler = 2 === t.wrap ? 0 : 1, t.last_flush = l, o._tr_init(t), f) : P(e, h);
      }
      function V(e) {
        var t,
          n = Z(e);
        return n === f && ((t = e.state).window_size = 2 * t.w_size, T(t.head), t.max_lazy_match = r[t.level].max_lazy, t.good_match = r[t.level].good_length, t.nice_match = r[t.level].nice_length, t.max_chain_length = r[t.level].max_chain, t.strstart = 0, t.block_start = 0, t.lookahead = 0, t.insert = 0, t.match_length = t.prev_length = x - 1, t.match_available = 0, t.ins_h = 0), n;
      }
      function G(e, t, n, r, o, s) {
        if (!e) return h;
        var a = 1;
        if (t === d && (t = 6), r < 0 ? (a = 0, r = -r) : 15 < r && (a = 2, r -= 16), o < 1 || g < o || n !== _ || r < 8 || 15 < r || t < 0 || 9 < t || s < 0 || p < s) return P(e, h);
        8 === r && (r = 9);
        var c = new H();
        return (e.state = c).strm = e, c.wrap = a, c.gzhead = null, c.w_bits = r, c.w_size = 1 << c.w_bits, c.w_mask = c.w_size - 1, c.hash_bits = o + 7, c.hash_size = 1 << c.hash_bits, c.hash_mask = c.hash_size - 1, c.hash_shift = ~~((c.hash_bits + x - 1) / x), c.window = new i.Buf8(2 * c.w_size), c.head = new i.Buf16(c.hash_size), c.prev = new i.Buf16(c.w_size), c.lit_bufsize = 1 << o + 6, c.pending_buf_size = 4 * c.lit_bufsize, c.pending_buf = new i.Buf8(c.pending_buf_size), c.d_buf = 1 * c.lit_bufsize, c.l_buf = 3 * c.lit_bufsize, c.level = t, c.strategy = s, c.method = n, V(e);
      }
      r = [new W(0, 0, 0, 0, function (e, t) {
        var n = 65535;
        for (n > e.pending_buf_size - 5 && (n = e.pending_buf_size - 5);;) {
          if (e.lookahead <= 1) {
            if (U(e), 0 === e.lookahead && t === l) return A;
            if (0 === e.lookahead) break;
          }
          e.strstart += e.lookahead, e.lookahead = 0;
          var r = e.block_start + n;
          if ((0 === e.strstart || e.strstart >= r) && (e.lookahead = e.strstart - r, e.strstart = r, j(e, !1), 0 === e.strm.avail_out)) return A;
          if (e.strstart - e.block_start >= e.w_size - C && (j(e, !1), 0 === e.strm.avail_out)) return A;
        }
        return e.insert = 0, t === u ? (j(e, !0), 0 === e.strm.avail_out ? z : $) : (e.strstart > e.block_start && (j(e, !1), e.strm.avail_out), A);
      }), new W(4, 4, 8, 4, F), new W(4, 5, 16, 8, F), new W(4, 6, 32, 32, F), new W(4, 4, 16, 16, M), new W(8, 16, 32, 32, M), new W(8, 16, 128, 128, M), new W(8, 32, 128, 256, M), new W(32, 128, 258, 1024, M), new W(32, 258, 258, 4096, M)], n.deflateInit = function (e, t) {
        return G(e, t, _, 15, 8, 0);
      }, n.deflateInit2 = G, n.deflateReset = V, n.deflateResetKeep = Z, n.deflateSetHeader = function (e, t) {
        return e && e.state ? 2 !== e.state.wrap ? h : (e.state.gzhead = t, f) : h;
      }, n.deflate = function (e, t) {
        var n, i, s, c;
        if (!e || !e.state || 5 < t || t < 0) return e ? P(e, h) : h;
        if (i = e.state, !e.output || !e.input && 0 !== e.avail_in || 666 === i.status && t !== u) return P(e, 0 === e.avail_out ? -5 : h);
        if (i.strm = e, n = i.last_flush, i.last_flush = t, i.status === E) if (2 === i.wrap) e.adler = 0, D(i, 31), D(i, 139), D(i, 8), i.gzhead ? (D(i, (i.gzhead.text ? 1 : 0) + (i.gzhead.hcrc ? 2 : 0) + (i.gzhead.extra ? 4 : 0) + (i.gzhead.name ? 8 : 0) + (i.gzhead.comment ? 16 : 0)), D(i, 255 & i.gzhead.time), D(i, i.gzhead.time >> 8 & 255), D(i, i.gzhead.time >> 16 & 255), D(i, i.gzhead.time >> 24 & 255), D(i, 9 === i.level ? 2 : 2 <= i.strategy || i.level < 2 ? 4 : 0), D(i, 255 & i.gzhead.os), i.gzhead.extra && i.gzhead.extra.length && (D(i, 255 & i.gzhead.extra.length), D(i, i.gzhead.extra.length >> 8 & 255)), i.gzhead.hcrc && (e.adler = a(e.adler, i.pending_buf, i.pending, 0)), i.gzindex = 0, i.status = 69) : (D(i, 0), D(i, 0), D(i, 0), D(i, 0), D(i, 0), D(i, 9 === i.level ? 2 : 2 <= i.strategy || i.level < 2 ? 4 : 0), D(i, 3), i.status = O);else {
          var d = _ + (i.w_bits - 8 << 4) << 8;
          d |= (2 <= i.strategy || i.level < 2 ? 0 : i.level < 6 ? 1 : 6 === i.level ? 2 : 3) << 6, 0 !== i.strstart && (d |= 32), d += 31 - d % 31, i.status = O, L(i, d), 0 !== i.strstart && (L(i, e.adler >>> 16), L(i, 65535 & e.adler)), e.adler = 1;
        }
        if (69 === i.status) if (i.gzhead.extra) {
          for (s = i.pending; i.gzindex < (65535 & i.gzhead.extra.length) && (i.pending !== i.pending_buf_size || (i.gzhead.hcrc && i.pending > s && (e.adler = a(e.adler, i.pending_buf, i.pending - s, s)), B(e), s = i.pending, i.pending !== i.pending_buf_size));) D(i, 255 & i.gzhead.extra[i.gzindex]), i.gzindex++;
          i.gzhead.hcrc && i.pending > s && (e.adler = a(e.adler, i.pending_buf, i.pending - s, s)), i.gzindex === i.gzhead.extra.length && (i.gzindex = 0, i.status = 73);
        } else i.status = 73;
        if (73 === i.status) if (i.gzhead.name) {
          s = i.pending;
          do {
            if (i.pending === i.pending_buf_size && (i.gzhead.hcrc && i.pending > s && (e.adler = a(e.adler, i.pending_buf, i.pending - s, s)), B(e), s = i.pending, i.pending === i.pending_buf_size)) {
              c = 1;
              break;
            }
            c = i.gzindex < i.gzhead.name.length ? 255 & i.gzhead.name.charCodeAt(i.gzindex++) : 0, D(i, c);
          } while (0 !== c);
          i.gzhead.hcrc && i.pending > s && (e.adler = a(e.adler, i.pending_buf, i.pending - s, s)), 0 === c && (i.gzindex = 0, i.status = 91);
        } else i.status = 91;
        if (91 === i.status) if (i.gzhead.comment) {
          s = i.pending;
          do {
            if (i.pending === i.pending_buf_size && (i.gzhead.hcrc && i.pending > s && (e.adler = a(e.adler, i.pending_buf, i.pending - s, s)), B(e), s = i.pending, i.pending === i.pending_buf_size)) {
              c = 1;
              break;
            }
            c = i.gzindex < i.gzhead.comment.length ? 255 & i.gzhead.comment.charCodeAt(i.gzindex++) : 0, D(i, c);
          } while (0 !== c);
          i.gzhead.hcrc && i.pending > s && (e.adler = a(e.adler, i.pending_buf, i.pending - s, s)), 0 === c && (i.status = 103);
        } else i.status = 103;
        if (103 === i.status && (i.gzhead.hcrc ? (i.pending + 2 > i.pending_buf_size && B(e), i.pending + 2 <= i.pending_buf_size && (D(i, 255 & e.adler), D(i, e.adler >> 8 & 255), e.adler = 0, i.status = O)) : i.status = O), 0 !== i.pending) {
          if (B(e), 0 === e.avail_out) return i.last_flush = -1, f;
        } else if (0 === e.avail_in && R(t) <= R(n) && t !== u) return P(e, -5);
        if (666 === i.status && 0 !== e.avail_in) return P(e, -5);
        if (0 !== e.avail_in || 0 !== i.lookahead || t !== l && 666 !== i.status) {
          var p = 2 === i.strategy ? function (e, t) {
            for (var n;;) {
              if (0 === e.lookahead && (U(e), 0 === e.lookahead)) {
                if (t === l) return A;
                break;
              }
              if (e.match_length = 0, n = o._tr_tally(e, 0, e.window[e.strstart]), e.lookahead--, e.strstart++, n && (j(e, !1), 0 === e.strm.avail_out)) return A;
            }
            return e.insert = 0, t === u ? (j(e, !0), 0 === e.strm.avail_out ? z : $) : e.last_lit && (j(e, !1), 0 === e.strm.avail_out) ? A : I;
          }(i, t) : 3 === i.strategy ? function (e, t) {
            for (var n, r, i, s, a = e.window;;) {
              if (e.lookahead <= S) {
                if (U(e), e.lookahead <= S && t === l) return A;
                if (0 === e.lookahead) break;
              }
              if (e.match_length = 0, e.lookahead >= x && 0 < e.strstart && (r = a[i = e.strstart - 1]) === a[++i] && r === a[++i] && r === a[++i]) {
                s = e.strstart + S;
                do {} while (r === a[++i] && r === a[++i] && r === a[++i] && r === a[++i] && r === a[++i] && r === a[++i] && r === a[++i] && r === a[++i] && i < s);
                e.match_length = S - (s - i), e.match_length > e.lookahead && (e.match_length = e.lookahead);
              }
              if (e.match_length >= x ? (n = o._tr_tally(e, 1, e.match_length - x), e.lookahead -= e.match_length, e.strstart += e.match_length, e.match_length = 0) : (n = o._tr_tally(e, 0, e.window[e.strstart]), e.lookahead--, e.strstart++), n && (j(e, !1), 0 === e.strm.avail_out)) return A;
            }
            return e.insert = 0, t === u ? (j(e, !0), 0 === e.strm.avail_out ? z : $) : e.last_lit && (j(e, !1), 0 === e.strm.avail_out) ? A : I;
          }(i, t) : r[i.level].func(i, t);
          if (p !== z && p !== $ || (i.status = 666), p === A || p === z) return 0 === e.avail_out && (i.last_flush = -1), f;
          if (p === I && (1 === t ? o._tr_align(i) : 5 !== t && (o._tr_stored_block(i, 0, 0, !1), 3 === t && (T(i.head), 0 === i.lookahead && (i.strstart = 0, i.block_start = 0, i.insert = 0))), B(e), 0 === e.avail_out)) return i.last_flush = -1, f;
        }
        return t !== u ? f : i.wrap <= 0 ? 1 : (2 === i.wrap ? (D(i, 255 & e.adler), D(i, e.adler >> 8 & 255), D(i, e.adler >> 16 & 255), D(i, e.adler >> 24 & 255), D(i, 255 & e.total_in), D(i, e.total_in >> 8 & 255), D(i, e.total_in >> 16 & 255), D(i, e.total_in >> 24 & 255)) : (L(i, e.adler >>> 16), L(i, 65535 & e.adler)), B(e), 0 < i.wrap && (i.wrap = -i.wrap), 0 !== i.pending ? f : 1);
      }, n.deflateEnd = function (e) {
        var t;
        return e && e.state ? (t = e.state.status) !== E && 69 !== t && 73 !== t && 91 !== t && 103 !== t && t !== O && 666 !== t ? P(e, h) : (e.state = null, t === O ? P(e, -3) : f) : h;
      }, n.deflateSetDictionary = function (e, t) {
        var n,
          r,
          o,
          a,
          c,
          l,
          u,
          d,
          p = t.length;
        if (!e || !e.state) return h;
        if (2 === (a = (n = e.state).wrap) || 1 === a && n.status !== E || n.lookahead) return h;
        for (1 === a && (e.adler = s(e.adler, t, p, 0)), n.wrap = 0, p >= n.w_size && (0 === a && (T(n.head), n.strstart = 0, n.block_start = 0, n.insert = 0), d = new i.Buf8(n.w_size), i.arraySet(d, t, p - n.w_size, n.w_size, 0), t = d, p = n.w_size), c = e.avail_in, l = e.next_in, u = e.input, e.avail_in = p, e.next_in = 0, e.input = t, U(n); n.lookahead >= x;) {
          for (r = n.strstart, o = n.lookahead - (x - 1); n.ins_h = (n.ins_h << n.hash_shift ^ n.window[r + x - 1]) & n.hash_mask, n.prev[r & n.w_mask] = n.head[n.ins_h], n.head[n.ins_h] = r, r++, --o;);
          n.strstart = r, n.lookahead = x - 1, U(n);
        }
        return n.strstart += n.lookahead, n.block_start = n.strstart, n.insert = n.lookahead, n.lookahead = 0, n.match_length = n.prev_length = x - 1, n.match_available = 0, e.next_in = l, e.input = u, e.avail_in = c, n.wrap = a, f;
      }, n.deflateInfo = "pako deflate (from Nodeca project)";
    }, {
      "../utils/common": 41,
      "./adler32": 43,
      "./crc32": 45,
      "./messages": 51,
      "./trees": 52
    }],
    47: [function (e, t, n) {
      t.exports = function () {
        this.text = 0, this.time = 0, this.xflags = 0, this.os = 0, this.extra = null, this.extra_len = 0, this.name = "", this.comment = "", this.hcrc = 0, this.done = !1;
      };
    }, {}],
    48: [function (e, t, n) {
      t.exports = function (e, t) {
        var n, r, i, o, s, a, c, l, u, f, h, d, p, m, _, g, v, y, b, w, k, x, S, C, E;
        n = e.state, r = e.next_in, C = e.input, i = r + (e.avail_in - 5), o = e.next_out, E = e.output, s = o - (t - e.avail_out), a = o + (e.avail_out - 257), c = n.dmax, l = n.wsize, u = n.whave, f = n.wnext, h = n.window, d = n.hold, p = n.bits, m = n.lencode, _ = n.distcode, g = (1 << n.lenbits) - 1, v = (1 << n.distbits) - 1;
        e: do {
          p < 15 && (d += C[r++] << p, p += 8, d += C[r++] << p, p += 8), y = m[d & g];
          t: for (;;) {
            if (d >>>= b = y >>> 24, p -= b, 0 == (b = y >>> 16 & 255)) E[o++] = 65535 & y;else {
              if (!(16 & b)) {
                if (0 == (64 & b)) {
                  y = m[(65535 & y) + (d & (1 << b) - 1)];
                  continue t;
                }
                if (32 & b) {
                  n.mode = 12;
                  break e;
                }
                e.msg = "invalid literal/length code", n.mode = 30;
                break e;
              }
              w = 65535 & y, (b &= 15) && (p < b && (d += C[r++] << p, p += 8), w += d & (1 << b) - 1, d >>>= b, p -= b), p < 15 && (d += C[r++] << p, p += 8, d += C[r++] << p, p += 8), y = _[d & v];
              n: for (;;) {
                if (d >>>= b = y >>> 24, p -= b, !(16 & (b = y >>> 16 & 255))) {
                  if (0 == (64 & b)) {
                    y = _[(65535 & y) + (d & (1 << b) - 1)];
                    continue n;
                  }
                  e.msg = "invalid distance code", n.mode = 30;
                  break e;
                }
                if (k = 65535 & y, p < (b &= 15) && (d += C[r++] << p, (p += 8) < b && (d += C[r++] << p, p += 8)), c < (k += d & (1 << b) - 1)) {
                  e.msg = "invalid distance too far back", n.mode = 30;
                  break e;
                }
                if (d >>>= b, p -= b, (b = o - s) < k) {
                  if (u < (b = k - b) && n.sane) {
                    e.msg = "invalid distance too far back", n.mode = 30;
                    break e;
                  }
                  if (S = h, (x = 0) === f) {
                    if (x += l - b, b < w) {
                      for (w -= b; E[o++] = h[x++], --b;);
                      x = o - k, S = E;
                    }
                  } else if (f < b) {
                    if (x += l + f - b, (b -= f) < w) {
                      for (w -= b; E[o++] = h[x++], --b;);
                      if (x = 0, f < w) {
                        for (w -= b = f; E[o++] = h[x++], --b;);
                        x = o - k, S = E;
                      }
                    }
                  } else if (x += f - b, b < w) {
                    for (w -= b; E[o++] = h[x++], --b;);
                    x = o - k, S = E;
                  }
                  for (; 2 < w;) E[o++] = S[x++], E[o++] = S[x++], E[o++] = S[x++], w -= 3;
                  w && (E[o++] = S[x++], 1 < w && (E[o++] = S[x++]));
                } else {
                  for (x = o - k; E[o++] = E[x++], E[o++] = E[x++], E[o++] = E[x++], 2 < (w -= 3););
                  w && (E[o++] = E[x++], 1 < w && (E[o++] = E[x++]));
                }
                break;
              }
            }
            break;
          }
        } while (r < i && o < a);
        r -= w = p >> 3, d &= (1 << (p -= w << 3)) - 1, e.next_in = r, e.next_out = o, e.avail_in = r < i ? i - r + 5 : 5 - (r - i), e.avail_out = o < a ? a - o + 257 : 257 - (o - a), n.hold = d, n.bits = p;
      };
    }, {}],
    49: [function (e, t, n) {
      var r = e("../utils/common"),
        i = e("./adler32"),
        o = e("./crc32"),
        s = e("./inffast"),
        a = e("./inftrees"),
        c = 1,
        l = 2,
        u = 0,
        f = -2,
        h = 1,
        d = 852,
        p = 592;
      function m(e) {
        return (e >>> 24 & 255) + (e >>> 8 & 65280) + ((65280 & e) << 8) + ((255 & e) << 24);
      }
      function _() {
        this.mode = 0, this.last = !1, this.wrap = 0, this.havedict = !1, this.flags = 0, this.dmax = 0, this.check = 0, this.total = 0, this.head = null, this.wbits = 0, this.wsize = 0, this.whave = 0, this.wnext = 0, this.window = null, this.hold = 0, this.bits = 0, this.length = 0, this.offset = 0, this.extra = 0, this.lencode = null, this.distcode = null, this.lenbits = 0, this.distbits = 0, this.ncode = 0, this.nlen = 0, this.ndist = 0, this.have = 0, this.next = null, this.lens = new r.Buf16(320), this.work = new r.Buf16(288), this.lendyn = null, this.distdyn = null, this.sane = 0, this.back = 0, this.was = 0;
      }
      function g(e) {
        var t;
        return e && e.state ? (t = e.state, e.total_in = e.total_out = t.total = 0, e.msg = "", t.wrap && (e.adler = 1 & t.wrap), t.mode = h, t.last = 0, t.havedict = 0, t.dmax = 32768, t.head = null, t.hold = 0, t.bits = 0, t.lencode = t.lendyn = new r.Buf32(d), t.distcode = t.distdyn = new r.Buf32(p), t.sane = 1, t.back = -1, u) : f;
      }
      function v(e) {
        var t;
        return e && e.state ? ((t = e.state).wsize = 0, t.whave = 0, t.wnext = 0, g(e)) : f;
      }
      function y(e, t) {
        var n, r;
        return e && e.state ? (r = e.state, t < 0 ? (n = 0, t = -t) : (n = 1 + (t >> 4), t < 48 && (t &= 15)), t && (t < 8 || 15 < t) ? f : (null !== r.window && r.wbits !== t && (r.window = null), r.wrap = n, r.wbits = t, v(e))) : f;
      }
      function b(e, t) {
        var n, r;
        return e ? (r = new _(), (e.state = r).window = null, (n = y(e, t)) !== u && (e.state = null), n) : f;
      }
      var w,
        k,
        x = !0;
      function S(e) {
        if (x) {
          var t;
          for (w = new r.Buf32(512), k = new r.Buf32(32), t = 0; t < 144;) e.lens[t++] = 8;
          for (; t < 256;) e.lens[t++] = 9;
          for (; t < 280;) e.lens[t++] = 7;
          for (; t < 288;) e.lens[t++] = 8;
          for (a(c, e.lens, 0, 288, w, 0, e.work, {
            bits: 9
          }), t = 0; t < 32;) e.lens[t++] = 5;
          a(l, e.lens, 0, 32, k, 0, e.work, {
            bits: 5
          }), x = !1;
        }
        e.lencode = w, e.lenbits = 9, e.distcode = k, e.distbits = 5;
      }
      function C(e, t, n, i) {
        var o,
          s = e.state;
        return null === s.window && (s.wsize = 1 << s.wbits, s.wnext = 0, s.whave = 0, s.window = new r.Buf8(s.wsize)), i >= s.wsize ? (r.arraySet(s.window, t, n - s.wsize, s.wsize, 0), s.wnext = 0, s.whave = s.wsize) : (i < (o = s.wsize - s.wnext) && (o = i), r.arraySet(s.window, t, n - i, o, s.wnext), (i -= o) ? (r.arraySet(s.window, t, n - i, i, 0), s.wnext = i, s.whave = s.wsize) : (s.wnext += o, s.wnext === s.wsize && (s.wnext = 0), s.whave < s.wsize && (s.whave += o))), 0;
      }
      n.inflateReset = v, n.inflateReset2 = y, n.inflateResetKeep = g, n.inflateInit = function (e) {
        return b(e, 15);
      }, n.inflateInit2 = b, n.inflate = function (e, t) {
        var n,
          d,
          p,
          _,
          g,
          v,
          y,
          b,
          w,
          k,
          x,
          E,
          O,
          A,
          I,
          z,
          $,
          P,
          R,
          T,
          B,
          j,
          D,
          L,
          N = 0,
          U = new r.Buf8(4),
          F = [16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15];
        if (!e || !e.state || !e.output || !e.input && 0 !== e.avail_in) return f;
        12 === (n = e.state).mode && (n.mode = 13), g = e.next_out, p = e.output, y = e.avail_out, _ = e.next_in, d = e.input, v = e.avail_in, b = n.hold, w = n.bits, k = v, x = y, j = u;
        e: for (;;) switch (n.mode) {
          case h:
            if (0 === n.wrap) {
              n.mode = 13;
              break;
            }
            for (; w < 16;) {
              if (0 === v) break e;
              v--, b += d[_++] << w, w += 8;
            }
            if (2 & n.wrap && 35615 === b) {
              U[n.check = 0] = 255 & b, U[1] = b >>> 8 & 255, n.check = o(n.check, U, 2, 0), w = b = 0, n.mode = 2;
              break;
            }
            if (n.flags = 0, n.head && (n.head.done = !1), !(1 & n.wrap) || (((255 & b) << 8) + (b >> 8)) % 31) {
              e.msg = "incorrect header check", n.mode = 30;
              break;
            }
            if (8 != (15 & b)) {
              e.msg = "unknown compression method", n.mode = 30;
              break;
            }
            if (w -= 4, B = 8 + (15 & (b >>>= 4)), 0 === n.wbits) n.wbits = B;else if (B > n.wbits) {
              e.msg = "invalid window size", n.mode = 30;
              break;
            }
            n.dmax = 1 << B, e.adler = n.check = 1, n.mode = 512 & b ? 10 : 12, w = b = 0;
            break;
          case 2:
            for (; w < 16;) {
              if (0 === v) break e;
              v--, b += d[_++] << w, w += 8;
            }
            if (n.flags = b, 8 != (255 & n.flags)) {
              e.msg = "unknown compression method", n.mode = 30;
              break;
            }
            if (57344 & n.flags) {
              e.msg = "unknown header flags set", n.mode = 30;
              break;
            }
            n.head && (n.head.text = b >> 8 & 1), 512 & n.flags && (U[0] = 255 & b, U[1] = b >>> 8 & 255, n.check = o(n.check, U, 2, 0)), w = b = 0, n.mode = 3;
          case 3:
            for (; w < 32;) {
              if (0 === v) break e;
              v--, b += d[_++] << w, w += 8;
            }
            n.head && (n.head.time = b), 512 & n.flags && (U[0] = 255 & b, U[1] = b >>> 8 & 255, U[2] = b >>> 16 & 255, U[3] = b >>> 24 & 255, n.check = o(n.check, U, 4, 0)), w = b = 0, n.mode = 4;
          case 4:
            for (; w < 16;) {
              if (0 === v) break e;
              v--, b += d[_++] << w, w += 8;
            }
            n.head && (n.head.xflags = 255 & b, n.head.os = b >> 8), 512 & n.flags && (U[0] = 255 & b, U[1] = b >>> 8 & 255, n.check = o(n.check, U, 2, 0)), w = b = 0, n.mode = 5;
          case 5:
            if (1024 & n.flags) {
              for (; w < 16;) {
                if (0 === v) break e;
                v--, b += d[_++] << w, w += 8;
              }
              n.length = b, n.head && (n.head.extra_len = b), 512 & n.flags && (U[0] = 255 & b, U[1] = b >>> 8 & 255, n.check = o(n.check, U, 2, 0)), w = b = 0;
            } else n.head && (n.head.extra = null);
            n.mode = 6;
          case 6:
            if (1024 & n.flags && (v < (E = n.length) && (E = v), E && (n.head && (B = n.head.extra_len - n.length, n.head.extra || (n.head.extra = new Array(n.head.extra_len)), r.arraySet(n.head.extra, d, _, E, B)), 512 & n.flags && (n.check = o(n.check, d, E, _)), v -= E, _ += E, n.length -= E), n.length)) break e;
            n.length = 0, n.mode = 7;
          case 7:
            if (2048 & n.flags) {
              if (0 === v) break e;
              for (E = 0; B = d[_ + E++], n.head && B && n.length < 65536 && (n.head.name += String.fromCharCode(B)), B && E < v;);
              if (512 & n.flags && (n.check = o(n.check, d, E, _)), v -= E, _ += E, B) break e;
            } else n.head && (n.head.name = null);
            n.length = 0, n.mode = 8;
          case 8:
            if (4096 & n.flags) {
              if (0 === v) break e;
              for (E = 0; B = d[_ + E++], n.head && B && n.length < 65536 && (n.head.comment += String.fromCharCode(B)), B && E < v;);
              if (512 & n.flags && (n.check = o(n.check, d, E, _)), v -= E, _ += E, B) break e;
            } else n.head && (n.head.comment = null);
            n.mode = 9;
          case 9:
            if (512 & n.flags) {
              for (; w < 16;) {
                if (0 === v) break e;
                v--, b += d[_++] << w, w += 8;
              }
              if (b !== (65535 & n.check)) {
                e.msg = "header crc mismatch", n.mode = 30;
                break;
              }
              w = b = 0;
            }
            n.head && (n.head.hcrc = n.flags >> 9 & 1, n.head.done = !0), e.adler = n.check = 0, n.mode = 12;
            break;
          case 10:
            for (; w < 32;) {
              if (0 === v) break e;
              v--, b += d[_++] << w, w += 8;
            }
            e.adler = n.check = m(b), w = b = 0, n.mode = 11;
          case 11:
            if (0 === n.havedict) return e.next_out = g, e.avail_out = y, e.next_in = _, e.avail_in = v, n.hold = b, n.bits = w, 2;
            e.adler = n.check = 1, n.mode = 12;
          case 12:
            if (5 === t || 6 === t) break e;
          case 13:
            if (n.last) {
              b >>>= 7 & w, w -= 7 & w, n.mode = 27;
              break;
            }
            for (; w < 3;) {
              if (0 === v) break e;
              v--, b += d[_++] << w, w += 8;
            }
            switch (n.last = 1 & b, w -= 1, 3 & (b >>>= 1)) {
              case 0:
                n.mode = 14;
                break;
              case 1:
                if (S(n), n.mode = 20, 6 !== t) break;
                b >>>= 2, w -= 2;
                break e;
              case 2:
                n.mode = 17;
                break;
              case 3:
                e.msg = "invalid block type", n.mode = 30;
            }
            b >>>= 2, w -= 2;
            break;
          case 14:
            for (b >>>= 7 & w, w -= 7 & w; w < 32;) {
              if (0 === v) break e;
              v--, b += d[_++] << w, w += 8;
            }
            if ((65535 & b) != (b >>> 16 ^ 65535)) {
              e.msg = "invalid stored block lengths", n.mode = 30;
              break;
            }
            if (n.length = 65535 & b, w = b = 0, n.mode = 15, 6 === t) break e;
          case 15:
            n.mode = 16;
          case 16:
            if (E = n.length) {
              if (v < E && (E = v), y < E && (E = y), 0 === E) break e;
              r.arraySet(p, d, _, E, g), v -= E, _ += E, y -= E, g += E, n.length -= E;
              break;
            }
            n.mode = 12;
            break;
          case 17:
            for (; w < 14;) {
              if (0 === v) break e;
              v--, b += d[_++] << w, w += 8;
            }
            if (n.nlen = 257 + (31 & b), b >>>= 5, w -= 5, n.ndist = 1 + (31 & b), b >>>= 5, w -= 5, n.ncode = 4 + (15 & b), b >>>= 4, w -= 4, 286 < n.nlen || 30 < n.ndist) {
              e.msg = "too many length or distance symbols", n.mode = 30;
              break;
            }
            n.have = 0, n.mode = 18;
          case 18:
            for (; n.have < n.ncode;) {
              for (; w < 3;) {
                if (0 === v) break e;
                v--, b += d[_++] << w, w += 8;
              }
              n.lens[F[n.have++]] = 7 & b, b >>>= 3, w -= 3;
            }
            for (; n.have < 19;) n.lens[F[n.have++]] = 0;
            if (n.lencode = n.lendyn, n.lenbits = 7, D = {
              bits: n.lenbits
            }, j = a(0, n.lens, 0, 19, n.lencode, 0, n.work, D), n.lenbits = D.bits, j) {
              e.msg = "invalid code lengths set", n.mode = 30;
              break;
            }
            n.have = 0, n.mode = 19;
          case 19:
            for (; n.have < n.nlen + n.ndist;) {
              for (; z = (N = n.lencode[b & (1 << n.lenbits) - 1]) >>> 16 & 255, $ = 65535 & N, !((I = N >>> 24) <= w);) {
                if (0 === v) break e;
                v--, b += d[_++] << w, w += 8;
              }
              if ($ < 16) b >>>= I, w -= I, n.lens[n.have++] = $;else {
                if (16 === $) {
                  for (L = I + 2; w < L;) {
                    if (0 === v) break e;
                    v--, b += d[_++] << w, w += 8;
                  }
                  if (b >>>= I, w -= I, 0 === n.have) {
                    e.msg = "invalid bit length repeat", n.mode = 30;
                    break;
                  }
                  B = n.lens[n.have - 1], E = 3 + (3 & b), b >>>= 2, w -= 2;
                } else if (17 === $) {
                  for (L = I + 3; w < L;) {
                    if (0 === v) break e;
                    v--, b += d[_++] << w, w += 8;
                  }
                  w -= I, B = 0, E = 3 + (7 & (b >>>= I)), b >>>= 3, w -= 3;
                } else {
                  for (L = I + 7; w < L;) {
                    if (0 === v) break e;
                    v--, b += d[_++] << w, w += 8;
                  }
                  w -= I, B = 0, E = 11 + (127 & (b >>>= I)), b >>>= 7, w -= 7;
                }
                if (n.have + E > n.nlen + n.ndist) {
                  e.msg = "invalid bit length repeat", n.mode = 30;
                  break;
                }
                for (; E--;) n.lens[n.have++] = B;
              }
            }
            if (30 === n.mode) break;
            if (0 === n.lens[256]) {
              e.msg = "invalid code -- missing end-of-block", n.mode = 30;
              break;
            }
            if (n.lenbits = 9, D = {
              bits: n.lenbits
            }, j = a(c, n.lens, 0, n.nlen, n.lencode, 0, n.work, D), n.lenbits = D.bits, j) {
              e.msg = "invalid literal/lengths set", n.mode = 30;
              break;
            }
            if (n.distbits = 6, n.distcode = n.distdyn, D = {
              bits: n.distbits
            }, j = a(l, n.lens, n.nlen, n.ndist, n.distcode, 0, n.work, D), n.distbits = D.bits, j) {
              e.msg = "invalid distances set", n.mode = 30;
              break;
            }
            if (n.mode = 20, 6 === t) break e;
          case 20:
            n.mode = 21;
          case 21:
            if (6 <= v && 258 <= y) {
              e.next_out = g, e.avail_out = y, e.next_in = _, e.avail_in = v, n.hold = b, n.bits = w, s(e, x), g = e.next_out, p = e.output, y = e.avail_out, _ = e.next_in, d = e.input, v = e.avail_in, b = n.hold, w = n.bits, 12 === n.mode && (n.back = -1);
              break;
            }
            for (n.back = 0; z = (N = n.lencode[b & (1 << n.lenbits) - 1]) >>> 16 & 255, $ = 65535 & N, !((I = N >>> 24) <= w);) {
              if (0 === v) break e;
              v--, b += d[_++] << w, w += 8;
            }
            if (z && 0 == (240 & z)) {
              for (P = I, R = z, T = $; z = (N = n.lencode[T + ((b & (1 << P + R) - 1) >> P)]) >>> 16 & 255, $ = 65535 & N, !(P + (I = N >>> 24) <= w);) {
                if (0 === v) break e;
                v--, b += d[_++] << w, w += 8;
              }
              b >>>= P, w -= P, n.back += P;
            }
            if (b >>>= I, w -= I, n.back += I, n.length = $, 0 === z) {
              n.mode = 26;
              break;
            }
            if (32 & z) {
              n.back = -1, n.mode = 12;
              break;
            }
            if (64 & z) {
              e.msg = "invalid literal/length code", n.mode = 30;
              break;
            }
            n.extra = 15 & z, n.mode = 22;
          case 22:
            if (n.extra) {
              for (L = n.extra; w < L;) {
                if (0 === v) break e;
                v--, b += d[_++] << w, w += 8;
              }
              n.length += b & (1 << n.extra) - 1, b >>>= n.extra, w -= n.extra, n.back += n.extra;
            }
            n.was = n.length, n.mode = 23;
          case 23:
            for (; z = (N = n.distcode[b & (1 << n.distbits) - 1]) >>> 16 & 255, $ = 65535 & N, !((I = N >>> 24) <= w);) {
              if (0 === v) break e;
              v--, b += d[_++] << w, w += 8;
            }
            if (0 == (240 & z)) {
              for (P = I, R = z, T = $; z = (N = n.distcode[T + ((b & (1 << P + R) - 1) >> P)]) >>> 16 & 255, $ = 65535 & N, !(P + (I = N >>> 24) <= w);) {
                if (0 === v) break e;
                v--, b += d[_++] << w, w += 8;
              }
              b >>>= P, w -= P, n.back += P;
            }
            if (b >>>= I, w -= I, n.back += I, 64 & z) {
              e.msg = "invalid distance code", n.mode = 30;
              break;
            }
            n.offset = $, n.extra = 15 & z, n.mode = 24;
          case 24:
            if (n.extra) {
              for (L = n.extra; w < L;) {
                if (0 === v) break e;
                v--, b += d[_++] << w, w += 8;
              }
              n.offset += b & (1 << n.extra) - 1, b >>>= n.extra, w -= n.extra, n.back += n.extra;
            }
            if (n.offset > n.dmax) {
              e.msg = "invalid distance too far back", n.mode = 30;
              break;
            }
            n.mode = 25;
          case 25:
            if (0 === y) break e;
            if (E = x - y, n.offset > E) {
              if ((E = n.offset - E) > n.whave && n.sane) {
                e.msg = "invalid distance too far back", n.mode = 30;
                break;
              }
              O = E > n.wnext ? (E -= n.wnext, n.wsize - E) : n.wnext - E, E > n.length && (E = n.length), A = n.window;
            } else A = p, O = g - n.offset, E = n.length;
            for (y < E && (E = y), y -= E, n.length -= E; p[g++] = A[O++], --E;);
            0 === n.length && (n.mode = 21);
            break;
          case 26:
            if (0 === y) break e;
            p[g++] = n.length, y--, n.mode = 21;
            break;
          case 27:
            if (n.wrap) {
              for (; w < 32;) {
                if (0 === v) break e;
                v--, b |= d[_++] << w, w += 8;
              }
              if (x -= y, e.total_out += x, n.total += x, x && (e.adler = n.check = n.flags ? o(n.check, p, x, g - x) : i(n.check, p, x, g - x)), x = y, (n.flags ? b : m(b)) !== n.check) {
                e.msg = "incorrect data check", n.mode = 30;
                break;
              }
              w = b = 0;
            }
            n.mode = 28;
          case 28:
            if (n.wrap && n.flags) {
              for (; w < 32;) {
                if (0 === v) break e;
                v--, b += d[_++] << w, w += 8;
              }
              if (b !== (4294967295 & n.total)) {
                e.msg = "incorrect length check", n.mode = 30;
                break;
              }
              w = b = 0;
            }
            n.mode = 29;
          case 29:
            j = 1;
            break e;
          case 30:
            j = -3;
            break e;
          case 31:
            return -4;
          default:
            return f;
        }
        return e.next_out = g, e.avail_out = y, e.next_in = _, e.avail_in = v, n.hold = b, n.bits = w, (n.wsize || x !== e.avail_out && n.mode < 30 && (n.mode < 27 || 4 !== t)) && C(e, e.output, e.next_out, x - e.avail_out) ? (n.mode = 31, -4) : (k -= e.avail_in, x -= e.avail_out, e.total_in += k, e.total_out += x, n.total += x, n.wrap && x && (e.adler = n.check = n.flags ? o(n.check, p, x, e.next_out - x) : i(n.check, p, x, e.next_out - x)), e.data_type = n.bits + (n.last ? 64 : 0) + (12 === n.mode ? 128 : 0) + (20 === n.mode || 15 === n.mode ? 256 : 0), (0 == k && 0 === x || 4 === t) && j === u && (j = -5), j);
      }, n.inflateEnd = function (e) {
        if (!e || !e.state) return f;
        var t = e.state;
        return t.window && (t.window = null), e.state = null, u;
      }, n.inflateGetHeader = function (e, t) {
        var n;
        return e && e.state ? 0 == (2 & (n = e.state).wrap) ? f : ((n.head = t).done = !1, u) : f;
      }, n.inflateSetDictionary = function (e, t) {
        var n,
          r = t.length;
        return e && e.state ? 0 !== (n = e.state).wrap && 11 !== n.mode ? f : 11 === n.mode && i(1, t, r, 0) !== n.check ? -3 : C(e, t, r, r) ? (n.mode = 31, -4) : (n.havedict = 1, u) : f;
      }, n.inflateInfo = "pako inflate (from Nodeca project)";
    }, {
      "../utils/common": 41,
      "./adler32": 43,
      "./crc32": 45,
      "./inffast": 48,
      "./inftrees": 50
    }],
    50: [function (e, t, n) {
      var r = e("../utils/common"),
        i = [3, 4, 5, 6, 7, 8, 9, 10, 11, 13, 15, 17, 19, 23, 27, 31, 35, 43, 51, 59, 67, 83, 99, 115, 131, 163, 195, 227, 258, 0, 0],
        o = [16, 16, 16, 16, 16, 16, 16, 16, 17, 17, 17, 17, 18, 18, 18, 18, 19, 19, 19, 19, 20, 20, 20, 20, 21, 21, 21, 21, 16, 72, 78],
        s = [1, 2, 3, 4, 5, 7, 9, 13, 17, 25, 33, 49, 65, 97, 129, 193, 257, 385, 513, 769, 1025, 1537, 2049, 3073, 4097, 6145, 8193, 12289, 16385, 24577, 0, 0],
        a = [16, 16, 16, 16, 17, 17, 18, 18, 19, 19, 20, 20, 21, 21, 22, 22, 23, 23, 24, 24, 25, 25, 26, 26, 27, 27, 28, 28, 29, 29, 64, 64];
      t.exports = function (e, t, n, c, l, u, f, h) {
        var d,
          p,
          m,
          _,
          g,
          v,
          y,
          b,
          w,
          k = h.bits,
          x = 0,
          S = 0,
          C = 0,
          E = 0,
          O = 0,
          A = 0,
          I = 0,
          z = 0,
          $ = 0,
          P = 0,
          R = null,
          T = 0,
          B = new r.Buf16(16),
          j = new r.Buf16(16),
          D = null,
          L = 0;
        for (x = 0; x <= 15; x++) B[x] = 0;
        for (S = 0; S < c; S++) B[t[n + S]]++;
        for (O = k, E = 15; 1 <= E && 0 === B[E]; E--);
        if (E < O && (O = E), 0 === E) return l[u++] = 20971520, l[u++] = 20971520, h.bits = 1, 0;
        for (C = 1; C < E && 0 === B[C]; C++);
        for (O < C && (O = C), x = z = 1; x <= 15; x++) if (z <<= 1, (z -= B[x]) < 0) return -1;
        if (0 < z && (0 === e || 1 !== E)) return -1;
        for (j[1] = 0, x = 1; x < 15; x++) j[x + 1] = j[x] + B[x];
        for (S = 0; S < c; S++) 0 !== t[n + S] && (f[j[t[n + S]]++] = S);
        if (v = 0 === e ? (R = D = f, 19) : 1 === e ? (R = i, T -= 257, D = o, L -= 257, 256) : (R = s, D = a, -1), x = C, g = u, I = S = P = 0, m = -1, _ = ($ = 1 << (A = O)) - 1, 1 === e && 852 < $ || 2 === e && 592 < $) return 1;
        for (;;) {
          for (y = x - I, w = f[S] < v ? (b = 0, f[S]) : f[S] > v ? (b = D[L + f[S]], R[T + f[S]]) : (b = 96, 0), d = 1 << x - I, C = p = 1 << A; l[g + (P >> I) + (p -= d)] = y << 24 | b << 16 | w | 0, 0 !== p;);
          for (d = 1 << x - 1; P & d;) d >>= 1;
          if (0 !== d ? (P &= d - 1, P += d) : P = 0, S++, 0 == --B[x]) {
            if (x === E) break;
            x = t[n + f[S]];
          }
          if (O < x && (P & _) !== m) {
            for (0 === I && (I = O), g += C, z = 1 << (A = x - I); A + I < E && !((z -= B[A + I]) <= 0);) A++, z <<= 1;
            if ($ += 1 << A, 1 === e && 852 < $ || 2 === e && 592 < $) return 1;
            l[m = P & _] = O << 24 | A << 16 | g - u | 0;
          }
        }
        return 0 !== P && (l[g + P] = x - I << 24 | 64 << 16 | 0), h.bits = O, 0;
      };
    }, {
      "../utils/common": 41
    }],
    51: [function (e, t, n) {
      t.exports = {
        2: "need dictionary",
        1: "stream end",
        0: "",
        "-1": "file error",
        "-2": "stream error",
        "-3": "data error",
        "-4": "insufficient memory",
        "-5": "buffer error",
        "-6": "incompatible version"
      };
    }, {}],
    52: [function (e, t, n) {
      var r = e("../utils/common"),
        i = 0,
        o = 1;
      function s(e) {
        for (var t = e.length; 0 <= --t;) e[t] = 0;
      }
      var a = 0,
        c = 29,
        l = 256,
        u = l + 1 + c,
        f = 30,
        h = 19,
        d = 2 * u + 1,
        p = 15,
        m = 16,
        _ = 7,
        g = 256,
        v = 16,
        y = 17,
        b = 18,
        w = [0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4, 5, 5, 5, 5, 0],
        k = [0, 0, 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7, 8, 8, 9, 9, 10, 10, 11, 11, 12, 12, 13, 13],
        x = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 3, 7],
        S = [16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15],
        C = new Array(2 * (u + 2));
      s(C);
      var E = new Array(2 * f);
      s(E);
      var O = new Array(512);
      s(O);
      var A = new Array(256);
      s(A);
      var I = new Array(c);
      s(I);
      var z,
        $,
        P,
        R = new Array(f);
      function T(e, t, n, r, i) {
        this.static_tree = e, this.extra_bits = t, this.extra_base = n, this.elems = r, this.max_length = i, this.has_stree = e && e.length;
      }
      function B(e, t) {
        this.dyn_tree = e, this.max_code = 0, this.stat_desc = t;
      }
      function j(e) {
        return e < 256 ? O[e] : O[256 + (e >>> 7)];
      }
      function D(e, t) {
        e.pending_buf[e.pending++] = 255 & t, e.pending_buf[e.pending++] = t >>> 8 & 255;
      }
      function L(e, t, n) {
        e.bi_valid > m - n ? (e.bi_buf |= t << e.bi_valid & 65535, D(e, e.bi_buf), e.bi_buf = t >> m - e.bi_valid, e.bi_valid += n - m) : (e.bi_buf |= t << e.bi_valid & 65535, e.bi_valid += n);
      }
      function N(e, t, n) {
        L(e, n[2 * t], n[2 * t + 1]);
      }
      function U(e, t) {
        for (var n = 0; n |= 1 & e, e >>>= 1, n <<= 1, 0 < --t;);
        return n >>> 1;
      }
      function F(e, t, n) {
        var r,
          i,
          o = new Array(p + 1),
          s = 0;
        for (r = 1; r <= p; r++) o[r] = s = s + n[r - 1] << 1;
        for (i = 0; i <= t; i++) {
          var a = e[2 * i + 1];
          0 !== a && (e[2 * i] = U(o[a]++, a));
        }
      }
      function M(e) {
        var t;
        for (t = 0; t < u; t++) e.dyn_ltree[2 * t] = 0;
        for (t = 0; t < f; t++) e.dyn_dtree[2 * t] = 0;
        for (t = 0; t < h; t++) e.bl_tree[2 * t] = 0;
        e.dyn_ltree[2 * g] = 1, e.opt_len = e.static_len = 0, e.last_lit = e.matches = 0;
      }
      function W(e) {
        8 < e.bi_valid ? D(e, e.bi_buf) : 0 < e.bi_valid && (e.pending_buf[e.pending++] = e.bi_buf), e.bi_buf = 0, e.bi_valid = 0;
      }
      function H(e, t, n, r) {
        var i = 2 * t,
          o = 2 * n;
        return e[i] < e[o] || e[i] === e[o] && r[t] <= r[n];
      }
      function Z(e, t, n) {
        for (var r = e.heap[n], i = n << 1; i <= e.heap_len && (i < e.heap_len && H(t, e.heap[i + 1], e.heap[i], e.depth) && i++, !H(t, r, e.heap[i], e.depth));) e.heap[n] = e.heap[i], n = i, i <<= 1;
        e.heap[n] = r;
      }
      function V(e, t, n) {
        var r,
          i,
          o,
          s,
          a = 0;
        if (0 !== e.last_lit) for (; r = e.pending_buf[e.d_buf + 2 * a] << 8 | e.pending_buf[e.d_buf + 2 * a + 1], i = e.pending_buf[e.l_buf + a], a++, 0 === r ? N(e, i, t) : (N(e, (o = A[i]) + l + 1, t), 0 !== (s = w[o]) && L(e, i -= I[o], s), N(e, o = j(--r), n), 0 !== (s = k[o]) && L(e, r -= R[o], s)), a < e.last_lit;);
        N(e, g, t);
      }
      function G(e, t) {
        var n,
          r,
          i,
          o = t.dyn_tree,
          s = t.stat_desc.static_tree,
          a = t.stat_desc.has_stree,
          c = t.stat_desc.elems,
          l = -1;
        for (e.heap_len = 0, e.heap_max = d, n = 0; n < c; n++) 0 !== o[2 * n] ? (e.heap[++e.heap_len] = l = n, e.depth[n] = 0) : o[2 * n + 1] = 0;
        for (; e.heap_len < 2;) o[2 * (i = e.heap[++e.heap_len] = l < 2 ? ++l : 0)] = 1, e.depth[i] = 0, e.opt_len--, a && (e.static_len -= s[2 * i + 1]);
        for (t.max_code = l, n = e.heap_len >> 1; 1 <= n; n--) Z(e, o, n);
        for (i = c; n = e.heap[1], e.heap[1] = e.heap[e.heap_len--], Z(e, o, 1), r = e.heap[1], e.heap[--e.heap_max] = n, e.heap[--e.heap_max] = r, o[2 * i] = o[2 * n] + o[2 * r], e.depth[i] = (e.depth[n] >= e.depth[r] ? e.depth[n] : e.depth[r]) + 1, o[2 * n + 1] = o[2 * r + 1] = i, e.heap[1] = i++, Z(e, o, 1), 2 <= e.heap_len;);
        e.heap[--e.heap_max] = e.heap[1], function (e, t) {
          var n,
            r,
            i,
            o,
            s,
            a,
            c = t.dyn_tree,
            l = t.max_code,
            u = t.stat_desc.static_tree,
            f = t.stat_desc.has_stree,
            h = t.stat_desc.extra_bits,
            m = t.stat_desc.extra_base,
            _ = t.stat_desc.max_length,
            g = 0;
          for (o = 0; o <= p; o++) e.bl_count[o] = 0;
          for (c[2 * e.heap[e.heap_max] + 1] = 0, n = e.heap_max + 1; n < d; n++) _ < (o = c[2 * c[2 * (r = e.heap[n]) + 1] + 1] + 1) && (o = _, g++), c[2 * r + 1] = o, l < r || (e.bl_count[o]++, s = 0, m <= r && (s = h[r - m]), a = c[2 * r], e.opt_len += a * (o + s), f && (e.static_len += a * (u[2 * r + 1] + s)));
          if (0 !== g) {
            do {
              for (o = _ - 1; 0 === e.bl_count[o];) o--;
              e.bl_count[o]--, e.bl_count[o + 1] += 2, e.bl_count[_]--, g -= 2;
            } while (0 < g);
            for (o = _; 0 !== o; o--) for (r = e.bl_count[o]; 0 !== r;) l < (i = e.heap[--n]) || (c[2 * i + 1] !== o && (e.opt_len += (o - c[2 * i + 1]) * c[2 * i], c[2 * i + 1] = o), r--);
          }
        }(e, t), F(o, l, e.bl_count);
      }
      function K(e, t, n) {
        var r,
          i,
          o = -1,
          s = t[1],
          a = 0,
          c = 7,
          l = 4;
        for (0 === s && (c = 138, l = 3), t[2 * (n + 1) + 1] = 65535, r = 0; r <= n; r++) i = s, s = t[2 * (r + 1) + 1], ++a < c && i === s || (a < l ? e.bl_tree[2 * i] += a : 0 !== i ? (i !== o && e.bl_tree[2 * i]++, e.bl_tree[2 * v]++) : a <= 10 ? e.bl_tree[2 * y]++ : e.bl_tree[2 * b]++, o = i, l = (a = 0) === s ? (c = 138, 3) : i === s ? (c = 6, 3) : (c = 7, 4));
      }
      function X(e, t, n) {
        var r,
          i,
          o = -1,
          s = t[1],
          a = 0,
          c = 7,
          l = 4;
        for (0 === s && (c = 138, l = 3), r = 0; r <= n; r++) if (i = s, s = t[2 * (r + 1) + 1], !(++a < c && i === s)) {
          if (a < l) for (; N(e, i, e.bl_tree), 0 != --a;);else 0 !== i ? (i !== o && (N(e, i, e.bl_tree), a--), N(e, v, e.bl_tree), L(e, a - 3, 2)) : a <= 10 ? (N(e, y, e.bl_tree), L(e, a - 3, 3)) : (N(e, b, e.bl_tree), L(e, a - 11, 7));
          o = i, l = (a = 0) === s ? (c = 138, 3) : i === s ? (c = 6, 3) : (c = 7, 4);
        }
      }
      s(R);
      var Y = !1;
      function q(e, t, n, i) {
        var o, s, c, l;
        L(e, (a << 1) + (i ? 1 : 0), 3), s = t, c = n, l = !0, W(o = e), l && (D(o, c), D(o, ~c)), r.arraySet(o.pending_buf, o.window, s, c, o.pending), o.pending += c;
      }
      n._tr_init = function (e) {
        Y || (function () {
          var e,
            t,
            n,
            r,
            i,
            o = new Array(p + 1);
          for (r = n = 0; r < c - 1; r++) for (I[r] = n, e = 0; e < 1 << w[r]; e++) A[n++] = r;
          for (A[n - 1] = r, r = i = 0; r < 16; r++) for (R[r] = i, e = 0; e < 1 << k[r]; e++) O[i++] = r;
          for (i >>= 7; r < f; r++) for (R[r] = i << 7, e = 0; e < 1 << k[r] - 7; e++) O[256 + i++] = r;
          for (t = 0; t <= p; t++) o[t] = 0;
          for (e = 0; e <= 143;) C[2 * e + 1] = 8, e++, o[8]++;
          for (; e <= 255;) C[2 * e + 1] = 9, e++, o[9]++;
          for (; e <= 279;) C[2 * e + 1] = 7, e++, o[7]++;
          for (; e <= 287;) C[2 * e + 1] = 8, e++, o[8]++;
          for (F(C, u + 1, o), e = 0; e < f; e++) E[2 * e + 1] = 5, E[2 * e] = U(e, 5);
          z = new T(C, w, l + 1, u, p), $ = new T(E, k, 0, f, p), P = new T(new Array(0), x, 0, h, _);
        }(), Y = !0), e.l_desc = new B(e.dyn_ltree, z), e.d_desc = new B(e.dyn_dtree, $), e.bl_desc = new B(e.bl_tree, P), e.bi_buf = 0, e.bi_valid = 0, M(e);
      }, n._tr_stored_block = q, n._tr_flush_block = function (e, t, n, r) {
        var s,
          a,
          c = 0;
        0 < e.level ? (2 === e.strm.data_type && (e.strm.data_type = function (e) {
          var t,
            n = 4093624447;
          for (t = 0; t <= 31; t++, n >>>= 1) if (1 & n && 0 !== e.dyn_ltree[2 * t]) return i;
          if (0 !== e.dyn_ltree[18] || 0 !== e.dyn_ltree[20] || 0 !== e.dyn_ltree[26]) return o;
          for (t = 32; t < l; t++) if (0 !== e.dyn_ltree[2 * t]) return o;
          return i;
        }(e)), G(e, e.l_desc), G(e, e.d_desc), c = function (e) {
          var t;
          for (K(e, e.dyn_ltree, e.l_desc.max_code), K(e, e.dyn_dtree, e.d_desc.max_code), G(e, e.bl_desc), t = h - 1; 3 <= t && 0 === e.bl_tree[2 * S[t] + 1]; t--);
          return e.opt_len += 3 * (t + 1) + 5 + 5 + 4, t;
        }(e), s = e.opt_len + 3 + 7 >>> 3, (a = e.static_len + 3 + 7 >>> 3) <= s && (s = a)) : s = a = n + 5, n + 4 <= s && -1 !== t ? q(e, t, n, r) : 4 === e.strategy || a === s ? (L(e, 2 + (r ? 1 : 0), 3), V(e, C, E)) : (L(e, 4 + (r ? 1 : 0), 3), function (e, t, n, r) {
          var i;
          for (L(e, t - 257, 5), L(e, n - 1, 5), L(e, r - 4, 4), i = 0; i < r; i++) L(e, e.bl_tree[2 * S[i] + 1], 3);
          X(e, e.dyn_ltree, t - 1), X(e, e.dyn_dtree, n - 1);
        }(e, e.l_desc.max_code + 1, e.d_desc.max_code + 1, c + 1), V(e, e.dyn_ltree, e.dyn_dtree)), M(e), r && W(e);
      }, n._tr_tally = function (e, t, n) {
        return e.pending_buf[e.d_buf + 2 * e.last_lit] = t >>> 8 & 255, e.pending_buf[e.d_buf + 2 * e.last_lit + 1] = 255 & t, e.pending_buf[e.l_buf + e.last_lit] = 255 & n, e.last_lit++, 0 === t ? e.dyn_ltree[2 * n]++ : (e.matches++, t--, e.dyn_ltree[2 * (A[n] + l + 1)]++, e.dyn_dtree[2 * j(t)]++), e.last_lit === e.lit_bufsize - 1;
      }, n._tr_align = function (e) {
        var t;
        L(e, 2, 3), N(e, g, C), 16 === (t = e).bi_valid ? (D(t, t.bi_buf), t.bi_buf = 0, t.bi_valid = 0) : 8 <= t.bi_valid && (t.pending_buf[t.pending++] = 255 & t.bi_buf, t.bi_buf >>= 8, t.bi_valid -= 8);
      };
    }, {
      "../utils/common": 41
    }],
    53: [function (e, t, n) {
      t.exports = function () {
        this.input = null, this.next_in = 0, this.avail_in = 0, this.total_in = 0, this.output = null, this.next_out = 0, this.avail_out = 0, this.total_out = 0, this.msg = "", this.state = null, this.data_type = 2, this.adler = 0;
      };
    }, {}],
    54: [function (e, t, n) {
      (function (e) {
        !function (e, t) {
          if (!e.setImmediate) {
            var n,
              r,
              i,
              o,
              s = 1,
              a = {},
              c = !1,
              l = e.document,
              u = Object.getPrototypeOf && Object.getPrototypeOf(e);
            u = u && u.setTimeout ? u : e, n = "[object process]" === {}.toString.call(e.process) ? function (e) {
              process.nextTick(function () {
                h(e);
              });
            } : function () {
              if (e.postMessage && !e.importScripts) {
                var t = !0,
                  n = e.onmessage;
                return e.onmessage = function () {
                  t = !1;
                }, e.postMessage("", "*"), e.onmessage = n, t;
              }
            }() ? (o = "setImmediate$" + Math.random() + "$", e.addEventListener ? e.addEventListener("message", d, !1) : e.attachEvent("onmessage", d), function (t) {
              e.postMessage(o + t, "*");
            }) : e.MessageChannel ? ((i = new MessageChannel()).port1.onmessage = function (e) {
              h(e.data);
            }, function (e) {
              i.port2.postMessage(e);
            }) : l && "onreadystatechange" in l.createElement("script") ? (r = l.documentElement, function (e) {
              var t = l.createElement("script");
              t.onreadystatechange = function () {
                h(e), t.onreadystatechange = null, r.removeChild(t), t = null;
              }, r.appendChild(t);
            }) : function (e) {
              setTimeout(h, 0, e);
            }, u.setImmediate = function (e) {
              "function" != typeof e && (e = new Function("" + e));
              for (var t = new Array(arguments.length - 1), r = 0; r < t.length; r++) t[r] = arguments[r + 1];
              var i = {
                callback: e,
                args: t
              };
              return a[s] = i, n(s), s++;
            }, u.clearImmediate = f;
          }
          function f(e) {
            delete a[e];
          }
          function h(e) {
            if (c) setTimeout(h, 0, e);else {
              var n = a[e];
              if (n) {
                c = !0;
                try {
                  !function (e) {
                    var n = e.callback,
                      r = e.args;
                    switch (r.length) {
                      case 0:
                        n();
                        break;
                      case 1:
                        n(r[0]);
                        break;
                      case 2:
                        n(r[0], r[1]);
                        break;
                      case 3:
                        n(r[0], r[1], r[2]);
                        break;
                      default:
                        n.apply(t, r);
                    }
                  }(n);
                } finally {
                  f(e), c = !1;
                }
              }
            }
          }
          function d(t) {
            t.source === e && "string" == typeof t.data && 0 === t.data.indexOf(o) && h(+t.data.slice(o.length));
          }
        }("undefined" == typeof self ? void 0 === e ? this : e : self);
      }).call(this, void 0 !== la ? la : "undefined" != typeof self ? self : "undefined" != typeof window ? window : {});
    }, {}]
  }, {}, [10])(10)),
  pa = {
    en: {
      "uni-load-more.contentdown": "Pull up to show more",
      "uni-load-more.contentrefresh": "loading...",
      "uni-load-more.contentnomore": "No more data"
    },
    "zh-Hans": {
      "uni-load-more.contentdown": "上拉显示更多",
      "uni-load-more.contentrefresh": "正在加载...",
      "uni-load-more.contentnomore": "没有更多数据了"
    },
    "zh-Hant": {
      "uni-load-more.contentdown": "上拉顯示更多",
      "uni-load-more.contentrefresh": "正在加載...",
      "uni-load-more.contentnomore": "沒有更多數據了"
    }
  },
  ma = {
    data: function data() {
      return {};
    },
    created: function created() {
      this.popup = this.getParent();
    },
    methods: {
      getParent: function getParent() {
        var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : "uniPopup";
        var t = this.$parent,
          n = t.$options.name;
        for (; n !== e;) {
          if (t = t.$parent, !t) return !1;
          n = t.$options.name;
        }
        return t;
      }
    }
  },
  _a = {
    en: {
      "uni-popup.cancel": "cancel",
      "uni-popup.ok": "ok",
      "uni-popup.placeholder": "pleace enter",
      "uni-popup.title": "Hint",
      "uni-popup.shareTitle": "Share to"
    },
    "zh-Hans": {
      "uni-popup.cancel": "取消",
      "uni-popup.ok": "确定",
      "uni-popup.placeholder": "请输入",
      "uni-popup.title": "提示",
      "uni-popup.shareTitle": "分享到"
    },
    "zh-Hant": {
      "uni-popup.cancel": "取消",
      "uni-popup.ok": "確定",
      "uni-popup.placeholder": "請輸入",
      "uni-popup.title": "提示",
      "uni-popup.shareTitle": "分享到"
    }
  },
  ga = {
    en: {
      "uni-search-bar.cancel": "cancel",
      "uni-search-bar.placeholder": "Search enter content"
    },
    "zh-Hans": {
      "uni-search-bar.cancel": "取消",
      "uni-search-bar.placeholder": "请输入搜索内容"
    },
    "zh-Hant": {
      "uni-search-bar.cancel": "取消",
      "uni-search-bar.placeholder": "請輸入搜索內容"
    }
  };
var va = /*#__PURE__*/function () {
  function va(e, t) {
    _classCallCheck2(this, va);
    this.options = e, this.animation = Jt.createAnimation(_objectSpread2({}, e)), this.currentStepAnimates = {}, this.next = 0, this.$ = t;
  }
  _createClass2(va, [{
    key: "_nvuePushAnimates",
    value: function _nvuePushAnimates(e, t) {
      var n = this.currentStepAnimates[this.next],
        r = {};
      if (r = n || {
        styles: {},
        config: {}
      }, ya.includes(e)) {
        r.styles.transform || (r.styles.transform = "");
        var _n40 = "";
        "rotate" === e && (_n40 = "deg"), r.styles.transform += "".concat(e, "(").concat(t + _n40, ") ");
      } else r.styles[e] = "".concat(t);
      this.currentStepAnimates[this.next] = r;
    }
  }, {
    key: "_animateRun",
    value: function _animateRun() {
      var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
      var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
      var n = this.$.$refs.ani.ref;
      if (n) return new Promise(function (r, i) {
        nvueAnimation.transition(n, _objectSpread2({
          styles: e
        }, t), function (e) {
          r();
        });
      });
    }
  }, {
    key: "_nvueNextAnimate",
    value: function _nvueNextAnimate(e) {
      var _this4 = this;
      var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;
      var n = arguments.length > 2 ? arguments[2] : undefined;
      var r = e[t];
      if (r) {
        var _i25 = r.styles,
          _o14 = r.config;
        this._animateRun(_i25, _o14).then(function () {
          t += 1, _this4._nvueNextAnimate(e, t, n);
        });
      } else this.currentStepAnimates = {}, "function" == typeof n && n(), this.isEnd = !0;
    }
  }, {
    key: "step",
    value: function step() {
      var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
      return this.animation.step(e), this;
    }
  }, {
    key: "run",
    value: function run(e) {
      this.$.animationData = this.animation.export(), this.$.timer = setTimeout(function () {
        "function" == typeof e && e();
      }, this.$.durationTime);
    }
  }]);
  return va;
}();
var ya = ["matrix", "matrix3d", "rotate", "rotate3d", "rotateX", "rotateY", "rotateZ", "scale", "scale3d", "scaleX", "scaleY", "scaleZ", "skew", "skewX", "skewY", "translate", "translate3d", "translateX", "translateY", "translateZ"];
ya.concat(["opacity", "backgroundColor"], ["width", "height", "left", "right", "top", "bottom"]).forEach(function (e) {
  va.prototype[e] = function () {
    var _this$animation;
    return (_this$animation = this.animation)[e].apply(_this$animation, arguments), this;
  };
}), exports.JSZip = da, exports._export_sfc = function (e, t) {
  var n = e.__vccOpts || e;
  var _iterator3 = _createForOfIteratorHelper2(t),
    _step3;
  try {
    for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {
      var _step3$value = _slicedToArray2(_step3.value, 2),
        _r29 = _step3$value[0],
        _i26 = _step3$value[1];
      n[_r29] = _i26;
    }
  } catch (err) {
    _iterator3.e(err);
  } finally {
    _iterator3.f();
  }
  return n;
}, exports.createAnimation = function (e, t) {
  if (t) return clearTimeout(t.timer), new va(e, t);
}, exports.createSSRApp = ts, exports.createStore = function (e) {
  return new ta(e);
}, exports.e = function (e) {
  for (var _len18 = arguments.length, t = new Array(_len18 > 1 ? _len18 - 1 : 0), _key18 = 1; _key18 < _len18; _key18++) {
    t[_key18 - 1] = arguments[_key18];
  }
  return a.apply(void 0, [e].concat(t));
}, exports.f = function (e, t) {
  return function (e, t) {
    var n;
    if (f(e) || m(e)) {
      n = new Array(e.length);
      for (var _r30 = 0, _i27 = e.length; _r30 < _i27; _r30++) n[_r30] = t(e[_r30], _r30, _r30);
    } else if ("number" == typeof e) {
      n = new Array(e);
      for (var _r31 = 0; _r31 < e; _r31++) n[_r31] = t(_r31 + 1, _r31, _r31);
    } else if (g(e)) {
      if (e[Symbol.iterator]) n = Array.from(e, function (e, n) {
        return t(e, n, n);
      });else {
        var _r32 = Object.keys(e);
        n = new Array(_r32.length);
        for (var _i28 = 0, _o15 = _r32.length; _i28 < _o15; _i28++) {
          var _o16 = _r32[_i28];
          n[_i28] = t(e[_o16], _o16, _i28);
        }
      }
    } else n = [];
    return n;
  }(e, t);
}, exports.fontData = [{
  font_class: "arrow-down",
  unicode: ""
}, {
  font_class: "arrow-left",
  unicode: ""
}, {
  font_class: "arrow-right",
  unicode: ""
}, {
  font_class: "arrow-up",
  unicode: ""
}, {
  font_class: "auth",
  unicode: ""
}, {
  font_class: "auth-filled",
  unicode: ""
}, {
  font_class: "back",
  unicode: ""
}, {
  font_class: "bars",
  unicode: ""
}, {
  font_class: "calendar",
  unicode: ""
}, {
  font_class: "calendar-filled",
  unicode: ""
}, {
  font_class: "camera",
  unicode: ""
}, {
  font_class: "camera-filled",
  unicode: ""
}, {
  font_class: "cart",
  unicode: ""
}, {
  font_class: "cart-filled",
  unicode: ""
}, {
  font_class: "chat",
  unicode: ""
}, {
  font_class: "chat-filled",
  unicode: ""
}, {
  font_class: "chatboxes",
  unicode: ""
}, {
  font_class: "chatboxes-filled",
  unicode: ""
}, {
  font_class: "chatbubble",
  unicode: ""
}, {
  font_class: "chatbubble-filled",
  unicode: ""
}, {
  font_class: "checkbox",
  unicode: ""
}, {
  font_class: "checkbox-filled",
  unicode: ""
}, {
  font_class: "checkmarkempty",
  unicode: ""
}, {
  font_class: "circle",
  unicode: ""
}, {
  font_class: "circle-filled",
  unicode: ""
}, {
  font_class: "clear",
  unicode: ""
}, {
  font_class: "close",
  unicode: ""
}, {
  font_class: "closeempty",
  unicode: ""
}, {
  font_class: "cloud-download",
  unicode: ""
}, {
  font_class: "cloud-download-filled",
  unicode: ""
}, {
  font_class: "cloud-upload",
  unicode: ""
}, {
  font_class: "cloud-upload-filled",
  unicode: ""
}, {
  font_class: "color",
  unicode: ""
}, {
  font_class: "color-filled",
  unicode: ""
}, {
  font_class: "compose",
  unicode: ""
}, {
  font_class: "contact",
  unicode: ""
}, {
  font_class: "contact-filled",
  unicode: ""
}, {
  font_class: "down",
  unicode: ""
}, {
  font_class: "bottom",
  unicode: ""
}, {
  font_class: "download",
  unicode: ""
}, {
  font_class: "download-filled",
  unicode: ""
}, {
  font_class: "email",
  unicode: ""
}, {
  font_class: "email-filled",
  unicode: ""
}, {
  font_class: "eye",
  unicode: ""
}, {
  font_class: "eye-filled",
  unicode: ""
}, {
  font_class: "eye-slash",
  unicode: ""
}, {
  font_class: "eye-slash-filled",
  unicode: ""
}, {
  font_class: "fire",
  unicode: ""
}, {
  font_class: "fire-filled",
  unicode: ""
}, {
  font_class: "flag",
  unicode: ""
}, {
  font_class: "flag-filled",
  unicode: ""
}, {
  font_class: "folder-add",
  unicode: ""
}, {
  font_class: "folder-add-filled",
  unicode: ""
}, {
  font_class: "font",
  unicode: ""
}, {
  font_class: "forward",
  unicode: ""
}, {
  font_class: "gear",
  unicode: ""
}, {
  font_class: "gear-filled",
  unicode: ""
}, {
  font_class: "gift",
  unicode: ""
}, {
  font_class: "gift-filled",
  unicode: ""
}, {
  font_class: "hand-down",
  unicode: ""
}, {
  font_class: "hand-down-filled",
  unicode: ""
}, {
  font_class: "hand-up",
  unicode: ""
}, {
  font_class: "hand-up-filled",
  unicode: ""
}, {
  font_class: "headphones",
  unicode: ""
}, {
  font_class: "heart",
  unicode: ""
}, {
  font_class: "heart-filled",
  unicode: ""
}, {
  font_class: "help",
  unicode: ""
}, {
  font_class: "help-filled",
  unicode: ""
}, {
  font_class: "home",
  unicode: ""
}, {
  font_class: "home-filled",
  unicode: ""
}, {
  font_class: "image",
  unicode: ""
}, {
  font_class: "image-filled",
  unicode: ""
}, {
  font_class: "images",
  unicode: ""
}, {
  font_class: "images-filled",
  unicode: ""
}, {
  font_class: "info",
  unicode: ""
}, {
  font_class: "info-filled",
  unicode: ""
}, {
  font_class: "left",
  unicode: ""
}, {
  font_class: "link",
  unicode: ""
}, {
  font_class: "list",
  unicode: ""
}, {
  font_class: "location",
  unicode: ""
}, {
  font_class: "location-filled",
  unicode: ""
}, {
  font_class: "locked",
  unicode: ""
}, {
  font_class: "locked-filled",
  unicode: ""
}, {
  font_class: "loop",
  unicode: ""
}, {
  font_class: "mail-open",
  unicode: ""
}, {
  font_class: "mail-open-filled",
  unicode: ""
}, {
  font_class: "map",
  unicode: ""
}, {
  font_class: "map-filled",
  unicode: ""
}, {
  font_class: "map-pin",
  unicode: ""
}, {
  font_class: "map-pin-ellipse",
  unicode: ""
}, {
  font_class: "medal",
  unicode: ""
}, {
  font_class: "medal-filled",
  unicode: ""
}, {
  font_class: "mic",
  unicode: ""
}, {
  font_class: "mic-filled",
  unicode: ""
}, {
  font_class: "micoff",
  unicode: ""
}, {
  font_class: "micoff-filled",
  unicode: ""
}, {
  font_class: "minus",
  unicode: ""
}, {
  font_class: "minus-filled",
  unicode: ""
}, {
  font_class: "more",
  unicode: ""
}, {
  font_class: "more-filled",
  unicode: ""
}, {
  font_class: "navigate",
  unicode: ""
}, {
  font_class: "navigate-filled",
  unicode: ""
}, {
  font_class: "notification",
  unicode: ""
}, {
  font_class: "notification-filled",
  unicode: ""
}, {
  font_class: "paperclip",
  unicode: ""
}, {
  font_class: "paperplane",
  unicode: ""
}, {
  font_class: "paperplane-filled",
  unicode: ""
}, {
  font_class: "person",
  unicode: ""
}, {
  font_class: "person-filled",
  unicode: ""
}, {
  font_class: "personadd",
  unicode: ""
}, {
  font_class: "personadd-filled",
  unicode: ""
}, {
  font_class: "personadd-filled-copy",
  unicode: ""
}, {
  font_class: "phone",
  unicode: ""
}, {
  font_class: "phone-filled",
  unicode: ""
}, {
  font_class: "plus",
  unicode: ""
}, {
  font_class: "plus-filled",
  unicode: ""
}, {
  font_class: "plusempty",
  unicode: ""
}, {
  font_class: "pulldown",
  unicode: ""
}, {
  font_class: "pyq",
  unicode: ""
}, {
  font_class: "qq",
  unicode: ""
}, {
  font_class: "redo",
  unicode: ""
}, {
  font_class: "redo-filled",
  unicode: ""
}, {
  font_class: "refresh",
  unicode: ""
}, {
  font_class: "refresh-filled",
  unicode: ""
}, {
  font_class: "refreshempty",
  unicode: ""
}, {
  font_class: "reload",
  unicode: ""
}, {
  font_class: "right",
  unicode: ""
}, {
  font_class: "scan",
  unicode: ""
}, {
  font_class: "search",
  unicode: ""
}, {
  font_class: "settings",
  unicode: ""
}, {
  font_class: "settings-filled",
  unicode: ""
}, {
  font_class: "shop",
  unicode: ""
}, {
  font_class: "shop-filled",
  unicode: ""
}, {
  font_class: "smallcircle",
  unicode: ""
}, {
  font_class: "smallcircle-filled",
  unicode: ""
}, {
  font_class: "sound",
  unicode: ""
}, {
  font_class: "sound-filled",
  unicode: ""
}, {
  font_class: "spinner-cycle",
  unicode: ""
}, {
  font_class: "staff",
  unicode: ""
}, {
  font_class: "staff-filled",
  unicode: ""
}, {
  font_class: "star",
  unicode: ""
}, {
  font_class: "star-filled",
  unicode: ""
}, {
  font_class: "starhalf",
  unicode: ""
}, {
  font_class: "trash",
  unicode: ""
}, {
  font_class: "trash-filled",
  unicode: ""
}, {
  font_class: "tune",
  unicode: ""
}, {
  font_class: "tune-filled",
  unicode: ""
}, {
  font_class: "undo",
  unicode: ""
}, {
  font_class: "undo-filled",
  unicode: ""
}, {
  font_class: "up",
  unicode: ""
}, {
  font_class: "top",
  unicode: ""
}, {
  font_class: "upload",
  unicode: ""
}, {
  font_class: "upload-filled",
  unicode: ""
}, {
  font_class: "videocam",
  unicode: ""
}, {
  font_class: "videocam-filled",
  unicode: ""
}, {
  font_class: "vip",
  unicode: ""
}, {
  font_class: "vip-filled",
  unicode: ""
}, {
  font_class: "wallet",
  unicode: ""
}, {
  font_class: "wallet-filled",
  unicode: ""
}, {
  font_class: "weibo",
  unicode: ""
}, {
  font_class: "weixin",
  unicode: ""
}], exports.index = Jt, exports.initVueI18n = function (e) {
  var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
  var n = arguments.length > 2 ? arguments[2] : undefined;
  var r = arguments.length > 3 ? arguments[3] : undefined;
  if ("string" != typeof e) {
    var _n41 = [t, e];
    e = _n41[0], t = _n41[1];
  }
  "string" != typeof e && (e = void 0 !== Jt && Jt.getLocale ? Jt.getLocale() : "undefined" != typeof global && global.getLocale ? global.getLocale() : "en"), "string" != typeof n && (n = "undefined" != typeof __uniConfig && __uniConfig.fallbackLocale || "en");
  var i = new ue({
    locale: e,
    fallbackLocale: n,
    messages: t,
    watcher: r
  });
  var _o17 = function o(e, t) {
    if ("function" != typeof getApp) _o17 = function o(e, t) {
      return i.t(e, t);
    };else {
      var _e37 = !1;
      _o17 = function o(t, n) {
        var r = getApp().$vm;
        return r && (r.$locale, _e37 || (_e37 = !0, function (e, t) {
          e.$watchLocale ? e.$watchLocale(function (e) {
            t.setLocale(e);
          }) : e.$watch(function () {
            return e.$locale;
          }, function (e) {
            t.setLocale(e);
          });
        }(r, i))), i.t(t, n);
      };
    }
    return _o17(e, t);
  };
  return {
    i18n: i,
    f: function f(e, t, n) {
      return i.f(e, t, n);
    },
    t: function t(e, _t41) {
      return _o17(e, _t41);
    },
    add: function add(e, t) {
      var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : !0;
      return i.add(e, t, n);
    },
    watch: function watch(e) {
      return i.watchLocale(e);
    },
    getLocale: function getLocale() {
      return i.getLocale();
    },
    setLocale: function setLocale(e) {
      return i.setLocale(e);
    }
  };
}, exports.mapActions = oa, exports.mapGetters = ia, exports.mapState = ra, exports.messages = pa, exports.messages$1 = _a, exports.messages$2 = ga, exports.n = function (e) {
  return N(e);
}, exports.o = function (e, t) {
  return Qo(e, t);
}, exports.p = function (e) {
  return function (e) {
    var _to = to(),
      t = _to.uid,
      n = _to.__counter;
    return t + "," + ((Ko[t] || (Ko[t] = [])).push(Yi(e)) - 1) + "," + n;
  }(e);
}, exports.popup = ma, exports.resolveComponent = function (e, t) {
  return function (e, t) {
    var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : !0;
    var r = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : !1;
    var i = Xr || eo;
    if (i) {
      var _n42 = i.type;
      if ("components" === e) {
        var _e38 = function (e) {
          var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : !0;
          return p(e) ? e.displayName || e.name : e.name || t && e.__name;
        }(_n42, !1);
        if (_e38 && (_e38 === t || _e38 === E(t) || _e38 === I(E(t)))) return _n42;
      }
      var _o18 = qr(i[e] || _n42[e], t) || qr(i.appContext[e], t);
      return !_o18 && r ? _n42 : _o18;
    }
  }("components", e, !0, t) || e;
}, exports.s = function (e) {
  return Jo(e);
}, exports.sr = function (e, t, n) {
  return function (e, t) {
    var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};
    var _to2 = to(),
      r = _to2.$templateRefs;
    r.push({
      i: t,
      r: e,
      k: n.k,
      f: n.f
    });
  }(e, t, n);
}, exports.t = function (e) {
  return function (e) {
    return m(e) ? e : null == e ? "" : f(e) || g(e) && (e.toString === y || !p(e.toString)) ? JSON.stringify(e, U, 2) : String(e);
  }(e);
}; 
 			}); 
		define("services/bluetooth.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";

require("../@babel/runtime/helpers/Arrayincludes");
var _toConsumableArray2 = require("../@babel/runtime/helpers/toConsumableArray");
var _createForOfIteratorHelper2 = require("../@babel/runtime/helpers/createForOfIteratorHelper");
var _slicedToArray2 = require("../@babel/runtime/helpers/slicedToArray");
var _regeneratorRuntime2 = require("../@babel/runtime/helpers/regeneratorRuntime");
var _asyncToGenerator2 = require("../@babel/runtime/helpers/asyncToGenerator");
var _classCallCheck2 = require("../@babel/runtime/helpers/classCallCheck");
var _createClass2 = require("../@babel/runtime/helpers/createClass");
var e = require("../common/vendor.js"),
  t = require("../utils/chameleon-protocol.js"),
  o = require("../utils/http.js"),
  r = {
    DEVICE_NAME_PREFIXES: ["ChameleonUltra", "ChameleonLite", "Chameleon"],
    SERVICE_UUID: "6E400001-B5A3-F393-E0A9-E50E24DCCA9E",
    TX_CHARACTERISTIC_UUID: "6E400002-B5A3-F393-E0A9-E50E24DCCA9E",
    RX_CHARACTERISTIC_UUID: "6E400003-B5A3-F393-E0A9-E50E24DCCA9E",
    SCAN_TIMEOUT: 1e4,
    CONNECT_TIMEOUT: 15e3,
    HEARTBEAT_INTERVAL: 15e3,
    MAX_RETRY_COUNT: 3,
    MAX_HEARTBEAT_FAILURES: 2
  },
  n = "FE59",
  s = "8EC90001-F315-4F60-9FB8-838830DAEA50",
  a = "8EC90002-F315-4F60-9FB8-838830DAEA50";
var i = new ( /*#__PURE__*/function () {
  function _class() {
    _classCallCheck2(this, _class);
    this.isInitialized = !1, this.isScanning = !1, this.isConnected = !1, this.connectedDevice = null, this.deviceId = null, this.serviceId = null, this.txCharacteristicId = null, this.rxCharacteristicId = null, this.firmwareCharacteristicId = null, this.isDFU = !1, this.isDfuMode = !1, this.listeners = {
      deviceFound: [],
      connected: [],
      disconnected: [],
      dataReceived: [],
      error: []
    }, this.dataQueue = [], this.responseWaiters = new Map(), this.commandCounter = 0, this.commandQueue = [], this.isProcessingQueue = !1, this.lastCommandTime = 0, this.heartbeatTimer = null, this.heartbeatPaused = !1, this.heartbeatFailCount = 0, this.retryCount = 0, this.autoReconnect = !0;
  }
  _createClass2(_class, [{
    key: "initialize",
    value: function () {
      var _initialize = _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee() {
        var _this = this;
        return _regeneratorRuntime2().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              _context.prev = 0;
              console.log("[Bluetooth] 初始化蓝牙适配器...");
              _context.next = 4;
              return new Promise(function (t, o) {
                e.index.openBluetoothAdapter({
                  success: function success(e) {
                    console.log("[Bluetooth] 蓝牙适配器初始化成功", e), _this.isInitialized = !0, t(e);
                  },
                  fail: function fail(e) {
                    console.error("[Bluetooth] 蓝牙适配器初始化失败", e), o(new Error("\u84DD\u7259\u9002\u914D\u5668\u521D\u59CB\u5316\u5931\u8D25: ".concat(e.errMsg)));
                  }
                });
              });
            case 4:
              e.index.onBluetoothAdapterStateChange(function (e) {
                console.log("[Bluetooth] 蓝牙适配器状态变化", e), e.available || _this.emit("error", new Error("蓝牙适配器不可用"));
              });
              e.index.onBLEConnectionStateChange(function (e) {
                console.log("[Bluetooth] BLE 连接状态变化", e), e.deviceId === _this.deviceId && (e.connected ? (console.log("[Bluetooth] 设备已连接"), _this.retryCount = 0, _this.isDFU || _this.isDfuMode || _this.startHeartbeat()) : (console.log("[Bluetooth] 设备已断开连接"), _this.handleDisconnect()));
              });
              e.index.onBLECharacteristicValueChange(function (e) {
                e.deviceId === _this.deviceId && e.characteristicId === _this.rxCharacteristicId && _this.handleDataReceived(e.value);
              });
              console.log("[Bluetooth] 蓝牙服务初始化完成");
              _context.next = 13;
              break;
            case 10:
              _context.prev = 10;
              _context.t0 = _context["catch"](0);
              throw this.emit("error", _context.t0), _context.t0;
            case 13:
            case "end":
              return _context.stop();
          }
        }, _callee, this, [[0, 10]]);
      }));
      function initialize() {
        return _initialize.apply(this, arguments);
      }
      return initialize;
    }()
  }, {
    key: "startScan",
    value: function () {
      var _startScan = _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee2() {
        var _this2 = this;
        return _regeneratorRuntime2().wrap(function _callee2$(_context2) {
          while (1) switch (_context2.prev = _context2.next) {
            case 0:
              _context2.t0 = this.isInitialized;
              if (_context2.t0) {
                _context2.next = 4;
                break;
              }
              _context2.next = 4;
              return this.initialize();
            case 4:
              if (!this.isScanning) {
                _context2.next = 6;
                break;
              }
              throw new Error("正在扫描中，请稍后再试");
            case 6:
              _context2.prev = 6;
              console.log("[Bluetooth] 开始扫描设备...");
              this.isScanning = !0;
              _context2.next = 11;
              return new Promise(function (t, o) {
                e.index.startBluetoothDevicesDiscovery({
                  allowDuplicatesKey: !1,
                  interval: 0,
                  success: t,
                  fail: o
                });
              });
            case 11:
              e.index.onBluetoothDeviceFound(function (e) {
                (e.devices || []).forEach(function (e) {
                  _this2.isChameleonDevice(e) && (console.log("[Bluetooth] 发现 Chameleon 设备", e), _this2.emit("deviceFound", e));
                });
              });
              setTimeout(function () {
                _this2.isScanning && _this2.stopScan();
              }, r.SCAN_TIMEOUT);
              _context2.next = 18;
              break;
            case 15:
              _context2.prev = 15;
              _context2.t1 = _context2["catch"](6);
              throw this.isScanning = !1, this.emit("error", _context2.t1), _context2.t1;
            case 18:
            case "end":
              return _context2.stop();
          }
        }, _callee2, this, [[6, 15]]);
      }));
      function startScan() {
        return _startScan.apply(this, arguments);
      }
      return startScan;
    }()
  }, {
    key: "stopScan",
    value: function () {
      var _stopScan = _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee3() {
        return _regeneratorRuntime2().wrap(function _callee3$(_context3) {
          while (1) switch (_context3.prev = _context3.next) {
            case 0:
              if (!this.isScanning) {
                _context3.next = 11;
                break;
              }
              _context3.prev = 1;
              _context3.next = 4;
              return new Promise(function (t) {
                e.index.stopBluetoothDevicesDiscovery({
                  success: t,
                  fail: t
                });
              });
            case 4:
              this.isScanning = !1;
              console.log("[Bluetooth] 停止扫描");
              _context3.next = 11;
              break;
            case 8:
              _context3.prev = 8;
              _context3.t0 = _context3["catch"](1);
              console.warn("[Bluetooth] 停止扫描失败", _context3.t0);
            case 11:
            case "end":
              return _context3.stop();
          }
        }, _callee3, this, [[1, 8]]);
      }));
      function stopScan() {
        return _stopScan.apply(this, arguments);
      }
      return stopScan;
    }()
  }, {
    key: "connectToDevice",
    value: function () {
      var _connectToDevice = _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee4(t) {
        var _this3 = this;
        var o, i, c, l, h, u, d, m;
        return _regeneratorRuntime2().wrap(function _callee4$(_context4) {
          while (1) switch (_context4.prev = _context4.next) {
            case 0:
              _context4.t0 = this.isConnected;
              if (!_context4.t0) {
                _context4.next = 4;
                break;
              }
              _context4.next = 4;
              return this.disconnect();
            case 4:
              _context4.t1 = this.isInitialized;
              if (_context4.t1) {
                _context4.next = 8;
                break;
              }
              _context4.next = 8;
              return this.initialize();
            case 8:
              _context4.prev = 8;
              console.log("[Bluetooth] 开始连接设备:", t.name);
              _context4.t2 = this.isScanning;
              if (!_context4.t2) {
                _context4.next = 14;
                break;
              }
              _context4.next = 14;
              return this.stopScan();
            case 14:
              this.connectedDevice = t;
              this.deviceId = t.deviceId;
              this.isDFU = this.isDFUDevice(t);
              console.log("[Bluetooth] 设备是否处于 DFU 模式:", this.isDFU);
              this.isDFU && this.enterDfuMode();
              _context4.next = 21;
              return new Promise(function (t, o) {
                var n = setTimeout(function () {
                  o(new Error("连接超时"));
                }, r.CONNECT_TIMEOUT);
                e.index.createBLEConnection({
                  deviceId: _this3.deviceId,
                  timeout: r.CONNECT_TIMEOUT,
                  success: function success(e) {
                    clearTimeout(n), console.log("[Bluetooth] 设备连接成功", e), t(e);
                  },
                  fail: function fail(e) {
                    clearTimeout(n), console.error("[Bluetooth] 设备连接失败", e), o(new Error("\u8BBE\u5907\u8FDE\u63A5\u5931\u8D25: ".concat(e.errMsg)));
                  }
                });
              });
            case 21:
              _context4.next = 23;
              return new Promise(function (e) {
                return setTimeout(e, 1e3);
              });
            case 23:
              _context4.next = 25;
              return this.getBLEDeviceServices();
            case 25:
              d = _context4.sent;
              if (!(console.log("[Bluetooth] 发现的服务列表", d), this.isDFU ? this.serviceId = null == (o = d.find(function (e) {
                return e.uuid.toUpperCase().includes(n);
              })) ? void 0 : o.uuid : this.serviceId = null == (i = d.find(function (e) {
                return e.uuid.toUpperCase().includes(r.SERVICE_UUID);
              })) ? void 0 : i.uuid, !this.serviceId)) {
                _context4.next = 28;
                break;
              }
              throw new Error("未找到指定的服务");
            case 28:
              console.log("[Bluetooth] \u4F7F\u7528\u670D\u52A1ID: ".concat(this.serviceId));
              _context4.next = 31;
              return this.getBLEDeviceCharacteristics();
            case 31:
              m = _context4.sent;
              if (!(console.log("[Bluetooth] 获取到的所有特征值:", m), this.isDFU ? (this.txCharacteristicId = null == (c = m.find(function (e) {
                return e.uuid.toUpperCase().includes(s);
              })) ? void 0 : c.uuid, this.rxCharacteristicId = this.txCharacteristicId, this.firmwareCharacteristicId = null == (l = m.find(function (e) {
                return e.uuid.toUpperCase().includes(a);
              })) ? void 0 : l.uuid) : (this.txCharacteristicId = null == (h = m.find(function (e) {
                return e.uuid.toUpperCase().includes(r.TX_CHARACTERISTIC_UUID);
              })) ? void 0 : h.uuid, this.rxCharacteristicId = null == (u = m.find(function (e) {
                return e.uuid.toUpperCase().includes(r.RX_CHARACTERISTIC_UUID);
              })) ? void 0 : u.uuid), !this.txCharacteristicId || !this.rxCharacteristicId)) {
                _context4.next = 34;
                break;
              }
              throw new Error("未找到指定的特征值");
            case 34:
              if (!(this.isDFU && !this.firmwareCharacteristicId)) {
                _context4.next = 36;
                break;
              }
              throw new Error("未找到DFU固件写入特征值");
            case 36:
              console.log("[Bluetooth] \u4F7F\u7528TX\u7279\u5F81ID: ".concat(this.txCharacteristicId));
              console.log("[Bluetooth] \u4F7F\u7528RX\u7279\u5F81ID: ".concat(this.rxCharacteristicId));
              this.isDFU && console.log("[Bluetooth] \u4F7F\u7528Firmware\u7279\u5F81ID: ".concat(this.firmwareCharacteristicId));
              _context4.next = 41;
              return new Promise(function (t, o) {
                e.index.notifyBLECharacteristicValueChange({
                  deviceId: _this3.deviceId,
                  serviceId: _this3.serviceId,
                  characteristicId: _this3.rxCharacteristicId,
                  state: !0,
                  success: t,
                  fail: o
                });
              });
            case 41:
              this.isConnected = !0;
              console.log("[Bluetooth] 设备连接和配置完成");
              this.emit("connected", this.connectedDevice);
              _context4.next = 49;
              break;
            case 46:
              _context4.prev = 46;
              _context4.t3 = _context4["catch"](8);
              throw console.error("[Bluetooth] 连接设备失败", _context4.t3), this.cleanup(), this.emit("error", _context4.t3), _context4.t3;
            case 49:
            case "end":
              return _context4.stop();
          }
        }, _callee4, this, [[8, 46]]);
      }));
      function connectToDevice(_x) {
        return _connectToDevice.apply(this, arguments);
      }
      return connectToDevice;
    }()
  }, {
    key: "disconnect",
    value: function () {
      var _disconnect = _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee5() {
        var _this4 = this;
        return _regeneratorRuntime2().wrap(function _callee5$(_context5) {
          while (1) switch (_context5.prev = _context5.next) {
            case 0:
              _context5.prev = 0;
              this.autoReconnect = !1;
              _context5.t0 = this.deviceId;
              if (!_context5.t0) {
                _context5.next = 6;
                break;
              }
              _context5.next = 6;
              return new Promise(function (t) {
                e.index.closeBLEConnection({
                  deviceId: _this4.deviceId,
                  success: t,
                  fail: t
                });
              });
            case 6:
              this.cleanup();
              console.log("[Bluetooth] 已断开连接");
              _context5.next = 13;
              break;
            case 10:
              _context5.prev = 10;
              _context5.t1 = _context5["catch"](0);
              console.warn("[Bluetooth] 断开连接失败", _context5.t1);
            case 13:
            case "end":
              return _context5.stop();
          }
        }, _callee5, this, [[0, 10]]);
      }));
      function disconnect() {
        return _disconnect.apply(this, arguments);
      }
      return disconnect;
    }()
  }, {
    key: "sendCommand",
    value: function () {
      var _sendCommand = _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee6(e) {
        var _this5 = this;
        var t,
          o,
          _args6 = arguments;
        return _regeneratorRuntime2().wrap(function _callee6$(_context6) {
          while (1) switch (_context6.prev = _context6.next) {
            case 0:
              t = _args6.length > 1 && _args6[1] !== undefined ? _args6[1] : null;
              o = _args6.length > 2 && _args6[2] !== undefined ? _args6[2] : 8e3;
              if (!(!this.isConnected || !this.deviceId)) {
                _context6.next = 4;
                break;
              }
              throw new Error("设备未连接");
            case 4:
              return _context6.abrupt("return", (this.isDFU && o > 5e3 && (o = 5e3), this.pauseHeartbeat(), new Promise(function (r, n) {
                var s = {
                  id: "".concat(e, "_").concat(++_this5.commandCounter, "_").concat(Date.now()),
                  command: e,
                  data: t,
                  timeout: o,
                  resolve: r,
                  reject: n,
                  retryCount: 0,
                  maxRetries: _this5.isDFU ? 1 : 2
                };
                _this5.commandQueue.push(s), _this5.processCommandQueue();
              })));
            case 5:
            case "end":
              return _context6.stop();
          }
        }, _callee6, this);
      }));
      function sendCommand(_x2) {
        return _sendCommand.apply(this, arguments);
      }
      return sendCommand;
    }()
  }, {
    key: "processCommandQueue",
    value: function () {
      var _processCommandQueue = _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee7() {
        var _t;
        return _regeneratorRuntime2().wrap(function _callee7$(_context7) {
          while (1) switch (_context7.prev = _context7.next) {
            case 0:
              if (!(!this.isProcessingQueue && 0 !== this.commandQueue.length)) {
                _context7.next = 26;
                break;
              }
              this.isProcessingQueue = !0;
            case 2:
              if (!(this.commandQueue.length > 0)) {
                _context7.next = 25;
                break;
              }
              _t = this.commandQueue.shift();
              _context7.prev = 4;
              _context7.next = 7;
              return this.executeCommand(_t);
            case 7:
              _context7.next = 9;
              return this.delay(100);
            case 9:
              _context7.next = 23;
              break;
            case 11:
              _context7.prev = 11;
              _context7.t0 = _context7["catch"](4);
              console.warn("[Bluetooth] \u547D\u4EE4\u6267\u884C\u5931\u8D25: ".concat(_t.command), _context7.t0);
              if (!(_context7.t0 && _context7.t0.message && _context7.t0.message.includes("超时") && _t.retryCount < _t.maxRetries)) {
                _context7.next = 22;
                break;
              }
              _t.retryCount++;
              console.log("[Bluetooth] \u91CD\u8BD5\u547D\u4EE4 ".concat(_t.command, ", \u7B2C").concat(_t.retryCount, "\u6B21\u91CD\u8BD5"));
              this.commandQueue.unshift(_t);
              _context7.next = 20;
              return this.delay(500);
            case 20:
              _context7.next = 23;
              break;
            case 22:
              _t.reject(_context7.t0);
            case 23:
              _context7.next = 2;
              break;
            case 25:
              this.isProcessingQueue = !1, this.resumeHeartbeat();
            case 26:
            case "end":
              return _context7.stop();
          }
        }, _callee7, this, [[4, 11]]);
      }));
      function processCommandQueue() {
        return _processCommandQueue.apply(this, arguments);
      }
      return processCommandQueue;
    }()
  }, {
    key: "executeCommand",
    value: function () {
      var _executeCommand = _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee8(e) {
        var _this6 = this;
        var o, r, n, s, a, i, c;
        return _regeneratorRuntime2().wrap(function _callee8$(_context8) {
          while (1) switch (_context8.prev = _context8.next) {
            case 0:
              o = e.id, r = e.command, n = e.data, s = e.timeout, a = e.resolve, i = e.reject, c = t.ChameleonProtocol.createCommand(r, n);
              return _context8.abrupt("return", new Promise(function (e, r) {
                var n = setTimeout(function () {
                  _this6.responseWaiters.delete(o);
                  var e = new Error("命令执行超时");
                  i(e), r(e);
                }, s);
                _this6.responseWaiters.set(o, {
                  resolve: function resolve(s) {
                    clearTimeout(n), _this6.responseWaiters.delete(o);
                    var c = t.ChameleonProtocol.parseResponse(s);
                    if (c.success) a(c), e(c);else {
                      var _e = new Error(c.error || "命令执行失败");
                      i(_e), r(_e);
                    }
                  },
                  reject: function reject(e) {
                    clearTimeout(n), _this6.responseWaiters.delete(o), i(e), r(e);
                  }
                }), _this6.sendData(c).catch(function (e) {
                  clearTimeout(n), _this6.responseWaiters.delete(o), i(e), r(e);
                });
              }));
            case 2:
            case "end":
              return _context8.stop();
          }
        }, _callee8);
      }));
      function executeCommand(_x3) {
        return _executeCommand.apply(this, arguments);
      }
      return executeCommand;
    }()
  }, {
    key: "delay",
    value: function delay(e) {
      return new Promise(function (t) {
        return setTimeout(t, e);
      });
    }
  }, {
    key: "sendData",
    value: function () {
      var _sendData = _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee9(t) {
        var _this7 = this;
        var o,
          r,
          _n,
          _s,
          _args9 = arguments;
        return _regeneratorRuntime2().wrap(function _callee9$(_context9) {
          while (1) switch (_context9.prev = _context9.next) {
            case 0:
              o = _args9.length > 1 && _args9[1] !== undefined ? _args9[1] : !1;
              r = _args9.length > 2 && _args9[2] !== undefined ? _args9[2] : "write";
              if (!(!this.isConnected || !this.deviceId)) {
                _context9.next = 4;
                break;
              }
              throw new Error("设备未连接");
            case 4:
              _context9.prev = 4;
              if (!(_n = t instanceof Uint8Array ? t.buffer.slice(t.byteOffset, t.byteOffset + t.byteLength) : this.dataToArrayBuffer(t), _s = o ? this.firmwareCharacteristicId : this.txCharacteristicId, !_s)) {
                _context9.next = 7;
                break;
              }
              throw new Error("\u53D1\u9001\u5931\u8D25: ".concat(o ? "Firmware" : "TX", " \u7279\u5F81\u503C\u672A\u627E\u5230"));
            case 7:
              _context9.next = 9;
              return new Promise(function (t, o) {
                e.index.writeBLECharacteristicValue({
                  deviceId: _this7.deviceId,
                  serviceId: _this7.serviceId,
                  characteristicId: _s,
                  value: _n,
                  writeType: r,
                  success: t,
                  fail: o
                });
              });
            case 9:
              console.log("[Bluetooth] \u6570\u636E\u53D1\u9001\u5230 ".concat(_s, " \u6210\u529F"), Array.from(new Uint8Array(_n)).map(function (e) {
                return e.toString(16).padStart(2, "0");
              }).join(" "));
              _context9.next = 15;
              break;
            case 12:
              _context9.prev = 12;
              _context9.t0 = _context9["catch"](4);
              throw console.error("[Bluetooth] 数据发送失败", _context9.t0), this.emit("error", _context9.t0), _context9.t0;
            case 15:
            case "end":
              return _context9.stop();
          }
        }, _callee9, this, [[4, 12]]);
      }));
      function sendData(_x4) {
        return _sendData.apply(this, arguments);
      }
      return sendData;
    }()
  }, {
    key: "on",
    value: function on(e, t) {
      this.listeners[e] && this.listeners[e].push(t);
    }
  }, {
    key: "off",
    value: function off(e, t) {
      if (this.listeners[e]) {
        var o = this.listeners[e].indexOf(t);
        o > -1 && this.listeners[e].splice(o, 1);
      }
    }
  }, {
    key: "emit",
    value: function emit(e, t) {
      this.listeners[e] && this.listeners[e].forEach(function (e) {
        try {
          e(t);
        } catch (o) {
          console.error("[Bluetooth] 事件监听器错误", o);
        }
      });
    }
  }, {
    key: "getDeviceInfo",
    value: function () {
      var _getDeviceInfo = _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee10() {
        var _yield$Promise$all, _yield$Promise$all2, e, o, r, n, s, a, i, c, l;
        return _regeneratorRuntime2().wrap(function _callee10$(_context10) {
          while (1) switch (_context10.prev = _context10.next) {
            case 0:
              console.log("[Bluetooth] 开始获取设备信息...");
              _context10.next = 3;
              return Promise.all([this.sendCommand(t.ChameleonCommand.GET_APP_VERSION), this.sendCommand(t.ChameleonCommand.GET_GIT_VERSION), this.sendCommand(t.ChameleonCommand.GET_DEVICE_MODE), this.sendCommand(t.ChameleonCommand.GET_DEVICE_TYPE)]);
            case 3:
              _yield$Promise$all = _context10.sent;
              _yield$Promise$all2 = _slicedToArray2(_yield$Promise$all, 4);
              e = _yield$Promise$all2[0];
              o = _yield$Promise$all2[1];
              r = _yield$Promise$all2[2];
              n = _yield$Promise$all2[3];
              s = e;
              a = o;
              i = r;
              c = n;
              console.log("[Bluetooth] 获取设备信息完成，开始解析...");
              l = this.parseDeviceInfo(s, a, i, c);
              return _context10.abrupt("return", (console.log("[Bluetooth] 获取并解析设备信息完成:", l), l));
            case 16:
            case "end":
              return _context10.stop();
          }
        }, _callee10, this);
      }));
      function getDeviceInfo() {
        return _getDeviceInfo.apply(this, arguments);
      }
      return getDeviceInfo;
    }()
  }, {
    key: "parseDeviceInfo",
    value: function parseDeviceInfo(e, o, r, n) {
      console.log("[Bluetooth] 开始解析设备信息响应...");
      var s = {
        version: "Unknown",
        mode: "未知模式",
        model: "未知型号",
        device: null
      };
      if (o && o.success && o.data) {
        var _e2 = o.data instanceof ArrayBuffer ? o.data : o.data.buffer,
          _t2 = this.arrayBufferToString(_e2).split("\0")[0];
        s.version = _t2 || "Unknown", console.log("[Bluetooth] Git版本解析结果:", _t2);
      } else if (e && e.success && e.data) {
        var _t3 = e.data instanceof Uint8Array ? Array.from(e.data) : this.arrayBufferToData(e.data);
        s.version = "App ".concat(_t3[0]), console.log("[Bluetooth] App版本解析结果:", s.version);
      }
      if (r && r.success && r.data) {
        var _e3 = (r.data instanceof Uint8Array ? Array.from(r.data) : this.arrayBufferToData(r.data))[0];
        s.mode = t.ChameleonProtocol.getDeviceModeName(_e3), console.log("[Bluetooth] 设备模式解析结果:", _e3, "->", s.mode);
      }
      if (n && n.success && n.data) {
        var _e4 = (n.data instanceof Uint8Array ? Array.from(n.data) : this.arrayBufferToData(n.data))[0];
        s.model = t.ChameleonProtocol.getDeviceModelName(_e4), console.log("[Bluetooth] 设备型号解析结果:", _e4, "->", s.model);
      }
      return s.device = this.connectedDevice, console.log("[Bluetooth] 最终解析的设备信息:", s), s;
    }
  }, {
    key: "getBatteryInfo",
    value: function () {
      var _getBatteryInfo = _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee11() {
        var _e5, _t4, o, _r;
        return _regeneratorRuntime2().wrap(function _callee11$(_context11) {
          while (1) switch (_context11.prev = _context11.next) {
            case 0:
              _context11.prev = 0;
              _context11.next = 3;
              return this.sendCommand(t.ChameleonCommand.GET_BATTERY_CHARGE);
            case 3:
              _e5 = _context11.sent.data;
              if (!(console.log("[Bluetooth] 电池信息数据长度:", _e5 ? _e5.length : 0), console.log("[Bluetooth] 电池信息原始数据:", _e5 ? Array.from(_e5) : "null"), _e5 && _e5.length >= 3)) {
                _context11.next = 7;
                break;
              }
              _t4 = _e5[0] << 8 | _e5[1], o = _e5[2], _r = _e5.length > 3 && 1 === _e5[3];
              return _context11.abrupt("return", (console.log("[Bluetooth] 解析电池信息:", {
                voltage: _t4,
                percentage: o,
                isCharging: _r
              }), {
                level: o,
                voltage: _t4,
                isCharging: _r,
                status: _r ? "charging" : o > 0 ? "normal" : "low"
              }));
            case 7:
              return _context11.abrupt("return", (console.warn("[Bluetooth] 电池信息数据长度不足:", _e5 ? _e5.length : 0), {
                level: 0,
                voltage: 0,
                isCharging: !1,
                status: "unknown"
              }));
            case 10:
              _context11.prev = 10;
              _context11.t0 = _context11["catch"](0);
              return _context11.abrupt("return", (console.error("[Bluetooth] 获取电池信息失败", _context11.t0), {
                level: 0,
                voltage: 0,
                isCharging: !1,
                status: "unknown"
              }));
            case 13:
            case "end":
              return _context11.stop();
          }
        }, _callee11, this, [[0, 10]]);
      }));
      function getBatteryInfo() {
        return _getBatteryInfo.apply(this, arguments);
      }
      return getBatteryInfo;
    }()
  }, {
    key: "changeDeviceMode",
    value: function () {
      var _changeDeviceMode = _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee12(e) {
        var o, _r2, _n2;
        return _regeneratorRuntime2().wrap(function _callee12$(_context12) {
          while (1) switch (_context12.prev = _context12.next) {
            case 0:
              _context12.prev = 0;
              console.log("[Bluetooth] 切换设备模式到:", e);
              o = new Uint8Array([e]);
              _context12.next = 5;
              return this.sendCommand(t.ChameleonCommand.CHANGE_DEVICE_MODE, o);
            case 5:
              _r2 = _context12.sent;
              _n2 = t.ChameleonProtocol.parseResponse(_r2);
              if (!_n2.success) {
                _context12.next = 9;
                break;
              }
              return _context12.abrupt("return", (console.log("[Bluetooth] 设备模式切换成功"), {
                success: !0
              }));
            case 9:
              throw new Error("\u6A21\u5F0F\u5207\u6362\u5931\u8D25: ".concat(_n2.error));
            case 12:
              _context12.prev = 12;
              _context12.t0 = _context12["catch"](0);
              throw console.error("[Bluetooth] 切换设备模式失败", _context12.t0), _context12.t0;
            case 15:
            case "end":
              return _context12.stop();
          }
        }, _callee12, this, [[0, 12]]);
      }));
      function changeDeviceMode(_x5) {
        return _changeDeviceMode.apply(this, arguments);
      }
      return changeDeviceMode;
    }()
  }, {
    key: "isChameleonDevice",
    value: function isChameleonDevice(e) {
      var t = e.name || "",
        o = r.DEVICE_NAME_PREFIXES.some(function (e) {
          return t.startsWith(e);
        }),
        n = t.startsWith("CU-") || t.startsWith("CL-");
      return o || n;
    }
  }, {
    key: "getBLEDeviceServices",
    value: function () {
      var _getBLEDeviceServices = _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee13() {
        var _this8 = this;
        return _regeneratorRuntime2().wrap(function _callee13$(_context13) {
          while (1) switch (_context13.prev = _context13.next) {
            case 0:
              return _context13.abrupt("return", new Promise(function (t, o) {
                e.index.getBLEDeviceServices({
                  deviceId: _this8.deviceId,
                  success: function success(e) {
                    return t(e.services);
                  },
                  fail: o
                });
              }));
            case 1:
            case "end":
              return _context13.stop();
          }
        }, _callee13);
      }));
      function getBLEDeviceServices() {
        return _getBLEDeviceServices.apply(this, arguments);
      }
      return getBLEDeviceServices;
    }()
  }, {
    key: "getBLEDeviceCharacteristics",
    value: function () {
      var _getBLEDeviceCharacteristics = _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee14() {
        var _this9 = this;
        return _regeneratorRuntime2().wrap(function _callee14$(_context14) {
          while (1) switch (_context14.prev = _context14.next) {
            case 0:
              return _context14.abrupt("return", new Promise(function (t, o) {
                e.index.getBLEDeviceCharacteristics({
                  deviceId: _this9.deviceId,
                  serviceId: _this9.serviceId,
                  success: function success(e) {
                    return t(e.characteristics);
                  },
                  fail: o
                });
              }));
            case 1:
            case "end":
              return _context14.stop();
          }
        }, _callee14);
      }));
      function getBLEDeviceCharacteristics() {
        return _getBLEDeviceCharacteristics.apply(this, arguments);
      }
      return getBLEDeviceCharacteristics;
    }()
  }, {
    key: "handleDataReceived",
    value: function handleDataReceived(e) {
      try {
        if (console.log("[Bluetooth] 接收到原始数据", Array.from(new Uint8Array(e)).map(function (e) {
          return e.toString(16).padStart(2, "0");
        }).join(" ")), this.isDFU) return console.log("[Bluetooth] DFU模式数据，直接触发事件"), console.log("[Bluetooth] DFU事件监听器数量:", this.listeners.dataReceived ? this.listeners.dataReceived.length : 0), console.log("[Bluetooth] 准备触发dataReceived事件，数据:", Array.from(new Uint8Array(e)).map(function (e) {
          return e.toString(16).padStart(2, "0");
        }).join(" ")), this.emit("dataReceived", e), void console.log("[Bluetooth] DFU dataReceived事件已触发");
        var o = t.ChameleonProtocol.parseResponse(e);
        console.log("[Bluetooth] 解析后数据", o);
        var _r3 = null;
        var _iterator = _createForOfIteratorHelper2(this.responseWaiters.entries()),
          _step;
        try {
          for (_iterator.s(); !(_step = _iterator.n()).done;) {
            var _step$value = _slicedToArray2(_step.value, 2),
              _e6 = _step$value[0],
              _t5 = _step$value[1];
            if (_e6.startsWith("".concat(o.command, "_"))) {
              _r3 = {
                id: _e6,
                waiter: _t5
              };
              break;
            }
          }
        } catch (err) {
          _iterator.e(err);
        } finally {
          _iterator.f();
        }
        _r3 ? _r3.waiter.resolve(e) : (console.log("[Bluetooth] 未找到对应的命令等待者，命令:", o.command), this.emit("dataReceived", o));
      } catch (o) {
        console.error("[Bluetooth] 数据解析失败", o), this.emit("error", o);
      }
    }
  }, {
    key: "handleDisconnect",
    value: function handleDisconnect() {
      var _this10 = this;
      var e = this.isConnected;
      if (this.isConnected = !1, this.stopHeartbeat(), this.cleanup(), console.log("[Bluetooth] \u5904\u7406\u65AD\u5F00\u8FDE\u63A5 - \u4E4B\u524D\u5DF2\u8FDE\u63A5: ".concat(e, ", \u91CD\u8BD5\u6B21\u6570: ").concat(this.retryCount, ", \u5FC3\u8DF3\u5931\u8D25: ").concat(this.heartbeatFailCount)), e) if (this.emit("disconnected", this.connectedDevice), this.autoReconnect && this.retryCount < r.MAX_RETRY_COUNT) {
        this.retryCount++;
        var _e7 = Math.min(1e3 * this.retryCount, 5e3);
        console.log("[Bluetooth] \u5F00\u59CB\u7B2C ".concat(this.retryCount, " \u6B21\u91CD\u8FDE\uFF0C\u5EF6\u8FDF ").concat(_e7, "ms...")), setTimeout( /*#__PURE__*/_asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee15() {
          return _regeneratorRuntime2().wrap(function _callee15$(_context15) {
            while (1) switch (_context15.prev = _context15.next) {
              case 0:
                if (!(_this10.connectedDevice && _this10.autoReconnect)) {
                  _context15.next = 11;
                  break;
                }
                _context15.prev = 1;
                console.log("[Bluetooth] \u6267\u884C\u7B2C ".concat(_this10.retryCount, " \u6B21\u91CD\u8FDE\u5C1D\u8BD5"));
                _context15.next = 5;
                return _this10.connectToDevice(_this10.connectedDevice);
              case 5:
                console.log("[Bluetooth] \u7B2C ".concat(_this10.retryCount, " \u6B21\u91CD\u8FDE\u6210\u529F"));
                _context15.next = 11;
                break;
              case 8:
                _context15.prev = 8;
                _context15.t0 = _context15["catch"](1);
                console.error("[Bluetooth] \u7B2C ".concat(_this10.retryCount, " \u6B21\u91CD\u8FDE\u5931\u8D25:"), _context15.t0), _this10.retryCount >= r.MAX_RETRY_COUNT && (console.error("[Bluetooth] \u5DF2\u8FBE\u6700\u5927\u91CD\u8FDE\u6B21\u6570 (".concat(r.MAX_RETRY_COUNT, ")\uFF0C\u505C\u6B62\u81EA\u52A8\u91CD\u8FDE")), _this10.autoReconnect = !1, _this10.emit("error", new Error("连接失败，已停止自动重连")));
              case 11:
              case "end":
                return _context15.stop();
            }
          }, _callee15, null, [[1, 8]]);
        })), _e7);
      } else this.autoReconnect ? console.log("[Bluetooth] \u5DF2\u8FBE\u6700\u5927\u91CD\u8FDE\u6B21\u6570 (".concat(r.MAX_RETRY_COUNT, ")\uFF0C\u505C\u6B62\u91CD\u8FDE")) : console.log("[Bluetooth] 自动重连已禁用，跳过重连");
    }
  }, {
    key: "startHeartbeat",
    value: function startHeartbeat() {
      var _this11 = this;
      this.stopHeartbeat(), this.heartbeatFailCount = 0, console.log("[Bluetooth] \u542F\u52A8\u5FC3\u8DF3\u68C0\u6D4B\uFF0C\u95F4\u9694: ".concat(r.HEARTBEAT_INTERVAL, "ms")), this.heartbeatTimer = setInterval( /*#__PURE__*/_asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee16() {
        return _regeneratorRuntime2().wrap(function _callee16$(_context16) {
          while (1) switch (_context16.prev = _context16.next) {
            case 0:
              if (!_this11.isDfuMode) {
                _context16.next = 4;
                break;
              }
              console.log("[Bluetooth] DFU模式下，跳过心跳检测");
              _context16.next = 15;
              break;
            case 4:
              if (!(_this11.isConnected && !_this11.heartbeatPaused)) {
                _context16.next = 15;
                break;
              }
              if (!_this11.isProcessingQueue) {
                _context16.next = 7;
                break;
              }
              return _context16.abrupt("return", void console.log("[Bluetooth] 跳过心跳检测 - 正在处理命令队列"));
            case 7:
              _context16.prev = 7;
              _context16.next = 10;
              return _this11.sendHeartbeatCommand();
            case 10:
              _context16.next = 15;
              break;
            case 12:
              _context16.prev = 12;
              _context16.t0 = _context16["catch"](7);
              console.warn("[Bluetooth] 心跳检测失败", _context16.t0);
            case 15:
            case "end":
              return _context16.stop();
          }
        }, _callee16, null, [[7, 12]]);
      })), r.HEARTBEAT_INTERVAL);
    }
  }, {
    key: "sendHeartbeatCommand",
    value: function () {
      var _sendHeartbeatCommand = _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee17() {
        return _regeneratorRuntime2().wrap(function _callee17$(_context17) {
          while (1) switch (_context17.prev = _context17.next) {
            case 0:
              if (!(this.isConnected && this.deviceId)) {
                _context17.next = 11;
                break;
              }
              _context17.prev = 1;
              _context17.next = 4;
              return this.sendCommand(t.ChameleonCommand.GET_APP_VERSION, null, 5e3);
            case 4:
              console.log("[Bluetooth] 心跳发送并响应成功");
              this.heartbeatFailCount = 0;
              _context17.next = 11;
              break;
            case 8:
              _context17.prev = 8;
              _context17.t0 = _context17["catch"](1);
              this.heartbeatFailCount++, console.warn("[Bluetooth] \u5FC3\u8DF3\u5931\u8D25 (".concat(this.heartbeatFailCount, "/").concat(r.MAX_HEARTBEAT_FAILURES, ")"), _context17.t0), this.heartbeatFailCount >= r.MAX_HEARTBEAT_FAILURES && (console.error("[Bluetooth] 心跳连续失败，可能连接异常，准备重连..."), this.handleHeartbeatFailure());
            case 11:
            case "end":
              return _context17.stop();
          }
        }, _callee17, this, [[1, 8]]);
      }));
      function sendHeartbeatCommand() {
        return _sendHeartbeatCommand.apply(this, arguments);
      }
      return sendHeartbeatCommand;
    }()
  }, {
    key: "handleHeartbeatFailure",
    value: function handleHeartbeatFailure() {
      var _this12 = this;
      console.log("[Bluetooth] 处理心跳失败，主动断开连接以触发重连机制"), this.heartbeatFailCount = 0, this.deviceId && e.index.closeBLEConnection({
        deviceId: this.deviceId,
        success: function success() {
          console.log("[Bluetooth] 因心跳失败主动断开连接成功");
        },
        fail: function fail(e) {
          console.warn("[Bluetooth] 主动断开连接失败", e), _this12.handleDisconnect();
        }
      });
    }
  }, {
    key: "pauseHeartbeat",
    value: function pauseHeartbeat() {
      this.heartbeatPaused = !0, console.log("[Bluetooth] 心跳已暂停");
    }
  }, {
    key: "resumeHeartbeat",
    value: function resumeHeartbeat() {
      this.heartbeatPaused = !1, console.log("[Bluetooth] 心跳已恢复");
    }
  }, {
    key: "stopHeartbeat",
    value: function stopHeartbeat() {
      this.heartbeatTimer && (clearInterval(this.heartbeatTimer), this.heartbeatTimer = null), this.heartbeatPaused = !1;
    }
  }, {
    key: "checkConnectionStability",
    value: function () {
      var _checkConnectionStability = _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee18() {
        return _regeneratorRuntime2().wrap(function _callee18$(_context18) {
          while (1) switch (_context18.prev = _context18.next) {
            case 0:
              if (this.isConnected) {
                _context18.next = 2;
                break;
              }
              throw new Error("设备未连接");
            case 2:
              _context18.prev = 2;
              _context18.next = 5;
              return this.sendCommand(t.ChameleonCommand.GET_APP_VERSION, null, 3e3);
            case 5:
              console.log("[Bluetooth] 连接稳定性检查通过");
              return _context18.abrupt("return", !0);
            case 9:
              _context18.prev = 9;
              _context18.t0 = _context18["catch"](2);
              return _context18.abrupt("return", (console.warn("[Bluetooth] 连接稳定性检查失败", _context18.t0), !1));
            case 12:
            case "end":
              return _context18.stop();
          }
        }, _callee18, this, [[2, 9]]);
      }));
      function checkConnectionStability() {
        return _checkConnectionStability.apply(this, arguments);
      }
      return checkConnectionStability;
    }()
  }, {
    key: "checkConnectionHealth",
    value: function () {
      var _checkConnectionHealth = _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee19() {
        var e;
        return _regeneratorRuntime2().wrap(function _callee19$(_context19) {
          while (1) switch (_context19.prev = _context19.next) {
            case 0:
              e = {
                isConnected: this.isConnected,
                heartbeatFailCount: this.heartbeatFailCount,
                isProcessingQueue: this.isProcessingQueue,
                queueLength: this.commandQueue.length,
                waitersCount: this.responseWaiters.size,
                retryCount: this.retryCount
              };
              return _context19.abrupt("return", (console.log("[Bluetooth] 连接健康状态:", e), this.heartbeatFailCount > 0 && console.warn("[Bluetooth] \u8FDE\u63A5\u8D28\u91CF\u8B66\u544A: \u5FC3\u8DF3\u5931\u8D25 ".concat(this.heartbeatFailCount, " \u6B21")), this.commandQueue.length > 5 && console.warn("[Bluetooth] \u547D\u4EE4\u961F\u5217\u5806\u79EF: ".concat(this.commandQueue.length, " \u4E2A\u547D\u4EE4\u5F85\u5904\u7406")), e));
            case 2:
            case "end":
              return _context19.stop();
          }
        }, _callee19, this);
      }));
      function checkConnectionHealth() {
        return _checkConnectionHealth.apply(this, arguments);
      }
      return checkConnectionHealth;
    }()
  }, {
    key: "cleanup",
    value: function cleanup() {
      this.isConnected = !1, this.deviceId = null, this.serviceId = null, this.txCharacteristicId = null, this.rxCharacteristicId = null, this.connectedDevice = null, this.stopHeartbeat(), this.heartbeatFailCount = 0, this.responseWaiters.clear(), this.commandQueue = [], this.isProcessingQueue = !1, this.isDFU = !1, this.isDfuMode = !1;
    }
  }, {
    key: "dataToArrayBuffer",
    value: function dataToArrayBuffer(e) {
      if (e instanceof ArrayBuffer) return e;
      if (Array.isArray(e)) return new Uint8Array(e).buffer;
      var t;
      return t = "string" == typeof e ? e : JSON.stringify(e), this.stringToArrayBuffer(t);
    }
  }, {
    key: "arrayBufferToData",
    value: function arrayBufferToData(e) {
      try {
        var _t6 = this.arrayBufferToString(e);
        try {
          return JSON.parse(_t6);
        } catch (_unused) {
          return _t6;
        }
      } catch (t) {
        return console.error("[Bluetooth] 数据解码失败", t), Array.from(new Uint8Array(e));
      }
    }
  }, {
    key: "stringToArrayBuffer",
    value: function stringToArrayBuffer(e) {
      if ("undefined" != typeof TextEncoder) try {
        return new TextEncoder().encode(e).buffer;
      } catch (o) {
        console.warn("[Bluetooth] TextEncoder失败，使用备选方案", o);
      }
      var t = [];
      for (var _r4 = 0; _r4 < e.length; _r4++) {
        var o = e.charCodeAt(_r4);
        if (o < 128) t.push(o);else if (o < 2048) t.push(192 | o >> 6), t.push(128 | 63 & o);else if (o < 55296 || o >= 57344) t.push(224 | o >> 12), t.push(128 | o >> 6 & 63), t.push(128 | 63 & o);else {
          _r4++;
          var _n3 = 65536 + ((1023 & o) << 10 | 1023 & e.charCodeAt(_r4));
          t.push(240 | _n3 >> 18), t.push(128 | _n3 >> 12 & 63), t.push(128 | _n3 >> 6 & 63), t.push(128 | 63 & _n3);
        }
      }
      return new Uint8Array(t).buffer;
    }
  }, {
    key: "arrayToHexString",
    value: function arrayToHexString(e) {
      return e && 0 !== e.length ? Array.from(e).map(function (e) {
        return e.toString(16).toUpperCase().padStart(2, "0");
      }).join("") : "";
    }
  }, {
    key: "arrayToHexLowerString",
    value: function arrayToHexLowerString(e) {
      return e && 0 !== e.length ? Array.from(e).map(function (e) {
        return e.toString(16).toLowerCase().padStart(2, "0");
      }).join("") : "";
    }
  }, {
    key: "arrayBufferToString",
    value: function arrayBufferToString(e) {
      if ("undefined" != typeof TextDecoder) try {
        return new TextDecoder().decode(e);
      } catch (n) {
        console.warn("[Bluetooth] TextDecoder失败，使用备选方案", n);
      }
      var t = new Uint8Array(e);
      var o = "",
        r = 0;
      for (; r < t.length;) {
        var _e8 = t[r++];
        if (_e8 < 128) o += String.fromCharCode(_e8);else if (_e8 >> 5 == 6) {
          var _n4 = t[r++];
          o += String.fromCharCode((31 & _e8) << 6 | 63 & _n4);
        } else if (_e8 >> 4 == 14) {
          var _n5 = t[r++],
            _s2 = t[r++];
          o += String.fromCharCode((15 & _e8) << 12 | (63 & _n5) << 6 | 63 & _s2);
        } else if (_e8 >> 3 == 30) {
          var _n6 = (7 & _e8) << 18 | (63 & t[r++]) << 12 | (63 & t[r++]) << 6 | 63 & t[r++],
            _s3 = 55296 + (_n6 - 65536 >> 10),
            _a = 56320 + (_n6 - 65536 & 1023);
          o += String.fromCharCode(_s3, _a);
        } else console.warn("[Bluetooth] 无效的UTF-8字节:", _e8.toString(16));
      }
      return o;
    }
  }, {
    key: "getDeviceSettings",
    value: function () {
      var _getDeviceSettings = _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee20() {
        var _e9, _t7;
        return _regeneratorRuntime2().wrap(function _callee20$(_context20) {
          while (1) switch (_context20.prev = _context20.next) {
            case 0:
              _context20.prev = 0;
              console.log("[Bluetooth] 开始获取设备设置...");
              _context20.next = 4;
              return this.sendCommand(t.ChameleonCommand.GET_DEVICE_SETTINGS);
            case 4:
              _e9 = _context20.sent.data;
              if (!(console.log("[Bluetooth] 设备设置原始数据:", _e9 ? Array.from(_e9) : "null"), _e9 && _e9.length >= 19)) {
                _context20.next = 8;
                break;
              }
              _t7 = {
                version: _e9[0],
                animation: _e9[1],
                buttonAPress: _e9[2],
                buttonBPress: _e9[3],
                buttonALongPress: _e9[4],
                buttonBLongPress: _e9[5],
                pairingEnabled: 1 === _e9[6],
                autoPolling: 1 === _e9[7],
                icPollingEnabled: 1 === _e9[8],
                idPollingEnabled: 1 === _e9[9],
                autoPollingDelay: _e9[10] << 8 | _e9[11],
                bleKey: this.arrayBufferToString(_e9.slice(12, 18).buffer),
                compatible8Slots: 1 === _e9[18]
              };
              return _context20.abrupt("return", (console.log("[Bluetooth] 解析设备设置:", _t7), _t7));
            case 8:
              return _context20.abrupt("return", (console.warn("[Bluetooth] 设备设置数据长度不足:", _e9 ? _e9.length : 0), null));
            case 11:
              _context20.prev = 11;
              _context20.t0 = _context20["catch"](0);
              return _context20.abrupt("return", (console.error("[Bluetooth] 获取设备设置失败", _context20.t0), null));
            case 14:
            case "end":
              return _context20.stop();
          }
        }, _callee20, this, [[0, 11]]);
      }));
      function getDeviceSettings() {
        return _getDeviceSettings.apply(this, arguments);
      }
      return getDeviceSettings;
    }()
  }, {
    key: "setAnimationMode",
    value: function () {
      var _setAnimationMode = _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee21(e) {
        var o;
        return _regeneratorRuntime2().wrap(function _callee21$(_context21) {
          while (1) switch (_context21.prev = _context21.next) {
            case 0:
              _context21.prev = 0;
              console.log("[Bluetooth] 设置动画模式:", e);
              o = new Uint8Array([e]);
              _context21.next = 5;
              return this.sendCommand(t.ChameleonCommand.SET_ANIMATION_MODE, o);
            case 5:
              console.log("[Bluetooth] 动画模式设置成功");
              return _context21.abrupt("return", !0);
            case 9:
              _context21.prev = 9;
              _context21.t0 = _context21["catch"](0);
              throw console.error("[Bluetooth] 设置动画模式失败", _context21.t0), _context21.t0;
            case 12:
            case "end":
              return _context21.stop();
          }
        }, _callee21, this, [[0, 9]]);
      }));
      function setAnimationMode(_x6) {
        return _setAnimationMode.apply(this, arguments);
      }
      return setAnimationMode;
    }()
  }, {
    key: "getAnimationMode",
    value: function () {
      var _getAnimationMode = _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee22() {
        var _e10;
        return _regeneratorRuntime2().wrap(function _callee22$(_context22) {
          while (1) switch (_context22.prev = _context22.next) {
            case 0:
              _context22.prev = 0;
              _context22.next = 3;
              return this.sendCommand(t.ChameleonCommand.GET_ANIMATION_MODE);
            case 3:
              _e10 = _context22.sent;
              return _context22.abrupt("return", _e10.data && _e10.data.length > 0 ? _e10.data[0] : 0);
            case 7:
              _context22.prev = 7;
              _context22.t0 = _context22["catch"](0);
              return _context22.abrupt("return", (console.error("[Bluetooth] 获取动画模式失败", _context22.t0), 0));
            case 10:
            case "end":
              return _context22.stop();
          }
        }, _callee22, this, [[0, 7]]);
      }));
      function getAnimationMode() {
        return _getAnimationMode.apply(this, arguments);
      }
      return getAnimationMode;
    }()
  }, {
    key: "setButtonConfig",
    value: function () {
      var _setButtonConfig = _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee23(e, o) {
        var _r5;
        return _regeneratorRuntime2().wrap(function _callee23$(_context23) {
          while (1) switch (_context23.prev = _context23.next) {
            case 0:
              _context23.prev = 0;
              console.log("[Bluetooth] 设置按钮配置 - 按钮:", e, "配置:", o);
              _r5 = new Uint8Array([e, o]);
              _context23.next = 5;
              return this.sendCommand(t.ChameleonCommand.SET_BUTTON_PRESS_CONFIG, _r5);
            case 5:
              console.log("[Bluetooth] 按钮配置设置成功");
              return _context23.abrupt("return", !0);
            case 9:
              _context23.prev = 9;
              _context23.t0 = _context23["catch"](0);
              throw console.error("[Bluetooth] 设置按钮配置失败", _context23.t0), _context23.t0;
            case 12:
            case "end":
              return _context23.stop();
          }
        }, _callee23, this, [[0, 9]]);
      }));
      function setButtonConfig(_x7, _x8) {
        return _setButtonConfig.apply(this, arguments);
      }
      return setButtonConfig;
    }()
  }, {
    key: "setLongButtonConfig",
    value: function () {
      var _setLongButtonConfig = _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee24(e, o) {
        var _r6;
        return _regeneratorRuntime2().wrap(function _callee24$(_context24) {
          while (1) switch (_context24.prev = _context24.next) {
            case 0:
              _context24.prev = 0;
              console.log("[Bluetooth] 设置按钮长按配置 - 按钮:", e, "配置:", o);
              _r6 = new Uint8Array([e, o]);
              _context24.next = 5;
              return this.sendCommand(t.ChameleonCommand.SET_LONG_BUTTON_PRESS_CONFIG, _r6);
            case 5:
              console.log("[Bluetooth] 按钮长按配置设置成功");
              return _context24.abrupt("return", !0);
            case 9:
              _context24.prev = 9;
              _context24.t0 = _context24["catch"](0);
              throw console.error("[Bluetooth] 设置按钮长按配置失败", _context24.t0), _context24.t0;
            case 12:
            case "end":
              return _context24.stop();
          }
        }, _callee24, this, [[0, 9]]);
      }));
      function setLongButtonConfig(_x9, _x10) {
        return _setLongButtonConfig.apply(this, arguments);
      }
      return setLongButtonConfig;
    }()
  }, {
    key: "setBLEPairEnabled",
    value: function () {
      var _setBLEPairEnabled = _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee25(e) {
        var o;
        return _regeneratorRuntime2().wrap(function _callee25$(_context25) {
          while (1) switch (_context25.prev = _context25.next) {
            case 0:
              _context25.prev = 0;
              console.log("[Bluetooth] 设置BLE配对:", e ? "启用" : "禁用");
              o = new Uint8Array([e ? 1 : 0]);
              _context25.next = 5;
              return this.sendCommand(t.ChameleonCommand.BLE_SET_PAIR_ENABLE, o);
            case 5:
              console.log("[Bluetooth] BLE配对设置成功");
              return _context25.abrupt("return", !0);
            case 9:
              _context25.prev = 9;
              _context25.t0 = _context25["catch"](0);
              throw console.error("[Bluetooth] 设置BLE配对失败", _context25.t0), _context25.t0;
            case 12:
            case "end":
              return _context25.stop();
          }
        }, _callee25, this, [[0, 9]]);
      }));
      function setBLEPairEnabled(_x11) {
        return _setBLEPairEnabled.apply(this, arguments);
      }
      return setBLEPairEnabled;
    }()
  }, {
    key: "getSlotPollingConfig",
    value: function () {
      var _getSlotPollingConfig = _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee26() {
        var _e11, _t8;
        return _regeneratorRuntime2().wrap(function _callee26$(_context26) {
          while (1) switch (_context26.prev = _context26.next) {
            case 0:
              _context26.prev = 0;
              console.log("[Bluetooth] 获取卡槽轮询配置...");
              _context26.next = 4;
              return this.sendCommand(t.ChameleonCommand.GET_SLOT_POLLING_CONFIG_LIST);
            case 4:
              _e11 = _context26.sent;
              if (_e11.success) {
                _context26.next = 7;
                break;
              }
              throw new Error("\u83B7\u53D6\u5361\u69FD\u8F6E\u8BE2\u914D\u7F6E\u5931\u8D25: ".concat(_e11.error));
            case 7:
              if (!(_e11.data && _e11.data.length >= 16)) {
                _context26.next = 10;
                break;
              }
              _t8 = Array.from(_e11.data.slice(0, 16)).map(function (e) {
                return 1 === e;
              });
              return _context26.abrupt("return", (console.log("[Bluetooth] 卡槽轮询配置:", _t8), _t8));
            case 10:
              return _context26.abrupt("return", (console.warn("[Bluetooth] 卡槽轮询配置数据长度不足:", _e11.data ? _e11.data.length : 0), new Array(16).fill(!1)));
            case 13:
              _context26.prev = 13;
              _context26.t0 = _context26["catch"](0);
              return _context26.abrupt("return", (console.error("[Bluetooth] 获取卡槽轮询配置失败", _context26.t0), new Array(16).fill(!1)));
            case 16:
            case "end":
              return _context26.stop();
          }
        }, _callee26, this, [[0, 13]]);
      }));
      function getSlotPollingConfig() {
        return _getSlotPollingConfig.apply(this, arguments);
      }
      return getSlotPollingConfig;
    }()
  }, {
    key: "setSlotPollingConfigList",
    value: function () {
      var _setSlotPollingConfigList = _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee27(e) {
        var o, _t9, _r7;
        return _regeneratorRuntime2().wrap(function _callee27$(_context27) {
          while (1) switch (_context27.prev = _context27.next) {
            case 0:
              _context27.prev = 0;
              if (!(console.log("[Bluetooth] 设置卡槽轮询配置列表:", e), !Array.isArray(e) || 16 !== e.length)) {
                _context27.next = 3;
                break;
              }
              throw new Error("配置数组必须包含16个元素");
            case 3:
              o = new Uint8Array(16);
              for (_t9 = 0; _t9 < 16; _t9++) o[_t9] = e[_t9] ? 1 : 0;
              _context27.next = 7;
              return this.sendCommand(t.ChameleonCommand.SET_SLOT_POLLING_CONFIG_LIST, o);
            case 7:
              _r7 = _context27.sent;
              if (_r7.success) {
                _context27.next = 10;
                break;
              }
              throw new Error("\u8BBE\u7F6E\u5361\u69FD\u8F6E\u8BE2\u914D\u7F6E\u5931\u8D25: ".concat(_r7.error));
            case 10:
              return _context27.abrupt("return", (console.log("[Bluetooth] 卡槽轮询配置设置成功"), !0));
            case 13:
              _context27.prev = 13;
              _context27.t0 = _context27["catch"](0);
              throw console.error("[Bluetooth] 设置卡槽轮询配置失败", _context27.t0), _context27.t0;
            case 16:
            case "end":
              return _context27.stop();
          }
        }, _callee27, this, [[0, 13]]);
      }));
      function setSlotPollingConfigList(_x12) {
        return _setSlotPollingConfigList.apply(this, arguments);
      }
      return setSlotPollingConfigList;
    }()
  }, {
    key: "setSlotPollingConfig",
    value: function () {
      var _setSlotPollingConfig = _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee28(e, t) {
        var o;
        return _regeneratorRuntime2().wrap(function _callee28$(_context28) {
          while (1) switch (_context28.prev = _context28.next) {
            case 0:
              _context28.prev = 0;
              console.log("[Bluetooth] 设置单个卡槽轮询 - 卡槽:", e, "状态:", t);
              _context28.next = 4;
              return this.getSlotPollingConfig();
            case 4:
              o = _context28.sent;
              o[e] = t;
              _context28.next = 8;
              return this.setSlotPollingConfigList(o);
            case 8:
              return _context28.abrupt("return", !0);
            case 11:
              _context28.prev = 11;
              _context28.t0 = _context28["catch"](0);
              throw console.error("[Bluetooth] 设置卡槽轮询配置失败", _context28.t0), _context28.t0;
            case 14:
            case "end":
              return _context28.stop();
          }
        }, _callee28, this, [[0, 11]]);
      }));
      function setSlotPollingConfig(_x13, _x14) {
        return _setSlotPollingConfig.apply(this, arguments);
      }
      return setSlotPollingConfig;
    }()
  }, {
    key: "setSlotPollingConfigListAndSave",
    value: function () {
      var _setSlotPollingConfigListAndSave = _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee29(e) {
        return _regeneratorRuntime2().wrap(function _callee29$(_context29) {
          while (1) switch (_context29.prev = _context29.next) {
            case 0:
              _context29.prev = 0;
              _context29.next = 3;
              return this.setSlotPollingConfigList(e);
            case 3:
              _context29.next = 5;
              return this.saveDeviceSettings();
            case 5:
              console.log("[Bluetooth] 卡槽轮询配置设置并保存成功");
              return _context29.abrupt("return", !0);
            case 9:
              _context29.prev = 9;
              _context29.t0 = _context29["catch"](0);
              throw console.error("[Bluetooth] 设置并保存卡槽轮询配置失败", _context29.t0), _context29.t0;
            case 12:
            case "end":
              return _context29.stop();
          }
        }, _callee29, this, [[0, 9]]);
      }));
      function setSlotPollingConfigListAndSave(_x15) {
        return _setSlotPollingConfigListAndSave.apply(this, arguments);
      }
      return setSlotPollingConfigListAndSave;
    }()
  }, {
    key: "setAutoPolling",
    value: function () {
      var _setAutoPolling = _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee30(e) {
        var o;
        return _regeneratorRuntime2().wrap(function _callee30$(_context30) {
          while (1) switch (_context30.prev = _context30.next) {
            case 0:
              _context30.prev = 0;
              console.log("[Bluetooth] 设置自动轮询:", e ? "启用" : "禁用");
              o = new Uint8Array([e ? 1 : 0]);
              _context30.next = 5;
              return this.sendCommand(t.ChameleonCommand.SET_DEVICE_AUTO_POLLING, o);
            case 5:
              console.log("[Bluetooth] 自动轮询设置成功");
              return _context30.abrupt("return", !0);
            case 9:
              _context30.prev = 9;
              _context30.t0 = _context30["catch"](0);
              throw console.error("[Bluetooth] 设置自动轮询失败", _context30.t0), _context30.t0;
            case 12:
            case "end":
              return _context30.stop();
          }
        }, _callee30, this, [[0, 9]]);
      }));
      function setAutoPolling(_x16) {
        return _setAutoPolling.apply(this, arguments);
      }
      return setAutoPolling;
    }()
  }, {
    key: "getAutoPolling",
    value: function () {
      var _getAutoPolling = _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee31() {
        var _e12;
        return _regeneratorRuntime2().wrap(function _callee31$(_context31) {
          while (1) switch (_context31.prev = _context31.next) {
            case 0:
              _context31.prev = 0;
              _context31.next = 3;
              return this.sendCommand(t.ChameleonCommand.GET_DEVICE_AUTO_POLLING);
            case 3:
              _e12 = _context31.sent;
              return _context31.abrupt("return", !!(_e12.data && _e12.data.length > 0) && 1 === _e12.data[0]);
            case 7:
              _context31.prev = 7;
              _context31.t0 = _context31["catch"](0);
              return _context31.abrupt("return", (console.error("[Bluetooth] 获取自动轮询状态失败", _context31.t0), !1));
            case 10:
            case "end":
              return _context31.stop();
          }
        }, _callee31, this, [[0, 7]]);
      }));
      function getAutoPolling() {
        return _getAutoPolling.apply(this, arguments);
      }
      return getAutoPolling;
    }()
  }, {
    key: "setICPolling",
    value: function () {
      var _setICPolling = _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee32(e) {
        var o;
        return _regeneratorRuntime2().wrap(function _callee32$(_context32) {
          while (1) switch (_context32.prev = _context32.next) {
            case 0:
              _context32.prev = 0;
              console.log("[Bluetooth] 设置IC轮询:", e ? "启用" : "禁用");
              o = new Uint8Array([e ? 1 : 0]);
              _context32.next = 5;
              return this.sendCommand(t.ChameleonCommand.SET_IC_POLLING_ENABLED, o);
            case 5:
              console.log("[Bluetooth] IC轮询设置成功");
              return _context32.abrupt("return", !0);
            case 9:
              _context32.prev = 9;
              _context32.t0 = _context32["catch"](0);
              throw console.error("[Bluetooth] 设置IC轮询失败", _context32.t0), _context32.t0;
            case 12:
            case "end":
              return _context32.stop();
          }
        }, _callee32, this, [[0, 9]]);
      }));
      function setICPolling(_x17) {
        return _setICPolling.apply(this, arguments);
      }
      return setICPolling;
    }()
  }, {
    key: "getICPolling",
    value: function () {
      var _getICPolling = _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee33() {
        var _e13;
        return _regeneratorRuntime2().wrap(function _callee33$(_context33) {
          while (1) switch (_context33.prev = _context33.next) {
            case 0:
              _context33.prev = 0;
              _context33.next = 3;
              return this.sendCommand(t.ChameleonCommand.GET_IC_POLLING_ENABLED);
            case 3:
              _e13 = _context33.sent;
              return _context33.abrupt("return", !!(_e13.data && _e13.data.length > 0) && 1 === _e13.data[0]);
            case 7:
              _context33.prev = 7;
              _context33.t0 = _context33["catch"](0);
              return _context33.abrupt("return", (console.error("[Bluetooth] 获取IC轮询状态失败", _context33.t0), !1));
            case 10:
            case "end":
              return _context33.stop();
          }
        }, _callee33, this, [[0, 7]]);
      }));
      function getICPolling() {
        return _getICPolling.apply(this, arguments);
      }
      return getICPolling;
    }()
  }, {
    key: "setIDPolling",
    value: function () {
      var _setIDPolling = _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee34(e) {
        var o;
        return _regeneratorRuntime2().wrap(function _callee34$(_context34) {
          while (1) switch (_context34.prev = _context34.next) {
            case 0:
              _context34.prev = 0;
              console.log("[Bluetooth] 设置ID轮询:", e ? "启用" : "禁用");
              o = new Uint8Array([e ? 1 : 0]);
              _context34.next = 5;
              return this.sendCommand(t.ChameleonCommand.SET_ID_POLLING_ENABLED, o);
            case 5:
              console.log("[Bluetooth] ID轮询设置成功");
              return _context34.abrupt("return", !0);
            case 9:
              _context34.prev = 9;
              _context34.t0 = _context34["catch"](0);
              throw console.error("[Bluetooth] 设置ID轮询失败", _context34.t0), _context34.t0;
            case 12:
            case "end":
              return _context34.stop();
          }
        }, _callee34, this, [[0, 9]]);
      }));
      function setIDPolling(_x18) {
        return _setIDPolling.apply(this, arguments);
      }
      return setIDPolling;
    }()
  }, {
    key: "getIDPolling",
    value: function () {
      var _getIDPolling = _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee35() {
        var _e14;
        return _regeneratorRuntime2().wrap(function _callee35$(_context35) {
          while (1) switch (_context35.prev = _context35.next) {
            case 0:
              _context35.prev = 0;
              _context35.next = 3;
              return this.sendCommand(t.ChameleonCommand.GET_ID_POLLING_ENABLED);
            case 3:
              _e14 = _context35.sent;
              return _context35.abrupt("return", !!(_e14.data && _e14.data.length > 0) && 1 === _e14.data[0]);
            case 7:
              _context35.prev = 7;
              _context35.t0 = _context35["catch"](0);
              return _context35.abrupt("return", (console.error("[Bluetooth] 获取ID轮询状态失败", _context35.t0), !1));
            case 10:
            case "end":
              return _context35.stop();
          }
        }, _callee35, this, [[0, 7]]);
      }));
      function getIDPolling() {
        return _getIDPolling.apply(this, arguments);
      }
      return getIDPolling;
    }()
  }, {
    key: "setAutoPollingDelay",
    value: function () {
      var _setAutoPollingDelay = _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee36(e) {
        var o;
        return _regeneratorRuntime2().wrap(function _callee36$(_context36) {
          while (1) switch (_context36.prev = _context36.next) {
            case 0:
              _context36.prev = 0;
              console.log("[Bluetooth] 设置轮询延迟:", e + "ms");
              o = new Uint8Array(2);
              o[0] = e >> 8 & 255;
              o[1] = 255 & e;
              _context36.next = 7;
              return this.sendCommand(t.ChameleonCommand.SET_DEVICE_AUTO_POLLING_DELAY, o);
            case 7:
              console.log("[Bluetooth] 轮询延迟设置成功");
              return _context36.abrupt("return", !0);
            case 11:
              _context36.prev = 11;
              _context36.t0 = _context36["catch"](0);
              throw console.error("[Bluetooth] 设置轮询延迟失败", _context36.t0), _context36.t0;
            case 14:
            case "end":
              return _context36.stop();
          }
        }, _callee36, this, [[0, 11]]);
      }));
      function setAutoPollingDelay(_x19) {
        return _setAutoPollingDelay.apply(this, arguments);
      }
      return setAutoPollingDelay;
    }()
  }, {
    key: "getAutoPollingDelay",
    value: function () {
      var _getAutoPollingDelay = _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee37() {
        var _e15, _t10;
        return _regeneratorRuntime2().wrap(function _callee37$(_context37) {
          while (1) switch (_context37.prev = _context37.next) {
            case 0:
              _context37.prev = 0;
              _context37.next = 3;
              return this.sendCommand(t.ChameleonCommand.GET_DEVICE_AUTO_POLLING_DELAY);
            case 3:
              _e15 = _context37.sent;
              if (!(_e15.data && _e15.data.length >= 2)) {
                _context37.next = 7;
                break;
              }
              _t10 = _e15.data[0] << 8 | _e15.data[1];
              return _context37.abrupt("return", (console.log("[Bluetooth] 获取轮询延迟:", _t10 + "ms"), _t10));
            case 7:
              return _context37.abrupt("return", 350);
            case 10:
              _context37.prev = 10;
              _context37.t0 = _context37["catch"](0);
              return _context37.abrupt("return", (console.error("[Bluetooth] 获取轮询延迟失败", _context37.t0), 350));
            case 13:
            case "end":
              return _context37.stop();
          }
        }, _callee37, this, [[0, 10]]);
      }));
      function getAutoPollingDelay() {
        return _getAutoPollingDelay.apply(this, arguments);
      }
      return getAutoPollingDelay;
    }()
  }, {
    key: "saveDeviceSettings",
    value: function () {
      var _saveDeviceSettings = _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee38() {
        return _regeneratorRuntime2().wrap(function _callee38$(_context38) {
          while (1) switch (_context38.prev = _context38.next) {
            case 0:
              _context38.prev = 0;
              console.log("[Bluetooth] 保存设备设置...");
              _context38.next = 4;
              return this.sendCommand(t.ChameleonCommand.SAVE_SETTINGS);
            case 4:
              console.log("[Bluetooth] 设备设置保存成功");
              return _context38.abrupt("return", !0);
            case 8:
              _context38.prev = 8;
              _context38.t0 = _context38["catch"](0);
              throw console.error("[Bluetooth] 保存设备设置失败", _context38.t0), _context38.t0;
            case 11:
            case "end":
              return _context38.stop();
          }
        }, _callee38, this, [[0, 8]]);
      }));
      function saveDeviceSettings() {
        return _saveDeviceSettings.apply(this, arguments);
      }
      return saveDeviceSettings;
    }()
  }, {
    key: "getCompatible8Slots",
    value: function () {
      var _getCompatible8Slots = _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee39() {
        var _e16, _t11;
        return _regeneratorRuntime2().wrap(function _callee39$(_context39) {
          while (1) switch (_context39.prev = _context39.next) {
            case 0:
              _context39.prev = 0;
              console.log("[Bluetooth] 获取兼容8卡槽状态...");
              _context39.next = 4;
              return this.sendCommand(t.ChameleonCommand.GET_COMPATIBLE_8_SLOTS);
            case 4:
              _e16 = _context39.sent;
              if (!(_e16.data && _e16.data.length > 0)) {
                _context39.next = 8;
                break;
              }
              _t11 = 1 === _e16.data[0];
              return _context39.abrupt("return", (console.log("[Bluetooth] 兼容8卡槽状态:", _t11 ? "启用" : "禁用"), _t11));
            case 8:
              return _context39.abrupt("return", !1);
            case 11:
              _context39.prev = 11;
              _context39.t0 = _context39["catch"](0);
              return _context39.abrupt("return", (console.error("[Bluetooth] 获取兼容8卡槽状态失败", _context39.t0), !1));
            case 14:
            case "end":
              return _context39.stop();
          }
        }, _callee39, this, [[0, 11]]);
      }));
      function getCompatible8Slots() {
        return _getCompatible8Slots.apply(this, arguments);
      }
      return getCompatible8Slots;
    }()
  }, {
    key: "setCompatible8Slots",
    value: function () {
      var _setCompatible8Slots = _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee40(e) {
        var o;
        return _regeneratorRuntime2().wrap(function _callee40$(_context40) {
          while (1) switch (_context40.prev = _context40.next) {
            case 0:
              _context40.prev = 0;
              console.log("[Bluetooth] 设置兼容8卡槽状态:", e ? "启用" : "禁用");
              o = new Uint8Array([e ? 1 : 0]);
              _context40.next = 5;
              return this.sendCommand(t.ChameleonCommand.SET_COMPATIBLE_8_SLOTS, o);
            case 5:
              console.log("[Bluetooth] 兼容8卡槽状态设置成功");
              return _context40.abrupt("return", !0);
            case 9:
              _context40.prev = 9;
              _context40.t0 = _context40["catch"](0);
              throw console.error("[Bluetooth] 设置兼容8卡槽状态失败", _context40.t0), _context40.t0;
            case 12:
            case "end":
              return _context40.stop();
          }
        }, _callee40, this, [[0, 9]]);
      }));
      function setCompatible8Slots(_x20) {
        return _setCompatible8Slots.apply(this, arguments);
      }
      return setCompatible8Slots;
    }()
  }, {
    key: "setBLEConnectKey",
    value: function () {
      var _setBLEConnectKey = _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee41(e) {
        var o;
        return _regeneratorRuntime2().wrap(function _callee41$(_context41) {
          while (1) switch (_context41.prev = _context41.next) {
            case 0:
              _context41.prev = 0;
              console.log("[Bluetooth] 设置BLE连接密钥...");
              o = this.stringToArrayBuffer(e);
              _context41.next = 5;
              return this.sendCommand(t.ChameleonCommand.BLE_SET_CONNECT_KEY, Array.from(new Uint8Array(o)));
            case 5:
              console.log("[Bluetooth] BLE连接密钥设置成功");
              return _context41.abrupt("return", !0);
            case 9:
              _context41.prev = 9;
              _context41.t0 = _context41["catch"](0);
              throw console.error("[Bluetooth] 设置BLE连接密钥失败", _context41.t0), _context41.t0;
            case 12:
            case "end":
              return _context41.stop();
          }
        }, _callee41, this, [[0, 9]]);
      }));
      function setBLEConnectKey(_x21) {
        return _setBLEConnectKey.apply(this, arguments);
      }
      return setBLEConnectKey;
    }()
  }, {
    key: "getBLEConnectKey",
    value: function () {
      var _getBLEConnectKey = _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee42() {
        var _e17, _t12;
        return _regeneratorRuntime2().wrap(function _callee42$(_context42) {
          while (1) switch (_context42.prev = _context42.next) {
            case 0:
              _context42.prev = 0;
              console.log("[Bluetooth] 获取BLE连接密钥...");
              _context42.next = 4;
              return this.sendCommand(t.ChameleonCommand.BLE_GET_CONNECT_KEY);
            case 4:
              _e17 = _context42.sent;
              if (!_e17.data) {
                _context42.next = 8;
                break;
              }
              _t12 = this.arrayBufferToString(_e17.data.buffer);
              return _context42.abrupt("return", (console.log("[Bluetooth] BLE连接密钥获取成功"), _t12));
            case 8:
              return _context42.abrupt("return", "");
            case 11:
              _context42.prev = 11;
              _context42.t0 = _context42["catch"](0);
              return _context42.abrupt("return", (console.error("[Bluetooth] 获取BLE连接密钥失败", _context42.t0), ""));
            case 14:
            case "end":
              return _context42.stop();
          }
        }, _callee42, this, [[0, 11]]);
      }));
      function getBLEConnectKey() {
        return _getBLEConnectKey.apply(this, arguments);
      }
      return getBLEConnectKey;
    }()
  }, {
    key: "setActiveSlot",
    value: function () {
      var _setActiveSlot = _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee43(e) {
        var o, _t13;
        return _regeneratorRuntime2().wrap(function _callee43$(_context43) {
          while (1) switch (_context43.prev = _context43.next) {
            case 0:
              if (this.isConnected) {
                _context43.next = 2;
                break;
              }
              throw new Error("设备未连接");
            case 2:
              if (!(e < 0 || e > 15)) {
                _context43.next = 4;
                break;
              }
              throw new Error("无效的卡槽编号");
            case 4:
              _context43.prev = 4;
              console.log("[\u84DD\u7259\u670D\u52A1] \u8BBE\u7F6E\u6D3B\u52A8\u5361\u69FD: ".concat(e, " (UI\u663E\u793A: \u5361\u69FD").concat(e + 1, ")"));
              _context43.next = 8;
              return this.sendCommand(t.ChameleonCommand.SET_ACTIVE_SLOT, new Uint8Array([e]));
            case 8:
              o = _context43.sent;
              if (!o.success) {
                _context43.next = 17;
                break;
              }
              console.log("[\u84DD\u7259\u670D\u52A1] \u6210\u529F\u8BBE\u7F6E\u6D3B\u52A8\u5361\u69FD\u4E3A ".concat(e, " (UI\u663E\u793A: \u5361\u69FD").concat(e + 1, ")"));
              _context43.next = 13;
              return this.getActiveSlot();
            case 13:
              _t13 = _context43.sent;
              if (!(_t13 !== e)) {
                _context43.next = 16;
                break;
              }
              throw new Error("\u5361\u69FD\u5207\u6362\u5931\u8D25\uFF0C\u5F53\u524D\u5361\u69FD: ".concat(_t13, ", \u671F\u671B: ").concat(e));
            case 16:
              return _context43.abrupt("return", o);
            case 17:
              throw new Error("\u8BBE\u7F6E\u6D3B\u52A8\u5361\u69FD\u5931\u8D25: ".concat(o.error || "未知错误"));
            case 20:
              _context43.prev = 20;
              _context43.t0 = _context43["catch"](4);
              throw console.error("[蓝牙服务] 设置活动卡槽失败:", _context43.t0), _context43.t0;
            case 23:
            case "end":
              return _context43.stop();
          }
        }, _callee43, this, [[4, 20]]);
      }));
      function setActiveSlot(_x22) {
        return _setActiveSlot.apply(this, arguments);
      }
      return setActiveSlot;
    }()
  }, {
    key: "getActiveSlot",
    value: function () {
      var _getActiveSlot = _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee44() {
        var _e18, _t14;
        return _regeneratorRuntime2().wrap(function _callee44$(_context44) {
          while (1) switch (_context44.prev = _context44.next) {
            case 0:
              if (this.isConnected) {
                _context44.next = 2;
                break;
              }
              throw new Error("设备未连接");
            case 2:
              _context44.prev = 2;
              console.log("[蓝牙服务] 获取当前活动卡槽");
              _context44.next = 6;
              return this.sendCommand(t.ChameleonCommand.GET_ACTIVE_SLOT);
            case 6:
              _e18 = _context44.sent;
              if (!(_e18.success && _e18.data && _e18.data.length > 0)) {
                _context44.next = 10;
                break;
              }
              _t14 = _e18.data[0];
              return _context44.abrupt("return", (console.log("[\u84DD\u7259\u670D\u52A1] \u5F53\u524D\u6D3B\u52A8\u5361\u69FD: ".concat(_t14)), _t14));
            case 10:
              throw new Error("获取活动卡槽失败");
            case 13:
              _context44.prev = 13;
              _context44.t0 = _context44["catch"](2);
              throw console.error("[蓝牙服务] 获取活动卡槽失败:", _context44.t0), _context44.t0;
            case 16:
            case "end":
              return _context44.stop();
          }
        }, _callee44, this, [[2, 13]]);
      }));
      function getActiveSlot() {
        return _getActiveSlot.apply(this, arguments);
      }
      return getActiveSlot;
    }()
  }, {
    key: "getSlotInfo",
    value: function () {
      var _getSlotInfo = _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee45() {
        var _e19, _t15, o, _r8, _n7, _s4;
        return _regeneratorRuntime2().wrap(function _callee45$(_context45) {
          while (1) switch (_context45.prev = _context45.next) {
            case 0:
              if (this.isConnected) {
                _context45.next = 2;
                break;
              }
              throw new Error("设备未连接");
            case 2:
              _context45.prev = 2;
              console.log("[蓝牙服务] 获取卡槽信息");
              _context45.next = 6;
              return this.sendCommand(t.ChameleonCommand.GET_SLOT_INFO);
            case 6:
              _e19 = _context45.sent;
              if (!(_e19.success && _e19.data)) {
                _context45.next = 12;
                break;
              }
              _t15 = [];
              o = 0;
              for (_r8 = 0; _r8 < 16; _r8++) {
                _n7 = this.bytesToU16(_e19.data.slice(o, o + 2)), _s4 = this.bytesToU16(_e19.data.slice(o + 2, o + 4));
                _t15.push({
                  id: _r8,
                  hfType: _n7,
                  lfType: _s4,
                  hfTagType: this.numberToChameleonTag(_n7),
                  lfTagType: this.numberToChameleonTag(_s4)
                }), o += 4;
              }
              return _context45.abrupt("return", (console.log("[\u84DD\u7259\u670D\u52A1] \u83B7\u53D6\u5230 ".concat(_t15.length, " \u4E2A\u5361\u69FD\u4FE1\u606F")), _t15));
            case 12:
              throw new Error("获取卡槽信息失败");
            case 15:
              _context45.prev = 15;
              _context45.t0 = _context45["catch"](2);
              throw console.error("[蓝牙服务] 获取卡槽信息失败:", _context45.t0), _context45.t0;
            case 18:
            case "end":
              return _context45.stop();
          }
        }, _callee45, this, [[2, 15]]);
      }));
      function getSlotInfo() {
        return _getSlotInfo.apply(this, arguments);
      }
      return getSlotInfo;
    }()
  }, {
    key: "getEnabledSlots",
    value: function () {
      var _getEnabledSlots = _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee46() {
        var _e20, _t16, o, _r9, _n8;
        return _regeneratorRuntime2().wrap(function _callee46$(_context46) {
          while (1) switch (_context46.prev = _context46.next) {
            case 0:
              if (this.isConnected) {
                _context46.next = 2;
                break;
              }
              throw new Error("设备未连接");
            case 2:
              _context46.prev = 2;
              console.log("[蓝牙服务] 获取卡槽启用状态");
              _context46.next = 6;
              return this.sendCommand(t.ChameleonCommand.GET_ENABLED_SLOTS);
            case 6:
              _e20 = _context46.sent;
              if (!(_e20.success && _e20.data)) {
                _context46.next = 11;
                break;
              }
              _t16 = [];
              for (o = 0; o < 16; o++) {
                _r9 = 1 === _e20.data[2 * o], _n8 = 1 === _e20.data[2 * o + 1];
                _t16.push({
                  id: o,
                  hf: _r9,
                  lf: _n8,
                  any: _r9 || _n8
                });
              }
              return _context46.abrupt("return", (console.log("[\u84DD\u7259\u670D\u52A1] \u83B7\u53D6\u5230 ".concat(_t16.length, " \u4E2A\u5361\u69FD\u542F\u7528\u72B6\u6001")), _t16));
            case 11:
              throw new Error("获取卡槽启用状态失败");
            case 14:
              _context46.prev = 14;
              _context46.t0 = _context46["catch"](2);
              throw console.error("[蓝牙服务] 获取卡槽启用状态失败:", _context46.t0), _context46.t0;
            case 17:
            case "end":
              return _context46.stop();
          }
        }, _callee46, this, [[2, 14]]);
      }));
      function getEnabledSlots() {
        return _getEnabledSlots.apply(this, arguments);
      }
      return getEnabledSlots;
    }()
  }, {
    key: "getSlotTagName",
    value: function () {
      var _getSlotTagName = _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee47(e, o) {
        var _r10, _t17;
        return _regeneratorRuntime2().wrap(function _callee47$(_context47) {
          while (1) switch (_context47.prev = _context47.next) {
            case 0:
              if (this.isConnected) {
                _context47.next = 2;
                break;
              }
              throw new Error("设备未连接");
            case 2:
              if (!(e < 0 || e > 15)) {
                _context47.next = 4;
                break;
              }
              throw new Error("无效的卡槽编号");
            case 4:
              _context47.prev = 4;
              console.log("[\u84DD\u7259\u670D\u52A1] \u83B7\u53D6\u5361\u69FD ".concat(e, " \u540D\u79F0 (\u9891\u7387: ").concat(o, ")"));
              _context47.next = 8;
              return this.sendCommand(t.ChameleonCommand.GET_SLOT_TAG_NICK, new Uint8Array([e, o]));
            case 8:
              _r10 = _context47.sent;
              if (!(_r10.success && _r10.data)) {
                _context47.next = 12;
                break;
              }
              _t17 = this.decodeUTF8(_r10.data);
              return _context47.abrupt("return", (console.log("[\u84DD\u7259\u670D\u52A1] \u5361\u69FD ".concat(e, " \u540D\u79F0: ").concat(_t17)), _t17.trim()));
            case 12:
              throw new Error("获取卡槽名称失败");
            case 15:
              _context47.prev = 15;
              _context47.t0 = _context47["catch"](4);
              return _context47.abrupt("return", (console.error("[蓝牙服务] 获取卡槽名称失败:", _context47.t0), ""));
            case 18:
            case "end":
              return _context47.stop();
          }
        }, _callee47, this, [[4, 15]]);
      }));
      function getSlotTagName(_x23, _x24) {
        return _getSlotTagName.apply(this, arguments);
      }
      return getSlotTagName;
    }()
  }, {
    key: "setSlotTagName",
    value: function () {
      var _setSlotTagName = _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee48(e, o, r) {
        var _n9, _s5, _a2, i;
        return _regeneratorRuntime2().wrap(function _callee48$(_context48) {
          while (1) switch (_context48.prev = _context48.next) {
            case 0:
              if (this.isConnected) {
                _context48.next = 2;
                break;
              }
              throw new Error("设备未连接");
            case 2:
              if (!(e < 0 || e > 15)) {
                _context48.next = 4;
                break;
              }
              throw new Error("无效的卡槽编号");
            case 4:
              _context48.prev = 4;
              console.log("[\u84DD\u7259\u670D\u52A1] \u8BBE\u7F6E\u5361\u69FD ".concat(e, " \u540D\u79F0: ").concat(r, " (\u9891\u7387: ").concat(o, ")"));
              _n9 = this.encodeUTF8(r);
              if (!(_n9.length > 32)) {
                _context48.next = 9;
                break;
              }
              throw new Error("\u5361\u7247\u540D\u79F0\u8FC7\u957F\uFF0CUTF-8\u7F16\u7801\u540E\u8D85\u8FC732\u5B57\u8282 (\u5F53\u524D: ".concat(_n9.length, "\u5B57\u8282)"));
            case 9:
              if (!("hf" === o || o === t.TagFrequency.HF)) {
                _context48.next = 13;
                break;
              }
              _s5 = t.TagFrequency.HF;
              _context48.next = 16;
              break;
            case 13:
              if (!("lf" !== o && o !== t.TagFrequency.LF)) {
                _context48.next = 15;
                break;
              }
              throw new Error('无效的频率类型，必须是"hf"或"lf"');
            case 15:
              _s5 = t.TagFrequency.LF;
            case 16:
              _a2 = new Uint8Array(2 + _n9.length);
              _a2[0] = e, _a2[1] = _s5, _a2.set(_n9, 2);
              _context48.next = 20;
              return this.sendCommand(t.ChameleonCommand.SET_SLOT_TAG_NICK, _a2);
            case 20:
              i = _context48.sent;
              if (!i.success) {
                _context48.next = 23;
                break;
              }
              return _context48.abrupt("return", (console.log("[\u84DD\u7259\u670D\u52A1] \u6210\u529F\u8BBE\u7F6E\u5361\u69FD ".concat(e, " \u540D\u79F0")), i));
            case 23:
              throw new Error("\u8BBE\u7F6E\u5361\u69FD\u540D\u79F0\u5931\u8D25: ".concat(i.error || "未知错误"));
            case 26:
              _context48.prev = 26;
              _context48.t0 = _context48["catch"](4);
              throw console.error("[蓝牙服务] 设置卡槽名称失败:", _context48.t0), _context48.t0;
            case 29:
            case "end":
              return _context48.stop();
          }
        }, _callee48, this, [[4, 26]]);
      }));
      function setSlotTagName(_x25, _x26, _x27) {
        return _setSlotTagName.apply(this, arguments);
      }
      return setSlotTagName;
    }()
  }, {
    key: "encodeUTF8",
    value: function encodeUTF8(e) {
      var t = [];
      for (var o = 0; o < e.length; o++) {
        var _r11 = e.charCodeAt(o);
        _r11 < 128 ? t.push(_r11) : _r11 < 2048 ? t.push(192 | _r11 >> 6, 128 | 63 & _r11) : t.push(224 | _r11 >> 12, 128 | _r11 >> 6 & 63, 128 | 63 & _r11);
      }
      return new Uint8Array(t);
    }
  }, {
    key: "decodeUTF8",
    value: function decodeUTF8(e) {
      var t = "",
        o = 0;
      for (; o < e.length;) {
        var _r12 = e[o];
        _r12 < 128 ? (t += String.fromCharCode(_r12), o++) : _r12 > 191 && _r12 < 224 ? (t += String.fromCharCode((31 & _r12) << 6 | 63 & e[o + 1]), o += 2) : (t += String.fromCharCode((15 & _r12) << 12 | (63 & e[o + 1]) << 6 | 63 & e[o + 2]), o += 3);
      }
      return t;
    }
  }, {
    key: "bytesToU16",
    value: function bytesToU16(e) {
      return e.length < 2 ? 0 : e[0] << 8 | e[1];
    }
  }, {
    key: "u16ToBytes",
    value: function u16ToBytes(e) {
      return [e >> 8 & 255, 255 & e];
    }
  }, {
    key: "send14ARaw",
    value: function () {
      var _send14ARaw = _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee49(e) {
        var o,
          _o$respTimeoutMs,
          r,
          _o$bitLen,
          n,
          _o$activateRfField,
          s,
          _o$waitResponse,
          a,
          _o$appendCrc,
          i,
          _o$autoSelect,
          c,
          _o$keepRfField,
          l,
          _o$checkResponseCrc,
          h,
          u,
          d,
          m,
          C,
          _args49 = arguments;
        return _regeneratorRuntime2().wrap(function _callee49$(_context49) {
          while (1) switch (_context49.prev = _context49.next) {
            case 0:
              o = _args49.length > 1 && _args49[1] !== undefined ? _args49[1] : {};
              _o$respTimeoutMs = o.respTimeoutMs, r = _o$respTimeoutMs === void 0 ? 100 : _o$respTimeoutMs, _o$bitLen = o.bitLen, n = _o$bitLen === void 0 ? null : _o$bitLen, _o$activateRfField = o.activateRfField, s = _o$activateRfField === void 0 ? !0 : _o$activateRfField, _o$waitResponse = o.waitResponse, a = _o$waitResponse === void 0 ? !0 : _o$waitResponse, _o$appendCrc = o.appendCrc, i = _o$appendCrc === void 0 ? !0 : _o$appendCrc, _o$autoSelect = o.autoSelect, c = _o$autoSelect === void 0 ? !0 : _o$autoSelect, _o$keepRfField = o.keepRfField, l = _o$keepRfField === void 0 ? !1 : _o$keepRfField, _o$checkResponseCrc = o.checkResponseCrc, h = _o$checkResponseCrc === void 0 ? !0 : _o$checkResponseCrc, u = null !== n ? n : 8 * e.length;
              d = 0;
              s && (d += 128), a && (d += 64), i && (d += 32), c && (d += 16), l && (d += 8), h && (d += 4);
              m = [d].concat(_toConsumableArray2(this.u16ToBytes(r)), _toConsumableArray2(this.u16ToBytes(u)), _toConsumableArray2(e));
              console.log("[Bluetooth] \u53D1\u900114A\u539F\u59CB\u547D\u4EE4\uFF0C\u6570\u636E: [".concat(e.join(", "), "], \u9009\u9879: 0x").concat(d.toString(16)));
              _context49.next = 8;
              return this.sendCommand(t.ChameleonCommand.HF14A_RAW_COMMAND, m, r + 1e3);
            case 8:
              C = _context49.sent;
              if (!C.success) {
                _context49.next = 11;
                break;
              }
              return _context49.abrupt("return", C.data);
            case 11:
              throw new Error(C.error || "14A原始命令执行失败");
            case 12:
            case "end":
              return _context49.stop();
          }
        }, _callee49, this);
      }));
      function send14ARaw(_x28) {
        return _send14ARaw.apply(this, arguments);
      }
      return send14ARaw;
    }()
  }, {
    key: "numberToChameleonTag",
    value: function numberToChameleonTag(e) {
      switch (e) {
        case 0:
        default:
          return "UNKNOWN";
        case 100:
          return "EM410X";
        case 1e3:
          return "MIFARE_Mini";
        case 1001:
          return "MIFARE_1024";
        case 1002:
          return "MIFARE_2048";
        case 1003:
          return "MIFARE_4096";
        case 1100:
          return "NTAG_213";
        case 1101:
          return "NTAG_215";
        case 1102:
          return "NTAG_216";
        case 1103:
          return "MIFARE_Ultralight";
        case 1104:
          return "MIFARE_Ultralight_C";
        case 1105:
          return "MIFARE_Ultralight_EV1_80B";
        case 1106:
          return "MIFARE_Ultralight_EV1_164B";
        case 1107:
          return "NTAG_210";
        case 1108:
          return "NTAG_212";
      }
    }
  }, {
    key: "activateSlot",
    value: function () {
      var _activateSlot = _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee50(e) {
        var o;
        return _regeneratorRuntime2().wrap(function _callee50$(_context50) {
          while (1) switch (_context50.prev = _context50.next) {
            case 0:
              if (this.isConnected) {
                _context50.next = 2;
                break;
              }
              throw new Error("设备未连接");
            case 2:
              _context50.prev = 2;
              _context50.next = 5;
              return this.sendCommand(t.ChameleonCommand.SET_ACTIVE_SLOT, [e]);
            case 5:
              o = _context50.sent;
              return _context50.abrupt("return", (console.log("[\u84DD\u7259\u670D\u52A1] \u6FC0\u6D3B\u5361\u69FD: ".concat(e)), o));
            case 9:
              _context50.prev = 9;
              _context50.t0 = _context50["catch"](2);
              throw console.error("[蓝牙服务] 激活卡槽失败:", _context50.t0), _context50.t0;
            case 12:
            case "end":
              return _context50.stop();
          }
        }, _callee50, this, [[2, 9]]);
      }));
      function activateSlot(_x29) {
        return _activateSlot.apply(this, arguments);
      }
      return activateSlot;
    }()
  }, {
    key: "enableSlot",
    value: function () {
      var _enableSlot = _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee51(e, o, r) {
        var _n10, _s6, _a3;
        return _regeneratorRuntime2().wrap(function _callee51$(_context51) {
          while (1) switch (_context51.prev = _context51.next) {
            case 0:
              if (this.isConnected) {
                _context51.next = 2;
                break;
              }
              throw new Error("设备未连接");
            case 2:
              _context51.prev = 2;
              _n10 = "hf" === o ? 2 : 1;
              _s6 = r ? 1 : 0;
              _context51.next = 7;
              return this.sendCommand(t.ChameleonCommand.SET_SLOT_ENABLE, [e, _n10, _s6]);
            case 7:
              _a3 = _context51.sent;
              return _context51.abrupt("return", (console.log("[\u84DD\u7259\u670D\u52A1] \u8BBE\u7F6E\u5361\u69FD".concat(e, " ").concat(o, "\u9891\u7387\u542F\u7528\u72B6\u6001: ").concat(r)), _a3));
            case 11:
              _context51.prev = 11;
              _context51.t0 = _context51["catch"](2);
              throw console.error("[蓝牙服务] 设置卡槽启用状态失败:", _context51.t0), _context51.t0;
            case 14:
            case "end":
              return _context51.stop();
          }
        }, _callee51, this, [[2, 11]]);
      }));
      function enableSlot(_x30, _x31, _x32) {
        return _enableSlot.apply(this, arguments);
      }
      return enableSlot;
    }()
  }, {
    key: "setSlotType",
    value: function () {
      var _setSlotType = _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee52(e, o) {
        var _r13, _n11;
        return _regeneratorRuntime2().wrap(function _callee52$(_context52) {
          while (1) switch (_context52.prev = _context52.next) {
            case 0:
              if (this.isConnected) {
                _context52.next = 2;
                break;
              }
              throw new Error("设备未连接");
            case 2:
              _context52.prev = 2;
              _r13 = this.u16ToBytes(o);
              _context52.next = 6;
              return this.sendCommand(t.ChameleonCommand.SET_SLOT_TAG_TYPE, [e].concat(_toConsumableArray2(_r13)));
            case 6:
              _n11 = _context52.sent;
              return _context52.abrupt("return", (console.log("[\u84DD\u7259\u670D\u52A1] \u8BBE\u7F6E\u5361\u69FD".concat(e, "\u6807\u7B7E\u7C7B\u578B: ").concat(o)), _n11));
            case 10:
              _context52.prev = 10;
              _context52.t0 = _context52["catch"](2);
              throw console.error("[蓝牙服务] 设置卡槽标签类型失败:", _context52.t0), _context52.t0;
            case 13:
            case "end":
              return _context52.stop();
          }
        }, _callee52, this, [[2, 10]]);
      }));
      function setSlotType(_x33, _x34) {
        return _setSlotType.apply(this, arguments);
      }
      return setSlotType;
    }()
  }, {
    key: "setDefaultDataToSlot",
    value: function () {
      var _setDefaultDataToSlot = _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee53(e, o) {
        var _r14, _n12;
        return _regeneratorRuntime2().wrap(function _callee53$(_context53) {
          while (1) switch (_context53.prev = _context53.next) {
            case 0:
              if (this.isConnected) {
                _context53.next = 2;
                break;
              }
              throw new Error("设备未连接");
            case 2:
              _context53.prev = 2;
              _r14 = this.u16ToBytes(o);
              _context53.next = 6;
              return this.sendCommand(t.ChameleonCommand.SET_SLOT_DATA_DEFAULT, [e].concat(_toConsumableArray2(_r14)));
            case 6:
              _n12 = _context53.sent;
              return _context53.abrupt("return", (console.log("[\u84DD\u7259\u670D\u52A1] \u8BBE\u7F6E\u5361\u69FD".concat(e, "\u9ED8\u8BA4\u6570\u636E\uFF0C\u6807\u7B7E\u7C7B\u578B: ").concat(o)), _n12));
            case 10:
              _context53.prev = 10;
              _context53.t0 = _context53["catch"](2);
              throw console.error("[蓝牙服务] 设置卡槽默认数据失败:", _context53.t0), _context53.t0;
            case 13:
            case "end":
              return _context53.stop();
          }
        }, _callee53, this, [[2, 10]]);
      }));
      function setDefaultDataToSlot(_x35, _x36) {
        return _setDefaultDataToSlot.apply(this, arguments);
      }
      return setDefaultDataToSlot;
    }()
  }, {
    key: "setSlotDataDefault",
    value: function () {
      var _setSlotDataDefault = _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee54(e, t) {
        return _regeneratorRuntime2().wrap(function _callee54$(_context54) {
          while (1) switch (_context54.prev = _context54.next) {
            case 0:
              return _context54.abrupt("return", this.setDefaultDataToSlot(e, t));
            case 1:
            case "end":
              return _context54.stop();
          }
        }, _callee54, this);
      }));
      function setSlotDataDefault(_x37, _x38) {
        return _setSlotDataDefault.apply(this, arguments);
      }
      return setSlotDataDefault;
    }()
  }, {
    key: "saveSlotData",
    value: function () {
      var _saveSlotData = _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee55() {
        var _e21;
        return _regeneratorRuntime2().wrap(function _callee55$(_context55) {
          while (1) switch (_context55.prev = _context55.next) {
            case 0:
              if (this.isConnected) {
                _context55.next = 2;
                break;
              }
              throw new Error("设备未连接");
            case 2:
              _context55.prev = 2;
              _context55.next = 5;
              return this.sendCommand(t.ChameleonCommand.SAVE_SLOT_NICKS, []);
            case 5:
              _e21 = _context55.sent;
              return _context55.abrupt("return", (console.log("[蓝牙服务] 保存卡槽数据成功"), _e21));
            case 9:
              _context55.prev = 9;
              _context55.t0 = _context55["catch"](2);
              throw console.error("[蓝牙服务] 保存卡槽数据失败:", _context55.t0), _context55.t0;
            case 12:
            case "end":
              return _context55.stop();
          }
        }, _callee55, this, [[2, 9]]);
      }));
      function saveSlotData() {
        return _saveSlotData.apply(this, arguments);
      }
      return saveSlotData;
    }()
  }, {
    key: "deleteSlotInfo",
    value: function () {
      var _deleteSlotInfo = _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee56(e, o) {
        var _r15;
        return _regeneratorRuntime2().wrap(function _callee56$(_context56) {
          while (1) switch (_context56.prev = _context56.next) {
            case 0:
              if (this.isConnected) {
                _context56.next = 2;
                break;
              }
              throw new Error("设备未连接");
            case 2:
              _context56.prev = 2;
              _context56.next = 5;
              return this.sendCommand(t.ChameleonCommand.DELETE_SLOT_INFO, [e, o]);
            case 5:
              _r15 = _context56.sent;
              return _context56.abrupt("return", (console.log("[\u84DD\u7259\u670D\u52A1] \u5220\u9664\u5361\u69FD".concat(e, " \u9891\u7387").concat(o, "\u4FE1\u606F\u6210\u529F")), _r15));
            case 9:
              _context56.prev = 9;
              _context56.t0 = _context56["catch"](2);
              throw console.error("[蓝牙服务] 删除卡槽信息失败:", _context56.t0), _context56.t0;
            case 12:
            case "end":
              return _context56.stop();
          }
        }, _callee56, this, [[2, 9]]);
      }));
      function deleteSlotInfo(_x39, _x40) {
        return _deleteSlotInfo.apply(this, arguments);
      }
      return deleteSlotInfo;
    }()
  }, {
    key: "clearSlot",
    value: function () {
      var _clearSlot = _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee57(e) {
        return _regeneratorRuntime2().wrap(function _callee57$(_context57) {
          while (1) switch (_context57.prev = _context57.next) {
            case 0:
              if (this.isConnected) {
                _context57.next = 2;
                break;
              }
              throw new Error("设备未连接");
            case 2:
              _context57.prev = 2;
              console.log("[\u84DD\u7259\u670D\u52A1] \u5F00\u59CB\u6E05\u7A7A\u5361\u69FD ".concat(e));
              _context57.prev = 4;
              _context57.next = 7;
              return this.deleteSlotInfo(e, t.TagFrequency.HF);
            case 7:
              console.log("[蓝牙服务] 删除HF频率信息成功");
              _context57.next = 13;
              break;
            case 10:
              _context57.prev = 10;
              _context57.t0 = _context57["catch"](4);
              console.warn("[蓝牙服务] 删除HF频率信息失败:", _context57.t0);
            case 13:
              _context57.prev = 13;
              _context57.next = 16;
              return this.deleteSlotInfo(e, t.TagFrequency.LF);
            case 16:
              console.log("[蓝牙服务] 删除LF频率信息成功");
              _context57.next = 22;
              break;
            case 19:
              _context57.prev = 19;
              _context57.t1 = _context57["catch"](13);
              console.warn("[蓝牙服务] 删除LF频率信息失败:", _context57.t1);
            case 22:
              _context57.prev = 22;
              _context57.next = 25;
              return this.setSlotTagName(e, t.TagFrequency.HF, "");
            case 25:
              console.log("[蓝牙服务] 清空HF频率名称成功");
              _context57.next = 31;
              break;
            case 28:
              _context57.prev = 28;
              _context57.t2 = _context57["catch"](22);
              console.warn("[蓝牙服务] 清空HF频率名称失败:", _context57.t2);
            case 31:
              _context57.prev = 31;
              _context57.next = 34;
              return this.setSlotTagName(e, t.TagFrequency.LF, "");
            case 34:
              console.log("[蓝牙服务] 清空LF频率名称成功");
              _context57.next = 40;
              break;
            case 37:
              _context57.prev = 37;
              _context57.t3 = _context57["catch"](31);
              console.warn("[蓝牙服务] 清空LF频率名称失败:", _context57.t3);
            case 40:
              _context57.next = 42;
              return this.saveSlotData();
            case 42:
              console.log("[\u84DD\u7259\u670D\u52A1] \u5361\u69FD ".concat(e, " \u6E05\u7A7A\u5B8C\u6210"));
              _context57.next = 48;
              break;
            case 45:
              _context57.prev = 45;
              _context57.t4 = _context57["catch"](2);
              throw console.error("[蓝牙服务] 清空卡槽失败:", _context57.t4), _context57.t4;
            case 48:
            case "end":
              return _context57.stop();
          }
        }, _callee57, this, [[2, 45], [4, 10], [13, 19], [22, 28], [31, 37]]);
      }));
      function clearSlot(_x41) {
        return _clearSlot.apply(this, arguments);
      }
      return clearSlot;
    }()
  }, {
    key: "enableSlotFrequency",
    value: function () {
      var _enableSlotFrequency = _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee58(e, o, r) {
        var _n13, _s7, _a4;
        return _regeneratorRuntime2().wrap(function _callee58$(_context58) {
          while (1) switch (_context58.prev = _context58.next) {
            case 0:
              if (this.isConnected) {
                _context58.next = 2;
                break;
              }
              throw new Error("设备未连接");
            case 2:
              _context58.prev = 2;
              _n13 = "hf" === o.toLowerCase() ? 2 : 1;
              _s7 = r ? 1 : 0;
              _context58.next = 7;
              return this.sendCommand(t.ChameleonCommand.SET_SLOT_ENABLE, [e, _n13, _s7]);
            case 7:
              _a4 = _context58.sent;
              if (_a4.success) {
                _context58.next = 10;
                break;
              }
              throw new Error("\u542F\u7528/\u7981\u7528\u5361\u69FD\u9891\u7387\u5931\u8D25: ".concat(_a4.error));
            case 10:
              return _context58.abrupt("return", (console.log("[BluetoothService] \u6210\u529F\u8BBE\u7F6E\u5361\u69FD".concat(e, "\u7684").concat(o, "\u9891\u7387\u542F\u7528\u72B6\u6001: ").concat(r)), _a4));
            case 13:
              _context58.prev = 13;
              _context58.t0 = _context58["catch"](2);
              throw console.error("[BluetoothService] \u542F\u7528/\u7981\u7528\u5361\u69FD".concat(e, "\u7684").concat(o, "\u9891\u7387\u5931\u8D25:"), _context58.t0), _context58.t0;
            case 16:
            case "end":
              return _context58.stop();
          }
        }, _callee58, this, [[2, 13]]);
      }));
      function enableSlotFrequency(_x42, _x43, _x44) {
        return _enableSlotFrequency.apply(this, arguments);
      }
      return enableSlotFrequency;
    }()
  }, {
    key: "getMifareGen1aMode",
    value: function () {
      var _getMifareGen1aMode = _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee59() {
        var _e22, _t18;
        return _regeneratorRuntime2().wrap(function _callee59$(_context59) {
          while (1) switch (_context59.prev = _context59.next) {
            case 0:
              if (this.isConnected) {
                _context59.next = 2;
                break;
              }
              throw new Error("设备未连接");
            case 2:
              _context59.prev = 2;
              _e22 = {
                cmd: "GET_MF1_GEN1A_MODE"
              };
              _context59.next = 6;
              return this.sendCommand(_e22);
            case 6:
              _t18 = _context59.sent;
              if (!("success" !== _t18.status)) {
                _context59.next = 9;
                break;
              }
              throw new Error("\u83B7\u53D6GEN1A\u6A21\u5F0F\u5931\u8D25: ".concat(_t18.error));
            case 9:
              return _context59.abrupt("return", _t18.data.enabled || !1);
            case 12:
              _context59.prev = 12;
              _context59.t0 = _context59["catch"](2);
              throw console.error("[BluetoothService] 获取GEN1A模式失败:", _context59.t0), _context59.t0;
            case 15:
            case "end":
              return _context59.stop();
          }
        }, _callee59, this, [[2, 12]]);
      }));
      function getMifareGen1aMode() {
        return _getMifareGen1aMode.apply(this, arguments);
      }
      return getMifareGen1aMode;
    }()
  }, {
    key: "setMifareGen1aMode",
    value: function () {
      var _setMifareGen1aMode = _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee60(e) {
        var _t19, o;
        return _regeneratorRuntime2().wrap(function _callee60$(_context60) {
          while (1) switch (_context60.prev = _context60.next) {
            case 0:
              if (this.isConnected) {
                _context60.next = 2;
                break;
              }
              throw new Error("设备未连接");
            case 2:
              _context60.prev = 2;
              _t19 = {
                cmd: "SET_MF1_GEN1A_MODE",
                data: {
                  enabled: e
                }
              };
              _context60.next = 6;
              return this.sendCommand(_t19);
            case 6:
              o = _context60.sent;
              if (!("success" !== o.status)) {
                _context60.next = 9;
                break;
              }
              throw new Error("\u8BBE\u7F6EGEN1A\u6A21\u5F0F\u5931\u8D25: ".concat(o.error));
            case 9:
              return _context60.abrupt("return", o.data);
            case 12:
              _context60.prev = 12;
              _context60.t0 = _context60["catch"](2);
              throw console.error("[BluetoothService] 设置GEN1A模式失败:", _context60.t0), _context60.t0;
            case 15:
            case "end":
              return _context60.stop();
          }
        }, _callee60, this, [[2, 12]]);
      }));
      function setMifareGen1aMode(_x45) {
        return _setMifareGen1aMode.apply(this, arguments);
      }
      return setMifareGen1aMode;
    }()
  }, {
    key: "getMifareGen2Mode",
    value: function () {
      var _getMifareGen2Mode = _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee61() {
        var _e23, _t20;
        return _regeneratorRuntime2().wrap(function _callee61$(_context61) {
          while (1) switch (_context61.prev = _context61.next) {
            case 0:
              if (this.isConnected) {
                _context61.next = 2;
                break;
              }
              throw new Error("设备未连接");
            case 2:
              _context61.prev = 2;
              _e23 = {
                cmd: "GET_MF1_GEN2_MODE"
              };
              _context61.next = 6;
              return this.sendCommand(_e23);
            case 6:
              _t20 = _context61.sent;
              if (!("success" !== _t20.status)) {
                _context61.next = 9;
                break;
              }
              throw new Error("\u83B7\u53D6GEN2\u6A21\u5F0F\u5931\u8D25: ".concat(_t20.error));
            case 9:
              return _context61.abrupt("return", _t20.data.enabled || !1);
            case 12:
              _context61.prev = 12;
              _context61.t0 = _context61["catch"](2);
              throw console.error("[BluetoothService] 获取GEN2模式失败:", _context61.t0), _context61.t0;
            case 15:
            case "end":
              return _context61.stop();
          }
        }, _callee61, this, [[2, 12]]);
      }));
      function getMifareGen2Mode() {
        return _getMifareGen2Mode.apply(this, arguments);
      }
      return getMifareGen2Mode;
    }()
  }, {
    key: "setMifareGen2Mode",
    value: function () {
      var _setMifareGen2Mode = _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee62(e) {
        var _t21, o;
        return _regeneratorRuntime2().wrap(function _callee62$(_context62) {
          while (1) switch (_context62.prev = _context62.next) {
            case 0:
              if (this.isConnected) {
                _context62.next = 2;
                break;
              }
              throw new Error("设备未连接");
            case 2:
              _context62.prev = 2;
              _t21 = {
                cmd: "SET_MF1_GEN2_MODE",
                data: {
                  enabled: e
                }
              };
              _context62.next = 6;
              return this.sendCommand(_t21);
            case 6:
              o = _context62.sent;
              if (!("success" !== o.status)) {
                _context62.next = 9;
                break;
              }
              throw new Error("\u8BBE\u7F6EGEN2\u6A21\u5F0F\u5931\u8D25: ".concat(o.error));
            case 9:
              return _context62.abrupt("return", o.data);
            case 12:
              _context62.prev = 12;
              _context62.t0 = _context62["catch"](2);
              throw console.error("[BluetoothService] 设置GEN2模式失败:", _context62.t0), _context62.t0;
            case 15:
            case "end":
              return _context62.stop();
          }
        }, _callee62, this, [[2, 12]]);
      }));
      function setMifareGen2Mode(_x46) {
        return _setMifareGen2Mode.apply(this, arguments);
      }
      return setMifareGen2Mode;
    }()
  }, {
    key: "getMifareEmulatorSettings",
    value: function () {
      var _getMifareEmulatorSettings = _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee63() {
        var _e24, o, _r16, _n14;
        return _regeneratorRuntime2().wrap(function _callee63$(_context63) {
          while (1) switch (_context63.prev = _context63.next) {
            case 0:
              if (this.isConnected) {
                _context63.next = 2;
                break;
              }
              throw new Error("设备未连接");
            case 2:
              _context63.prev = 2;
              console.log("[BluetoothService] 获取Mifare模拟器设置...");
              _context63.next = 6;
              return this.sendCommand(t.ChameleonCommand.MF1_GET_EMULATOR_CONFIG, []);
            case 6:
              _e24 = _context63.sent;
              if (_e24.success) {
                _context63.next = 9;
                break;
              }
              throw new Error("\u83B7\u53D6\u6A21\u62DF\u5668\u8BBE\u7F6E\u5931\u8D25: ".concat(_e24.error));
            case 9:
              o = _e24.data || [];
              if (!(o.length < 5)) {
                _context63.next = 12;
                break;
              }
              throw new Error("模拟器设置数据格式错误");
            case 12:
              _r16 = "normal";
              _context63.t0 = o[4];
              _context63.next = _context63.t0 === 1 ? 16 : _context63.t0 === 2 ? 18 : _context63.t0 === 3 ? 20 : _context63.t0 === 4 ? 20 : 22;
              break;
            case 16:
              _r16 = "denied";
              return _context63.abrupt("break", 23);
            case 18:
              _r16 = "deceive";
              return _context63.abrupt("break", 23);
            case 20:
              _r16 = "shadow";
              return _context63.abrupt("break", 23);
            case 22:
              _r16 = "normal";
            case 23:
              _n14 = {
                gen1aEnabled: 1 === o[1],
                gen2Enabled: 1 === o[2],
                antiCollEnabled: 1 === o[3],
                detectionEnabled: 1 === o[0],
                writeMode: _r16
              };
              return _context63.abrupt("return", (console.log("[BluetoothService] 获取到模拟器设置:", _n14), _n14));
            case 27:
              _context63.prev = 27;
              _context63.t1 = _context63["catch"](2);
              throw console.error("[BluetoothService] 获取模拟器设置失败:", _context63.t1), _context63.t1;
            case 30:
            case "end":
              return _context63.stop();
          }
        }, _callee63, this, [[2, 27]]);
      }));
      function getMifareEmulatorSettings() {
        return _getMifareEmulatorSettings.apply(this, arguments);
      }
      return getMifareEmulatorSettings;
    }()
  }, {
    key: "setMifareWriteMode",
    value: function () {
      var _setMifareWriteMode = _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee64(e) {
        var _t22, o;
        return _regeneratorRuntime2().wrap(function _callee64$(_context64) {
          while (1) switch (_context64.prev = _context64.next) {
            case 0:
              if (this.isConnected) {
                _context64.next = 2;
                break;
              }
              throw new Error("设备未连接");
            case 2:
              _context64.prev = 2;
              _t22 = {
                cmd: "SET_MF1_WRITE_MODE",
                data: {
                  mode: e
                }
              };
              _context64.next = 6;
              return this.sendCommand(_t22);
            case 6:
              o = _context64.sent;
              if (!("success" !== o.status)) {
                _context64.next = 9;
                break;
              }
              throw new Error("\u8BBE\u7F6E\u5199\u5165\u6A21\u5F0F\u5931\u8D25: ".concat(o.error));
            case 9:
              return _context64.abrupt("return", o.data);
            case 12:
              _context64.prev = 12;
              _context64.t0 = _context64["catch"](2);
              throw console.error("[BluetoothService] 设置写入模式失败:", _context64.t0), _context64.t0;
            case 15:
            case "end":
              return _context64.stop();
          }
        }, _callee64, this, [[2, 12]]);
      }));
      function setMifareWriteMode(_x47) {
        return _setMifareWriteMode.apply(this, arguments);
      }
      return setMifareWriteMode;
    }()
  }, {
    key: "getMf1AntiCollData",
    value: function () {
      var _getMf1AntiCollData = _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee65(e) {
        var o, _r17, _n15, _s8;
        return _regeneratorRuntime2().wrap(function _callee65$(_context65) {
          while (1) switch (_context65.prev = _context65.next) {
            case 0:
              if (this.isConnected) {
                _context65.next = 2;
                break;
              }
              throw new Error("设备未连接");
            case 2:
              _context65.prev = 2;
              _context65.next = 5;
              return this.setActiveSlot(e);
            case 5:
              _context65.next = 7;
              return this.sendCommand(t.ChameleonCommand.MF1_GET_ANTI_COLL_DATA, []);
            case 7:
              o = _context65.sent;
              if (o.success) {
                _context65.next = 10;
                break;
              }
              throw new Error("\u83B7\u53D6HF\u5361\u7247\u6570\u636E\u5931\u8D25: ".concat(o.error));
            case 10:
              _r17 = o.data || [];
              if (!(Array.isArray(_r17) && 0 === _r17.length && o.data.data && (_r17 = o.data.data || []), console.log("[BluetoothService] 获取到HF卡片原始数据:", _r17), console.log("[BluetoothService] 完整响应结构:", o), _r17.length < 5)) {
                _context65.next = 13;
                break;
              }
              throw console.error("[BluetoothService] HF\u6570\u636E\u957F\u5EA6\u4E0D\u8DB3: ".concat(_r17.length, ", \u9700\u8981\u81F3\u5C115\u5B57\u8282")), new Error("HF卡片数据格式错误");
            case 13:
              _n15 = _r17[0];
              if (!(_r17.length < _n15 + 5)) {
                _context65.next = 16;
                break;
              }
              throw new Error("HF卡片数据长度不足");
            case 16:
              _s8 = _r17[_n15 + 4];
              return _context65.abrupt("return", {
                uid: this.arrayToHexString(_r17.slice(1, _n15 + 1)),
                atqa: this.arrayToHexString(_r17.slice(_n15 + 1, _n15 + 3).reverse()),
                sak: _r17[_n15 + 3],
                ats: this.arrayToHexString(_r17.slice(_n15 + 5, _n15 + 5 + _s8))
              });
            case 20:
              _context65.prev = 20;
              _context65.t0 = _context65["catch"](2);
              throw console.error("[BluetoothService] 获取HF卡片数据失败:", _context65.t0), _context65.t0;
            case 23:
            case "end":
              return _context65.stop();
          }
        }, _callee65, this, [[2, 20]]);
      }));
      function getMf1AntiCollData(_x48) {
        return _getMf1AntiCollData.apply(this, arguments);
      }
      return getMf1AntiCollData;
    }()
  }, {
    key: "getEM410XEmulatorID",
    value: function () {
      var _getEM410XEmulatorID = _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee66(e) {
        var o, _r18;
        return _regeneratorRuntime2().wrap(function _callee66$(_context66) {
          while (1) switch (_context66.prev = _context66.next) {
            case 0:
              if (this.isConnected) {
                _context66.next = 2;
                break;
              }
              throw new Error("设备未连接");
            case 2:
              _context66.prev = 2;
              _context66.next = 5;
              return this.setActiveSlot(e);
            case 5:
              _context66.next = 7;
              return this.sendCommand(t.ChameleonCommand.GET_EM410X_EMULATOR_ID, []);
            case 7:
              o = _context66.sent;
              if (o.success) {
                _context66.next = 10;
                break;
              }
              throw new Error("\u83B7\u53D6LF\u5361\u7247ID\u5931\u8D25: ".concat(o.error));
            case 10:
              _r18 = o.data || [];
              return _context66.abrupt("return", (Array.isArray(_r18) && 0 === _r18.length && o.data.data && (_r18 = o.data.data || []), console.log("[BluetoothService] 获取到LF卡片原始数据:", _r18), console.log("[BluetoothService] 完整响应结构:", o), this.arrayToHexString(_r18)));
            case 14:
              _context66.prev = 14;
              _context66.t0 = _context66["catch"](2);
              throw console.error("[BluetoothService] 获取LF卡片ID失败:", _context66.t0), _context66.t0;
            case 17:
            case "end":
              return _context66.stop();
          }
        }, _callee66, this, [[2, 14]]);
      }));
      function getEM410XEmulatorID(_x49) {
        return _getEM410XEmulatorID.apply(this, arguments);
      }
      return getEM410XEmulatorID;
    }()
  }, {
    key: "getMf1EmulatorSettings",
    value: function () {
      var _getMf1EmulatorSettings = _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee67(e) {
        var o, _r19, _n16, _s9;
        return _regeneratorRuntime2().wrap(function _callee67$(_context67) {
          while (1) switch (_context67.prev = _context67.next) {
            case 0:
              if (this.isConnected) {
                _context67.next = 2;
                break;
              }
              throw new Error("设备未连接");
            case 2:
              _context67.prev = 2;
              _context67.next = 5;
              return this.setActiveSlot(e);
            case 5:
              _context67.next = 7;
              return this.sendCommand(t.ChameleonCommand.MF1_GET_EMULATOR_CONFIG, []);
            case 7:
              o = _context67.sent;
              if (o.success) {
                _context67.next = 10;
                break;
              }
              throw new Error("\u83B7\u53D6\u6A21\u62DF\u5668\u8BBE\u7F6E\u5931\u8D25: ".concat(o.error));
            case 10:
              _r19 = o.data || [];
              if (!(Array.isArray(_r19) && 0 === _r19.length && o.data.data && (_r19 = o.data.data || []), console.log("[BluetoothService] 获取到模拟器设置原始数据:", _r19), console.log("[BluetoothService] 完整响应结构:", o), _r19.length < 5)) {
                _context67.next = 13;
                break;
              }
              throw console.error("[BluetoothService] \u6570\u636E\u957F\u5EA6\u4E0D\u8DB3: ".concat(_r19.length, ", \u9700\u8981\u81F3\u5C115\u5B57\u8282")), new Error("\u6A21\u62DF\u5668\u8BBE\u7F6E\u6570\u636E\u957F\u5EA6\u4E0D\u8DB3: ".concat(_r19.length));
            case 13:
              _n16 = "normal";
              1 === _r19[4] ? _n16 = "denied" : 2 === _r19[4] ? _n16 = "deceive" : 3 !== _r19[4] && 4 !== _r19[4] || (_n16 = "shadow");
              _s9 = {
                isDetectionEnabled: 1 === _r19[0],
                isGen1a: 1 === _r19[1],
                isGen2: 1 === _r19[2],
                isAntiColl: 1 === _r19[3],
                writeMode: _n16
              };
              return _context67.abrupt("return", (console.log("[BluetoothService] 解析后的模拟器设置:", _s9), _s9));
            case 19:
              _context67.prev = 19;
              _context67.t0 = _context67["catch"](2);
              throw console.error("[BluetoothService] 获取模拟器设置失败:", _context67.t0), _context67.t0;
            case 22:
            case "end":
              return _context67.stop();
          }
        }, _callee67, this, [[2, 19]]);
      }));
      function getMf1EmulatorSettings(_x50) {
        return _getMf1EmulatorSettings.apply(this, arguments);
      }
      return getMf1EmulatorSettings;
    }()
  }, {
    key: "setMf1Gen1aMode",
    value: function () {
      var _setMf1Gen1aMode = _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee68(e, o) {
        var _r20;
        return _regeneratorRuntime2().wrap(function _callee68$(_context68) {
          while (1) switch (_context68.prev = _context68.next) {
            case 0:
              if (this.isConnected) {
                _context68.next = 2;
                break;
              }
              throw new Error("设备未连接");
            case 2:
              _context68.prev = 2;
              _context68.next = 5;
              return this.setActiveSlot(e);
            case 5:
              _context68.next = 7;
              return this.sendCommand(t.ChameleonCommand.MF1_SET_GEN1A_MODE, [o ? 1 : 0]);
            case 7:
              _r20 = _context68.sent;
              if (_r20.success) {
                _context68.next = 10;
                break;
              }
              throw new Error("\u8BBE\u7F6EGen1A\u6A21\u5F0F\u5931\u8D25: ".concat(_r20.error));
            case 10:
              return _context68.abrupt("return", _r20);
            case 13:
              _context68.prev = 13;
              _context68.t0 = _context68["catch"](2);
              throw console.error("[BluetoothService] 设置Gen1A模式失败:", _context68.t0), _context68.t0;
            case 16:
            case "end":
              return _context68.stop();
          }
        }, _callee68, this, [[2, 13]]);
      }));
      function setMf1Gen1aMode(_x51, _x52) {
        return _setMf1Gen1aMode.apply(this, arguments);
      }
      return setMf1Gen1aMode;
    }()
  }, {
    key: "setMf1Gen2Mode",
    value: function () {
      var _setMf1Gen2Mode = _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee69(e, o) {
        var _r21;
        return _regeneratorRuntime2().wrap(function _callee69$(_context69) {
          while (1) switch (_context69.prev = _context69.next) {
            case 0:
              if (this.isConnected) {
                _context69.next = 2;
                break;
              }
              throw new Error("设备未连接");
            case 2:
              _context69.prev = 2;
              _context69.next = 5;
              return this.setActiveSlot(e);
            case 5:
              _context69.next = 7;
              return this.sendCommand(t.ChameleonCommand.MF1_SET_GEN2_MODE, [o ? 1 : 0]);
            case 7:
              _r21 = _context69.sent;
              if (_r21.success) {
                _context69.next = 10;
                break;
              }
              throw new Error("\u8BBE\u7F6EGen2\u6A21\u5F0F\u5931\u8D25: ".concat(_r21.error));
            case 10:
              return _context69.abrupt("return", _r21);
            case 13:
              _context69.prev = 13;
              _context69.t0 = _context69["catch"](2);
              throw console.error("[BluetoothService] 设置Gen2模式失败:", _context69.t0), _context69.t0;
            case 16:
            case "end":
              return _context69.stop();
          }
        }, _callee69, this, [[2, 13]]);
      }));
      function setMf1Gen2Mode(_x53, _x54) {
        return _setMf1Gen2Mode.apply(this, arguments);
      }
      return setMf1Gen2Mode;
    }()
  }, {
    key: "setMf1WriteMode",
    value: function () {
      var _setMf1WriteMode = _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee70(e, o) {
        var _r22, _n17;
        return _regeneratorRuntime2().wrap(function _callee70$(_context70) {
          while (1) switch (_context70.prev = _context70.next) {
            case 0:
              if (this.isConnected) {
                _context70.next = 2;
                break;
              }
              throw new Error("设备未连接");
            case 2:
              _context70.prev = 2;
              _context70.next = 5;
              return this.setActiveSlot(e);
            case 5:
              _r22 = 0;
              _context70.t0 = o;
              _context70.next = _context70.t0 === "normal" ? 9 : _context70.t0 === "denied" ? 11 : _context70.t0 === "deceive" ? 13 : _context70.t0 === "shadow" ? 15 : 17;
              break;
            case 9:
              _r22 = 0;
              return _context70.abrupt("break", 18);
            case 11:
              _r22 = 1;
              return _context70.abrupt("break", 18);
            case 13:
              _r22 = 2;
              return _context70.abrupt("break", 18);
            case 15:
              _r22 = 3;
              return _context70.abrupt("break", 18);
            case 17:
              throw new Error("\u65E0\u6548\u7684\u5199\u5165\u6A21\u5F0F: ".concat(o));
            case 18:
              _context70.next = 20;
              return this.sendCommand(t.ChameleonCommand.MF1_SET_WRITE_MODE, [_r22]);
            case 20:
              _n17 = _context70.sent;
              if (_n17.success) {
                _context70.next = 23;
                break;
              }
              throw new Error("\u8BBE\u7F6E\u5199\u5165\u6A21\u5F0F\u5931\u8D25: ".concat(_n17.error));
            case 23:
              return _context70.abrupt("return", (console.log("[BluetoothService] \u6210\u529F\u8BBE\u7F6E\u5361\u69FD".concat(e, "\u7684\u5199\u5165\u6A21\u5F0F\u4E3A: ").concat(o)), _n17));
            case 26:
              _context70.prev = 26;
              _context70.t1 = _context70["catch"](2);
              throw console.error("[BluetoothService] 设置写入模式失败:", _context70.t1), _context70.t1;
            case 29:
            case "end":
              return _context70.stop();
          }
        }, _callee70, this, [[2, 26]]);
      }));
      function setMf1WriteMode(_x55, _x56) {
        return _setMf1WriteMode.apply(this, arguments);
      }
      return setMf1WriteMode;
    }()
  }, {
    key: "setMf1DetectionMode",
    value: function () {
      var _setMf1DetectionMode = _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee71(e, o) {
        var _r23;
        return _regeneratorRuntime2().wrap(function _callee71$(_context71) {
          while (1) switch (_context71.prev = _context71.next) {
            case 0:
              if (this.isConnected) {
                _context71.next = 2;
                break;
              }
              throw new Error("设备未连接");
            case 2:
              _context71.prev = 2;
              _context71.next = 5;
              return this.setActiveSlot(e);
            case 5:
              _context71.next = 7;
              return this.sendCommand(t.ChameleonCommand.MF1_SET_DETECTION_ENABLE, [o ? 1 : 0]);
            case 7:
              _r23 = _context71.sent;
              if (_r23.success) {
                _context71.next = 10;
                break;
              }
              throw new Error("\u8BBE\u7F6E\u68C0\u6D4B\u6A21\u5F0F\u5931\u8D25: ".concat(_r23.error));
            case 10:
              return _context71.abrupt("return", (console.log("[BluetoothService] \u6210\u529F\u8BBE\u7F6E\u5361\u69FD".concat(e, "\u7684\u68C0\u6D4B\u6A21\u5F0F\u4E3A: ").concat(o ? "启用" : "禁用")), _r23));
            case 13:
              _context71.prev = 13;
              _context71.t0 = _context71["catch"](2);
              throw console.error("[BluetoothService] 设置检测模式失败:", _context71.t0), _context71.t0;
            case 16:
            case "end":
              return _context71.stop();
          }
        }, _callee71, this, [[2, 13]]);
      }));
      function setMf1DetectionMode(_x57, _x58) {
        return _setMf1DetectionMode.apply(this, arguments);
      }
      return setMf1DetectionMode;
    }()
  }, {
    key: "setMf1UseFirstBlockColl",
    value: function () {
      var _setMf1UseFirstBlockColl = _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee72(e, o) {
        var _r24;
        return _regeneratorRuntime2().wrap(function _callee72$(_context72) {
          while (1) switch (_context72.prev = _context72.next) {
            case 0:
              if (this.isConnected) {
                _context72.next = 2;
                break;
              }
              throw new Error("设备未连接");
            case 2:
              _context72.prev = 2;
              _context72.next = 5;
              return this.setActiveSlot(e);
            case 5:
              _context72.next = 7;
              return this.sendCommand(t.ChameleonCommand.MF1_SET_FIRST_BLOCK_COLL, [o ? 1 : 0]);
            case 7:
              _r24 = _context72.sent;
              if (_r24.success) {
                _context72.next = 10;
                break;
              }
              throw new Error("\u8BBE\u7F6EBlock 0\u9632\u78B0\u649E\u6A21\u5F0F\u5931\u8D25: ".concat(_r24.error));
            case 10:
              return _context72.abrupt("return", (console.log("[BluetoothService] \u6210\u529F\u8BBE\u7F6E\u5361\u69FD".concat(e, "\u7684Block 0\u9632\u78B0\u649E\u6A21\u5F0F\u4E3A: ").concat(o ? "启用" : "禁用")), _r24));
            case 13:
              _context72.prev = 13;
              _context72.t0 = _context72["catch"](2);
              throw console.error("[BluetoothService] 设置Block 0防碰撞模式失败:", _context72.t0), _context72.t0;
            case 16:
            case "end":
              return _context72.stop();
          }
        }, _callee72, this, [[2, 13]]);
      }));
      function setMf1UseFirstBlockColl(_x59, _x60) {
        return _setMf1UseFirstBlockColl.apply(this, arguments);
      }
      return setMf1UseFirstBlockColl;
    }()
  }, {
    key: "setMf1AntiCollision",
    value: function () {
      var _setMf1AntiCollision = _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee73(e, o) {
        var _r25, _n18, _s10, _a5, i, c;
        return _regeneratorRuntime2().wrap(function _callee73$(_context73) {
          while (1) switch (_context73.prev = _context73.next) {
            case 0:
              if (this.isConnected) {
                _context73.next = 2;
                break;
              }
              throw new Error("设备未连接");
            case 2:
              _context73.prev = 2;
              _context73.next = 5;
              return this.setActiveSlot(e);
            case 5:
              _r25 = this.hexStringToArray(o.uid || ""), _n18 = this.hexStringToArray(o.atqa || ""), _s10 = this.hexStringToArray(o.ats || ""), _a5 = "number" == typeof o.sak ? o.sak : parseInt(o.sak) || 0, i = [];
              i.push(_r25.length), i.push.apply(i, _toConsumableArray2(_r25)), i.push.apply(i, _toConsumableArray2(_toConsumableArray2(_n18).reverse())), i.push(_a5), i.push(_s10.length), i.push.apply(i, _toConsumableArray2(_s10));
              _context73.next = 9;
              return this.sendCommand(t.ChameleonCommand.MF1_SET_ANTI_COLLISION, i);
            case 9:
              c = _context73.sent;
              if (c.success) {
                _context73.next = 12;
                break;
              }
              throw new Error("\u8BBE\u7F6E\u9632\u78B0\u649E\u6570\u636E\u5931\u8D25: ".concat(c.error));
            case 12:
              return _context73.abrupt("return", (console.log("[BluetoothService] \u6210\u529F\u8BBE\u7F6E\u5361\u69FD".concat(e, "\u7684\u9632\u78B0\u649E\u6570\u636E")), c));
            case 15:
              _context73.prev = 15;
              _context73.t0 = _context73["catch"](2);
              throw console.error("[BluetoothService] 设置防碰撞数据失败:", _context73.t0), _context73.t0;
            case 18:
            case "end":
              return _context73.stop();
          }
        }, _callee73, this, [[2, 15]]);
      }));
      function setMf1AntiCollision(_x61, _x62) {
        return _setMf1AntiCollision.apply(this, arguments);
      }
      return setMf1AntiCollision;
    }()
  }, {
    key: "setMf1BlockData",
    value: function () {
      var _setMf1BlockData = _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee74(e, o) {
        var _r26, _n19, _s11, _a6;
        return _regeneratorRuntime2().wrap(function _callee74$(_context74) {
          while (1) switch (_context74.prev = _context74.next) {
            case 0:
              if (this.isConnected) {
                _context74.next = 2;
                break;
              }
              throw new Error("设备未连接");
            case 2:
              _context74.prev = 2;
              _r26 = Array.isArray(o) ? o : Array.from(o);
              _n19 = [255 & e].concat(_toConsumableArray2(_r26));
              _context74.next = 7;
              return this.sendCommand(t.ChameleonCommand.MF1_LOAD_BLOCK_DATA, _n19);
            case 7:
              _s11 = _context74.sent;
              if (_s11.success) {
                _context74.next = 10;
                break;
              }
              throw new Error("\u8BBE\u7F6E\u5757\u6570\u636E\u5931\u8D25: ".concat(_s11.error));
            case 10:
              _a6 = Math.floor(_r26.length / 16);
              return _context74.abrupt("return", (console.log("[BluetoothService] \u6210\u529F\u8BBE\u7F6E".concat(_a6, "\u4E2A\u5757\u6570\u636E\uFF0C\u8D77\u59CB\u5757: ").concat(e)), _s11));
            case 14:
              _context74.prev = 14;
              _context74.t0 = _context74["catch"](2);
              throw console.error("[BluetoothService] 设置块数据失败:", _context74.t0), _context74.t0;
            case 17:
            case "end":
              return _context74.stop();
          }
        }, _callee74, this, [[2, 14]]);
      }));
      function setMf1BlockData(_x63, _x64) {
        return _setMf1BlockData.apply(this, arguments);
      }
      return setMf1BlockData;
    }()
  }, {
    key: "hexStringToArray",
    value: function hexStringToArray(e) {
      if (!e) return [];
      var t = e.replace(/\s/g, "").toUpperCase(),
        o = [];
      for (var _r27 = 0; _r27 < t.length; _r27 += 2) {
        var _e25 = parseInt(t.substring(_r27, _r27 + 2), 16);
        isNaN(_e25) || o.push(_e25);
      }
      return o;
    }
  }, {
    key: "setEM410XEmulatorID",
    value: function () {
      var _setEM410XEmulatorID = _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee75(e, o) {
        var _r28, _n20;
        return _regeneratorRuntime2().wrap(function _callee75$(_context75) {
          while (1) switch (_context75.prev = _context75.next) {
            case 0:
              if (this.isConnected) {
                _context75.next = 2;
                break;
              }
              throw new Error("设备未连接");
            case 2:
              _context75.prev = 2;
              _context75.next = 5;
              return this.setActiveSlot(e);
            case 5:
              _r28 = this.stringToArrayBuffer(o.replace(/\s/g, ""));
              _context75.next = 8;
              return this.sendCommand(t.ChameleonCommand.SET_EM410X_EMULATOR_ID, Array.from(new Uint8Array(_r28)));
            case 8:
              _n20 = _context75.sent;
              if (_n20.success) {
                _context75.next = 11;
                break;
              }
              throw new Error("\u8BBE\u7F6EEM410X ID\u5931\u8D25: ".concat(_n20.error));
            case 11:
              return _context75.abrupt("return", (console.log("[BluetoothService] \u6210\u529F\u8BBE\u7F6E\u5361\u69FD".concat(e, "\u7684EM410X ID\u4E3A: ").concat(o)), _n20));
            case 14:
              _context75.prev = 14;
              _context75.t0 = _context75["catch"](2);
              throw console.error("[BluetoothService] 设置EM410X ID失败:", _context75.t0), _context75.t0;
            case 17:
            case "end":
              return _context75.stop();
          }
        }, _callee75, this, [[2, 14]]);
      }));
      function setEM410XEmulatorID(_x65, _x66) {
        return _setEM410XEmulatorID.apply(this, arguments);
      }
      return setEM410XEmulatorID;
    }()
  }, {
    key: "getLfEmulatorSettings",
    value: function () {
      var _getLfEmulatorSettings = _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee76(e) {
        return _regeneratorRuntime2().wrap(function _callee76$(_context76) {
          while (1) switch (_context76.prev = _context76.next) {
            case 0:
              if (this.isConnected) {
                _context76.next = 2;
                break;
              }
              throw new Error("设备未连接");
            case 2:
              _context76.prev = 2;
              _context76.next = 5;
              return this.setActiveSlot(e);
            case 5:
              _context76.next = 7;
              return this.getEM410XEmulatorID(e);
            case 7:
              _context76.t0 = _context76.sent;
              return _context76.abrupt("return", {
                uid: _context76.t0,
                type: "EM410X"
              });
            case 11:
              _context76.prev = 11;
              _context76.t1 = _context76["catch"](2);
              throw console.error("[BluetoothService] 获取LF模拟器设置失败:", _context76.t1), _context76.t1;
            case 14:
            case "end":
              return _context76.stop();
          }
        }, _callee76, this, [[2, 11]]);
      }));
      function getLfEmulatorSettings(_x67) {
        return _getLfEmulatorSettings.apply(this, arguments);
      }
      return getLfEmulatorSettings;
    }()
  }, {
    key: "getLicenseKey",
    value: function () {
      var _getLicenseKey = _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee77() {
        var _e26, o;
        return _regeneratorRuntime2().wrap(function _callee77$(_context77) {
          while (1) switch (_context77.prev = _context77.next) {
            case 0:
              if (this.isConnected) {
                _context77.next = 2;
                break;
              }
              throw new Error("设备未连接");
            case 2:
              _context77.prev = 2;
              _context77.next = 5;
              return this.sendCommand(t.ChameleonCommand.GET_LICENSE_KEY);
            case 5:
              _e26 = _context77.sent;
              if (_e26.success) {
                _context77.next = 8;
                break;
              }
              throw new Error("\u83B7\u53D6\u6FC0\u6D3B\u7801\u5931\u8D25: ".concat(_e26.error));
            case 8:
              o = this.arrayBufferToString(_e26.data);
              return _context77.abrupt("return", (console.log("[BluetoothService] \u83B7\u53D6\u6FC0\u6D3B\u7801: ".concat(o)), o));
            case 12:
              _context77.prev = 12;
              _context77.t0 = _context77["catch"](2);
              throw console.error("[BluetoothService] 获取激活码失败:", _context77.t0), _context77.t0;
            case 15:
            case "end":
              return _context77.stop();
          }
        }, _callee77, this, [[2, 12]]);
      }));
      function getLicenseKey() {
        return _getLicenseKey.apply(this, arguments);
      }
      return getLicenseKey;
    }()
  }, {
    key: "setLicenseKey",
    value: function () {
      var _setLicenseKey = _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee78(e) {
        var o, _r29;
        return _regeneratorRuntime2().wrap(function _callee78$(_context78) {
          while (1) switch (_context78.prev = _context78.next) {
            case 0:
              if (this.isConnected) {
                _context78.next = 2;
                break;
              }
              throw new Error("设备未连接");
            case 2:
              _context78.prev = 2;
              o = this.stringToArrayBuffer(e);
              _context78.next = 6;
              return this.sendCommand(t.ChameleonCommand.SET_LICENSE_KEY, Array.from(new Uint8Array(o)));
            case 6:
              _r29 = _context78.sent;
              if (_r29.success) {
                _context78.next = 9;
                break;
              }
              throw new Error("\u8BBE\u7F6E\u6FC0\u6D3B\u7801\u5931\u8D25: ".concat(_r29.error));
            case 9:
              return _context78.abrupt("return", (console.log("[BluetoothService] \u8BBE\u7F6E\u6FC0\u6D3B\u7801\u6210\u529F: ".concat(e)), _r29));
            case 12:
              _context78.prev = 12;
              _context78.t0 = _context78["catch"](2);
              throw console.error("[BluetoothService] 设置激活码失败:", _context78.t0), _context78.t0;
            case 15:
            case "end":
              return _context78.stop();
          }
        }, _callee78, this, [[2, 12]]);
      }));
      function setLicenseKey(_x68) {
        return _setLicenseKey.apply(this, arguments);
      }
      return setLicenseKey;
    }()
  }, {
    key: "setSecretKey",
    value: function () {
      var _setSecretKey = _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee79(e) {
        var o, _r30;
        return _regeneratorRuntime2().wrap(function _callee79$(_context79) {
          while (1) switch (_context79.prev = _context79.next) {
            case 0:
              if (this.isConnected) {
                _context79.next = 2;
                break;
              }
              throw new Error("设备未连接");
            case 2:
              _context79.prev = 2;
              o = this.stringToArrayBuffer(e);
              _context79.next = 6;
              return this.sendCommand(t.ChameleonCommand.SET_SECRET_KEY, Array.from(new Uint8Array(o)));
            case 6:
              _r30 = _context79.sent;
              if (_r30.success) {
                _context79.next = 9;
                break;
              }
              throw new Error("\u8BBE\u7F6E\u5BC6\u94A5\u5931\u8D25: ".concat(_r30.error));
            case 9:
              return _context79.abrupt("return", (console.log("[BluetoothService] 设置密钥成功"), _r30));
            case 12:
              _context79.prev = 12;
              _context79.t0 = _context79["catch"](2);
              throw console.error("[BluetoothService] 设置密钥失败:", _context79.t0), _context79.t0;
            case 15:
            case "end":
              return _context79.stop();
          }
        }, _callee79, this, [[2, 12]]);
      }));
      function setSecretKey(_x69) {
        return _setSecretKey.apply(this, arguments);
      }
      return setSecretKey;
    }()
  }, {
    key: "getTrialCount",
    value: function () {
      var _getTrialCount = _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee80() {
        var _e27, o, _r31;
        return _regeneratorRuntime2().wrap(function _callee80$(_context80) {
          while (1) switch (_context80.prev = _context80.next) {
            case 0:
              if (this.isConnected) {
                _context80.next = 2;
                break;
              }
              throw new Error("设备未连接");
            case 2:
              _context80.prev = 2;
              _context80.next = 5;
              return this.sendCommand(t.ChameleonCommand.GET_TRIAL_LEFT_TIMES);
            case 5:
              _e27 = _context80.sent;
              if (_e27.success) {
                _context80.next = 8;
                break;
              }
              throw new Error("\u83B7\u53D6\u8BD5\u7528\u6B21\u6570\u5931\u8D25: ".concat(_e27.error));
            case 8:
              if (!(_e27.data.length < 4)) {
                _context80.next = 10;
                break;
              }
              throw new Error("无效的试用次数数据");
            case 10:
              o = this.bytesToU16(_e27.data.slice(0, 2)), _r31 = this.bytesToU16(_e27.data.slice(2, 4));
              return _context80.abrupt("return", (console.log("[BluetoothService] \u83B7\u53D6\u8BD5\u7528\u6B21\u6570: \u5DF2\u4F7F\u7528".concat(o, "\u6B21\uFF0C\u5269\u4F59").concat(_r31, "\u6B21")), {
                usedCount: o,
                remainingCount: _r31
              }));
            case 14:
              _context80.prev = 14;
              _context80.t0 = _context80["catch"](2);
              throw console.error("[BluetoothService] 获取试用次数失败:", _context80.t0), _context80.t0;
            case 17:
            case "end":
              return _context80.stop();
          }
        }, _callee80, this, [[2, 14]]);
      }));
      function getTrialCount() {
        return _getTrialCount.apply(this, arguments);
      }
      return getTrialCount;
    }()
  }, {
    key: "verifyActivationCode",
    value: function () {
      var _verifyActivationCode = _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee81(e, t) {
        var r,
          _n21,
          _args81 = arguments;
        return _regeneratorRuntime2().wrap(function _callee81$(_context81) {
          while (1) switch (_context81.prev = _context81.next) {
            case 0:
              r = _args81.length > 2 && _args81[2] !== undefined ? _args81[2] : "";
              _context81.prev = 1;
              _context81.next = 4;
              return o.http.post("/device/register", {
                activation_code: e,
                chip_id: t,
                firmware_version: r
              });
            case 4:
              _n21 = _context81.sent;
              return _context81.abrupt("return", {
                success: 200 === _n21.code,
                message: _n21.message || "未知错误",
                secret_key: _n21.secret_key || ""
              });
            case 8:
              _context81.prev = 8;
              _context81.t0 = _context81["catch"](1);
              return _context81.abrupt("return", (console.error("[BluetoothService] 验证激活码失败:", _context81.t0), {
                success: !1,
                message: _context81.t0.message || "网络请求失败",
                secret_key: ""
              }));
            case 11:
            case "end":
              return _context81.stop();
          }
        }, _callee81, null, [[1, 8]]);
      }));
      function verifyActivationCode(_x70, _x71) {
        return _verifyActivationCode.apply(this, arguments);
      }
      return verifyActivationCode;
    }()
  }, {
    key: "getDeviceChipID",
    value: function () {
      var _getDeviceChipID = _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee82() {
        var _e28, _o;
        return _regeneratorRuntime2().wrap(function _callee82$(_context82) {
          while (1) switch (_context82.prev = _context82.next) {
            case 0:
              if (this.isConnected) {
                _context82.next = 2;
                break;
              }
              throw new Error("设备未连接");
            case 2:
              _context82.prev = 2;
              _context82.next = 5;
              return this.sendCommand(t.ChameleonCommand.GET_DEVICE_CHIP_ID);
            case 5:
              _e28 = _context82.sent;
              if (_e28.success) {
                _context82.next = 8;
                break;
              }
              throw new Error("\u83B7\u53D6\u8BBE\u5907\u82AF\u7247ID\u5931\u8D25: ".concat(_e28.error));
            case 8:
              _o = this.arrayToHexLowerString(_e28.data);
              return _context82.abrupt("return", (console.log("[BluetoothService] \u83B7\u53D6\u8BBE\u5907\u82AF\u7247ID: ".concat(_o)), _o));
            case 12:
              _context82.prev = 12;
              _context82.t0 = _context82["catch"](2);
              throw console.error("[BluetoothService] 获取设备芯片ID失败:", _context82.t0), _context82.t0;
            case 15:
            case "end":
              return _context82.stop();
          }
        }, _callee82, this, [[2, 12]]);
      }));
      function getDeviceChipID() {
        return _getDeviceChipID.apply(this, arguments);
      }
      return getDeviceChipID;
    }()
  }, {
    key: "getCustomGitCommitHash",
    value: function () {
      var _getCustomGitCommitHash = _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee83() {
        var _e29, _o2;
        return _regeneratorRuntime2().wrap(function _callee83$(_context83) {
          while (1) switch (_context83.prev = _context83.next) {
            case 0:
              if (this.isConnected) {
                _context83.next = 2;
                break;
              }
              throw new Error("设备未连接");
            case 2:
              _context83.prev = 2;
              _context83.next = 5;
              return this.sendCommand(t.ChameleonCommand.GET_CUSTOM_GIT_VERSION);
            case 5:
              _e29 = _context83.sent;
              if (_e29.success) {
                _context83.next = 8;
                break;
              }
              throw new Error("\u83B7\u53D6\u81EA\u5B9A\u4E49Git\u7248\u672C\u5931\u8D25: ".concat(_e29.error));
            case 8:
              _o2 = this.arrayBufferToString(_e29.data);
              return _context83.abrupt("return", (console.log("[BluetoothService] \u83B7\u53D6\u81EA\u5B9A\u4E49Git\u7248\u672C: ".concat(_o2)), _o2));
            case 12:
              _context83.prev = 12;
              _context83.t0 = _context83["catch"](2);
              throw console.error("[BluetoothService] 获取自定义Git版本失败:", _context83.t0), _context83.t0;
            case 15:
            case "end":
              return _context83.stop();
          }
        }, _callee83, this, [[2, 12]]);
      }));
      function getCustomGitCommitHash() {
        return _getCustomGitCommitHash.apply(this, arguments);
      }
      return getCustomGitCommitHash;
    }()
  }, {
    key: "detectMagicCardType",
    value: function () {
      var _detectMagicCardType = _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee84() {
        var _t23, _o3, _r32, _n22;
        return _regeneratorRuntime2().wrap(function _callee84$(_context84) {
          while (1) switch (_context84.prev = _context84.next) {
            case 0:
              if (this.isConnected) {
                _context84.next = 2;
                break;
              }
              throw new Error("设备未连接");
            case 2:
              _context84.prev = 2;
              console.log("[BluetoothService] 开始检测魔术卡类型...");
              _context84.next = 6;
              return this.isReaderDeviceMode();
            case 6:
              _context84.t0 = _context84.sent;
              if (_context84.t0) {
                _context84.next = 10;
                break;
              }
              _context84.next = 10;
              return this.setReaderDeviceMode(!0);
            case 10:
              _context84.next = 12;
              return this.scan14443aTag();
            case 12:
              _t23 = _context84.sent;
              if (_t23.success) {
                _context84.next = 15;
                break;
              }
              return _context84.abrupt("return", {
                success: !1,
                error: "未检测到卡片"
              });
            case 15:
              _o3 = [];
              _r32 = "unknown";
              _context84.prev = 17;
              _context84.next = 20;
              return this.mf1Auth(0, 96, [255, 255, 255, 255, 255, 255]);
            case 20:
              _context84.t1 = _context84.sent;
              if (!_context84.t1) {
                _context84.next = 23;
                break;
              }
              _o3.push("gen1_block0_auth"), _r32 = "gen1", console.log("[BluetoothService] 检测到Gen1特征: 可认证块0");
            case 23:
              _context84.next = 28;
              break;
            case 25:
              _context84.prev = 25;
              _context84.t2 = _context84["catch"](17);
              console.log("[BluetoothService] Gen1特征检测失败:", _context84.t2);
            case 28:
              _context84.prev = 28;
              _context84.next = 31;
              return this.mf1Auth(3, 96, [255, 255, 255, 255, 255, 255]);
            case 31:
              _context84.t3 = _context84.sent;
              if (!_context84.t3) {
                _context84.next = 34;
                break;
              }
              _context84.t3 = "unknown" === _r32;
            case 34:
              _context84.t4 = _context84.t3;
              if (!_context84.t4) {
                _context84.next = 37;
                break;
              }
              _o3.push("gen2_standard_auth"), _r32 = "gen2", console.log("[BluetoothService] 检测到Gen2特征: 标准认证");
            case 37:
              _context84.next = 42;
              break;
            case 39:
              _context84.prev = 39;
              _context84.t5 = _context84["catch"](28);
              console.log("[BluetoothService] Gen2特征检测失败:", _context84.t5);
            case 42:
              0 === _t23.data.sak && (_o3.push("ntag_sak"), "unknown" === _r32 && (_r32 = "ntag", console.log("[BluetoothService] 检测到NTAG特征: SAK=0x00")));
              _n22 = {
                success: "unknown" !== _r32,
                type: _r32,
                features: _o3,
                cardInfo: _t23.data
              };
              return _context84.abrupt("return", (console.log("[BluetoothService] 魔术卡检测完成:", _n22), _n22));
            case 47:
              _context84.prev = 47;
              _context84.t6 = _context84["catch"](2);
              return _context84.abrupt("return", (console.error("[BluetoothService] 魔术卡检测失败:", _context84.t6), {
                success: !1,
                error: _context84.t6.message
              }));
            case 50:
            case "end":
              return _context84.stop();
          }
        }, _callee84, this, [[2, 47], [17, 25], [28, 39]]);
      }));
      function detectMagicCardType() {
        return _detectMagicCardType.apply(this, arguments);
      }
      return detectMagicCardType;
    }()
  }, {
    key: "verifyCardCompatibility",
    value: function () {
      var _verifyCardCompatibility = _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee85(e, t) {
        var _o4, _r33;
        return _regeneratorRuntime2().wrap(function _callee85$(_context85) {
          while (1) switch (_context85.prev = _context85.next) {
            case 0:
              _context85.prev = 0;
              console.log("[BluetoothService] 验证卡片兼容性...");
              _o4 = [];
              _r33 = !0;
              return _context85.abrupt("return", ("gen1" === t || "gen2" === t ? (e.tag < 1e3 || e.tag > 1003) && (_r33 = !1, _o4.push("源卡片不是Mifare Classic类型，可能无法正常写入")) : "ntag" === t && (e.tag < 1100 || e.tag > 1108) && (_r33 = !1, _o4.push("源卡片不是NTAG/Ultralight类型，可能无法正常写入")), e.data && 0 !== e.data.length || (_r33 = !1, _o4.push("源卡片没有可写入的数据")), e.uid && e.uid.length > 14 && _o4.push("源卡片使用7字节UID，某些魔术卡可能不支持"), {
                compatible: _r33,
                warnings: _o4
              }));
            case 7:
              _context85.prev = 7;
              _context85.t0 = _context85["catch"](0);
              return _context85.abrupt("return", (console.error("[BluetoothService] 兼容性验证失败:", _context85.t0), {
                compatible: !1,
                warnings: ["兼容性验证失败"]
              }));
            case 10:
            case "end":
              return _context85.stop();
          }
        }, _callee85, null, [[0, 7]]);
      }));
      function verifyCardCompatibility(_x72, _x73) {
        return _verifyCardCompatibility.apply(this, arguments);
      }
      return verifyCardCompatibility;
    }()
  }, {
    key: "writeMagicCard",
    value: function () {
      var _writeMagicCard = _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee86(e, t, o) {
        return _regeneratorRuntime2().wrap(function _callee86$(_context86) {
          while (1) switch (_context86.prev = _context86.next) {
            case 0:
              if (this.isConnected) {
                _context86.next = 2;
                break;
              }
              throw new Error("设备未连接");
            case 2:
              _context86.prev = 2;
              console.log("[BluetoothService] \u5F00\u59CB\u5199\u5165".concat(t, "\u9B54\u672F\u5361..."));
              if (!(0 === (e.data ? e.data.length : 0))) {
                _context86.next = 6;
                break;
              }
              throw new Error("没有可写入的数据");
            case 6:
              if (!("gen1" === t)) {
                _context86.next = 10;
                break;
              }
              _context86.next = 9;
              return this.writeGen1MagicCard(e, o);
            case 9:
              return _context86.abrupt("return", _context86.sent);
            case 10:
              if (!("gen2" === t)) {
                _context86.next = 14;
                break;
              }
              _context86.next = 13;
              return this.writeGen2MagicCard(e, o);
            case 13:
              return _context86.abrupt("return", _context86.sent);
            case 14:
              if (!("ntag" === t)) {
                _context86.next = 18;
                break;
              }
              _context86.next = 17;
              return this.writeNTAGMagicCard(e, o);
            case 17:
              return _context86.abrupt("return", _context86.sent);
            case 18:
              throw new Error("\u4E0D\u652F\u6301\u7684\u9B54\u672F\u5361\u7C7B\u578B: ".concat(t));
            case 21:
              _context86.prev = 21;
              _context86.t0 = _context86["catch"](2);
              throw console.error("[BluetoothService] 写入魔术卡失败:", _context86.t0), _context86.t0;
            case 24:
            case "end":
              return _context86.stop();
          }
        }, _callee86, this, [[2, 21]]);
      }));
      function writeMagicCard(_x74, _x75, _x76) {
        return _writeMagicCard.apply(this, arguments);
      }
      return writeMagicCard;
    }()
  }, {
    key: "writeGen1MagicCard",
    value: function () {
      var _writeGen1MagicCard = _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee87(e, t) {
        var o, r, n, _a7, i;
        return _regeneratorRuntime2().wrap(function _callee87$(_context87) {
          while (1) switch (_context87.prev = _context87.next) {
            case 0:
              o = [], r = e.data.length, n = [255, 255, 255, 255, 255, 255];
              _context87.prev = 1;
              t(0, "开始写入Gen1魔术卡...");
              _a7 = 0;
            case 4:
              if (!(_a7 < r)) {
                _context87.next = 24;
                break;
              }
              i = e.data[_a7];
              if (!(i && 16 === i.length)) {
                _context87.next = 21;
                break;
              }
              _context87.prev = 7;
              t(Math.floor(_a7 / r * 100), "\u5199\u5165\u5757 ".concat(_a7, "..."));
              _context87.next = 11;
              return this.mf1WriteBlock(_a7, 96, n, new Uint8Array(i));
            case 11:
              _context87.t0 = _context87.sent;
              if (_context87.t0) {
                _context87.next = 14;
                break;
              }
              o.push(_a7);
            case 14:
              _context87.next = 16;
              return new Promise(function (e) {
                return setTimeout(e, 50);
              });
            case 16:
              _context87.next = 21;
              break;
            case 18:
              _context87.prev = 18;
              _context87.t1 = _context87["catch"](7);
              console.error("[BluetoothService] Gen1\u5199\u5165\u5757".concat(_a7, "\u5931\u8D25:"), _context87.t1), o.push(_a7);
            case 21:
              _a7++;
              _context87.next = 4;
              break;
            case 24:
              return _context87.abrupt("return", (t(100, "写入完成"), {
                success: 0 === o.length,
                failedBlocks: o
              }));
            case 27:
              _context87.prev = 27;
              _context87.t2 = _context87["catch"](1);
              throw console.error("[BluetoothService] Gen1魔术卡写入失败:", _context87.t2), _context87.t2;
            case 30:
            case "end":
              return _context87.stop();
          }
        }, _callee87, this, [[1, 27], [7, 18]]);
      }));
      function writeGen1MagicCard(_x77, _x78) {
        return _writeGen1MagicCard.apply(this, arguments);
      }
      return writeGen1MagicCard;
    }()
  }, {
    key: "writeGen2MagicCard",
    value: function () {
      var _writeGen2MagicCard = _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee88(e, t) {
        var o, r, n, _a8, i, _e30, l, _a9, _c, c, _r34, _a10, _i;
        return _regeneratorRuntime2().wrap(function _callee88$(_context88) {
          while (1) switch (_context88.prev = _context88.next) {
            case 0:
              o = [], r = e.data.length, n = [255, 255, 255, 255, 255, 255];
              _context88.prev = 1;
              t(0, "开始写入Gen2魔术卡...");
              _a8 = [0, 3, 7, 11, 15, 19, 23, 27, 31, 35, 39, 43, 47, 51, 55, 59, 63], i = [];
              for (_e30 = 0; _e30 < r; _e30++) _a8.includes(_e30) || i.push(_e30);
              l = 0;
            case 6:
              if (!(l < i.length)) {
                _context88.next = 26;
                break;
              }
              _a9 = i[l], _c = e.data[_a9];
              if (!(_c && 16 === _c.length)) {
                _context88.next = 23;
                break;
              }
              _context88.prev = 9;
              t(Math.floor(l / r * 60), "\u5199\u5165\u6570\u636E\u5757 ".concat(_a9, "..."));
              _context88.next = 13;
              return this.mf1WriteBlock(_a9, 96, n, new Uint8Array(_c));
            case 13:
              _context88.t0 = _context88.sent;
              if (_context88.t0) {
                _context88.next = 16;
                break;
              }
              o.push(_a9);
            case 16:
              _context88.next = 18;
              return new Promise(function (e) {
                return setTimeout(e, 100);
              });
            case 18:
              _context88.next = 23;
              break;
            case 20:
              _context88.prev = 20;
              _context88.t1 = _context88["catch"](9);
              console.error("[BluetoothService] Gen2\u5199\u5165\u5757".concat(_a9, "\u5931\u8D25:"), _context88.t1), o.push(_a9);
            case 23:
              l++;
              _context88.next = 6;
              break;
            case 26:
              c = _a8.filter(function (t) {
                return t < r && e.data[t];
              });
              _r34 = 0;
            case 28:
              if (!(_r34 < c.length)) {
                _context88.next = 47;
                break;
              }
              _a10 = c[_r34], _i = e.data[_a10];
              _context88.prev = 30;
              t(60 + Math.floor(_r34 / c.length * 40), "\u5199\u5165\u63A7\u5236\u5757 ".concat(_a10, "..."));
              _context88.next = 34;
              return this.mf1WriteBlock(_a10, 96, n, new Uint8Array(_i));
            case 34:
              _context88.t2 = _context88.sent;
              if (_context88.t2) {
                _context88.next = 37;
                break;
              }
              o.push(_a10);
            case 37:
              _context88.next = 39;
              return new Promise(function (e) {
                return setTimeout(e, 150);
              });
            case 39:
              _context88.next = 44;
              break;
            case 41:
              _context88.prev = 41;
              _context88.t3 = _context88["catch"](30);
              console.error("[BluetoothService] Gen2\u5199\u5165\u5757".concat(_a10, "\u5931\u8D25:"), _context88.t3), o.push(_a10);
            case 44:
              _r34++;
              _context88.next = 28;
              break;
            case 47:
              return _context88.abrupt("return", (t(100, "写入完成"), {
                success: 0 === o.length,
                failedBlocks: o
              }));
            case 50:
              _context88.prev = 50;
              _context88.t4 = _context88["catch"](1);
              throw console.error("[BluetoothService] Gen2魔术卡写入失败:", _context88.t4), _context88.t4;
            case 53:
            case "end":
              return _context88.stop();
          }
        }, _callee88, this, [[1, 50], [9, 20], [30, 41]]);
      }));
      function writeGen2MagicCard(_x79, _x80) {
        return _writeGen2MagicCard.apply(this, arguments);
      }
      return writeGen2MagicCard;
    }()
  }, {
    key: "writeNTAGMagicCard",
    value: function () {
      var _writeNTAGMagicCard = _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee89(e, t) {
        var o, r, _s12, _a11, _e31;
        return _regeneratorRuntime2().wrap(function _callee89$(_context89) {
          while (1) switch (_context89.prev = _context89.next) {
            case 0:
              o = [], r = e.data.length;
              _context89.prev = 1;
              t(0, "开始写入NTAG魔术卡...");
              _s12 = 0;
            case 4:
              if (!(_s12 < r)) {
                _context89.next = 22;
                break;
              }
              _a11 = e.data[_s12];
              if (!(_a11 && 4 === _a11.length)) {
                _context89.next = 19;
                break;
              }
              _context89.prev = 7;
              t(Math.floor(_s12 / r * 100), "\u5199\u5165\u9875\u9762 ".concat(_s12, "..."));
              _e31 = [162, _s12].concat(_toConsumableArray2(_a11));
              _context89.next = 12;
              return this.send14ARaw(_e31, {
                waitResponse: !0,
                appendCrc: !0,
                checkResponseCrc: !0
              });
            case 12:
              _context89.next = 14;
              return new Promise(function (e) {
                return setTimeout(e, 50);
              });
            case 14:
              _context89.next = 19;
              break;
            case 16:
              _context89.prev = 16;
              _context89.t0 = _context89["catch"](7);
              console.error("[BluetoothService] NTAG\u5199\u5165\u9875\u9762".concat(_s12, "\u5931\u8D25:"), _context89.t0), o.push(_s12);
            case 19:
              _s12++;
              _context89.next = 4;
              break;
            case 22:
              return _context89.abrupt("return", (t(100, "写入完成"), {
                success: 0 === o.length,
                failedBlocks: o
              }));
            case 25:
              _context89.prev = 25;
              _context89.t1 = _context89["catch"](1);
              throw console.error("[BluetoothService] NTAG魔术卡写入失败:", _context89.t1), _context89.t1;
            case 28:
            case "end":
              return _context89.stop();
          }
        }, _callee89, this, [[1, 25], [7, 16]]);
      }));
      function writeNTAGMagicCard(_x81, _x82) {
        return _writeNTAGMagicCard.apply(this, arguments);
      }
      return writeNTAGMagicCard;
    }()
  }, {
    key: "enterDFUMode",
    value: function () {
      var _enterDFUMode = _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee90() {
        var _o5, _r35, _e32;
        return _regeneratorRuntime2().wrap(function _callee90$(_context90) {
          while (1) switch (_context90.prev = _context90.next) {
            case 0:
              if (this.isConnected) {
                _context90.next = 2;
                break;
              }
              throw new Error("设备未连接");
            case 2:
              _context90.prev = 2;
              console.log("[BluetoothService] 让设备进入 DFU 模式");
              _o5 = new Promise(function (e, t) {
                setTimeout(function () {
                  console.log("[BluetoothService] 进入DFU模式命令超时，设备可能已重启"), t(new Error("进入DFU模式命令超时，设备可能已重启"));
                }, 1e3);
              }), _r35 = this.sendCommand(t.ChameleonCommand.ENTER_BOOTLOADER);
              _context90.prev = 5;
              _context90.next = 8;
              return Promise.race([_r35, _o5]);
            case 8:
              _e32 = _context90.sent;
              console.log("[BluetoothService] 设备已进入 DFU 模式", _e32);
              _context90.next = 17;
              break;
            case 12:
              _context90.prev = 12;
              _context90.t0 = _context90["catch"](5);
              if (_context90.t0.message.includes("超时")) {
                _context90.next = 16;
                break;
              }
              throw _context90.t0;
            case 16:
              console.log("[BluetoothService] 设备正在重启进入DFU模式");
            case 17:
              this.isConnected = !1;
              this.connectedDevice = null;
              _context90.next = 21;
              return new Promise(function (e) {
                return setTimeout(e, 1e3);
              });
            case 21:
              return _context90.abrupt("return", !0);
            case 24:
              _context90.prev = 24;
              _context90.t1 = _context90["catch"](2);
              throw console.error("[BluetoothService] 进入 DFU 模式失败:", _context90.t1), _context90.t1;
            case 27:
            case "end":
              return _context90.stop();
          }
        }, _callee90, this, [[2, 24], [5, 12]]);
      }));
      function enterDFUMode() {
        return _enterDFUMode.apply(this, arguments);
      }
      return enterDFUMode;
    }()
  }, {
    key: "isDFUDevice",
    value: function isDFUDevice(e) {
      var t = e.name || "";
      return t.startsWith("CU-") || t.startsWith("CL-");
    }
  }, {
    key: "scan14443aTag",
    value: function () {
      var _scan14443aTag = _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee91() {
        var e, _o6, _r36, _r37, _n23, _s13, _a12, i, c, l;
        return _regeneratorRuntime2().wrap(function _callee91$(_context91) {
          while (1) switch (_context91.prev = _context91.next) {
            case 0:
              _context91.prev = 0;
              console.log("[Bluetooth] 扫描14443A标签...");
              _context91.next = 4;
              return this.sendCommand(t.ChameleonCommand.SCAN_14A_TAG, [], 5e3);
            case 4:
              _o6 = _context91.sent;
              if (_o6.success) {
                _context91.next = 8;
                break;
              }
              _r36 = t.ChameleonProtocol.getStatusMessage(_o6.status);
              return _context91.abrupt("return", (console.log("[Bluetooth] \u626B\u63CF14443A\u5931\u8D25, \u72B6\u6001\u7801:0x".concat(null == (e = _o6.status) ? void 0 : e.toString(16), ", \u9519\u8BEF:").concat(_r36)), {
                success: !1,
                error: _r36 || "扫描失败"
              }));
            case 8:
              if (!(!_o6.data || 0 === _o6.data.length)) {
                _context91.next = 10;
                break;
              }
              return _context91.abrupt("return", (console.log("[Bluetooth] 扫描14443A未检测到卡片"), {
                success: !1,
                error: "未检测到卡片"
              }));
            case 10:
              _r37 = _o6.data, _n23 = _r37[0];
              if (!(_n23 < 4 || _n23 > 10)) {
                _context91.next = 13;
                break;
              }
              return _context91.abrupt("return", (console.error("[Bluetooth] \u65E0\u6548\u7684UID\u957F\u5EA6: ".concat(_n23)), {
                success: !1,
                error: "无效的UID长度"
              }));
            case 13:
              if (!(_r37.length < _n23 + 5)) {
                _context91.next = 15;
                break;
              }
              return _context91.abrupt("return", (console.error("[Bluetooth] \u626B\u63CF\u6570\u636E\u957F\u5EA6\u4E0D\u8DB3: ".concat(_r37.length, ", \u671F\u671B: ").concat(_n23 + 5)), {
                success: !1,
                error: "扫描数据格式错误"
              }));
            case 15:
              _s13 = Array.from(_r37.slice(1, _n23 + 1)), _a12 = Array.from(_r37.slice(_n23 + 1, _n23 + 3)), i = _r37[_n23 + 3], c = _r37[_n23 + 4], l = c > 0 ? Array.from(_r37.slice(_n23 + 5, _n23 + 5 + c)) : [];
              return _context91.abrupt("return", (c > 0 && _r37.length < _n23 + 5 + c && console.warn("[Bluetooth] ATS\u6570\u636E\u957F\u5EA6\u4E0D\u8DB3, \u671F\u671B:".concat(c, ", \u5B9E\u9645:").concat(_r37.length - _n23 - 5)), console.log("[Bluetooth] 扫描结果:", {
                uid: _s13.map(function (e) {
                  return e.toString(16).padStart(2, "0");
                }).join(" ").toUpperCase(),
                atqa: _a12.map(function (e) {
                  return e.toString(16).padStart(2, "0");
                }).join("").toUpperCase(),
                sak: i.toString(16).padStart(2, "0").toUpperCase(),
                ats: l.map(function (e) {
                  return e.toString(16).padStart(2, "0");
                }).join(" ").toUpperCase()
              }), {
                success: !0,
                data: {
                  uid: _s13,
                  atqa: _a12,
                  sak: i,
                  ats: l
                }
              }));
            case 19:
              _context91.prev = 19;
              _context91.t0 = _context91["catch"](0);
              return _context91.abrupt("return", (console.error("[Bluetooth] 扫描14443A标签异常", _context91.t0), {
                success: !1,
                error: _context91.t0.message
              }));
            case 22:
            case "end":
              return _context91.stop();
          }
        }, _callee91, this, [[0, 19]]);
      }));
      function scan14443aTag() {
        return _scan14443aTag.apply(this, arguments);
      }
      return scan14443aTag;
    }()
  }, {
    key: "readEM410X",
    value: function () {
      var _readEM410X = _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee92() {
        var e, _o7, _r38, _e33;
        return _regeneratorRuntime2().wrap(function _callee92$(_context92) {
          while (1) switch (_context92.prev = _context92.next) {
            case 0:
              _context92.prev = 0;
              console.log("[Bluetooth] 读取EM410X标签...");
              _context92.next = 4;
              return this.sendCommand(t.ChameleonCommand.SCAN_EM410X_TAG, [], 8e3);
            case 4:
              _o7 = _context92.sent;
              if (_o7.success) {
                _context92.next = 8;
                break;
              }
              _r38 = t.ChameleonProtocol.getStatusMessage(_o7.status);
              return _context92.abrupt("return", (console.log("[Bluetooth] \u8BFB\u53D6EM410X\u5931\u8D25, \u72B6\u6001\u7801:0x".concat(null == (e = _o7.status) ? void 0 : e.toString(16), ", \u9519\u8BEF:").concat(_r38)), ""));
            case 8:
              if (!(!_o7.data || 0 === _o7.data.length)) {
                _context92.next = 10;
                break;
              }
              return _context92.abrupt("return", (console.log("[Bluetooth] 未检测到EM410X卡片"), ""));
            case 10:
              if (!(_o7.data.length >= 5)) {
                _context92.next = 13;
                break;
              }
              _e33 = Array.from(_o7.data.slice(0, 5)).map(function (e) {
                return e.toString(16).padStart(2, "0");
              }).join("").toUpperCase();
              return _context92.abrupt("return", "0000000000" === _e33 || "FFFFFFFFFF" === _e33 ? (console.warn("[Bluetooth] 检测到无效的EM410X UID:", _e33), "") : (console.log("[Bluetooth] EM410X UID:", _e33), _e33));
            case 13:
              return _context92.abrupt("return", (console.error("[Bluetooth] EM410X\u6570\u636E\u957F\u5EA6\u4E0D\u8DB3: ".concat(_o7.data.length, ", \u671F\u671B\u81F3\u5C115\u5B57\u8282")), ""));
            case 16:
              _context92.prev = 16;
              _context92.t0 = _context92["catch"](0);
              return _context92.abrupt("return", (console.error("[Bluetooth] 读取EM410X异常", _context92.t0), ""));
            case 19:
            case "end":
              return _context92.stop();
          }
        }, _callee92, this, [[0, 16]]);
      }));
      function readEM410X() {
        return _readEM410X.apply(this, arguments);
      }
      return readEM410X;
    }()
  }, {
    key: "setReaderDeviceMode",
    value: function () {
      var _setReaderDeviceMode = _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee93(e) {
        var _o8;
        return _regeneratorRuntime2().wrap(function _callee93$(_context93) {
          while (1) switch (_context93.prev = _context93.next) {
            case 0:
              _context93.prev = 0;
              console.log("[Bluetooth] 设置读卡器模式:", e);
              _o8 = e ? 1 : 0;
              _context93.next = 5;
              return this.sendCommand(t.ChameleonCommand.CHANGE_DEVICE_MODE, [_o8], 3e3);
            case 5:
              if (!_context93.sent.success) {
                _context93.next = 9;
                break;
              }
              _context93.t0 = (console.log("[Bluetooth] 设备模式切换成功"), !0);
              _context93.next = 10;
              break;
            case 9:
              _context93.t0 = (console.error("[Bluetooth] 设备模式切换失败"), !1);
            case 10:
              return _context93.abrupt("return", _context93.t0);
            case 13:
              _context93.prev = 13;
              _context93.t1 = _context93["catch"](0);
              return _context93.abrupt("return", (console.error("[Bluetooth] 设置读卡器模式失败", _context93.t1), !1));
            case 16:
            case "end":
              return _context93.stop();
          }
        }, _callee93, this, [[0, 13]]);
      }));
      function setReaderDeviceMode(_x83) {
        return _setReaderDeviceMode.apply(this, arguments);
      }
      return setReaderDeviceMode;
    }()
  }, {
    key: "isReaderDeviceMode",
    value: function () {
      var _isReaderDeviceMode = _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee94() {
        var e;
        return _regeneratorRuntime2().wrap(function _callee94$(_context94) {
          while (1) switch (_context94.prev = _context94.next) {
            case 0:
              _context94.prev = 0;
              _context94.next = 3;
              return this.sendCommand(t.ChameleonCommand.GET_DEVICE_MODE, [], 3e3);
            case 3:
              e = _context94.sent;
              if (!(e.success && e.data && e.data.length > 0)) {
                _context94.next = 6;
                break;
              }
              return _context94.abrupt("return", 1 === e.data[0]);
            case 6:
              return _context94.abrupt("return", !1);
            case 9:
              _context94.prev = 9;
              _context94.t0 = _context94["catch"](0);
              return _context94.abrupt("return", (console.error("[Bluetooth] 检查设备模式失败", _context94.t0), !1));
            case 12:
            case "end":
              return _context94.stop();
          }
        }, _callee94, this, [[0, 9]]);
      }));
      function isReaderDeviceMode() {
        return _isReaderDeviceMode.apply(this, arguments);
      }
      return isReaderDeviceMode;
    }()
  }, {
    key: "detectMf1Support",
    value: function () {
      var _detectMf1Support = _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee95() {
        var e, _o9, _r39;
        return _regeneratorRuntime2().wrap(function _callee95$(_context95) {
          while (1) switch (_context95.prev = _context95.next) {
            case 0:
              _context95.prev = 0;
              console.log("[Bluetooth] 检测Mifare Classic支持...");
              _context95.next = 4;
              return this.sendCommand(t.ChameleonCommand.MF1_SUPPORT_DETECT, [], 3e3);
            case 4:
              _o9 = _context95.sent;
              if (!(_o9.success && _o9.status === t.ChameleonStatus.STATUS_HF_TAG_OK)) {
                _context95.next = 7;
                break;
              }
              return _context95.abrupt("return", (console.log("[Bluetooth] 检测到Mifare Classic卡片"), !0));
            case 7:
              _r39 = t.ChameleonProtocol.getStatusMessage(_o9.status);
              return _context95.abrupt("return", (console.log("[Bluetooth] \u672A\u68C0\u6D4B\u5230Mifare Classic\u5361\u7247, \u72B6\u6001\u7801:0x".concat(null == (e = _o9.status) ? void 0 : e.toString(16), ", \u9519\u8BEF:").concat(_r39)), !1));
            case 11:
              _context95.prev = 11;
              _context95.t0 = _context95["catch"](0);
              return _context95.abrupt("return", (console.error("[Bluetooth] 检测Mifare Classic支持失败", _context95.t0), !1));
            case 14:
            case "end":
              return _context95.stop();
          }
        }, _callee95, this, [[0, 11]]);
      }));
      function detectMf1Support() {
        return _detectMf1Support.apply(this, arguments);
      }
      return detectMf1Support;
    }()
  }, {
    key: "mf1Auth",
    value: function () {
      var _mf1Auth = _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee96(e, o, r) {
        var n, _s14, _a13, i, c, l, _o10;
        return _regeneratorRuntime2().wrap(function _callee96$(_context96) {
          while (1) switch (_context96.prev = _context96.next) {
            case 0:
              _context96.prev = 0;
              _s14 = 96 === o ? "KeyA" : "KeyB", _a13 = Array.from(r).map(function (e) {
                return e.toString(16).padStart(2, "0");
              }).join("").toUpperCase();
              console.log("[Bluetooth] Mifare\u8BA4\u8BC1 \u5757:".concat(e, ", \u5BC6\u94A5\u7C7B\u578B:").concat(_s14, ", \u5BC6\u94A5:").concat(_a13));
              i = [o, e].concat(_toConsumableArray2(r));
              _context96.next = 6;
              return this.sendCommand(t.ChameleonCommand.MF1_CHECK_KEY, i, 3e3);
            case 6:
              c = _context96.sent;
              l = c.success && c.status === t.ChameleonStatus.STATUS_HF_TAG_OK;
              if (l) console.log("[Bluetooth] Mifare\u8BA4\u8BC1\u6210\u529F \u5757:".concat(e, ", \u5BC6\u94A5\u7C7B\u578B:").concat(_s14, ", \u5BC6\u94A5:").concat(_a13));else {
                _o10 = t.ChameleonProtocol.getStatusMessage(c.status);
                console.log("[Bluetooth] Mifare\u8BA4\u8BC1\u5931\u8D25 \u5757:".concat(e, ", \u5BC6\u94A5\u7C7B\u578B:").concat(_s14, ", \u5BC6\u94A5:").concat(_a13, ", \u72B6\u6001\u7801:0x").concat(null == (n = c.status) ? void 0 : n.toString(16), ", \u9519\u8BEF:").concat(_o10));
              }
              return _context96.abrupt("return", l);
            case 12:
              _context96.prev = 12;
              _context96.t0 = _context96["catch"](0);
              return _context96.abrupt("return", (console.error("[Bluetooth] Mifare\u8BA4\u8BC1\u5F02\u5E38 \u5757:".concat(e, ", \u5BC6\u94A5\u7C7B\u578B:").concat(o), _context96.t0), !1));
            case 15:
            case "end":
              return _context96.stop();
          }
        }, _callee96, this, [[0, 12]]);
      }));
      function mf1Auth(_x84, _x85, _x86) {
        return _mf1Auth.apply(this, arguments);
      }
      return mf1Auth;
    }()
  }, {
    key: "mf1ReadBlock",
    value: function () {
      var _mf1ReadBlock = _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee97(e) {
        var o,
          r,
          n,
          s,
          _a14,
          i,
          c,
          l,
          _o11,
          h,
          _args97 = arguments;
        return _regeneratorRuntime2().wrap(function _callee97$(_context97) {
          while (1) switch (_context97.prev = _context97.next) {
            case 0:
              o = _args97.length > 1 && _args97[1] !== undefined ? _args97[1] : 96;
              r = _args97.length > 2 && _args97[2] !== undefined ? _args97[2] : [255, 255, 255, 255, 255, 255];
              _context97.prev = 2;
              _a14 = 96 === o ? "KeyA" : "KeyB", i = Array.from(r).map(function (e) {
                return e.toString(16).padStart(2, "0");
              }).join("").toUpperCase();
              console.log("[Bluetooth] \u8BFB\u53D6Mifare\u5757 ".concat(e, ", \u5BC6\u94A5\u7C7B\u578B:").concat(_a14, ", \u5BC6\u94A5:").concat(i));
              c = [o, e].concat(_toConsumableArray2(r));
              _context97.next = 8;
              return this.sendCommand(t.ChameleonCommand.MF1_READ_BLOCK, c, 3e3);
            case 8:
              l = _context97.sent;
              if (l.success) {
                _context97.next = 12;
                break;
              }
              _o11 = t.ChameleonProtocol.getStatusMessage(l.status);
              return _context97.abrupt("return", (console.error("[Bluetooth] \u8BFB\u53D6Mifare\u5757 ".concat(e, " \u5931\u8D25, \u72B6\u6001\u7801:0x").concat(null == (n = l.status) ? void 0 : n.toString(16), ", \u9519\u8BEF:").concat(_o11)), null));
            case 12:
              if (!(!l.data || l.data.length < 16)) {
                _context97.next = 14;
                break;
              }
              return _context97.abrupt("return", (console.error("[Bluetooth] \u8BFB\u53D6Mifare\u5757 ".concat(e, " \u6570\u636E\u65E0\u6548, \u957F\u5EA6:").concat((null == (s = l.data) ? void 0 : s.length) || 0)), null));
            case 14:
              h = Array.from(l.data.slice(0, 16));
              return _context97.abrupt("return", (console.log("[Bluetooth] \u6210\u529F\u8BFB\u53D6Mifare\u5757 ".concat(e, ", \u6570\u636E:").concat(h.map(function (e) {
                return e.toString(16).padStart(2, "0");
              }).join(" ").toUpperCase())), h));
            case 18:
              _context97.prev = 18;
              _context97.t0 = _context97["catch"](2);
              return _context97.abrupt("return", (console.error("[Bluetooth] \u8BFB\u53D6Mifare\u5757 ".concat(e, " \u5F02\u5E38:"), _context97.t0), null));
            case 21:
            case "end":
              return _context97.stop();
          }
        }, _callee97, this, [[2, 18]]);
      }));
      function mf1ReadBlock(_x87) {
        return _mf1ReadBlock.apply(this, arguments);
      }
      return mf1ReadBlock;
    }()
  }, {
    key: "mf1WriteBlock",
    value: function () {
      var _mf1WriteBlock = _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee98(e) {
        var o,
          r,
          n,
          s,
          _a15,
          _args98 = arguments;
        return _regeneratorRuntime2().wrap(function _callee98$(_context98) {
          while (1) switch (_context98.prev = _context98.next) {
            case 0:
              o = _args98.length > 1 && _args98[1] !== undefined ? _args98[1] : 96;
              r = _args98.length > 2 && _args98[2] !== undefined ? _args98[2] : [255, 255, 255, 255, 255, 255];
              n = _args98.length > 3 ? _args98[3] : undefined;
              _context98.prev = 3;
              if (!(console.log("[Bluetooth] \u5199\u5165Mifare\u5757 ".concat(e)), !n || 16 !== n.length)) {
                _context98.next = 6;
                break;
              }
              throw new Error("\u5757\u6570\u636E\u957F\u5EA6\u5FC5\u987B\u4E3A16\u5B57\u8282\uFF0C\u5F53\u524D: ".concat(n ? n.length : 0));
            case 6:
              s = [o, e].concat(_toConsumableArray2(r), _toConsumableArray2(Array.from(n)));
              _context98.next = 9;
              return this.sendCommand(t.ChameleonCommand.MF1_WRITE_BLOCK, s, 3e3);
            case 9:
              _a15 = _context98.sent;
              return _context98.abrupt("return", _a15.success ? (console.log("[Bluetooth] \u6210\u529F\u5199\u5165Mifare\u5757 ".concat(e)), !0) : (console.error("[Bluetooth] \u5199\u5165Mifare\u5757 ".concat(e, " \u5931\u8D25: ").concat(_a15.error)), !1));
            case 13:
              _context98.prev = 13;
              _context98.t0 = _context98["catch"](3);
              return _context98.abrupt("return", (console.error("[Bluetooth] \u5199\u5165Mifare\u5757 ".concat(e, " \u5F02\u5E38:"), _context98.t0), !1));
            case 16:
            case "end":
              return _context98.stop();
          }
        }, _callee98, this, [[3, 13]]);
      }));
      function mf1WriteBlock(_x88) {
        return _mf1WriteBlock.apply(this, arguments);
      }
      return mf1WriteBlock;
    }()
  }, {
    key: "enterDfuMode",
    value: function enterDfuMode() {
      console.log("[Bluetooth] 进入DFU模式，暂停心跳"), this.isDfuMode = !0, this.stopHeartbeat();
    }
  }, {
    key: "exitDfuMode",
    value: function exitDfuMode() {
      console.log("[Bluetooth] 退出DFU模式，恢复心跳"), this.isDfuMode = !1, this.startHeartbeat();
    }
  }]);
  return _class;
}())();
exports.bluetoothService = i; 
 			}); 
		define("services/location.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";

var _objectSpread2 = require("../@babel/runtime/helpers/objectSpread2");
var _regeneratorRuntime2 = require("../@babel/runtime/helpers/regeneratorRuntime");
var _asyncToGenerator2 = require("../@babel/runtime/helpers/asyncToGenerator");
var _classCallCheck2 = require("../@babel/runtime/helpers/classCallCheck");
var _createClass2 = require("../@babel/runtime/helpers/createClass");
var t = require("../common/vendor.js");
var s = new ( /*#__PURE__*/function () {
  function _class() {
    _classCallCheck2(this, _class);
    this.isWatching = !1, this.watchId = null, this.lastPosition = null, this.lastNotifiedPosition = null, this.listeners = [], this.authSettings = null;
  }
  _createClass2(_class, [{
    key: "checkLocationPermission",
    value: function () {
      var _checkLocationPermission = _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee() {
        var _this = this;
        return _regeneratorRuntime2().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              return _context.abrupt("return", new Promise(function (s, e) {
                t.index.getSetting({
                  success: function success(t) {
                    console.log("[位置服务] 当前权限设置:", t.authSetting), _this.authSettings = t.authSetting, void 0 === t.authSetting["scope.userLocation"] ? s({
                      status: "not_determined",
                      needAuth: !0
                    }) : !0 === t.authSetting["scope.userLocation"] ? s({
                      status: "authorized",
                      needAuth: !1
                    }) : s({
                      status: "denied",
                      needAuth: !1
                    });
                  },
                  fail: function fail(t) {
                    console.error("[位置服务] 获取权限设置失败:", t), e(t);
                  }
                });
              }));
            case 1:
            case "end":
              return _context.stop();
          }
        }, _callee);
      }));
      function checkLocationPermission() {
        return _checkLocationPermission.apply(this, arguments);
      }
      return checkLocationPermission;
    }()
  }, {
    key: "requestLocationPermission",
    value: function () {
      var _requestLocationPermission = _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee2() {
        return _regeneratorRuntime2().wrap(function _callee2$(_context2) {
          while (1) switch (_context2.prev = _context2.next) {
            case 0:
              return _context2.abrupt("return", new Promise(function (s, e) {
                t.index.authorize({
                  scope: "scope.userLocation",
                  success: function success() {
                    console.log("[位置服务] 定位权限申请成功"), s(!0);
                  },
                  fail: function fail(t) {
                    console.error("[位置服务] 定位权限申请失败:", t), s(!1);
                  }
                });
              }));
            case 1:
            case "end":
              return _context2.stop();
          }
        }, _callee2);
      }));
      function requestLocationPermission() {
        return _requestLocationPermission.apply(this, arguments);
      }
      return requestLocationPermission;
    }()
  }, {
    key: "openLocationSettings",
    value: function openLocationSettings() {
      return new Promise(function (s, e) {
        t.index.showModal({
          title: "位置权限未开启",
          content: "电子围栏功能需要位置权限，请在设置中开启位置权限",
          confirmText: "去设置",
          cancelText: "取消",
          success: function success(i) {
            i.confirm ? t.index.openSetting({
              success: function success(t) {
                console.log("[位置服务] 设置页面返回:", t.authSetting), t.authSetting["scope.userLocation"] ? s(!0) : s(!1);
              },
              fail: function fail(t) {
                console.error("[位置服务] 打开设置页面失败:", t), e(t);
              }
            }) : s(!1);
          }
        });
      });
    }
  }, {
    key: "getCurrentPosition",
    value: function () {
      var _getCurrentPosition = _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee3() {
        var _this2 = this;
        var s,
          e,
          i,
          _args3 = arguments;
        return _regeneratorRuntime2().wrap(function _callee3$(_context3) {
          while (1) switch (_context3.prev = _context3.next) {
            case 0:
              s = _args3.length > 0 && _args3[0] !== undefined ? _args3[0] : {};
              e = _objectSpread2({
                type: "gcj02",
                altitude: !1,
                isHighAccuracy: !0,
                highAccuracyExpireTime: 4e3
              }, s), i = Date.now();
              return _context3.abrupt("return", !1 !== s.useCache && this.lastPosition && i - (this.lastPosition.timestamp || 0) < 3e3 ? (console.log("[位置服务] 使用缓存位置:", this.lastPosition), Promise.resolve(this.lastPosition)) : new Promise(function (i, n) {
                var o = setTimeout(function () {
                  _this2.lastPosition ? (console.warn("[位置服务] 位置获取超时，使用缓存位置"), i(_this2.lastPosition)) : n(new Error("获取位置超时"));
                }, s.timeout || 1e4);
                t.index.getSetting({
                  success: function success(a) {
                    if (!1 === a.authSetting["scope.userLocation"]) return clearTimeout(o), void n(new Error("位置权限被拒绝，请在设置中开启位置权限"));
                    t.index.getLocation(_objectSpread2(_objectSpread2({}, e), {}, {
                      success: function success(t) {
                        clearTimeout(o), console.log("[位置服务] 获取当前位置成功:", t);
                        var s = {
                          latitude: t.latitude,
                          longitude: t.longitude,
                          accuracy: t.accuracy,
                          altitude: t.altitude || 0,
                          timestamp: Date.now()
                        };
                        _this2.lastPosition = s, i(s);
                      },
                      fail: function fail(t) {
                        clearTimeout(o), console.error("[位置服务] 获取当前位置失败:", t);
                        var e = "获取位置失败";
                        t.errMsg && (e = t.errMsg.includes("auth deny") ? "位置权限被拒绝，请在设置中开启位置权限" : t.errMsg.includes("requiredPrivateInfos") ? "小程序配置错误，请联系开发者" : "\u83B7\u53D6\u4F4D\u7F6E\u5931\u8D25: ".concat(t.errMsg)), _this2.lastPosition && !s.ignoreCache ? (console.warn("[位置服务] 位置获取失败，使用缓存位置"), i(_this2.lastPosition)) : n(new Error(e));
                      }
                    }));
                  },
                  fail: function fail(t) {
                    clearTimeout(o), n(new Error("检查权限失败"));
                  }
                });
              }));
            case 3:
            case "end":
              return _context3.stop();
          }
        }, _callee3, this);
      }));
      function getCurrentPosition() {
        return _getCurrentPosition.apply(this, arguments);
      }
      return getCurrentPosition;
    }()
  }, {
    key: "startWatching",
    value: function () {
      var _startWatching = _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee5(t) {
        var _this3 = this;
        var s,
          i,
          _t,
          _args5 = arguments;
        return _regeneratorRuntime2().wrap(function _callee5$(_context5) {
          while (1) switch (_context5.prev = _context5.next) {
            case 0:
              s = _args5.length > 1 && _args5[1] !== undefined ? _args5[1] : {};
              if (!this.isWatching) {
                _context5.next = 3;
                break;
              }
              return _context5.abrupt("return", (console.warn("[位置服务] 已在监听位置变化"), void (t && "function" == typeof t && !this.listeners.includes(t) && this.listeners.push(t))));
            case 3:
              _context5.prev = 3;
              _context5.next = 6;
              return this.checkLocationPermission();
            case 6:
              _context5.t0 = _context5.sent.status;
              if (!("authorized" !== _context5.t0)) {
                _context5.next = 9;
                break;
              }
              throw new Error("位置权限未授权");
            case 9:
              console.log("[位置服务] 开始监听位置变化"), this.isWatching = !0, t && "function" == typeof t && !this.listeners.includes(t) && this.listeners.push(t);
              i = {
                interval: s.interval || 5e3,
                minDistanceChange: s.minDistanceChange || 10,
                useCache: !0
              };
              _context5.prev = 11;
              _context5.next = 14;
              return this.getCurrentPosition(_objectSpread2(_objectSpread2({}, s), {}, {
                useCache: !1
              }));
            case 14:
              _t = _context5.sent;
              this.notifyListeners(_t);
              _context5.next = 21;
              break;
            case 18:
              _context5.prev = 18;
              _context5.t1 = _context5["catch"](11);
              console.warn("[位置服务] 初始位置获取失败:", _context5.t1);
            case 21:
              this.watchId = setInterval( /*#__PURE__*/_asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee4() {
                var _t2;
                return _regeneratorRuntime2().wrap(function _callee4$(_context4) {
                  while (1) switch (_context4.prev = _context4.next) {
                    case 0:
                      _context4.prev = 0;
                      _context4.next = 3;
                      return _this3.getCurrentPosition(_objectSpread2(_objectSpread2({}, s), {}, {
                        useCache: i.useCache
                      }));
                    case 3:
                      _t2 = _context4.sent;
                      _this3._hasPositionChanged(_t2, i.minDistanceChange) && _this3.notifyListeners(_t2);
                      _context4.next = 10;
                      break;
                    case 7:
                      _context4.prev = 7;
                      _context4.t0 = _context4["catch"](0);
                      console.error("[位置服务] 定时获取位置失败:", _context4.t0), _this3.notifyListeners(null, _context4.t0);
                    case 10:
                    case "end":
                      return _context4.stop();
                  }
                }, _callee4, null, [[0, 7]]);
              })), i.interval);
              _context5.next = 27;
              break;
            case 24:
              _context5.prev = 24;
              _context5.t2 = _context5["catch"](3);
              throw console.error("[位置服务] 开始监听失败:", _context5.t2), this.isWatching = !1, _context5.t2;
            case 27:
            case "end":
              return _context5.stop();
          }
        }, _callee5, this, [[3, 24], [11, 18]]);
      }));
      function startWatching(_x) {
        return _startWatching.apply(this, arguments);
      }
      return startWatching;
    }()
  }, {
    key: "_hasPositionChanged",
    value: function _hasPositionChanged(t) {
      var s = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 10;
      if (!t || !this.lastNotifiedPosition) return this.lastNotifiedPosition = t, !0;
      return this.calculateDistance(t.latitude, t.longitude, this.lastNotifiedPosition.latitude, this.lastNotifiedPosition.longitude) > s && (this.lastNotifiedPosition = t, !0);
    }
  }, {
    key: "stopWatching",
    value: function stopWatching() {
      this.isWatching ? (console.log("[位置服务] 停止监听位置变化"), this.isWatching = !1, this.watchId && (clearInterval(this.watchId), this.watchId = null), this.listeners = []) : console.warn("[位置服务] 未在监听位置变化");
    }
  }, {
    key: "notifyListeners",
    value: function notifyListeners(t) {
      var s = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;
      this.listeners.forEach(function (e) {
        try {
          e(t, s);
        } catch (i) {
          console.error("[位置服务] 监听器回调错误:", i);
        }
      });
    }
  }, {
    key: "addListener",
    value: function addListener(t) {
      "function" == typeof t && this.listeners.push(t);
    }
  }, {
    key: "removeListener",
    value: function removeListener(t) {
      var s = this.listeners.indexOf(t);
      s > -1 && this.listeners.splice(s, 1);
    }
  }, {
    key: "getLastPosition",
    value: function getLastPosition() {
      return this.lastPosition;
    }
  }, {
    key: "calculateDistance",
    value: function calculateDistance(t, s, e, i) {
      var n = this.deg2rad(e - t),
        o = this.deg2rad(i - s),
        a = Math.sin(n / 2) * Math.sin(n / 2) + Math.cos(this.deg2rad(t)) * Math.cos(this.deg2rad(e)) * Math.sin(o / 2) * Math.sin(o / 2);
      return 6371e3 * (2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a)));
    }
  }, {
    key: "deg2rad",
    value: function deg2rad(t) {
      return t * (Math.PI / 180);
    }
  }]);
  return _class;
}())();
exports.locationService = s; 
 			}); 
		define("store/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";

var e = require("../common/vendor.js"),
  s = require("./modules/device.js"),
  t = require("./modules/slots.js"),
  o = require("./modules/cards.js"),
  r = require("./modules/reader.js"),
  d = require("./modules/geofence.js"),
  i = e.createStore({
    modules: {
      device: s.device,
      slots: t.slots,
      cards: o.cards,
      reader: r.reader,
      geofence: d.geofence
    },
    state: {
      isLoading: !1,
      networkStatus: !0
    },
    mutations: {
      SET_LOADING: function SET_LOADING(e, s) {
        e.isLoading = s;
      },
      SET_NETWORK_STATUS: function SET_NETWORK_STATUS(e, s) {
        e.networkStatus = s;
      }
    },
    actions: {
      setLoading: function setLoading(_ref, s) {
        var e = _ref.commit;
        e("SET_LOADING", s);
      },
      setNetworkStatus: function setNetworkStatus(_ref2, s) {
        var e = _ref2.commit;
        e("SET_NETWORK_STATUS", s);
      }
    },
    getters: {
      isConnected: function isConnected(e) {
        return e.device.connected;
      },
      deviceInfo: function deviceInfo(e) {
        return e.device.info;
      },
      slotList: function slotList(e) {
        return e.slots.slots;
      },
      cardList: function cardList(e) {
        return e.cards.cards;
      }
    }
  });
exports.store = i; 
 			}); 
		define("store/modules/cards.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";

require("../../@babel/runtime/helpers/Arrayincludes");
var _toConsumableArray2 = require("../../@babel/runtime/helpers/toConsumableArray");
var _createForOfIteratorHelper2 = require("../../@babel/runtime/helpers/createForOfIteratorHelper");
var _regeneratorRuntime2 = require("../../@babel/runtime/helpers/regeneratorRuntime");
var _asyncToGenerator2 = require("../../@babel/runtime/helpers/asyncToGenerator");
var _objectWithoutProperties2 = require("../../@babel/runtime/helpers/objectWithoutProperties");
var _excluded = ["data"];
var e = require("../../common/vendor.js"),
  t = require("../../utils/card-save.js"),
  r = require("../../utils/chameleon-protocol.js");
function a(e) {
  e.statistics.totalCards = e.cards.length, e.statistics.totalSize = e.cards.reduce(function (e, t) {
    return e + (t.data ? JSON.stringify(t.data).length : 0);
  }, 0);
  var t = e.cards.reduce(function (e, t) {
    var r = new Date(t.modifiedAt || t.createdAt);
    return r > e ? r : e;
  }, new Date(0));
  e.statistics.lastModified = t.getTime() > 0 ? t.toISOString() : null, e.statistics.hfCards = e.cards.filter(function (e) {
    return 2 === e.getFrequency();
  }).length, e.statistics.lfCards = e.cards.filter(function (e) {
    return 1 === e.getFrequency();
  }).length;
}
function s(e) {
  var t = {
    all: e.cards.length,
    hf: 0,
    lf: 0,
    mifare_classic: 0,
    mifare_ultralight: 0,
    em410x: 0,
    ntag: 0,
    other: 0
  };
  e.cards.forEach(function (e) {
    2 === e.getFrequency() ? t.hf++ : 1 === e.getFrequency() && t.lf++, e.isMifareClassic() && t.mifare_classic++, e.isMifareUltralight() && t.mifare_ultralight++, e.tag === r.TagType.EM410X && t.em410x++, [r.TagType.NTAG_213, r.TagType.NTAG_215, r.TagType.NTAG_216].includes(e.tag) && t.ntag++;
  }), console.log("counts", t), e.categories.forEach(function (e) {
    e.count = t[e.id] || 0;
  });
}
var o = {
  namespaced: !0,
  state: {
    cards: [],
    selectedCard: null,
    selectedCards: [],
    currentCard: null,
    categories: [{
      id: "all",
      name: "全部",
      icon: "list",
      count: 0
    }, {
      id: "hf",
      name: "HF卡片",
      icon: "creditcard",
      count: 0
    }, {
      id: "lf",
      name: "LF卡片",
      icon: "wifi",
      count: 0
    }, {
      id: "mifare_classic",
      name: "Mifare Classic",
      icon: "creditcard",
      count: 0
    }, {
      id: "mifare_ultralight",
      name: "Mifare Ultralight",
      icon: "tag",
      count: 0
    }, {
      id: "em410x",
      name: "EM410X",
      icon: "key",
      count: 0
    }, {
      id: "ntag",
      name: "NTAG",
      icon: "chip",
      count: 0
    }, {
      id: "other",
      name: "其他",
      icon: "dots",
      count: 0
    }],
    currentCategory: "all",
    searchKeyword: "",
    viewMode: "list",
    sortBy: "modified",
    sortOrder: "desc",
    tags: [],
    selectedTags: [],
    loading: !1,
    error: null,
    syncing: !1,
    statistics: {
      totalCards: 0,
      totalSize: 0,
      lastModified: null,
      hfCards: 0,
      lfCards: 0
    }
  },
  mutations: {
    SET_CARDS: function SET_CARDS(e, r) {
      e.cards = r.map(function (e) {
        return e instanceof t.CardSave ? e : t.CardSave.fromObject(e);
      }), a(e), s(e);
    },
    ADD_CARD: function ADD_CARD(e, r) {
      var o = r instanceof t.CardSave ? r : new t.CardSave(r);
      e.cards.unshift(o), a(e), s(e);
    },
    UPDATE_CARD: function UPDATE_CARD(e, _ref) {
      var t = _ref.id,
        r = _ref.updates;
      var o = e.cards.findIndex(function (e) {
        return e.id === t;
      });
      if (-1 !== o) {
        var _t = e.cards[o];
        if (r.data) {
          console.log("🔍 UPDATE_CARD - 更新前卡片数据块数量:", _t.data ? _t.data.length : 0), console.log("🔍 UPDATE_CARD - 接收到的数据块数量:", r.data.length), _t.data = r.data.map(function (e, t) {
            return e instanceof Uint8Array ? e : Array.isArray(e) ? new Uint8Array(e) : (console.warn("\uD83D\uDD0D UPDATE_CARD - \u5757".concat(t, "\u683C\u5F0F\u5F02\u5E38:"), e), new Uint8Array([]));
          }), console.log("🔍 UPDATE_CARD - 更新后卡片数据块数量:", _t.data.length);
          var _e = r.data,
            _a = _objectWithoutProperties2(r, _excluded);
          Object.assign(_t, _a);
        } else Object.assign(_t, r);
        _t.touch(), e.cards.splice(o, 1, _t), a(e), s(e);
      }
    },
    DELETE_CARD: function DELETE_CARD(e, t) {
      var r = e.cards.findIndex(function (e) {
        return e.id === t;
      });
      -1 !== r && (e.cards.splice(r, 1), a(e), s(e));
    },
    DELETE_CARDS: function DELETE_CARDS(e, t) {
      e.cards = e.cards.filter(function (e) {
        return !t.includes(e.id);
      }), a(e), s(e);
    },
    SET_ERROR: function SET_ERROR(e, t) {
      e.error = t;
    },
    SET_SELECTED_CARDS: function SET_SELECTED_CARDS(e, t) {
      e.selectedCards = t;
    },
    TOGGLE_CARD_SELECTION: function TOGGLE_CARD_SELECTION(e, t) {
      var r = e.selectedCards.indexOf(t);
      -1 === r ? e.selectedCards.push(t) : e.selectedCards.splice(r, 1);
    },
    CLEAR_SELECTION: function CLEAR_SELECTION(e) {
      e.selectedCards = [];
    },
    SET_CURRENT_CARD: function SET_CURRENT_CARD(e, t) {
      e.currentCard = t;
    },
    SET_SELECTED_CARD: function SET_SELECTED_CARD(e, t) {
      e.selectedCard = t;
    },
    SET_CURRENT_CATEGORY: function SET_CURRENT_CATEGORY(e, t) {
      e.currentCategory = t;
    },
    SET_SEARCH_KEYWORD: function SET_SEARCH_KEYWORD(e, t) {
      e.searchKeyword = t;
    },
    SET_VIEW_MODE: function SET_VIEW_MODE(t, r) {
      t.viewMode = r, e.index.setStorageSync("cards_view_mode", r);
    },
    SET_SORT: function SET_SORT(t, _ref2) {
      var r = _ref2.sortBy,
        a = _ref2.sortOrder;
      t.sortBy = r, t.sortOrder = a, e.index.setStorageSync("cards_sort", {
        sortBy: r,
        sortOrder: a
      });
    },
    SET_TAGS: function SET_TAGS(e, t) {
      e.tags = t;
    },
    ADD_TAG: function ADD_TAG(e, t) {
      e.tags.find(function (e) {
        return e.name === t.name;
      }) || e.tags.push({
        id: Date.now().toString(36),
        name: t.name,
        color: t.color || "#007AFF",
        count: 0
      });
    },
    SET_SELECTED_TAGS: function SET_SELECTED_TAGS(e, t) {
      e.selectedTags = t;
    },
    SET_LOADING: function SET_LOADING(e, t) {
      e.loading = t;
    },
    SET_SYNCING: function SET_SYNCING(e, t) {
      e.syncing = t;
    }
  },
  actions: {
    initCards: function initCards(_ref3) {
      return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee() {
        var t, r, _a2, _s;
        return _regeneratorRuntime2().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              t = _ref3.commit, r = _ref3.dispatch;
              t("SET_LOADING", !0);
              _context.prev = 2;
              _context.next = 5;
              return r("loadCardsFromStorage");
            case 5:
              _a2 = e.index.getStorageSync("cards_view_mode") || "grid", _s = e.index.getStorageSync("cards_sort") || {
                sortBy: "modified",
                sortOrder: "desc"
              };
              t("SET_VIEW_MODE", _a2), t("SET_SORT", _s), console.log("✅ 卡包数据初始化完成");
              _context.next = 12;
              break;
            case 9:
              _context.prev = 9;
              _context.t0 = _context["catch"](2);
              console.error("❌ 卡包数据初始化失败:", _context.t0), e.index.showToast({
                title: "加载卡包数据失败",
                icon: "error"
              });
            case 12:
              _context.prev = 12;
              t("SET_LOADING", !1);
              return _context.finish(12);
            case 15:
            case "end":
              return _context.stop();
          }
        }, _callee, null, [[2, 9, 12, 15]]);
      }))();
    },
    loadCardsFromStorage: function loadCardsFromStorage(_ref4) {
      return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee2() {
        var r, _s2, _o, _e2, c;
        return _regeneratorRuntime2().wrap(function _callee2$(_context2) {
          while (1) switch (_context2.prev = _context2.next) {
            case 0:
              r = _ref4.commit;
              _context2.prev = 1;
              _s2 = e.index.getStorageSync("chameleon_cards");
              _o = [];
              if (_s2) try {
                _e2 = JSON.parse(_s2);
                Array.isArray(_e2) ? _o = _e2.map(function (e) {
                  return t.CardSave.fromObject(e);
                }) : (console.warn("⚠️ 存储的卡片数据格式不正确，重置为空数组"), _o = []);
              } catch (a) {
                console.error("❌ JSON解析失败，清除损坏的数据:", a), e.index.removeStorageSync("chameleon_cards"), _o = [];
              }
              c = e.index.getStorageSync("chameleon_tags") || [];
              return _context2.abrupt("return", (r("SET_CARDS", _o), r("SET_TAGS", c), console.log("\uD83D\uDCC2 \u4ECE\u672C\u5730\u5B58\u50A8\u52A0\u8F7D\u4E86 ".concat(_o.length, " \u5F20\u5361\u7247")), _o));
            case 9:
              _context2.prev = 9;
              _context2.t0 = _context2["catch"](1);
              return _context2.abrupt("return", (console.error("❌ 从本地存储加载卡片失败:", _context2.t0), r("SET_CARDS", []), r("SET_TAGS", []), []));
            case 12:
            case "end":
              return _context2.stop();
          }
        }, _callee2, null, [[1, 9]]);
      }))();
    },
    saveCardsToStorage: function saveCardsToStorage(_ref5) {
      return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee3() {
        var t, _r;
        return _regeneratorRuntime2().wrap(function _callee3$(_context3) {
          while (1) switch (_context3.prev = _context3.next) {
            case 0:
              t = _ref5.state;
              _context3.prev = 1;
              _r = t.cards.map(function (e) {
                return e.toObject();
              });
              e.index.setStorageSync("chameleon_cards", JSON.stringify(_r)), e.index.setStorageSync("chameleon_tags", t.tags), console.log("\uD83D\uDCBE \u5DF2\u4FDD\u5B58 ".concat(t.cards.length, " \u5F20\u5361\u7247\u5230\u672C\u5730\u5B58\u50A8"));
              _context3.next = 9;
              break;
            case 6:
              _context3.prev = 6;
              _context3.t0 = _context3["catch"](1);
              throw console.error("❌ 保存卡片到本地存储失败:", _context3.t0), _context3.t0;
            case 9:
            case "end":
              return _context3.stop();
          }
        }, _callee3, null, [[1, 6]]);
      }))();
    },
    createCard: function createCard(_ref6, s) {
      return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee4() {
        var r, a, _o2, c;
        return _regeneratorRuntime2().wrap(function _callee4$(_context4) {
          while (1) switch (_context4.prev = _context4.next) {
            case 0:
              r = _ref6.commit, a = _ref6.dispatch;
              _context4.prev = 1;
              _o2 = s instanceof t.CardSave ? s : new t.CardSave(s), c = _o2.validate();
              if (c.isValid) {
                _context4.next = 5;
                break;
              }
              throw new Error("\u5361\u7247\u6570\u636E\u65E0\u6548: ".concat(c.errors.join(", ")));
            case 5:
              r("ADD_CARD", _o2);
              _context4.next = 8;
              return a("saveCardsToStorage");
            case 8:
              e.index.showToast({
                title: "卡片创建成功",
                icon: "success"
              });
              console.log("[Cards] \u521B\u5EFA\u5361\u7247: ".concat(_o2.name));
              return _context4.abrupt("return", {
                success: !0,
                card: _o2
              });
            case 13:
              _context4.prev = 13;
              _context4.t0 = _context4["catch"](1);
              throw console.error("❌ 创建卡片失败:", _context4.t0), r("SET_ERROR", _context4.t0.message), e.index.showToast({
                title: "创建卡片失败",
                icon: "error"
              }), _context4.t0;
            case 16:
            case "end":
              return _context4.stop();
          }
        }, _callee4, null, [[1, 13]]);
      }))();
    },
    updateCard: function updateCard(_ref7, _ref8) {
      return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee5() {
        var t, r, a, s;
        return _regeneratorRuntime2().wrap(function _callee5$(_context5) {
          while (1) switch (_context5.prev = _context5.next) {
            case 0:
              t = _ref7.commit, r = _ref7.dispatch;
              a = _ref8.id, s = _ref8.updates;
              _context5.prev = 2;
              t("UPDATE_CARD", {
                id: a,
                updates: s
              });
              _context5.next = 6;
              return r("saveCardsToStorage");
            case 6:
              e.index.showToast({
                title: "卡片更新成功",
                icon: "success"
              });
              _context5.next = 12;
              break;
            case 9:
              _context5.prev = 9;
              _context5.t0 = _context5["catch"](2);
              throw console.error("❌ 更新卡片失败:", _context5.t0), e.index.showToast({
                title: "更新卡片失败",
                icon: "error"
              }), _context5.t0;
            case 12:
            case "end":
              return _context5.stop();
          }
        }, _callee5, null, [[2, 9]]);
      }))();
    },
    deleteCard: function deleteCard(_ref9, a) {
      return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee6() {
        var t, r;
        return _regeneratorRuntime2().wrap(function _callee6$(_context6) {
          while (1) switch (_context6.prev = _context6.next) {
            case 0:
              t = _ref9.commit, r = _ref9.dispatch;
              _context6.prev = 1;
              t("DELETE_CARD", a);
              _context6.next = 5;
              return r("saveCardsToStorage");
            case 5:
              e.index.showToast({
                title: "卡片删除成功",
                icon: "success"
              });
              _context6.next = 11;
              break;
            case 8:
              _context6.prev = 8;
              _context6.t0 = _context6["catch"](1);
              throw console.error("❌ 删除卡片失败:", _context6.t0), e.index.showToast({
                title: "删除卡片失败",
                icon: "error"
              }), _context6.t0;
            case 11:
            case "end":
              return _context6.stop();
          }
        }, _callee6, null, [[1, 8]]);
      }))();
    },
    deleteCards: function deleteCards(_ref10, a) {
      return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee7() {
        var t, r;
        return _regeneratorRuntime2().wrap(function _callee7$(_context7) {
          while (1) switch (_context7.prev = _context7.next) {
            case 0:
              t = _ref10.commit, r = _ref10.dispatch;
              _context7.prev = 1;
              t("DELETE_CARDS", a);
              _context7.next = 5;
              return r("saveCardsToStorage");
            case 5:
              e.index.showToast({
                title: "\u5DF2\u5220\u9664 ".concat(a.length, " \u5F20\u5361\u7247"),
                icon: "success"
              });
              _context7.next = 11;
              break;
            case 8:
              _context7.prev = 8;
              _context7.t0 = _context7["catch"](1);
              throw console.error("❌ 批量删除卡片失败:", _context7.t0), e.index.showToast({
                title: "删除卡片失败",
                icon: "error"
              }), _context7.t0;
            case 11:
            case "end":
              return _context7.stop();
          }
        }, _callee7, null, [[1, 8]]);
      }))();
    },
    deployCardToSlot: function deployCardToSlot(_ref11, _ref12) {
      var _this = this;
      return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee8() {
        var t, r, a, _s3;
        return _regeneratorRuntime2().wrap(function _callee8$(_context8) {
          while (1) switch (_context8.prev = _context8.next) {
            case 0:
              t = _ref11.dispatch;
              r = _ref12.cardId, a = _ref12.slotIndex;
              _context8.prev = 2;
              _s3 = _this.state.cards.cards.find(function (e) {
                return e.id === r;
              });
              if (_s3) {
                _context8.next = 6;
                break;
              }
              throw new Error("卡片不存在");
            case 6:
              _context8.next = 8;
              return t("slots/updateSlot", {
                index: a,
                updates: {
                  name: _s3.name,
                  type: _s3.type,
                  data: _s3.data,
                  enabled: !0
                }
              }, {
                root: !0
              });
            case 8:
              e.index.showToast({
                title: "\u5361\u7247\u5DF2\u90E8\u7F72\u5230\u5361\u69FD ".concat(a + 1),
                icon: "success"
              });
              _context8.next = 14;
              break;
            case 11:
              _context8.prev = 11;
              _context8.t0 = _context8["catch"](2);
              throw console.error("❌ 部署卡片到卡槽失败:", _context8.t0), e.index.showToast({
                title: "部署失败",
                icon: "error"
              }), _context8.t0;
            case 14:
            case "end":
              return _context8.stop();
          }
        }, _callee8, null, [[2, 11]]);
      }))();
    },
    importCardFromSlot: function importCardFromSlot(_ref13, _ref14) {
      return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee9() {
        var r, a, s, _o3;
        return _regeneratorRuntime2().wrap(function _callee9$(_context9) {
          while (1) switch (_context9.prev = _context9.next) {
            case 0:
              r = _ref13.dispatch;
              a = _ref14.slotData, s = _ref14.slotId;
              _context9.prev = 2;
              _o3 = t.CardSaveUtils.fromSlotData(a, s);
              _context9.next = 6;
              return r("createCard", _o3);
            case 6:
              e.index.showToast({
                title: "\u5DF2\u4ECE\u5361\u69FD ".concat(s, " \u5BFC\u5165\u5361\u7247"),
                icon: "success"
              });
              return _context9.abrupt("return", _o3);
            case 10:
              _context9.prev = 10;
              _context9.t0 = _context9["catch"](2);
              throw console.error("❌ 从卡槽导入卡片失败:", _context9.t0), e.index.showToast({
                title: "导入失败",
                icon: "error"
              }), _context9.t0;
            case 13:
            case "end":
              return _context9.stop();
          }
        }, _callee9, null, [[2, 10]]);
      }))();
    },
    cloneCard: function cloneCard(_ref15, _ref16) {
      return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee10() {
        var t, r, a, s, _o4, c;
        return _regeneratorRuntime2().wrap(function _callee10$(_context10) {
          while (1) switch (_context10.prev = _context10.next) {
            case 0:
              t = _ref15.dispatch, r = _ref15.getters;
              a = _ref16.id, s = _ref16.newName;
              _context10.prev = 2;
              _o4 = r.getCardById(a);
              if (_o4) {
                _context10.next = 6;
                break;
              }
              throw new Error("找不到要克隆的卡片");
            case 6:
              c = _o4.clone(s);
              _context10.next = 9;
              return t("createCard", c);
            case 9:
              e.index.showToast({
                title: "卡片克隆成功",
                icon: "success"
              });
              console.log("[Cards] \u514B\u9686\u5361\u7247: ".concat(_o4.name, " -> ").concat(c.name));
              return _context10.abrupt("return", c);
            case 14:
              _context10.prev = 14;
              _context10.t0 = _context10["catch"](2);
              throw console.error("[Cards] 克隆卡片失败:", _context10.t0), _context10.t0;
            case 17:
            case "end":
              return _context10.stop();
          }
        }, _callee10, null, [[2, 14]]);
      }))();
    },
    setSearchQuery: function setSearchQuery(_ref17, t) {
      var e = _ref17.commit;
      e("SET_SEARCH_KEYWORD", t);
    },
    selectCards: function selectCards(_ref18, t) {
      var e = _ref18.commit;
      e("SET_SELECTED_CARDS", t);
    },
    toggleCardSelection: function toggleCardSelection(_ref19, t) {
      var e = _ref19.commit;
      e("TOGGLE_CARD_SELECTION", t);
    },
    clearSelection: function clearSelection(_ref20) {
      var e = _ref20.commit;
      e("CLEAR_SELECTION");
    },
    setCurrentCard: function setCurrentCard(_ref21, t) {
      var e = _ref21.commit;
      e("SET_CURRENT_CARD", t);
    },
    clearError: function clearError(_ref22) {
      var e = _ref22.commit;
      e("SET_ERROR", null);
    },
    validateCards: function validateCards(_ref23) {
      var e = _ref23.state;
      return t.CardSaveUtils.validateCards(e.cards);
    },
    exportCards: function exportCards(_ref24, _ref25) {
      return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee11() {
        var e, t, _ref25$format, r, _require, _a3, _s4, _o5;
        return _regeneratorRuntime2().wrap(function _callee11$(_context11) {
          while (1) switch (_context11.prev = _context11.next) {
            case 0:
              e = _ref24.state;
              t = _ref25.cardIds, _ref25$format = _ref25.format, r = _ref25$format === void 0 ? "json" : _ref25$format;
              _context11.prev = 2;
              _require = require("../../utils/card-import-export.js"), _a3 = _require.CardImportExport;
              if (!(_s4 = t && t.length > 0 ? e.cards.filter(function (e) {
                return t.includes(e.id);
              }) : e.cards, 0 === _s4.length)) {
                _context11.next = 6;
                break;
              }
              throw new Error("没有可导出的卡片");
            case 6:
              _o5 = _a3.exportCards(_s4, r);
              return _context11.abrupt("return", (console.log("[Cards] \u5BFC\u51FA ".concat(_s4.length, " \u5F20\u5361\u7247\u4E3A ").concat(r, " \u683C\u5F0F")), _o5));
            case 10:
              _context11.prev = 10;
              _context11.t0 = _context11["catch"](2);
              throw console.error("[Cards] 导出卡片失败:", _context11.t0), _context11.t0;
            case 13:
            case "end":
              return _context11.stop();
          }
        }, _callee11, null, [[2, 10]]);
      }))();
    },
    importCards: function importCards(_ref26, _ref27) {
      return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee12() {
        var e, t, r, a, s, _require2, _o6, c, _iterator, _step, _t2;
        return _regeneratorRuntime2().wrap(function _callee12$(_context12) {
          while (1) switch (_context12.prev = _context12.next) {
            case 0:
              e = _ref26.commit, t = _ref26.dispatch;
              r = _ref27.content, a = _ref27.format, s = _ref27.filename;
              _context12.prev = 2;
              _require2 = require("../../utils/card-import-export.js"), _o6 = _require2.CardImportExport;
              a || (a = _o6.detectFormat(r, s));
              c = _o6.importCards(r, a);
              if (!(0 === c.length)) {
                _context12.next = 8;
                break;
              }
              throw new Error("没有找到有效的卡片数据");
            case 8:
              _iterator = _createForOfIteratorHelper2(c);
              try {
                for (_iterator.s(); !(_step = _iterator.n()).done;) {
                  _t2 = _step.value;
                  e("ADD_CARD", _t2);
                }
              } catch (err) {
                _iterator.e(err);
              } finally {
                _iterator.f();
              }
              _context12.next = 12;
              return t("saveToStorage");
            case 12:
              console.log("[Cards] \u6210\u529F\u5BFC\u5165 ".concat(c.length, " \u5F20\u5361\u7247"));
              return _context12.abrupt("return", {
                success: !0,
                count: c.length,
                cards: c
              });
            case 16:
              _context12.prev = 16;
              _context12.t0 = _context12["catch"](2);
              throw console.error("[Cards] 导入卡片失败:", _context12.t0), e("SET_ERROR", _context12.t0.message), _context12.t0;
            case 19:
            case "end":
              return _context12.stop();
          }
        }, _callee12, null, [[2, 16]]);
      }))();
    },
    importFromFile: function importFromFile(_ref28) {
      var _this2 = this;
      return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee14() {
        var t;
        return _regeneratorRuntime2().wrap(function _callee14$(_context14) {
          while (1) switch (_context14.prev = _context14.next) {
            case 0:
              t = _ref28.dispatch;
              return _context14.abrupt("return", new Promise(function (r, a) {
                e.index.chooseFile({
                  count: 1,
                  extension: [".json", ".dump", ".nfc", ".txt"],
                  success: function () {
                    var _success = _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee13(e) {
                      var _a4, _s5, _o7;
                      return _regeneratorRuntime2().wrap(function _callee13$(_context13) {
                        while (1) switch (_context13.prev = _context13.next) {
                          case 0:
                            _context13.prev = 0;
                            _a4 = e.tempFiles[0];
                            _context13.next = 4;
                            return _this2.readFileContent(_a4.path);
                          case 4:
                            _s5 = _context13.sent;
                            _context13.next = 7;
                            return t("importCards", {
                              content: _s5,
                              filename: _a4.name
                            });
                          case 7:
                            _o7 = _context13.sent;
                            r(_o7);
                            _context13.next = 14;
                            break;
                          case 11:
                            _context13.prev = 11;
                            _context13.t0 = _context13["catch"](0);
                            a(_context13.t0);
                          case 14:
                          case "end":
                            return _context13.stop();
                        }
                      }, _callee13, null, [[0, 11]]);
                    }));
                    function success(_x) {
                      return _success.apply(this, arguments);
                    }
                    return success;
                  }(),
                  fail: function fail() {
                    a(new Error("文件选择失败"));
                  }
                });
              }));
            case 2:
            case "end":
              return _context14.stop();
          }
        }, _callee14);
      }))();
    },
    exportToFile: function exportToFile(_ref29, _ref30) {
      return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee15() {
        var t, r, _ref30$format, a, _s6, _o8;
        return _regeneratorRuntime2().wrap(function _callee15$(_context15) {
          while (1) switch (_context15.prev = _context15.next) {
            case 0:
              t = _ref29.dispatch;
              r = _ref30.cardIds, _ref30$format = _ref30.format, a = _ref30$format === void 0 ? "json" : _ref30$format;
              _context15.prev = 2;
              _context15.next = 5;
              return t("exportCards", {
                cardIds: r,
                format: a
              });
            case 5:
              _s6 = _context15.sent;
              _o8 = "".concat(e.index.env.USER_DATA_PATH, "/").concat(_s6.filename);
              _context15.next = 9;
              return e.index.saveFile({
                tempFilePath: _s6.content,
                filePath: _o8
              });
            case 9:
              return _context15.abrupt("return", {
                success: !0,
                filePath: _o8,
                filename: _s6.filename
              });
            case 12:
              _context15.prev = 12;
              _context15.t0 = _context15["catch"](2);
              throw console.error("[Cards] 导出到文件失败:", _context15.t0), _context15.t0;
            case 15:
            case "end":
              return _context15.stop();
          }
        }, _callee15, null, [[2, 12]]);
      }))();
    },
    readFileContent: function readFileContent(t) {
      return new Promise(function (r, a) {
        e.index.getFileSystemManager().readFile({
          filePath: t,
          encoding: "utf8",
          success: function success(e) {
            r(e.data);
          },
          fail: function fail() {
            a(new Error("读取文件失败"));
          }
        });
      });
    }
  },
  getters: {
    allCards: function allCards(e) {
      return e.cards;
    },
    cardCount: function cardCount(e) {
      return e.cards.length;
    },
    filteredCards: function filteredCards(e) {
      var a = _toConsumableArray2(e.cards);
      if ("all" !== e.currentCategory) switch (e.currentCategory) {
        case "hf":
          a = a.filter(function (e) {
            return 2 === e.getFrequency();
          });
          break;
        case "lf":
          a = a.filter(function (e) {
            return 1 === e.getFrequency();
          });
          break;
        case "mifare_classic":
          a = a.filter(function (e) {
            return e.isMifareClassic();
          });
          break;
        case "mifare_ultralight":
          a = a.filter(function (e) {
            return e.isMifareUltralight();
          });
          break;
        case "em410x":
          a = a.filter(function (e) {
            return e.tag === r.TagType.EM410X;
          });
          break;
        case "ntag":
          a = a.filter(function (e) {
            return [r.TagType.NTAG_213, r.TagType.NTAG_215, r.TagType.NTAG_216].includes(e.tag);
          });
          break;
        default:
          a = a.filter(function (e) {
            return !e.isMifareClassic() && !e.isMifareUltralight() && e.tag !== r.TagType.EM410X;
          });
      }
      return e.selectedTags.length > 0 && (a = a.filter(function (t) {
        return e.selectedTags.some(function (e) {
          return t.tags && t.tags.includes(e);
        });
      })), e.searchKeyword && (a = t.CardSaveUtils.searchCards(a, e.searchKeyword)), a = t.CardSaveUtils.sortCards(a, e.sortBy, e.sortOrder), a;
    },
    cardsByType: function cardsByType(e, r) {
      return t.CardSaveUtils.groupByType(r.filteredCards);
    },
    getCardById: function getCardById(e) {
      return function (t) {
        return e.cards.find(function (e) {
          return e.id === t;
        });
      };
    },
    selectedCardObjects: function selectedCardObjects(e) {
      return e.cards.filter(function (t) {
        return e.selectedCards.includes(t.id);
      });
    },
    hfCards: function hfCards(e) {
      return e.cards.filter(function (e) {
        return 2 === e.getFrequency();
      });
    },
    lfCards: function lfCards(e) {
      return e.cards.filter(function (e) {
        return 1 === e.getFrequency();
      });
    },
    hasError: function hasError(e) {
      return !!e.error;
    },
    isLoading: function isLoading(e) {
      return e.loading;
    }
  }
};
exports.cards = o; 
 			}); 
		define("store/modules/device.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";

var _slicedToArray2 = require("../../@babel/runtime/helpers/slicedToArray");
var _regeneratorRuntime2 = require("../../@babel/runtime/helpers/regeneratorRuntime");
var _asyncToGenerator2 = require("../../@babel/runtime/helpers/asyncToGenerator");
var _objectSpread2 = require("../../@babel/runtime/helpers/objectSpread2");
var e = require("../../common/vendor.js"),
  t = require("../../utils/chameleon-protocol.js"),
  c = require("../../services/bluetooth.js"),
  n = {
    namespaced: !0,
    state: {
      isConnected: !1,
      isConnecting: !1,
      connectionError: null,
      bluetoothState: {
        available: !1,
        discovering: !1
      },
      connectedDevice: null,
      deviceInfo: null,
      batteryInfo: null,
      deviceMode: t.DeviceMode.TAG,
      activeSlot: 0,
      deviceSettings: null,
      capabilities: {},
      recentDevices: [],
      autoConnect: !1,
      lastConnectedDeviceId: null,
      licenseKey: "",
      trialCount: {
        usedCount: 0,
        remainingCount: 0
      },
      chipId: ""
    },
    mutations: {
      SET_CONNECTION_STATUS: function SET_CONNECTION_STATUS(e, t) {
        e.isConnected = t, t || (e.connectedDevice = null, e.deviceInfo = null, e.batteryInfo = null);
      },
      SET_CONNECTING_STATUS: function SET_CONNECTING_STATUS(e, t) {
        e.isConnecting = t, t || (e.connectionError = null);
      },
      SET_CONNECTION_ERROR: function SET_CONNECTION_ERROR(e, t) {
        e.connectionError = t, e.isConnecting = !1;
      },
      UPDATE_BLUETOOTH_STATE: function UPDATE_BLUETOOTH_STATE(e, t) {
        e.bluetoothState = _objectSpread2(_objectSpread2({}, e.bluetoothState), t);
      },
      SET_CONNECTED_DEVICE: function SET_CONNECTED_DEVICE(e, t) {
        if (e.connectedDevice = t, t) {
          e.lastConnectedDeviceId = t.deviceId;
          var _c = e.recentDevices.findIndex(function (e) {
            return e.deviceId === t.deviceId;
          });
          _c >= 0 && e.recentDevices.splice(_c, 1), e.recentDevices.unshift(_objectSpread2(_objectSpread2({}, t), {}, {
            lastConnected: Date.now()
          })), e.recentDevices.length > 10 && e.recentDevices.pop();
        }
      },
      SET_DEVICE_INFO: function SET_DEVICE_INFO(e, t) {
        e.deviceInfo = t;
      },
      SET_BATTERY_INFO: function SET_BATTERY_INFO(e, t) {
        e.batteryInfo = t;
      },
      SET_DEVICE_CAPABILITIES: function SET_DEVICE_CAPABILITIES(e, t) {
        e.capabilities = t;
      },
      SET_DEVICE_SETTINGS: function SET_DEVICE_SETTINGS(e, t) {
        e.deviceSettings = t;
      },
      SET_DEVICE_MODE: function SET_DEVICE_MODE(e, t) {
        e.deviceMode = t;
      },
      SET_ACTIVE_SLOT: function SET_ACTIVE_SLOT(e, t) {
        e.activeSlot = t;
      },
      SET_AUTO_CONNECT: function SET_AUTO_CONNECT(e, t) {
        e.autoConnect = t;
      },
      SET_LAST_CONNECTED_DEVICE_ID: function SET_LAST_CONNECTED_DEVICE_ID(e, t) {
        e.lastConnectedDeviceId = t;
      },
      UPDATE_SETTINGS: function UPDATE_SETTINGS(e, t) {
        void 0 !== t.autoConnect && (e.autoConnect = t.autoConnect), void 0 !== t.lastConnectedDeviceId && (e.lastConnectedDeviceId = t.lastConnectedDeviceId);
      },
      CLEAR_DEVICE_DATA: function CLEAR_DEVICE_DATA(e) {
        e.isConnected = !1, e.isConnecting = !1, e.connectionError = null, e.connectedDevice = null, e.deviceInfo = null, e.batteryInfo = null, e.deviceMode = t.DeviceMode.TAG, e.activeSlot = 0, e.capabilities = {}, e.deviceSettings = null;
      },
      SET_LICENSE_KEY: function SET_LICENSE_KEY(e, t) {
        e.licenseKey = t;
      },
      SET_TRIAL_COUNT: function SET_TRIAL_COUNT(e, t) {
        e.trialCount = t;
      },
      SET_CHIP_ID: function SET_CHIP_ID(e, t) {
        e.chipId = t;
      }
    },
    actions: {
      setConnectionStatus: function setConnectionStatus(_ref, t) {
        var e = _ref.commit;
        e("SET_CONNECTION_STATUS", t);
      },
      setConnectingStatus: function setConnectingStatus(_ref2, t) {
        var e = _ref2.commit;
        e("SET_CONNECTING_STATUS", t);
      },
      setConnectionError: function setConnectionError(_ref3, t) {
        var e = _ref3.commit;
        e("SET_CONNECTION_ERROR", t);
      },
      setConnectedDevice: function setConnectedDevice(_ref4, t) {
        var e = _ref4.commit;
        e("SET_CONNECTED_DEVICE", t), t && e("SET_CONNECTION_STATUS", !0);
      },
      updateDeviceInfo: function updateDeviceInfo(_ref5, t) {
        var e = _ref5.commit;
        e("SET_DEVICE_INFO", t), t.mode && e("SET_DEVICE_MODE", t.mode);
      },
      updateBatteryInfo: function updateBatteryInfo(_ref6, t) {
        var e = _ref6.commit;
        e("SET_BATTERY_INFO", t);
      },
      updateDeviceCapabilities: function updateDeviceCapabilities(_ref7, t) {
        var e = _ref7.commit;
        e("SET_DEVICE_CAPABILITIES", t);
      },
      changeDeviceMode: function changeDeviceMode(_ref8, c) {
        return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee() {
          var e, t;
          return _regeneratorRuntime2().wrap(function _callee$(_context) {
            while (1) switch (_context.prev = _context.next) {
              case 0:
                e = _ref8.commit, t = _ref8.dispatch;
                _context.prev = 1;
                e("SET_DEVICE_MODE", c);
                _context.next = 5;
                return t("refreshDeviceInfo");
              case 5:
                _context.next = 10;
                break;
              case 7:
                _context.prev = 7;
                _context.t0 = _context["catch"](1);
                throw console.error("[Device Store] 切换设备模式失败", _context.t0), _context.t0;
              case 10:
              case "end":
                return _context.stop();
            }
          }, _callee, null, [[1, 7]]);
        }))();
      },
      setActiveSlot: function setActiveSlot(_ref9, c) {
        return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee2() {
          var e;
          return _regeneratorRuntime2().wrap(function _callee2$(_context2) {
            while (1) switch (_context2.prev = _context2.next) {
              case 0:
                e = _ref9.commit;
                _context2.prev = 1;
                if (t.ChameleonProtocol.isValidSlot(c)) {
                  _context2.next = 4;
                  break;
                }
                throw new Error("无效的卡槽编号");
              case 4:
                e("SET_ACTIVE_SLOT", c);
                _context2.next = 10;
                break;
              case 7:
                _context2.prev = 7;
                _context2.t0 = _context2["catch"](1);
                throw console.error("[Device Store] 设置活动卡槽失败", _context2.t0), _context2.t0;
              case 10:
              case "end":
                return _context2.stop();
            }
          }, _callee2, null, [[1, 7]]);
        }))();
      },
      refreshDeviceInfo: function refreshDeviceInfo(_ref10) {
        return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee3() {
          var e, t, _yield$Promise$all, _yield$Promise$all2, _t, _n;
          return _regeneratorRuntime2().wrap(function _callee3$(_context3) {
            while (1) switch (_context3.prev = _context3.next) {
              case 0:
                e = _ref10.commit, t = _ref10.state;
                if (c.bluetoothService.isConnected) {
                  _context3.next = 3;
                  break;
                }
                throw e("SET_CONNECTION_STATUS", !1), new Error("设备未连接");
              case 3:
                _context3.prev = 3;
                _context3.next = 6;
                return Promise.all([c.bluetoothService.getDeviceInfo(), c.bluetoothService.getBatteryInfo()]);
              case 6:
                _yield$Promise$all = _context3.sent;
                _yield$Promise$all2 = _slicedToArray2(_yield$Promise$all, 2);
                _t = _yield$Promise$all2[0];
                _n = _yield$Promise$all2[1];
                return _context3.abrupt("return", (e("SET_DEVICE_INFO", _t), e("SET_BATTERY_INFO", _n), void 0 !== _t.mode && e("SET_DEVICE_MODE", _t.mode), {
                  deviceInfo: _t,
                  batteryInfo: _n
                }));
              case 13:
                _context3.prev = 13;
                _context3.t0 = _context3["catch"](3);
                throw console.error("[Device Store] 刷新设备信息失败", _context3.t0), _context3.t0;
              case 16:
              case "end":
                return _context3.stop();
            }
          }, _callee3, null, [[3, 13]]);
        }))();
      },
      syncConnectionStatus: function syncConnectionStatus(_ref11) {
        var e = _ref11.commit;
        var t = c.bluetoothService.isConnected,
          n = c.bluetoothService.connectedDevice;
        e("SET_CONNECTION_STATUS", t), e("SET_CONNECTED_DEVICE", t && n ? n : null);
      },
      disconnectDevice: function disconnectDevice(_ref12) {
        return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee4() {
          var e;
          return _regeneratorRuntime2().wrap(function _callee4$(_context4) {
            while (1) switch (_context4.prev = _context4.next) {
              case 0:
                e = _ref12.commit;
                _context4.prev = 1;
                _context4.next = 4;
                return c.bluetoothService.disconnect();
              case 4:
                e("CLEAR_DEVICE_DATA");
                _context4.next = 10;
                break;
              case 7:
                _context4.prev = 7;
                _context4.t0 = _context4["catch"](1);
                throw console.error("[Device Store] 断开连接失败", _context4.t0), _context4.t0;
              case 10:
              case "end":
                return _context4.stop();
            }
          }, _callee4, null, [[1, 7]]);
        }))();
      },
      setAutoConnect: function setAutoConnect(_ref13, c) {
        var t = _ref13.commit;
        t("SET_AUTO_CONNECT", c), e.index.setStorageSync("autoConnect", c);
      },
      loadSettings: function loadSettings(_ref14) {
        var t = _ref14.commit;
        try {
          var _c2 = e.index.getStorageSync("autoConnect"),
            _n2 = e.index.getStorageSync("lastConnectedDeviceId"),
            o = e.index.getStorageSync("recentDevices") || [],
            i = e.index.getStorageSync("deviceSettings");
          "boolean" == typeof _c2 && t("SET_AUTO_CONNECT", _c2), _n2 && t("SET_LAST_CONNECTED_DEVICE_ID", _n2), Array.isArray(o) && o.forEach(function (e) {
            t("SET_CONNECTED_DEVICE", e);
          }), i && t("SET_DEVICE_SETTINGS", i);
        } catch (c) {
          console.error("[Device Store] 加载设置失败", c);
        }
      },
      saveSettings: function saveSettings(_ref15) {
        var t = _ref15.state;
        try {
          e.index.setStorageSync("autoConnect", t.autoConnect), e.index.setStorageSync("lastConnectedDeviceId", t.lastConnectedDeviceId), e.index.setStorageSync("recentDevices", t.recentDevices), t.deviceSettings && e.index.setStorageSync("deviceSettings", t.deviceSettings);
        } catch (c) {
          console.error("[Device Store] 保存设置失败", c);
        }
      },
      updateDeviceSettings: function updateDeviceSettings(_ref16, t) {
        var e = _ref16.commit;
        e("SET_DEVICE_SETTINGS", t);
      },
      getLicenseKey: function getLicenseKey(_ref17) {
        return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee5() {
          var e, _t2;
          return _regeneratorRuntime2().wrap(function _callee5$(_context5) {
            while (1) switch (_context5.prev = _context5.next) {
              case 0:
                e = _ref17.commit;
                _context5.prev = 1;
                _context5.next = 4;
                return c.bluetoothService.getLicenseKey();
              case 4:
                _t2 = _context5.sent;
                return _context5.abrupt("return", (e("SET_LICENSE_KEY", _t2), _t2));
              case 8:
                _context5.prev = 8;
                _context5.t0 = _context5["catch"](1);
                return _context5.abrupt("return", (console.error("[Device Store] 获取激活码失败", _context5.t0), ""));
              case 11:
              case "end":
                return _context5.stop();
            }
          }, _callee5, null, [[1, 8]]);
        }))();
      },
      setLicenseKey: function setLicenseKey(_ref18, t) {
        return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee6() {
          var e;
          return _regeneratorRuntime2().wrap(function _callee6$(_context6) {
            while (1) switch (_context6.prev = _context6.next) {
              case 0:
                e = _ref18.commit;
                _context6.prev = 1;
                _context6.next = 4;
                return c.bluetoothService.setLicenseKey(t);
              case 4:
                e("SET_LICENSE_KEY", t);
                return _context6.abrupt("return", !0);
              case 8:
                _context6.prev = 8;
                _context6.t0 = _context6["catch"](1);
                return _context6.abrupt("return", (console.error("[Device Store] 设置激活码失败", _context6.t0), !1));
              case 11:
              case "end":
                return _context6.stop();
            }
          }, _callee6, null, [[1, 8]]);
        }))();
      },
      getTrialCount: function getTrialCount(_ref19) {
        return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee7() {
          var e, _t3;
          return _regeneratorRuntime2().wrap(function _callee7$(_context7) {
            while (1) switch (_context7.prev = _context7.next) {
              case 0:
                e = _ref19.commit;
                _context7.prev = 1;
                _context7.next = 4;
                return c.bluetoothService.getTrialCount();
              case 4:
                _t3 = _context7.sent;
                return _context7.abrupt("return", (e("SET_TRIAL_COUNT", _t3), _t3));
              case 8:
                _context7.prev = 8;
                _context7.t0 = _context7["catch"](1);
                return _context7.abrupt("return", (console.error("[Device Store] 获取试用次数失败", _context7.t0), {
                  usedCount: 0,
                  remainingCount: 0
                }));
              case 11:
              case "end":
                return _context7.stop();
            }
          }, _callee7, null, [[1, 8]]);
        }))();
      },
      getDeviceChipID: function getDeviceChipID(_ref20) {
        return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee8() {
          var e, _t4;
          return _regeneratorRuntime2().wrap(function _callee8$(_context8) {
            while (1) switch (_context8.prev = _context8.next) {
              case 0:
                e = _ref20.commit;
                _context8.prev = 1;
                _context8.next = 4;
                return c.bluetoothService.getDeviceChipID();
              case 4:
                _t4 = _context8.sent;
                return _context8.abrupt("return", (e("SET_CHIP_ID", _t4), _t4));
              case 8:
                _context8.prev = 8;
                _context8.t0 = _context8["catch"](1);
                return _context8.abrupt("return", (console.error("[Device Store] 获取设备芯片ID失败", _context8.t0), ""));
              case 11:
              case "end":
                return _context8.stop();
            }
          }, _callee8, null, [[1, 8]]);
        }))();
      },
      verifyActivationCode: function verifyActivationCode(_ref21, _ref22) {
        return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee9() {
          var e, t, n, _ref22$firmwareVersio, o, i, r;
          return _regeneratorRuntime2().wrap(function _callee9$(_context9) {
            while (1) switch (_context9.prev = _context9.next) {
              case 0:
                e = _ref21.state, t = _ref21.dispatch;
                n = _ref22.code, _ref22$firmwareVersio = _ref22.firmwareVersion, o = _ref22$firmwareVersio === void 0 ? "" : _ref22$firmwareVersio;
                _context9.prev = 2;
                i = e.chipId;
                _context9.t0 = i;
                if (_context9.t0) {
                  _context9.next = 9;
                  break;
                }
                _context9.next = 8;
                return t("getDeviceChipID");
              case 8:
                i = _context9.sent;
              case 9:
                _context9.next = 11;
                return c.bluetoothService.verifyActivationCode(n, i, o);
              case 11:
                r = _context9.sent;
                _context9.t1 = r.success;
                if (!_context9.t1) {
                  _context9.next = 20;
                  break;
                }
                _context9.next = 16;
                return c.bluetoothService.setLicenseKey(n);
              case 16:
                _context9.next = 18;
                return c.bluetoothService.setSecretKey(r.secret_key);
              case 18:
                t("getLicenseKey");
                t("getTrialCount");
              case 20:
                return _context9.abrupt("return", r);
              case 23:
                _context9.prev = 23;
                _context9.t2 = _context9["catch"](2);
                return _context9.abrupt("return", (console.error("[Device Store] 验证激活码失败", _context9.t2), {
                  success: !1,
                  message: _context9.t2.message || "验证失败",
                  secret_key: ""
                }));
              case 26:
              case "end":
                return _context9.stop();
            }
          }, _callee9, null, [[2, 23]]);
        }))();
      },
      getDeviceInfo: function getDeviceInfo(_ref23) {
        return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee10() {
          var e;
          return _regeneratorRuntime2().wrap(function _callee10$(_context10) {
            while (1) switch (_context10.prev = _context10.next) {
              case 0:
                e = _ref23.dispatch;
                _context10.prev = 1;
                _context10.next = 4;
                return e("refreshDeviceInfo");
              case 4:
                return _context10.abrupt("return", _context10.sent.deviceInfo);
              case 7:
                _context10.prev = 7;
                _context10.t0 = _context10["catch"](1);
                throw console.error("[Device Store] 获取设备信息失败", _context10.t0), _context10.t0;
              case 10:
              case "end":
                return _context10.stop();
            }
          }, _callee10, null, [[1, 7]]);
        }))();
      }
    },
    getters: {
      isConnected: function isConnected(e) {
        return e.isConnected;
      },
      isConnecting: function isConnecting(e) {
        return e.isConnecting;
      },
      connectionError: function connectionError(e) {
        return e.connectionError;
      },
      connectedDevice: function connectedDevice(e) {
        return e.connectedDevice;
      },
      deviceInfo: function deviceInfo(e) {
        return e.deviceInfo;
      },
      batteryInfo: function batteryInfo(e) {
        return e.batteryInfo;
      },
      deviceStatusText: function deviceStatusText(e) {
        return e.isConnected ? "已连接" : e.isConnecting ? "连接中..." : e.connectionError ? "连接错误" : "未连接";
      },
      deviceModelName: function deviceModelName(e) {
        return e.deviceInfo && e.deviceInfo.model ? e.deviceInfo.model : "未知型号";
      },
      deviceModeName: function deviceModeName(e) {
        return e.deviceInfo && e.deviceInfo.mode ? e.deviceInfo.mode : "未知模式";
      },
      batteryStatusText: function batteryStatusText(e) {
        if (!e.batteryInfo) return "未知";
        var _e$batteryInfo = e.batteryInfo,
          t = _e$batteryInfo.level,
          c = _e$batteryInfo.isCharging;
        var n = "".concat(t || 0, "%");
        return c && (n += " (充电中)"), n;
      },
      deviceCapabilities: function deviceCapabilities(e) {
        return e.capabilities;
      },
      recentDevices: function recentDevices(e) {
        return e.recentDevices;
      },
      autoConnect: function autoConnect(e) {
        return e.autoConnect;
      },
      lastConnectedDeviceId: function lastConnectedDeviceId(e) {
        return e.lastConnectedDeviceId;
      },
      activeSlot: function activeSlot(e) {
        return e.activeSlot;
      },
      deviceSettings: function deviceSettings(e) {
        return e.deviceSettings;
      },
      shouldShowConnectionGuide: function shouldShowConnectionGuide(e) {
        return !e.isConnected && 0 === e.recentDevices.length;
      },
      licenseKey: function licenseKey(e) {
        return e.licenseKey;
      },
      isActivated: function isActivated(e) {
        return !!e.licenseKey && e.licenseKey.length > 0;
      },
      trialCount: function trialCount(e) {
        return e.trialCount;
      },
      chipId: function chipId(e) {
        return e.chipId;
      }
    }
  };
exports.device = n; 
 			}); 
		define("store/modules/geofence.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";

var _createForOfIteratorHelper2 = require("../../@babel/runtime/helpers/createForOfIteratorHelper");
var _regeneratorRuntime2 = require("../../@babel/runtime/helpers/regeneratorRuntime");
var _asyncToGenerator2 = require("../../@babel/runtime/helpers/asyncToGenerator");
var _objectSpread2 = require("../../@babel/runtime/helpers/objectSpread2");
var e = require("../../common/vendor.js"),
  t = require("../../services/location.js"),
  o = require("../../utils/geofence-utils.js");
function n(e) {
  return e * (Math.PI / 180);
}
var i = {
  namespaced: !0,
  state: {
    geofences: [],
    currentPosition: null,
    currentGeofence: null,
    isWatching: !1,
    locationPermission: "unknown",
    autoSwitchEnabled: !1,
    switchHistory: [],
    isLoading: !1,
    lastError: null,
    lastPositionUpdateTime: 0,
    positionUpdateDebounceMs: 3e3,
    lastGeofenceCheckTime: 0,
    geofenceCheckCacheMs: 5e3
  },
  mutations: {
    SET_GEOFENCES: function SET_GEOFENCES(e, t) {
      e.geofences = t || [];
    },
    ADD_GEOFENCE: function ADD_GEOFENCE(e, t) {
      e.geofences.push(t);
    },
    UPDATE_GEOFENCE: function UPDATE_GEOFENCE(e, _ref) {
      var t = _ref.id,
        o = _ref.updates;
      var n = e.geofences.findIndex(function (e) {
        return e.id === t;
      });
      n >= 0 && e.geofences.splice(n, 1, _objectSpread2(_objectSpread2({}, e.geofences[n]), o));
    },
    REMOVE_GEOFENCE: function REMOVE_GEOFENCE(e, t) {
      var o = e.geofences.findIndex(function (e) {
        return e.id === t;
      });
      o >= 0 && e.geofences.splice(o, 1);
    },
    SET_CURRENT_POSITION: function SET_CURRENT_POSITION(e, t) {
      e.currentPosition = t;
    },
    SET_CURRENT_GEOFENCE: function SET_CURRENT_GEOFENCE(e, t) {
      e.currentGeofence = t;
    },
    SET_WATCHING: function SET_WATCHING(e, t) {
      e.isWatching = t;
    },
    SET_LOCATION_PERMISSION: function SET_LOCATION_PERMISSION(e, t) {
      e.locationPermission = t;
    },
    SET_AUTO_SWITCH: function SET_AUTO_SWITCH(e, t) {
      e.autoSwitchEnabled = t;
    },
    ADD_SWITCH_RECORD: function ADD_SWITCH_RECORD(e, t) {
      e.switchHistory.unshift(t), e.switchHistory.length > 100 && (e.switchHistory = e.switchHistory.slice(0, 100));
    },
    SET_LOADING: function SET_LOADING(e, t) {
      e.isLoading = t;
    },
    SET_ERROR: function SET_ERROR(e, t) {
      e.lastError = t;
    },
    SET_LAST_POSITION_UPDATE_TIME: function SET_LAST_POSITION_UPDATE_TIME(e, t) {
      e.lastPositionUpdateTime = t;
    },
    SET_LAST_GEOFENCE_CHECK_TIME: function SET_LAST_GEOFENCE_CHECK_TIME(e, t) {
      e.lastGeofenceCheckTime = t;
    }
  },
  actions: {
    initialize: function initialize(_ref2) {
      return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee() {
        var e, t;
        return _regeneratorRuntime2().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              e = _ref2.commit, t = _ref2.dispatch;
              _context.prev = 1;
              e("SET_LOADING", !0);
              _context.next = 5;
              return t("loadGeofences");
            case 5:
              _context.next = 7;
              return t("loadSettings");
            case 7:
              _context.next = 9;
              return t("checkLocationPermission");
            case 9:
              e("SET_LOADING", !1);
              _context.next = 15;
              break;
            case 12:
              _context.prev = 12;
              _context.t0 = _context["catch"](1);
              console.error("[围栏模块] 初始化失败:", _context.t0), e("SET_ERROR", _context.t0.message), e("SET_LOADING", !1);
            case 15:
            case "end":
              return _context.stop();
          }
        }, _callee, null, [[1, 12]]);
      }))();
    },
    checkLocationPermission: function checkLocationPermission(_ref3) {
      return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee2() {
        var e, _o;
        return _regeneratorRuntime2().wrap(function _callee2$(_context2) {
          while (1) switch (_context2.prev = _context2.next) {
            case 0:
              e = _ref3.commit;
              _context2.prev = 1;
              _context2.next = 4;
              return t.locationService.checkLocationPermission();
            case 4:
              _o = _context2.sent;
              return _context2.abrupt("return", (e("SET_LOCATION_PERMISSION", _o.status), _o));
            case 8:
              _context2.prev = 8;
              _context2.t0 = _context2["catch"](1);
              throw console.error("[围栏模块] 检查定位权限失败:", _context2.t0), e("SET_LOCATION_PERMISSION", "denied"), _context2.t0;
            case 11:
            case "end":
              return _context2.stop();
          }
        }, _callee2, null, [[1, 8]]);
      }))();
    },
    requestLocationPermission: function requestLocationPermission(_ref4) {
      return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee3() {
        var e, o;
        return _regeneratorRuntime2().wrap(function _callee3$(_context3) {
          while (1) switch (_context3.prev = _context3.next) {
            case 0:
              e = _ref4.commit, o = _ref4.dispatch;
              _context3.prev = 1;
              _context3.next = 4;
              return t.locationService.requestLocationPermission();
            case 4:
              if (!_context3.sent) {
                _context3.next = 6;
                break;
              }
              return _context3.abrupt("return", (e("SET_LOCATION_PERMISSION", "authorized"), !0));
            case 6:
              _context3.next = 8;
              return t.locationService.openLocationSettings();
            case 8:
              if (!_context3.sent) {
                _context3.next = 12;
                break;
              }
              _context3.t0 = (e("SET_LOCATION_PERMISSION", "authorized"), !0);
              _context3.next = 13;
              break;
            case 12:
              _context3.t0 = (e("SET_LOCATION_PERMISSION", "denied"), !1);
            case 13:
              return _context3.abrupt("return", _context3.t0);
            case 16:
              _context3.prev = 16;
              _context3.t1 = _context3["catch"](1);
              throw console.error("[围栏模块] 申请定位权限失败:", _context3.t1), e("SET_LOCATION_PERMISSION", "denied"), _context3.t1;
            case 19:
            case "end":
              return _context3.stop();
          }
        }, _callee3, null, [[1, 16]]);
      }))();
    },
    startWatching: function startWatching(_ref5) {
      return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee4() {
        var e, o, n, i, _e;
        return _regeneratorRuntime2().wrap(function _callee4$(_context4) {
          while (1) switch (_context4.prev = _context4.next) {
            case 0:
              e = _ref5.commit, o = _ref5.dispatch, n = _ref5.state, i = _ref5.rootGetters;
              if (!n.isWatching) {
                _context4.next = 5;
                break;
              }
              console.warn("[围栏模块] 已在监听位置");
              _context4.next = 38;
              break;
            case 5:
              if (i["device/isConnected"]) {
                _context4.next = 7;
                break;
              }
              throw new Error("设备未连接，无法启用围栏功能");
            case 7:
              _context4.prev = 7;
              console.log("[围栏模块] 开始监听位置变化");
              _context4.prev = 9;
              _context4.next = 12;
              return o("slots/loadAllSlots", null, {
                root: !0
              });
            case 12:
              console.log("[围栏模块] 卡槽数据已加载");
              _context4.next = 18;
              break;
            case 15:
              _context4.prev = 15;
              _context4.t0 = _context4["catch"](9);
              console.warn("[围栏模块] 卡槽数据加载失败:", _context4.t0);
            case 18:
              _context4.next = 20;
              return t.locationService.startWatching(function (t, n) {
                if (n) return console.error("[围栏模块] 位置监听错误:", n), void e("SET_ERROR", n.message);
                t && o("handlePositionUpdate", t);
              }, {
                interval: 5e3
              });
            case 20:
              e("SET_WATCHING", !0);
              _context4.prev = 21;
              _context4.next = 24;
              return t.locationService.getCurrentPosition();
            case 24:
              _e = _context4.sent;
              _context4.next = 27;
              return o("handlePositionUpdate", _e);
            case 27:
              console.log("[围栏模块] 启用监听后立即检查完成");
              _context4.next = 33;
              break;
            case 30:
              _context4.prev = 30;
              _context4.t1 = _context4["catch"](21);
              console.warn("[围栏模块] 启用监听后立即检查失败:", _context4.t1);
            case 33:
              _context4.next = 38;
              break;
            case 35:
              _context4.prev = 35;
              _context4.t2 = _context4["catch"](7);
              throw console.error("[围栏模块] 开始监听失败:", _context4.t2), e("SET_ERROR", _context4.t2.message), _context4.t2;
            case 38:
            case "end":
              return _context4.stop();
          }
        }, _callee4, null, [[7, 35], [9, 15], [21, 30]]);
      }))();
    },
    stopWatching: function stopWatching(_ref6) {
      var e = _ref6.commit,
        o = _ref6.state;
      o.isWatching ? (console.log("[围栏模块] 停止监听位置变化"), t.locationService.stopWatching(), e("SET_WATCHING", !1), e("SET_CURRENT_GEOFENCE", null)) : console.warn("[围栏模块] 未在监听位置");
    },
    handlePositionUpdate: function handlePositionUpdate(_ref7, a) {
      return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee5() {
        var e, t, i, s, c, r, _e2, l, d, E, g, _n, _iterator, _step, _e3;
        return _regeneratorRuntime2().wrap(function _callee5$(_context5) {
          while (1) switch (_context5.prev = _context5.next) {
            case 0:
              e = _ref7.commit, t = _ref7.dispatch, i = _ref7.state, s = _ref7.rootState;
              if (a) {
                _context5.next = 3;
                break;
              }
              return _context5.abrupt("return", void console.warn("[围栏模块] 收到无效位置信息"));
            case 3:
              if (!(e("SET_CURRENT_POSITION", a), !i.autoSwitchEnabled)) {
                _context5.next = 5;
                break;
              }
              return _context5.abrupt("return");
            case 5:
              if (!(0 === i.geofences.length)) {
                _context5.next = 7;
                break;
              }
              return _context5.abrupt("return");
            case 7:
              c = Date.now(), r = c - i.lastPositionUpdateTime;
              if (!(i.currentPosition && r < i.positionUpdateDebounceMs)) {
                _context5.next = 12;
                break;
              }
              _e2 = 10;
              if (!(function (e, t, o, i) {
                var s = 6371e3,
                  a = n(o - e),
                  c = n(i - t),
                  r = Math.sin(a / 2) * Math.sin(a / 2) + Math.cos(n(e)) * Math.cos(n(o)) * Math.sin(c / 2) * Math.sin(c / 2),
                  l = 2 * Math.atan2(Math.sqrt(r), Math.sqrt(1 - r));
                return s * l;
              }(i.currentPosition.latitude, i.currentPosition.longitude, a.latitude, a.longitude) < _e2)) {
                _context5.next = 12;
                break;
              }
              return _context5.abrupt("return", void console.log("[\u56F4\u680F\u6A21\u5757] \u4F4D\u7F6E\u53D8\u5316\u5C0F\u4E8E".concat(_e2, "\u7C73\uFF0C\u8DF3\u8FC7\u56F4\u680F\u68C0\u67E5")));
            case 12:
              e("SET_LAST_POSITION_UPDATE_TIME", c);
              l = s.slots.activeSlot, d = i.currentGeofence;
              E = null, g = !0;
              if (!(d && d.enabled)) {
                _context5.next = 25;
                break;
              }
              _context5.t0 = o.isPointInPolygon(a, d.polygon);
              if (!_context5.t0) {
                _context5.next = 25;
                break;
              }
              E = d;
              g = !1;
              _context5.t1 = l !== E.slotId;
              if (!_context5.t1) {
                _context5.next = 25;
                break;
              }
              console.log("[\u56F4\u680F\u6A21\u5757] \u9700\u8981\u5207\u6362\u5361\u69FD: ".concat(l, " -> ").concat(E.slotId));
              _context5.next = 25;
              return t("handleGeofenceEnter", E);
            case 25:
              if (!g) {
                _context5.next = 59;
                break;
              }
              _n = i.geofences.filter(function (e) {
                return e.enabled;
              });
              _iterator = _createForOfIteratorHelper2(_n);
              _context5.prev = 28;
              _iterator.s();
            case 30:
              if ((_step = _iterator.n()).done) {
                _context5.next = 37;
                break;
              }
              _e3 = _step.value;
              if (!o.isPointInPolygon(a, _e3.polygon)) {
                _context5.next = 35;
                break;
              }
              E = _e3;
              return _context5.abrupt("break", 37);
            case 35:
              _context5.next = 30;
              break;
            case 37:
              _context5.next = 42;
              break;
            case 39:
              _context5.prev = 39;
              _context5.t2 = _context5["catch"](28);
              _iterator.e(_context5.t2);
            case 42:
              _context5.prev = 42;
              _iterator.f();
              return _context5.finish(42);
            case 45:
              e("SET_CURRENT_GEOFENCE", E);
              if (!E) {
                _context5.next = 54;
                break;
              }
              _context5.t3 = l !== E.slotId;
              if (!_context5.t3) {
                _context5.next = 51;
                break;
              }
              _context5.next = 51;
              return t("handleGeofenceEnter", E);
            case 51:
              (null == E ? void 0 : E.id) !== (null == d ? void 0 : d.id) && console.log("[\u56F4\u680F\u6A21\u5757] \u8FDB\u5165\u56F4\u680F: ".concat(E.name));
              _context5.next = 59;
              break;
            case 54:
              _context5.t4 = d;
              if (!_context5.t4) {
                _context5.next = 59;
                break;
              }
              console.log("[\u56F4\u680F\u6A21\u5757] \u79BB\u5F00\u56F4\u680F: ".concat(d.name));
              _context5.next = 59;
              return t("handleGeofenceExit", d);
            case 59:
            case "end":
              return _context5.stop();
          }
        }, _callee5, null, [[28, 39, 42, 45]]);
      }))();
    },
    handleGeofenceEnter: function handleGeofenceEnter(_ref8, s) {
      return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee6() {
        var t, o, n, i, a, c, r, l;
        return _regeneratorRuntime2().wrap(function _callee6$(_context6) {
          while (1) switch (_context6.prev = _context6.next) {
            case 0:
              t = _ref8.commit, o = _ref8.dispatch, n = _ref8.rootState, i = _ref8.rootGetters;
              _context6.prev = 1;
              if (i["device/isConnected"]) {
                _context6.next = 4;
                break;
              }
              return _context6.abrupt("return", void console.warn("[围栏模块] 设备未连接，无法切换卡槽"));
            case 4:
              r = n.slots.slots, l = r && r[s.slotId] ? r[s.slotId] : null;
              if (!(!l || !(null == (a = l.hf) ? void 0 : a.enabled) && !(null == (c = l.lf) ? void 0 : c.enabled))) {
                _context6.next = 8;
                break;
              }
              console.warn("[\u56F4\u680F\u6A21\u5757] \u5361\u69FD".concat(s.slotId + 1, "\u6CA1\u6709\u6709\u6548\u5361\u7247"));
              return _context6.abrupt("return", (t("ADD_SWITCH_RECORD", {
                id: Date.now(),
                timestamp: Date.now(),
                geofenceName: s.name,
                slotId: s.slotId,
                action: "enter",
                success: !1,
                error: "目标卡槽没有有效卡片"
              }), void e.index.showToast({
                title: "\u5361\u69FD".concat(s.slotId + 1, "\u65E0\u6548\u5361\u7247"),
                icon: "none",
                duration: 2e3
              })));
            case 8:
              console.log("[\u56F4\u680F\u6A21\u5757] \u51C6\u5907\u5207\u6362\u5230\u5361\u69FD ".concat(s.slotId));
              _context6.next = 11;
              return o("slots/setActiveSlot", s.slotId, {
                root: !0
              });
            case 11:
              console.log("[围栏模块] 卡槽切换完成");
              e.index.showToast({
                title: "\u81EA\u52A8\u5207\u6362\u5230\u5361\u69FD".concat(s.slotId + 1),
                icon: "success",
                duration: 2e3
              });
              t("ADD_SWITCH_RECORD", {
                id: Date.now(),
                timestamp: Date.now(),
                geofenceName: s.name,
                slotId: s.slotId,
                action: "enter",
                success: !0,
                error: null
              }), t("UPDATE_GEOFENCE", {
                id: s.id,
                updates: {
                  lastTriggerTime: Date.now(),
                  triggerCount: (s.triggerCount || 0) + 1
                }
              });
              _context6.next = 20;
              break;
            case 16:
              _context6.prev = 16;
              _context6.t0 = _context6["catch"](1);
              console.error("[围栏模块] 进入围栏处理失败:", _context6.t0);
              t("ADD_SWITCH_RECORD", {
                id: Date.now(),
                timestamp: Date.now(),
                geofenceName: s.name,
                slotId: s.slotId,
                action: "enter",
                success: !1,
                error: _context6.t0.message
              }), e.index.showToast({
                title: "卡槽切换失败",
                icon: "none",
                duration: 2e3
              }), t("SET_ERROR", _context6.t0.message);
            case 20:
            case "end":
              return _context6.stop();
          }
        }, _callee6, null, [[1, 16]]);
      }))();
    },
    handleGeofenceExit: function handleGeofenceExit(_ref9, t) {
      return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee7() {
        var e;
        return _regeneratorRuntime2().wrap(function _callee7$(_context7) {
          while (1) switch (_context7.prev = _context7.next) {
            case 0:
              e = _ref9.commit;
              console.log("[\u56F4\u680F\u6A21\u5757] \u79BB\u5F00\u56F4\u680F: ".concat(t.name));
            case 2:
            case "end":
              return _context7.stop();
          }
        }, _callee7);
      }))();
    },
    loadGeofences: function loadGeofences(_ref10) {
      return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee8() {
        var t, _o2;
        return _regeneratorRuntime2().wrap(function _callee8$(_context8) {
          while (1) switch (_context8.prev = _context8.next) {
            case 0:
              t = _ref10.commit;
              try {
                _o2 = e.index.getStorageSync("geofences");
                _o2 && t("SET_GEOFENCES", JSON.parse(_o2));
              } catch (o) {
                console.error("[围栏模块] 加载围栏数据失败:", o);
              }
            case 2:
            case "end":
              return _context8.stop();
          }
        }, _callee8);
      }))();
    },
    saveGeofences: function saveGeofences(_ref11) {
      return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee9() {
        var t;
        return _regeneratorRuntime2().wrap(function _callee9$(_context9) {
          while (1) switch (_context9.prev = _context9.next) {
            case 0:
              t = _ref11.state;
              try {
                e.index.setStorageSync("geofences", JSON.stringify(t.geofences));
              } catch (o) {
                console.error("[围栏模块] 保存围栏数据失败:", o);
              }
            case 2:
            case "end":
              return _context9.stop();
          }
        }, _callee9);
      }))();
    },
    addGeofence: function addGeofence(_ref12, n) {
      return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee10() {
        var e, t, _i, s;
        return _regeneratorRuntime2().wrap(function _callee10$(_context10) {
          while (1) switch (_context10.prev = _context10.next) {
            case 0:
              e = _ref12.commit, t = _ref12.dispatch;
              _context10.prev = 1;
              _i = o.validateGeofence(n);
              if (_i.valid) {
                _context10.next = 5;
                break;
              }
              throw new Error(_i.errors.join(", "));
            case 5:
              s = {
                id: o.generateGeofenceId(),
                name: n.name,
                slotId: n.slotId,
                polygon: n.polygon,
                enabled: !0,
                createTime: Date.now(),
                updateTime: Date.now(),
                lastTriggerTime: null,
                triggerCount: 0
              };
              e("ADD_GEOFENCE", s);
              _context10.next = 9;
              return t("saveGeofences");
            case 9:
              return _context10.abrupt("return", s);
            case 12:
              _context10.prev = 12;
              _context10.t0 = _context10["catch"](1);
              throw console.error("[围栏模块] 添加围栏失败:", _context10.t0), _context10.t0;
            case 15:
            case "end":
              return _context10.stop();
          }
        }, _callee10, null, [[1, 12]]);
      }))();
    },
    updateGeofence: function updateGeofence(_ref13, _ref14) {
      return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee11() {
        var e, t, n, i, _e4;
        return _regeneratorRuntime2().wrap(function _callee11$(_context11) {
          while (1) switch (_context11.prev = _context11.next) {
            case 0:
              e = _ref13.commit, t = _ref13.dispatch;
              n = _ref14.id, i = _ref14.updates;
              _context11.prev = 2;
              if (!(i.name || i.slotId || i.polygon)) {
                _context11.next = 7;
                break;
              }
              _e4 = o.validateGeofence(_objectSpread2({}, i));
              if (_e4.valid) {
                _context11.next = 7;
                break;
              }
              throw new Error(_e4.errors.join(", "));
            case 7:
              e("UPDATE_GEOFENCE", {
                id: n,
                updates: _objectSpread2(_objectSpread2({}, i), {}, {
                  updateTime: Date.now()
                })
              });
              _context11.next = 10;
              return t("saveGeofences");
            case 10:
              _context11.next = 15;
              break;
            case 12:
              _context11.prev = 12;
              _context11.t0 = _context11["catch"](2);
              throw console.error("[围栏模块] 更新围栏失败:", _context11.t0), _context11.t0;
            case 15:
            case "end":
              return _context11.stop();
          }
        }, _callee11, null, [[2, 12]]);
      }))();
    },
    deleteGeofence: function deleteGeofence(_ref15, o) {
      return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee12() {
        var e, t;
        return _regeneratorRuntime2().wrap(function _callee12$(_context12) {
          while (1) switch (_context12.prev = _context12.next) {
            case 0:
              e = _ref15.commit, t = _ref15.dispatch;
              _context12.prev = 1;
              e("REMOVE_GEOFENCE", o);
              _context12.next = 5;
              return t("saveGeofences");
            case 5:
              _context12.next = 10;
              break;
            case 7:
              _context12.prev = 7;
              _context12.t0 = _context12["catch"](1);
              throw console.error("[围栏模块] 删除围栏失败:", _context12.t0), _context12.t0;
            case 10:
            case "end":
              return _context12.stop();
          }
        }, _callee12, null, [[1, 7]]);
      }))();
    },
    toggleAutoSwitch: function toggleAutoSwitch(_ref16) {
      return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee13() {
        var e, t, o, n, _i2;
        return _regeneratorRuntime2().wrap(function _callee13$(_context13) {
          while (1) switch (_context13.prev = _context13.next) {
            case 0:
              e = _ref16.commit, t = _ref16.dispatch, o = _ref16.state, n = _ref16.rootGetters;
              _context13.prev = 1;
              _i2 = !o.autoSwitchEnabled;
              if (!_i2) {
                _context13.next = 18;
                break;
              }
              if (n["device/isConnected"]) {
                _context13.next = 6;
                break;
              }
              throw new Error("设备未连接");
            case 6:
              _context13.next = 8;
              return t("checkLocationPermission");
            case 8:
              _context13.t0 = _context13.sent.status;
              if (!("authorized" !== _context13.t0)) {
                _context13.next = 14;
                break;
              }
              _context13.next = 12;
              return t("requestLocationPermission");
            case 12:
              if (_context13.sent) {
                _context13.next = 14;
                break;
              }
              throw new Error("位置权限未授权");
            case 14:
              _context13.next = 16;
              return t("startWatching");
            case 16:
              _context13.next = 19;
              break;
            case 18:
              t("stopWatching");
            case 19:
              e("SET_AUTO_SWITCH", _i2);
              _context13.next = 22;
              return t("saveSettings");
            case 22:
              _context13.next = 27;
              break;
            case 24:
              _context13.prev = 24;
              _context13.t1 = _context13["catch"](1);
              throw console.error("[围栏模块] 切换自动切换功能失败:", _context13.t1), _context13.t1;
            case 27:
            case "end":
              return _context13.stop();
          }
        }, _callee13, null, [[1, 24]]);
      }))();
    },
    getCurrentPosition: function getCurrentPosition(_ref17) {
      return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee14() {
        var e, _o3;
        return _regeneratorRuntime2().wrap(function _callee14$(_context14) {
          while (1) switch (_context14.prev = _context14.next) {
            case 0:
              e = _ref17.commit;
              _context14.prev = 1;
              _context14.next = 4;
              return t.locationService.getCurrentPosition();
            case 4:
              _o3 = _context14.sent;
              return _context14.abrupt("return", (e("SET_CURRENT_POSITION", _o3), _o3));
            case 8:
              _context14.prev = 8;
              _context14.t0 = _context14["catch"](1);
              throw console.error("[围栏模块] 获取当前位置失败:", _context14.t0), _context14.t0;
            case 11:
            case "end":
              return _context14.stop();
          }
        }, _callee14, null, [[1, 8]]);
      }))();
    },
    saveSettings: function saveSettings(_ref18) {
      return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee15() {
        var t, _o4;
        return _regeneratorRuntime2().wrap(function _callee15$(_context15) {
          while (1) switch (_context15.prev = _context15.next) {
            case 0:
              t = _ref18.state;
              try {
                _o4 = {
                  autoSwitchEnabled: t.autoSwitchEnabled,
                  lastSaveTime: Date.now()
                };
                e.index.setStorageSync("geofenceSettings", JSON.stringify(_o4));
              } catch (o) {
                console.error("[围栏模块] 保存设置失败:", o);
              }
            case 2:
            case "end":
              return _context15.stop();
          }
        }, _callee15);
      }))();
    },
    loadSettings: function loadSettings(_ref19) {
      return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee16() {
        var t, _o5;
        return _regeneratorRuntime2().wrap(function _callee16$(_context16) {
          while (1) switch (_context16.prev = _context16.next) {
            case 0:
              t = _ref19.commit;
              try {
                _o5 = e.index.getStorageSync("geofenceSettings");
                if (_o5) {
                  t("SET_AUTO_SWITCH", JSON.parse(_o5).autoSwitchEnabled || !1);
                }
              } catch (o) {
                console.error("[围栏模块] 加载设置失败:", o);
              }
            case 2:
            case "end":
              return _context16.stop();
          }
        }, _callee16);
      }))();
    }
  },
  getters: {
    enabledGeofences: function enabledGeofences(e) {
      return e.geofences.filter(function (e) {
        return e.enabled;
      });
    },
    getGeofenceById: function getGeofenceById(e) {
      return function (t) {
        return e.geofences.find(function (e) {
          return e.id === t;
        });
      };
    },
    statistics: function statistics(e) {
      return {
        totalGeofences: e.geofences.length,
        enabledGeofences: e.geofences.filter(function (e) {
          return e.enabled;
        }).length,
        totalTriggers: e.geofences.reduce(function (e, t) {
          return e + (t.triggerCount || 0);
        }, 0)
      };
    },
    canEnableGeofence: function canEnableGeofence(e, t, o, n) {
      return n["device/isConnected"] && "authorized" === e.locationPermission;
    }
  }
};
exports.geofence = i; 
 			}); 
		define("store/modules/reader.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";

require("../../@babel/runtime/helpers/Arrayincludes");
var _objectDestructuringEmpty2 = require("../../@babel/runtime/helpers/objectDestructuringEmpty");
var _toConsumableArray2 = require("../../@babel/runtime/helpers/toConsumableArray");
var _regeneratorRuntime2 = require("../../@babel/runtime/helpers/regeneratorRuntime");
var _asyncToGenerator2 = require("../../@babel/runtime/helpers/asyncToGenerator");
var _objectSpread2 = require("../../@babel/runtime/helpers/objectSpread2");
var e = require("../../utils/chameleon-protocol.js"),
  s = require("../../utils/card-data.js"),
  r = require("../../services/bluetooth.js"),
  a = "hf",
  t = "idle",
  o = "scanning",
  c = "detected",
  i = "reading",
  n = "completed",
  l = "error",
  d = {
    namespaced: !0,
    state: {
      currentMode: a,
      readingState: t,
      isReaderMode: !1,
      scanSettings: {
        autoDetect: !0,
        readData: !0,
        usePassword: !1,
        password: "",
        maxRetries: 3,
        timeout: 5e3,
        useCustomKey: !1,
        customKey: "FFFFFF"
      },
      currentCard: {
        uid: "",
        type: "",
        protocol: "",
        size: 0,
        sak: "",
        atqa: "",
        ats: "",
        version: "",
        signature: "",
        sectors: [],
        pages: [],
        rawData: null,
        readTime: null,
        isComplete: !1,
        hasErrors: !1,
        errorMessage: "",
        keys: {
          keyA: [],
          keyB: []
        },
        accessBits: [],
        isEncrypted: !1
      },
      progress: {
        current: 0,
        total: 0,
        percentage: 0,
        message: "",
        eta: null,
        startTime: null,
        details: []
      },
      readHistory: [],
      supportedTypes: {
        hf: ["mifare_classic", "mifare_ultralight", "ntag", "iso14443a", "iso14443b", "iso15693"],
        lf: ["em410x", "t55xx", "hitag", "prox"]
      },
      lastError: null,
      statistics: {
        totalReads: 0,
        successfulReads: 0,
        failedReads: 0,
        hfReads: 0,
        lfReads: 0
      }
    },
    mutations: {
      SET_READER_MODE: function SET_READER_MODE(e, s) {
        e.currentMode = s;
      },
      SET_READING_STATE: function SET_READING_STATE(e, s) {
        e.readingState = s;
      },
      SET_IS_READER_MODE: function SET_IS_READER_MODE(e, s) {
        e.isReaderMode = s;
      },
      UPDATE_SCAN_SETTINGS: function UPDATE_SCAN_SETTINGS(e, s) {
        e.scanSettings = _objectSpread2(_objectSpread2({}, e.scanSettings), s);
      },
      SET_CURRENT_CARD: function SET_CURRENT_CARD(e, s) {
        e.currentCard = _objectSpread2({
          uid: "",
          type: "",
          protocol: "",
          size: 0,
          sak: "",
          atqa: "",
          ats: "",
          version: "",
          signature: "",
          sectors: [],
          pages: [],
          rawData: null,
          readTime: null,
          isComplete: !1,
          hasErrors: !1,
          errorMessage: "",
          keys: {
            keyA: [],
            keyB: []
          },
          accessBits: [],
          isEncrypted: !1
        }, s);
      },
      CLEAR_CURRENT_CARD: function CLEAR_CURRENT_CARD(e) {
        e.currentCard = {
          uid: "",
          type: "",
          protocol: "",
          size: 0,
          sak: "",
          atqa: "",
          ats: "",
          version: "",
          signature: "",
          sectors: [],
          pages: [],
          rawData: null,
          readTime: null,
          isComplete: !1,
          hasErrors: !1,
          errorMessage: "",
          keys: {
            keyA: [],
            keyB: []
          },
          accessBits: [],
          isEncrypted: !1
        };
      },
      UPDATE_PROGRESS: function UPDATE_PROGRESS(e, s) {
        if (e.progress = _objectSpread2(_objectSpread2({}, e.progress), s), e.progress.current && e.progress.total ? e.progress.percentage = Math.round(e.progress.current / e.progress.total * 100) : void 0 !== s.percentage && (e.progress.percentage = s.percentage), e.progress.current && e.progress.total && e.progress.startTime) {
          var _s = Date.now() - e.progress.startTime,
            _r = e.progress.current / _s,
            _a = e.progress.total - e.progress.current,
            _t = _a > 0 ? Math.round(_a / _r / 1e3) : 0;
          e.progress.eta = _t > 0 ? "".concat(_t, "\u79D2") : null;
        }
      },
      ADD_PROGRESS_DETAIL: function ADD_PROGRESS_DETAIL(e, s) {
        e.progress.details || (e.progress.details = []), e.progress.details.push(_objectSpread2(_objectSpread2({}, s), {}, {
          timestamp: Date.now()
        })), e.progress.details.length > 20 && (e.progress.details = e.progress.details.slice(-20));
      },
      RESET_PROGRESS: function RESET_PROGRESS(e) {
        e.progress = {
          current: 0,
          total: 0,
          percentage: 0,
          message: "",
          eta: null,
          startTime: Date.now(),
          details: []
        };
      },
      ADD_TO_HISTORY: function ADD_TO_HISTORY(e, s) {
        var r = _objectSpread2(_objectSpread2({}, s), {}, {
          id: Date.now().toString(),
          timestamp: new Date().toISOString()
        });
        e.readHistory.unshift(r), e.readHistory.length > 50 && (e.readHistory = e.readHistory.slice(0, 50));
      },
      CLEAR_HISTORY: function CLEAR_HISTORY(e) {
        e.readHistory = [];
      },
      REMOVE_FROM_HISTORY: function REMOVE_FROM_HISTORY(e, s) {
        var r = e.readHistory.findIndex(function (e) {
          return e.id === s;
        });
        -1 !== r && e.readHistory.splice(r, 1);
      },
      SET_ERROR: function SET_ERROR(e, s) {
        var r = {};
        r = "string" == typeof s ? {
          message: s,
          timestamp: Date.now()
        } : {
          title: s.title || "操作失败",
          message: s.message || "未知错误",
          details: s.details || null,
          suggestions: s.suggestions || [],
          code: s.code || "UNKNOWN_ERROR",
          timestamp: s.timestamp || Date.now()
        }, r.message.includes("设备未连接") ? r.suggestions = ["检查设备是否已开机", "确认蓝牙连接是否正常", "尝试重新连接设备"] : r.message.includes("Mifare Classic") ? r.suggestions = ["确认卡片是否为Mifare Classic类型", "尝试使用不同的密钥", "检查卡片是否损坏"] : r.message.includes("密钥") ? r.suggestions = ["检查密钥格式是否正确", "尝试使用默认密钥FFFFFFFFFFFF", "联系卡片管理员获取正确密钥"] : r.message.includes("读卡模式") && (r.suggestions = ["检查设备是否支持读卡功能", "尝试重新初始化设备", "确认设备固件版本"]), e.lastError = r;
      },
      CLEAR_ERROR: function CLEAR_ERROR(e) {
        e.lastError = null;
      },
      UPDATE_STATISTICS: function UPDATE_STATISTICS(e, s) {
        e.statistics = _objectSpread2(_objectSpread2({}, e.statistics), s);
      },
      INCREMENT_READ_COUNT: function INCREMENT_READ_COUNT(e) {
        var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},
          _ref$success = _ref.success,
          s = _ref$success === void 0 ? !1 : _ref$success,
          _ref$mode = _ref.mode,
          r = _ref$mode === void 0 ? "hf" : _ref$mode;
        e.statistics.totalReads++, s ? e.statistics.successfulReads++ : e.statistics.failedReads++, "hf" === r ? e.statistics.hfReads++ : "lf" === r && e.statistics.lfReads++;
      }
    },
    actions: {
      initializeReader: function initializeReader(_ref2) {
        return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee() {
          var e, s, _s2;
          return _regeneratorRuntime2().wrap(function _callee$(_context) {
            while (1) switch (_context.prev = _context.next) {
              case 0:
                e = _ref2.commit, s = _ref2.rootState;
                _context.prev = 1;
                if (!(e("SET_READING_STATE", t), e("CLEAR_ERROR"), console.log("[Reader] 开始初始化读卡器..."), !s.device.isConnected)) {
                  _context.next = 4;
                  break;
                }
                throw new Error("设备未连接，请先连接Chameleon设备");
              case 4:
                if (r.bluetoothService) {
                  _context.next = 6;
                  break;
                }
                throw new Error("蓝牙服务未初始化");
              case 6:
                if (r.bluetoothService.isConnected) {
                  _context.next = 8;
                  break;
                }
                throw new Error("蓝牙连接已断开，请重新连接设备");
              case 8:
                if (!("function" != typeof r.bluetoothService.setReaderDeviceMode)) {
                  _context.next = 10;
                  break;
                }
                throw new Error("设备固件版本不支持读卡功能，请升级固件");
              case 10:
                console.log("[Reader] 检查当前设备模式...");
                _context.next = 13;
                return r.bluetoothService.isReaderDeviceMode();
              case 13:
                if (!_context.sent) {
                  _context.next = 15;
                  break;
                }
                return _context.abrupt("return", (console.log("[Reader] 设备已处于读卡模式"), e("SET_IS_READER_MODE", !0), {
                  success: !0
                }));
              case 15:
                console.log("[Reader] 切换到读卡模式...");
                _context.next = 18;
                return r.bluetoothService.setReaderDeviceMode(!0);
              case 18:
                if (_context.sent) {
                  _context.next = 20;
                  break;
                }
                throw new Error("切换到读卡模式失败，请检查设备状态");
              case 20:
                _context.next = 22;
                return new Promise(function (e) {
                  return setTimeout(e, 500);
                });
              case 22:
                _context.next = 24;
                return r.bluetoothService.isReaderDeviceMode();
              case 24:
                if (_context.sent) {
                  _context.next = 26;
                  break;
                }
                throw new Error("读卡模式切换验证失败");
              case 26:
                return _context.abrupt("return", (e("SET_IS_READER_MODE", !0), console.log("[Reader] 读卡器初始化成功"), {
                  success: !0
                }));
              case 29:
                _context.prev = 29;
                _context.t0 = _context["catch"](1);
                console.error("[Reader] 初始化读卡器失败:", _context.t0);
                _s2 = {
                  title: "读卡器初始化失败",
                  message: _context.t0.message,
                  timestamp: Date.now(),
                  suggestions: []
                };
                return _context.abrupt("return", (_context.t0.message.includes("设备未连接") ? _s2.suggestions = ["检查设备是否已开机", "确认蓝牙连接是否正常", "尝试重新连接设备"] : _context.t0.message.includes("固件版本") ? _s2.suggestions = ["检查设备固件版本", "升级到最新固件", "联系技术支持"] : _context.t0.message.includes("模式切换") && (_s2.suggestions = ["重启设备后重试", "检查设备是否正常工作", "尝试重新连接设备"]), e("SET_ERROR", _s2), {
                  success: !1,
                  error: _context.t0.message
                }));
              case 34:
              case "end":
                return _context.stop();
            }
          }, _callee, null, [[1, 29]]);
        }))();
      },
      switchMode: function switchMode(_ref3, r) {
        return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee2() {
          var e, s;
          return _regeneratorRuntime2().wrap(function _callee2$(_context2) {
            while (1) switch (_context2.prev = _context2.next) {
              case 0:
                e = _ref3.commit, s = _ref3.state;
                _context2.prev = 1;
                if (!(s.readingState === o || s.readingState === i)) {
                  _context2.next = 4;
                  break;
                }
                throw new Error("正在读取中，无法切换模式");
              case 4:
                return _context2.abrupt("return", (e("SET_READER_MODE", r), e("CLEAR_CURRENT_CARD"), e("RESET_PROGRESS"), e("CLEAR_ERROR"), {
                  success: !0
                }));
              case 7:
                _context2.prev = 7;
                _context2.t0 = _context2["catch"](1);
                return _context2.abrupt("return", (e("SET_ERROR", _context2.t0), {
                  success: !1,
                  error: _context2.t0.message
                }));
              case 10:
              case "end":
                return _context2.stop();
            }
          }, _callee2, null, [[1, 7]]);
        }))();
      },
      scanCard: function scanCard(_ref4) {
        var _this = this;
        return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee3() {
          var e, s, i, _e, _l, _e2, _s3, _e3, _r2;
          return _regeneratorRuntime2().wrap(function _callee3$(_context3) {
            while (1) switch (_context3.prev = _context3.next) {
              case 0:
                e = _ref4.commit, s = _ref4.state, i = _ref4.rootState;
                _context3.prev = 1;
                if (!(e("SET_READING_STATE", o), e("CLEAR_CURRENT_CARD"), e("RESET_PROGRESS"), e("CLEAR_ERROR"), console.log("[Reader] \u5F00\u59CB\u626B\u63CF".concat(s.currentMode === a ? "高频" : "低频", "\u5361\u7247...")), !i.device.isConnected)) {
                  _context3.next = 4;
                  break;
                }
                throw new Error("设备未连接，请先连接Chameleon设备");
              case 4:
                if (r.bluetoothService) {
                  _context3.next = 6;
                  break;
                }
                throw new Error("蓝牙服务未初始化");
              case 6:
                if (r.bluetoothService.isConnected) {
                  _context3.next = 8;
                  break;
                }
                throw new Error("蓝牙连接已断开，请重新连接设备");
              case 8:
                if (s.isReaderMode) {
                  _context3.next = 15;
                  break;
                }
                console.log("[Reader] 设备未处于读卡模式，尝试初始化...");
                _context3.next = 12;
                return _this.dispatch("reader/initializeReader");
              case 12:
                _e = _context3.sent;
                if (_e.success) {
                  _context3.next = 15;
                  break;
                }
                throw new Error("\u65E0\u6CD5\u5207\u6362\u5230\u8BFB\u5361\u6A21\u5F0F: ".concat(_e.error));
              case 15:
                _l = null;
                _context3.prev = 16;
                if (!(s.currentMode === a)) {
                  _context3.next = 23;
                  break;
                }
                _context3.next = 20;
                return _this.dispatch("reader/scanHFCard", {
                  bluetoothService: r.bluetoothService
                });
              case 20:
                _context3.t0 = _context3.sent;
                _context3.next = 26;
                break;
              case 23:
                _context3.next = 25;
                return _this.dispatch("reader/scanLFCard", {
                  bluetoothService: r.bluetoothService
                });
              case 25:
                _context3.t0 = _context3.sent;
              case 26:
                _l = _context3.t0;
                _context3.next = 33;
                break;
              case 29:
                _context3.prev = 29;
                _context3.t1 = _context3["catch"](16);
                _e2 = _context3.t1.message, _s3 = [];
                throw _e2.includes("未检测到卡片") ? _s3 = ["确保卡片紧贴设备天线", "尝试调整卡片位置", "检查卡片是否损坏", "确认卡片类型是否匹配当前模式"] : _e2.includes("通信错误") ? _s3 = ["检查设备与卡片的距离", "避免金属物体干扰", "重新放置卡片后重试"] : _e2.includes("设备模式") && (_s3 = ["重新初始化读卡器", "检查设备固件版本", "重启设备后重试"]), new Error(_e2);
              case 33:
                if (!_l) {
                  _context3.next = 42;
                  break;
                }
                if (!(e("SET_CURRENT_CARD", _l), e("SET_READING_STATE", c), e("INCREMENT_READ_COUNT", {
                  success: !0,
                  mode: s.currentMode
                }), console.log("[Reader] \u6210\u529F\u68C0\u6D4B\u5230".concat(_l.type, "\u5361\u7247, UID: ").concat(_l.uid)), s.scanSettings.readData)) {
                  _context3.next = 40;
                  break;
                }
                console.log("[Reader] 开始自动读取卡片数据...");
                _context3.next = 38;
                return _this.dispatch("reader/readCardData");
              case 38:
                _e3 = _context3.sent;
                return _context3.abrupt("return", {
                  success: _e3.success,
                  card: _e3.success ? _e3.card : _l,
                  error: _e3.error
                });
              case 40:
                _context3.next = 43;
                break;
              case 42:
                console.log("[Reader] 未检测到卡片"), e("SET_READING_STATE", t);
              case 43:
                return _context3.abrupt("return", {
                  success: !0,
                  card: _l
                });
              case 46:
                _context3.prev = 46;
                _context3.t2 = _context3["catch"](1);
                console.error("[Reader] 扫描卡片失败:", _context3.t2);
                _r2 = {
                  title: "扫描失败",
                  message: _context3.t2.message,
                  timestamp: Date.now(),
                  suggestions: []
                };
                return _context3.abrupt("return", (_context3.t2.message.includes("设备未连接") ? _r2.suggestions = ["检查设备是否已开机", "确认蓝牙连接是否正常", "尝试重新连接设备"] : _context3.t2.message.includes("未检测到卡片") ? _r2.suggestions = ["确保卡片紧贴设备天线", "尝试调整卡片位置", "检查卡片是否损坏", "\u786E\u8BA4\u5361\u7247\u7C7B\u578B\u662F\u5426\u4E3A".concat(s.currentMode === a ? "高频" : "低频", "\u5361\u7247")] : _context3.t2.message.includes("读卡模式") && (_r2.suggestions = ["重新初始化读卡器", "检查设备固件版本", "重启设备后重试"]), e("SET_ERROR", _r2), e("SET_READING_STATE", l), e("INCREMENT_READ_COUNT", {
                  success: !1,
                  mode: s.currentMode
                }), {
                  success: !1,
                  error: _context3.t2.message
                }));
              case 51:
              case "end":
                return _context3.stop();
            }
          }, _callee3, null, [[1, 46], [16, 29]]);
        }))();
      },
      scanHFCard: function scanHFCard(_ref5, _ref6) {
        var _this2 = this;
        return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee4() {
          var e, s, _t2, _t2$data, _o, _c, _i, _n, _l2, _d, g, u, R, E, m, _e4;
          return _regeneratorRuntime2().wrap(function _callee4$(_context4) {
            while (1) switch (_context4.prev = _context4.next) {
              case 0:
                e = _ref5.commit;
                s = _ref6.bluetoothService;
                e("UPDATE_PROGRESS", {
                  message: "正在扫描高频卡片...",
                  percentage: 10
                });
                _context4.prev = 3;
                _context4.next = 6;
                return s.isReaderDeviceMode();
              case 6:
                if (_context4.sent) {
                  _context4.next = 12;
                  break;
                }
                console.log("[scanHFCard] 设备未处于读卡器模式，尝试切换...");
                _context4.next = 10;
                return s.setReaderDeviceMode(!0);
              case 10:
                if (_context4.sent) {
                  _context4.next = 12;
                  break;
                }
                throw new Error("无法切换到读卡器模式");
              case 12:
                e("UPDATE_PROGRESS", {
                  message: "正在扫描14443A卡片...",
                  percentage: 30
                });
                _context4.next = 15;
                return s.scan14443aTag();
              case 15:
                _t2 = _context4.sent;
                if (_t2.success) {
                  _context4.next = 18;
                  break;
                }
                return _context4.abrupt("return", (console.log("[scanHFCard] 扫描失败:", _t2.error), null));
              case 18:
                _t2$data = _t2.data, _o = _t2$data.uid, _c = _t2$data.atqa, _i = _t2$data.sak, _n = _t2$data.ats;
                if (!(!_o || 0 === _o.length)) {
                  _context4.next = 21;
                  break;
                }
                throw new Error("无效的UID数据");
              case 21:
                _l2 = _o.map(function (e) {
                  return e.toString(16).padStart(2, "0");
                }).join(" ").toUpperCase(), _d = _c.map(function (e) {
                  return e.toString(16).padStart(2, "0");
                }).join(" ").toUpperCase(), g = _i.toString(16).padStart(2, "0").toUpperCase(), u = _n.length > 0 ? _n.map(function (e) {
                  return e.toString(16).padStart(2, "0");
                }).join(" ").toUpperCase() : "";
                e("UPDATE_PROGRESS", {
                  message: "正在识别卡片类型...",
                  percentage: 60
                });
                R = "", E = "", m = "ISO14443A";
                _context4.prev = 24;
                console.log("[scanHFCard] 开始检测卡片类型...");
                _context4.next = 28;
                return s.detectMf1Support();
              case 28:
                if (!_context4.sent) {
                  _context4.next = 42;
                  break;
                }
                console.log("[scanHFCard] 检测到Mifare Classic卡片，开始识别具体类型...");
                _context4.prev = 30;
                _context4.next = 33;
                return _this2.dispatch("reader/mfClassicGetType", {
                  bluetoothService: s
                });
              case 33:
                _e4 = _context4.sent;
                R = _e4, E = _this2.getters["reader/formatCardTypeName"](_e4), m = "Mifare Classic", console.log("[scanHFCard] Mifare Classic\u7C7B\u578B\u8BC6\u522B\u5B8C\u6210: ".concat(_e4, " -> ").concat(E));
                _context4.next = 40;
                break;
              case 37:
                _context4.prev = 37;
                _context4.t0 = _context4["catch"](30);
                console.warn("[scanHFCard] Mifare Classic类型识别失败:", _context4.t0.message), R = "mifare_classic_1k", E = "Mifare Classic 1K", m = "Mifare Classic";
              case 40:
                _context4.next = 43;
                break;
              case 42:
                console.log("[scanHFCard] 非Mifare Classic卡片，使用静态识别"), R = _this2.getters["reader/identifyHFCardType"]({
                  sak: _i,
                  atqa: _d,
                  ats: u
                }), E = _this2.getters["reader/formatCardTypeName"](R), m = R.includes("ntag") ? "NTAG" : R.includes("ultralight") ? "Mifare Ultralight" : "ISO14443A", console.log("[scanHFCard] \u9759\u6001\u8BC6\u522B\u7ED3\u679C: ".concat(R, " -> ").concat(E));
              case 43:
                _context4.next = 48;
                break;
              case 45:
                _context4.prev = 45;
                _context4.t1 = _context4["catch"](24);
                console.warn("[scanHFCard] 卡片类型识别异常:", _context4.t1.message), R = _this2.getters["reader/identifyHFCardType"]({
                  sak: _i,
                  atqa: _d,
                  ats: u
                }), E = _this2.getters["reader/formatCardTypeName"](R) || "未知类型", m = "ISO14443A", console.log("[scanHFCard] \u5F02\u5E38\u56DE\u9000\u8BC6\u522B\u7ED3\u679C: ".concat(R, " -> ").concat(E));
              case 48:
                return _context4.abrupt("return", (e("UPDATE_PROGRESS", {
                  message: "\u68C0\u6D4B\u5230".concat(E, "\u5361\u7247"),
                  percentage: 100
                }), {
                  uid: _l2,
                  sak: g,
                  atqa: _d,
                  ats: u,
                  type: R,
                  typeDisplay: E,
                  protocol: m,
                  readTime: new Date().toISOString(),
                  isComplete: !1
                }));
              case 51:
                _context4.prev = 51;
                _context4.t2 = _context4["catch"](3);
                throw console.error("[scanHFCard] 扫描失败:", _context4.t2), new Error("\u9AD8\u9891\u5361\u7247\u626B\u63CF\u5931\u8D25: ".concat(_context4.t2.message));
              case 54:
              case "end":
                return _context4.stop();
            }
          }, _callee4, null, [[3, 51], [24, 45], [30, 37]]);
        }))();
      },
      scanLFCard: function scanLFCard(_ref7, _ref8) {
        return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee5() {
          var e, s, r, _a2, _t3;
          return _regeneratorRuntime2().wrap(function _callee5$(_context5) {
            while (1) switch (_context5.prev = _context5.next) {
              case 0:
                e = _ref7.commit;
                s = _ref8.bluetoothService;
                e("UPDATE_PROGRESS", {
                  message: "正在扫描低频卡片...",
                  percentage: 10
                });
                _context5.prev = 3;
                _context5.next = 6;
                return s.isReaderDeviceMode();
              case 6:
                if (_context5.sent) {
                  _context5.next = 12;
                  break;
                }
                console.log("[scanLFCard] 设备未处于读卡器模式，尝试切换...");
                _context5.next = 10;
                return s.setReaderDeviceMode(!0);
              case 10:
                if (_context5.sent) {
                  _context5.next = 12;
                  break;
                }
                throw new Error("无法切换到读卡器模式");
              case 12:
                e("UPDATE_PROGRESS", {
                  message: "正在读取EM410X卡片...",
                  percentage: 50
                });
                _context5.next = 15;
                return s.readEM410X();
              case 15:
                _a2 = _context5.sent;
                if (!(!_a2 || "" === _a2)) {
                  _context5.next = 18;
                  break;
                }
                return _context5.abrupt("return", (console.log("[scanLFCard] 未检测到EM410X卡片"), null));
              case 18:
                if (!(10 !== _a2.length)) {
                  _context5.next = 20;
                  break;
                }
                throw new Error("\u65E0\u6548\u7684EM410X UID\u957F\u5EA6: ".concat(_a2.length, ", \u671F\u671B: 10"));
              case 20:
                if (/^[0-9A-Fa-f]{10}$/.test(_a2)) {
                  _context5.next = 22;
                  break;
                }
                throw new Error("无效的EM410X UID格式");
              case 22:
                _t3 = (null == (r = _a2.match(/.{2}/g)) ? void 0 : r.join(" ")) || _a2;
                return _context5.abrupt("return", (e("UPDATE_PROGRESS", {
                  message: "检测到EM410X卡片",
                  percentage: 100
                }), console.log("[scanLFCard] 成功扫描EM410X卡片, UID:", _t3), {
                  uid: _t3,
                  type: "em410x",
                  protocol: "EM410X",
                  readTime: new Date().toISOString(),
                  isComplete: !0
                }));
              case 26:
                _context5.prev = 26;
                _context5.t0 = _context5["catch"](3);
                throw console.error("[scanLFCard] 扫描失败:", _context5.t0), new Error("\u4F4E\u9891\u5361\u7247\u626B\u63CF\u5931\u8D25: ".concat(_context5.t0.message));
              case 29:
              case "end":
                return _context5.stop();
            }
          }, _callee5, null, [[3, 26]]);
        }))();
      },
      readCardData: function readCardData(_ref9) {
        var _this3 = this;
        return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee6() {
          var e, s, r, _a3, _r3, _r4;
          return _regeneratorRuntime2().wrap(function _callee6$(_context6) {
            while (1) switch (_context6.prev = _context6.next) {
              case 0:
                e = _ref9.commit, s = _ref9.state;
                _context6.prev = 1;
                e("SET_READING_STATE", i), e("RESET_PROGRESS");
                r = s.currentCard.type;
                _a3 = null;
                if (!_this3.getters["reader/isMifareClassicType"](r)) {
                  _context6.next = 11;
                  break;
                }
                _context6.next = 8;
                return _this3.dispatch("reader/readMifareClassic");
              case 8:
                _a3 = _context6.sent;
                _context6.next = 20;
                break;
              case 11:
                if (!_this3.getters["reader/isMifareUltralightType"](r)) {
                  _context6.next = 17;
                  break;
                }
                _context6.next = 14;
                return _this3.dispatch("reader/readMifareUltralight");
              case 14:
                _a3 = _context6.sent;
                _context6.next = 20;
                break;
              case 17:
                if (!("em410x" !== r)) {
                  _context6.next = 19;
                  break;
                }
                throw new Error("\u4E0D\u652F\u6301\u7684\u5361\u7247\u7C7B\u578B: ".concat(r));
              case 19:
                _a3 = {
                  success: !0,
                  isComplete: !0
                };
              case 20:
                if (!_a3.success) {
                  _context6.next = 23;
                  break;
                }
                _r3 = _objectSpread2(_objectSpread2(_objectSpread2({}, s.currentCard), _a3.data), {}, {
                  isComplete: !0,
                  readTime: new Date().toISOString()
                });
                return _context6.abrupt("return", (e("SET_CURRENT_CARD", _r3), e("SET_READING_STATE", n), e("ADD_TO_HISTORY", _r3), {
                  success: !0,
                  card: _r3
                }));
              case 23:
                _r4 = _objectSpread2(_objectSpread2({}, s.currentCard), {}, {
                  isComplete: !1,
                  hasErrors: !0,
                  errorMessage: _a3.error || "读取失败",
                  readTime: new Date().toISOString()
                });
                return _context6.abrupt("return", (e("SET_CURRENT_CARD", _r4), e("SET_READING_STATE", l), e("SET_ERROR", {
                  message: _a3.error || "读取失败"
                }), {
                  success: !1,
                  error: _a3.error,
                  card: _r4
                }));
              case 27:
                _context6.prev = 27;
                _context6.t0 = _context6["catch"](1);
                return _context6.abrupt("return", (e("SET_ERROR", _context6.t0), e("SET_READING_STATE", l), {
                  success: !1,
                  error: _context6.t0.message
                }));
              case 30:
              case "end":
                return _context6.stop();
            }
          }, _callee6, null, [[1, 27]]);
        }))();
      },
      readMifareClassic: function readMifareClassic(_ref10) {
        var _this4 = this;
        return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee7() {
          var e, s;
          return _regeneratorRuntime2().wrap(function _callee7$(_context7) {
            while (1) switch (_context7.prev = _context7.next) {
              case 0:
                e = _ref10.commit;
                console.log("[Reader] 开始智能读取Mifare Classic卡片"), e("UPDATE_PROGRESS", {
                  current: 0,
                  total: 100,
                  percentage: 0,
                  message: "正在使用默认密钥读取..."
                });
                _context7.next = 4;
                return _this4.dispatch("reader/readMifareClassicAdvanced", {
                  useDefaultKeys: !0,
                  customKeys: [],
                  useNestedAttack: !1,
                  showDetailedProgress: !1
                });
              case 4:
                s = _context7.sent;
                return _context7.abrupt("return", (s.success && (console.log("[Reader] \u667A\u80FD\u8BFB\u53D6\u5B8C\u6210\uFF0C\u53EF\u8BBF\u95EE\u6247\u533A: ".concat(s.data.accessibleSectors)), e("UPDATE_PROGRESS", {
                  current: 100,
                  total: 100,
                  percentage: 100,
                  message: "读取完成"
                }), s.data.hasErrors && console.log("[Reader] 部分扇区无法访问，用户可选择高级读取")), s));
              case 6:
              case "end":
                return _context7.stop();
            }
          }, _callee7);
        }))();
      },
      readMifareClassicAdvanced: function readMifareClassicAdvanced(_ref11) {
        var _arguments = arguments,
          _this5 = this;
        return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee8() {
          var s, a, t, _t$useDefaultKeys, o, _t$customKeys, c, _t$useNestedAttack, i, _t$showDetailedProgre, n, l, d, g, _t4, _e5, E, m, p, S, h, f, _loop, _e6, T, _, y, _loop2, _e7;
          return _regeneratorRuntime2().wrap(function _callee8$(_context10) {
            while (1) switch (_context10.prev = _context10.next) {
              case 0:
                s = _ref11.commit, a = _ref11.state;
                t = _arguments.length > 1 && _arguments[1] !== undefined ? _arguments[1] : {};
                _t$useDefaultKeys = t.useDefaultKeys, o = _t$useDefaultKeys === void 0 ? !0 : _t$useDefaultKeys, _t$customKeys = t.customKeys, c = _t$customKeys === void 0 ? [] : _t$customKeys, _t$useNestedAttack = t.useNestedAttack, i = _t$useNestedAttack === void 0 ? !1 : _t$useNestedAttack, _t$showDetailedProgre = t.showDetailedProgress, n = _t$showDetailedProgre === void 0 ? !1 : _t$showDetailedProgre, l = a.currentCard, d = l.typeDisplay || l.type || "Mifare Classic", g = l.uid || "未知UID";
                s("UPDATE_PROGRESS", {
                  message: "\u6B63\u5728\u9AD8\u7EA7\u8BFB\u53D6 ".concat(d, " \u5361\u7247 (").concat(g, ")..."),
                  percentage: 0
                });
                _context10.prev = 4;
                _context10.next = 7;
                return r.bluetoothService.detectMf1Support();
              case 7:
                if (_context10.sent) {
                  _context10.next = 9;
                  break;
                }
                throw new Error("不是Mifare Classic卡片");
              case 9:
                console.log("[Reader] \u68C0\u6D4B\u5230".concat(d, "\u5361\u7247 (").concat(g, ")\uFF0C\u5F00\u59CB\u9AD8\u7EA7\u8BFB\u53D6..."));
                _t4 = [];
                if (o && (_t4 = _toConsumableArray2(e.gMifareClassicKeys), console.log("[Reader] 使用默认密钥库，共", _t4.length, "个密钥")), c && c.length > 0) {
                  _e5 = c.map(function (e) {
                    var s = [];
                    for (var _r5 = 0; _r5 < e.length; _r5 += 2) s.push(parseInt(e.substr(_r5, 2), 16));
                    return s;
                  });
                  _t4 = [].concat(_toConsumableArray2(_t4), _toConsumableArray2(_e5)), console.log("[Reader] 添加", c.length, "个自定义密钥");
                }
                if (!(0 === _t4.length)) {
                  _context10.next = 14;
                  break;
                }
                throw new Error("没有可用的密钥");
              case 14:
                console.log("[Reader] 总共将尝试", _t4.length, "个密钥");
                E = a.currentCard.type;
                m = 16;
                p = E.toLowerCase();
                p.includes("4k") ? m = 40 : p.includes("2k") ? m = 32 : p.includes("mini") && (m = 5), console.log("[Reader] 卡片类型:", E, "扇区数:", m);
                S = l.sectors || [], h = [], f = [];
                _loop = /*#__PURE__*/_regeneratorRuntime2().mark(function _loop(_e6) {
                  var s;
                  return _regeneratorRuntime2().wrap(function _loop$(_context8) {
                    while (1) switch (_context8.prev = _context8.next) {
                      case 0:
                        s = S.find(function (s) {
                          return s.sector === _e6;
                        });
                        s && s.readable ? f.push(_e6) : h.push(_e6);
                      case 2:
                      case "end":
                        return _context8.stop();
                    }
                  }, _loop);
                });
                _e6 = 0;
              case 22:
                if (!(_e6 < m)) {
                  _context10.next = 27;
                  break;
                }
                return _context10.delegateYield(_loop(_e6), "t0", 24);
              case 24:
                _e6++;
                _context10.next = 22;
                break;
              case 27:
                if (!(console.log("[Reader] \u6247\u533A\u72B6\u6001\u5206\u6790: \u53EF\u8BFB\u6247\u533A ".concat(f.length, " \u4E2A, \u9700\u8981\u89E3\u6790\u6247\u533A ").concat(h.length, " \u4E2A")), 0 === h.length)) {
                  _context10.next = 29;
                  break;
                }
                return _context10.abrupt("return", (s("UPDATE_PROGRESS", {
                  message: "".concat(d, " (").concat(g, ") - \u6240\u6709\u6247\u533A\u5DF2\u89E3\u6790\u5B8C\u6210"),
                  percentage: 100
                }), n && s("ADD_PROGRESS_DETAIL", {
                  message: "所有扇区已经可读，无需重新解析",
                  success: !0,
                  error: !1
                }), {
                  success: !0,
                  data: {
                    sectors: S,
                    hasErrors: !1,
                    errorMessage: null,
                    accessibleSectors: f.length
                  }
                }));
              case 29:
                T = f.length;
                _ = _toConsumableArray2(S), y = {
                  keyA: {},
                  keyB: {}
                };
                _loop2 = /*#__PURE__*/_regeneratorRuntime2().mark(function _loop2() {
                  var a, o, c, l, g, _e8, _i2, _d2, _e9, E, _e10, _t5, _o2, _c2, _i3, _o3, _a4, p, S;
                  return _regeneratorRuntime2().wrap(function _loop2$(_context9) {
                    while (1) switch (_context9.prev = _context9.next) {
                      case 0:
                        a = h[_e7], o = Math.round(_e7 / h.length * 90);
                        s("UPDATE_PROGRESS", {
                          current: _e7 + 1,
                          total: h.length,
                          percentage: o,
                          message: "".concat(d, " - \u6247\u533A ").concat(a + 1, "/").concat(m, " (").concat(o, "%)")
                        }), n && s("ADD_PROGRESS_DETAIL", {
                          message: "".concat(d, " - \u5F00\u59CB\u89E3\u6790\u6247\u533A ").concat(a, " (").concat(_e7 + 1, "/").concat(h.length, ")"),
                          success: !1,
                          error: !1
                        });
                        c = !1, l = "", g = 0;
                        _e8 = 0;
                      case 4:
                        if (!(_e8 < _t4.length && !c)) {
                          _context9.next = 36;
                          break;
                        }
                        _i2 = _t4[_e8], _d2 = _i2.map(function (e) {
                          return e.toString(16).padStart(2, "0");
                        }).join("").toUpperCase();
                        g = _e8 + 1, l = "KeyA", n && (s("UPDATE_PROGRESS", {
                          current: a + 1,
                          total: m,
                          percentage: o,
                          message: "\u6247\u533A ".concat(a + 1, "/").concat(m, " - \u5C1D\u8BD5 ").concat(l, " (\u5BC6\u94A5 ").concat(g, "/").concat(_t4.length, ")")
                        }), s("ADD_PROGRESS_DETAIL", {
                          message: "\u6247\u533A ".concat(a, " \u5C1D\u8BD5 KeyA \u5BC6\u94A5 ").concat(_d2),
                          success: !1,
                          error: !1
                        }));
                        _context9.prev = 7;
                        _context9.next = 10;
                        return r.bluetoothService.mf1Auth(4 * a, 96, _i2);
                      case 10:
                        if (!_context9.sent) {
                          _context9.next = 13;
                          break;
                        }
                        console.log("[Reader] \u6247\u533A ".concat(a, " KeyA \u8BA4\u8BC1\u6210\u529F\uFF0C\u5BC6\u94A5: ").concat(_d2)), T++, c = !0, y.keyA[a] = _i2, s("UPDATE_PROGRESS", {
                          current: a + 1,
                          total: m,
                          percentage: o,
                          message: "\u6247\u533A ".concat(a + 1, "/").concat(m, " - KeyA \u8BA4\u8BC1\u6210\u529F \u2713")
                        }), n && s("ADD_PROGRESS_DETAIL", {
                          message: "\u6247\u533A ".concat(a, " KeyA \u8BA4\u8BC1\u6210\u529F (\u5BC6\u94A5: ").concat(_d2, ")"),
                          success: !0,
                          error: !1
                        });
                        return _context9.abrupt("break", 36);
                      case 13:
                        _context9.next = 18;
                        break;
                      case 15:
                        _context9.prev = 15;
                        _context9.t0 = _context9["catch"](7);
                        n && s("ADD_PROGRESS_DETAIL", {
                          message: "\u6247\u533A ".concat(a, " KeyA \u8BA4\u8BC1\u5931\u8D25"),
                          success: !1,
                          error: !0
                        });
                      case 18:
                        if (c) {
                          _context9.next = 31;
                          break;
                        }
                        l = "KeyB", n && (s("UPDATE_PROGRESS", {
                          current: a + 1,
                          total: m,
                          percentage: o,
                          message: "\u6247\u533A ".concat(a + 1, "/").concat(m, " - \u5C1D\u8BD5 ").concat(l, " (\u5BC6\u94A5 ").concat(g, "/").concat(_t4.length, ")")
                        }), s("ADD_PROGRESS_DETAIL", {
                          message: "\u6247\u533A ".concat(a, " \u5C1D\u8BD5 KeyB \u5BC6\u94A5 ").concat(_d2),
                          success: !1,
                          error: !1
                        }));
                        _context9.prev = 20;
                        _context9.next = 23;
                        return r.bluetoothService.mf1Auth(4 * a, 97, _i2);
                      case 23:
                        if (!_context9.sent) {
                          _context9.next = 26;
                          break;
                        }
                        console.log("[Reader] \u6247\u533A ".concat(a, " KeyB \u8BA4\u8BC1\u6210\u529F\uFF0C\u5BC6\u94A5: ").concat(_d2)), T++, c = !0, y.keyB[a] = _i2, s("UPDATE_PROGRESS", {
                          current: a + 1,
                          total: m,
                          percentage: o,
                          message: "\u6247\u533A ".concat(a + 1, "/").concat(m, " - KeyB \u8BA4\u8BC1\u6210\u529F \u2713")
                        }), n && s("ADD_PROGRESS_DETAIL", {
                          message: "\u6247\u533A ".concat(a, " KeyB \u8BA4\u8BC1\u6210\u529F (\u5BC6\u94A5: ").concat(_d2, ")"),
                          success: !0,
                          error: !1
                        });
                        return _context9.abrupt("break", 36);
                      case 26:
                        _context9.next = 31;
                        break;
                      case 28:
                        _context9.prev = 28;
                        _context9.t1 = _context9["catch"](20);
                        n && s("ADD_PROGRESS_DETAIL", {
                          message: "\u6247\u533A ".concat(a, " KeyB \u8BA4\u8BC1\u5931\u8D25"),
                          success: !1,
                          error: !0
                        });
                      case 31:
                        _context9.next = 33;
                        return new Promise(function (e) {
                          return setTimeout(e, 50);
                        });
                      case 33:
                        _e8++;
                        _context9.next = 4;
                        break;
                      case 36:
                        if (!(c || (s("UPDATE_PROGRESS", {
                          current: a + 1,
                          total: m,
                          percentage: o,
                          message: "\u6247\u533A ".concat(a + 1, "/").concat(m, " - \u65E0\u6CD5\u8BBF\u95EE \u2717")
                        }), n && s("ADD_PROGRESS_DETAIL", {
                          message: "\u6247\u533A ".concat(a, " \u6240\u6709\u5BC6\u94A5\u5C1D\u8BD5\u5931\u8D25"),
                          success: !1,
                          error: !0
                        })), !c && i)) {
                          _context9.next = 48;
                          break;
                        }
                        n && s("UPDATE_PROGRESS", {
                          current: a + 1,
                          total: m,
                          percentage: Math.round(a / m * 80),
                          message: "\u5BF9\u6247\u533A ".concat(a, " \u6267\u884C\u5D4C\u5957\u653B\u51FB...")
                        });
                        _context9.prev = 38;
                        _context9.next = 41;
                        return _this5.dispatch("reader/performNestedAttack", a);
                      case 41:
                        _e9 = _context9.sent;
                        (_e9.keyA || _e9.keyB) && (c = !0, T++, _e9.keyA && (y.keyA[a] = _e9.keyA), _e9.keyB && (y.keyB[a] = _e9.keyB), console.log("[Reader] \u6247\u533A ".concat(a, " \u5D4C\u5957\u653B\u51FB\u6210\u529F")));
                        _context9.next = 48;
                        break;
                      case 45:
                        _context9.prev = 45;
                        _context9.t2 = _context9["catch"](38);
                        console.warn("[Reader] \u6247\u533A ".concat(a, " \u5D4C\u5957\u653B\u51FB\u5931\u8D25:"), _context9.t2.message);
                      case 48:
                        c || n && (console.warn("[Reader] \u6247\u533A ".concat(a, " \u65E0\u6CD5\u8BBF\u95EE")), s("ADD_PROGRESS_DETAIL", {
                          message: "\u6247\u533A ".concat(a, " \u65E0\u6CD5\u8BBF\u95EE"),
                          success: !1,
                          error: !0
                        }));
                        E = [];
                        if (!c) {
                          _context9.next = 77;
                          break;
                        }
                        y.keyA[a] ? (_e10 = 96, _t5 = y.keyA[a]) : y.keyB[a] ? (_e10 = 97, _t5 = y.keyB[a]) : (console.warn("[Reader] \u6247\u533A ".concat(a, " \u6CA1\u6709\u6210\u529F\u7684\u5BC6\u94A5\u8BB0\u5F55")), _e10 = 96, _t5 = [255, 255, 255, 255, 255, 255]);
                        _o2 = _t5.map(function (e) {
                          return e.toString(16).padStart(2, "0");
                        }).join("").toUpperCase();
                        console.log("[Reader] \u8BFB\u53D6\u6247\u533A ".concat(a, " \u6570\u636E\uFF0C\u4F7F\u7528\u5BC6\u94A5\u7C7B\u578B: ").concat(96 === _e10 ? "KeyA" : "KeyB", ", \u5BC6\u94A5: ").concat(_o2));
                        _c2 = Math.round(a / m * 90) + 5;
                        s("UPDATE_PROGRESS", {
                          current: a + 1,
                          total: m,
                          percentage: _c2,
                          message: "\u6247\u533A ".concat(a + 1, "/").concat(m, " - \u6B63\u5728\u8BFB\u53D6\u6570\u636E...")
                        });
                        _i3 = 0;
                      case 57:
                        if (!(_i3 < 4)) {
                          _context9.next = 75;
                          break;
                        }
                        _o3 = 4 * a + _i3;
                        n && s("ADD_PROGRESS_DETAIL", {
                          message: "\u8BFB\u53D6\u5757 ".concat(_o3, " (\u6247\u533A ").concat(a, ", \u5757 ").concat(_i3, ")"),
                          success: !1,
                          error: !1
                        });
                        _context9.prev = 60;
                        _context9.next = 63;
                        return r.bluetoothService.mf1ReadBlock(_o3, _e10, _t5);
                      case 63:
                        _a4 = _context9.sent;
                        if (_a4 && Array.isArray(_a4) && 16 === _a4.length) {
                          if (E.push(_a4), n) {
                            s("ADD_PROGRESS_DETAIL", {
                              message: "\u5757 ".concat(_o3, " \u8BFB\u53D6\u6210\u529F: ").concat(_a4.map(function (e) {
                                return e.toString(16).padStart(2, "0");
                              }).join(" ").toUpperCase()),
                              success: !0,
                              error: !1
                            });
                          }
                        } else E.push(new Array(16).fill(0)), n && s("ADD_PROGRESS_DETAIL", {
                          message: "\u5757 ".concat(_o3, " \u8BFB\u53D6\u5931\u8D25\uFF0C\u6570\u636E\u65E0\u6548"),
                          success: !1,
                          error: !0
                        });
                        _context9.next = 70;
                        break;
                      case 67:
                        _context9.prev = 67;
                        _context9.t3 = _context9["catch"](60);
                        E.push(new Array(16).fill(0)), n && s("ADD_PROGRESS_DETAIL", {
                          message: "\u5757 ".concat(_o3, " \u8BFB\u53D6\u5F02\u5E38: ").concat(_context9.t3.message),
                          success: !1,
                          error: !0
                        });
                      case 70:
                        _context9.next = 72;
                        return new Promise(function (e) {
                          return setTimeout(e, 50);
                        });
                      case 72:
                        _i3++;
                        _context9.next = 57;
                        break;
                      case 75:
                        _context9.next = 78;
                        break;
                      case 77:
                        E = Array.from({
                          length: 4
                        }, function () {
                          return new Array(16).fill(0);
                        });
                      case 78:
                        p = {
                          sector: a,
                          readable: c,
                          blocks: E,
                          keyA: y.keyA[a] || null,
                          keyB: y.keyB[a] || null
                        }, S = _.findIndex(function (e) {
                          return e.sector === a;
                        });
                        S >= 0 ? _[S] = p : _.push(p);
                        _context9.next = 82;
                        return new Promise(function (e) {
                          return setTimeout(e, 100);
                        });
                      case 82:
                      case "end":
                        return _context9.stop();
                    }
                  }, _loop2, null, [[7, 15], [20, 28], [38, 45], [60, 67]]);
                });
                _e7 = 0;
              case 33:
                if (!(_e7 < h.length)) {
                  _context10.next = 38;
                  break;
                }
                return _context10.delegateYield(_loop2(), "t1", 35);
              case 35:
                _e7++;
                _context10.next = 33;
                break;
              case 38:
                return _context10.abrupt("return", (console.log("[Reader] Mifare Classic认证完成，可访问扇区数：", T), console.log("[Reader] 成功密钥:", y), s("UPDATE_PROGRESS", {
                  message: "".concat(d, " - \u8BFB\u53D6\u5B8C\u6210\uFF0C\u53EF\u8BBF\u95EE ").concat(T, "/").concat(m, " \u4E2A\u6247\u533A"),
                  current: h.length,
                  total: h.length,
                  percentage: 100
                }), _.sort(function (e, s) {
                  return e.sector - s.sector;
                }), _.forEach(function (e) {
                  e.readable && (e.keyA = y.keyA[e.sector] || e.keyA, e.keyB = y.keyB[e.sector] || e.keyB);
                }), n && s("ADD_PROGRESS_DETAIL", {
                  message: "\u8BFB\u53D6\u5B8C\u6210\uFF01\u6210\u529F\u8BBF\u95EE ".concat(T, "/").concat(m, " \u4E2A\u6247\u533A"),
                  success: !0,
                  error: !1
                }), {
                  success: !0,
                  data: {
                    sectors: _,
                    keys: y,
                    hasErrors: T < m,
                    errorMessage: T < m ? "\u4EC5\u80FD\u8BBF\u95EE ".concat(T, "/").concat(m, " \u4E2A\u6247\u533A\uFF0C\u67D0\u4E9B\u6247\u533A\u9700\u8981\u7279\u5B9A\u5BC6\u94A5") : null,
                    accessibleSectors: T
                  }
                }));
              case 41:
                _context10.prev = 41;
                _context10.t2 = _context10["catch"](4);
                throw console.error("[Reader] Mifare Classic高级读取失败:", _context10.t2), new Error("Mifare Classic\u8BFB\u53D6\u5931\u8D25: ".concat(_context10.t2.message));
              case 44:
              case "end":
                return _context10.stop();
            }
          }, _callee8, null, [[4, 41]]);
        }))();
      },
      performNestedAttack: function performNestedAttack(_ref12, s) {
        return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee9() {
          var e;
          return _regeneratorRuntime2().wrap(function _callee9$(_context11) {
            while (1) switch (_context11.prev = _context11.next) {
              case 0:
                e = _ref12.commit;
                console.log("[Reader] \u5BF9\u6247\u533A ".concat(s, " \u6267\u884C\u5D4C\u5957\u653B\u51FB..."));
                _context11.prev = 2;
                e("UPDATE_PROGRESS", {
                  message: "\u6B63\u5728\u5BF9\u6247\u533A ".concat(s, " \u6267\u884C\u5D4C\u5957\u653B\u51FB...")
                });
                _context11.next = 6;
                return new Promise(function (e) {
                  return setTimeout(e, 2e3);
                });
              case 6:
                return _context11.abrupt("return", {});
              case 9:
                _context11.prev = 9;
                _context11.t0 = _context11["catch"](2);
                return _context11.abrupt("return", (console.error("[Reader] \u6247\u533A ".concat(s, " \u5D4C\u5957\u653B\u51FB\u5931\u8D25"), _context11.t0), {}));
              case 12:
              case "end":
                return _context11.stop();
            }
          }, _callee9, null, [[2, 9]]);
        }))();
      },
      readMifareUltralight: function readMifareUltralight(_ref13) {
        return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee10() {
          var e, _a5, _t6, _o4, _c3, _i4, _e11, _s4, _r6;
          return _regeneratorRuntime2().wrap(function _callee10$(_context12) {
            while (1) switch (_context12.prev = _context12.next) {
              case 0:
                e = _ref13.commit;
                e("UPDATE_PROGRESS", {
                  message: "正在读取Mifare Ultralight数据...",
                  percentage: 0
                });
                _context12.prev = 2;
                if (r.bluetoothService.isConnected) {
                  _context12.next = 5;
                  break;
                }
                throw new Error("设备未连接");
              case 5:
                _context12.next = 7;
                return r.bluetoothService.isReaderDeviceMode();
              case 7:
                if (_context12.sent) {
                  _context12.next = 13;
                  break;
                }
                console.log("[Reader] 设备未处于读卡器模式，尝试切换...");
                _context12.next = 11;
                return r.bluetoothService.setReaderDeviceMode(!0);
              case 11:
                if (_context12.sent) {
                  _context12.next = 13;
                  break;
                }
                throw new Error("无法切换到读卡器模式");
              case 13:
                e("UPDATE_PROGRESS", {
                  message: "开始读取页面数据...",
                  percentage: 10
                });
                _a5 = [], _t6 = [], _o4 = [], _c3 = 16;
                _i4 = 0;
              case 16:
                if (!(_i4 < _c3)) {
                  _context12.next = 35;
                  break;
                }
                if (!(e("UPDATE_PROGRESS", {
                  current: _i4 + 1,
                  total: _c3,
                  message: "\u6B63\u5728\u8BFB\u53D6\u9875\u9762 ".concat(_i4, "/").concat(_c3, "..."),
                  percentage: 10 + _i4 / _c3 * 80
                }), !r.bluetoothService.isConnected)) {
                  _context12.next = 19;
                  break;
                }
                throw new Error("设备连接已断开");
              case 19:
                console.log("[Reader] \u53D1\u900114A\u539F\u59CB\u547D\u4EE4\u8BFB\u53D6\u9875\u9762: ".concat(_i4));
                _context12.prev = 20;
                _context12.next = 23;
                return r.bluetoothService.send14ARaw([48, _i4], {
                  respTimeoutMs: 100,
                  autoSelect: !1,
                  keepRfField: !0
                });
              case 23:
                _e11 = _context12.sent;
                if (_e11 && _e11.length >= 4) {
                  _s4 = Array.from(_e11.slice(0, 4));
                  _a5.push(_s4), _t6.push(_i4);
                  _r6 = _s4.map(function (e) {
                    return e.toString(16).padStart(2, "0");
                  }).join(" ").toUpperCase();
                  console.log("[Reader] \u6210\u529F\u8BFB\u53D6\u9875\u9762 ".concat(_i4, ": ").concat(_r6));
                } else _a5.push([0, 0, 0, 0]), _o4.push(_i4), console.warn("[Reader] \u9875\u9762 ".concat(_i4, " \u6570\u636E\u65E0\u6548"));
                _context12.next = 30;
                break;
              case 27:
                _context12.prev = 27;
                _context12.t0 = _context12["catch"](20);
                console.warn("[Reader] \u9875\u9762 ".concat(_i4, " \u8BFB\u53D6\u5931\u8D25: ").concat(_context12.t0.message)), _a5.push([0, 0, 0, 0]), _o4.push(_i4);
              case 30:
                _context12.next = 32;
                return new Promise(function (e) {
                  return setTimeout(e, 50);
                });
              case 32:
                _i4++;
                _context12.next = 16;
                break;
              case 35:
                return _context12.abrupt("return", (e("UPDATE_PROGRESS", {
                  message: "读取完成",
                  percentage: 100
                }), console.log("[Reader] Mifare Ultralight\u8BFB\u53D6\u5B8C\u6210\uFF0C\u5171\u8BFB\u53D6 ".concat(_a5.length, " \u9875\uFF0C\u53EF\u8BFB\u9875\u9762: ").concat(_t6.length, "\uFF0C\u4E0D\u53EF\u8BFB\u9875\u9762: ").concat(_o4.length)), {
                  success: !0,
                  data: {
                    pages: _a5,
                    readablePages: _t6,
                    unreadablePages: _o4,
                    hasErrors: _o4.length > 0,
                    errorMessage: _o4.length > 0 ? "".concat(_o4.length, " \u4E2A\u9875\u9762\u65E0\u6CD5\u8BFB\u53D6") : null
                  }
                }));
              case 38:
                _context12.prev = 38;
                _context12.t1 = _context12["catch"](2);
                throw console.error("[Reader] Mifare Ultralight读取失败:", _context12.t1), new Error("Mifare Ultralight\u8BFB\u53D6\u5931\u8D25: ".concat(_context12.t1.message));
              case 41:
              case "end":
                return _context12.stop();
            }
          }, _callee10, null, [[2, 38], [20, 27]]);
        }))();
      },
      saveToCardPackage: function saveToCardPackage(_ref14) {
        var _arguments2 = arguments,
          _this6 = this;
        return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee11() {
          var e, r, _ref15, a, t, _o5, _c4, _i5, _e12, _r7, _e13;
          return _regeneratorRuntime2().wrap(function _callee11$(_context13) {
            while (1) switch (_context13.prev = _context13.next) {
              case 0:
                e = _ref14.state, r = _ref14.getters;
                _ref15 = _arguments2.length > 1 && _arguments2[1] !== undefined ? _arguments2[1] : {}, a = _ref15.cardData, t = _ref15.cardName;
                _context13.prev = 2;
                _o5 = a || e.currentCard;
                if (_o5.uid) {
                  _context13.next = 6;
                  break;
                }
                throw new Error("没有可保存的卡片数据");
              case 6:
                console.log("[saveToCardPackage] 开始保存卡片到卡包:", _o5);
                _c4 = t || "\u8BFB\u53D6\u7684".concat(r.formatCardTypeName(_o5.type), "\u5361\u7247");
                _i5 = null;
                if (r.isMifareClassicType(_o5.type)) {
                  _e12 = _o5.sectors || [], _r7 = [];
                  _e12.forEach(function (e) {
                    e.blocks && e.blocks.forEach(function (e) {
                      _r7.push(new Uint8Array(e));
                    });
                  }), _i5 = s.CardDataUtils.createMifareClassicCard({
                    name: _c4,
                    uid: _o5.uid,
                    sak: parseInt(_o5.sak, 16) || 0,
                    atqa: _o5.atqa ? _o5.atqa.split(" ").filter(function (e) {
                      return e;
                    }).map(function (e) {
                      return parseInt(e, 16);
                    }) : [0, 0],
                    ats: _o5.ats ? _o5.ats.split(" ").map(function (e) {
                      return parseInt(e, 16);
                    }) : [],
                    data: _r7,
                    type: _o5.type
                  });
                } else if (r.isMifareUltralightType(_o5.type)) {
                  _e13 = (_o5.pages || []).map(function (e) {
                    return new Uint8Array(e);
                  });
                  _i5 = s.CardDataUtils.createMifareUltralightCard({
                    name: _c4,
                    uid: _o5.uid,
                    sak: parseInt(_o5.sak, 16) || 0,
                    atqa: _o5.atqa ? _o5.atqa.split(" ").filter(function (e) {
                      return e;
                    }).map(function (e) {
                      return parseInt(e, 16);
                    }) : [0, 0],
                    ats: _o5.ats ? _o5.ats.split(" ").map(function (e) {
                      return parseInt(e, 16);
                    }) : [],
                    data: _e13,
                    type: _o5.type
                  });
                } else _i5 = "em410x" === _o5.type ? s.CardDataUtils.createEM410XCard({
                  name: _c4,
                  uid: _o5.uid
                }) : s.CardDataUtils.createGenericCard({
                  name: _c4,
                  uid: _o5.uid,
                  type: _o5.type,
                  protocol: _o5.protocol,
                  data: _o5.rawData || []
                });
                if (_i5) {
                  _context13.next = 12;
                  break;
                }
                throw new Error("无法创建卡片数据");
              case 12:
                console.log("[saveToCardPackage] 创建的卡片数据:", _i5);
                _context13.next = 15;
                return _this6.dispatch("cards/addCard", _i5);
              case 15:
                console.log("[saveToCardPackage] 卡片保存成功");
                return _context13.abrupt("return", {
                  success: !0,
                  cardName: _c4
                });
              case 19:
                _context13.prev = 19;
                _context13.t0 = _context13["catch"](2);
                return _context13.abrupt("return", (console.error("[saveToCardPackage] 保存失败:", _context13.t0), {
                  success: !1,
                  error: _context13.t0.message
                }));
              case 22:
              case "end":
                return _context13.stop();
            }
          }, _callee11, null, [[2, 19]]);
        }))();
      },
      stopReading: function stopReading(_ref16) {
        return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee12() {
          var e, s;
          return _regeneratorRuntime2().wrap(function _callee12$(_context14) {
            while (1) switch (_context14.prev = _context14.next) {
              case 0:
                e = _ref16.commit, s = _ref16.state;
                s.readingState !== o && s.readingState !== i || (e("SET_READING_STATE", t), e("RESET_PROGRESS"));
              case 2:
              case "end":
                return _context14.stop();
            }
          }, _callee12);
        }))();
      },
      cleanup: function cleanup(_ref17) {
        return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee13() {
          var e;
          return _regeneratorRuntime2().wrap(function _callee13$(_context15) {
            while (1) switch (_context15.prev = _context15.next) {
              case 0:
                e = _ref17.commit;
                e("SET_READING_STATE", t), e("CLEAR_CURRENT_CARD"), e("RESET_PROGRESS"), e("CLEAR_ERROR"), e("SET_IS_READER_MODE", !1);
              case 2:
              case "end":
                return _context15.stop();
            }
          }, _callee13);
        }))();
      },
      mfClassicGetType: function mfClassicGetType(_ref18, _ref19) {
        return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee14() {
          var e, _s5, _s6, _s7, _s8;
          return _regeneratorRuntime2().wrap(function _callee14$(_context16) {
            while (1) switch (_context16.prev = _context16.next) {
              case 0:
                _objectDestructuringEmpty2(_ref18);
                e = _ref19.bluetoothService;
                _context16.prev = 2;
                console.log("[mfClassicGetType] 开始识别Mifare Classic类型...");
                _context16.prev = 4;
                console.log("[mfClassicGetType] 测试4K卡 - 尝试认证块255");
                _context16.next = 8;
                return e.send14ARaw([96, 255], {
                  checkResponseCrc: !1,
                  respTimeoutMs: 200
                });
              case 8:
                _s5 = _context16.sent;
                if (!(console.log("[mfClassicGetType] 4K卡测试结果:", _s5), _s5 && 4 === _s5.length)) {
                  _context16.next = 11;
                  break;
                }
                return _context16.abrupt("return", (console.log("[mfClassicGetType] 识别为Mifare Classic 4K"), "mifare_classic_4k"));
              case 11:
                _context16.next = 16;
                break;
              case 13:
                _context16.prev = 13;
                _context16.t0 = _context16["catch"](4);
                console.log("[mfClassicGetType] 4K卡测试失败:", _context16.t0.message);
              case 16:
                _context16.prev = 16;
                console.log("[mfClassicGetType] 测试2K卡 - 尝试认证块128");
                _context16.next = 20;
                return e.send14ARaw([96, 128], {
                  checkResponseCrc: !1,
                  respTimeoutMs: 200
                });
              case 20:
                _s6 = _context16.sent;
                if (!(console.log("[mfClassicGetType] 2K卡测试结果:", _s6), _s6 && 4 === _s6.length)) {
                  _context16.next = 23;
                  break;
                }
                return _context16.abrupt("return", (console.log("[mfClassicGetType] 识别为Mifare Classic 2K"), "mifare_classic_2k"));
              case 23:
                _context16.next = 28;
                break;
              case 25:
                _context16.prev = 25;
                _context16.t1 = _context16["catch"](16);
                console.log("[mfClassicGetType] 2K卡测试失败:", _context16.t1.message);
              case 28:
                _context16.prev = 28;
                console.log("[mfClassicGetType] 测试1K卡 - 尝试认证块63");
                _context16.next = 32;
                return e.send14ARaw([96, 63], {
                  checkResponseCrc: !1,
                  respTimeoutMs: 200
                });
              case 32:
                _s7 = _context16.sent;
                if (!(console.log("[mfClassicGetType] 1K卡测试结果:", _s7), _s7 && 4 === _s7.length)) {
                  _context16.next = 35;
                  break;
                }
                return _context16.abrupt("return", (console.log("[mfClassicGetType] 识别为Mifare Classic 1K"), "mifare_classic_1k"));
              case 35:
                _context16.next = 40;
                break;
              case 37:
                _context16.prev = 37;
                _context16.t2 = _context16["catch"](28);
                console.log("[mfClassicGetType] 1K卡测试失败:", _context16.t2.message);
              case 40:
                _context16.prev = 40;
                console.log("[mfClassicGetType] 测试Mini卡 - 尝试认证块20");
                _context16.next = 44;
                return e.send14ARaw([96, 20], {
                  checkResponseCrc: !1,
                  respTimeoutMs: 200
                });
              case 44:
                _s8 = _context16.sent;
                if (!(console.log("[mfClassicGetType] Mini卡测试结果:", _s8), _s8 && 4 === _s8.length)) {
                  _context16.next = 47;
                  break;
                }
                return _context16.abrupt("return", (console.log("[mfClassicGetType] 识别为Mifare Classic Mini"), "mifare_classic_mini"));
              case 47:
                _context16.next = 52;
                break;
              case 49:
                _context16.prev = 49;
                _context16.t3 = _context16["catch"](40);
                console.log("[mfClassicGetType] Mini卡测试失败:", _context16.t3.message);
              case 52:
                return _context16.abrupt("return", (console.log("[mfClassicGetType] 所有测试都失败，默认识别为1K卡"), "mifare_classic_1k"));
              case 55:
                _context16.prev = 55;
                _context16.t4 = _context16["catch"](2);
                return _context16.abrupt("return", (console.warn("[mfClassicGetType] 卡片类型识别异常:", _context16.t4.message), "mifare_classic_1k"));
              case 58:
              case "end":
                return _context16.stop();
            }
          }, _callee14, null, [[2, 55], [4, 13], [16, 25], [28, 37], [40, 49]]);
        }))();
      }
    },
    getters: {
      currentStatus: function currentStatus(e) {
        return {
          mode: e.currentMode,
          state: e.readingState,
          isReaderMode: e.isReaderMode,
          hasCard: !!e.currentCard.uid,
          progress: e.progress
        };
      },
      supportedCardTypes: function supportedCardTypes(e) {
        return e.supportedTypes[e.currentMode] || [];
      },
      identifyHFCardType: function identifyHFCardType() {
        return function (_ref20) {
          var e = _ref20.sak,
            s = _ref20.ats;
          return 24 == (24 & e) ? "mifare_classic" : 0 == (0 & e) ? "mifare_ultralight" : s && s.length > 0 ? "ntag" : "iso14443a";
        };
      },
      readingStatistics: function readingStatistics(e) {
        var s = e.statistics.totalReads;
        return _objectSpread2(_objectSpread2({}, e.statistics), {}, {
          successRate: s > 0 ? Math.round(e.statistics.successfulReads / s * 100) : 0
        });
      },
      recentReads: function recentReads(e) {
        return e.readHistory.slice(0, 10);
      },
      canStartReading: function canStartReading(e, s, r) {
        return r.device.isConnected && e.isReaderMode && (e.readingState === t || e.readingState === n || e.readingState === l);
      },
      isMifareClassicType: function isMifareClassicType() {
        return function (e) {
          if (!e) return !1;
          var s = e.toLowerCase();
          return s.includes("mifare_classic") || "mifare_classic" === s || "mifare_classic_1k" === s || "mifare_classic_2k" === s || "mifare_classic_4k" === s || "mifare_classic_mini" === s;
        };
      },
      isMifareUltralightType: function isMifareUltralightType() {
        return function (e) {
          if (!e) return !1;
          var s = e.toLowerCase();
          return s.includes("mifare_ultralight") || "mifare_ultralight" === s || "ntag" === s;
        };
      },
      formatCardTypeName: function formatCardTypeName() {
        return function (e) {
          if (!e) return "未知类型";
          return {
            mifare_classic_1k: "Mifare Classic 1K",
            mifare_classic_2k: "Mifare Classic 2K",
            mifare_classic_4k: "Mifare Classic 4K",
            mifare_classic_mini: "Mifare Classic Mini",
            mifare_classic: "Mifare Classic",
            mifare_ultralight: "Mifare Ultralight",
            ntag_213: "NTAG213",
            ntag_215: "NTAG215",
            ntag_216: "NTAG216",
            ntag: "NTAG",
            em410x: "EM410X",
            iso14443a: "ISO14443A",
            iso14443b: "ISO14443B",
            iso15693: "ISO15693"
          }[e.toLowerCase()] || e || "未知类型";
        };
      }
    }
  };
exports.reader = d; 
 			}); 
		define("store/modules/slots.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";

var _toConsumableArray2 = require("../../@babel/runtime/helpers/toConsumableArray");
var _defineProperty2 = require("../../@babel/runtime/helpers/defineProperty");
var _createForOfIteratorHelper2 = require("../../@babel/runtime/helpers/createForOfIteratorHelper");
var _regeneratorRuntime2 = require("../../@babel/runtime/helpers/regeneratorRuntime");
var _asyncToGenerator2 = require("../../@babel/runtime/helpers/asyncToGenerator");
var _objectSpread2 = require("../../@babel/runtime/helpers/objectSpread2");
var _actions;
var e = require("../../common/vendor.js"),
  t = require("../../utils/chameleon-protocol.js"),
  o = require("../../services/bluetooth.js"),
  l = {
    enabled: !1,
    tagType: t.TagType.UNKNOWN,
    uid: "",
    nickname: "",
    hf: {
      enabled: !1,
      tagType: t.TagType.UNKNOWN,
      name: "",
      data: null
    },
    lf: {
      enabled: !1,
      tagType: t.TagType.UNKNOWN,
      name: "",
      data: null
    },
    atqa: "",
    sak: "",
    ats: "",
    size: 0,
    dataHash: "",
    lastModified: null,
    syncStatus: "synced",
    readCount: 0,
    writeCount: 0,
    lastAccessed: null
  };
function r(e) {
  var o = e.slots.filter(function (e) {
      return e.enabled && (e.tagType !== t.TagType.UNKNOWN || e.uid);
    }).length,
    l = {};
  e.slots.forEach(function (e) {
    if (e.tagType !== t.TagType.UNKNOWN) {
      var _o = t.ChameleonProtocol.getTagTypeName(e.tagType);
      l[_o] = (l[_o] || 0) + 1;
    }
  }), e.statistics = _objectSpread2(_objectSpread2({}, e.statistics), {}, {
    usedSlots: o,
    emptySlots: 16 - o,
    typeDistribution: l
  });
}
var s = {
  namespaced: !0,
  state: {
    slots: Array.from({
      length: 16
    }, function (e, t) {
      return _objectSpread2(_objectSpread2({
        id: t
      }, l), {}, {
        nickname: "\u5361\u69FD ".concat(t + 1)
      });
    }),
    activeSlot: 0,
    isLoading: !1,
    isUpdating: !1,
    lastError: null,
    slotSettings: {
      autoSave: !0,
      quickSwitch: !0,
      showEmptySlots: !0,
      sortBy: "index",
      filterBy: "all"
    },
    selectedSlots: [],
    batchOperation: null,
    statistics: {
      totalSlots: 16,
      usedSlots: 0,
      emptySlots: 16,
      typeDistribution: {},
      lastSyncTime: null
    },
    mifareEmulatorSettings: {
      gen1aEnabled: !1,
      gen2Enabled: !1,
      antiCollEnabled: !1,
      detectionEnabled: !1,
      writeMode: "normal"
    }
  },
  mutations: {
    SET_SLOT_DATA: function SET_SLOT_DATA(e, _ref) {
      var t = _ref.slotId,
        o = _ref.data;
      t >= 0 && t < 16 && (e.slots[t] = _objectSpread2(_objectSpread2(_objectSpread2({}, e.slots[t]), o), {}, {
        lastModified: Date.now()
      }), r(e));
    },
    SET_SLOT_UID: function SET_SLOT_UID(e, _ref2) {
      var t = _ref2.slotId,
        o = _ref2.uid;
      t >= 0 && t < 16 && (e.slots[t].uid = o, e.slots[t].lastModified = Date.now(), r(e));
    },
    SET_SLOT_TAG_TYPE: function SET_SLOT_TAG_TYPE(e, _ref3) {
      var t = _ref3.slotId,
        o = _ref3.tagType;
      t >= 0 && t < 16 && (e.slots[t].tagType = o, e.slots[t].lastModified = Date.now(), r(e));
    },
    SET_SLOT_NICKNAME: function SET_SLOT_NICKNAME(e, _ref4) {
      var t = _ref4.slotId,
        o = _ref4.nickname;
      t >= 0 && t < 16 && (e.slots[t].nickname = o || "\u5361\u69FD ".concat(t + 1), e.slots[t].lastModified = Date.now());
    },
    SET_SLOT_ENABLED: function SET_SLOT_ENABLED(e, _ref5) {
      var t = _ref5.slotId,
        o = _ref5.enabled;
      t >= 0 && t < 16 && (e.slots[t].enabled = o, e.slots[t].lastModified = Date.now(), r(e));
    },
    SET_ACTIVE_SLOT: function SET_ACTIVE_SLOT(e, t) {
      t >= 0 && t < 16 && (e.activeSlot = t);
    },
    CLEAR_SLOT: function CLEAR_SLOT(e, t) {
      t >= 0 && t < 16 && (e.slots[t] = _objectSpread2(_objectSpread2({
        id: t
      }, l), {}, {
        nickname: "\u5361\u69FD ".concat(t + 1),
        lastModified: Date.now()
      }), r(e));
    },
    COPY_SLOT: function COPY_SLOT(e, _ref6) {
      var t = _ref6.fromSlot,
        o = _ref6.toSlot;
      if (t >= 0 && t < 16 && o >= 0 && o < 16 && t !== o) {
        var _l = e.slots[t];
        e.slots[o] = _objectSpread2(_objectSpread2({}, _l), {}, {
          id: o,
          nickname: _l.nickname + " (副本)",
          lastModified: Date.now()
        }), r(e);
      }
    },
    SWAP_SLOTS: function SWAP_SLOTS(e, _ref7) {
      var t = _ref7.slotA,
        o = _ref7.slotB;
      if (t >= 0 && t < 16 && o >= 0 && o < 16 && t !== o) {
        var _l2 = _objectSpread2({}, e.slots[t]),
          _s = _objectSpread2({}, e.slots[o]);
        e.slots[t] = _objectSpread2(_objectSpread2({}, _s), {}, {
          id: t,
          lastModified: Date.now()
        }), e.slots[o] = _objectSpread2(_objectSpread2({}, _l2), {}, {
          id: o,
          lastModified: Date.now()
        }), r(e);
      }
    },
    SET_LOADING: function SET_LOADING(e, t) {
      e.isLoading = t;
    },
    SET_UPDATING: function SET_UPDATING(e, t) {
      e.isUpdating = t;
    },
    SET_ERROR: function SET_ERROR(e, t) {
      e.lastError = t;
    },
    SET_SLOT_SETTINGS: function SET_SLOT_SETTINGS(e, t) {
      e.slotSettings = _objectSpread2(_objectSpread2({}, e.slotSettings), t);
    },
    SELECT_SLOT: function SELECT_SLOT(e, t) {
      e.selectedSlots.includes(t) || e.selectedSlots.push(t);
    },
    DESELECT_SLOT: function DESELECT_SLOT(e, t) {
      var o = e.selectedSlots.indexOf(t);
      o > -1 && e.selectedSlots.splice(o, 1);
    },
    CLEAR_SELECTION: function CLEAR_SELECTION(e) {
      e.selectedSlots = [];
    },
    SET_BATCH_OPERATION: function SET_BATCH_OPERATION(e, t) {
      e.batchOperation = t;
    },
    UPDATE_STATISTICS: function UPDATE_STATISTICS(e, t) {
      e.statistics = _objectSpread2(_objectSpread2({}, e.statistics), t);
    },
    BATCH_UPDATE_SLOTS: function BATCH_UPDATE_SLOTS(e, t) {
      t.forEach(function (_ref8) {
        var t = _ref8.slotId,
          o = _ref8.data;
        t >= 0 && t < 16 && (e.slots[t] = _objectSpread2(_objectSpread2(_objectSpread2({}, e.slots[t]), o), {}, {
          lastModified: Date.now()
        }));
      }), r(e);
    },
    UPDATE_SLOT_FREQUENCY_STATUS: function UPDATE_SLOT_FREQUENCY_STATUS(e, _ref9) {
      var t = _ref9.slotId,
        o = _ref9.frequency,
        l = _ref9.enabled;
      if (e.slots[t]) {
        var _r = o.toLowerCase();
        e.slots[t][_r] && (e.slots[t][_r].enabled = l);
      }
    },
    UPDATE_CARD_DETAILS: function UPDATE_CARD_DETAILS(e, _ref10) {
      var t = _ref10.slotId,
        o = _ref10.frequency,
        l = _ref10.details;
      if (e.slots[t]) {
        var _r2 = o.toLowerCase();
        e.slots[t][_r2] && (e.slots[t][_r2] = _objectSpread2(_objectSpread2(_objectSpread2({}, e.slots[t][_r2]), l), {}, {
          cardNumber: l.cardNumber
        }));
      }
    },
    SET_MIFARE_EMULATOR_SETTINGS: function SET_MIFARE_EMULATOR_SETTINGS(e, t) {
      e.mifareEmulatorSettings = t;
    },
    UPDATE_MIFARE_EMULATOR_SETTING: function UPDATE_MIFARE_EMULATOR_SETTING(e, _ref11) {
      var t = _ref11.key,
        o = _ref11.value;
      e.mifareEmulatorSettings && (e.mifareEmulatorSettings[t] = o);
    }
  },
  actions: (_actions = {
    loadAllSlots: function loadAllSlots(_ref12) {
      return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee() {
        var e, r, _r3, a, i, _e, n, c, S, d, T, f;
        return _regeneratorRuntime2().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              e = _ref12.commit, r = _ref12.rootGetters;
              if (r["device/isConnected"]) {
                _context.next = 3;
                break;
              }
              throw new Error("设备未连接");
            case 3:
              _context.prev = 3;
              if (!(e("SET_LOADING", !0), e("SET_ERROR", null), "function" != typeof o.bluetoothService.getSlotInfo)) {
                _context.next = 6;
                break;
              }
              throw new Error("蓝牙服务getSlotInfo方法不存在");
            case 6:
              _context.next = 8;
              return o.bluetoothService.getSlotInfo();
            case 8:
              _r3 = _context.sent;
              _context.next = 11;
              return o.bluetoothService.getEnabledSlots();
            case 11:
              a = _context.sent;
              _context.t0 = e;
              _context.next = 15;
              return o.bluetoothService.getActiveSlot();
            case 15:
              _context.t1 = _context.sent;
              (0, _context.t0)("SET_ACTIVE_SLOT", _context.t1);
              i = [];
              _e = 0;
            case 19:
              if (!(_e < 16)) {
                _context.next = 51;
                break;
              }
              n = _r3[_e] || {
                id: _e,
                hfType: 0,
                lfType: 0,
                hfTagType: "UNKNOWN",
                lfTagType: "UNKNOWN"
              }, c = a[_e] || {
                id: _e,
                hf: !1,
                lf: !1,
                any: !1
              };
              S = "", d = "";
              _context.prev = 22;
              _context.t2 = c.hf && "UNKNOWN" !== n.hfTagType;
              if (!_context.t2) {
                _context.next = 28;
                break;
              }
              _context.next = 27;
              return o.bluetoothService.getSlotTagName(_e, t.TagFrequency.HF);
            case 27:
              S = _context.sent;
            case 28:
              _context.next = 33;
              break;
            case 30:
              _context.prev = 30;
              _context.t3 = _context["catch"](22);
              _context.t3.message.includes("Flash读取失败") || console.warn("[Slots] \u83B7\u53D6\u5361\u69FD ".concat(_e, " HF\u540D\u79F0\u5931\u8D25:"), _context.t3);
            case 33:
              _context.prev = 33;
              _context.t4 = c.lf && "UNKNOWN" !== n.lfTagType;
              if (!_context.t4) {
                _context.next = 39;
                break;
              }
              _context.next = 38;
              return o.bluetoothService.getSlotTagName(_e, t.TagFrequency.LF);
            case 38:
              d = _context.sent;
            case 39:
              _context.next = 44;
              break;
            case 41:
              _context.prev = 41;
              _context.t5 = _context["catch"](33);
              _context.t5.message.includes("Flash读取失败") || console.warn("[Slots] \u83B7\u53D6\u5361\u69FD ".concat(_e, " LF\u540D\u79F0\u5931\u8D25:"), _context.t5);
            case 44:
              T = "UNKNOWN";
              "UNKNOWN" !== n.hfTagType ? T = n.hfTagType : "UNKNOWN" !== n.lfTagType && (T = n.lfTagType);
              f = _objectSpread2(_objectSpread2({}, l), {}, {
                id: _e,
                enabled: c.any,
                hf: _objectSpread2(_objectSpread2({}, l.hf), {}, {
                  enabled: c.hf,
                  tagType: n.hfTagType,
                  name: S || ("UNKNOWN" !== n.hfTagType ? "" : "空")
                }),
                lf: _objectSpread2(_objectSpread2({}, l.lf), {}, {
                  enabled: c.lf,
                  tagType: n.lfTagType,
                  name: d || ("UNKNOWN" !== n.lfTagType ? "" : "空")
                }),
                tagType: T,
                nickname: S || d || "\u5361\u69FD ".concat(_e + 1)
              });
              i.push({
                slotId: _e,
                data: f
              });
            case 48:
              _e++;
              _context.next = 19;
              break;
            case 51:
              e("BATCH_UPDATE_SLOTS", i), console.log("[Slots] \u6210\u529F\u52A0\u8F7D ".concat(i.length, " \u4E2A\u5361\u69FD\u6570\u636E"));
              _context.next = 57;
              break;
            case 54:
              _context.prev = 54;
              _context.t6 = _context["catch"](3);
              throw console.error("[Slots] 加载卡槽数据失败:", _context.t6), e("SET_ERROR", _context.t6.message), _context.t6;
            case 57:
              _context.prev = 57;
              e("SET_LOADING", !1);
              return _context.finish(57);
            case 60:
            case "end":
              return _context.stop();
          }
        }, _callee, null, [[3, 54, 57, 60], [22, 30], [33, 41]]);
      }))();
    },
    loadSlot: function loadSlot(_ref13, l) {
      return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee2() {
        var e, o;
        return _regeneratorRuntime2().wrap(function _callee2$(_context2) {
          while (1) switch (_context2.prev = _context2.next) {
            case 0:
              e = _ref13.commit, o = _ref13.rootGetters;
              if (o["device/isConnected"]) {
                _context2.next = 3;
                break;
              }
              throw new Error("设备未连接");
            case 3:
              if (t.ChameleonProtocol.isValidSlot(l)) {
                _context2.next = 5;
                break;
              }
              throw new Error("无效的卡槽编号");
            case 5:
              _context2.prev = 5;
              e("SET_LOADING", !0);
              e("SET_SLOT_DATA", {
                slotId: l,
                data: {
                  enabled: !0,
                  tagType: t.TagType.MIFARE_1024,
                  nickname: "\u5361\u69FD ".concat(l + 1),
                  uid: "",
                  data: null,
                  size: 0,
                  isReadOnly: !1
                }
              });
              _context2.next = 13;
              break;
            case 10:
              _context2.prev = 10;
              _context2.t0 = _context2["catch"](5);
              throw console.error("[Slots] \u52A0\u8F7D\u5361\u69FD ".concat(l, " \u5931\u8D25:"), _context2.t0), e("SET_ERROR", _context2.t0.message), _context2.t0;
            case 13:
              _context2.prev = 13;
              e("SET_LOADING", !1);
              return _context2.finish(13);
            case 16:
            case "end":
              return _context2.stop();
          }
        }, _callee2, null, [[5, 10, 13, 16]]);
      }))();
    },
    setActiveSlot: function setActiveSlot(_ref14, r) {
      return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee3() {
        var e, l;
        return _regeneratorRuntime2().wrap(function _callee3$(_context3) {
          while (1) switch (_context3.prev = _context3.next) {
            case 0:
              e = _ref14.commit, l = _ref14.rootGetters;
              if (l["device/isConnected"]) {
                _context3.next = 3;
                break;
              }
              throw new Error("设备未连接");
            case 3:
              if (t.ChameleonProtocol.isValidSlot(r)) {
                _context3.next = 5;
                break;
              }
              throw new Error("无效的卡槽编号");
            case 5:
              _context3.prev = 5;
              if (!(e("SET_UPDATING", !0), "function" != typeof o.bluetoothService.setActiveSlot)) {
                _context3.next = 8;
                break;
              }
              throw new Error("蓝牙服务setActiveSlot方法不存在");
            case 8:
              _context3.next = 10;
              return o.bluetoothService.setActiveSlot(r);
            case 10:
              e("SET_ACTIVE_SLOT", r);
              console.log("[Slots] \u6210\u529F\u8BBE\u7F6E\u6D3B\u52A8\u5361\u69FD\u4E3A ".concat(r));
              _context3.next = 17;
              break;
            case 14:
              _context3.prev = 14;
              _context3.t0 = _context3["catch"](5);
              throw console.error("[Slots] 设置活动卡槽失败:", _context3.t0), e("SET_ERROR", _context3.t0.message), _context3.t0;
            case 17:
              _context3.prev = 17;
              e("SET_UPDATING", !1);
              return _context3.finish(17);
            case 20:
            case "end":
              return _context3.stop();
          }
        }, _callee3, null, [[5, 14, 17, 20]]);
      }))();
    },
    updateSlotConfig: function updateSlotConfig(_ref15, _ref16) {
      return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee4() {
        var e, o, l, r;
        return _regeneratorRuntime2().wrap(function _callee4$(_context4) {
          while (1) switch (_context4.prev = _context4.next) {
            case 0:
              e = _ref15.commit, o = _ref15.rootGetters;
              l = _ref16.slotId, r = _ref16.config;
              if (o["device/isConnected"]) {
                _context4.next = 4;
                break;
              }
              throw new Error("设备未连接");
            case 4:
              if (t.ChameleonProtocol.isValidSlot(l)) {
                _context4.next = 6;
                break;
              }
              throw new Error("无效的卡槽编号");
            case 6:
              _context4.prev = 6;
              e("SET_UPDATING", !0), void 0 !== r.tagType && e("SET_SLOT_TAG_TYPE", {
                slotId: l,
                tagType: r.tagType
              }), void 0 !== r.enabled && e("SET_SLOT_ENABLED", {
                slotId: l,
                enabled: r.enabled
              }), void 0 !== r.nickname && e("SET_SLOT_NICKNAME", {
                slotId: l,
                nickname: r.nickname
              }), console.log("[Slots] \u6210\u529F\u66F4\u65B0\u5361\u69FD ".concat(l, " \u914D\u7F6E"));
              _context4.next = 13;
              break;
            case 10:
              _context4.prev = 10;
              _context4.t0 = _context4["catch"](6);
              throw console.error("[Slots] 更新卡槽配置失败:", _context4.t0), e("SET_ERROR", _context4.t0.message), _context4.t0;
            case 13:
              _context4.prev = 13;
              e("SET_UPDATING", !1);
              return _context4.finish(13);
            case 16:
            case "end":
              return _context4.stop();
          }
        }, _callee4, null, [[6, 10, 13, 16]]);
      }))();
    },
    clearSlot: function clearSlot(_ref17, r) {
      return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee5() {
        var e, l;
        return _regeneratorRuntime2().wrap(function _callee5$(_context5) {
          while (1) switch (_context5.prev = _context5.next) {
            case 0:
              e = _ref17.commit, l = _ref17.rootGetters;
              if (l["device/isConnected"]) {
                _context5.next = 3;
                break;
              }
              throw new Error("设备未连接");
            case 3:
              if (t.ChameleonProtocol.isValidSlot(r)) {
                _context5.next = 5;
                break;
              }
              throw new Error("无效的卡槽编号");
            case 5:
              _context5.prev = 5;
              if (!(e("SET_UPDATING", !0), "function" != typeof o.bluetoothService.clearSlot)) {
                _context5.next = 8;
                break;
              }
              throw new Error("蓝牙服务clearSlot方法不存在");
            case 8:
              _context5.next = 10;
              return o.bluetoothService.clearSlot(r);
            case 10:
              e("CLEAR_SLOT", r);
              console.log("[Slots] \u6210\u529F\u6E05\u7A7A\u5361\u69FD ".concat(r));
              _context5.next = 17;
              break;
            case 14:
              _context5.prev = 14;
              _context5.t0 = _context5["catch"](5);
              throw console.error("[Slots] 清空卡槽失败:", _context5.t0), e("SET_ERROR", _context5.t0.message), _context5.t0;
            case 17:
              _context5.prev = 17;
              e("SET_UPDATING", !1);
              return _context5.finish(17);
            case 20:
            case "end":
              return _context5.stop();
          }
        }, _callee5, null, [[5, 14, 17, 20]]);
      }))();
    },
    copySlot: function copySlot(_ref18, _ref19) {
      return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee6() {
        var e, o, l, r;
        return _regeneratorRuntime2().wrap(function _callee6$(_context6) {
          while (1) switch (_context6.prev = _context6.next) {
            case 0:
              e = _ref18.commit, o = _ref18.rootGetters;
              l = _ref19.fromSlot, r = _ref19.toSlot;
              if (o["device/isConnected"]) {
                _context6.next = 4;
                break;
              }
              throw new Error("设备未连接");
            case 4:
              if (!(!t.ChameleonProtocol.isValidSlot(l) || !t.ChameleonProtocol.isValidSlot(r))) {
                _context6.next = 6;
                break;
              }
              throw new Error("无效的卡槽编号");
            case 6:
              if (!(l === r)) {
                _context6.next = 8;
                break;
              }
              throw new Error("源卡槽和目标卡槽不能相同");
            case 8:
              _context6.prev = 8;
              e("SET_UPDATING", !0), e("COPY_SLOT", {
                fromSlot: l,
                toSlot: r
              }), console.log("[Slots] \u6210\u529F\u590D\u5236\u5361\u69FD ".concat(l, " \u5230 ").concat(r));
              _context6.next = 15;
              break;
            case 12:
              _context6.prev = 12;
              _context6.t0 = _context6["catch"](8);
              throw console.error("[Slots] 复制卡槽失败:", _context6.t0), e("SET_ERROR", _context6.t0.message), _context6.t0;
            case 15:
              _context6.prev = 15;
              e("SET_UPDATING", !1);
              return _context6.finish(15);
            case 18:
            case "end":
              return _context6.stop();
          }
        }, _callee6, null, [[8, 12, 15, 18]]);
      }))();
    },
    batchOperation: function batchOperation(_ref20, _ref21) {
      var _this = this;
      return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee7() {
        var e, o, l, r, s, a, _iterator, _step, _e2;
        return _regeneratorRuntime2().wrap(function _callee7$(_context7) {
          while (1) switch (_context7.prev = _context7.next) {
            case 0:
              e = _ref20.commit, o = _ref20.state, l = _ref20.rootGetters;
              r = _ref21.operation, s = _ref21.slotIds, a = _ref21.config;
              if (l["device/isConnected"]) {
                _context7.next = 4;
                break;
              }
              throw new Error("设备未连接");
            case 4:
              if (!(!Array.isArray(s) || 0 === s.length)) {
                _context7.next = 6;
                break;
              }
              throw new Error("请选择要操作的卡槽");
            case 6:
              _context7.prev = 6;
              e("SET_UPDATING", !0), e("SET_BATCH_OPERATION", r);
              _iterator = _createForOfIteratorHelper2(s);
              _context7.prev = 9;
              _iterator.s();
            case 11:
              if ((_step = _iterator.n()).done) {
                _context7.next = 32;
                break;
              }
              _e2 = _step.value;
              if (!t.ChameleonProtocol.isValidSlot(_e2)) {
                _context7.next = 30;
                break;
              }
              _context7.t0 = r;
              _context7.next = _context7.t0 === "clear" ? 17 : _context7.t0 === "enable" ? 20 : _context7.t0 === "disable" ? 23 : _context7.t0 === "setType" ? 26 : 30;
              break;
            case 17:
              _context7.next = 19;
              return _this.dispatch("slots/clearSlot", _e2);
            case 19:
              return _context7.abrupt("break", 30);
            case 20:
              _context7.next = 22;
              return _this.dispatch("slots/updateSlotConfig", {
                slotId: _e2,
                config: {
                  enabled: !0
                }
              });
            case 22:
              return _context7.abrupt("break", 30);
            case 23:
              _context7.next = 25;
              return _this.dispatch("slots/updateSlotConfig", {
                slotId: _e2,
                config: {
                  enabled: !1
                }
              });
            case 25:
              return _context7.abrupt("break", 30);
            case 26:
              _context7.t1 = a && a.tagType;
              if (!_context7.t1) {
                _context7.next = 30;
                break;
              }
              _context7.next = 30;
              return _this.dispatch("slots/updateSlotConfig", {
                slotId: _e2,
                config: {
                  tagType: a.tagType
                }
              });
            case 30:
              _context7.next = 11;
              break;
            case 32:
              _context7.next = 37;
              break;
            case 34:
              _context7.prev = 34;
              _context7.t2 = _context7["catch"](9);
              _iterator.e(_context7.t2);
            case 37:
              _context7.prev = 37;
              _iterator.f();
              return _context7.finish(37);
            case 40:
              e("CLEAR_SELECTION"), console.log("[Slots] \u6210\u529F\u6267\u884C\u6279\u91CF\u64CD\u4F5C: ".concat(r));
              _context7.next = 46;
              break;
            case 43:
              _context7.prev = 43;
              _context7.t3 = _context7["catch"](6);
              throw console.error("[Slots] 批量操作失败:", _context7.t3), e("SET_ERROR", _context7.t3.message), _context7.t3;
            case 46:
              _context7.prev = 46;
              e("SET_UPDATING", !1), e("SET_BATCH_OPERATION", null);
              return _context7.finish(46);
            case 49:
            case "end":
              return _context7.stop();
          }
        }, _callee7, null, [[6, 43, 46, 49], [9, 34, 37, 40]]);
      }))();
    },
    saveSlotSettings: function saveSlotSettings(_ref22) {
      var t = _ref22.commit,
        o = _ref22.state;
      try {
        e.index.setStorageSync("slotSettings", o.slotSettings), console.log("[Slots] 卡槽设置已保存");
      } catch (l) {
        console.error("[Slots] 保存卡槽设置失败:", l);
      }
    },
    loadSlotSettings: function loadSlotSettings(_ref23) {
      var t = _ref23.commit;
      try {
        var _o2 = e.index.getStorageSync("slotSettings");
        _o2 && (t("SET_SLOT_SETTINGS", _o2), console.log("[Slots] 卡槽设置已加载"));
      } catch (o) {
        console.error("[Slots] 加载卡槽设置失败:", o);
      }
    },
    enableSlotFrequency: function enableSlotFrequency(_ref24, _ref25) {
      return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee8() {
        var e, l, r, s, a;
        return _regeneratorRuntime2().wrap(function _callee8$(_context8) {
          while (1) switch (_context8.prev = _context8.next) {
            case 0:
              e = _ref24.commit, l = _ref24.rootGetters;
              r = _ref25.slotId, s = _ref25.frequency, a = _ref25.enabled;
              if (l["device/isConnected"]) {
                _context8.next = 4;
                break;
              }
              throw new Error("设备未连接");
            case 4:
              if (t.ChameleonProtocol.isValidSlot(r)) {
                _context8.next = 6;
                break;
              }
              throw new Error("无效的卡槽编号");
            case 6:
              _context8.prev = 6;
              _context8.next = 9;
              return o.bluetoothService.enableSlotFrequency(r, s, a);
            case 9:
              e("UPDATE_SLOT_FREQUENCY_STATUS", {
                slotId: r,
                frequency: s.toLowerCase(),
                enabled: a
              });
              console.log("[SlotsStore] \u6210\u529F\u8BBE\u7F6E\u5361\u69FD".concat(r, "\u7684").concat(s, "\u9891\u7387\u542F\u7528\u72B6\u6001: ").concat(a));
              return _context8.abrupt("return", !0);
            case 14:
              _context8.prev = 14;
              _context8.t0 = _context8["catch"](6);
              throw console.error("[SlotsStore] 启用/禁用卡槽频率失败:", _context8.t0), e("SET_ERROR", _context8.t0.message), _context8.t0;
            case 17:
            case "end":
              return _context8.stop();
          }
        }, _callee8, null, [[6, 14]]);
      }))();
    },
    getMf1EmulatorSettings: function getMf1EmulatorSettings(_ref26, r) {
      return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee9() {
        var e, l, _e3;
        return _regeneratorRuntime2().wrap(function _callee9$(_context9) {
          while (1) switch (_context9.prev = _context9.next) {
            case 0:
              e = _ref26.commit, l = _ref26.rootGetters;
              if (l["device/isConnected"]) {
                _context9.next = 3;
                break;
              }
              throw new Error("设备未连接");
            case 3:
              if (t.ChameleonProtocol.isValidSlot(r)) {
                _context9.next = 5;
                break;
              }
              throw new Error("无效的卡槽编号");
            case 5:
              _context9.prev = 5;
              _context9.next = 8;
              return o.bluetoothService.getMf1EmulatorSettings(r);
            case 8:
              _e3 = _context9.sent;
              return _context9.abrupt("return", (console.log("[SlotsStore] \u6210\u529F\u83B7\u53D6\u5361\u69FD".concat(r, "\u7684\u6A21\u62DF\u5668\u8BBE\u7F6E:"), _e3), _e3));
            case 12:
              _context9.prev = 12;
              _context9.t0 = _context9["catch"](5);
              throw console.error("[SlotsStore] \u83B7\u53D6\u5361\u69FD".concat(r, "\u6A21\u62DF\u5668\u8BBE\u7F6E\u5931\u8D25:"), _context9.t0), e("SET_ERROR", _context9.t0.message), _context9.t0;
            case 15:
            case "end":
              return _context9.stop();
          }
        }, _callee9, null, [[5, 12]]);
      }))();
    },
    setMifareGen1aMode: function setMifareGen1aMode(_ref27, _ref28) {
      return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee10() {
        var e, l, r, s;
        return _regeneratorRuntime2().wrap(function _callee10$(_context10) {
          while (1) switch (_context10.prev = _context10.next) {
            case 0:
              e = _ref27.commit, l = _ref27.rootGetters;
              r = _ref28.slotId, s = _ref28.enabled;
              if (l["device/isConnected"]) {
                _context10.next = 4;
                break;
              }
              throw new Error("设备未连接");
            case 4:
              if (t.ChameleonProtocol.isValidSlot(r)) {
                _context10.next = 6;
                break;
              }
              throw new Error("无效的卡槽编号");
            case 6:
              _context10.prev = 6;
              _context10.next = 9;
              return o.bluetoothService.setMf1Gen1aMode(r, s);
            case 9:
              console.log("[SlotsStore] \u6210\u529F\u8BBE\u7F6E\u5361\u69FD".concat(r, "\u7684Gen1A\u6A21\u5F0F: ").concat(s));
              return _context10.abrupt("return", !0);
            case 13:
              _context10.prev = 13;
              _context10.t0 = _context10["catch"](6);
              throw console.error("[SlotsStore] \u8BBE\u7F6E\u5361\u69FD".concat(r, "Gen1A\u6A21\u5F0F\u5931\u8D25:"), _context10.t0), e("SET_ERROR", _context10.t0.message), _context10.t0;
            case 16:
            case "end":
              return _context10.stop();
          }
        }, _callee10, null, [[6, 13]]);
      }))();
    },
    setMifareGen2Mode: function setMifareGen2Mode(_ref29, _ref30) {
      return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee11() {
        var e, l, r, s;
        return _regeneratorRuntime2().wrap(function _callee11$(_context11) {
          while (1) switch (_context11.prev = _context11.next) {
            case 0:
              e = _ref29.commit, l = _ref29.rootGetters;
              r = _ref30.slotId, s = _ref30.enabled;
              if (l["device/isConnected"]) {
                _context11.next = 4;
                break;
              }
              throw new Error("设备未连接");
            case 4:
              if (t.ChameleonProtocol.isValidSlot(r)) {
                _context11.next = 6;
                break;
              }
              throw new Error("无效的卡槽编号");
            case 6:
              _context11.prev = 6;
              _context11.next = 9;
              return o.bluetoothService.setMf1Gen2Mode(r, s);
            case 9:
              console.log("[SlotsStore] \u6210\u529F\u8BBE\u7F6E\u5361\u69FD".concat(r, "\u7684Gen2\u6A21\u5F0F: ").concat(s));
              return _context11.abrupt("return", !0);
            case 13:
              _context11.prev = 13;
              _context11.t0 = _context11["catch"](6);
              throw console.error("[SlotsStore] \u8BBE\u7F6E\u5361\u69FD".concat(r, "Gen2\u6A21\u5F0F\u5931\u8D25:"), _context11.t0), e("SET_ERROR", _context11.t0.message), _context11.t0;
            case 16:
            case "end":
              return _context11.stop();
          }
        }, _callee11, null, [[6, 13]]);
      }))();
    },
    getMifareEmulatorSettings: function getMifareEmulatorSettings(_ref31) {
      return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee12() {
        var e, t, _t, _t2;
        return _regeneratorRuntime2().wrap(function _callee12$(_context12) {
          while (1) switch (_context12.prev = _context12.next) {
            case 0:
              e = _ref31.commit, t = _ref31.rootGetters;
              if (t["device/isConnected"]) {
                _context12.next = 3;
                break;
              }
              throw new Error("设备未连接");
            case 3:
              _context12.prev = 3;
              if (!("function" != typeof o.bluetoothService.getMifareEmulatorSettings)) {
                _context12.next = 8;
                break;
              }
              console.warn("getMifareEmulatorSettings方法不存在，返回默认设置");
              _t = {
                gen1aEnabled: !1,
                gen2Enabled: !1,
                antiCollEnabled: !1,
                detectionEnabled: !1,
                writeMode: "normal"
              };
              return _context12.abrupt("return", (e("SET_MIFARE_EMULATOR_SETTINGS", _t), _t));
            case 8:
              _context12.next = 10;
              return o.bluetoothService.getMifareEmulatorSettings();
            case 10:
              _t2 = _context12.sent;
              return _context12.abrupt("return", (e("SET_MIFARE_EMULATOR_SETTINGS", _t2), _t2));
            case 14:
              _context12.prev = 14;
              _context12.t0 = _context12["catch"](3);
              throw console.error("[SlotsStore] 获取Mifare模拟器设置失败:", _context12.t0), _context12.t0;
            case 17:
            case "end":
              return _context12.stop();
          }
        }, _callee12, null, [[3, 14]]);
      }))();
    },
    setMifareWriteMode: function setMifareWriteMode(_ref32, l) {
      return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee13() {
        var e, t;
        return _regeneratorRuntime2().wrap(function _callee13$(_context13) {
          while (1) switch (_context13.prev = _context13.next) {
            case 0:
              e = _ref32.commit, t = _ref32.rootGetters;
              if (t["device/isConnected"]) {
                _context13.next = 3;
                break;
              }
              throw new Error("设备未连接");
            case 3:
              _context13.prev = 3;
              if (!("function" != typeof o.bluetoothService.setMifareWriteMode)) {
                _context13.next = 6;
                break;
              }
              throw console.warn("setMifareWriteMode方法不存在"), new Error("蓝牙服务暂不支持写入模式设置");
            case 6:
              _context13.next = 8;
              return o.bluetoothService.setMifareWriteMode(l);
            case 8:
              e("UPDATE_MIFARE_EMULATOR_SETTING", {
                key: "writeMode",
                value: l
              });
              return _context13.abrupt("return", !0);
            case 12:
              _context13.prev = 12;
              _context13.t0 = _context13["catch"](3);
              throw console.error("[SlotsStore] 设置写入模式失败:", _context13.t0), _context13.t0;
            case 15:
            case "end":
              return _context13.stop();
          }
        }, _callee13, null, [[3, 12]]);
      }))();
    },
    getLfEmulatorSettings: function getLfEmulatorSettings(_ref33, r) {
      return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee14() {
        var e, l, _e4;
        return _regeneratorRuntime2().wrap(function _callee14$(_context14) {
          while (1) switch (_context14.prev = _context14.next) {
            case 0:
              e = _ref33.commit, l = _ref33.rootGetters;
              if (l["device/isConnected"]) {
                _context14.next = 3;
                break;
              }
              throw new Error("设备未连接");
            case 3:
              if (t.ChameleonProtocol.isValidSlot(r)) {
                _context14.next = 5;
                break;
              }
              throw new Error("无效的卡槽编号");
            case 5:
              _context14.prev = 5;
              _context14.next = 8;
              return o.bluetoothService.getLfEmulatorSettings(r);
            case 8:
              _e4 = _context14.sent;
              return _context14.abrupt("return", (console.log("[SlotsStore] \u6210\u529F\u83B7\u53D6\u5361\u69FD".concat(r, "\u7684LF\u8BBE\u7F6E:"), _e4), _e4));
            case 12:
              _context14.prev = 12;
              _context14.t0 = _context14["catch"](5);
              throw console.error("[SlotsStore] \u83B7\u53D6\u5361\u69FD".concat(r, "LF\u8BBE\u7F6E\u5931\u8D25:"), _context14.t0), e("SET_ERROR", _context14.t0.message), _context14.t0;
            case 15:
            case "end":
              return _context14.stop();
          }
        }, _callee14, null, [[5, 12]]);
      }))();
    },
    setEM410XEmulatorID: function setEM410XEmulatorID(_ref34, _ref35) {
      return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee15() {
        var e, l, r, s;
        return _regeneratorRuntime2().wrap(function _callee15$(_context15) {
          while (1) switch (_context15.prev = _context15.next) {
            case 0:
              e = _ref34.commit, l = _ref34.rootGetters;
              r = _ref35.slotId, s = _ref35.uid;
              if (l["device/isConnected"]) {
                _context15.next = 4;
                break;
              }
              throw new Error("设备未连接");
            case 4:
              if (t.ChameleonProtocol.isValidSlot(r)) {
                _context15.next = 6;
                break;
              }
              throw new Error("无效的卡槽编号");
            case 6:
              _context15.prev = 6;
              _context15.next = 9;
              return o.bluetoothService.setEM410XEmulatorID(r, s);
            case 9:
              e("UPDATE_SLOT_FREQUENCY_STATUS", {
                slotId: r,
                frequency: "lf",
                enabled: !0
              });
              console.log("[SlotsStore] \u6210\u529F\u8BBE\u7F6E\u5361\u69FD".concat(r, "\u7684EM410X ID\u4E3A: ").concat(s));
              _context15.next = 16;
              break;
            case 13:
              _context15.prev = 13;
              _context15.t0 = _context15["catch"](6);
              throw console.error("[SlotsStore] \u8BBE\u7F6E\u5361\u69FD".concat(r, "EM410X ID\u5931\u8D25:"), _context15.t0), e("SET_ERROR", _context15.t0.message), _context15.t0;
            case 16:
            case "end":
              return _context15.stop();
          }
        }, _callee15, null, [[6, 13]]);
      }))();
    },
    getHfCardUID: function getHfCardUID(_ref36, r) {
      return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee16() {
        var e, l, _e5;
        return _regeneratorRuntime2().wrap(function _callee16$(_context16) {
          while (1) switch (_context16.prev = _context16.next) {
            case 0:
              e = _ref36.commit, l = _ref36.rootGetters;
              if (l["device/isConnected"]) {
                _context16.next = 3;
                break;
              }
              throw new Error("设备未连接");
            case 3:
              if (t.ChameleonProtocol.isValidSlot(r)) {
                _context16.next = 5;
                break;
              }
              throw new Error("无效的卡槽编号");
            case 5:
              _context16.prev = 5;
              console.log("[SlotsStore] \u5F00\u59CB\u83B7\u53D6\u5361\u69FD".concat(r, "\u7684HF UID"));
              _context16.next = 9;
              return o.bluetoothService.getMf1AntiCollData(r);
            case 9:
              _e5 = _context16.sent;
              return _context16.abrupt("return", (console.log("[SlotsStore] \u6210\u529F\u83B7\u53D6\u5361\u69FD".concat(r, "\u7684HF UID:"), _e5.uid), _e5));
            case 13:
              _context16.prev = 13;
              _context16.t0 = _context16["catch"](5);
              throw console.warn("[SlotsStore] \u83B7\u53D6\u5361\u69FD".concat(r, "HF UID\u5931\u8D25:"), _context16.t0.message), _context16.t0;
            case 16:
            case "end":
              return _context16.stop();
          }
        }, _callee16, null, [[5, 13]]);
      }))();
    },
    getLfCardUID: function getLfCardUID(_ref37, r) {
      return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee17() {
        var e, l, _e6;
        return _regeneratorRuntime2().wrap(function _callee17$(_context17) {
          while (1) switch (_context17.prev = _context17.next) {
            case 0:
              e = _ref37.commit, l = _ref37.rootGetters;
              if (l["device/isConnected"]) {
                _context17.next = 3;
                break;
              }
              throw new Error("设备未连接");
            case 3:
              if (t.ChameleonProtocol.isValidSlot(r)) {
                _context17.next = 5;
                break;
              }
              throw new Error("无效的卡槽编号");
            case 5:
              _context17.prev = 5;
              console.log("[SlotsStore] \u5F00\u59CB\u83B7\u53D6\u5361\u69FD".concat(r, "\u7684LF UID"));
              _context17.next = 9;
              return o.bluetoothService.getEM410XEmulatorID(r);
            case 9:
              _e6 = _context17.sent;
              return _context17.abrupt("return", (console.log("[SlotsStore] \u6210\u529F\u83B7\u53D6\u5361\u69FD".concat(r, "\u7684LF UID:"), _e6), _e6));
            case 13:
              _context17.prev = 13;
              _context17.t0 = _context17["catch"](5);
              throw console.warn("[SlotsStore] \u83B7\u53D6\u5361\u69FD".concat(r, "LF UID\u5931\u8D25:"), _context17.t0.message), _context17.t0;
            case 16:
            case "end":
              return _context17.stop();
          }
        }, _callee17, null, [[5, 13]]);
      }))();
    }
  }, _defineProperty2(_actions, "setMifareWriteMode", function setMifareWriteMode(_ref38, _ref39) {
    return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee18() {
      var e, l, r, s;
      return _regeneratorRuntime2().wrap(function _callee18$(_context18) {
        while (1) switch (_context18.prev = _context18.next) {
          case 0:
            e = _ref38.commit, l = _ref38.rootGetters;
            r = _ref39.slotId, s = _ref39.mode;
            if (l["device/isConnected"]) {
              _context18.next = 4;
              break;
            }
            throw new Error("设备未连接");
          case 4:
            if (t.ChameleonProtocol.isValidSlot(r)) {
              _context18.next = 6;
              break;
            }
            throw new Error("无效的卡槽编号");
          case 6:
            _context18.prev = 6;
            _context18.next = 9;
            return o.bluetoothService.setMf1WriteMode(r, s);
          case 9:
            console.log("[SlotsStore] \u6210\u529F\u8BBE\u7F6E\u5361\u69FD".concat(r, "\u7684\u5199\u5165\u6A21\u5F0F: ").concat(s));
            return _context18.abrupt("return", !0);
          case 13:
            _context18.prev = 13;
            _context18.t0 = _context18["catch"](6);
            throw console.error("[SlotsStore] \u8BBE\u7F6E\u5361\u69FD".concat(r, "\u5199\u5165\u6A21\u5F0F\u5931\u8D25:"), _context18.t0), e("SET_ERROR", _context18.t0.message), _context18.t0;
          case 16:
          case "end":
            return _context18.stop();
        }
      }, _callee18, null, [[6, 13]]);
    }))();
  }), _defineProperty2(_actions, "setMifareAntiCollision", function setMifareAntiCollision(_ref40, _ref41) {
    return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee19() {
      var e, l, r, s;
      return _regeneratorRuntime2().wrap(function _callee19$(_context19) {
        while (1) switch (_context19.prev = _context19.next) {
          case 0:
            e = _ref40.commit, l = _ref40.rootGetters;
            r = _ref41.slotId, s = _ref41.cardData;
            if (l["device/isConnected"]) {
              _context19.next = 4;
              break;
            }
            throw new Error("设备未连接");
          case 4:
            if (t.ChameleonProtocol.isValidSlot(r)) {
              _context19.next = 6;
              break;
            }
            throw new Error("无效的卡槽编号");
          case 6:
            _context19.prev = 6;
            _context19.next = 9;
            return o.bluetoothService.setMf1AntiCollision(r, s);
          case 9:
            console.log("[SlotsStore] \u6210\u529F\u8BBE\u7F6E\u5361\u69FD".concat(r, "\u7684\u9632\u78B0\u649E\u6570\u636E"));
            return _context19.abrupt("return", !0);
          case 13:
            _context19.prev = 13;
            _context19.t0 = _context19["catch"](6);
            throw console.error("[SlotsStore] \u8BBE\u7F6E\u5361\u69FD".concat(r, "\u9632\u78B0\u649E\u6570\u636E\u5931\u8D25:"), _context19.t0), e("SET_ERROR", _context19.t0.message), _context19.t0;
          case 16:
          case "end":
            return _context19.stop();
        }
      }, _callee19, null, [[6, 13]]);
    }))();
  }), _defineProperty2(_actions, "setSlotTagName", function setSlotTagName(_ref42, _ref43) {
    return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee20() {
      var e, l, r, s, a, _require, _t3;
      return _regeneratorRuntime2().wrap(function _callee20$(_context20) {
        while (1) switch (_context20.prev = _context20.next) {
          case 0:
            e = _ref42.commit, l = _ref42.rootGetters;
            r = _ref43.slotId, s = _ref43.frequency, a = _ref43.name;
            if (l["device/isConnected"]) {
              _context20.next = 4;
              break;
            }
            throw new Error("设备未连接");
          case 4:
            if (t.ChameleonProtocol.isValidSlot(r)) {
              _context20.next = 6;
              break;
            }
            throw new Error("无效的卡槽编号");
          case 6:
            _context20.prev = 6;
            _context20.next = 9;
            return o.bluetoothService.setSlotTagName(r, s, a);
          case 9:
            console.log("[SlotsStore] \u6210\u529F\u8BBE\u7F6E\u5361\u69FD".concat(r, "\u7684\u540D\u79F0: ").concat(a));
            _require = require("../../utils/chameleon-protocol.js"), _t3 = _require.TagFrequency;
            return _context20.abrupt("return", ("hf" === s || s === _t3.HF ? e("UPDATE_CARD_DETAILS", {
              slotId: r,
              frequency: "hf",
              details: {
                name: a
              }
            }) : "lf" !== s && s !== _t3.LF || e("UPDATE_CARD_DETAILS", {
              slotId: r,
              frequency: "lf",
              details: {
                name: a
              }
            }), !0));
          case 14:
            _context20.prev = 14;
            _context20.t0 = _context20["catch"](6);
            throw console.error("[SlotsStore] \u8BBE\u7F6E\u5361\u69FD".concat(r, "\u540D\u79F0\u5931\u8D25:"), _context20.t0), e("SET_ERROR", _context20.t0.message), _context20.t0;
          case 17:
          case "end":
            return _context20.stop();
        }
      }, _callee20, null, [[6, 14]]);
    }))();
  }), _defineProperty2(_actions, "setMifareDetectionMode", function setMifareDetectionMode(_ref44, _ref45) {
    return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee21() {
      var e, l, r, s;
      return _regeneratorRuntime2().wrap(function _callee21$(_context21) {
        while (1) switch (_context21.prev = _context21.next) {
          case 0:
            e = _ref44.commit, l = _ref44.rootGetters;
            r = _ref45.slotId, s = _ref45.enabled;
            if (l["device/isConnected"]) {
              _context21.next = 4;
              break;
            }
            throw new Error("设备未连接");
          case 4:
            if (t.ChameleonProtocol.isValidSlot(r)) {
              _context21.next = 6;
              break;
            }
            throw new Error("无效的卡槽编号");
          case 6:
            _context21.prev = 6;
            _context21.next = 9;
            return o.bluetoothService.setMf1DetectionMode(r, s);
          case 9:
            console.log("[SlotsStore] \u6210\u529F\u8BBE\u7F6E\u5361\u69FD".concat(r, "\u7684\u68C0\u6D4B\u6A21\u5F0F: ").concat(s ? "启用" : "禁用"));
            return _context21.abrupt("return", !0);
          case 13:
            _context21.prev = 13;
            _context21.t0 = _context21["catch"](6);
            throw console.error("[SlotsStore] \u8BBE\u7F6E\u5361\u69FD".concat(r, "\u68C0\u6D4B\u6A21\u5F0F\u5931\u8D25:"), _context21.t0), e("SET_ERROR", _context21.t0.message), _context21.t0;
          case 16:
          case "end":
            return _context21.stop();
        }
      }, _callee21, null, [[6, 13]]);
    }))();
  }), _defineProperty2(_actions, "deployCardToSlot", function deployCardToSlot(_ref46, _ref47) {
    return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee22() {
      var e, l, r, s, a, _e7, _e8;
      return _regeneratorRuntime2().wrap(function _callee22$(_context22) {
        while (1) switch (_context22.prev = _context22.next) {
          case 0:
            e = _ref46.commit, l = _ref46.dispatch;
            r = _ref47.slotId, s = _ref47.cardData, a = _ref47.frequency;
            _context22.prev = 2;
            e("SET_UPDATING", !0);
            console.log("[SlotsStore] \u5F00\u59CB\u90E8\u7F72\u5361\u7247\u5230\u5361\u69FD".concat(r, ":"), s.name);
            _context22.next = 7;
            return l("setActiveSlot", r);
          case 7:
            _context22.next = 9;
            return o.bluetoothService.setSlotType(r, s.tag);
          case 9:
            _context22.next = 11;
            return o.bluetoothService.enableSlot(r, a, !0);
          case 11:
            _context22.next = 13;
            return o.bluetoothService.setSlotDataDefault(r, s.tag);
          case 13:
            if (!("hf" === a && t.ChameleonProtocol.isHighFrequency(s.tag))) {
              _context22.next = 17;
              break;
            }
            _e7 = {
              uid: s.uid.replace(/\s/g, ""),
              sak: "string" == typeof s.sak ? parseInt(s.sak.replace(/\s/g, ""), 16) : s.sak,
              atqa: s.atqa.replace(/\s/g, ""),
              ats: s.ats.replace(/\s/g, "")
            };
            _context22.next = 17;
            return l("setMifareAntiCollision", {
              slotId: r,
              cardData: _e7
            });
          case 17:
            if (!("lf" === a && s.tag === t.TagType.EM410X)) {
              _context22.next = 21;
              break;
            }
            _e8 = t.ChameleonProtocol.hexStringToBytes(s.uid.replace(/\s/g, ""));
            _context22.next = 21;
            return o.bluetoothService.setEM410XEmulatorID(_e8);
          case 21:
            _context22.next = 23;
            return o.bluetoothService.setSlotTagName(r, s.name || "\u5361\u69FD ".concat(r + 1), a);
          case 23:
            s.data && s.data.length > 0 && console.log("[SlotsStore] \u5361\u7247\u5305\u542B ".concat(s.data.length, " \u5757\u6570\u636E"));
            _context22.next = 26;
            return o.bluetoothService.saveSlotData();
          case 26:
            _context22.next = 28;
            return l("loadSlotData", r);
          case 28:
            console.log("[SlotsStore] \u6210\u529F\u90E8\u7F72\u5361\u7247 \"".concat(s.name, "\" \u5230\u5361\u69FD").concat(r));
            return _context22.abrupt("return", {
              success: !0
            });
          case 32:
            _context22.prev = 32;
            _context22.t0 = _context22["catch"](2);
            throw console.error("[SlotsStore] \u90E8\u7F72\u5361\u7247\u5230\u5361\u69FD".concat(r, "\u5931\u8D25:"), _context22.t0), e("SET_ERROR", _context22.t0.message), _context22.t0;
          case 35:
            _context22.prev = 35;
            e("SET_UPDATING", !1);
            return _context22.finish(35);
          case 38:
          case "end":
            return _context22.stop();
        }
      }, _callee22, null, [[2, 32, 35, 38]]);
    }))();
  }), _actions),
  getters: {
    getSlot: function getSlot(e) {
      return function (t) {
        return e.slots[t] || null;
      };
    },
    activeSlotData: function activeSlotData(e, t) {
      var o = t.validSlots[e.activeSlot];
      return o ? _objectSpread2(_objectSpread2({}, o), {}, {
        displayInfo: {
          hfCard: o.hf ? {
            name: o.hf.name,
            type: o.hf.tagType,
            cardNumber: o.hf.cardNumber,
            enabled: o.hf.enabled
          } : null,
          lfCard: o.lf ? {
            name: o.lf.name,
            type: o.lf.tagType,
            cardNumber: o.lf.cardNumber,
            enabled: o.lf.enabled
          } : null
        }
      }) : null;
    },
    usedSlots: function usedSlots(e) {
      return e.slots.filter(function (e) {
        return e.enabled && (e.tagType !== t.TagType.UNKNOWN || e.uid);
      });
    },
    emptySlots: function emptySlots(e) {
      return e.slots.filter(function (e) {
        return e.tagType === t.TagType.UNKNOWN && !e.uid;
      });
    },
    slotsByType: function slotsByType(e) {
      return function (t) {
        return e.slots.filter(function (e) {
          return e.tagType === t;
        });
      };
    },
    enabledSlots: function enabledSlots(e) {
      return e.slots.filter(function (e) {
        return e.enabled;
      });
    },
    disabledSlots: function disabledSlots(e) {
      return e.slots.filter(function (e) {
        return !e.enabled;
      });
    },
    filteredSortedSlots: function filteredSortedSlots(e) {
      var o = _toConsumableArray2(e.slots);
      switch (e.slotSettings.filterBy) {
        case "used":
          o = o.filter(function (e) {
            return e.enabled && (e.tagType !== t.TagType.UNKNOWN || e.uid);
          });
          break;
        case "empty":
          o = o.filter(function (e) {
            return e.tagType === t.TagType.UNKNOWN && !e.uid;
          });
          break;
        case "enabled":
          o = o.filter(function (e) {
            return e.enabled;
          });
          break;
        case "disabled":
          o = o.filter(function (e) {
            return !e.enabled;
          });
      }
      switch (e.slotSettings.sortBy) {
        case "name":
          o.sort(function (e, t) {
            return e.nickname.localeCompare(t.nickname);
          });
          break;
        case "type":
          o.sort(function (e, t) {
            return e.tagType - t.tagType;
          });
          break;
        case "lastModified":
          o.sort(function (e, t) {
            return (t.lastModified || 0) - (e.lastModified || 0);
          });
          break;
        default:
          o.sort(function (e, t) {
            return e.id - t.id;
          });
      }
      return o;
    },
    slotStatistics: function slotStatistics(e, t) {
      var o = t.validSlots;
      var l = 0,
        r = 0,
        s = 0;
      return o.forEach(function (e) {
        var t = e.hf && e.hf.enabled,
          o = e.lf && e.lf.enabled;
        (t || o) && l++, t && r++, o && s++;
      }), {
        usedSlots: l,
        emptySlots: 16 - l,
        hfSlots: r,
        lfSlots: s,
        totalSlots: 16
      };
    },
    selectedSlots: function selectedSlots(e) {
      return e.selectedSlots;
    },
    hasSelection: function hasSelection(e) {
      return e.selectedSlots.length > 0;
    },
    slotSettings: function slotSettings(e) {
      return e.slotSettings;
    },
    isLoading: function isLoading(e) {
      return e.isLoading;
    },
    isUpdating: function isUpdating(e) {
      return e.isUpdating;
    },
    lastError: function lastError(e) {
      return e.lastError;
    },
    validSlots: function validSlots(e) {
      var _require2 = require("../../utils/chameleon-protocol.js"),
        t = _require2.ChameleonProtocol;
      return e.slots.map(function (e) {
        var o = _objectSpread2({}, e);
        return e.hf && t.isValidTagType(e.hf.tagType) ? (o.hf = _objectSpread2({}, e.hf), e.hf.uid && (o.hf.cardNumber = t.extractICCardNumber(e.hf.uid))) : o.hf = null, e.lf && t.isValidTagType(e.lf.tagType) ? (o.lf = _objectSpread2({}, e.lf), e.lf.uid && (o.lf.cardNumber = t.extractIDCardNumber(e.lf.uid))) : o.lf = null, o;
      });
    }
  }
};
exports.slots = s; 
 			}); 
		define("utils/card-data.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";

var _typeof2 = require("../@babel/runtime/helpers/typeof");
var _createForOfIteratorHelper2 = require("../@babel/runtime/helpers/createForOfIteratorHelper");
var _objectSpread2 = require("../@babel/runtime/helpers/objectSpread2");
var _inherits2 = require("../@babel/runtime/helpers/inherits");
var _createSuper2 = require("../@babel/runtime/helpers/createSuper");
require("../@babel/runtime/helpers/Arrayincludes");
var _classCallCheck2 = require("../@babel/runtime/helpers/classCallCheck");
var _createClass2 = require("../@babel/runtime/helpers/createClass");
var t,
  e = Object.defineProperty;
var r = /*#__PURE__*/function () {
  function r() {
    var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
    _classCallCheck2(this, r);
    this.id = t.id || null, this.name = t.name || "", this.type = t.type || "other", this.data = t.data || {}, this.tags = t.tags || [], this.description = t.description || "", this.color = t.color || "#007AFF", this.favorite = t.favorite || !1, this.createdAt = t.createdAt || new Date().toISOString(), this.modifiedAt = t.modifiedAt || new Date().toISOString();
  }
  _createClass2(r, [{
    key: "validate",
    value: function validate() {
      var t = [];
      return this.name && 0 !== this.name.trim().length || t.push("卡片名称不能为空"), this.name.length > 50 && t.push("卡片名称不能超过50个字符"), this.isValidType() || t.push("无效的卡片类型"), {
        isValid: 0 === t.length,
        errors: t
      };
    }
  }, {
    key: "isValidType",
    value: function isValidType() {
      return ["mifare_classic", "mifare_ultralight", "em410x", "t55xx", "ntag", "other"].includes(this.type);
    }
  }, {
    key: "getSize",
    value: function getSize() {
      return JSON.stringify(this.data).length;
    }
  }, {
    key: "clone",
    value: function clone() {
      return new r(JSON.parse(JSON.stringify(this)));
    }
  }, {
    key: "toObject",
    value: function toObject() {
      return {
        id: this.id,
        name: this.name,
        type: this.type,
        data: this.data,
        tags: this.tags,
        description: this.description,
        color: this.color,
        favorite: this.favorite,
        createdAt: this.createdAt,
        modifiedAt: this.modifiedAt
      };
    }
  }]);
  return r;
}();
var i = /*#__PURE__*/function (_r) {
  _inherits2(i, _r);
  var _super = _createSuper2(i);
  function i() {
    var _this;
    var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
    _classCallCheck2(this, i);
    _this = _super.call(this, t), _this.type = "mifare_classic", _this.sectors = t.sectors || [], _this.keys = t.keys || {
      keyA: [],
      keyB: []
    }, _this.accessBits = t.accessBits || [], _this.uid = t.uid || "", _this.sak = t.sak || "", _this.atqa = t.atqa || "";
    return _this;
  }
  _createClass2(i, [{
    key: "validateUID",
    value: function validateUID() {
      if (!this.uid) return {
        isValid: !1,
        error: "UID不能为空"
      };
      return /^[0-9A-Fa-f\s]{8,20}$/.test(this.uid.replace(/\s/g, "")) ? {
        isValid: !0
      } : {
        isValid: !1,
        error: "UID格式无效，应为4-10字节的十六进制数据"
      };
    }
  }, {
    key: "formatUID",
    value: function formatUID() {
      var t;
      if (!this.uid) return "";
      var e = this.uid.replace(/\s/g, "").toUpperCase();
      return (null == (t = e.match(/.{2}/g)) ? void 0 : t.join(" ")) || e;
    }
  }, {
    key: "getSectorCount",
    value: function getSectorCount() {
      return this.sectors.length;
    }
  }, {
    key: "getBlockCount",
    value: function getBlockCount() {
      return 4 * this.sectors.length;
    }
  }, {
    key: "hasCompleteKeys",
    value: function hasCompleteKeys() {
      var _this2 = this;
      return this.sectors.every(function (t, e) {
        return _this2.keys.keyA[e] && _this2.keys.keyB[e];
      });
    }
  }]);
  return i;
}(r);
var a = /*#__PURE__*/function (_r2) {
  _inherits2(a, _r2);
  var _super2 = _createSuper2(a);
  function a() {
    var _this3;
    var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
    _classCallCheck2(this, a);
    _this3 = _super2.call(this, t), _this3.type = "mifare_ultralight", _this3.pages = t.pages || [], _this3.uid = t.uid || "", _this3.version = t.version || "", _this3.signature = t.signature || "", _this3.counter = t.counter || 0;
    return _this3;
  }
  _createClass2(a, [{
    key: "getPageCount",
    value: function getPageCount() {
      return this.pages.length;
    }
  }, {
    key: "getUserDataPages",
    value: function getUserDataPages() {
      return this.pages.slice(4, 16);
    }
  }, {
    key: "isNTAG",
    value: function isNTAG() {
      return this.version && this.version.includes("NTAG");
    }
  }]);
  return a;
}(r);
var s = /*#__PURE__*/function (_r3) {
  _inherits2(s, _r3);
  var _super3 = _createSuper2(s);
  function s() {
    var _this4;
    var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
    _classCallCheck2(this, s);
    _this4 = _super3.call(this, t), _this4.type = "em410x", _this4.uid = t.uid || "", _this4.rawData = t.rawData || "";
    return _this4;
  }
  _createClass2(s, [{
    key: "validateUID",
    value: function validateUID() {
      if (!this.uid) return {
        isValid: !1,
        error: "UID不能为空"
      };
      return /^[0-9A-Fa-f]{10}$/.test(this.uid.replace(/\s/g, "")) ? {
        isValid: !0
      } : {
        isValid: !1,
        error: "EM410X UID应为5字节的十六进制数据"
      };
    }
  }, {
    key: "formatUID",
    value: function formatUID() {
      var t;
      if (!this.uid) return "";
      var e = this.uid.replace(/\s/g, "").toUpperCase();
      return (null == (t = e.match(/.{2}/g)) ? void 0 : t.join(" ")) || e;
    }
  }]);
  return s;
}(r);
var n = /*#__PURE__*/function () {
  function n() {
    _classCallCheck2(this, n);
  }
  _createClass2(n, null, [{
    key: "getTypeInfo",
    value: function getTypeInfo(t) {
      return this.typeMap[t] || this.typeMap.other;
    }
  }, {
    key: "createCard",
    value: function createCard(t) {
      var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
      switch (t) {
        case "mifare_classic":
          return new i(e);
        case "mifare_ultralight":
          return new a(e);
        case "em410x":
          return new s(e);
        default:
          return new r(_objectSpread2(_objectSpread2({}, e), {}, {
            type: t
          }));
      }
    }
  }, {
    key: "fromRawData",
    value: function fromRawData(t, e) {
      var r = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};
      var i = this.createCard(t, r);
      switch (t) {
        case "mifare_classic":
          this.parseMifareClassicData(i, e);
          break;
        case "mifare_ultralight":
          this.parseMifareUltralightData(i, e);
          break;
        case "em410x":
          this.parseEM410XData(i, e);
          break;
        default:
          i.data = {
            raw: e
          };
      }
      return i;
    }
  }, {
    key: "parseMifareClassicData",
    value: function parseMifareClassicData(t, e) {
      e.sectors && (t.sectors = e.sectors), e.keys && (t.keys = e.keys), e.uid && (t.uid = e.uid), t.data = e;
    }
  }, {
    key: "parseMifareUltralightData",
    value: function parseMifareUltralightData(t, e) {
      e.pages && (t.pages = e.pages), e.uid && (t.uid = e.uid), t.data = e;
    }
  }, {
    key: "parseEM410XData",
    value: function parseEM410XData(t, e) {
      "string" == typeof e ? (t.uid = e, t.rawData = e) : e.uid && (t.uid = e.uid, t.rawData = e.raw || e.uid), t.data = {
        uid: t.uid,
        raw: t.rawData
      };
    }
  }, {
    key: "validateCardData",
    value: function validateCardData(t) {
      return t instanceof r ? t.validate() : {
        isValid: !1,
        errors: ["无效的卡片数据对象"]
      };
    }
  }, {
    key: "formatSize",
    value: function formatSize(t) {
      return t < 1024 ? "".concat(t, " B") : t < 1048576 ? "".concat((t / 1024).toFixed(1), " KB") : "".concat((t / 1048576).toFixed(1), " MB");
    }
  }, {
    key: "generatePreview",
    value: function generatePreview(t) {
      var e = "\u7C7B\u578B: ".concat(this.getTypeInfo(t.type).name);
      t.uid && (e += "\nUID: ".concat(t.uid)), t.description && (e += "\n\u63CF\u8FF0: ".concat(t.description));
      var r = t.getSize();
      return e += "\n\u5927\u5C0F: ".concat(this.formatSize(r)), e;
    }
  }, {
    key: "exportCard",
    value: function exportCard(t) {
      var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : "json";
      switch (e.toLowerCase()) {
        case "json":
          return JSON.stringify(t.toObject(), null, 2);
        case "bin":
          return this.exportBinaryData(t);
        case "dump":
          return this.exportDumpFormat(t);
        default:
          throw new Error("\u4E0D\u652F\u6301\u7684\u5BFC\u51FA\u683C\u5F0F: ".concat(e));
      }
    }
  }, {
    key: "exportBinaryData",
    value: function exportBinaryData(t) {
      switch (t.type) {
        case "mifare_classic":
          return this.exportMifareClassicBinary(t);
        case "mifare_ultralight":
          return this.exportMifareUltralightBinary(t);
        default:
          return JSON.stringify(t.data);
      }
    }
  }, {
    key: "exportDumpFormat",
    value: function exportDumpFormat(t) {
      var e = "# Chameleon Card Dump\n";
      switch (e += "# Name: ".concat(t.name, "\n"), e += "# Type: ".concat(t.type, "\n"), e += "# Created: ".concat(t.createdAt, "\n"), e += "# Modified: ".concat(t.modifiedAt, "\n"), e += "\n", t.type) {
        case "mifare_classic":
          e += this.exportMifareClassicDump(t);
          break;
        case "mifare_ultralight":
          e += this.exportMifareUltralightDump(t);
          break;
        default:
          e += JSON.stringify(t.data, null, 2);
      }
      return e;
    }
  }, {
    key: "importCard",
    value: function importCard(t) {
      var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : "json";
      switch (e.toLowerCase()) {
        case "json":
          return this.importJsonData(t);
        case "dump":
          return this.importDumpData(t);
        default:
          throw new Error("\u4E0D\u652F\u6301\u7684\u5BFC\u5165\u683C\u5F0F: ".concat(e));
      }
    }
  }, {
    key: "importJsonData",
    value: function importJsonData(t) {
      try {
        var _e = "string" == typeof t ? JSON.parse(t) : t;
        return this.createCard(_e.type || "other", _e);
      } catch (e) {
        throw new Error("JSON\u6570\u636E\u89E3\u6790\u5931\u8D25: ".concat(e.message));
      }
    }
  }, {
    key: "importDumpData",
    value: function importDumpData(t) {
      var e = t.split("\n"),
        r = {};
      var i = [];
      var _iterator = _createForOfIteratorHelper2(e),
        _step;
      try {
        for (_iterator.s(); !(_step = _iterator.n()).done;) {
          var _s = _step.value;
          _s.startsWith("# Name:") ? r.name = _s.substring(7).trim() : _s.startsWith("# Type:") ? r.type = _s.substring(7).trim() : !_s.startsWith("#") && _s.trim() && i.push(_s.trim());
        }
      } catch (err) {
        _iterator.e(err);
      } finally {
        _iterator.f();
      }
      var a = this.createCard(r.type || "other", r);
      if (i.length > 0) try {
        var _t = JSON.parse(i.join("\n"));
        Object.assign(a.data, _t);
      } catch (_unused) {
        a.data = {
          raw: i.join("\n")
        };
      }
      return a;
    }
  }, {
    key: "exportMifareClassicBinary",
    value: function exportMifareClassicBinary(t) {
      var e = "";
      return t.sectors && t.sectors.length > 0 && t.sectors.forEach(function (t) {
        e += t.join("");
      }), e;
    }
  }, {
    key: "exportMifareUltralightBinary",
    value: function exportMifareUltralightBinary(t) {
      var e = "";
      return t.pages && t.pages.length > 0 && (e = t.pages.join("")), e;
    }
  }, {
    key: "exportMifareClassicDump",
    value: function exportMifareClassicDump(t) {
      var e = "UID: ".concat(t.uid || "Unknown", "\n");
      return e += "SAK: ".concat(t.sak || "Unknown", "\n"), e += "ATQA: ".concat(t.atqa || "Unknown", "\n\n"), t.sectors && t.sectors.length > 0 && t.sectors.forEach(function (t, r) {
        e += "Sector ".concat(r, ":\n"), t.forEach(function (t, i) {
          e += "Block ".concat(4 * r + i, ": ").concat(t, "\n");
        }), e += "\n";
      }), e;
    }
  }, {
    key: "exportMifareUltralightDump",
    value: function exportMifareUltralightDump(t) {
      var e = "UID: ".concat(t.uid || "Unknown", "\n");
      return e += "Version: ".concat(t.version || "Unknown", "\n\n"), t.pages && t.pages.length > 0 && t.pages.forEach(function (t, r) {
        e += "Page ".concat(r.toString().padStart(2, "0"), ": ").concat(t, "\n");
      }), e;
    }
  }]);
  return n;
}();
(function (t, r, i) {
  r in t ? e(t, r, {
    enumerable: !0,
    configurable: !0,
    writable: !0,
    value: i
  }) : t[r] = i;
})(n, "symbol" != _typeof2(t = "typeMap") ? t + "" : t, {
  mifare_classic: {
    name: "Mifare Classic",
    icon: "creditcard",
    color: "#FF6B35",
    description: "ISO14443-A，支持1K/4K/8K容量"
  },
  mifare_ultralight: {
    name: "Mifare Ultralight",
    icon: "tag",
    color: "#4ECDC4",
    description: "ISO14443-A，小容量标签"
  },
  em410x: {
    name: "EM410X",
    icon: "key",
    color: "#45B7D1",
    description: "125KHz 只读标签"
  },
  t55xx: {
    name: "T55XX",
    icon: "shield",
    color: "#96CEB4",
    description: "125KHz 可写标签"
  },
  ntag: {
    name: "NTAG",
    icon: "chip",
    color: "#FFEAA7",
    description: "NFC论坛类型2标签"
  },
  other: {
    name: "其他",
    icon: "dots",
    color: "#DDA0DD",
    description: "其他类型卡片"
  }
}), exports.CardDataUtils = n; 
 			}); 
		define("utils/card-file-parser.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";

var _defineProperty2 = require("../@babel/runtime/helpers/defineProperty");
require("../@babel/runtime/helpers/Arrayincludes");
var _toConsumableArray2 = require("../@babel/runtime/helpers/toConsumableArray");
var _typeof2 = require("../@babel/runtime/helpers/typeof");
var _createForOfIteratorHelper2 = require("../@babel/runtime/helpers/createForOfIteratorHelper");
var _classCallCheck2 = require("../@babel/runtime/helpers/classCallCheck");
var _createClass2 = require("../@babel/runtime/helpers/createClass");
var e = require("./chameleon-protocol.js"),
  t = "json",
  r = "dump",
  a = "bin",
  s = "proxmark3",
  i = "flipper",
  n = "mct",
  l = "plain_hex";
exports.CardFileParser = /*#__PURE__*/function () {
  function _class() {
    _classCallCheck2(this, _class);
  }
  _createClass2(_class, null, [{
    key: "detectFormat",
    value: function detectFormat(e) {
      var g = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : "";
      if (!e) throw new Error("文件内容为空或格式无效");
      if (this.isBinaryData(e)) return a;
      if ("string" != typeof e) throw new Error("不支持的文件内容格式");
      var o = e.trim();
      if (this.isBinaryHexString(e)) return a;
      if (g) {
        var _a = g.toLowerCase().split(".").pop();
        if ("json" === _a) return e.includes('"Created": "proxmark3"') ? s : t;
        if ("nfc" === _a) return i;
        if ("mct" === _a) return n;
        if (["dump", "txt"].includes(_a)) return r;
      }
      try {
        var _e = JSON.parse(o);
        return _e.Created && "proxmark3" === _e.Created ? s : (_e.id && _e.uid && _e.tag, t);
      } catch (_unused) {}
      return e.includes("Filetype: Flipper NFC device") || e.includes("Version: 4") && e.includes("Device type:") ? i : e.includes("+Sector: 0") || e.includes("+Sector:") ? n : e.includes("# Chameleon Card Dump") || e.includes("Block") || e.includes("Sector") || e.includes("# === Card") ? r : this.isPlainHexData(e) ? l : r;
    }
  }, {
    key: "parseFile",
    value: function parseFile(e) {
      var g = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;
      var o = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : "";
      if (!e) throw new Error("文件内容为空");
      switch (g || (g = this.detectFormat(e, o)), console.log("[CardFileParser] \u89E3\u6790\u6587\u4EF6\u683C\u5F0F: ".concat(g)), g) {
        case t:
          return this.parseJSON(e);
        case s:
          return this.parseProxmark3JSON(e);
        case i:
          return this.parseFlipperNFC(e);
        case n:
          return this.parseMCT(e);
        case a:
          return this.parseBinary(e, o);
        case r:
          return this.parseDump(e);
        case l:
          return this.parsePlainHex(e);
        default:
          throw new Error("\u4E0D\u652F\u6301\u7684\u6587\u4EF6\u683C\u5F0F: ".concat(g));
      }
    }
  }, {
    key: "parseJSON",
    value: function parseJSON(e) {
      var _this = this;
      try {
        var _t = JSON.parse(e);
        return Array.isArray(_t) ? _t.map(function (e) {
          return _this.convertToCardSave(e);
        }) : [this.convertToCardSave(_t)];
      } catch (t) {
        throw new Error("JSON \u683C\u5F0F\u89E3\u6790\u5931\u8D25: ".concat(t.message));
      }
    }
  }, {
    key: "parseProxmark3JSON",
    value: function parseProxmark3JSON(e) {
      try {
        var _t2 = JSON.parse(e);
        if (!_t2.Card || !_t2.blocks) throw new Error("不是有效的 Proxmark3 JSON 格式");
        var _r = _t2.Card,
          _a2 = _t2.blocks,
          _s = _r.UID || "",
          _i = _r.SAK || "00",
          _n = parseInt(_i, 16),
          _l = _r.ATQA || "0000",
          g = [parseInt(_l.substring(2, 4), 16), parseInt(_l.substring(0, 2), 16)],
          o = [],
          T = Object.keys(_a2).map(function (e) {
            return parseInt(e);
          }).sort(function (e, t) {
            return e - t;
          });
        var _iterator = _createForOfIteratorHelper2(T),
          _step;
        try {
          for (_iterator.s(); !(_step = _iterator.n()).done;) {
            var _e2 = _step.value;
            var _t3 = _a2[_e2.toString()];
            _t3 && _t3.length >= 32 && o.push(this.hexToBytes(_t3));
          }
        } catch (err) {
          _iterator.e(err);
        } finally {
          _iterator.f();
        }
        var c = this.getTagTypeByDataSize(16 * o.length);
        return [{
          id: this.generateId(),
          name: _s || "Proxmark3_".concat(Date.now()),
          uid: _s,
          sak: _n,
          atqa: new Uint8Array(g),
          ats: new Uint8Array([]),
          tag: c,
          data: o,
          color: "#FF9800"
        }];
      } catch (t) {
        throw new Error("Proxmark3 JSON \u89E3\u6790\u5931\u8D25: ".concat(t.message));
      }
    }
  }, {
    key: "parseFlipperNFC",
    value: function parseFlipperNFC(e) {
      try {
        var _t4 = e.split("\n");
        var _r2 = "",
          _a3 = 0,
          _s2 = [0, 0];
        var _i2 = [];
        var _iterator2 = _createForOfIteratorHelper2(_t4),
          _step2;
        try {
          for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {
            var _e3 = _step2.value;
            var _t5 = _e3.trim();
            if (_t5.startsWith("UID:")) _r2 = _t5.substring(4).trim().replace(/\s+/g, "");else if (_t5.startsWith("SAK:")) {
              var _e4 = _t5.substring(4).trim();
              _a3 = parseInt(_e4, 16);
            } else if (_t5.startsWith("ATQA:")) {
              var _e5 = _t5.substring(5).trim().replace(/\s+/g, "");
              _e5.length >= 4 && (_s2 = [parseInt(_e5.substring(0, 2), 16), parseInt(_e5.substring(2, 4), 16)]);
            } else if (_t5.startsWith("Block")) {
              var _e6 = _t5.match(/Block\s+\d+:\s*([\dA-Fa-f\s?]+)/);
              if (_e6) {
                var _t6 = _e6[1].replace(/[?\s]/g, "0").replace(/\s+/g, "");
                _t6.length >= 32 && _i2.push(this.hexToBytes(_t6));
              }
            }
          }
        } catch (err) {
          _iterator2.e(err);
        } finally {
          _iterator2.f();
        }
        if (!_r2 || 0 === _i2.length) throw new Error("无法从 Flipper NFC 文件中提取有效数据");
        var _n2 = this.getTagTypeByDataSize(16 * _i2.length);
        return [{
          id: this.generateId(),
          name: _r2 || "Flipper_".concat(Date.now()),
          uid: _r2,
          sak: _a3,
          atqa: new Uint8Array(_s2),
          ats: new Uint8Array([]),
          tag: _n2,
          data: _i2,
          color: "#4CAF50"
        }];
      } catch (t) {
        throw new Error("Flipper NFC \u89E3\u6790\u5931\u8D25: ".concat(t.message));
      }
    }
  }, {
    key: "parseMCT",
    value: function parseMCT(e) {
      try {
        var _t7 = e.split("\n").filter(function (e) {
            return e.trim();
          }),
          _r3 = [];
        var _a4 = "",
          _s3 = 0,
          _i3 = [0, 0];
        for (var _e7 = 0; _e7 < _t7.length; _e7++) {
          var _n3 = _t7[_e7].trim();
          if (!_n3.startsWith("+Sector:")) {
            if (1 === _e7 && _n3.length >= 16 && (_a4 = _n3.substring(0, 8), _n3.length >= 12 && (_s3 = parseInt(_n3.substring(10, 12), 16)), _n3.length >= 16)) {
              var _e8 = _n3.substring(12, 16);
              _i3 = [parseInt(_e8.substring(2, 4), 16), parseInt(_e8.substring(0, 2), 16)];
            }
            _n3.length >= 32 && /^[0-9A-Fa-f]+$/.test(_n3) && _r3.push(this.hexToBytes(_n3));
          }
        }
        if (0 === _r3.length) throw new Error("MCT 文件中没有找到有效的块数据");
        var _n4 = this.getTagTypeByDataSize(16 * _r3.length);
        return [{
          id: this.generateId(),
          name: _a4 || "MCT_".concat(Date.now()),
          uid: _a4,
          sak: _s3,
          atqa: new Uint8Array(_i3),
          ats: new Uint8Array([]),
          tag: _n4,
          data: _r3,
          color: "#9C27B0"
        }];
      } catch (t) {
        throw new Error("MCT \u683C\u5F0F\u89E3\u6790\u5931\u8D25: ".concat(t.message));
      }
    }
  }, {
    key: "parseBinary",
    value: function parseBinary(t) {
      var r = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : "";
      try {
        var _a5;
        if (console.log("[CardFileParser] \u5F00\u59CB\u89E3\u6790\u4E8C\u8FDB\u5236\u6587\u4EF6, \u6587\u4EF6\u540D: ".concat(r)), "string" == typeof t) {
          if (/^[0-9A-Fa-f\s]*$/.test(t)) {
            var _e9 = t.replace(/\s+/g, "");
            _a5 = this.hexToBytes(_e9), console.log("[CardFileParser] \u89E3\u6790\u5341\u516D\u8FDB\u5236\u5B57\u7B26\u4E32, \u6570\u636E\u957F\u5EA6: ".concat(_a5.length, "\u5B57\u8282"));
          } else {
            var _e10 = [];
            for (var _r4 = 0; _r4 < t.length; _r4++) _e10.push(255 & t.charCodeAt(_r4));
            _a5 = new Uint8Array(_e10), console.log("[CardFileParser] \u89E3\u6790\u539F\u59CB\u4E8C\u8FDB\u5236\u5B57\u7B26\u4E32, \u6570\u636E\u957F\u5EA6: ".concat(_a5.length, "\u5B57\u8282"));
          }
        } else if (t instanceof ArrayBuffer || "object" == _typeof2(t) && null !== t && "number" == typeof t.byteLength && !("length" in t) && !("string" in t)) _a5 = new Uint8Array(t), console.log("[CardFileParser] \u89E3\u6790ArrayBuffer, \u6570\u636E\u957F\u5EA6: ".concat(_a5.length, "\u5B57\u8282"));else {
          if (!(t instanceof Uint8Array)) throw new Error("不支持的二进制数据格式");
          _a5 = t, console.log("[CardFileParser] \u89E3\u6790Uint8Array, \u6570\u636E\u957F\u5EA6: ".concat(_a5.length, "\u5B57\u8282"));
        }
        var _s4 = this.getTagTypeByDataSize(_a5.length);
        if (console.log("[CardFileParser] \u68C0\u6D4B\u5230\u5361\u7247\u7C7B\u578B: ".concat(_s4)), _s4 === e.TagType.UNKNOWN) throw new Error("\u65E0\u6CD5\u8BC6\u522B\u7684\u5361\u7247\u7C7B\u578B\uFF0C\u6570\u636E\u5927\u5C0F: ".concat(_a5.length, "\u5B57\u8282"));
        return _s4 === e.TagType.EM410X || _s4 === e.TagType.EM410X16 || _s4 === e.TagType.EM410X32 || _s4 === e.TagType.EM410X64 ? (console.log("[CardFileParser] 检测到低频卡，直接解析"), this.parseBinaryCard(_a5, _s4, r)) : this.isNTAG(_s4) ? (console.log("[CardFileParser] 检测到NTAG系列卡片，默认使用7字节UID"), this.parseBinaryCard(_a5, _s4, r, 7)) : this.isMifareClassic(_s4) ? (console.log("[CardFileParser] 检测到Mifare Classic卡片，需要选择UID长度"), {
          needsUidSelection: !0,
          tagType: _s4,
          cardName: this.getCardNameFromFilename(r) || "Binary_".concat(Date.now()),
          bytes: _a5
        }) : (console.log("[CardFileParser] 解析其他类型卡片，使用4字节UID"), this.parseBinaryCard(_a5, _s4, r, 4));
      } catch (a) {
        throw console.error("[CardFileParser] 二进制文件解析失败:", a), new Error("\u4E8C\u8FDB\u5236\u6587\u4EF6\u89E3\u6790\u5931\u8D25: ".concat(a.message));
      }
    }
  }, {
    key: "parseBinaryCard",
    value: function parseBinaryCard(t, r) {
      var a = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : "";
      var s = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 4;
      console.log("[CardFileParser] \u5F00\u59CB\u89E3\u6790\u4E8C\u8FDB\u5236\u5361\u7247\u6570\u636E - \u7C7B\u578B:".concat(r, ", UID\u957F\u5EA6:").concat(s));
      var i = "",
        n = 0,
        l = [0, 0],
        g = this.getCardNameFromFilename(a) || this.getCardTypeName(r);
      if (r === e.TagType.EM410X || r === e.TagType.EM410X16 || r === e.TagType.EM410X32 || r === e.TagType.EM410X64) return i = this.bytesToHex(t), console.log("[CardFileParser] \u5904\u7406\u4F4E\u9891\u5361\u7247, UID:".concat(i)), [{
        id: this.generateId(),
        name: g || "EM410X_".concat(i.substring(0, 6)),
        uid: i,
        tag: r,
        data: [t],
        sak: 0,
        atqa: new Uint8Array([0, 0]),
        ats: new Uint8Array([]),
        color: "#45B7D1"
      }];
      if (this.isMifareClassic(r)) {
        if (t.length >= 1024) {
          var _e11 = t.slice(0, 16);
          if (4 === s) i = this.bytesToHex(_e11.slice(0, 4)), _e11.length > 5 && (n = _e11[5]), _e11.length > 7 && (l = [_e11[6], _e11[7]]);else if (7 === s) {
            if (136 === _e11[0]) {
              var _t8 = [].concat(_toConsumableArray2(_e11.slice(1, 4)), _toConsumableArray2(_e11.slice(4, 8)));
              i = this.bytesToHex(_t8);
            } else i = this.bytesToHex(_e11.slice(0, 7));
            n = this.getDefaultSAK(r, 7), l = this.getDefaultATQA(r, 7);
          }
        } else if (4 === s) i = t.length >= 4 ? this.bytesToHex(t.slice(0, 4)) : this.generateRandomUID(4), t.length > 5 && (n = t[5]), t.length > 7 && (l = [t[6], t[7]]);else if (7 === s) {
          if (t.length >= 7) {
            if (136 === t[0] && t.length >= 8) {
              var _e12 = [].concat(_toConsumableArray2(t.slice(1, 4)), _toConsumableArray2(t.slice(4, 8)));
              i = this.bytesToHex(_e12);
            } else i = this.bytesToHex(t.slice(0, 7));
          } else i = this.generateRandomUID(7);
          n = this.getDefaultSAK(r, 7), l = this.getDefaultATQA(r, 7);
        }
      } else this.isNTAG(r) || this.isMifareUltralight(r) ? (i = t.length >= 8 ? this.bytesToHex([].concat(_toConsumableArray2(t.slice(0, 3)), _toConsumableArray2(t.slice(4, 8)))) : t.length >= 7 ? this.bytesToHex(t.slice(0, 7)) : this.generateRandomUID(7), n = 0, l = [68, 0]) : (i = t.length >= 4 && 4 === s ? this.bytesToHex(t.slice(0, 4)) : t.length >= 7 && 7 === s ? this.bytesToHex(t.slice(0, 7)) : this.generateRandomUID(s), n = this.getDefaultSAK(r, s), l = this.getDefaultATQA(r, s));
      var o = this.isMifareUltralight(r) || this.isNTAG(r) ? 4 : 16,
        T = [];
      for (var _e13 = 0; _e13 < t.length; _e13 += o) {
        var _r5 = t.slice(_e13, _e13 + o);
        if (_r5.length === o) T.push(_r5);else {
          var _e14 = new Uint8Array(o);
          _e14.set(_r5), T.push(_e14);
        }
      }
      return i || (i = this.bytesToHex(this.generateRandomUID(s || 4))), console.log("[CardFileParser] \u5361\u7247\u89E3\u6790\u5B8C\u6210 - UID:".concat(i, ", SAK:0x").concat(n.toString(16), ", ATQA:[").concat(l.map(function (e) {
        return "0x" + e.toString(16);
      }).join(","), "]")), [{
        id: this.generateId(),
        name: g || "".concat(this.getCardTypeName(r), "_").concat(i.substring(0, 6)),
        uid: i,
        sak: n,
        atqa: new Uint8Array(l),
        ats: new Uint8Array([]),
        tag: r,
        data: T,
        color: this.getColorForCardType(r)
      }];
    }
  }, {
    key: "createCardWithUidLength",
    value: function createCardWithUidLength(e, t, r) {
      var a = e.tagType,
        s = e.bytes;
      return this.parseBinaryCard(s, a, r, t)[0];
    }
  }, {
    key: "parseDump",
    value: function parseDump(e) {
      try {
        var _r6 = [];
        if (e.includes("# === Card")) {
          var _a6 = e.split("# === Card");
          for (var _e15 = 1; _e15 < _a6.length; _e15++) try {
            var _t9 = this.parseDumpSection(_a6[_e15]);
            _t9 && _r6.push(_t9);
          } catch (t) {
            console.warn("\u8DF3\u8FC7\u65E0\u6548\u7684 dump \u6BB5\u843D: ".concat(t.message));
          }
        }
        if (0 === _r6.length) {
          var _t10 = this.parseSingleDump(e);
          _t10 && _r6.push(_t10);
        }
        if (0 === _r6.length) throw new Error("Dump 文件中没有找到有效的卡片数据");
        return _r6;
      } catch (t) {
        throw new Error("Dump \u683C\u5F0F\u89E3\u6790\u5931\u8D25: ".concat(t.message));
      }
    }
  }, {
    key: "parseDumpSection",
    value: function parseDumpSection(t) {
      var r = t.split("\n");
      var a = "",
        s = "",
        i = e.TagType.UNKNOWN;
      var n = [];
      var _iterator3 = _createForOfIteratorHelper2(r),
        _step3;
      try {
        for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {
          var _e16 = _step3.value;
          var _t11 = _e16.trim();
          if (_t11.startsWith("# Name:")) a = _t11.substring(7).trim();else if (_t11.startsWith("# UID:")) s = _t11.substring(6).trim();else if (_t11.startsWith("# Type:")) {
            var _e17 = _t11.substring(7).trim();
            i = this.parseTagType(_e17);
          } else if (!_t11.startsWith("#") && _t11.length >= 8) {
            var _e18 = _t11.replace(/\s+/g, "");
            /^[0-9A-Fa-f]+$/.test(_e18) && n.push(this.hexToBytes(_e18));
          }
        }
      } catch (err) {
        _iterator3.e(err);
      } finally {
        _iterator3.f();
      }
      if (0 === n.length) throw new Error("Dump 段落中没有找到有效数据");
      return {
        id: this.generateId(),
        name: a || s || "Dump_".concat(Date.now()),
        uid: s,
        sak: 0,
        atqa: new Uint8Array([0, 0]),
        ats: new Uint8Array([]),
        tag: i !== e.TagType.UNKNOWN ? i : this.getTagTypeByDataSize(16 * n.length),
        data: n,
        color: "#2196F3"
      };
    }
  }, {
    key: "parseSingleDump",
    value: function parseSingleDump(e) {
      var t = e.split("\n").filter(function (e) {
          var t = e.trim();
          return t && !t.startsWith("#");
        }),
        r = [];
      var _iterator4 = _createForOfIteratorHelper2(t),
        _step4;
      try {
        for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {
          var _i4 = _step4.value;
          var _e19 = _i4.replace(/\s+/g, "");
          _e19.length >= 8 && /^[0-9A-Fa-f]+$/.test(_e19) && r.push(this.hexToBytes(_e19));
        }
      } catch (err) {
        _iterator4.e(err);
      } finally {
        _iterator4.f();
      }
      if (0 === r.length) return null;
      var a = this.getTagTypeByDataSize(16 * r.length);
      var s = "";
      return r.length > 0 && r[0].length >= 4 && (s = this.bytesToHex(r[0].slice(0, 4))), {
        id: this.generateId(),
        name: s || "Dump_".concat(Date.now()),
        uid: s,
        sak: 0,
        atqa: new Uint8Array([0, 0]),
        ats: new Uint8Array([]),
        tag: a,
        data: r,
        color: "#2196F3"
      };
    }
  }, {
    key: "parsePlainHex",
    value: function parsePlainHex(e) {
      try {
        var _t12 = e.replace(/\s+/g, "");
        if (!/^[0-9A-Fa-f]+$/.test(_t12)) throw new Error("不是有效的十六进制数据");
        var _r7 = this.hexToBytes(_t12),
          _a7 = this.getTagTypeByDataSize(_r7.length),
          _s5 = this.isMifareUltralight(_a7) ? 4 : 16,
          _i5 = [];
        for (var _e20 = 0; _e20 < _r7.length; _e20 += _s5) _i5.push(_r7.slice(_e20, _e20 + _s5));
        var _n5 = "";
        return _i5.length > 0 && _i5[0].length >= 4 && (_n5 = this.bytesToHex(_i5[0].slice(0, 4))), [{
          id: this.generateId(),
          name: _n5 || "Hex_".concat(Date.now()),
          uid: _n5,
          sak: 0,
          atqa: new Uint8Array([0, 0]),
          ats: new Uint8Array([]),
          tag: _a7,
          data: _i5,
          color: "#795548"
        }];
      } catch (t) {
        throw new Error("\u5341\u516D\u8FDB\u5236\u6570\u636E\u89E3\u6790\u5931\u8D25: ".concat(t.message));
      }
    }
  }, {
    key: "isBinaryHexString",
    value: function isBinaryHexString(e) {
      if ("string" != typeof e) return !1;
      var t = e.replace(/\s+/g, "");
      return !!(t.length > 100 && /^[0-9A-Fa-f]+$/.test(t));
    }
  }, {
    key: "isBinaryData",
    value: function isBinaryData(e) {
      if (e instanceof ArrayBuffer || e instanceof Uint8Array) return !0;
      if ("string" == typeof e) {
        var _t13 = Math.min(500, e.length);
        var _r8 = 0;
        for (var _a8 = 0; _a8 < _t13; _a8++) {
          var _t14 = e.charCodeAt(_a8);
          (_t14 < 32 || _t14 > 126) && 9 !== _t14 && 10 !== _t14 && 13 !== _t14 && _r8++;
        }
        return _r8 / _t13 > .15;
      }
      return !1;
    }
  }, {
    key: "isPlainHexData",
    value: function isPlainHexData(e) {
      if ("string" != typeof e) return !1;
      var t = e.split("\n");
      var r = 0;
      var _iterator5 = _createForOfIteratorHelper2(t),
        _step5;
      try {
        for (_iterator5.s(); !(_step5 = _iterator5.n()).done;) {
          var _a9 = _step5.value;
          var _e21 = _a9.trim();
          _e21 && /^[0-9A-Fa-f\s]+$/.test(_e21) && r++;
        }
      } catch (err) {
        _iterator5.e(err);
      } finally {
        _iterator5.f();
      }
      return r > 0 && r / t.length > .8;
    }
  }, {
    key: "hexToBytes",
    value: function hexToBytes(e) {
      var t = e.replace(/\s+/g, ""),
        r = new Uint8Array(t.length / 2);
      for (var _a10 = 0; _a10 < t.length; _a10 += 2) r[_a10 / 2] = parseInt(t.substr(_a10, 2), 16);
      return r;
    }
  }, {
    key: "bytesToHex",
    value: function bytesToHex(e) {
      return Array.from(e).map(function (e) {
        return e.toString(16).padStart(2, "0");
      }).join("").toUpperCase();
    }
  }, {
    key: "getTagTypeByDataSize",
    value: function getTagTypeByDataSize(t) {
      switch (t) {
        case 320:
          return e.TagType.MIFARE_Mini;
        case 1024:
          return e.TagType.MIFARE_1024;
        case 1088:
        case 2048:
          return e.TagType.MIFARE_2048;
        case 4096:
          return e.TagType.MIFARE_4096;
        case 64:
          return e.TagType.MIFARE_Ultralight;
        case 192:
          return e.TagType.MIFARE_Ultralight_C;
        case 80:
          return e.TagType.MIFARE_Ultralight_EV1_11;
        case 164:
          return e.TagType.NTAG_212;
        case 180:
          return e.TagType.NTAG_213;
        case 540:
          return e.TagType.NTAG_215;
        case 924:
        case 932:
          return e.TagType.NTAG_216;
        case 5:
          return e.TagType.EM410X;
        case 2:
        case 3:
        case 4:
          if (t >= 2 && t <= 5) return e.TagType.EM410X;
        default:
          return t < 20 ? e.TagType.EM410X : t <= 100 ? e.TagType.MIFARE_Ultralight : t <= 320 ? e.TagType.MIFARE_Mini : t <= 1024 ? e.TagType.MIFARE_1024 : t <= 2048 ? e.TagType.MIFARE_2048 : t <= 4096 ? e.TagType.MIFARE_4096 : e.TagType.UNKNOWN;
      }
    }
  }, {
    key: "isMifareClassic",
    value: function isMifareClassic(t) {
      return [e.TagType.MIFARE_1024, e.TagType.MIFARE_2048, e.TagType.MIFARE_4096].includes(t);
    }
  }, {
    key: "isMifareUltralight",
    value: function isMifareUltralight(t) {
      return [e.TagType.MIFARE_Ultralight, e.TagType.MIFARE_Ultralight_C, e.TagType.MIFARE_Ultralight_EV1_11, e.TagType.MIFARE_Ultralight_EV1_21].includes(t);
    }
  }, {
    key: "isNTAG",
    value: function isNTAG(t) {
      return [e.TagType.NTAG_210, e.TagType.NTAG_212, e.TagType.NTAG_213, e.TagType.NTAG_215, e.TagType.NTAG_216].includes(t);
    }
  }, {
    key: "getCardNameFromFilename",
    value: function getCardNameFromFilename(e) {
      if (!e) return "";
      var t = e.split("/").pop();
      return t = t.split("\\\\").pop(), t = t.split(".")[0], t = t.replace(/[^\w\d\u4e00-\u9fa5\s-]/g, "").trim(), t.length > 30 && (t = t.substring(0, 30) + "..."), t || "\u5BFC\u5165\u5361\u7247_".concat(Date.now());
    }
  }, {
    key: "getDefaultSAK",
    value: function getDefaultSAK(e, t) {
      return this.isMifareClassic(e) ? 7 === t ? 24 : 8 : 0;
    }
  }, {
    key: "getDefaultATQA",
    value: function getDefaultATQA(e, t) {
      return this.isMifareClassic(e) ? 7 === t ? [0, 4] : [0, 2] : this.isMifareUltralight(e) ? [0, 68] : [0, 0];
    }
  }, {
    key: "parseTagType",
    value: function parseTagType(t) {
      var r = t.toUpperCase();
      return r.includes("MIFARE") && r.includes("1K") ? e.TagType.MIFARE_1024 : r.includes("MIFARE") && r.includes("2K") ? e.TagType.MIFARE_2048 : r.includes("MIFARE") && r.includes("4K") ? e.TagType.MIFARE_4096 : r.includes("ULTRALIGHT") ? e.TagType.MIFARE_ULTRALIGHT : r.includes("NTAG213") ? e.TagType.NTAG_213 : r.includes("NTAG215") ? e.TagType.NTAG_215 : r.includes("NTAG216") ? e.TagType.NTAG_216 : e.TagType.UNKNOWN;
    }
  }, {
    key: "convertToCardSave",
    value: function convertToCardSave(t) {
      return t.id && t.uid && void 0 !== t.tag ? t : {
        id: t.id || this.generateId(),
        name: t.name || "Imported Card",
        uid: t.uid || "",
        sak: t.sak || 0,
        atqa: t.atqa || new Uint8Array([0, 0]),
        ats: t.ats || new Uint8Array([]),
        tag: t.tag || e.TagType.UNKNOWN,
        data: t.data || [],
        color: t.color || "#2196F3"
      };
    }
  }, {
    key: "generateId",
    value: function generateId() {
      return "card_" + Date.now() + "_" + Math.random().toString(36).substr(2, 9);
    }
  }, {
    key: "generateRandomUID",
    value: function generateRandomUID() {
      var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 4;
      var t = new Uint8Array(e);
      for (var _r9 = 0; _r9 < e; _r9++) t[_r9] = Math.floor(256 * Math.random());
      return this.bytesToHex(t);
    }
  }, {
    key: "getCardTypeName",
    value: function getCardTypeName(t) {
      var _e$TagType$UNKNOWN$e$;
      return (_e$TagType$UNKNOWN$e$ = {}, _defineProperty2(_e$TagType$UNKNOWN$e$, e.TagType.UNKNOWN, "未知类型"), _defineProperty2(_e$TagType$UNKNOWN$e$, e.TagType.EM410X, "EM410X"), _defineProperty2(_e$TagType$UNKNOWN$e$, e.TagType.EM410X16, "EM410X-16"), _defineProperty2(_e$TagType$UNKNOWN$e$, e.TagType.EM410X32, "EM410X-32"), _defineProperty2(_e$TagType$UNKNOWN$e$, e.TagType.EM410X64, "EM410X-64"), _defineProperty2(_e$TagType$UNKNOWN$e$, e.TagType.VIKING, "Viking"), _defineProperty2(_e$TagType$UNKNOWN$e$, e.TagType.HID_PROX, "HID Prox"), _defineProperty2(_e$TagType$UNKNOWN$e$, e.TagType.MIFARE_Mini, "Mifare Mini"), _defineProperty2(_e$TagType$UNKNOWN$e$, e.TagType.MIFARE_1024, "Mifare Classic 1K"), _defineProperty2(_e$TagType$UNKNOWN$e$, e.TagType.MIFARE_2048, "Mifare Classic 2K"), _defineProperty2(_e$TagType$UNKNOWN$e$, e.TagType.MIFARE_4096, "Mifare Classic 4K"), _defineProperty2(_e$TagType$UNKNOWN$e$, e.TagType.NTAG_210, "NTAG210"), _defineProperty2(_e$TagType$UNKNOWN$e$, e.TagType.NTAG_212, "NTAG212"), _defineProperty2(_e$TagType$UNKNOWN$e$, e.TagType.NTAG_213, "NTAG213"), _defineProperty2(_e$TagType$UNKNOWN$e$, e.TagType.NTAG_215, "NTAG215"), _defineProperty2(_e$TagType$UNKNOWN$e$, e.TagType.NTAG_216, "NTAG216"), _defineProperty2(_e$TagType$UNKNOWN$e$, e.TagType.MIFARE_Ultralight, "Mifare Ultralight"), _defineProperty2(_e$TagType$UNKNOWN$e$, e.TagType.MIFARE_Ultralight_C, "Mifare Ultralight C"), _defineProperty2(_e$TagType$UNKNOWN$e$, e.TagType.MIFARE_Ultralight_EV1_11, "Ultralight EV1-11"), _defineProperty2(_e$TagType$UNKNOWN$e$, e.TagType.MIFARE_Ultralight_EV1_21, "Ultralight EV1-21"), _e$TagType$UNKNOWN$e$)[t] || "未知类型";
    }
  }, {
    key: "getColorForCardType",
    value: function getColorForCardType(t) {
      var _e$TagType$EM410X$e$T;
      return (_e$TagType$EM410X$e$T = {}, _defineProperty2(_e$TagType$EM410X$e$T, e.TagType.EM410X, "#45B7D1"), _defineProperty2(_e$TagType$EM410X$e$T, e.TagType.EM410X16, "#45B7D1"), _defineProperty2(_e$TagType$EM410X$e$T, e.TagType.EM410X32, "#45B7D1"), _defineProperty2(_e$TagType$EM410X$e$T, e.TagType.EM410X64, "#45B7D1"), _defineProperty2(_e$TagType$EM410X$e$T, e.TagType.VIKING, "#3498db"), _defineProperty2(_e$TagType$EM410X$e$T, e.TagType.HID_PROX, "#2ecc71"), _defineProperty2(_e$TagType$EM410X$e$T, e.TagType.MIFARE_Mini, "#FF5722"), _defineProperty2(_e$TagType$EM410X$e$T, e.TagType.MIFARE_1024, "#FF5722"), _defineProperty2(_e$TagType$EM410X$e$T, e.TagType.MIFARE_2048, "#FF5722"), _defineProperty2(_e$TagType$EM410X$e$T, e.TagType.MIFARE_4096, "#FF5722"), _defineProperty2(_e$TagType$EM410X$e$T, e.TagType.NTAG_210, "#9C27B0"), _defineProperty2(_e$TagType$EM410X$e$T, e.TagType.NTAG_212, "#9C27B0"), _defineProperty2(_e$TagType$EM410X$e$T, e.TagType.NTAG_213, "#9C27B0"), _defineProperty2(_e$TagType$EM410X$e$T, e.TagType.NTAG_215, "#9C27B0"), _defineProperty2(_e$TagType$EM410X$e$T, e.TagType.NTAG_216, "#9C27B0"), _defineProperty2(_e$TagType$EM410X$e$T, e.TagType.MIFARE_Ultralight, "#4CAF50"), _defineProperty2(_e$TagType$EM410X$e$T, e.TagType.MIFARE_Ultralight_C, "#4CAF50"), _defineProperty2(_e$TagType$EM410X$e$T, e.TagType.MIFARE_Ultralight_EV1_11, "#4CAF50"), _defineProperty2(_e$TagType$EM410X$e$T, e.TagType.MIFARE_Ultralight_EV1_21, "#4CAF50"), _e$TagType$EM410X$e$T)[t] || "#607D8B";
    }
  }]);
  return _class;
}(); 
 			}); 
		define("utils/card-import-export.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";

require("../@babel/runtime/helpers/Arrayincludes");
var _typeof2 = require("../@babel/runtime/helpers/typeof");
var _slicedToArray2 = require("../@babel/runtime/helpers/slicedToArray");
var _createForOfIteratorHelper2 = require("../@babel/runtime/helpers/createForOfIteratorHelper");
var _defineProperty2 = require("../@babel/runtime/helpers/defineProperty");
var _toConsumableArray2 = require("../@babel/runtime/helpers/toConsumableArray");
var _classCallCheck2 = require("../@babel/runtime/helpers/classCallCheck");
var _createClass2 = require("../@babel/runtime/helpers/createClass");
var t = require("./card-save.js"),
  e = require("./chameleon-protocol.js"),
  r = require("./card-file-parser.js"),
  a = "json",
  n = "dump",
  i = "bin",
  s = "pm3",
  o = "flipper",
  p = "mct";
exports.CardImportExport = /*#__PURE__*/function () {
  function _class() {
    _classCallCheck2(this, _class);
  }
  _createClass2(_class, null, [{
    key: "exportCards",
    value: function exportCards(t) {
      var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : a;
      var r = Array.isArray(t) ? t : [t];
      switch (e) {
        case a:
          return this.exportAsJSON(r);
        case n:
          return this.exportAsDump(r);
        case i:
          return this.exportAsBin(r);
        default:
          throw new Error("\u4E0D\u652F\u6301\u7684\u5BFC\u51FA\u683C\u5F0F: ".concat(e));
      }
    }
  }, {
    key: "exportAsJSON",
    value: function exportAsJSON(t) {
      var e = {
        version: "1.0",
        type: "chameleon_cards",
        exported_at: new Date().toISOString(),
        count: t.length,
        cards: t.map(function (t) {
          return t.toObject();
        })
      };
      return {
        content: JSON.stringify(e, null, 2),
        filename: "chameleon_cards_".concat(this.getTimestamp(), ".json"),
        mimeType: "application/json"
      };
    }
  }, {
    key: "exportAsDump",
    value: function exportAsDump(t) {
      var _this = this;
      var r = "# Chameleon Ultra Card Dump\n";
      return r += "# Exported: ".concat(new Date().toISOString(), "\n"), r += "# Count: ".concat(t.length, "\n\n"), t.forEach(function (t, a) {
        r += "# === Card ".concat(a + 1, ": ").concat(t.name, " ===\n"), r += "# Type: ".concat(t.getTypeString(), "\n"), r += "# UID: ".concat(t.uid, "\n"), r += "# Created: ".concat(t.createdAt, "\n"), r += "# Modified: ".concat(t.modifiedAt, "\n\n"), t.isMifareClassic() ? r += _this.exportMifareClassicDump(t) : t.isMifareUltralight() ? r += _this.exportMifareUltralightDump(t) : t.tag === e.TagType.EM410X ? r += _this.exportEM410XDump(t) : r += "# Raw data:\n".concat(JSON.stringify(t.data, null, 2), "\n"), r += "\n";
      }), {
        content: r,
        filename: "chameleon_cards_".concat(this.getTimestamp(), ".dump"),
        mimeType: "text/plain"
      };
    }
  }, {
    key: "exportAsBin",
    value: function exportAsBin(t) {
      if (1 !== t.length) throw new Error("二进制格式只支持单个卡片导出");
      var e = t[0];
      var r;
      if (e.isMifareClassic()) r = this.exportMifareClassicBin(e);else {
        if (!e.isMifareUltralight()) throw new Error("\u4E0D\u652F\u6301\u7684\u5361\u7247\u7C7B\u578B: ".concat(e.getTypeString()));
        r = this.exportMifareUltralightBin(e);
      }
      return {
        content: r,
        filename: "".concat(e.name, "_").concat(this.getTimestamp(), ".bin"),
        mimeType: "application/octet-stream"
      };
    }
  }, {
    key: "importCards",
    value: function importCards(t, e) {
      var _this2 = this;
      var a = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : "";
      try {
        var _n = r.CardFileParser.parseFile(t, e, a);
        if (_n && _n.needsUidSelection) return _n;
        return (Array.isArray(_n) ? _n : [_n]).map(function (t) {
          return _this2.convertToCardSave(t);
        });
      } catch (n) {
        return console.warn("[CardImportExport] 新解析器导入失败，使用回退方法:", n.message), this.importCardsLegacy(t, e);
      }
    }
  }, {
    key: "importCardsLegacy",
    value: function importCardsLegacy(t, e) {
      switch (e) {
        case a:
          return this.importFromJSON(t);
        case n:
          return this.importFromDump(t);
        case i:
          return this.importFromBin(t);
        case s:
          return this.importFromProxmark3(t);
        case o:
          return this.importFromFlipper(t);
        case p:
          return this.importFromMCT(t);
        default:
          throw new Error("\u4E0D\u652F\u6301\u7684\u5BFC\u5165\u683C\u5F0F: ".concat(e));
      }
    }
  }, {
    key: "convertToCardSave",
    value: function convertToCardSave(r) {
      if (r instanceof t.CardSave) return r;
      var a = {
        id: r.id || this.generateId(),
        name: r.name || "Imported Card",
        uid: r.uid || "",
        sak: r.sak || 0,
        atqa: r.atqa || new Uint8Array([0, 0]),
        ats: r.ats || new Uint8Array([]),
        tag: r.tag || e.TagType.UNKNOWN,
        data: r.data || [],
        color: r.color || "#2196F3"
      };
      return a.atqa instanceof Uint8Array || (a.atqa = new Uint8Array(a.atqa)), a.ats instanceof Uint8Array || (a.ats = new Uint8Array(a.ats)), a.data && Array.isArray(a.data) && (a.data = a.data.map(function (t) {
        return t instanceof Uint8Array ? t : new Uint8Array(t);
      })), new t.CardSave(a);
    }
  }, {
    key: "createCardWithUidLength",
    value: function createCardWithUidLength(r, a, n) {
      var i = r.tagType,
        s = r.bytes;
      console.log("[CardImportExport] \u521B\u5EFA\u5361\u7247 - \u7C7B\u578B: ".concat(i, ", UID\u957F\u5EA6: ").concat(a, ", \u6570\u636E\u957F\u5EA6: ").concat(s.length));
      var o = "",
        p = 0,
        c = [0, 0];
      if (i === e.TagType.EM410X) o = s.map(function (t) {
        return t.toString(16).padStart(2, "0");
      }).join("").toUpperCase();else {
        if (4 === a) {
          o = s.slice(0, 4).map(function (t) {
            return t.toString(16).padStart(2, "0");
          }).join(" ").toUpperCase(), this.isNTAG(i) ? (p = 0, c = [68, 0]) : s.length > 5 && (p = s[5], s.length > 7 && (c = [s[6], s[7]]));
        } else if (7 === a) if (this.isNTAG(i)) {
          o = s.slice(0, 7).map(function (t) {
            return t.toString(16).padStart(2, "0");
          }).join(" ").toUpperCase(), p = 0, c = [68, 0];
        } else {
          if (136 === s[0] && s.length >= 8) {
            o = s.slice(1, 8).map(function (t) {
              return t.toString(16).padStart(2, "0");
            }).join(" ").toUpperCase();
          } else {
            o = s.slice(0, 7).map(function (t) {
              return t.toString(16).padStart(2, "0");
            }).join(" ").toUpperCase();
          }
          p = this.getDefaultSAK(i, 7), c = this.getDefaultATQA(i, 7);
        }
        console.log("[CardImportExport] UID=".concat(o, ", SAK=0x").concat(p.toString(16).padStart(2, "0"), ", ATQA=").concat(c.map(function (t) {
          return t.toString(16).padStart(2, "0");
        }).join(" ")));
      }
      var l = [];
      if (this.isMifareClassic(i)) for (var _t = 0; _t < s.length; _t += 16) {
        var _e = s.slice(_t, _t + 16);
        if (16 === _e.length) l.push(new Uint8Array(_e));else if (_e.length > 0) {
          var _t2 = new Uint8Array(16);
          _t2.set(_e), l.push(_t2);
        }
      } else if (this.isNTAG(i)) for (var _t3 = 0; _t3 < s.length; _t3 += 4) {
        var _e2 = s.slice(_t3, _t3 + 4);
        if (4 === _e2.length) l.push(new Uint8Array(_e2));else if (_e2.length > 0) {
          var _t4 = new Uint8Array(4);
          _t4.set(_e2), l.push(_t4);
        }
      } else l.push(new Uint8Array(s));
      var g = new t.CardSave({
        name: n || "".concat(this.getTagTypeName(i), " (").concat(a, "\u4F4DUID)"),
        uid: o,
        tag: i,
        data: l,
        sak: p,
        atqa: c
      });
      return console.log("[CardImportExport] \u521B\u5EFA\u5361\u7247\u6210\u529F - \u540D\u79F0: ".concat(g.name, ", UID: ").concat(g.uid, ", \u6570\u636E\u5757\u6570: ").concat(g.data.length)), g;
    }
  }, {
    key: "getDefaultSAK",
    value: function getDefaultSAK(t, r) {
      if (7 === r) return 8;
      if (4 === r) switch (t) {
        case e.TagType.MIFARE_Mini:
          return 9;
        case e.TagType.MIFARE_1024:
          return 8;
        case e.TagType.MIFARE_2048:
          return 24;
        case e.TagType.MIFARE_4096:
          return 56;
        case e.TagType.NTAG_213:
        case e.TagType.NTAG_215:
        case e.TagType.NTAG_216:
          return 0;
        default:
          return 8;
      }
      switch (t) {
        case e.TagType.MIFARE_Mini:
          return 9;
        case e.TagType.MIFARE_1024:
          return 8;
        case e.TagType.MIFARE_2048:
          return 24;
        case e.TagType.MIFARE_4096:
          return 56;
        case e.TagType.NTAG_213:
        case e.TagType.NTAG_215:
        case e.TagType.NTAG_216:
          return 0;
        default:
          return 8;
      }
    }
  }, {
    key: "getDefaultATQA",
    value: function getDefaultATQA(t, r) {
      if (7 === r) return [68, 0];
      if (4 === r) return [4, 0];
      switch (t) {
        case e.TagType.MIFARE_Mini:
        case e.TagType.MIFARE_1024:
        case e.TagType.MIFARE_2048:
        case e.TagType.MIFARE_4096:
          return [4, 0];
        case e.TagType.NTAG_213:
        case e.TagType.NTAG_215:
        case e.TagType.NTAG_216:
          return [68, 0];
        default:
          return [4, 0];
      }
    }
  }, {
    key: "generateId",
    value: function generateId() {
      return "card_" + Date.now() + "_" + Math.random().toString(36).substr(2, 9);
    }
  }, {
    key: "importFromJSON",
    value: function importFromJSON(e) {
      var _this3 = this;
      try {
        var _r = JSON.parse(e);
        if ("proxmark3" === _r.Created) return this.importFromProxmark3(e);
        if ("chameleon_cards" === _r.type && _r.cards) return _r.cards.map(function (e) {
          return t.CardSave.fromObject(e);
        });
        if (_r.id && _r.uid && _r.name && void 0 !== _r.tag) return [this.convertFlutterCardSave(_r)];
        if (_r.id || _r.name) return [t.CardSave.fromObject(_r)];
        if (Array.isArray(_r)) return _r.map(function (e) {
          return e.id && e.uid && e.name && void 0 !== e.tag ? _this3.convertFlutterCardSave(e) : t.CardSave.fromObject(e);
        });
        throw new Error("无法识别的JSON格式");
      } catch (r) {
        throw new Error("JSON\u89E3\u6790\u5931\u8D25: ".concat(r.message));
      }
    }
  }, {
    key: "convertFlutterCardSave",
    value: function convertFlutterCardSave(e) {
      return new t.CardSave({
        id: e.id,
        uid: e.uid,
        name: e.name,
        tag: e.tag,
        sak: e.sak || 0,
        atqa: e.atqa ? new Uint8Array(e.atqa) : new Uint8Array(0),
        ats: e.ats ? new Uint8Array(e.ats) : new Uint8Array(0),
        data: e.data ? e.data.map(function (t) {
          return new Uint8Array(t);
        }) : [],
        extraData: e.extra ? t.CardSaveExtra.fromObject(e.extra) : new t.CardSaveExtra(),
        color: e.color || "#FF5722",
        createdAt: e.createdAt || new Date().toISOString(),
        modifiedAt: e.modifiedAt || new Date().toISOString()
      });
    }
  }, {
    key: "importFromDump",
    value: function importFromDump(t) {
      var e = [];
      if (this.isBinaryContent(t)) {
        console.log("[CardImportExport] 处理二进制dump文件");
        try {
          var _r2 = this.parseBinaryDump(t);
          if (_r2 && _r2.length > 0) return e.push.apply(e, _toConsumableArray2(_r2)), e;
        } catch (r) {
          console.warn("[CardImportExport] \u4E8C\u8FDB\u5236dump\u89E3\u6790\u5931\u8D25: ".concat(r.message));
        }
      }
      if (t.includes("# === Card")) {
        var _a = t.split("# === Card");
        for (var _t5 = 1; _t5 < _a.length; _t5++) try {
          var _r3 = _a[_t5],
            _n2 = this.parseDumpSection(_r3);
          _n2 && e.push(_n2);
        } catch (r) {
          console.warn("[CardImportExport] \u8DF3\u8FC7\u65E0\u6548\u7684dump\u6BB5\u843D: ".concat(r.message));
        }
      }
      if (0 === e.length) try {
        var _r4 = this.parseSingleDump(t);
        _r4 && e.push(_r4);
      } catch (r) {
        console.warn("[CardImportExport] \u5355\u4E2Adump\u89E3\u6790\u5931\u8D25: ".concat(r.message));
      }
      if (0 === e.length) try {
        var _r5 = t.split("\n").map(function (t) {
          return t.trim();
        }).filter(function (t) {
          return t && !t.startsWith("#") && /^[0-9A-Fa-f\s]+$/.test(t);
        });
        if (_r5.length > 0) {
          var _t6 = _r5.join("").replace(/\s+/g, "");
          if (_t6.length > 0) {
            var _r6 = this.importFromBin(_t6);
            if (_r6 && _r6.needsUidSelection) return _r6;
            Array.isArray(_r6) ? e.push.apply(e, _toConsumableArray2(_r6)) : _r6 && e.push(_r6);
          }
        }
      } catch (r) {
        console.warn("[CardImportExport] \u5341\u516D\u8FDB\u5236\u6570\u636E\u89E3\u6790\u5931\u8D25: ".concat(r.message));
      }
      if (0 === e.length) throw new Error("Dump文件中没有找到有效的卡片数据");
      return e;
    }
  }, {
    key: "importFromBin",
    value: function importFromBin(r) {
      try {
        console.log("[CardImportExport] 开始处理Bin文件导入");
        var _a2 = r;
        if (_a2 = /^[0-9A-Fa-f\s]*$/.test(r) ? r.replace(/\s+/g, "") : r.replace(/[^0-9A-Fa-f]/g, ""), 0 === _a2.length) throw new Error("Bin文件不包含有效的十六进制数据");
        _a2.length % 2 != 0 && (_a2 = "0" + _a2);
        var _n3 = [];
        for (var _t7 = 0; _t7 < _a2.length; _t7 += 2) {
          var _e3 = parseInt(_a2.substr(_t7, 2), 16);
          _n3.push(_e3);
        }
        console.log("[CardImportExport] Bin\u6570\u636E\u957F\u5EA6: ".concat(_n3.length, " \u5B57\u8282"));
        var _i = _n3.length;
        var _s = e.TagType.MIFARE_1024,
          _o = "Bin导入卡片";
        if (1024 === _i ? (_s = e.TagType.MIFARE_1024, _o = "Mifare Classic 1K") : 2048 === _i ? (_s = e.TagType.MIFARE_2048, _o = "Mifare Classic 2K") : 4096 === _i ? (_s = e.TagType.MIFARE_4096, _o = "Mifare Classic 4K") : 180 === _i ? (_s = e.TagType.NTAG_213, _o = "NTAG213") : 540 === _i ? (_s = e.TagType.NTAG_215, _o = "NTAG215") : 924 === _i || 932 === _i ? (_s = e.TagType.NTAG_216, _o = "NTAG216") : 320 === _i ? (_s = e.TagType.MIFARE_Mini, _o = "Mifare Mini") : 5 === _i ? (_s = e.TagType.EM410X, _o = "EM410X") : (_s = this.detectTagTypeFromBinData(_n3), _o = "\u672A\u77E5\u5361\u7247 (".concat(_i, "\u5B57\u8282)")), console.log("[CardImportExport] \u68C0\u6D4B\u5230\u5361\u7247\u7C7B\u578B: ".concat(_s, ", \u540D\u79F0: ").concat(_o)), _s === e.TagType.EM410X) {
          var _e4 = _n3.map(function (t) {
            return t.toString(16).padStart(2, "0");
          }).join("").toUpperCase();
          return [new t.CardSave({
            name: _o,
            uid: _e4,
            tag: _s,
            data: [new Uint8Array(_n3)],
            sak: 0,
            atqa: [0, 0]
          })];
        }
        if (this.isNTAG(_s)) {
          return [this.createCardWithUidLength({
            tagType: _s,
            bytes: _n3,
            hexData: _a2
          }, 7, _o)];
        }
        return {
          needsUidSelection: !0,
          tagType: _s,
          cardName: _o,
          bytes: _n3,
          hexData: _a2
        };
      } catch (a) {
        throw console.error("[CardImportExport] Bin导入失败:", a), new Error("Bin\u6587\u4EF6\u5BFC\u5165\u5931\u8D25: ".concat(a.message));
      }
    }
  }, {
    key: "detectTagTypeFromBinData",
    value: function detectTagTypeFromBinData(t) {
      if (t.length < 16) return e.TagType.EM410X;
      if (t.length >= 16) {
        if (180 === t.length) return e.TagType.NTAG_213;
        if (540 === t.length) return e.TagType.NTAG_215;
        if (924 === t.length || 932 === t.length) return e.TagType.NTAG_216;
      }
      return t.length <= 320 ? e.TagType.MIFARE_Mini : t.length <= 1024 ? e.TagType.MIFARE_1024 : t.length <= 2048 ? e.TagType.MIFARE_2048 : e.TagType.MIFARE_4096;
    }
  }, {
    key: "isMifareClassic",
    value: function isMifareClassic(t) {
      return [e.TagType.MIFARE_Mini, e.TagType.MIFARE_1024, e.TagType.MIFARE_2048, e.TagType.MIFARE_4096].includes(t);
    }
  }, {
    key: "isNTAG",
    value: function isNTAG(t) {
      return [e.TagType.NTAG_210, e.TagType.NTAG_212, e.TagType.NTAG_213, e.TagType.NTAG_215, e.TagType.NTAG_216].includes(t);
    }
  }, {
    key: "isMifareUltralight",
    value: function isMifareUltralight(t) {
      return [e.TagType.MIFARE_Ultralight, e.TagType.MIFARE_Ultralight_C, e.TagType.MIFARE_Ultralight_EV1_11, e.TagType.MIFARE_Ultralight_EV1_21].includes(t);
    }
  }, {
    key: "getTagTypeName",
    value: function getTagTypeName(t) {
      var _e$TagType$UNKNOWN$e$;
      return (_e$TagType$UNKNOWN$e$ = {}, _defineProperty2(_e$TagType$UNKNOWN$e$, e.TagType.UNKNOWN, "未知类型"), _defineProperty2(_e$TagType$UNKNOWN$e$, e.TagType.EM410X, "EM410X"), _defineProperty2(_e$TagType$UNKNOWN$e$, e.TagType.EM410X16, "EM410X-16"), _defineProperty2(_e$TagType$UNKNOWN$e$, e.TagType.EM410X32, "EM410X-32"), _defineProperty2(_e$TagType$UNKNOWN$e$, e.TagType.EM410X64, "EM410X-64"), _defineProperty2(_e$TagType$UNKNOWN$e$, e.TagType.VIKING, "Viking"), _defineProperty2(_e$TagType$UNKNOWN$e$, e.TagType.HID_PROX, "HID Prox"), _defineProperty2(_e$TagType$UNKNOWN$e$, e.TagType.MIFARE_Mini, "Mifare Mini"), _defineProperty2(_e$TagType$UNKNOWN$e$, e.TagType.MIFARE_1024, "Mifare Classic 1K"), _defineProperty2(_e$TagType$UNKNOWN$e$, e.TagType.MIFARE_2048, "Mifare Classic 2K"), _defineProperty2(_e$TagType$UNKNOWN$e$, e.TagType.MIFARE_4096, "Mifare Classic 4K"), _defineProperty2(_e$TagType$UNKNOWN$e$, e.TagType.NTAG_210, "NTAG210"), _defineProperty2(_e$TagType$UNKNOWN$e$, e.TagType.NTAG_212, "NTAG212"), _defineProperty2(_e$TagType$UNKNOWN$e$, e.TagType.NTAG_213, "NTAG213"), _defineProperty2(_e$TagType$UNKNOWN$e$, e.TagType.NTAG_215, "NTAG215"), _defineProperty2(_e$TagType$UNKNOWN$e$, e.TagType.NTAG_216, "NTAG216"), _defineProperty2(_e$TagType$UNKNOWN$e$, e.TagType.MIFARE_Ultralight, "Mifare Ultralight"), _defineProperty2(_e$TagType$UNKNOWN$e$, e.TagType.MIFARE_Ultralight_C, "Mifare Ultralight C"), _defineProperty2(_e$TagType$UNKNOWN$e$, e.TagType.MIFARE_Ultralight_EV1_11, "Ultralight EV1-11"), _defineProperty2(_e$TagType$UNKNOWN$e$, e.TagType.MIFARE_Ultralight_EV1_21, "Ultralight EV1-21"), _e$TagType$UNKNOWN$e$)[t] || "\u672A\u77E5\u7C7B\u578B(".concat(t, ")");
    }
  }, {
    key: "importFromProxmark3",
    value: function importFromProxmark3(e) {
      try {
        console.log("[CardImportExport] 开始处理Proxmark3格式导入");
        var _a3 = JSON.parse(e);
        if (!_a3.Created || "proxmark3" !== _a3.Created) throw new Error("不是有效的Proxmark3格式");
        var _n4 = _a3.Card || {},
          _i2 = _n4.UID || "",
          _s2 = _n4.SAK || "08",
          _o2 = _n4.ATQA || "0004";
        var _p = 8;
        try {
          _p = parseInt(_s2.replace(/[^0-9A-Fa-f]/g, ""), 16);
        } catch (r) {
          console.warn("[CardImportExport] SAK解析失败，使用默认值");
        }
        var c = [4, 0];
        try {
          _o2.length >= 4 && (c = [parseInt(_o2.substring(2, 4), 16), parseInt(_o2.substring(0, 2), 16)]);
        } catch (r) {
          console.warn("[CardImportExport] ATQA解析失败，使用默认值");
        }
        var l = this.detectTagTypeFromPM3(_a3),
          g = this.convertPM3Data(_a3),
          T = new t.CardSave({
            name: _n4.Name || _i2 || "Proxmark3导入",
            uid: _i2,
            tag: l,
            sak: _p,
            atqa: c,
            data: g
          });
        return console.log("[CardImportExport] Proxmark3\u5BFC\u5165\u6210\u529F - UID: ".concat(_i2, ", SAK: 0x").concat(_p.toString(16).padStart(2, "0"), ", ATQA: ").concat(c.map(function (t) {
          return t.toString(16).padStart(2, "0");
        }).join(" "))), [T];
      } catch (a) {
        throw console.error("[CardImportExport] Proxmark3导入失败:", a), new Error("Proxmark3\u683C\u5F0F\u89E3\u6790\u5931\u8D25: ".concat(a.message));
      }
    }
  }, {
    key: "importFromFlipper",
    value: function importFromFlipper(e) {
      try {
        console.log("[CardImportExport] 开始处理Flipper格式导入");
        var _a4 = e.split("\n"),
          _n5 = {};
        var _iterator = _createForOfIteratorHelper2(_a4),
          _step;
        try {
          for (_iterator.s(); !(_step = _iterator.n()).done;) {
            var _t8 = _step.value;
            var _e5 = _t8.trim();
            if (_e5.startsWith("Filetype:") && !_e5.includes("Flipper NFC device")) throw new Error("不是有效的Flipper NFC格式");
            if (_e5.includes(":")) {
              var _e5$split$map = _e5.split(":").map(function (t) {
                  return t.trim();
                }),
                _e5$split$map2 = _slicedToArray2(_e5$split$map, 2),
                _t9 = _e5$split$map2[0],
                _r7 = _e5$split$map2[1];
              _n5[_t9] = _r7;
            }
          }
        } catch (err) {
          _iterator.e(err);
        } finally {
          _iterator.f();
        }
        var _i3 = _n5.UID || "",
          _s3 = _n5.SAK || "08",
          _o3 = _n5.ATQA || "0004";
        var _p2 = 8;
        try {
          _p2 = parseInt(_s3.replace(/[^0-9A-Fa-f]/g, ""), 16);
        } catch (r) {
          console.warn("[CardImportExport] Flipper SAK解析失败，使用默认值");
        }
        var c = [4, 0];
        try {
          _o3.length >= 4 && (c = [parseInt(_o3.substring(0, 2), 16), parseInt(_o3.substring(2, 4), 16)]);
        } catch (r) {
          console.warn("[CardImportExport] Flipper ATQA解析失败，使用默认值");
        }
        var l = this.detectTagTypeFromFlipper(_n5),
          g = this.convertFlipperData(_n5),
          T = new t.CardSave({
            name: _n5.Name || _i3 || "Flipper导入",
            uid: _i3,
            tag: l,
            sak: _p2,
            atqa: c,
            data: g
          });
        return console.log("[CardImportExport] Flipper\u5BFC\u5165\u6210\u529F - UID: ".concat(_i3, ", SAK: 0x").concat(_p2.toString(16).padStart(2, "0"), ", ATQA: ").concat(c.map(function (t) {
          return t.toString(16).padStart(2, "0");
        }).join(" "))), [T];
      } catch (a) {
        throw console.error("[CardImportExport] Flipper导入失败:", a), new Error("Flipper\u683C\u5F0F\u89E3\u6790\u5931\u8D25: ".concat(a.message));
      }
    }
  }, {
    key: "importFromMCT",
    value: function importFromMCT(r) {
      try {
        console.log("[CardImportExport] 开始处理MCT格式导入");
        var _n6 = r.split("\n"),
          _i4 = {};
        var _s4 = null;
        var _iterator2 = _createForOfIteratorHelper2(_n6),
          _step2;
        try {
          for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {
            var _t11 = _step2.value;
            var _e7 = _t11.trim();
            _e7.startsWith("+Sector:") ? (_s4 = parseInt(_e7.split(":")[1].trim()), _i4[_s4] = []) : _e7.match(/^[0-9A-Fa-f\s]+$/) && _e7.length >= 32 && null !== _s4 && _i4[_s4].push(_e7);
          }
        } catch (err) {
          _iterator2.e(err);
        } finally {
          _iterator2.f();
        }
        var _o4 = "",
          _p3 = 8,
          c = [4, 0];
        if (_n6.length > 1) {
          var _t10 = _n6[1].trim();
          if (_t10.length >= 16) {
            if (_o4 = _t10.substring(0, 8), _t10.length >= 12) try {
              _p3 = parseInt(_t10.substring(10, 12), 16);
            } catch (a) {
              console.warn("[CardImportExport] MCT SAK解析失败，使用默认值");
            }
            if (_t10.length >= 16) try {
              var _e6 = _t10.substring(12, 16);
              c = [parseInt(_e6.substring(2, 4), 16), parseInt(_e6.substring(0, 2), 16)];
            } catch (a) {
              console.warn("[CardImportExport] MCT ATQA解析失败，使用默认值");
            }
          }
        }
        var l = Math.max.apply(Math, _toConsumableArray2(Object.keys(_i4).map(function (t) {
          return parseInt(t);
        })));
        var g = e.TagType.MIFARE_1024;
        l >= 32 ? g = e.TagType.MIFARE_4096 : l >= 16 && (g = e.TagType.MIFARE_2048);
        var T = this.convertMCTData(_i4),
          d = new t.CardSave({
            name: _o4 || "MCT导入",
            uid: _o4,
            tag: g,
            sak: _p3,
            atqa: c,
            data: T
          });
        return console.log("[CardImportExport] MCT\u5BFC\u5165\u6210\u529F - UID: ".concat(_o4, ", SAK: 0x").concat(_p3.toString(16).padStart(2, "0"), ", ATQA: ").concat(c.map(function (t) {
          return t.toString(16).padStart(2, "0");
        }).join(" "))), [d];
      } catch (n) {
        throw console.error("[CardImportExport] MCT导入失败:", n), new Error("MCT\u683C\u5F0F\u89E3\u6790\u5931\u8D25: ".concat(n.message));
      }
    }
  }, {
    key: "isBinaryContent",
    value: function isBinaryContent(t) {
      if (t instanceof ArrayBuffer || t instanceof Uint8Array) return !0;
      if ("object" == _typeof2(t) && null !== t && "number" == typeof t.byteLength && !("length" in t) && !("string" in t)) return !0;
      if ("string" == typeof t) {
        var _e8 = Math.min(100, t.length);
        var _r8 = 0;
        for (var _a5 = 0; _a5 < _e8; _a5++) {
          var _e9 = t.charCodeAt(_a5);
          (_e9 < 32 || _e9 > 126) && 10 !== _e9 && 13 !== _e9 && _r8++;
        }
        return _r8 / _e8 > .2;
      }
      return !1;
    }
  }, {
    key: "detectFormat",
    value: function detectFormat(t) {
      var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : "";
      try {
        return r.CardFileParser.detectFormat(t, e);
      } catch (a) {
        return console.warn("[CardImportExport] 新解析器检测失败，使用回退逻辑:", a.message), this.detectFormatFallback(t, e);
      }
    }
  }, {
    key: "detectFormatFallback",
    value: function detectFormatFallback(t) {
      var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : "";
      if (!t) throw new Error("无效的文件内容：文件为空或格式不正确");
      if (this.isBinaryContent(t)) {
        console.log("[CardImportExport] 检测到二进制内容");
        var _t12 = e.toLowerCase().split(".").pop();
        return "dump" === _t12 ? (console.log("[CardImportExport] 二进制dump格式"), n) : "bin" === _t12 ? (console.log("[CardImportExport] 二进制bin格式"), i) : (console.log("[CardImportExport] 默认二进制dump格式"), n);
      }
      if ("string" == typeof t) {
        var c = t.trim();
        if (0 === c.length) throw new Error("文件内容为空，请选择有效的卡片数据文件");
        console.log("[CardImportExport] \u68C0\u6D4B\u5B57\u7B26\u4E32\u6587\u4EF6\u683C\u5F0F - \u6587\u4EF6\u540D: ".concat(e, ", \u5185\u5BB9\u957F\u5EA6: ").concat(c.length));
        var l = e.toLowerCase().split(".").pop();
        try {
          var _t13 = JSON.parse(c);
          return "proxmark3" === _t13.Created ? (console.log("[CardImportExport] 检测到Proxmark3格式"), s) : "chameleon_cards" === _t13.type ? (console.log("[CardImportExport] 检测到Chameleon JSON格式"), a) : _t13.id && _t13.uid && _t13.name && void 0 !== _t13.tag ? (console.log("[CardImportExport] 检测到Flutter CardSave格式"), a) : _t13.id || _t13.name || Array.isArray(_t13) ? (console.log("[CardImportExport] 检测到通用JSON格式"), a) : (console.log("[CardImportExport] 检测到未知JSON格式，尝试作为通用JSON处理"), a);
        } catch (r) {
          console.log("[CardImportExport] 不是JSON格式，继续检测其他格式");
        }
        if (c.includes("Filetype: Flipper NFC device")) return console.log("[CardImportExport] 检测到Flipper NFC格式"), o;
        if (c.includes("+Sector:")) return console.log("[CardImportExport] 检测到MCT格式"), p;
        if (c.includes("# Chameleon") || c.includes("# === Card")) return console.log("[CardImportExport] 检测到Chameleon Dump格式"), n;
        if (c.includes("Block ") || c.includes("Page ") || c.includes("# Name:") || c.includes("# Type:")) return console.log("[CardImportExport] 检测到通用Dump格式"), n;
        var g = c.split("\n").map(function (t) {
            return t.trim();
          }).filter(function (t) {
            return t;
          }),
          T = g.filter(function (t) {
            return /^[0-9A-Fa-f\s]+$/.test(t);
          });
        if (T.length > 0 && T.length / g.length > .7) return console.log("[CardImportExport] 检测到十六进制数据，判断为Bin格式"), i;
        if ("json" === l) return console.log("[CardImportExport] 根据扩展名判断为JSON格式"), a;
        if ("dump" === l) return console.log("[CardImportExport] 根据扩展名判断为Dump格式"), n;
        if ("bin" === l) return console.log("[CardImportExport] 根据扩展名判断为Bin格式"), i;
        if ("nfc" === l) return console.log("[CardImportExport] 根据扩展名判断为Flipper格式"), o;
        throw console.warn("[CardImportExport] 无法识别文件格式，使用默认Dump格式"), new Error("无法识别文件格式。支持的格式：JSON (.json)、Dump (.dump)、Bin (.bin)、Flipper NFC (.nfc)、MCT、Proxmark3");
      }
      throw new Error("不支持的内容类型，请提供有效的文本或二进制数据");
    }
  }, {
    key: "getTimestamp",
    value: function getTimestamp() {
      return new Date().toISOString().replace(/[:.]/g, "-").slice(0, 19);
    }
  }, {
    key: "exportMifareClassicDump",
    value: function exportMifareClassicDump(t) {
      var e = "";
      return t.data && t.data.length > 0 && t.data.forEach(function (t, r) {
        var a = Array.from(t).map(function (t) {
          return t.toString(16).padStart(2, "0");
        }).join(" ");
        e += "Block ".concat(r.toString().padStart(2, "0"), ": ").concat(a, "\n");
      }), e;
    }
  }, {
    key: "exportMifareUltralightDump",
    value: function exportMifareUltralightDump(t) {
      var e = "";
      return t.data && t.data.length > 0 && t.data.forEach(function (t, r) {
        var a = Array.from(t).map(function (t) {
          return t.toString(16).padStart(2, "0");
        }).join(" ");
        e += "Page ".concat(r.toString().padStart(2, "0"), ": ").concat(a, "\n");
      }), e;
    }
  }, {
    key: "exportEM410XDump",
    value: function exportEM410XDump(t) {
      return "UID: ".concat(t.uid, "\n");
    }
  }, {
    key: "exportMifareClassicBin",
    value: function exportMifareClassicBin(t) {
      var e = new ArrayBuffer(16 * t.data.length),
        r = new Uint8Array(e);
      return t.data.forEach(function (t, e) {
        r.set(t, 16 * e);
      }), e;
    }
  }, {
    key: "exportMifareUltralightBin",
    value: function exportMifareUltralightBin(t) {
      var e = new ArrayBuffer(4 * t.data.length),
        r = new Uint8Array(e);
      return t.data.forEach(function (t, e) {
        r.set(t, 4 * e);
      }), e;
    }
  }, {
    key: "parseBinaryDump",
    value: function parseBinaryDump(r) {
      console.log("[CardImportExport] 开始解析二进制dump文件");
      var a = [];
      for (var _t14 = 0; _t14 < r.length; _t14++) a.push(255 & r.charCodeAt(_t14));
      console.log("[CardImportExport] \u4E8C\u8FDB\u5236dump\u6587\u4EF6\u5927\u5C0F: ".concat(a.length, " \u5B57\u8282"));
      var n = e.TagType.MIFARE_1024,
        i = "Dump导入卡片";
      1024 === a.length ? (n = e.TagType.MIFARE_1024, i = "Mifare Classic 1K (Dump)") : 2048 === a.length ? (n = e.TagType.MIFARE_2048, i = "Mifare Classic 2K (Dump)") : 4096 === a.length ? (n = e.TagType.MIFARE_4096, i = "Mifare Classic 4K (Dump)") : 180 === a.length ? (n = e.TagType.NTAG_213, i = "NTAG213 (Dump)") : 540 === a.length ? (n = e.TagType.NTAG_215, i = "NTAG215 (Dump)") : 924 === a.length || 932 === a.length ? (n = e.TagType.NTAG_216, i = "NTAG216 (Dump)") : 5 === a.length && (n = e.TagType.EM410X, i = "EM410X (Dump)");
      var s = "";
      a.length >= 4 ? (s = a.slice(0, 4).map(function (t) {
        return t.toString(16).padStart(2, "0");
      }).join(" ").toUpperCase(), console.log("[CardImportExport] \u4ECE\u4E8C\u8FDB\u5236dump\u63D0\u53D6UID: ".concat(s))) : s = "00 00 00 00";
      var o = n === e.TagType.MIFARE_1024 || n === e.TagType.MIFARE_2048 || n === e.TagType.MIFARE_4096 ? 16 : 4,
        p = [];
      var _loop = function _loop() {
        var e = a.slice(_t15, _t15 + o);
        if (e.length === o) p.push(new Uint8Array(e));else {
          var _t16 = new Uint8Array(o);
          e.forEach(function (e, r) {
            _t16[r] = e;
          }), p.push(_t16);
        }
      };
      for (var _t15 = 0; _t15 < a.length; _t15 += o) {
        _loop();
      }
      var c = new t.CardSave({
        name: "".concat(i, " (").concat(s, ")"),
        uid: s,
        tag: n,
        data: p
      });
      return console.log("[CardImportExport] \u4E8C\u8FDB\u5236dump\u89E3\u6790\u5B8C\u6210: name=".concat(c.name, ", uid=").concat(c.uid, ", blocks=").concat(p.length)), [c];
    }
  }, {
    key: "parseSingleDump",
    value: function parseSingleDump(e) {
      var r;
      var a = e.split("\n"),
        n = {},
        i = [];
      var _iterator3 = _createForOfIteratorHelper2(a),
        _step3;
      try {
        for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {
          var _t19 = _step3.value;
          var _e10 = _t19.trim();
          if (_e10.startsWith("# Name:")) n.name = _e10.substring(7).trim();else if (_e10.startsWith("# Type:")) n.type = _e10.substring(7).trim();else if (_e10.startsWith("# UID:")) n.uid = _e10.substring(6).trim();else if (_e10.startsWith("# Created:")) n.created = _e10.substring(10).trim();else if (_e10.startsWith("# Modified:")) n.modified = _e10.substring(11).trim();else if (_e10.startsWith("Block ") || _e10.startsWith("Page ")) {
            var _t20 = _e10.match(/^(Block|Page)\s+\d+:\s*([0-9A-Fa-f\s]+)/);
            _t20 && i.push(_t20[2]);
          } else !_e10.startsWith("#") && _e10 && /^[0-9A-Fa-f\s]+$/.test(_e10) && i.push(_e10);
        }
      } catch (err) {
        _iterator3.e(err);
      } finally {
        _iterator3.f();
      }
      if (!n.name && !n.type && !n.uid && i.length > 0) {
        var _t17 = i[0].replace(/\s+/g, "");
        _t17.length >= 8 && (n.uid = _t17.substring(0, 8).match(/.{2}/g).join(" ").toUpperCase(), n.name = "Dump\u5BFC\u5165 (".concat(n.uid, ")"));
      }
      n.name || (n.name = "Dump导入");
      var s = new t.CardSave({
        name: n.name || "Dump导入",
        uid: n.uid || "",
        tag: this.detectTagTypeFromString(n.type),
        createdAt: n.created || new Date().toISOString(),
        modifiedAt: n.modified || new Date().toISOString()
      });
      if (i.length > 0 && (s.data = this.parseDataLines(i), !s.uid && s.data.length > 0)) {
        var _t18 = s.data[0];
        _t18 && _t18.length >= 4 && (s.uid = Array.from(_t18.slice(0, 4)).map(function (t) {
          return t.toString(16).padStart(2, "0");
        }).join(" ").toUpperCase(), console.log("[CardImportExport] \u4ECE\u6570\u636E\u4E2D\u63D0\u53D6UID: ".concat(s.uid)));
      }
      return s.uid || (console.warn("[CardImportExport] 无法提取UID，使用默认UID"), s.uid = "00 00 00 00"), console.log("[CardImportExport] \u89E3\u6790dump\u5B8C\u6210: name=".concat(s.name, ", uid=").concat(s.uid, ", dataBlocks=").concat((null == (r = s.data) ? void 0 : r.length) || 0)), s;
    }
  }, {
    key: "parseDumpSection",
    value: function parseDumpSection(e) {
      var r;
      var a = e.split("\n"),
        n = {},
        i = [];
      var _iterator4 = _createForOfIteratorHelper2(a),
        _step4;
      try {
        for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {
          var _t22 = _step4.value;
          var _e11 = _t22.trim();
          _e11.startsWith("# Type:") ? n.type = _e11.substring(7).trim() : _e11.startsWith("# UID:") ? n.uid = _e11.substring(6).trim() : _e11.startsWith("# Name:") ? n.name = _e11.substring(7).trim() : !_e11.startsWith("#") && _e11 && i.push(_e11);
        }
      } catch (err) {
        _iterator4.e(err);
      } finally {
        _iterator4.f();
      }
      var s = new t.CardSave({
        name: n.name || "导入的卡片",
        uid: n.uid || "",
        tag: this.detectTagTypeFromString(n.type)
      });
      if (i.length > 0 && (s.data = this.parseDataLines(i), !s.uid && s.data.length > 0)) {
        var _t21 = s.data[0];
        _t21 && _t21.length >= 4 && (s.uid = Array.from(_t21.slice(0, 4)).map(function (t) {
          return t.toString(16).padStart(2, "0");
        }).join(" ").toUpperCase(), console.log("[CardImportExport] \u4ECE\u6BB5\u843D\u6570\u636E\u4E2D\u63D0\u53D6UID: ".concat(s.uid)));
      }
      return s.uid || (console.warn("[CardImportExport] 段落无法提取UID，使用默认UID"), s.uid = "00 00 00 00"), console.log("[CardImportExport] \u89E3\u6790dump\u6BB5\u843D\u5B8C\u6210: name=".concat(s.name, ", uid=").concat(s.uid, ", dataBlocks=").concat((null == (r = s.data) ? void 0 : r.length) || 0)), s;
    }
  }, {
    key: "detectTagTypeFromString",
    value: function detectTagTypeFromString(t) {
      if (!t) return e.TagType.MIFARE_1024;
      var r = t.toLowerCase();
      if (r.includes("em410x") || r.includes("em4100")) return e.TagType.EM410X;
      if (r.includes("mifare classic") || r.includes("mf1")) return r.includes("1k") || r.includes("1024") ? e.TagType.MIFARE_1024 : r.includes("2k") || r.includes("2048") ? e.TagType.MIFARE_2048 : r.includes("4k") || r.includes("4096") ? e.TagType.MIFARE_4096 : e.TagType.MIFARE_1024;
      if (r.includes("ntag")) return r.includes("213") ? e.TagType.NTAG_213 : r.includes("215") ? e.TagType.NTAG_215 : r.includes("216") ? e.TagType.NTAG_216 : e.TagType.NTAG_213;
      if (r.includes("ultralight") || r.includes("ul")) return e.TagType.MIFARE_Ultralight;
      var a = parseInt(t);
      if (!isNaN(a)) switch (a) {
        case 0:
          return e.TagType.EM410X;
        case 1:
        default:
          return e.TagType.MIFARE_1024;
        case 2:
          return e.TagType.MIFARE_2048;
        case 3:
          return e.TagType.MIFARE_4096;
        case 4:
          return e.TagType.MIFARE_Ultralight;
        case 5:
          return e.TagType.NTAG_213;
        case 6:
          return e.TagType.NTAG_215;
        case 7:
          return e.TagType.NTAG_216;
      }
      return e.TagType.MIFARE_1024;
    }
  }, {
    key: "parseDataLines",
    value: function parseDataLines(t) {
      var e = [];
      var _iterator5 = _createForOfIteratorHelper2(t),
        _step5;
      try {
        for (_iterator5.s(); !(_step5 = _iterator5.n()).done;) {
          var _a6 = _step5.value;
          var _t23 = _a6.trim();
          if (_t23 = _t23.replace(/^(Block|Page)\s+\d+:\s*/, ""), _t23 = _t23.replace(/[^0-9A-Fa-f\s]/g, "").trim(), _t23) try {
            var _r9 = void 0;
            _r9 = _t23.includes(" ") ? _t23.split(/\s+/).filter(function (t) {
              return t.length > 0;
            }) : _t23.match(/.{1,2}/g) || [];
            var _a7 = _r9.map(function (t) {
              var e = parseInt(t, 16);
              if (isNaN(e)) throw new Error("\u65E0\u6548\u7684\u5341\u516D\u8FDB\u5236\u503C: ".concat(t));
              return e;
            });
            _a7.length > 0 && e.push(new Uint8Array(_a7));
          } catch (r) {
            console.warn("[CardImportExport] \u8DF3\u8FC7\u65E0\u6548\u7684\u6570\u636E\u884C: ".concat(_a6, ", \u9519\u8BEF: ").concat(r.message));
          }
        }
      } catch (err) {
        _iterator5.e(err);
      } finally {
        _iterator5.f();
      }
      return e;
    }
  }, {
    key: "detectTagTypeFromPM3",
    value: function detectTagTypeFromPM3(t) {
      if (t.Card && t.Card.SAK) {
        var _r10 = parseInt(t.Card.SAK.replace(/[^0-9A-Fa-f]/g, ""), 16);
        if (8 === _r10) return e.TagType.MIFARE_1024;
        if (24 === _r10) return e.TagType.MIFARE_2048;
        if (56 === _r10) return e.TagType.MIFARE_4096;
        if (9 === _r10) return e.TagType.MIFARE_Mini;
        if (0 === _r10) return e.TagType.NTAG_213;
      }
      return e.TagType.MIFARE_1024;
    }
  }, {
    key: "convertPM3Data",
    value: function convertPM3Data(t) {
      var e = [];
      return t.blocks && t.blocks.forEach(function (t) {
        if ("string" == typeof t) {
          var _r11 = t.replace(/\s/g, ""),
            _a8 = [];
          for (var _t24 = 0; _t24 < _r11.length; _t24 += 2) _a8.push(parseInt(_r11.substring(_t24, _t24 + 2), 16));
          e.push(new Uint8Array(_a8));
        }
      }), e;
    }
  }, {
    key: "detectTagTypeFromFlipper",
    value: function detectTagTypeFromFlipper(t) {
      if (t.SAK) {
        var _r12 = parseInt(t.SAK.replace(/[^0-9A-Fa-f]/g, ""), 16);
        if (8 === _r12) return e.TagType.MIFARE_1024;
        if (24 === _r12) return e.TagType.MIFARE_2048;
        if (56 === _r12) return e.TagType.MIFARE_4096;
        if (9 === _r12) return e.TagType.MIFARE_Mini;
        if (0 === _r12) return e.TagType.NTAG_213;
      }
      return e.TagType.MIFARE_1024;
    }
  }, {
    key: "convertFlipperData",
    value: function convertFlipperData(t) {
      var e = [];
      return Object.keys(t).forEach(function (r) {
        if (r.startsWith("Block")) {
          var _a9 = t[r].replace(/\?/g, "0").replace(/\s/g, ""),
            _n7 = [];
          for (var _t25 = 0; _t25 < _a9.length; _t25 += 2) _n7.push(parseInt(_a9.substr(_t25, 2), 16));
          _n7.length > 0 && e.push(new Uint8Array(_n7));
        }
      }), e;
    }
  }, {
    key: "convertMCTData",
    value: function convertMCTData(t) {
      var e = [];
      return Object.keys(t).sort(function (t, e) {
        return parseInt(t) - parseInt(e);
      }).forEach(function (r) {
        t[r].forEach(function (t) {
          var r = t.replace(/\s/g, "").match(/.{2}/g).map(function (t) {
            return parseInt(t, 16);
          });
          e.push(new Uint8Array(r));
        });
      }), e;
    }
  }]);
  return _class;
}(); 
 			}); 
		define("utils/card-reader.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";

var _createForOfIteratorHelper2 = require("../@babel/runtime/helpers/createForOfIteratorHelper");
var _toConsumableArray2 = require("../@babel/runtime/helpers/toConsumableArray");
var _objectSpread2 = require("../@babel/runtime/helpers/objectSpread2");
var _regeneratorRuntime2 = require("../@babel/runtime/helpers/regeneratorRuntime");
var _asyncToGenerator2 = require("../@babel/runtime/helpers/asyncToGenerator");
var _classCallCheck2 = require("../@babel/runtime/helpers/classCallCheck");
var _createClass2 = require("../@babel/runtime/helpers/createClass");
var e = require("./chameleon-protocol.js"),
  t = "iso14443a",
  s = "em410x",
  a = "unknown",
  r = {
    MIFARE_CLASSIC_1K: {
      name: "Mifare Classic 1K",
      protocol: t,
      sectors: 16,
      blocks: 64,
      blockSize: 16,
      frequency: "hf"
    },
    MIFARE_CLASSIC_4K: {
      name: "Mifare Classic 4K",
      protocol: t,
      sectors: 40,
      blocks: 256,
      blockSize: 16,
      frequency: "hf"
    },
    MIFARE_ULTRALIGHT: {
      name: "Mifare Ultralight",
      protocol: t,
      pages: 16,
      pageSize: 4,
      frequency: "hf"
    },
    NTAG213: {
      name: "NTAG213",
      protocol: t,
      pages: 45,
      pageSize: 4,
      frequency: "hf"
    },
    NTAG215: {
      name: "NTAG215",
      protocol: t,
      pages: 135,
      pageSize: 4,
      frequency: "hf"
    },
    NTAG216: {
      name: "NTAG216",
      protocol: t,
      pages: 231,
      pageSize: 4,
      frequency: "hf"
    },
    EM410X: {
      name: "EM410X",
      protocol: s,
      uidSize: 5,
      frequency: "lf"
    },
    T55XX: {
      name: "T55XX",
      protocol: "t55xx",
      blocks: 8,
      blockSize: 4,
      frequency: "lf"
    }
  };
var o = /*#__PURE__*/function () {
  function o() {
    _classCallCheck2(this, o);
  }
  _createClass2(o, null, [{
    key: "getMifareClassicTypeByHardware",
    value: function () {
      var _getMifareClassicTypeByHardware = _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee(e) {
        var _t, _s, _a;
        return _regeneratorRuntime2().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              _context.prev = 0;
              _context.next = 3;
              return e.send14ARaw([96, 255], {
                checkResponseCrc: !1,
                autoSelect: !1,
                activateRfField: !1,
                waitResponse: !0,
                appendCrc: !0
              });
            case 3:
              _t = _context.sent;
              if (!(_t && 4 === _t.length)) {
                _context.next = 6;
                break;
              }
              return _context.abrupt("return", "4k");
            case 6:
              _context.next = 8;
              return e.send14ARaw([96, 80], {
                checkResponseCrc: !1,
                autoSelect: !1,
                activateRfField: !1,
                waitResponse: !0,
                appendCrc: !0
              });
            case 8:
              _s = _context.sent;
              if (!(_s && 4 === _s.length)) {
                _context.next = 11;
                break;
              }
              return _context.abrupt("return", "2k");
            case 11:
              _context.next = 13;
              return e.send14ARaw([96, 63], {
                checkResponseCrc: !1,
                autoSelect: !1,
                activateRfField: !1,
                waitResponse: !0,
                appendCrc: !0
              });
            case 13:
              _a = _context.sent;
              return _context.abrupt("return", _a && 4 === _a.length ? "1k" : "mini");
            case 17:
              _context.prev = 17;
              _context.t0 = _context["catch"](0);
              return _context.abrupt("return", (console.error("[CardIdentifier] 卡片类型识别失败:", _context.t0), "1k"));
            case 20:
            case "end":
              return _context.stop();
          }
        }, _callee, null, [[0, 17]]);
      }));
      function getMifareClassicTypeByHardware(_x) {
        return _getMifareClassicTypeByHardware.apply(this, arguments);
      }
      return getMifareClassicTypeByHardware;
    }()
  }, {
    key: "identifyHFCard",
    value: function identifyHFCard(_ref) {
      var e = _ref.sak,
        s = _ref.atqa,
        a = _ref.ats,
        _o = _ref.uid;
      var c = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;
      var n = "string" == typeof e ? parseInt(e, 16) : e;
      var i;
      if ("string" == typeof s) {
        var _e = s.replace(/\s/g, "");
        i = parseInt(_e, 16);
      } else i = s;
      return 24 == (24 & n) ? {
        type: "mifare_classic",
        subtype: "unknown",
        info: r.MIFARE_CLASSIC_1K,
        protocol: t,
        needsHardwareCheck: !0
      } : 0 === n && 68 === i ? {
        type: "mifare_ultralight",
        subtype: "unknown",
        info: r.MIFARE_ULTRALIGHT,
        protocol: t,
        needsVersionCheck: !0
      } : 0 !== n || 68 !== i && 4 !== i ? {
        type: "iso14443a",
        subtype: "unknown",
        info: {
          name: "ISO14443A",
          protocol: t,
          frequency: "hf"
        },
        protocol: t
      } : {
        type: "ntag",
        subtype: "unknown",
        info: r.NTAG213,
        protocol: t,
        needsVersionCheck: !0
      };
    }
  }, {
    key: "identifyLFCard",
    value: function identifyLFCard(_ref2) {
      var e = _ref2.uid,
        t = _ref2.rawData;
      return e && 10 === e.replace(/\s/g, "").length ? {
        type: "em410x",
        subtype: "standard",
        info: r.EM410X,
        protocol: s
      } : {
        type: "unknown_lf",
        subtype: "unknown",
        info: {
          name: "未知低频卡片",
          protocol: a,
          frequency: "lf"
        },
        protocol: a
      };
    }
  }, {
    key: "identifyNTAGByVersion",
    value: function identifyNTAGByVersion(e) {
      if (!e || e.length < 8) return r.MIFARE_ULTRALIGHT;
      var t = e[6];
      switch (e[6], t) {
        case 18:
          return r.NTAG213;
        case 62:
          return r.NTAG215;
        case 109:
          return r.NTAG216;
        case 111:
          return _objectSpread2(_objectSpread2({}, r.NTAG216), {}, {
            name: "NTAG216F"
          });
        default:
          return r.MIFARE_ULTRALIGHT;
      }
    }
  }]);
  return o;
}();
exports.CardDataFormatter = /*#__PURE__*/function () {
  function _class() {
    _classCallCheck2(this, _class);
  }
  _createClass2(_class, null, [{
    key: "formatUID",
    value: function formatUID(e) {
      var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : " ";
      var s;
      if (!e) return "";
      var a = e.toString().replace(/\s/g, "").toUpperCase();
      return (null == (s = a.match(/.{2}/g)) ? void 0 : s.join(t)) || a;
    }
  }, {
    key: "formatHexData",
    value: function formatHexData(e) {
      var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 16;
      var s = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : " ";
      if (!e) return "";
      var a = (Array.isArray(e) ? e : Array.from(e)).map(function (e) {
        return e.toString(16).padStart(2, "0").toUpperCase();
      }).join(s);
      if (t > 0) {
        var _e2 = [],
          _r = a.split(s);
        for (var _a2 = 0; _a2 < _r.length; _a2 += t) _e2.push(_r.slice(_a2, _a2 + t).join(s));
        return _e2.join("\n");
      }
      return a;
    }
  }, {
    key: "formatMifareClassicSector",
    value: function formatMifareClassicSector(e, t) {
      var _this = this;
      var s = [];
      if (s.push("Sector ".concat(t, ":")), e.blocks.forEach(function (a, r) {
        var o = 4 * t + r;
        var c = a;
        3 === r && e.keyA && Array.isArray(a) && 16 === a.length && (c = [].concat(_toConsumableArray2(e.keyA), _toConsumableArray2(a.slice(6))));
        var n = _this.formatHexData(c, 16, " ");
        s.push("Block ".concat(o, ": ").concat(n));
      }), e.keyB) {
        var _t2 = this.formatHexData(e.keyB, 6, " ");
        s.push("Key B: ".concat(_t2));
      }
      return s.join("\n");
    }
  }, {
    key: "formatMifareUltralightPages",
    value: function formatMifareUltralightPages(e) {
      var _this2 = this;
      var t = [];
      return e.forEach(function (e, s) {
        var a = _this2.formatHexData(e, 4, " ");
        t.push("Page ".concat(s, ": ").concat(a));
      }), t.join("\n");
    }
  }, {
    key: "calculateDataSize",
    value: function calculateDataSize(e) {
      var t = 0;
      return e.sectors ? t = 4 * e.sectors.length * 16 : e.pages ? t = 4 * e.pages.length : e.uid && (t = e.uid.replace(/\s/g, "").length / 2), t;
    }
  }, {
    key: "formatFileSize",
    value: function formatFileSize(e) {
      if (0 === e) return "0 B";
      var t = Math.floor(Math.log(e) / Math.log(1024));
      return parseFloat((e / Math.pow(1024, t)).toFixed(1)) + " " + ["B", "KB", "MB", "GB"][t];
    }
  }]);
  return _class;
}(), exports.CardDataReader = /*#__PURE__*/function () {
  function _class2(e) {
    _classCallCheck2(this, _class2);
    this.bluetoothService = e, this.isReading = !1, this.abortController = null;
  }
  _createClass2(_class2, [{
    key: "setAbortController",
    value: function setAbortController(e) {
      this.abortController = e;
    }
  }, {
    key: "checkAbort",
    value: function checkAbort() {
      if (this.abortController && this.abortController.signal.aborted) throw new Error("读取被用户中断");
    }
  }, {
    key: "readHFCardData",
    value: function () {
      var _readHFCardData = _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee2(e) {
        var t,
          _s2,
          _args2 = arguments;
        return _regeneratorRuntime2().wrap(function _callee2$(_context2) {
          while (1) switch (_context2.prev = _context2.next) {
            case 0:
              t = _args2.length > 1 && _args2[1] !== undefined ? _args2[1] : function () {};
              this.isReading = !0;
              _context2.prev = 2;
              _s2 = o.identifyHFCard(e, this.bluetoothService);
              _context2.t0 = _s2.type;
              _context2.next = _context2.t0 === "mifare_classic" ? 7 : _context2.t0 === "mifare_ultralight" ? 10 : _context2.t0 === "ntag" ? 10 : 13;
              break;
            case 7:
              _context2.next = 9;
              return this.readMifareClassicData(e, _s2, t);
            case 9:
              return _context2.abrupt("return", _context2.sent);
            case 10:
              _context2.next = 12;
              return this.readMifareUltralightData(e, _s2, t);
            case 12:
              return _context2.abrupt("return", _context2.sent);
            case 13:
              return _context2.abrupt("return", _objectSpread2(_objectSpread2({}, e), {}, {
                type: "unknown",
                isComplete: !0,
                data: {
                  basicInfo: e
                }
              }));
            case 14:
              _context2.prev = 14;
              this.isReading = !1;
              return _context2.finish(14);
            case 17:
            case "end":
              return _context2.stop();
          }
        }, _callee2, this, [[2,, 14, 17]]);
      }));
      function readHFCardData(_x2) {
        return _readHFCardData.apply(this, arguments);
      }
      return readHFCardData;
    }()
  }, {
    key: "readMifareClassicData",
    value: function () {
      var _readMifareClassicData = _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee3(t, s, a) {
        var _this3 = this;
        var _s3, _r2, c, n, _loop, _e3;
        return _regeneratorRuntime2().wrap(function _callee3$(_context4) {
          while (1) switch (_context4.prev = _context4.next) {
            case 0:
              a({
                message: "正在读取Mifare Classic数据...",
                percentage: 0
              });
              _context4.prev = 1;
              this.checkAbort();
              _context4.next = 5;
              return this.bluetoothService.sendCommand(e.ChameleonCommand.MF1_SUPPORT_DETECT, []);
            case 5:
              if (_context4.sent.success) {
                _context4.next = 7;
                break;
              }
              throw new Error("不是Mifare Classic卡片");
            case 7:
              a({
                message: "正在识别卡片类型...",
                percentage: 10
              });
              _context4.next = 10;
              return o.getMifareClassicTypeByHardware(this.bluetoothService);
            case 10:
              _s3 = _context4.sent;
              console.log("[CardReader] 识别到卡片类型:", _s3);
              _r2 = 16;
              "2k" === _s3 ? _r2 = 32 : "4k" === _s3 ? _r2 = 40 : "mini" === _s3 && (_r2 = 5), a({
                message: "\u68C0\u6D4B\u5230Mifare Classic ".concat(_s3.toUpperCase(), "\u5361\u7247\uFF0C\u5171").concat(_r2, "\u4E2A\u6247\u533A"),
                percentage: 15
              });
              c = {
                cardType: _s3,
                sectors: [],
                keys: {
                  keyA: [],
                  keyB: []
                },
                readableBlocks: [],
                unreadableBlocks: [],
                hasErrors: !1,
                errorMessages: []
              }, n = [[255, 255, 255, 255, 255, 255], [160, 161, 162, 163, 164, 165], [211, 247, 211, 247, 211, 247], [0, 0, 0, 0, 0, 0], [176, 177, 178, 179, 180, 181], [170, 187, 204, 221, 238, 255], [77, 58, 153, 195, 81, 221], [26, 152, 44, 126, 69, 154], [113, 76, 92, 136, 110, 151], [88, 126, 229, 249, 53, 15], [160, 71, 140, 195, 144, 145], [83, 60, 182, 199, 35, 246], [143, 208, 164, 242, 86, 233], [26, 43, 60, 77, 94, 111], [18, 52, 86, 120, 154, 188], [1, 2, 3, 4, 5, 6], [18, 52, 86, 171, 205, 239], [171, 205, 239, 18, 52, 86]];
              _loop = /*#__PURE__*/_regeneratorRuntime2().mark(function _loop(_e3) {
                var _c$readableBlocks, _c$unreadableBlocks;
                var t;
                return _regeneratorRuntime2().wrap(function _loop$(_context3) {
                  while (1) switch (_context3.prev = _context3.next) {
                    case 0:
                      _this3.checkAbort(), a({
                        message: "\u6B63\u5728\u8BFB\u53D6\u6247\u533A ".concat(_e3, "/").concat(_r2, "..."),
                        percentage: 20 + _e3 / _r2 * 60
                      });
                      _context3.next = 3;
                      return _this3.readMifareClassicSector(_e3, n);
                    case 3:
                      t = _context3.sent;
                      c.sectors.push(t);
                      t.readable ? (_c$readableBlocks = c.readableBlocks).push.apply(_c$readableBlocks, _toConsumableArray2(t.blocks.map(function (t, s) {
                        return 4 * _e3 + s;
                      }))) : ((_c$unreadableBlocks = c.unreadableBlocks).push.apply(_c$unreadableBlocks, _toConsumableArray2(Array.from({
                        length: 4
                      }, function (t, s) {
                        return 4 * _e3 + s;
                      }))), c.hasErrors = !0, c.errorMessages.push("\u6247\u533A ".concat(_e3, " \u65E0\u6CD5\u8BFB\u53D6")));
                      _context3.next = 8;
                      return new Promise(function (e) {
                        return setTimeout(e, 100);
                      });
                    case 8:
                    case "end":
                      return _context3.stop();
                  }
                }, _loop);
              });
              _e3 = 0;
            case 17:
              if (!(_e3 < _r2)) {
                _context4.next = 22;
                break;
              }
              return _context4.delegateYield(_loop(_e3), "t0", 19);
            case 19:
              _e3++;
              _context4.next = 17;
              break;
            case 22:
              return _context4.abrupt("return", (a({
                message: "数据读取完成",
                percentage: 100
              }), _objectSpread2(_objectSpread2(_objectSpread2({}, t), {}, {
                type: "mifare_classic_".concat(_s3),
                cardType: _s3,
                subtype: _s3
              }, c), {}, {
                isComplete: !c.hasErrors,
                readTime: new Date().toISOString()
              })));
            case 25:
              _context4.prev = 25;
              _context4.t1 = _context4["catch"](1);
              throw new Error("Mifare Classic\u8BFB\u53D6\u5931\u8D25: ".concat(_context4.t1.message));
            case 28:
            case "end":
              return _context4.stop();
          }
        }, _callee3, this, [[1, 25]]);
      }));
      function readMifareClassicData(_x3, _x4, _x5) {
        return _readMifareClassicData.apply(this, arguments);
      }
      return readMifareClassicData;
    }()
  }, {
    key: "readMifareClassicSector",
    value: function () {
      var _readMifareClassicSector = _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee4(t, s) {
        var a, _iterator, _step, _o2, _s4, _r3, c;
        return _regeneratorRuntime2().wrap(function _callee4$(_context5) {
          while (1) switch (_context5.prev = _context5.next) {
            case 0:
              a = {
                sector: t,
                blocks: [],
                readable: !1,
                keyA: null,
                keyB: null,
                accessBits: null
              };
              _iterator = _createForOfIteratorHelper2(s);
              _context5.prev = 2;
              _iterator.s();
            case 4:
              if ((_step = _iterator.n()).done) {
                _context5.next = 29;
                break;
              }
              _o2 = _step.value;
              _context5.prev = 6;
              _context5.next = 9;
              return this.bluetoothService.sendCommand(e.ChameleonCommand.MF1_CHECK_KEY, [96, 4 * t].concat(_toConsumableArray2(_o2)), 2e3);
            case 9:
              if (!_context5.sent.success) {
                _context5.next = 22;
                break;
              }
              a.keyA = Array.from(_o2), a.readable = !0;
              _s4 = 0;
            case 12:
              if (!(_s4 < 4)) {
                _context5.next = 21;
                break;
              }
              _r3 = 4 * t + _s4;
              _context5.next = 16;
              return this.bluetoothService.sendCommand(e.ChameleonCommand.MF1_READ_BLOCK, [96, _r3].concat(_toConsumableArray2(_o2)), 2e3);
            case 16:
              c = _context5.sent;
              c.success && c.data.length >= 16 ? a.blocks.push(Array.from(c.data.slice(0, 16))) : a.blocks.push(new Array(16).fill(0));
            case 18:
              _s4++;
              _context5.next = 12;
              break;
            case 21:
              return _context5.abrupt("break", 29);
            case 22:
              _context5.next = 27;
              break;
            case 24:
              _context5.prev = 24;
              _context5.t0 = _context5["catch"](6);
              return _context5.abrupt("continue", 27);
            case 27:
              _context5.next = 4;
              break;
            case 29:
              _context5.next = 34;
              break;
            case 31:
              _context5.prev = 31;
              _context5.t1 = _context5["catch"](2);
              _iterator.e(_context5.t1);
            case 34:
              _context5.prev = 34;
              _iterator.f();
              return _context5.finish(34);
            case 37:
              return _context5.abrupt("return", (a.readable || (a.blocks = Array.from({
                length: 4
              }, function () {
                return new Array(16).fill(0);
              })), a));
            case 38:
            case "end":
              return _context5.stop();
          }
        }, _callee4, this, [[2, 31, 34, 37], [6, 24]]);
      }));
      function readMifareClassicSector(_x6, _x7) {
        return _readMifareClassicSector.apply(this, arguments);
      }
      return readMifareClassicSector;
    }()
  }, {
    key: "readMifareUltralightData",
    value: function () {
      var _readMifareUltralightData = _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee5(t, s, a) {
        var c, n, _t3, i, l, d, _e4, _t4, _s5, h, _t5;
        return _regeneratorRuntime2().wrap(function _callee5$(_context6) {
          while (1) switch (_context6.prev = _context6.next) {
            case 0:
              a({
                message: "正在读取Mifare Ultralight数据...",
                percentage: 0
              });
              _context6.prev = 1;
              this.checkAbort();
              c = s.info, n = 16;
              _context6.prev = 4;
              _context6.next = 7;
              return this.bluetoothService.sendCommand(e.ChameleonCommand.MF0_GET_VERSION, [], 2e3);
            case 7:
              _t3 = _context6.sent;
              _t3.success && _t3.data.length >= 8 && (c = o.identifyNTAGByVersion(_t3.data), n = c.pages || 16, a({
                message: "\u68C0\u6D4B\u5230".concat(c.name, "\uFF0C\u5171").concat(n, "\u9875"),
                percentage: 10
              }));
              _context6.next = 14;
              break;
            case 11:
              _context6.prev = 11;
              _context6.t0 = _context6["catch"](4);
              console.warn("版本检测失败，使用默认页面数:", _context6.t0.message);
            case 14:
              i = [], l = [], d = [];
              _e4 = 0;
            case 16:
              if (!(_e4 < n)) {
                _context6.next = 33;
                break;
              }
              this.checkAbort(), a({
                message: "\u6B63\u5728\u8BFB\u53D6\u9875\u9762 ".concat(_e4, "/").concat(n, "..."),
                percentage: 10 + _e4 / n * 80
              });
              _context6.prev = 18;
              _context6.next = 21;
              return this.bluetoothService.send14ARaw([48, _e4], {
                respTimeoutMs: 100,
                autoSelect: !1,
                keepRfField: !0
              });
            case 21:
              _t4 = _context6.sent;
              if (_t4 && _t4.length >= 4) {
                _s5 = Array.from(_t4.slice(0, 4));
                i.push(_s5), l.push(_e4);
              } else i.push([0, 0, 0, 0]), d.push(_e4);
              _context6.next = 28;
              break;
            case 25:
              _context6.prev = 25;
              _context6.t1 = _context6["catch"](18);
              i.push([0, 0, 0, 0]), d.push(_e4);
            case 28:
              _context6.next = 30;
              return new Promise(function (e) {
                return setTimeout(e, 50);
              });
            case 30:
              _e4++;
              _context6.next = 16;
              break;
            case 33:
              h = "";
              _context6.prev = 34;
              _context6.next = 37;
              return this.bluetoothService.sendCommand(e.ChameleonCommand.MF0_GET_SIGNATURE, [], 2e3);
            case 37:
              _t5 = _context6.sent;
              _t5.success && _t5.data.length > 0 && (h = Array.from(_t5.data).map(function (e) {
                return e.toString(16).padStart(2, "0");
              }).join(" ").toUpperCase());
              _context6.next = 43;
              break;
            case 41:
              _context6.prev = 41;
              _context6.t2 = _context6["catch"](34);
            case 43:
              return _context6.abrupt("return", (a({
                message: "数据读取完成",
                percentage: 100
              }), _objectSpread2(_objectSpread2({}, t), {}, {
                type: c.name.toLowerCase().replace(/\s/g, "_"),
                pages: i,
                readablePages: l,
                unreadablePages: d,
                signature: h,
                version: c.name,
                isComplete: 0 === d.length,
                hasErrors: d.length > 0,
                errorMessage: d.length > 0 ? "".concat(d.length, "\u4E2A\u9875\u9762\u65E0\u6CD5\u8BFB\u53D6") : "",
                readTime: new Date().toISOString()
              })));
            case 46:
              _context6.prev = 46;
              _context6.t3 = _context6["catch"](1);
              throw new Error("Mifare Ultralight\u8BFB\u53D6\u5931\u8D25: ".concat(_context6.t3.message));
            case 49:
            case "end":
              return _context6.stop();
          }
        }, _callee5, this, [[1, 46], [4, 11], [18, 25], [34, 41]]);
      }));
      function readMifareUltralightData(_x8, _x9, _x10) {
        return _readMifareUltralightData.apply(this, arguments);
      }
      return readMifareUltralightData;
    }()
  }, {
    key: "readLFCardData",
    value: function () {
      var _readLFCardData = _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee6(e) {
        var t,
          _args7 = arguments;
        return _regeneratorRuntime2().wrap(function _callee6$(_context7) {
          while (1) switch (_context7.prev = _context7.next) {
            case 0:
              t = _args7.length > 1 && _args7[1] !== undefined ? _args7[1] : function () {};
              this.isReading = !0;
              _context7.prev = 2;
              return _context7.abrupt("return", "em410x" === o.identifyLFCard(e).type ? _objectSpread2(_objectSpread2({}, e), {}, {
                isComplete: !0,
                readTime: new Date().toISOString()
              }) : _objectSpread2(_objectSpread2({}, e), {}, {
                isComplete: !0,
                hasErrors: !0,
                errorMessage: "不支持的低频卡片类型",
                readTime: new Date().toISOString()
              }));
            case 4:
              _context7.prev = 4;
              this.isReading = !1;
              return _context7.finish(4);
            case 7:
            case "end":
              return _context7.stop();
          }
        }, _callee6, this, [[2,, 4, 7]]);
      }));
      function readLFCardData(_x11) {
        return _readLFCardData.apply(this, arguments);
      }
      return readLFCardData;
    }()
  }, {
    key: "abort",
    value: function abort() {
      this.abortController && this.abortController.abort();
    }
  }, {
    key: "isCurrentlyReading",
    get: function get() {
      return this.isReading;
    }
  }, {
    key: "checkBackdoorSupport",
    value: function () {
      var _checkBackdoorSupport = _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee7() {
        var _s6, _a3, _t6;
        return _regeneratorRuntime2().wrap(function _callee7$(_context8) {
          while (1) switch (_context8.prev = _context8.next) {
            case 0:
              _context8.prev = 0;
              console.log("[CardReader] 检测后门支持...");
              _context8.next = 4;
              return this.bluetoothService.send14ARaw([100, 0], {
                autoSelect: !0,
                checkResponseCrc: !1,
                respTimeoutMs: 1e3,
                keepRfField: !0
              });
            case 4:
              _s6 = _context8.sent;
              if (!(!_s6 || 4 !== _s6.length)) {
                _context8.next = 7;
                break;
              }
              return _context8.abrupt("return", (console.log("[CardReader] 后门检测失败: 响应长度不正确"), !1));
            case 7:
              _a3 = [163, 150, 239, 164, 226, 79];
              _context8.prev = 8;
              _context8.next = 11;
              return this.bluetoothService.sendCommand(e.ChameleonCommand.MF1_STATIC_ENCRYPTED_NESTED_ACQUIRE, [].concat(_a3, [1, 0]), 5e3);
            case 11:
              _t6 = _context8.sent;
              if (!(_t6 && _t6.success)) {
                _context8.next = 14;
                break;
              }
              return _context8.abrupt("return", (console.log("[CardReader] 检测到后门支持!"), !0));
            case 14:
              _context8.next = 19;
              break;
            case 16:
              _context8.prev = 16;
              _context8.t0 = _context8["catch"](8);
              console.log("[CardReader] 静态加密Nested获取失败:", _context8.t0.message);
            case 19:
              return _context8.abrupt("return", !1);
            case 22:
              _context8.prev = 22;
              _context8.t1 = _context8["catch"](0);
              return _context8.abrupt("return", (console.error("[CardReader] 后门检测异常:", _context8.t1), !1));
            case 25:
            case "end":
              return _context8.stop();
          }
        }, _callee7, this, [[0, 22], [8, 16]]);
      }));
      function checkBackdoorSupport() {
        return _checkBackdoorSupport.apply(this, arguments);
      }
      return checkBackdoorSupport;
    }()
  }, {
    key: "getNTLevel",
    value: function () {
      var _getNTLevel = _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee8() {
        var _t7, _e5, _s7;
        return _regeneratorRuntime2().wrap(function _callee8$(_context9) {
          while (1) switch (_context9.prev = _context9.next) {
            case 0:
              _context9.prev = 0;
              _context9.next = 3;
              return this.bluetoothService.sendCommand(e.ChameleonCommand.MF1_NT_LEVEL_DETECT, [], 3e3);
            case 3:
              _t7 = _context9.sent;
              if (!(_t7 && _t7.success && _t7.data)) {
                _context9.next = 7;
                break;
              }
              _e5 = _t7.data[0], _s7 = {
                0: "weak",
                1: "static",
                2: "hard"
              }[_e5] || "weak";
              return _context9.abrupt("return", (console.log("[CardReader] NT\u7EA7\u522B: ".concat(_s7)), _s7));
            case 7:
              return _context9.abrupt("return", "weak");
            case 10:
              _context9.prev = 10;
              _context9.t0 = _context9["catch"](0);
              return _context9.abrupt("return", (console.error("[CardReader] NT级别检测失败:", _context9.t0), "weak"));
            case 13:
            case "end":
              return _context9.stop();
          }
        }, _callee8, this, [[0, 10]]);
      }));
      function getNTLevel() {
        return _getNTLevel.apply(this, arguments);
      }
      return getNTLevel;
    }()
  }, {
    key: "backdoorAttack",
    value: function () {
      var _backdoorAttack = _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee9(t, s) {
        var _r4, c, n, i, _t8, _r5, _i, _r6, _o3, _a4, _r7, l;
        return _regeneratorRuntime2().wrap(function _callee9$(_context10) {
          while (1) switch (_context10.prev = _context10.next) {
            case 0:
              console.log("[CardReader] 开始后门攻击...");
              _context10.prev = 1;
              s && s({
                message: "检测后门支持...",
                percentage: 5,
                details: [{
                  message: "正在检测后门",
                  success: !1
                }]
              });
              _context10.next = 5;
              return o.getMifareClassicTypeByHardware(this.bluetoothService);
            case 5:
              _r4 = _context10.sent;
              c = 16;
              "2k" === _r4 ? c = 32 : "4k" === _r4 ? c = 40 : "mini" === _r4 && (c = 5), s && s({
                message: "获取后门数据...",
                percentage: 15,
                details: [{
                  message: "正在获取后门数据",
                  success: !1
                }]
              });
              _context10.next = 10;
              return this.bluetoothService.sendCommand(e.ChameleonCommand.MF1_STATIC_NESTED_ACQUIRE, [c], 3e4);
            case 10:
              n = _context10.sent;
              if (!(!n || !n.success)) {
                _context10.next = 13;
                break;
              }
              throw new Error("后门数据获取失败");
            case 13:
              console.log("[CardReader] 后门数据获取成功,开始破解密钥...");
              i = {
                keyA: {},
                keyB: {}
              };
              _t8 = 0;
            case 16:
              if (!(_t8 < c)) {
                _context10.next = 43;
                break;
              }
              this.checkAbort(), s && s({
                message: "\u540E\u95E8\u653B\u51FB\u6247\u533A ".concat(_t8, "/").concat(c, "..."),
                percentage: 15 + _t8 / c * 70,
                current: _t8,
                total: c,
                details: [{
                  message: "\u6B63\u5728\u653B\u51FB\u6247\u533A ".concat(_t8),
                  success: !1
                }]
              });
              _r5 = [[163, 150, 239, 164, 226, 79], [163, 22, 103, 168, 206, 193], [81, 139, 51, 84, 231, 96], [115, 185, 131, 108, 241, 104]];
              _i = 0, _r6 = _r5;
            case 20:
              if (!(_i < _r6.length)) {
                _context10.next = 38;
                break;
              }
              _o3 = _r6[_i];
              _context10.prev = 22;
              _a4 = 4 * _t8;
              _context10.next = 26;
              return this.bluetoothService.sendCommand(e.ChameleonCommand.MF1_CHECK_KEY, [96, _a4].concat(_toConsumableArray2(_o3)), 1e3);
            case 26:
              _r7 = _context10.sent;
              if (!(_r7 && _r7.success)) {
                _context10.next = 30;
                break;
              }
              i.keyA[_t8] = Array.from(_o3), s && s({
                details: [{
                  message: "\u6247\u533A ".concat(_t8, " Key A \u7834\u89E3\u6210\u529F(\u540E\u95E8)"),
                  success: !0
                }]
              });
              return _context10.abrupt("break", 38);
            case 30:
              _context10.next = 35;
              break;
            case 32:
              _context10.prev = 32;
              _context10.t0 = _context10["catch"](22);
              return _context10.abrupt("continue", 35);
            case 35:
              _i++;
              _context10.next = 20;
              break;
            case 38:
              _context10.next = 40;
              return new Promise(function (e) {
                return setTimeout(e, 50);
              });
            case 40:
              _t8++;
              _context10.next = 16;
              break;
            case 43:
              s && s({
                message: "后门攻击完成",
                percentage: 100
              });
              l = Object.keys(i.keyA).length;
              return _context10.abrupt("return", (console.log("[CardReader] \u540E\u95E8\u653B\u51FB\u5B8C\u6210: ".concat(l, "/").concat(c, " \u6247\u533A")), _objectSpread2(_objectSpread2({}, t), {}, {
                type: "mifare_classic_".concat(_r4),
                cardType: _r4,
                attackMethod: "backdoor",
                recoveredKeys: i,
                crackedSectors: l,
                totalSectors: c,
                successRate: (l / c * 100).toFixed(1)
              })));
            case 48:
              _context10.prev = 48;
              _context10.t1 = _context10["catch"](1);
              throw console.error("[CardReader] 后门攻击失败:", _context10.t1), _context10.t1;
            case 51:
            case "end":
              return _context10.stop();
          }
        }, _callee9, this, [[1, 48], [22, 32]]);
      }));
      function backdoorAttack(_x12, _x13) {
        return _backdoorAttack.apply(this, arguments);
      }
      return backdoorAttack;
    }()
  }, {
    key: "smartKeyRecovery",
    value: function () {
      var _smartKeyRecovery = _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee10(e) {
        var t,
          s,
          _r8,
          c,
          n,
          i,
          l,
          d,
          h,
          _e6,
          _args11 = arguments;
        return _regeneratorRuntime2().wrap(function _callee10$(_context11) {
          while (1) switch (_context11.prev = _context11.next) {
            case 0:
              t = _args11.length > 1 && _args11[1] !== undefined ? _args11[1] : [];
              s = _args11.length > 2 ? _args11[2] : undefined;
              console.log("[CardReader] 开始智能密钥恢复...");
              _context11.prev = 3;
              this.isReading = !0, s && s({
                message: "初始化密钥恢复...",
                percentage: 0,
                phase: "init",
                details: []
              });
              _context11.next = 7;
              return this.bluetoothService.isReaderDeviceMode();
            case 7:
              _context11.t0 = _context11.sent;
              if (_context11.t0) {
                _context11.next = 12;
                break;
              }
              _context11.next = 11;
              return this.bluetoothService.setReaderDeviceMode(!0);
            case 11:
              console.log("[CardReader] 已切换到读卡模式");
            case 12:
              _context11.next = 14;
              return this.bluetoothService.scan14443aTag();
            case 14:
              _r8 = _context11.sent;
              if (!(!_r8 || !_r8.success)) {
                _context11.next = 17;
                break;
              }
              throw new Error("扫描卡片失败");
            case 17:
              console.log("[CardReader] 卡片已扫描");
              _context11.next = 20;
              return this.bluetoothService.detectMf1Support();
            case 20:
              if (_context11.sent) {
                _context11.next = 22;
                break;
              }
              throw new Error("不是 Mifare Classic 卡片");
            case 22:
              console.log("[CardReader] 确认为 Mifare Classic 卡片");
              _context11.next = 25;
              return o.getMifareClassicTypeByHardware(this.bluetoothService);
            case 25:
              c = _context11.sent;
              n = 16;
              "2k" === c ? n = 32 : "4k" === c ? n = 40 : "mini" === c && (n = 5), s && s({
                message: "\u8BC6\u522B\u5230".concat(c.toUpperCase(), "\u5361\u7247"),
                percentage: 5,
                details: [{
                  message: "\u5361\u7247\u7C7B\u578B: ".concat(c),
                  success: !0
                }]
              });
              i = {
                cardType: c,
                sectors: n,
                recoveredKeys: {
                  keyA: {},
                  keyB: {}
                },
                attackMethods: [],
                phases: []
              };
              s && s({
                message: "阶段1: 字典攻击...",
                percentage: 10,
                phase: "dictionary",
                details: [{
                  message: "开始字典攻击",
                  success: !1
                }]
              });
              _context11.next = 32;
              return this.dictionaryAttackPhase(n, t, function (e) {
                s && s({
                  message: "\u5B57\u5178\u653B\u51FB: ".concat(e.current, "/").concat(e.total),
                  percentage: 10 + e.current / e.total * 25,
                  phase: "dictionary",
                  details: e.details
                });
              });
            case 32:
              l = _context11.sent;
              i.recoveredKeys = this.mergeKeys(i.recoveredKeys, l.keys), i.attackMethods.push("dictionary"), i.phases.push({
                name: "dictionary",
                success: l.foundKeys > 0,
                keysFound: l.foundKeys
              }), console.log("[CardReader] \u5B57\u5178\u653B\u51FB\u627E\u5230 ".concat(l.foundKeys, " \u4E2A\u5BC6\u94A5"));
              if (!this.checkAllKeysFound(i.recoveredKeys, n)) {
                _context11.next = 36;
                break;
              }
              return _context11.abrupt("return", (s && s({
                message: "字典攻击成功,所有密钥已找到!",
                percentage: 100,
                phase: "completed"
              }), this.buildRecoveryResult(e, i)));
            case 36:
              s && s({
                message: "阶段2: 检测后门...",
                percentage: 40,
                phase: "backdoor_detection",
                details: [{
                  message: "正在检测后门",
                  success: !1
                }]
              });
              _context11.next = 39;
              return this.checkBackdoorSupport();
            case 39:
              d = _context11.sent;
              _context11.next = 42;
              return this.getNTLevel();
            case 42:
              h = _context11.sent;
              if (!(s && s({
                details: [{
                  message: "后门支持: " + (d ? "是" : "否"),
                  success: d
                }, {
                  message: "NT\u7EA7\u522B: ".concat(h),
                  success: !0
                }]
              }), d)) {
                _context11.next = 55;
                break;
              }
              s && s({
                message: "阶段3: 后门攻击...",
                percentage: 45,
                phase: "backdoor",
                details: [{
                  message: "使用后门攻击",
                  success: !1
                }]
              });
              _context11.prev = 45;
              _context11.next = 48;
              return this.backdoorAttackPhase(n, function (e) {
                s && s({
                  message: "\u540E\u95E8\u653B\u51FB: ".concat(e.current || 0, "/").concat(e.total || n),
                  percentage: 45 + (e.current || 0) / n * 40,
                  phase: "backdoor",
                  details: e.details
                });
              });
            case 48:
              _e6 = _context11.sent;
              i.recoveredKeys = this.mergeKeys(i.recoveredKeys, _e6.keys), i.attackMethods.push("backdoor"), i.phases.push({
                name: "backdoor",
                success: _e6.foundKeys > 0,
                keysFound: _e6.foundKeys
              }), console.log("[CardReader] \u540E\u95E8\u653B\u51FB\u627E\u5230 ".concat(_e6.foundKeys, " \u4E2A\u5BC6\u94A5"));
              _context11.next = 55;
              break;
            case 52:
              _context11.prev = 52;
              _context11.t1 = _context11["catch"](45);
              console.warn("[CardReader] 后门攻击失败:", _context11.t1.message), s && s({
                details: [{
                  message: "后门攻击失败",
                  error: !0
                }]
              });
            case 55:
              if (!this.checkAllKeysFound(i.recoveredKeys, n)) {
                _context11.next = 57;
                break;
              }
              return _context11.abrupt("return", (s && s({
                message: "密钥恢复成功!",
                percentage: 100,
                phase: "completed"
              }), this.buildRecoveryResult(e, i)));
            case 57:
              return _context11.abrupt("return", (this.hasAnyKnownKey(i.recoveredKeys) && !d && (s && s({
                message: "阶段4: Nested攻击...",
                percentage: 85,
                phase: "nested",
                details: [{
                  message: "\u4F7F\u7528Nested\u653B\u51FB(".concat(h, ")"),
                  success: !1
                }]
              }), s && s({
                details: [{
                  message: "Nested攻击需要额外的算法库支持",
                  error: !0
                }]
              })), s && s({
                message: "密钥恢复完成",
                percentage: 100,
                phase: "completed"
              }), this.buildRecoveryResult(e, i)));
            case 60:
              _context11.prev = 60;
              _context11.t2 = _context11["catch"](3);
              throw console.error("[CardReader] 智能密钥恢复失败:", _context11.t2), _context11.t2;
            case 63:
              _context11.prev = 63;
              this.isReading = !1;
              return _context11.finish(63);
            case 66:
            case "end":
              return _context11.stop();
          }
        }, _callee10, this, [[3, 60, 63, 66], [45, 52]]);
      }));
      function smartKeyRecovery(_x14) {
        return _smartKeyRecovery.apply(this, arguments);
      }
      return smartKeyRecovery;
    }()
  }, {
    key: "dictionaryAttackPhase",
    value: function () {
      var _dictionaryAttackPhase = _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee11(t, s, a) {
        var r, o, c, i, _iterator2, _step2, _t9, _s8, _c, _e7, _iterator3, _step3, _t10, _s9, _c2, _e8;
        return _regeneratorRuntime2().wrap(function _callee11$(_context12) {
          while (1) switch (_context12.prev = _context12.next) {
            case 0:
              r = {
                keyA: {},
                keyB: {}
              };
              o = 0;
              c = [[255, 255, 255, 255, 255, 255], [160, 161, 162, 163, 164, 165], [211, 247, 211, 247, 211, 247], [0, 0, 0, 0, 0, 0], [176, 177, 178, 179, 180, 181], [170, 187, 204, 221, 238, 255], [77, 58, 153, 195, 81, 221], [26, 152, 44, 126, 69, 154], [163, 150, 239, 164, 226, 79], [163, 22, 103, 168, 206, 193], [81, 139, 51, 84, 231, 96], [115, 185, 131, 108, 241, 104]].concat(_toConsumableArray2(s.map(function (e) {
                var t = e.replace(/\s/g, ""),
                  s = [];
                for (var _a5 = 0; _a5 < t.length; _a5 += 2) s.push(parseInt(t.substr(_a5, 2), 16));
                return s;
              })));
              i = 0;
            case 4:
              if (!(i < t)) {
                _context12.next = 71;
                break;
              }
              this.checkAbort(), a && a({
                current: i,
                total: t,
                details: [{
                  message: "\u68C0\u67E5\u6247\u533A ".concat(i),
                  success: !1
                }]
              });
              _iterator2 = _createForOfIteratorHelper2(c);
              _context12.prev = 7;
              _iterator2.s();
            case 9:
              if ((_step2 = _iterator2.n()).done) {
                _context12.next = 28;
                break;
              }
              _t9 = _step2.value;
              _context12.prev = 11;
              _s8 = 4 * i;
              _context12.next = 15;
              return this.bluetoothService.sendCommand(e.ChameleonCommand.MF1_CHECK_KEY, [96, _s8].concat(_toConsumableArray2(_t9)), 800);
            case 15:
              _c = _context12.sent;
              if (!(_c && _c.success)) {
                _context12.next = 21;
                break;
              }
              r.keyA[i] = Array.from(_t9), o++;
              _e7 = _t9.map(function (e) {
                return e.toString(16).padStart(2, "0");
              }).join("").toUpperCase();
              a && a({
                details: [{
                  message: "\u6247\u533A ".concat(i, " Key A: ").concat(_e7),
                  success: !0
                }]
              });
              return _context12.abrupt("break", 28);
            case 21:
              _context12.next = 26;
              break;
            case 23:
              _context12.prev = 23;
              _context12.t0 = _context12["catch"](11);
              return _context12.abrupt("continue", 26);
            case 26:
              _context12.next = 9;
              break;
            case 28:
              _context12.next = 33;
              break;
            case 30:
              _context12.prev = 30;
              _context12.t1 = _context12["catch"](7);
              _iterator2.e(_context12.t1);
            case 33:
              _context12.prev = 33;
              _iterator2.f();
              return _context12.finish(33);
            case 36:
              _iterator3 = _createForOfIteratorHelper2(c);
              _context12.prev = 37;
              _iterator3.s();
            case 39:
              if ((_step3 = _iterator3.n()).done) {
                _context12.next = 58;
                break;
              }
              _t10 = _step3.value;
              _context12.prev = 41;
              _s9 = 4 * i;
              _context12.next = 45;
              return this.bluetoothService.sendCommand(e.ChameleonCommand.MF1_CHECK_KEY, [97, _s9].concat(_toConsumableArray2(_t10)), 800);
            case 45:
              _c2 = _context12.sent;
              if (!(_c2 && _c2.success)) {
                _context12.next = 51;
                break;
              }
              r.keyB[i] = Array.from(_t10), o++;
              _e8 = _t10.map(function (e) {
                return e.toString(16).padStart(2, "0");
              }).join("").toUpperCase();
              a && a({
                details: [{
                  message: "\u6247\u533A ".concat(i, " Key B: ").concat(_e8),
                  success: !0
                }]
              });
              return _context12.abrupt("break", 58);
            case 51:
              _context12.next = 56;
              break;
            case 53:
              _context12.prev = 53;
              _context12.t2 = _context12["catch"](41);
              return _context12.abrupt("continue", 56);
            case 56:
              _context12.next = 39;
              break;
            case 58:
              _context12.next = 63;
              break;
            case 60:
              _context12.prev = 60;
              _context12.t3 = _context12["catch"](37);
              _iterator3.e(_context12.t3);
            case 63:
              _context12.prev = 63;
              _iterator3.f();
              return _context12.finish(63);
            case 66:
              _context12.next = 68;
              return new Promise(function (e) {
                return setTimeout(e, 30);
              });
            case 68:
              i++;
              _context12.next = 4;
              break;
            case 71:
              return _context12.abrupt("return", {
                keys: r,
                foundKeys: o
              });
            case 72:
            case "end":
              return _context12.stop();
          }
        }, _callee11, this, [[7, 30, 33, 36], [11, 23], [37, 60, 63, 66], [41, 53]]);
      }));
      function dictionaryAttackPhase(_x15, _x16, _x17) {
        return _dictionaryAttackPhase.apply(this, arguments);
      }
      return dictionaryAttackPhase;
    }()
  }, {
    key: "backdoorAttackPhase",
    value: function () {
      var _backdoorAttackPhase = _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee12(t, s) {
        var a, r, o, n, _iterator4, _step4, _t11, _o4, c, _e9;
        return _regeneratorRuntime2().wrap(function _callee12$(_context13) {
          while (1) switch (_context13.prev = _context13.next) {
            case 0:
              a = {
                keyA: {},
                keyB: {}
              };
              r = 0;
              o = [[163, 150, 239, 164, 226, 79], [163, 22, 103, 168, 206, 193], [81, 139, 51, 84, 231, 96], [115, 185, 131, 108, 241, 104]];
              n = 0;
            case 4:
              if (!(n < t)) {
                _context13.next = 41;
                break;
              }
              this.checkAbort(), s && s({
                current: n,
                total: t,
                details: [{
                  message: "\u540E\u95E8\u653B\u51FB\u6247\u533A ".concat(n),
                  success: !1
                }]
              });
              _iterator4 = _createForOfIteratorHelper2(o);
              _context13.prev = 7;
              _iterator4.s();
            case 9:
              if ((_step4 = _iterator4.n()).done) {
                _context13.next = 28;
                break;
              }
              _t11 = _step4.value;
              _context13.prev = 11;
              _o4 = 4 * n;
              _context13.next = 15;
              return this.bluetoothService.sendCommand(e.ChameleonCommand.MF1_CHECK_KEY, [96, _o4].concat(_toConsumableArray2(_t11)), 1e3);
            case 15:
              c = _context13.sent;
              if (!(c && c.success)) {
                _context13.next = 21;
                break;
              }
              a.keyA[n] = Array.from(_t11), a.keyB[n] = Array.from(_t11), r += 2;
              _e9 = _t11.map(function (e) {
                return e.toString(16).padStart(2, "0");
              }).join("").toUpperCase();
              s && s({
                details: [{
                  message: "\u6247\u533A ".concat(n, " \u540E\u95E8\u5BC6\u94A5: ").concat(_e9),
                  success: !0
                }]
              });
              return _context13.abrupt("break", 28);
            case 21:
              _context13.next = 26;
              break;
            case 23:
              _context13.prev = 23;
              _context13.t0 = _context13["catch"](11);
              return _context13.abrupt("continue", 26);
            case 26:
              _context13.next = 9;
              break;
            case 28:
              _context13.next = 33;
              break;
            case 30:
              _context13.prev = 30;
              _context13.t1 = _context13["catch"](7);
              _iterator4.e(_context13.t1);
            case 33:
              _context13.prev = 33;
              _iterator4.f();
              return _context13.finish(33);
            case 36:
              _context13.next = 38;
              return new Promise(function (e) {
                return setTimeout(e, 50);
              });
            case 38:
              n++;
              _context13.next = 4;
              break;
            case 41:
              return _context13.abrupt("return", {
                keys: a,
                foundKeys: r
              });
            case 42:
            case "end":
              return _context13.stop();
          }
        }, _callee12, this, [[7, 30, 33, 36], [11, 23]]);
      }));
      function backdoorAttackPhase(_x18, _x19) {
        return _backdoorAttackPhase.apply(this, arguments);
      }
      return backdoorAttackPhase;
    }()
  }, {
    key: "mergeKeys",
    value: function mergeKeys(e, t) {
      var s = _objectSpread2({}, e);
      return Object.keys(t.keyA || {}).forEach(function (e) {
        s.keyA[e] || (s.keyA[e] = t.keyA[e]);
      }), Object.keys(t.keyB || {}).forEach(function (e) {
        s.keyB[e] || (s.keyB[e] = t.keyB[e]);
      }), s;
    }
  }, {
    key: "checkAllKeysFound",
    value: function checkAllKeysFound(e, t) {
      for (var _s10 = 0; _s10 < t; _s10++) if (!e.keyA[_s10] || !e.keyB[_s10]) return !1;
      return !0;
    }
  }, {
    key: "hasAnyKnownKey",
    value: function hasAnyKnownKey(e) {
      return Object.keys(e.keyA).length > 0 || Object.keys(e.keyB).length > 0;
    }
  }, {
    key: "buildRecoveryResult",
    value: function buildRecoveryResult(e, t) {
      var s = 2 * t.sectors,
        a = Object.keys(t.recoveredKeys.keyA).length + Object.keys(t.recoveredKeys.keyB).length,
        r = (a / s * 100).toFixed(1);
      return _objectSpread2(_objectSpread2({}, e), {}, {
        type: "mifare_classic_".concat(t.cardType),
        cardType: t.cardType,
        recoveredKeys: t.recoveredKeys,
        attackMethods: t.attackMethods,
        phases: t.phases,
        totalSectors: t.sectors,
        totalKeys: s,
        foundKeys: a,
        successRate: r,
        isComplete: a === s,
        hasErrors: a < s,
        readTime: new Date().toISOString()
      });
    }
  }, {
    key: "dictionaryAttack",
    value: function () {
      var _dictionaryAttack = _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee13(t) {
        var s,
          a,
          c,
          n,
          i,
          l,
          d,
          h,
          u,
          m,
          _t12,
          _s11,
          _o5,
          _c3,
          _iterator5,
          _step5,
          _n,
          _c4,
          _c5,
          _a7,
          _o6,
          _t13,
          _r9,
          _e10,
          y,
          g,
          p,
          _args14 = arguments;
        return _regeneratorRuntime2().wrap(function _callee13$(_context14) {
          while (1) switch (_context14.prev = _context14.next) {
            case 0:
              s = _args14.length > 1 && _args14[1] !== undefined ? _args14[1] : [];
              a = _args14.length > 2 ? _args14[2] : undefined;
              console.log("[CardReader] 开始密钥字典攻击...");
              _context14.prev = 3;
              this.isReading = !0;
              _context14.next = 7;
              return o.getMifareClassicTypeByHardware(this.bluetoothService);
            case 7:
              c = _context14.sent;
              n = 16;
              "2k" === c ? n = 32 : "4k" === c ? n = 40 : "mini" === c && (n = 5);
              i = {
                keyA: {},
                keyB: {}
              }, l = {
                sectors: []
              }, d = {
                current: 0,
                total: n,
                message: "\u6B63\u5728\u653B\u51FB".concat(c.toUpperCase(), "\u5361\u7247..."),
                details: []
              };
              a && a(d);
              h = [[255, 255, 255, 255, 255, 255], [160, 161, 162, 163, 164, 165], [211, 247, 211, 247, 211, 247], [75, 121, 27, 234, 123, 204], [92, 143, 249, 153, 13, 162], [208, 26, 254, 235, 137, 10], [117, 204, 181, 156, 155, 237], [0, 0, 0, 0, 0, 0], [176, 177, 178, 179, 180, 181], [170, 187, 204, 221, 238, 255], [77, 58, 153, 195, 81, 221], [26, 152, 44, 126, 69, 154], [113, 76, 92, 136, 110, 151], [88, 126, 229, 249, 53, 15], [160, 71, 140, 195, 144, 145], [83, 60, 182, 199, 35, 246], [143, 208, 164, 242, 86, 233], [26, 43, 60, 77, 94, 111], [18, 52, 86, 120, 154, 188], [1, 2, 3, 4, 5, 6], [18, 52, 86, 171, 205, 239], [171, 205, 239, 18, 52, 86], [72, 73, 68, 32, 73, 83], [32, 71, 82, 69, 65, 84], [100, 113, 165, 239, 45, 26], [239, 18, 50, 171, 24, 160], [183, 191, 12, 19, 6, 110]], u = s.map(function (e) {
                var t = e.replace(/\s/g, ""),
                  s = [];
                for (var _a6 = 0; _a6 < t.length; _a6 += 2) s.push(parseInt(t.substr(_a6, 2), 16));
                return s;
              }), m = [].concat(h, _toConsumableArray2(u));
              console.log("[CardReader] \u603B\u5171\u4F7F\u7528 ".concat(m.length, " \u4E2A\u5BC6\u94A5\u8FDB\u884C\u653B\u51FB")), d.details.push({
                message: "\u4F7F\u7528 ".concat(m.length, " \u4E2A\u5BC6\u94A5"),
                success: !0
              }), a && a(d);
              _t12 = 0;
            case 15:
              if (!(_t12 < n)) {
                _context14.next = 85;
                break;
              }
              this.checkAbort(), d.current = _t12, d.message = "\u6B63\u5728\u653B\u51FB\u6247\u533A ".concat(_t12, "/").concat(n, "..."), a && a(d);
              _s11 = {
                sector: _t12,
                blocks: [],
                readable: !1,
                keyA: null,
                keyB: null
              };
              _o5 = !1, _c3 = !1;
              _iterator5 = _createForOfIteratorHelper2(m);
              _context14.prev = 20;
              _iterator5.s();
            case 22:
              if ((_step5 = _iterator5.n()).done) {
                _context14.next = 70;
                break;
              }
              _n = _step5.value;
              if (!(this.checkAbort(), !_o5)) {
                _context14.next = 53;
                break;
              }
              _context14.prev = 25;
              _c4 = 4 * _t12;
              _context14.next = 29;
              return this.bluetoothService.sendCommand(e.ChameleonCommand.MF1_CHECK_KEY, [96, _c4].concat(_toConsumableArray2(_n)), 1e3);
            case 29:
              if (!_context14.sent.success) {
                _context14.next = 49;
                break;
              }
              i.keyA[_t12] = Array.from(_n), _s11.keyA = Array.from(_n), _o5 = !0;
              _c5 = _n.map(function (e) {
                return e.toString(16).padStart(2, "0");
              }).join("").toUpperCase();
              console.log("[CardReader] \u6247\u533A ".concat(_t12, " Key A \u7834\u89E3\u6210\u529F: ").concat(_c5)), d.details.push({
                message: "\u6247\u533A ".concat(_t12, " Key A: ").concat(_c5),
                success: !0
              }), a && a(d), _s11.readable = !0;
              _a7 = 0;
            case 34:
              if (!(_a7 < 4)) {
                _context14.next = 49;
                break;
              }
              _o6 = 4 * _t12 + _a7;
              _context14.prev = 36;
              _context14.next = 39;
              return this.bluetoothService.sendCommand(e.ChameleonCommand.MF1_READ_BLOCK, [96, _o6].concat(_toConsumableArray2(_n)), 1e3);
            case 39:
              _t13 = _context14.sent;
              _t13.success && _t13.data && _t13.data.length >= 16 ? _s11.blocks.push(Array.from(_t13.data.slice(0, 16))) : _s11.blocks.push(new Array(16).fill(0));
              _context14.next = 46;
              break;
            case 43:
              _context14.prev = 43;
              _context14.t0 = _context14["catch"](36);
              _s11.blocks.push(new Array(16).fill(0));
            case 46:
              _a7++;
              _context14.next = 34;
              break;
            case 49:
              _context14.next = 53;
              break;
            case 51:
              _context14.prev = 51;
              _context14.t1 = _context14["catch"](25);
            case 53:
              if (_c3) {
                _context14.next = 66;
                break;
              }
              _context14.prev = 54;
              _r9 = 4 * _t12;
              _context14.next = 58;
              return this.bluetoothService.sendCommand(e.ChameleonCommand.MF1_CHECK_KEY, [97, _r9].concat(_toConsumableArray2(_n)), 1e3);
            case 58:
              if (!_context14.sent.success) {
                _context14.next = 62;
                break;
              }
              i.keyB[_t12] = Array.from(_n), _s11.keyB = Array.from(_n), _c3 = !0;
              _e10 = _n.map(function (e) {
                return e.toString(16).padStart(2, "0");
              }).join("").toUpperCase();
              console.log("[CardReader] \u6247\u533A ".concat(_t12, " Key B \u7834\u89E3\u6210\u529F: ").concat(_e10)), d.details.push({
                message: "\u6247\u533A ".concat(_t12, " Key B: ").concat(_e10),
                success: !0
              }), a && a(d);
            case 62:
              _context14.next = 66;
              break;
            case 64:
              _context14.prev = 64;
              _context14.t2 = _context14["catch"](54);
            case 66:
              if (!(_o5 && _c3)) {
                _context14.next = 68;
                break;
              }
              return _context14.abrupt("break", 70);
            case 68:
              _context14.next = 22;
              break;
            case 70:
              _context14.next = 75;
              break;
            case 72:
              _context14.prev = 72;
              _context14.t3 = _context14["catch"](20);
              _iterator5.e(_context14.t3);
            case 75:
              _context14.prev = 75;
              _iterator5.f();
              return _context14.finish(75);
            case 78:
              _s11.readable || (_s11.blocks = Array.from({
                length: 4
              }, function () {
                return new Array(16).fill(0);
              }), d.details.push({
                message: "\u6247\u533A ".concat(_t12, " \u5BC6\u94A5\u672A\u627E\u5230"),
                error: !0
              }));
              l.sectors.push(_s11);
              _context14.next = 82;
              return new Promise(function (e) {
                return setTimeout(e, 50);
              });
            case 82:
              _t12++;
              _context14.next = 15;
              break;
            case 85:
              d.current = d.total, d.message = "密钥字典攻击完成", d.percentage = 100, a && a(d);
              y = n, g = l.sectors.filter(function (e) {
                return e.readable;
              }).length, p = (g / y * 100).toFixed(1);
              return _context14.abrupt("return", (console.log("[CardReader] \u653B\u51FB\u5B8C\u6210: ".concat(g, "/").concat(y, " \u6247\u533A\u7834\u89E3\u6210\u529F (").concat(p, "%)")), _objectSpread2(_objectSpread2({}, t), {}, {
                type: "mifare_classic_".concat(c),
                cardType: c,
                subtype: c,
                recoveredKeys: i,
                sectors: l.sectors,
                crackedSectors: g,
                totalSectors: y,
                successRate: p,
                isComplete: g === y,
                hasErrors: g < y,
                readTime: new Date().toISOString()
              })));
            case 90:
              _context14.prev = 90;
              _context14.t4 = _context14["catch"](3);
              throw console.error("[CardReader] 密钥恢复失败", _context14.t4), _context14.t4;
            case 93:
              _context14.prev = 93;
              this.isReading = !1;
              return _context14.finish(93);
            case 96:
            case "end":
              return _context14.stop();
          }
        }, _callee13, this, [[3, 90, 93, 96], [20, 72, 75, 78], [25, 51], [36, 43], [54, 64]]);
      }));
      function dictionaryAttack(_x20) {
        return _dictionaryAttack.apply(this, arguments);
      }
      return dictionaryAttack;
    }()
  }, {
    key: "performNestedAttack",
    value: function () {
      var _performNestedAttack = _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee14(t) {
        var _s12;
        return _regeneratorRuntime2().wrap(function _callee14$(_context15) {
          while (1) switch (_context15.prev = _context15.next) {
            case 0:
              console.log("[CardReader] \u5BF9\u6247\u533A ".concat(t, " \u6267\u884C\u5D4C\u5957\u653B\u51FB..."));
              _context15.prev = 1;
              _context15.next = 4;
              return this.bluetoothService.sendCommand(e.ChameleonCommand.MF_NESTED_ATTACK, {
                sector: t,
                iterations: 100,
                timeout: 3e4
              });
            case 4:
              _s12 = _context15.sent;
              return _context15.abrupt("return", _s12.success && _s12.keys ? {
                keyA: _s12.keys.keyA,
                keyB: _s12.keys.keyB
              } : {});
            case 8:
              _context15.prev = 8;
              _context15.t0 = _context15["catch"](1);
              return _context15.abrupt("return", (console.error("[CardReader] \u6247\u533A ".concat(t, " \u5D4C\u5957\u653B\u51FB\u5931\u8D25"), _context15.t0), {}));
            case 11:
            case "end":
              return _context15.stop();
          }
        }, _callee14, this, [[1, 8]]);
      }));
      function performNestedAttack(_x21) {
        return _performNestedAttack.apply(this, arguments);
      }
      return performNestedAttack;
    }()
  }, {
    key: "advancedHFDetection",
    value: function () {
      var _advancedHFDetection = _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee15(t) {
        var _this4 = this;
        var _a8, _r10, _o7, _loop2, _e11;
        return _regeneratorRuntime2().wrap(function _callee15$(_context17) {
          while (1) switch (_context17.prev = _context17.next) {
            case 0:
              console.log("[CardReader] 开始高级HF卡片检测...");
              _context17.prev = 1;
              this.isReading = !0;
              _a8 = [], _r10 = [{
                name: "ISO14443A",
                command: e.ChameleonCommand.HF_14A_SCAN
              }, {
                name: "ISO14443B",
                command: e.ChameleonCommand.HF_14B_SCAN
              }, {
                name: "ISO15693",
                command: e.ChameleonCommand.HF_15693_SCAN
              }], _o7 = {
                current: 0,
                total: _r10.length,
                message: "检测协议..."
              };
              _loop2 = /*#__PURE__*/_regeneratorRuntime2().mark(function _loop2() {
                var c, _e12;
                return _regeneratorRuntime2().wrap(function _loop2$(_context16) {
                  while (1) switch (_context16.prev = _context16.next) {
                    case 0:
                      _this4.checkAbort();
                      c = _r10[_e11];
                      _o7.current = _e11, _o7.message = "\u6B63\u5728\u68C0\u6D4B ".concat(c.name, " \u534F\u8BAE..."), t && t(_o7);
                      _context16.prev = 3;
                      _context16.next = 6;
                      return _this4.bluetoothService.sendCommand(c.command, {
                        timeout: 5e3,
                        continuous: !1
                      });
                    case 6:
                      _e12 = _context16.sent;
                      _e12.success && _e12.cards && _e12.cards.forEach(function (e) {
                        e.protocol = c.name, e.detectedAt = Date.now(), _a8.push(e);
                      });
                      _context16.next = 13;
                      break;
                    case 10:
                      _context16.prev = 10;
                      _context16.t0 = _context16["catch"](3);
                      console.warn("[CardReader] ".concat(c.name, " \u68C0\u6D4B\u5931\u8D25"), _context16.t0);
                    case 13:
                      _context16.next = 15;
                      return new Promise(function (e) {
                        return setTimeout(e, 200);
                      });
                    case 15:
                    case "end":
                      return _context16.stop();
                  }
                }, _loop2, null, [[3, 10]]);
              });
              _e11 = 0;
            case 6:
              if (!(_e11 < _r10.length)) {
                _context17.next = 11;
                break;
              }
              return _context17.delegateYield(_loop2(), "t0", 8);
            case 8:
              _e11++;
              _context17.next = 6;
              break;
            case 11:
              return _context17.abrupt("return", (_o7.current = _o7.total, _o7.message = "\u68C0\u6D4B\u5B8C\u6210\uFF0C\u53D1\u73B0 ".concat(_a8.length, " \u5F20\u5361\u7247"), t && t(_o7), _a8));
            case 14:
              _context17.prev = 14;
              _context17.t1 = _context17["catch"](1);
              throw console.error("[CardReader] 高级HF检测失败", _context17.t1), _context17.t1;
            case 17:
              _context17.prev = 17;
              this.isReading = !1;
              return _context17.finish(17);
            case 20:
            case "end":
              return _context17.stop();
          }
        }, _callee15, this, [[1, 14, 17, 20]]);
      }));
      function advancedHFDetection(_x22) {
        return _advancedHFDetection.apply(this, arguments);
      }
      return advancedHFDetection;
    }()
  }, {
    key: "advancedLFDetection",
    value: function () {
      var _advancedLFDetection = _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee16(t) {
        var _a9, _r11, _o8, c, _i2, _r12, n, _iterator6, _step6, _r13, _t14;
        return _regeneratorRuntime2().wrap(function _callee16$(_context18) {
          while (1) switch (_context18.prev = _context18.next) {
            case 0:
              console.log("[CardReader] 开始高级LF卡片检测...");
              _context18.prev = 1;
              this.isReading = !0;
              _a9 = [], _r11 = [125, 134], _o8 = ["EM410X", "T55XX", "HITAG"], c = {
                current: 0,
                total: _r11.length * _o8.length,
                message: "检测低频卡片..."
              };
              _i2 = 0, _r12 = _r11;
            case 5:
              if (!(_i2 < _r12.length)) {
                _context18.next = 38;
                break;
              }
              n = _r12[_i2];
              _iterator6 = _createForOfIteratorHelper2(_o8);
              _context18.prev = 8;
              _iterator6.s();
            case 10:
              if ((_step6 = _iterator6.n()).done) {
                _context18.next = 27;
                break;
              }
              _r13 = _step6.value;
              this.checkAbort(), c.current++, c.message = "\u6B63\u5728\u68C0\u6D4B ".concat(n, "kHz ").concat(_r13, " \u534F\u8BAE..."), t && t(c);
              _context18.prev = 13;
              _context18.next = 16;
              return this.bluetoothService.sendCommand(e.ChameleonCommand.LF_SEARCH, {
                frequency: n,
                protocol: _r13,
                timeout: 3e3
              });
            case 16:
              _t14 = _context18.sent;
              _t14.success && _t14.card && (_t14.card.frequency = n, _t14.card.protocol = _r13, _t14.card.detectedAt = Date.now(), _a9.push(_t14.card));
              _context18.next = 23;
              break;
            case 20:
              _context18.prev = 20;
              _context18.t0 = _context18["catch"](13);
              console.warn("[CardReader] ".concat(n, "kHz ").concat(_r13, " \u68C0\u6D4B\u5931\u8D25"), _context18.t0);
            case 23:
              _context18.next = 25;
              return new Promise(function (e) {
                return setTimeout(e, 100);
              });
            case 25:
              _context18.next = 10;
              break;
            case 27:
              _context18.next = 32;
              break;
            case 29:
              _context18.prev = 29;
              _context18.t1 = _context18["catch"](8);
              _iterator6.e(_context18.t1);
            case 32:
              _context18.prev = 32;
              _iterator6.f();
              return _context18.finish(32);
            case 35:
              _i2++;
              _context18.next = 5;
              break;
            case 38:
              return _context18.abrupt("return", (c.current = c.total, c.message = "\u68C0\u6D4B\u5B8C\u6210\uFF0C\u53D1\u73B0 ".concat(_a9.length, " \u5F20\u5361\u7247"), t && t(c), _a9));
            case 41:
              _context18.prev = 41;
              _context18.t2 = _context18["catch"](1);
              throw console.error("[CardReader] 高级LF检测失败", _context18.t2), _context18.t2;
            case 44:
              _context18.prev = 44;
              this.isReading = !1;
              return _context18.finish(44);
            case 47:
            case "end":
              return _context18.stop();
          }
        }, _callee16, this, [[1, 41, 44, 47], [8, 29, 32, 35], [13, 20]]);
      }));
      function advancedLFDetection(_x23) {
        return _advancedLFDetection.apply(this, arguments);
      }
      return advancedLFDetection;
    }()
  }, {
    key: "validateDataIntegrity",
    value: function validateDataIntegrity(e) {
      var t, s, a, o;
      var c = [],
        n = [];
      if ("mifare_classic" === e.type) {
        var _a10 = "1k" === e.subtype ? 16 : 40;
        (!e.sectors || e.sectors.length < _a10) && c.push("\u7F3A\u5C11\u6247\u533A\u6570\u636E\uFF0C\u671F\u671B ".concat(_a10, " \u4E2A\u6247\u533A\uFF0C\u5B9E\u9645 ").concat((null == (t = e.sectors) ? void 0 : t.length) || 0, " \u4E2A")), null == (s = e.sectors) || s.forEach(function (e, t) {
          e.accessBits || n.push("\u6247\u533A ".concat(t, " \u7F3A\u5C11\u8BBF\u95EE\u6743\u9650\u4FE1\u606F")), e.keyA || e.keyB || n.push("\u6247\u533A ".concat(t, " \u7F3A\u5C11\u5BC6\u94A5\u4FE1\u606F"));
        });
      } else if ("mifare_ultralight" === e.type || e.type.includes("ntag")) {
        var _t15 = (r[null == (a = e.subtype) ? void 0 : a.toUpperCase()] || r.MIFARE_ULTRALIGHT).pages;
        if ((!e.pages || e.pages.length < _t15) && c.push("\u7F3A\u5C11\u9875\u9762\u6570\u636E\uFF0C\u671F\u671B ".concat(_t15, " \u9875\uFF0C\u5B9E\u9645 ").concat((null == (o = e.pages) ? void 0 : o.length) || 0, " \u9875")), e.pages && e.pages.length > 3) {
          var _t16 = e.pages[3];
          _t16 && !_t16.every(function (e) {
            return 0 === e;
          }) || n.push("配置页面可能为空或未正确读取");
        }
      }
      return {
        isComplete: 0 === c.length,
        hasWarnings: n.length > 0,
        issues: c,
        warnings: n,
        score: Math.max(0, 100 - 30 * c.length - 10 * n.length)
      };
    }
  }]);
  return _class2;
}(); 
 			}); 
		define("utils/card-save.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";

var _toConsumableArray2 = require("../@babel/runtime/helpers/toConsumableArray");
var _objectSpread2 = require("../@babel/runtime/helpers/objectSpread2");
var _createForOfIteratorHelper2 = require("../@babel/runtime/helpers/createForOfIteratorHelper");
require("../@babel/runtime/helpers/Arrayincludes");
var _defineProperty2 = require("../@babel/runtime/helpers/defineProperty");
var _classCallCheck2 = require("../@babel/runtime/helpers/classCallCheck");
var _createClass2 = require("../@babel/runtime/helpers/createClass");
var t = require("./chameleon-protocol.js");
var a = /*#__PURE__*/function () {
  function a() {
    var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
    _classCallCheck2(this, a);
    this.ultralightSignature = t.ultralightSignature || new Uint8Array(0), this.ultralightVersion = t.ultralightVersion || new Uint8Array(0);
  }
  _createClass2(a, [{
    key: "toObject",
    value: function toObject() {
      var t = {};
      return this.ultralightSignature.length > 0 && (t.ultralightSignature = Array.from(this.ultralightSignature)), this.ultralightVersion.length > 0 && (t.ultralightVersion = Array.from(this.ultralightVersion)), t;
    }
  }], [{
    key: "fromObject",
    value: function fromObject(t) {
      return new a({
        ultralightSignature: t.ultralightSignature ? new Uint8Array(t.ultralightSignature) : new Uint8Array(0),
        ultralightVersion: t.ultralightVersion ? new Uint8Array(t.ultralightVersion) : new Uint8Array(0)
      });
    }
  }]);
  return a;
}();
var e = /*#__PURE__*/function () {
  function e() {
    var _e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
    _classCallCheck2(this, e);
    this.id = _e.id || this.generateId(), this.uid = _e.uid || "", this.name = _e.name || "", this.tag = _e.tag || t.TagType.UNKNOWN, this.sak = _e.sak || 0, this.atqa = _e.atqa || new Uint8Array(0), this.ats = _e.ats || new Uint8Array(0), this.data = _e.data || [], this.extraData = _e.extraData || new a(), this.color = _e.color || "#FF5722", this.createdAt = _e.createdAt || new Date().toISOString(), this.modifiedAt = _e.modifiedAt || new Date().toISOString();
  }
  _createClass2(e, [{
    key: "generateId",
    value: function generateId() {
      return "card_" + Date.now() + "_" + Math.random().toString(36).substring(2, 11);
    }
  }, {
    key: "toJson",
    value: function toJson() {
      return JSON.stringify(this.toObject(), null, 2);
    }
  }, {
    key: "toObject",
    value: function toObject() {
      return {
        id: this.id,
        uid: this.uid,
        name: this.name,
        tag: this.tag,
        sak: this.sak,
        atqa: Array.from(this.atqa),
        ats: Array.from(this.ats),
        data: this.data.map(function (t) {
          return Array.from(t);
        }),
        extraData: this.extraData.toObject(),
        color: this.color,
        createdAt: this.createdAt,
        modifiedAt: this.modifiedAt
      };
    }
  }, {
    key: "touch",
    value: function touch() {
      this.modifiedAt = new Date().toISOString();
    }
  }, {
    key: "getTypeString",
    value: function getTypeString() {
      var _t$TagType$UNKNOWN$t$;
      return (_t$TagType$UNKNOWN$t$ = {}, _defineProperty2(_t$TagType$UNKNOWN$t$, t.TagType.UNKNOWN, "未知"), _defineProperty2(_t$TagType$UNKNOWN$t$, t.TagType.EM410X, "EM410X"), _defineProperty2(_t$TagType$UNKNOWN$t$, t.TagType.MIFARE_Mini, "Mifare Mini"), _defineProperty2(_t$TagType$UNKNOWN$t$, t.TagType.MIFARE_1024, "Mifare Classic 1K"), _defineProperty2(_t$TagType$UNKNOWN$t$, t.TagType.MIFARE_2048, "Mifare Classic 2K"), _defineProperty2(_t$TagType$UNKNOWN$t$, t.TagType.MIFARE_4096, "Mifare Classic 4K"), _defineProperty2(_t$TagType$UNKNOWN$t$, t.TagType.NTAG_213, "NTAG213"), _defineProperty2(_t$TagType$UNKNOWN$t$, t.TagType.NTAG_215, "NTAG215"), _defineProperty2(_t$TagType$UNKNOWN$t$, t.TagType.NTAG_216, "NTAG216"), _t$TagType$UNKNOWN$t$)[this.tag] || "未知类型";
    }
  }, {
    key: "getFrequency",
    value: function getFrequency() {
      var _require = require("./chameleon-protocol.js"),
        a = _require.TagFrequency;
      return this.tag === t.TagType.EM410X ? a.LF : a.HF;
    }
  }, {
    key: "isMifareClassic",
    value: function isMifareClassic() {
      return [t.TagType.MIFARE_Mini, t.TagType.MIFARE_1024, t.TagType.MIFARE_2048, t.TagType.MIFARE_4096].includes(this.tag);
    }
  }, {
    key: "isMifareUltralight",
    value: function isMifareUltralight() {
      return [t.TagType.NTAG_213, t.TagType.NTAG_215, t.TagType.NTAG_216].includes(this.tag);
    }
  }, {
    key: "getIcon",
    value: function getIcon() {
      return 1 === this.getFrequency() ? "wifi" : "credit-card";
    }
  }, {
    key: "getDescription",
    value: function getDescription() {
      var t = this.getTypeString();
      return this.uid && (t += " \u2022 UID: ".concat(this.uid)), t;
    }
  }, {
    key: "validate",
    value: function validate() {
      var a = [];
      return this.name.trim() || a.push("卡片名称不能为空"), this.uid.trim() || a.push("UID不能为空"), this.tag === t.TagType.UNKNOWN && a.push("必须指定卡片类型"), this.uid && !/^[0-9A-Fa-f\s]+$/.test(this.uid) && a.push("UID格式无效，只能包含十六进制字符和空格"), {
        isValid: 0 === a.length,
        errors: a
      };
    }
  }, {
    key: "clone",
    value: function clone() {
      var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;
      var a = e.fromObject(this.toObject());
      return a.id = a.generateId(), a.name = t || "".concat(this.name, " (\u526F\u672C)"), a.createdAt = new Date().toISOString(), a.modifiedAt = new Date().toISOString(), a;
    }
  }], [{
    key: "fromJson",
    value: function fromJson(t) {
      try {
        var _a = JSON.parse(t);
        return e.fromObject(_a);
      } catch (a) {
        throw new Error("JSON\u89E3\u6790\u5931\u8D25: ".concat(a.message));
      }
    }
  }, {
    key: "fromObject",
    value: function fromObject(t) {
      return new e({
        id: t.id,
        uid: t.uid,
        name: t.name,
        tag: t.tag,
        sak: t.sak,
        atqa: t.atqa ? new Uint8Array(t.atqa) : new Uint8Array(0),
        ats: t.ats ? new Uint8Array(t.ats) : new Uint8Array(0),
        data: t.data ? t.data.map(function (t) {
          return new Uint8Array(t);
        }) : [],
        extraData: t.extraData ? a.fromObject(t.extraData) : new a(),
        color: t.color || "#FF5722",
        createdAt: t.createdAt,
        modifiedAt: t.modifiedAt
      });
    }
  }]);
  return e;
}();
exports.CardSave = e, exports.CardSaveExtra = a, exports.CardSaveUtils = /*#__PURE__*/function () {
  function _class() {
    _classCallCheck2(this, _class);
  }
  _createClass2(_class, null, [{
    key: "fromSlotData",
    value: function fromSlotData(a, r) {
      return new e({
        name: a.name || "\u5361\u69FD".concat(r),
        uid: a.uid || "",
        tag: a.tagType || t.TagType.UNKNOWN,
        sak: a.sak || 0,
        atqa: a.atqa || new Uint8Array(0),
        ats: a.ats || new Uint8Array(0),
        data: a.data || []
      });
    }
  }, {
    key: "validateCards",
    value: function validateCards(t) {
      var a = [];
      var _iterator = _createForOfIteratorHelper2(t),
        _step;
      try {
        for (_iterator.s(); !(_step = _iterator.n()).done;) {
          var _e2 = _step.value;
          var _t = _e2.validate();
          a.push(_objectSpread2({
            card: _e2
          }, _t));
        }
      } catch (err) {
        _iterator.e(err);
      } finally {
        _iterator.f();
      }
      return a;
    }
  }, {
    key: "groupByType",
    value: function groupByType(t) {
      var a = {};
      var _iterator2 = _createForOfIteratorHelper2(t),
        _step2;
      try {
        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {
          var _e3 = _step2.value;
          var _t2 = _e3.getTypeString();
          a[_t2] || (a[_t2] = []), a[_t2].push(_e3);
        }
      } catch (err) {
        _iterator2.e(err);
      } finally {
        _iterator2.f();
      }
      return a;
    }
  }, {
    key: "searchCards",
    value: function searchCards(t, a) {
      if (!a.trim()) return t;
      var e = a.toLowerCase();
      return t.filter(function (t) {
        return t.name.toLowerCase().includes(e) || t.uid.toLowerCase().includes(e) || t.getTypeString().toLowerCase().includes(e);
      });
    }
  }, {
    key: "sortCards",
    value: function sortCards(t) {
      var a = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : "name";
      var e = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : "asc";
      return _toConsumableArray2(t).sort(function (t, r) {
        var i, s;
        switch (a) {
          case "name":
          default:
            i = t.name.toLowerCase(), s = r.name.toLowerCase();
            break;
          case "type":
            i = t.getTypeString(), s = r.getTypeString();
            break;
          case "created":
            i = new Date(t.createdAt), s = new Date(r.createdAt);
            break;
          case "modified":
            i = new Date(t.modifiedAt), s = new Date(r.modifiedAt);
        }
        return i < s ? "asc" === e ? -1 : 1 : i > s ? "asc" === e ? 1 : -1 : 0;
      });
    }
  }]);
  return _class;
}(); 
 			}); 
		define("utils/chameleon-protocol.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";

require("../@babel/runtime/helpers/Arrayincludes");
var _defineProperty2 = require("../@babel/runtime/helpers/defineProperty");
var _createForOfIteratorHelper2 = require("../@babel/runtime/helpers/createForOfIteratorHelper");
var _toConsumableArray2 = require("../@babel/runtime/helpers/toConsumableArray");
var _classCallCheck2 = require("../@babel/runtime/helpers/classCallCheck");
var _createClass2 = require("../@babel/runtime/helpers/createClass");
var _typeof2 = require("../@babel/runtime/helpers/typeof");
var _ = Object.defineProperty,
  t = function t(_t, E, e) {
    return function (t, E, e) {
      E in t ? _(t, E, {
        enumerable: !0,
        configurable: !0,
        writable: !0,
        value: e
      }) : t[E] = e;
    }(_t, "symbol" != _typeof2(E) ? E + "" : E, e), e;
  };
var E = {
    UNKNOWN: 0,
    EM410X: 100,
    EM410X16: 101,
    EM410X32: 102,
    EM410X64: 103,
    VIKING: 170,
    HID_PROX: 200,
    MIFARE_Mini: 1e3,
    MIFARE_1024: 1001,
    MIFARE_2048: 1002,
    MIFARE_4096: 1003,
    NTAG_210: 1107,
    NTAG_212: 1108,
    NTAG_213: 1100,
    NTAG_215: 1101,
    NTAG_216: 1102,
    MIFARE_Ultralight: 1103,
    MIFARE_Ultralight_C: 1104,
    MIFARE_Ultralight_EV1_11: 1105,
    MIFARE_Ultralight_EV1_21: 1106
  },
  e = {
    TAG: 0,
    READER: 1
  },
  T = 0,
  r = 1,
  A = 0,
  a = 1,
  s = 2,
  S = {
    A: 65,
    B: 66
  },
  i = 0,
  I = 1,
  n = 2,
  o = 3,
  C = 4,
  l = 5,
  c = 0,
  F = 1,
  M = 2,
  N = 3,
  R = 4,
  L = 5,
  O = 6,
  u = {
    STATUS_HF_TAG_OK: 0,
    STATUS_HF_TAG_NO: 1,
    STATUS_HF_ERR_STAT: 2,
    STATUS_HF_ERR_CRC: 3,
    STATUS_HF_COLLISION: 4,
    STATUS_HF_ERR_BCC: 5,
    STATUS_MF_ERR_AUTH: 6,
    STATUS_HF_ERR_PARITY: 7,
    STATUS_HF_ERR_ATS: 8,
    STATUS_LF_TAG_OK: 64,
    STATUS_EM410X_TAG_NO_FOUND: 65,
    STATUS_PAR_ERR: 96,
    STATUS_DEVICE_MODE_ERROR: 102,
    STATUS_INVALID_CMD: 103,
    STATUS_SUCCESS: 104,
    STATUS_NOT_IMPLEMENTED: 105,
    STATUS_FLASH_WRITE_FAIL: 112,
    STATUS_FLASH_READ_FAIL: 113,
    STATUS_INVALID_SLOT_TYPE: 114
  };
var U = /*#__PURE__*/function () {
  function U() {
    _classCallCheck2(this, U);
  }
  _createClass2(U, null, [{
    key: "createCommand",
    value: function createCommand(_) {
      var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;
      var E = t ? new Uint8Array(t) : new Uint8Array(0),
        e = [];
      e.push(this.DATA_FRAME_SOF), e.push(this.lrcCalc([this.DATA_FRAME_SOF]));
      var T = this.fromInt16BE(_);
      e.push.apply(e, _toConsumableArray2(T));
      var r = this.fromInt16BE(0);
      e.push.apply(e, _toConsumableArray2(r));
      var A = this.fromInt16BE(E.length);
      e.push.apply(e, _toConsumableArray2(A));
      var a = this.lrcCalc(e.slice(2, 8));
      e.push(a), E.length > 0 && e.push.apply(e, _toConsumableArray2(E));
      var s = this.lrcCalc(e);
      return e.push(s), new Uint8Array(e);
    }
  }, {
    key: "parseResponse",
    value: function parseResponse(_) {
      if (!_ || _.byteLength < this.MIN_PACKET_LENGTH) return console.warn("[Protocol] 接收到的数据包过短或无效，无法解析"), {
        success: !1,
        command: null,
        status: null,
        data: null,
        error: "Invalid or short packet"
      };
      try {
        var _t2 = new Uint8Array(_);
        if (console.log("[Protocol] 解析响应数据，长度:", _t2.length, "数据:", Array.from(_t2).map(function (_) {
          return _.toString(16).padStart(2, "0");
        }).join(" ")), _t2.length < 9) throw new Error("响应数据太短");
        if (_t2[0] !== this.DATA_FRAME_SOF) throw new Error("无效的帧起始标记");
        if (_t2[1] !== this.lrcCalc([_t2[0]])) throw new Error("SOF校验失败");
        var _E = this.toInt16BE(_t2.slice(2, 4)),
          _e = this.toInt16BE(_t2.slice(4, 6)),
          _T = this.toInt16BE(_t2.slice(6, 8));
        console.log("[Protocol] 帧头解析 - 命令:", _E, "状态:", _e, "长度:", _T);
        var _r = this.lrcCalc(Array.from(_t2.slice(2, 8)));
        if (_t2[8] !== _r) throw new Error("帧头校验失败");
        if (_T > this.DATA_MAX_LENGTH) throw new Error("数据长度超出限制");
        if (_t2.length !== 9 + _T + 1) throw new Error("帧长度不匹配");
        var _A = this.lrcCalc(Array.from(_t2.slice(0, -1)));
        if (_t2[_t2.length - 1] !== _A) throw new Error("整帧校验失败");
        var _a = _T > 0 ? _t2.slice(9, 9 + _T) : new Uint8Array(0);
        console.log("[Protocol] 提取数据，预期长度:", _T, "实际数据:", Array.from(_a));
        var _s = this.isCommandSuccess(_E, _e),
          _S = {
            success: _s,
            command: _E,
            status: _e,
            data: _a,
            error: _s ? null : "\u547D\u4EE4\u6267\u884C\u5931\u8D25\uFF0C\u72B6\u6001\u7801: ".concat(_e, " (0x").concat(_e.toString(16).padStart(2, "0").toUpperCase(), ") - ").concat(this.getStatusMessage(_e))
          };
        return console.log("[Protocol] 解析结果:", _S), _S;
      } catch (t) {
        return {
          success: !1,
          command: 0,
          status: -1,
          data: new Uint8Array(0),
          error: "响应数据解析失败: " + t.message
        };
      }
    }
  }, {
    key: "lrcCalc",
    value: function lrcCalc(_) {
      var t = 0;
      var _iterator = _createForOfIteratorHelper2(_),
        _step;
      try {
        for (_iterator.s(); !(_step = _iterator.n()).done;) {
          var _E2 = _step.value;
          t += _E2, t &= 255;
        }
      } catch (err) {
        _iterator.e(err);
      } finally {
        _iterator.f();
      }
      return 256 - t & 255;
    }
  }, {
    key: "fromInt16BE",
    value: function fromInt16BE(_) {
      return [_ >> 8 & 255, 255 & _];
    }
  }, {
    key: "toInt16BE",
    value: function toInt16BE(_) {
      return _[0] << 8 | _[1];
    }
  }, {
    key: "formatUID",
    value: function formatUID(_) {
      var t;
      return _ ? Array.isArray(_) ? _.map(function (_) {
        return _.toString(16).padStart(2, "0");
      }).join(" ").toUpperCase() : "string" == typeof _ ? (null == (t = _.replace(/[^0-9a-fA-F]/g, "").match(/.{2}/g)) ? void 0 : t.join(" ").toUpperCase()) || "" : _.toString() : "";
    }
  }, {
    key: "parseUID",
    value: function parseUID(_) {
      if (!_) return [];
      var t = _.replace(/[^0-9a-fA-F]/g, ""),
        E = [];
      for (var _e2 = 0; _e2 < t.length; _e2 += 2) {
        var _2 = parseInt(t.substr(_e2, 2), 16);
        isNaN(_2) || E.push(_2);
      }
      return E;
    }
  }, {
    key: "isCommandSuccess",
    value: function isCommandSuccess(_, t) {
      return _ >= 2e3 && _ <= 2099 ? t === u.STATUS_HF_TAG_OK : _ >= 3e3 && _ <= 3099 ? t === u.STATUS_LF_TAG_OK : t === u.STATUS_SUCCESS;
    }
  }, {
    key: "getStatusMessage",
    value: function getStatusMessage(_) {
      var _u$STATUS_HF_TAG_OK$u;
      return (_u$STATUS_HF_TAG_OK$u = {}, _defineProperty2(_u$STATUS_HF_TAG_OK$u, u.STATUS_HF_TAG_OK, "IC卡操作成功"), _defineProperty2(_u$STATUS_HF_TAG_OK$u, u.STATUS_HF_TAG_NO, "未找到IC卡 - 请确保卡片放置正确"), _defineProperty2(_u$STATUS_HF_TAG_OK$u, u.STATUS_HF_ERR_STAT, "IC卡通信错误"), _defineProperty2(_u$STATUS_HF_TAG_OK$u, u.STATUS_HF_ERR_CRC, "IC卡通信校验错误"), _defineProperty2(_u$STATUS_HF_TAG_OK$u, u.STATUS_HF_COLLISION, "IC卡冲突 - 检测到多张卡片"), _defineProperty2(_u$STATUS_HF_TAG_OK$u, u.STATUS_HF_ERR_BCC, "IC卡BCC错误"), _defineProperty2(_u$STATUS_HF_TAG_OK$u, u.STATUS_MF_ERR_AUTH, "MF卡验证失败 - 密钥错误"), _defineProperty2(_u$STATUS_HF_TAG_OK$u, u.STATUS_HF_ERR_PARITY, "IC卡奇偶校验错误"), _defineProperty2(_u$STATUS_HF_TAG_OK$u, u.STATUS_HF_ERR_ATS, "ATS错误"), _defineProperty2(_u$STATUS_HF_TAG_OK$u, u.STATUS_LF_TAG_OK, "低频卡操作成功"), _defineProperty2(_u$STATUS_HF_TAG_OK$u, u.STATUS_EM410X_TAG_NO_FOUND, "找不到有效的EM410X标签"), _defineProperty2(_u$STATUS_HF_TAG_OK$u, u.STATUS_SUCCESS, "设备操作成功"), _defineProperty2(_u$STATUS_HF_TAG_OK$u, u.STATUS_PAR_ERR, "参数错误"), _defineProperty2(_u$STATUS_HF_TAG_OK$u, u.STATUS_DEVICE_MODE_ERROR, "设备模式错误"), _defineProperty2(_u$STATUS_HF_TAG_OK$u, u.STATUS_INVALID_CMD, "无效指令"), _defineProperty2(_u$STATUS_HF_TAG_OK$u, u.STATUS_NOT_IMPLEMENTED, "未实现的操作"), _defineProperty2(_u$STATUS_HF_TAG_OK$u, u.STATUS_FLASH_WRITE_FAIL, "Flash写入失败"), _defineProperty2(_u$STATUS_HF_TAG_OK$u, u.STATUS_FLASH_READ_FAIL, "Flash读取失败"), _defineProperty2(_u$STATUS_HF_TAG_OK$u, u.STATUS_INVALID_SLOT_TYPE, "无效卡槽类型"), _u$STATUS_HF_TAG_OK$u)[_] || "未知错误";
    }
  }, {
    key: "getTagTypeName",
    value: function getTagTypeName(_) {
      var _E$UNKNOWN$E$EM410X$E;
      if ("string" == typeof _) {
        return {
          UNKNOWN: "未知",
          EM410X: "EM410X",
          MIFARE_Mini: "Mifare Mini",
          MIFARE_1024: "Mifare Classic 1K",
          MIFARE_2048: "Mifare Classic 2K",
          MIFARE_4096: "Mifare Classic 4K",
          NTAG_213: "NTAG213",
          NTAG_215: "NTAG215",
          NTAG_216: "NTAG216",
          MIFARE_Ultralight: "Mifare Ultralight",
          MIFARE_Ultralight_C: "Mifare Ultralight C",
          MIFARE_Ultralight_EV1_80B: "Ultralight EV1 (80B)",
          MIFARE_Ultralight_EV1_164B: "Ultralight EV1 (164B)"
        }[_] || "未知";
      }
      return (_E$UNKNOWN$E$EM410X$E = {}, _defineProperty2(_E$UNKNOWN$E$EM410X$E, E.UNKNOWN, "未知"), _defineProperty2(_E$UNKNOWN$E$EM410X$E, E.EM410X, "EM410X"), _defineProperty2(_E$UNKNOWN$E$EM410X$E, E.MIFARE_Mini, "MIFARE Mini"), _defineProperty2(_E$UNKNOWN$E$EM410X$E, E.MIFARE_1024, "MIFARE Classic 1K"), _defineProperty2(_E$UNKNOWN$E$EM410X$E, E.MIFARE_2048, "MIFARE Classic 2K"), _defineProperty2(_E$UNKNOWN$E$EM410X$E, E.MIFARE_4096, "MIFARE Classic 4K"), _defineProperty2(_E$UNKNOWN$E$EM410X$E, E.NTAG_213, "NTAG213"), _defineProperty2(_E$UNKNOWN$E$EM410X$E, E.NTAG_215, "NTAG215"), _defineProperty2(_E$UNKNOWN$E$EM410X$E, E.NTAG_216, "NTAG216"), _defineProperty2(_E$UNKNOWN$E$EM410X$E, E.MIFARE_Ultralight, "MIFARE Ultralight"), _defineProperty2(_E$UNKNOWN$E$EM410X$E, E.MIFARE_Ultralight_C, "MIFARE Ultralight C"), _defineProperty2(_E$UNKNOWN$E$EM410X$E, E.MIFARE_Ultralight_EV1_80B, "MIFARE Ultralight EV1 (80B)"), _defineProperty2(_E$UNKNOWN$E$EM410X$E, E.MIFARE_Ultralight_EV1_164B, "MIFARE Ultralight EV1 (164B)"), _E$UNKNOWN$E$EM410X$E)[_] || "未知类型";
    }
  }, {
    key: "getDeviceModeName",
    value: function getDeviceModeName(_) {
      var _e$TAG$e$READER$_;
      return (_e$TAG$e$READER$_ = {}, _defineProperty2(_e$TAG$e$READER$_, e.TAG, "标签模式"), _defineProperty2(_e$TAG$e$READER$_, e.READER, "读卡器模式"), _e$TAG$e$READER$_)[_] || "未知模式";
    }
  }, {
    key: "getDeviceModelName",
    value: function getDeviceModelName(_) {
      var _T$r$_;
      return (_T$r$_ = {}, _defineProperty2(_T$r$_, T, "Chameleon Ultra"), _defineProperty2(_T$r$_, r, "Chameleon Lite"), _T$r$_)[_] || "未知型号";
    }
  }, {
    key: "getButtonFunctionName",
    value: function getButtonFunctionName(_) {
      var _c$F$M$N$R$L$O$_;
      return (_c$F$M$N$R$L$O$_ = {}, _defineProperty2(_c$F$M$N$R$L$O$_, c, "禁用"), _defineProperty2(_c$F$M$N$R$L$O$_, F, "随机UID"), _defineProperty2(_c$F$M$N$R$L$O$_, M, "UID左递增"), _defineProperty2(_c$F$M$N$R$L$O$_, N, "UID右递增"), _defineProperty2(_c$F$M$N$R$L$O$_, R, "卡槽递增"), _defineProperty2(_c$F$M$N$R$L$O$_, L, "卡槽递减"), _defineProperty2(_c$F$M$N$R$L$O$_, O, "克隆UID"), _c$F$M$N$R$L$O$_)[_] || "未知功能";
    }
  }, {
    key: "isValidSlot",
    value: function isValidSlot(_) {
      return Number.isInteger(_) && _ >= 0 && _ < 16;
    }
  }, {
    key: "isValidUID",
    value: function isValidUID(_) {
      if (!_) return !1;
      var t = _.replace(/[^0-9a-fA-F]/g, "");
      return t.length >= 8 && t.length <= 20 && t.length % 2 == 0;
    }
  }, {
    key: "calculateChecksum",
    value: function calculateChecksum(_) {
      return Array.isArray(_) ? _.reduce(function (_, t) {
        return _ + t & 255;
      }, 0) : 0;
    }
  }, {
    key: "generateRandomUID",
    value: function generateRandomUID() {
      var _ = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 4;
      var t = [];
      for (var _E3 = 0; _E3 < _; _E3++) t.push(Math.floor(256 * Math.random()));
      return t;
    }
  }, {
    key: "getAnimationSettingName",
    value: function getAnimationSettingName(_) {
      var _A$a$s$_;
      return (_A$a$s$_ = {}, _defineProperty2(_A$a$s$_, A, "完整动画"), _defineProperty2(_A$a$s$_, a, "最小动画"), _defineProperty2(_A$a$s$_, s, "无动画"), _A$a$s$_)[_] || "未知";
    }
  }, {
    key: "getButtonConfigName",
    value: function getButtonConfigName(_) {
      var _i$I$n$o$C$l$_;
      return (_i$I$n$o$C$l$_ = {}, _defineProperty2(_i$I$n$o$C$l$_, i, "禁用"), _defineProperty2(_i$I$n$o$C$l$_, I, "向前切换"), _defineProperty2(_i$I$n$o$C$l$_, n, "向后切换"), _defineProperty2(_i$I$n$o$C$l$_, o, "克隆UID"), _defineProperty2(_i$I$n$o$C$l$_, C, "充电状态"), _defineProperty2(_i$I$n$o$C$l$_, l, "自动轮询"), _i$I$n$o$C$l$_)[_] || "未知";
    }
  }, {
    key: "getButtonTypeName",
    value: function getButtonTypeName(_) {
      var _S$A$S$B$_;
      return (_S$A$S$B$_ = {}, _defineProperty2(_S$A$S$B$_, S.A, "按钮A"), _defineProperty2(_S$A$S$B$_, S.B, "按钮B"), _S$A$S$B$_)[_] || "未知按钮";
    }
  }, {
    key: "getAnimationOptions",
    value: function getAnimationOptions() {
      return [{
        value: A,
        label: "完整动画",
        desc: "播放完整的LED动画效果"
      }, {
        value: a,
        label: "最小动画",
        desc: "播放简化的LED动画效果"
      }, {
        value: s,
        label: "无动画",
        desc: "不播放任何LED动画"
      }];
    }
  }, {
    key: "getButtonConfigOptions",
    value: function getButtonConfigOptions() {
      return [{
        value: i,
        label: "禁用",
        desc: "按钮无功能"
      }, {
        value: I,
        label: "向前切换",
        desc: "向前切换到下一个卡槽"
      }, {
        value: n,
        label: "向后切换",
        desc: "向后切换到上一个卡槽"
      }, {
        value: o,
        label: "克隆UID",
        desc: "克隆当前检测到的卡片UID"
      }, {
        value: C,
        label: "充电状态",
        desc: "显示当前充电状态"
      }, {
        value: l,
        label: "自动轮询",
        desc: "自动循环切换卡槽"
      }];
    }
  }, {
    key: "formatCardNumber",
    value: function formatCardNumber(_, t) {
      if (!_) return "";
      var E = _.replace(/[^0-9A-Fa-f]/g, "");
      if (!E) return "";
      switch (t) {
        case "MIFARE_CLASSIC_1K":
        case "MIFARE_CLASSIC_4K":
        case "MIFARE_CLASSIC_2K":
        case "NTAG213":
        case "NTAG215":
        case "NTAG216":
        default:
          return E.replace(/(.{2})/g, "$1 ").trim().toUpperCase();
        case "EM410X":
          return 10 === E.length ? "".concat(E.substring(0, 5), "-").concat(E.substring(5)) : E.toUpperCase();
      }
    }
  }, {
    key: "extractICCardNumber",
    value: function extractICCardNumber(_) {
      if (!_) return "";
      var t = _.replace(/[^0-9A-Fa-f]/g, "");
      if (t.length < 8) return "";
      var E = t.substring(0, 8);
      try {
        var _3 = parseInt(E, 16);
        return "".concat(this.formatCardNumber(E, "IC"), " (").concat(_3, ")");
      } catch (e) {
        return this.formatCardNumber(E, "IC");
      }
    }
  }, {
    key: "extractIDCardNumber",
    value: function extractIDCardNumber(_) {
      if (!_) return "";
      var t = _.replace(/[^0-9A-Fa-f]/g, "");
      if (t.length < 10) return "";
      var E = t.substring(0, 10);
      try {
        var _4 = parseInt(E, 16);
        return "".concat(this.formatCardNumber(E, "EM410X"), " (").concat(_4, ")");
      } catch (e) {
        return this.formatCardNumber(E, "EM410X");
      }
    }
  }, {
    key: "isMifareClassic",
    value: function isMifareClassic(_) {
      var t = [E.MIFARE_Mini, E.MIFARE_1024, E.MIFARE_2048, E.MIFARE_4096];
      return ["MIFARE_CLASSIC_1K", "MIFARE_CLASSIC_2K", "MIFARE_CLASSIC_4K", "MIFARE_CLASSIC_MINI", "MIFARE_1024", "MIFARE_2048", "MIFARE_4096", "MIFARE_Mini"].includes(_) || t.includes(_);
    }
  }, {
    key: "isLowFrequency",
    value: function isLowFrequency(_) {
      return ["EM410X", "T55XX", "EM4305", "FDX_B", "INDALA", "UNKNOWN_LF"].includes(_);
    }
  }, {
    key: "isHighFrequency",
    value: function isHighFrequency(_) {
      return !this.isLowFrequency(_) && "UNKNOWN" !== _;
    }
  }, {
    key: "getCardFrequency",
    value: function getCardFrequency(_) {
      return this.isLowFrequency(_) ? "LF" : this.isHighFrequency(_) ? "HF" : "UNKNOWN";
    }
  }, {
    key: "getWriteModeDisplayName",
    value: function getWriteModeDisplayName(_) {
      return {
        normal: "正常",
        denied: "拒绝",
        deceive: "欺骗",
        shadow: "影子"
      }[_] || "未知";
    }
  }, {
    key: "isValidTagType",
    value: function isValidTagType(_) {
      return _ && "UNKNOWN" !== _ && "UNKNOWN_HF" !== _ && "UNKNOWN_LF" !== _ && "" !== _.trim();
    }
  }, {
    key: "getCardCapacity",
    value: function getCardCapacity(_) {
      return {
        MIFARE_CLASSIC_1K: {
          size: 1024,
          unit: "bytes",
          blocks: 64
        },
        MIFARE_CLASSIC_2K: {
          size: 2048,
          unit: "bytes",
          blocks: 128
        },
        MIFARE_CLASSIC_4K: {
          size: 4096,
          unit: "bytes",
          blocks: 256
        },
        MIFARE_CLASSIC_MINI: {
          size: 320,
          unit: "bytes",
          blocks: 20
        },
        NTAG213: {
          size: 180,
          unit: "bytes",
          blocks: 45
        },
        NTAG215: {
          size: 540,
          unit: "bytes",
          blocks: 135
        },
        NTAG216: {
          size: 928,
          unit: "bytes",
          blocks: 232
        },
        EM410X: {
          size: 64,
          unit: "bits",
          blocks: 1
        }
      }[_] || {
        size: 0,
        unit: "bytes",
        blocks: 0
      };
    }
  }]);
  return U;
}();
t(U, "DATA_FRAME_SOF", 17), t(U, "DATA_MAX_LENGTH", 512), t(U, "MIN_PACKET_LENGTH", 10), t(U, "MIFARE_WRITE_MODES", {
  NORMAL: "normal",
  DENIED: "denied",
  DECEIVE: "deceive",
  SHADOW: "shadow"
}), exports.ButtonType = S, exports.ChameleonCommand = {
  GET_APP_VERSION: 1e3,
  CHANGE_DEVICE_MODE: 1001,
  GET_DEVICE_MODE: 1002,
  SET_ACTIVE_SLOT: 1003,
  SET_SLOT_TAG_TYPE: 1004,
  SET_SLOT_DATA_DEFAULT: 1005,
  SET_SLOT_ENABLE: 1006,
  SET_SLOT_TAG_NICK: 1007,
  GET_SLOT_TAG_NICK: 1008,
  SAVE_SLOT_NICKS: 1009,
  ENTER_BOOTLOADER: 1010,
  GET_DEVICE_CHIP_ID: 1011,
  GET_DEVICE_BLE_ADDRESS: 1012,
  SAVE_SETTINGS: 1013,
  RESET_SETTINGS: 1014,
  SET_ANIMATION_MODE: 1015,
  GET_ANIMATION_MODE: 1016,
  GET_ACTIVE_SLOT: 1018,
  GET_SLOT_INFO: 1019,
  FACTORY_RESET: 1020,
  GET_ENABLED_SLOTS: 1023,
  DELETE_SLOT_INFO: 1024,
  GET_BATTERY_CHARGE: 1025,
  GET_BUTTON_PRESS_CONFIG: 1026,
  SET_BUTTON_PRESS_CONFIG: 1027,
  GET_LONG_BUTTON_PRESS_CONFIG: 1028,
  SET_LONG_BUTTON_PRESS_CONFIG: 1029,
  BLE_SET_CONNECT_KEY: 1030,
  BLE_GET_CONNECT_KEY: 1031,
  BLE_CLEAR_BONDED_DEVICES: 1032,
  GET_DEVICE_TYPE: 1033,
  GET_DEVICE_SETTINGS: 1034,
  GET_DEVICE_CAPABILITIES: 1035,
  BLE_GET_PAIR_ENABLE: 1036,
  BLE_SET_PAIR_ENABLE: 1037,
  GET_DEVICE_AUTO_POLLING: 6038,
  SET_DEVICE_AUTO_POLLING: 6039,
  GET_DEVICE_AUTO_POLLING_DELAY: 6040,
  SET_DEVICE_AUTO_POLLING_DELAY: 6041,
  GET_LICENSE_KEY: 6042,
  SET_LICENSE_KEY: 6043,
  SET_SECRET_KEY: 6044,
  GET_TRIAL_LEFT_TIMES: 6045,
  GET_IC_POLLING_ENABLED: 6046,
  SET_IC_POLLING_ENABLED: 6047,
  GET_ID_POLLING_ENABLED: 6048,
  SET_ID_POLLING_ENABLED: 6049,
  GET_GIT_VERSION: 6050,
  GET_CUSTOM_GIT_VERSION: 6050,
  GET_SLEEP_TIME: 6051,
  SET_SLEEP_TIME: 6052,
  SCAN_14A_TAG: 2e3,
  MF1_SUPPORT_DETECT: 2001,
  MF1_NT_LEVEL_DETECT: 2002,
  MF1_STATIC_NESTED_ACQUIRE: 2003,
  MF1_DARKSIDE_ACQUIRE: 2004,
  MF1_NT_DISTANCE_DETECT: 2005,
  MF1_NESTED_ACQUIRE: 2006,
  MF1_CHECK_KEY: 2007,
  MF1_READ_BLOCK: 2008,
  MF1_WRITE_BLOCK: 2009,
  HF14A_RAW: 2010,
  MF1_MANIPULATE_VALUE_BLOCK: 2011,
  MF1_CHECK_KEYS_OF_SECTORS: 2012,
  MF1_HARD_NESTED_ACQUIRE: 2013,
  MF1_STATIC_ENCRYPTED_NESTED_ACQUIRE: 2014,
  MF1_CHECK_KEYS_ON_BLOCK: 2015,
  MF0_GET_VERSION: 2016,
  MF0_GET_SIGNATURE: 2017,
  MF0_READ_PAGE: 2018,
  MF0_WRITE_PAGE: 2019,
  SCAN_EM410X_TAG: 3e3,
  WRITE_EM410X_TO_T5577: 3001,
  MF1_LOAD_BLOCK_DATA: 4e3,
  MF1_SET_ANTI_COLLISION: 4001,
  MF1_SET_DETECTION_ENABLE: 4004,
  MF1_GET_DETECTION_COUNT: 4005,
  MF1_GET_DETECTION_RESULT: 4006,
  MF1_GET_DETECTION_STATUS: 4007,
  MF1_GET_BLOCK_DATA: 4008,
  MF1_GET_EMULATOR_CONFIG: 4009,
  MF1_GET_GEN1A_MODE: 4010,
  MF1_SET_GEN1A_MODE: 4011,
  MF1_GET_GEN2_MODE: 4012,
  MF1_SET_GEN2_MODE: 4013,
  MF1_GET_FIRST_BLOCK_COLL: 4014,
  MF1_SET_FIRST_BLOCK_COLL: 4015,
  MF1_GET_WRITE_MODE: 4016,
  MF1_SET_WRITE_MODE: 4017,
  MF1_GET_ANTI_COLL_DATA: 4018,
  SET_EM410X_EMULATOR_ID: 5e3,
  GET_EM410X_EMULATOR_ID: 5001,
  GET_SLOT_POLLING_CONFIG_LIST: 6e3,
  SET_SLOT_POLLING_CONFIG_LIST: 6001,
  GET_COMPATIBLE_8_SLOTS: 6002,
  SET_COMPATIBLE_8_SLOTS: 6003
}, exports.ChameleonProtocol = U, exports.ChameleonStatus = u, exports.DeviceMode = e, exports.TagFrequency = {
  LF: 1,
  HF: 2
}, exports.TagType = E, exports.gMifareClassicKeyNames = ["Default Key (FFFFFF)", "NFC Forum MAD", "NDEF Public", "MFC EV1 Sig 17B", "MFC EV1 Sig 16A", "MFC EV1 Sig 16B", "MFC EV1 Sig 17A", "Public Transport", "SimonsVoss", "ID06", "Schlage", "Gallagher", "Saflok", "Dorma Kaba", "Bosch", "Vigik1 A", "Vigik1 B", "BTicino", "Intratone", "Vingcard", "All Zeros", "Test Key", "Common Key 1", "Common Key 2", "Common Key 3", "Common Key 4", "Common Key 5", "Common Key 6", "Common Key 7", "Common Key 8", "Incremental", "Decremental", "Repeat 1", "Repeat 2", "Repeat 3", "Repeat 4", "Repeat 5", "Repeat 6", "Repeat 7", "Repeat 8", "Repeat 9", "Repeat A", "Repeat B", "Repeat C", "Repeat D", "Repeat E"], exports.gMifareClassicKeys = [[255, 255, 255, 255, 255, 255], [160, 161, 162, 163, 164, 165], [211, 247, 211, 247, 211, 247], [75, 121, 27, 234, 123, 204], [92, 143, 249, 153, 13, 162], [208, 26, 254, 235, 137, 10], [117, 204, 181, 156, 155, 237], [252, 0, 1, 135, 120, 247], [100, 113, 165, 239, 45, 26], [78, 53, 82, 66, 107, 50], [239, 18, 50, 171, 24, 160], [183, 191, 12, 19, 6, 110], [19, 91, 136, 169, 75, 139], [42, 44, 19, 204, 36, 42], [90, 122, 82, 213, 226, 13], [49, 75, 73, 71, 73, 86], [86, 76, 80, 95, 77, 65], [2, 18, 9, 25, 117, 145], [72, 69, 88, 65, 67, 84], [236, 10, 155, 26, 158, 6], [0, 0, 0, 0, 0, 0], [176, 177, 178, 179, 180, 181], [77, 58, 153, 195, 81, 221], [26, 152, 44, 126, 69, 154], [170, 187, 204, 221, 238, 255], [113, 76, 92, 136, 110, 151], [88, 126, 229, 249, 53, 15], [160, 71, 140, 195, 144, 145], [83, 60, 182, 199, 35, 246], [143, 208, 164, 242, 86, 233], [18, 52, 86, 120, 154, 188], [254, 220, 186, 152, 118, 84], [17, 17, 17, 17, 17, 17], [34, 34, 34, 34, 34, 34], [51, 51, 51, 51, 51, 51], [68, 68, 68, 68, 68, 68], [85, 85, 85, 85, 85, 85], [102, 102, 102, 102, 102, 102], [119, 119, 119, 119, 119, 119], [136, 136, 136, 136, 136, 136], [153, 153, 153, 153, 153, 153], [170, 170, 170, 170, 170, 170], [187, 187, 187, 187, 187, 187], [204, 204, 204, 204, 204, 204], [221, 221, 221, 221, 221, 221], [238, 238, 238, 238, 238, 238]]; 
 			}); 
		define("utils/dfu.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";

var _regeneratorRuntime2 = require("../@babel/runtime/helpers/regeneratorRuntime");
var _asyncToGenerator2 = require("../@babel/runtime/helpers/asyncToGenerator");
var _toConsumableArray2 = require("../@babel/runtime/helpers/toConsumableArray");
var _classCallCheck2 = require("../@babel/runtime/helpers/classCallCheck");
var _createClass2 = require("../@babel/runtime/helpers/createClass");
var _typeof2 = require("../@babel/runtime/helpers/typeof");
var t = Object.defineProperty,
  e = function e(_e, o, r) {
    return function (e, o, r) {
      o in e ? t(e, o, {
        enumerable: !0,
        configurable: !0,
        writable: !0,
        value: r
      }) : e[o] = r;
    }(_e, "symbol" != _typeof2(o) ? o + "" : o, r), r;
  };
var o = {
    CREATE_OBJECT: 1,
    SET_PRN: 2,
    CALC_CHECKSUM: 3,
    EXECUTE: 4,
    READ_ERROR: 5,
    READ_OBJECT: 6,
    GET_SERIAL_MTU: 7,
    WRITE_OBJECT: 8,
    PING: 9,
    GET_HW: 10,
    RESPONSE: 96
  },
  r = 1,
  n = 11,
  s = function () {
    var t = new Uint32Array(256);
    for (var _e2 = 0; _e2 < 256; _e2++) {
      var _o = _e2;
      for (var _t = 0; _t < 8; _t++) 0 != (1 & _o) ? _o = 3988292384 ^ _o >>> 1 : _o >>>= 1;
      t[_e2] = _o >>> 0;
    }
    return t;
  }();
function i(t) {
  var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;
  e = ~e >>> 0;
  for (var _o2 = 0; _o2 < t.length; _o2++) e = e >>> 8 ^ s[255 & (e ^ t[_o2])];
  return ~e >>> 0;
}
var c = /*#__PURE__*/function () {
  function c() {
    _classCallCheck2(this, c);
  }
  _createClass2(c, null, [{
    key: "encode",
    value: function encode(t) {
      var e = [];
      for (var _o3 = 0; _o3 < t.length; _o3++) {
        var _r = t[_o3];
        _r === this.SLIP_BYTE_END ? (e.push(this.SLIP_BYTE_ESC), e.push(this.SLIP_BYTE_ESC_END)) : _r === this.SLIP_BYTE_ESC ? (e.push(this.SLIP_BYTE_ESC), e.push(this.SLIP_BYTE_ESC_ESC)) : e.push(_r);
      }
      return e.push(this.SLIP_BYTE_END), new Uint8Array(e);
    }
  }, {
    key: "decode",
    value: function decode(t) {
      var e = !1,
        o = this.SLIP_STATE_DECODING;
      var r = [];
      for (var _n = 0; _n < t.length; _n++) {
        var _s = t[_n],
          _i = this.decodeAddByte(_s, r, o);
        if (e = _i.finished, o = _i.state, e) break;
      }
      return new Uint8Array(r);
    }
  }, {
    key: "decodeAddByte",
    value: function decodeAddByte(t, e, o) {
      var r = !1;
      var n = _toConsumableArray2(e);
      return o === this.SLIP_STATE_DECODING ? t === this.SLIP_BYTE_END ? r = !0 : t === this.SLIP_BYTE_ESC ? o = this.SLIP_STATE_ESC_RECEIVED : n.push(t) : o === this.SLIP_STATE_ESC_RECEIVED ? t === this.SLIP_BYTE_ESC_END ? (n.push(this.SLIP_BYTE_END), o = this.SLIP_STATE_DECODING) : t === this.SLIP_BYTE_ESC_ESC ? (n.push(this.SLIP_BYTE_ESC), o = this.SLIP_STATE_DECODING) : o = this.SLIP_STATE_CLEARING_INVALID_PACKET : o === this.SLIP_STATE_CLEARING_INVALID_PACKET && t === this.SLIP_BYTE_END && (o = this.SLIP_STATE_DECODING, n.length = 0), {
        finished: r,
        state: o,
        decoded: n
      };
    }
  }]);
  return c;
}();
e(c, "SLIP_BYTE_END", 192), e(c, "SLIP_BYTE_ESC", 219), e(c, "SLIP_BYTE_ESC_END", 220), e(c, "SLIP_BYTE_ESC_ESC", 221), e(c, "SLIP_STATE_DECODING", 1), e(c, "SLIP_STATE_ESC_RECEIVED", 2), e(c, "SLIP_STATE_CLEARING_INVALID_PACKET", 3);
exports.DFUCommunicator = /*#__PURE__*/function () {
  function _class(t) {
    _classCallCheck2(this, _class);
    this.bluetoothService = t, this.isBLE = !0, this.mtu = 0, this.prn = 0;
  }
  _createClass2(_class, [{
    key: "sendCmd",
    value: function () {
      var _sendCmd = _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee(t) {
        var _this = this;
        var e,
          s,
          i,
          l,
          a,
          h,
          E,
          S,
          f,
          C,
          g,
          D,
          _,
          U,
          _t2,
          _args = arguments;
        return _regeneratorRuntime2().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              e = _args.length > 1 && _args[1] !== undefined ? _args[1] : new Uint8Array(0);
              f = new Uint8Array([t].concat(_toConsumableArray2(e)));
              C = f;
              this.isBLE || (C = c.encode(f)), console.log("[DFU] 发送命令:", this.arrayToHexString(C), "原始命令值:", t.toString(16));
              g = new Promise(function (t, e) {
                var o = !1;
                var r = setTimeout(function () {
                    o || (o = !0, _this.bluetoothService.off("dataReceived", n), console.log("[DFU] 命令响应超时，移除事件监听器"), e(new Error("DFU 命令响应超时")));
                  }, 5e3),
                  n = function n(s) {
                    if (o) return void console.log("[DFU] 收到重复响应，忽略");
                    o = !0, console.log("[DFU] 接收到响应数据:", _typeof2(s), s instanceof ArrayBuffer ? "ArrayBuffer" : "Other"), console.log("[DFU] 响应数据字节长度:", s.byteLength || s.length || 0), clearTimeout(r), _this.bluetoothService.off("dataReceived", n);
                    var i = s;
                    if (s instanceof ArrayBuffer) i = s;else {
                      if (!s.buffer) return console.error("[DFU] 响应数据格式不正确:", s), void e(new Error("DFU 响应数据格式错误"));
                      i = s.buffer;
                    }
                    console.log("[DFU] 响应处理完成，准备解析"), t(i);
                  };
                console.log("[DFU] 注册 dataReceived 事件监听器"), _this.bluetoothService.on("dataReceived", n), console.log("[DFU] 事件监听器已注册，准备发送数据"), setTimeout(function () {
                  o || _this.bluetoothService.sendData(C.buffer, !1, "write").catch(function (t) {
                    o || (o = !0, _this.bluetoothService.off("dataReceived", n), console.error("[DFU] 发送命令失败:", t), e(t));
                  });
                }, 50);
              });
              _context.next = 7;
              return g;
            case 7:
              D = _context.sent;
              console.log("[DFU] 接收响应原始数据:", this.arrayToHexString(new Uint8Array(D))), console.log("[DFU] 响应数据长度:", D.byteLength);
              _ = new Uint8Array(D);
              if (!(this.isBLE || (_ = c.decode(_), console.log("[DFU] SLIP 解码后:", this.arrayToHexString(_))), console.log("[DFU] 最终处理的响应数据:", this.arrayToHexString(_)), console.log("[DFU] 检查响应格式 - 期望命令:", t.toString(16), "响应头:", null == (s = _[0]) ? void 0 : s.toString(16), null == (i = _[1]) ? void 0 : i.toString(16), null == (l = _[2]) ? void 0 : l.toString(16)), _[0] !== o.RESPONSE)) {
                _context.next = 12;
                break;
              }
              throw console.error("[DFU] 响应头不正确，期望:", o.RESPONSE.toString(16), "实际:", null == (a = _[0]) ? void 0 : a.toString(16)), new Error("DFU 响应不正确");
            case 12:
              U = t === o.EXECUTE && _[1] === o.CALC_CHECKSUM || t === o.CREATE_OBJECT && _[1] === o.CALC_CHECKSUM || !1;
              if (!(_[1] !== t && !U)) {
                _context.next = 15;
                break;
              }
              throw console.error("[DFU] 命令不匹配，期望:", t.toString(16), "实际:", null == (h = _[1]) ? void 0 : h.toString(16), "cmd类型:", _typeof2(t), "responseData[1]类型:", _typeof2(_[1])), new Error("DFU 命令不匹配");
            case 15:
              if (!(U && console.log("[DFU] 收到特殊命令响应，这是正常现象"), _[2] === r)) {
                _context.next = 18;
                break;
              }
              _t2 = _.slice(3);
              return _context.abrupt("return", (console.log("[DFU] 命令执行成功，返回数据:", this.arrayToHexString(_t2)), _t2));
            case 18:
              if (!(_[2] === n)) {
                _context.next = 20;
                break;
              }
              throw console.error("[DFU] 扩展错误码:", null == (E = _[3]) ? void 0 : E.toString(16)), new Error("DFU \u9519\u8BEF: ".concat(_[3]));
            case 20:
              throw console.error("[DFU] 错误码:", null == (S = _[2]) ? void 0 : S.toString(16)), new Error("DFU \u9519\u8BEF: ".concat(_[2]));
            case 21:
            case "end":
              return _context.stop();
          }
        }, _callee, this);
      }));
      function sendCmd(_x) {
        return _sendCmd.apply(this, arguments);
      }
      return sendCmd;
    }()
  }, {
    key: "setPRN",
    value: function () {
      var _setPRN = _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee2() {
        var t,
          e,
          _args2 = arguments;
        return _regeneratorRuntime2().wrap(function _callee2$(_context2) {
          while (1) switch (_context2.prev = _context2.next) {
            case 0:
              t = _args2.length > 0 && _args2[0] !== undefined ? _args2[0] : 0;
              this.prn = t;
              e = new Uint8Array([255 & t, t >> 8 & 255]);
              _context2.next = 5;
              return this.sendCmd(o.SET_PRN, e);
            case 5:
              console.log("[DFU] 设置 PRN:", t);
            case 6:
            case "end":
              return _context2.stop();
          }
        }, _callee2, this);
      }));
      function setPRN() {
        return _setPRN.apply(this, arguments);
      }
      return setPRN;
    }()
  }, {
    key: "getMTU",
    value: function () {
      var _getMTU = _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee3() {
        var t;
        return _regeneratorRuntime2().wrap(function _callee3$(_context3) {
          while (1) switch (_context3.prev = _context3.next) {
            case 0:
              _context3.next = 2;
              return this.sendCmd(o.GET_SERIAL_MTU);
            case 2:
              t = _context3.sent;
              return _context3.abrupt("return", (this.mtu = t[0] | t[1] << 8, console.log("[DFU] 获取 MTU:", this.mtu), this.mtu));
            case 4:
            case "end":
              return _context3.stop();
          }
        }, _callee3, this);
      }));
      function getMTU() {
        return _getMTU.apply(this, arguments);
      }
      return getMTU;
    }()
  }, {
    key: "createObject",
    value: function () {
      var _createObject = _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee4(t, e) {
        var r;
        return _regeneratorRuntime2().wrap(function _callee4$(_context4) {
          while (1) switch (_context4.prev = _context4.next) {
            case 0:
              r = new Uint8Array([t, 255 & e, e >> 8 & 255, e >> 16 & 255, e >> 24 & 255]);
              _context4.next = 3;
              return this.sendCmd(o.CREATE_OBJECT, r);
            case 3:
              console.log("[DFU] 创建对象:", t, e);
            case 4:
            case "end":
              return _context4.stop();
          }
        }, _callee4, this);
      }));
      function createObject(_x2, _x3) {
        return _createObject.apply(this, arguments);
      }
      return createObject;
    }()
  }, {
    key: "writeObject",
    value: function () {
      var _writeObject = _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee5(t) {
        return _regeneratorRuntime2().wrap(function _callee5$(_context5) {
          while (1) switch (_context5.prev = _context5.next) {
            case 0:
              if (!(!t || 0 === t.length)) {
                _context5.next = 2;
                break;
              }
              throw console.error("[DFU] 尝试写入空数据"), new Error("无法写入空数据");
            case 2:
              _context5.next = 4;
              return this.bluetoothService.sendData(t, !0, "writeNoResponse");
            case 4:
              console.log("[DFU] 写入对象数据:", t.length, "字节");
            case 5:
            case "end":
              return _context5.stop();
          }
        }, _callee5, this);
      }));
      function writeObject(_x4) {
        return _writeObject.apply(this, arguments);
      }
      return writeObject;
    }()
  }, {
    key: "executeObject",
    value: function () {
      var _executeObject = _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee6() {
        return _regeneratorRuntime2().wrap(function _callee6$(_context6) {
          while (1) switch (_context6.prev = _context6.next) {
            case 0:
              _context6.next = 2;
              return this.sendCmd(o.EXECUTE);
            case 2:
              console.log("[DFU] 执行对象");
            case 3:
            case "end":
              return _context6.stop();
          }
        }, _callee6, this);
      }));
      function executeObject() {
        return _executeObject.apply(this, arguments);
      }
      return executeObject;
    }()
  }, {
    key: "calculateChecksum",
    value: function () {
      var _calculateChecksum = _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee7() {
        var t, e, r, n;
        return _regeneratorRuntime2().wrap(function _callee7$(_context7) {
          while (1) switch (_context7.prev = _context7.next) {
            case 0:
              _context7.next = 2;
              return this.sendCmd(o.CALC_CHECKSUM);
            case 2:
              t = _context7.sent;
              e = new DataView(t.buffer, t.byteOffset, t.byteLength);
              r = e.getUint32(0, !0);
              n = e.getUint32(4, !0);
              return _context7.abrupt("return", (console.log("[DFU] 计算校验和结果:", {
                offset: r,
                crc: n
              }), {
                offset: r,
                crc: n
              }));
            case 7:
            case "end":
              return _context7.stop();
          }
        }, _callee7, this);
      }));
      function calculateChecksum() {
        return _calculateChecksum.apply(this, arguments);
      }
      return calculateChecksum;
    }()
  }, {
    key: "flashFirmware",
    value: function () {
      var _flashFirmware = _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee8(t, e, o) {
        var r, n, s, i, _e3, l, a, h, _o4, E;
        return _regeneratorRuntime2().wrap(function _callee8$(_context8) {
          while (1) switch (_context8.prev = _context8.next) {
            case 0:
              if (!(!e || 0 === e.length)) {
                _context8.next = 2;
                break;
              }
              throw new Error("固件数据为空");
            case 2:
              r = e;
              if (r instanceof Uint8Array) {
                _context8.next = 15;
                break;
              }
              if (!(console.log("[DFU] firmwareBytes 不是 Uint8Array 类型，尝试转换"), r.buffer && r.buffer instanceof ArrayBuffer)) {
                _context8.next = 8;
                break;
              }
              r = new Uint8Array(r.buffer);
              _context8.next = 15;
              break;
            case 8:
              if (!(r instanceof ArrayBuffer)) {
                _context8.next = 12;
                break;
              }
              r = new Uint8Array(r);
              _context8.next = 15;
              break;
            case 12:
              if (Array.isArray(r)) {
                _context8.next = 14;
                break;
              }
              throw console.error("[DFU] 无法识别的固件数据类型:", _typeof2(r), r), new Error("无法将固件数据转换为 Uint8Array");
            case 14:
              r = new Uint8Array(r);
            case 15:
              if (!(!(r instanceof Uint8Array) || 0 === r.length)) {
                _context8.next = 17;
                break;
              }
              throw console.error("[DFU] 固件数据转换失败或为空"), new Error("固件数据转换失败");
            case 17:
              if (!(console.log("[DFU] 开始刷入固件:", t, r.length, "字节"), console.log("[DFU] 固件数据类型:", r.constructor.name), console.log("[DFU] 固件数据前10个字节:", this.arrayToHexString(r.slice(0, 10))), 0 === this.mtu)) {
                _context8.next = 27;
                break;
              }
              _context8.prev = 18;
              _context8.next = 21;
              return this.getMTU();
            case 21:
              this.mtu = _context8.sent;
              _context8.next = 27;
              break;
            case 24:
              _context8.prev = 24;
              _context8.t0 = _context8["catch"](18);
              console.warn("[DFU] 获取MTU失败，使用默认值20:", _context8.t0), this.mtu = 20;
            case 27:
              this.prn = 0;
              _context8.prev = 28;
              _context8.next = 31;
              return this.setPRN(16);
            case 31:
              this.prn = 16;
              _context8.next = 37;
              break;
            case 34:
              _context8.prev = 34;
              _context8.t1 = _context8["catch"](28);
              console.warn("[DFU] 设置PRN失败，将禁用PRN功能:", _context8.t1), this.prn = 0;
            case 37:
              n = 0, s = 0, i = 0;
              console.log("[DFU] 初始CRC值: 0x" + i.toString(16));
            case 39:
              if (!(n < r.length)) {
                _context8.next = 74;
                break;
              }
              _e3 = Math.min(r.length - n, 4096), l = 3;
              a = 0, h = !1;
            case 42:
              if (!(a < l && !h)) {
                _context8.next = 69;
                break;
              }
              a++;
              _context8.prev = 44;
              console.log("[DFU] [Attempt ".concat(a, "] \u521B\u5EFA\u5BF9\u8C61 - \u7C7B\u578B: ").concat(t, ", \u5927\u5C0F: ").concat(_e3));
              _context8.next = 48;
              return this.createObject(t, _e3);
            case 48:
              _o4 = r.slice(n, n + _e3);
              console.log("[DFU] \u53D1\u9001\u56FA\u4EF6\u5757: \u504F\u79FB=".concat(n, ", \u5927\u5C0F=").concat(_o4.length, ", \u5F53\u524DCRC=0x").concat(i.toString(16)));
              _context8.next = 52;
              return this.sendFirmwareObject(_o4, i, n);
            case 52:
              i = _context8.sent;
              console.log("[DFU] \u56FA\u4EF6\u5757\u53D1\u9001\u5B8C\u6210: \u65B0CRC=0x".concat(i.toString(16)));
              console.log("[DFU] [Attempt ".concat(a, "] \u6267\u884C\u5BF9\u8C61"));
              _context8.next = 57;
              return this.executeObject();
            case 57:
              h = !0;
              _context8.next = 67;
              break;
            case 60:
              _context8.prev = 60;
              _context8.t2 = _context8["catch"](44);
              if (!(console.error("[DFU] [Attempt ".concat(a, "] \u5237\u5165\u5757\u5931\u8D25:"), _context8.t2), a >= l)) {
                _context8.next = 64;
                break;
              }
              throw console.error("[DFU] 达到最大重试次数，刷入失败"), _context8.t2;
            case 64:
              console.log("[DFU] \u5728\u4E0B\u6B21\u5C1D\u8BD5\u524D\u7B49\u5F85 ".concat(100 * a, "ms"));
              _context8.next = 67;
              return this.delay(100 * a);
            case 67:
              _context8.next = 42;
              break;
            case 69:
              n += _e3;
              E = Math.floor(n / r.length * 100);
              E > s && (s = E, o && o(E));
            case 72:
              _context8.next = 39;
              break;
            case 74:
              o && o(100), console.log("[DFU] 固件刷入完成");
            case 75:
            case "end":
              return _context8.stop();
          }
        }, _callee8, this, [[18, 24], [28, 34], [44, 60]]);
      }));
      function flashFirmware(_x5, _x6, _x7) {
        return _flashFirmware.apply(this, arguments);
      }
      return flashFirmware;
    }()
  }, {
    key: "sendFirmwareObject",
    value: function () {
      var _sendFirmwareObject = _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee9(t, e, o) {
        var r, n, s, c, _e4, _l, _a, _t3, _e5, l, a;
        return _regeneratorRuntime2().wrap(function _callee9$(_context9) {
          while (1) switch (_context9.prev = _context9.next) {
            case 0:
              r = e, n = 0, s = 0;
              c = this.isBLE ? this.mtu > 0 ? this.mtu - 4 : 16 : 64;
              console.log("[DFU] \u53D1\u9001\u56FA\u4EF6\u5BF9\u8C61: \u5927\u5C0F=".concat(t.length, ", \u521D\u59CBCRC=0x").concat(r.toString(16), ", \u5168\u5C40\u504F\u79FB\u91CF=").concat(o));
            case 3:
              if (!(n < t.length)) {
                _context9.next = 23;
                break;
              }
              _e4 = Math.min(t.length - n, c), _l = t.slice(n, n + _e4);
              _context9.next = 7;
              return this.writeObject(_l);
            case 7:
              _context9.next = 9;
              return this.delay(2);
            case 9:
              _l.length > 0 && console.log("[DFU] \u53D1\u9001\u6570\u636E\u5757: \u957F\u5EA6=".concat(_l.length, ", \u524D\u51E0\u4E2A\u5B57\u8282=").concat(this.arrayToHexString(_l.slice(0, Math.min(4, _l.length)))));
              _a = r;
              if (!(r = i(_l, r), console.log("[DFU] CRC\u66F4\u65B0: 0x".concat(_a.toString(16), " -> 0x").concat(r.toString(16), ", \u5757\u5927\u5C0F=").concat(_l.length, "\u5B57\u8282")), n += _e4, this.prn > 0 && (s++, s === this.prn))) {
                _context9.next = 21;
                break;
              }
              _context9.next = 14;
              return this.delay(50);
            case 14:
              _context9.next = 16;
              return this.calculateChecksum();
            case 16:
              _t3 = _context9.sent;
              _e5 = o + n;
              if (!(console.log("[DFU] PRN \u6821\u9A8C: CRC=0x".concat(r.toString(16), ", \u8BBE\u5907\u8FD4\u56DECRC=0x").concat(_t3.crc.toString(16), " | Offset=").concat(_e5, ", \u8BBE\u5907\u8FD4\u56DEOffset=").concat(_t3.offset)), _t3.crc !== r || _t3.offset !== _e5)) {
                _context9.next = 20;
                break;
              }
              throw console.error("[DFU] CRC\u4E0D\u5339\u914D: \u8BA1\u7B97\u503C=0x".concat(r.toString(16), ", \u8BBE\u5907\u503C=0x").concat(_t3.crc.toString(16))), new Error("PRN \u6821\u9A8C\u5931\u8D25: CRC\u6216Offset\u4E0D\u5339\u914D (\u671F\u671BCRC=".concat(r, ", \u5B9E\u9645CRC=").concat(_t3.crc, ")"));
            case 20:
              s = 0;
            case 21:
              _context9.next = 3;
              break;
            case 23:
              _context9.next = 25;
              return this.delay(50);
            case 25:
              _context9.next = 27;
              return this.calculateChecksum();
            case 27:
              l = _context9.sent;
              a = o + n;
              if (!(console.log("[DFU] \u6700\u7EC8\u6821\u9A8C: CRC=0x".concat(r.toString(16), ", \u8BBE\u5907\u8FD4\u56DECRC=0x").concat(l.crc.toString(16), " | Offset=").concat(a, ", \u8BBE\u5907\u8FD4\u56DEOffset=").concat(l.offset)), l.crc !== r || l.offset !== a)) {
                _context9.next = 31;
                break;
              }
              throw console.error("[DFU] \u6700\u7EC8CRC\u4E0D\u5339\u914D: \u8BA1\u7B97\u503C=0x".concat(r.toString(16), ", \u8BBE\u5907\u503C=0x").concat(l.crc.toString(16))), new Error("\u6700\u7EC8\u6821\u9A8C\u5931\u8D25: CRC\u6216Offset\u4E0D\u5339\u914D (\u671F\u671BCRC=".concat(r, ", \u5B9E\u9645CRC=").concat(l.crc, ")"));
            case 31:
              return _context9.abrupt("return", r);
            case 32:
            case "end":
              return _context9.stop();
          }
        }, _callee9, this);
      }));
      function sendFirmwareObject(_x8, _x9, _x10) {
        return _sendFirmwareObject.apply(this, arguments);
      }
      return sendFirmwareObject;
    }()
  }, {
    key: "arrayToHexString",
    value: function arrayToHexString(t) {
      return Array.from(t).map(function (t) {
        return t.toString(16).padStart(2, "0");
      }).join(" ");
    }
  }, {
    key: "delay",
    value: function () {
      var _delay = _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee10(t) {
        return _regeneratorRuntime2().wrap(function _callee10$(_context10) {
          while (1) switch (_context10.prev = _context10.next) {
            case 0:
              return _context10.abrupt("return", new Promise(function (e) {
                return setTimeout(e, t);
              }));
            case 1:
            case "end":
              return _context10.stop();
          }
        }, _callee10);
      }));
      function delay(_x11) {
        return _delay.apply(this, arguments);
      }
      return delay;
    }()
  }]);
  return _class;
}(); 
 			}); 
		define("utils/error-handler.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";

var _defineProperty2 = require("../@babel/runtime/helpers/defineProperty");
var _toConsumableArray2 = require("../@babel/runtime/helpers/toConsumableArray");
require("../@babel/runtime/helpers/Arrayincludes");
var _objectSpread2 = require("../@babel/runtime/helpers/objectSpread2");
var _classCallCheck2 = require("../@babel/runtime/helpers/classCallCheck");
var _createClass2 = require("../@babel/runtime/helpers/createClass");
var e = require("../common/vendor.js"),
  r = "bluetooth",
  o = "device",
  n = "data",
  t = "system",
  s = "info",
  i = "warning",
  l = "error",
  a = "critical";
var d = new ( /*#__PURE__*/function () {
  function _class() {
    _classCallCheck2(this, _class);
    this.errorLog = [], this.maxLogSize = 100;
  }
  _createClass2(_class, [{
    key: "handle",
    value: function handle(e) {
      var r = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : t;
      var o = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : l;
      var n = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};
      var s = this._formatError(e, r, o, n);
      return this._logError(s), this._showUserMessage(s), o === a && this._reportError(s), s;
    }
  }, {
    key: "handleBluetoothError",
    value: function handleBluetoothError(e) {
      var o = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
      var n = "蓝牙操作失败",
        t = l;
      return "string" == typeof e && (e.includes("not available") ? n = "蓝牙不可用，请检查设备蓝牙设置" : e.includes("permission") ? (n = "缺少蓝牙权限，请在设置中允许蓝牙访问", t = i) : e.includes("timeout") ? n = "连接超时，请重试" : e.includes("connection failed") ? n = "设备连接失败，请确保设备已开机且在范围内" : e.includes("service not found") && (n = "设备服务不可用，请检查设备固件版本")), this.handle(e, r, t, _objectSpread2(_objectSpread2({}, o), {}, {
        userMessage: n
      }));
    }
  }, {
    key: "handleDeviceError",
    value: function handleDeviceError(e) {
      var r = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
      var n = "设备操作失败";
      return "string" == typeof e && (e.includes("not connected") ? n = "设备未连接，请先连接设备" : e.includes("command failed") ? n = "设备命令执行失败，请重试" : e.includes("invalid response") ? n = "设备响应异常，请检查设备状态" : e.includes("firmware") && (n = "固件版本不兼容，请更新设备固件")), this.handle(e, o, l, _objectSpread2(_objectSpread2({}, r), {}, {
        userMessage: n
      }));
    }
  }, {
    key: "handleDataError",
    value: function handleDataError(e) {
      var r = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
      var o = "数据处理失败";
      return "string" == typeof e && (e.includes("invalid format") ? o = "数据格式无效，请检查输入" : e.includes("validation") ? o = "数据验证失败，请确认输入内容" : e.includes("storage") ? o = "数据存储失败，请检查设备存储空间" : e.includes("parse") && (o = "数据解析失败，文件可能已损坏")), this.handle(e, n, i, _objectSpread2(_objectSpread2({}, r), {}, {
        userMessage: o
      }));
    }
  }, {
    key: "getErrorLog",
    value: function getErrorLog() {
      return _toConsumableArray2(this.errorLog);
    }
  }, {
    key: "clearErrorLog",
    value: function clearErrorLog() {
      this.errorLog = [];
    }
  }, {
    key: "exportErrorLog",
    value: function exportErrorLog() {
      return JSON.stringify(this.errorLog, null, 2);
    }
  }, {
    key: "_formatError",
    value: function _formatError(e, r, o, n) {
      return {
        timestamp: new Date().toISOString(),
        type: r,
        level: o,
        message: e instanceof Error ? e.message : String(e),
        stack: e instanceof Error ? e.stack : void 0,
        context: n,
        userMessage: n.userMessage || this._getDefaultUserMessage(r, o)
      };
    }
  }, {
    key: "_logError",
    value: function _logError(r) {
      this.errorLog.unshift(r), this.errorLog.length > this.maxLogSize && (this.errorLog = this.errorLog.slice(0, this.maxLogSize));
      var o = r.level === a || r.level === l ? "error" : r.level === i ? "warn" : "log";
      console[o]("[ErrorHandler]", r.type, r.message, r.context);
      try {
        var _o = e.index.getStorageSync("error_log") || [];
        _o.unshift(r);
        var _n = _o.slice(0, 50);
        e.index.setStorageSync("error_log", _n);
      } catch (n) {
        console.warn("[ErrorHandler] Failed to save error log to storage:", n);
      }
    }
  }, {
    key: "_showUserMessage",
    value: function _showUserMessage(r) {
      var o = r.level,
        n = r.userMessage;
      o === s ? e.index.showToast({
        title: n,
        icon: "none",
        duration: 2e3
      }) : o === i ? e.index.showToast({
        title: n,
        icon: "none",
        duration: 3e3
      }) : e.index.showModal({
        title: o === a ? "严重错误" : "操作失败",
        content: n,
        showCancel: !1,
        confirmText: "确定"
      });
    }
  }, {
    key: "_reportError",
    value: function _reportError(e) {
      console.warn("[ErrorHandler] Critical error reported:", e);
    }
  }, {
    key: "_getDefaultUserMessage",
    value: function _getDefaultUserMessage(e, t) {
      var _r, _o2, _n2, _r$o$n$e;
      var s;
      return (null == (s = (_r$o$n$e = {}, _defineProperty2(_r$o$n$e, r, (_r = {}, _defineProperty2(_r, l, "蓝牙连接出现问题，请重试"), _defineProperty2(_r, i, "蓝牙操作需要注意"), _defineProperty2(_r, a, "蓝牙系统严重错误"), _r)), _defineProperty2(_r$o$n$e, o, (_o2 = {}, _defineProperty2(_o2, l, "设备操作失败，请检查设备状态"), _defineProperty2(_o2, i, "设备操作需要注意"), _defineProperty2(_o2, a, "设备系统严重错误"), _o2)), _defineProperty2(_r$o$n$e, n, (_n2 = {}, _defineProperty2(_n2, l, "数据操作失败，请重试"), _defineProperty2(_n2, i, "数据格式需要注意"), _defineProperty2(_n2, a, "数据严重损坏"), _n2)), _r$o$n$e)[e]) ? void 0 : s[t]) || "操作失败，请重试";
    }
  }]);
  return _class;
}())();
"undefined" != typeof window && (window.addEventListener("error", function (e) {
  d.handle(e.error || e.message, t, l, {
    filename: e.filename,
    lineno: e.lineno,
    colno: e.colno
  });
}), window.addEventListener("unhandledrejection", function (e) {
  d.handle(e.reason, t, l, {
    type: "unhandledrejection"
  });
})), exports.errorHandler = d, exports.installErrorHandler = function (e) {
  e && e.config && (e.config.errorHandler = function (e, r, o) {
    var n;
    d.handle(e, t, l, {
      component: (null == (n = null == r ? void 0 : r.$options) ? void 0 : n.name) || "Unknown",
      errorInfo: o
    });
  });
}; 
 			}); 
		define("utils/firmware.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";

var _regeneratorRuntime2 = require("../@babel/runtime/helpers/regeneratorRuntime");
var _asyncToGenerator2 = require("../@babel/runtime/helpers/asyncToGenerator");
var r = require("../common/vendor.js"),
  e = require("./http.js");
exports.checkFirmwareUpdate = /*#__PURE__*/function () {
  var _ref = _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee(r, t) {
    var o;
    return _regeneratorRuntime2().wrap(function _callee$(_context) {
      while (1) switch (_context.prev = _context.next) {
        case 0:
          _context.prev = 0;
          _context.next = 3;
          return e.http.post("https://i.tlq520.cn/ultra/api/v1/firmware/check", {
            version: r,
            chip_id: t
          });
        case 3:
          o = _context.sent;
          return _context.abrupt("return", (console.log("[Firmware] 检查更新结果:", o), o));
        case 7:
          _context.prev = 7;
          _context.t0 = _context["catch"](0);
          throw console.error("[Firmware] 检查更新失败:", _context.t0), _context.t0;
        case 10:
        case "end":
          return _context.stop();
      }
    }, _callee, null, [[0, 7]]);
  }));
  return function (_x, _x2) {
    return _ref.apply(this, arguments);
  };
}(), exports.downloadFirmware = /*#__PURE__*/function () {
  var _ref2 = _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee2(e) {
    return _regeneratorRuntime2().wrap(function _callee2$(_context2) {
      while (1) switch (_context2.prev = _context2.next) {
        case 0:
          _context2.prev = 0;
          return _context2.abrupt("return", (console.log("[Firmware] 开始下载固件:", e), new Promise(function (t, o) {
            r.index.request({
              url: e,
              method: "GET",
              responseType: "arraybuffer",
              header: {
                Accept: "*/*"
              },
              success: function success(r) {
                if (200 === r.statusCode) console.log("[Firmware] 下载固件成功，数据大小:", r.data.byteLength, "字节"), t(r.data);else {
                  var _e = new Error("\u4E0B\u8F7D\u5931\u8D25\uFF0C\u72B6\u6001\u7801: ".concat(r.statusCode));
                  console.error("[Firmware] 下载固件失败:", _e), o(_e);
                }
              },
              fail: function fail(r) {
                var e = new Error("网络连接失败");
                e.original = r, console.error("[Firmware] 下载固件失败:", e, r), o(e);
              }
            });
          })));
        case 4:
          _context2.prev = 4;
          _context2.t0 = _context2["catch"](0);
          throw console.error("[Firmware] 下载固件失败:", _context2.t0), _context2.t0;
        case 7:
        case "end":
          return _context2.stop();
      }
    }, _callee2, null, [[0, 4]]);
  }));
  return function (_x3) {
    return _ref2.apply(this, arguments);
  };
}(), exports.downloadLatestDFUFirmware = /*#__PURE__*/_asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee3() {
  var _e2;
  return _regeneratorRuntime2().wrap(function _callee3$(_context3) {
    while (1) switch (_context3.prev = _context3.next) {
      case 0:
        _context3.prev = 0;
        _e2 = "https://i.tlq520.cn/ultra/api/v1/firmware/download/lastest.zip";
        return _context3.abrupt("return", (console.log("[Firmware] 开始下载最新DFU固件:", _e2), new Promise(function (t, o) {
          r.index.request({
            url: _e2,
            method: "GET",
            responseType: "arraybuffer",
            header: {
              Accept: "*/*"
            },
            success: function success(r) {
              if (200 === r.statusCode) console.log("[Firmware] 下载最新DFU固件成功，数据大小:", r.data.byteLength, "字节"), t(r.data);else {
                var _e3 = new Error("\u4E0B\u8F7D\u5931\u8D25\uFF0C\u72B6\u6001\u7801: ".concat(r.statusCode));
                console.error("[Firmware] 下载最新DFU固件失败:", _e3), o(_e3);
              }
            },
            fail: function fail(r) {
              var e = new Error("网络连接失败");
              e.original = r, console.error("[Firmware] 下载最新DFU固件失败:", e, r), o(e);
            }
          });
        })));
      case 5:
        _context3.prev = 5;
        _context3.t0 = _context3["catch"](0);
        throw console.error("[Firmware] 下载最新DFU固件失败:", _context3.t0), _context3.t0;
      case 8:
      case "end":
        return _context3.stop();
    }
  }, _callee3, null, [[0, 5]]);
})), exports.isFirmwareCompatible = function (r) {
  return !(!r || r.length < 5);
}, exports.unpackFirmware = /*#__PURE__*/function () {
  var _ref4 = _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee4(e) {
    var t, o, a, n, i, s;
    return _regeneratorRuntime2().wrap(function _callee4$(_context4) {
      while (1) switch (_context4.prev = _context4.next) {
        case 0:
          _context4.prev = 0;
          t = new r.JSZip();
          _context4.next = 4;
          return t.loadAsync(e);
        case 4:
          o = _context4.sent;
          a = new Uint8Array(0), n = new Uint8Array(0);
          i = o.file("application.dat"), s = o.file("application.bin");
          if (i) {
            _context4.next = 9;
            break;
          }
          throw new Error("固件包中缺少 application.dat 文件");
        case 9:
          _context4.t0 = Uint8Array;
          _context4.next = 12;
          return i.async("arraybuffer");
        case 12:
          _context4.t1 = _context4.sent;
          a = new _context4.t0(_context4.t1);
          if (s) {
            _context4.next = 16;
            break;
          }
          throw new Error("固件包中缺少 application.bin 文件");
        case 16:
          _context4.t2 = Uint8Array;
          _context4.next = 19;
          return s.async("arraybuffer");
        case 19:
          _context4.t3 = _context4.sent;
          n = new _context4.t2(_context4.t3);
          console.log("[Firmware] 解包固件成功:", "application.dat:", a.length, "字节", "application.bin:", n.length, "字节");
          return _context4.abrupt("return", {
            applicationDat: a,
            applicationBin: n
          });
        case 25:
          _context4.prev = 25;
          _context4.t4 = _context4["catch"](0);
          throw console.error("[Firmware] 解包固件失败:", _context4.t4), _context4.t4;
        case 28:
        case "end":
          return _context4.stop();
      }
    }, _callee4, null, [[0, 25]]);
  }));
  return function (_x4) {
    return _ref4.apply(this, arguments);
  };
}(), exports.validateFirmware = function (r, e) {
  if (!r || 0 === r.length || !e || 0 === e.length) throw new Error("固件文件为空");
  return !0;
}; 
 			}); 
		define("utils/geofence-utils.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";

exports.generateGeofenceId = function () {
  return "gf_" + Date.now() + "_" + Math.random().toString(36).substr(2, 9);
}, exports.isPointInPolygon = function (t, e) {
  if (!t || !e || e.length < 3) return !1;
  var n = t.longitude,
    o = t.latitude;
  var r = !1,
    l = e.length - 1;
  for (var s = 0; s < e.length; s++) {
    var _t = e[s].longitude,
      i = e[s].latitude,
      u = e[l].longitude,
      d = e[l].latitude;
    i > o != d > o && n < (u - _t) * (o - i) / (d - i) + _t && (r = !r), l = s;
  }
  return r;
}, exports.validateGeofence = function (t) {
  var e = [];
  return t ? (t.name && "" !== t.name.trim() || e.push("围栏名称不能为空"), (void 0 === t.slotId || t.slotId < 0 || t.slotId > 15) && e.push("卡槽ID必须在0-15之间"), (!t.polygon || t.polygon.length < 3) && e.push("围栏区域至少需要3个点"), {
    valid: 0 === e.length,
    errors: e
  }) : (e.push("围栏配置不能为空"), {
    valid: !1,
    errors: e
  });
}; 
 			}); 
		define("utils/http.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";

var _objectSpread2 = require("../@babel/runtime/helpers/objectSpread2");
var _classCallCheck2 = require("../@babel/runtime/helpers/classCallCheck");
var _createClass2 = require("../@babel/runtime/helpers/createClass");
var e = require("../common/vendor.js");
var t = new ( /*#__PURE__*/function () {
  function _class() {
    _classCallCheck2(this, _class);
  }
  _createClass2(_class, [{
    key: "get",
    value: function get(e) {
      var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
      var s = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};
      return this.request(_objectSpread2({
        url: e,
        method: "GET",
        data: t
      }, s));
    }
  }, {
    key: "post",
    value: function post(e) {
      var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
      var s = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};
      return this.request(_objectSpread2({
        url: e,
        method: "POST",
        data: t
      }, s));
    }
  }, {
    key: "request",
    value: function request(t) {
      var _this = this;
      var s = {
        url: t.url.startsWith("http") ? t.url : "https://i.tlq520.cn/ultra/api/v1".concat(t.url),
        method: t.method || "GET",
        data: t.data || {},
        header: _objectSpread2({
          "Content-Type": t.contentType || "application/json"
        }, t.header),
        timeout: t.timeout || 3e4
      };
      return this.beforeRequest(s), new Promise(function (t, r) {
        e.index.request(_objectSpread2(_objectSpread2({}, s), {}, {
          success: function success(e) {
            _this.handleResponse(e, t, r);
          },
          fail: function fail(e) {
            _this.handleError(e, r);
          }
        }));
      });
    }
  }, {
    key: "beforeRequest",
    value: function beforeRequest(e) {
      console.log("[HTTP] 请求开始", e);
    }
  }, {
    key: "handleResponse",
    value: function handleResponse(e, t, s) {
      var r, o;
      if (console.log("[HTTP] 响应数据", e), e.statusCode >= 200 && e.statusCode < 300) {
        if (e.data instanceof ArrayBuffer) return console.log("[HTTP] 返回二进制数据，长度:", e.data.byteLength), void t(e.data);
        if (e.data && 200 === e.data.code) t(e.data);else {
          var _t = new Error((null == (r = e.data) ? void 0 : r.message) || "请求失败");
          _t.code = (null == (o = e.data) ? void 0 : o.code) || -1, _t.data = e.data, s(_t);
        }
      } else {
        var _t2 = new Error("HTTP \u9519\u8BEF: ".concat(e.statusCode));
        _t2.statusCode = e.statusCode, _t2.data = e.data, s(_t2);
      }
    }
  }, {
    key: "handleError",
    value: function handleError(e, t) {
      console.error("[HTTP] 请求错误", e);
      var s = "网络请求失败";
      e.errMsg && (e.errMsg.includes("timeout") ? s = "请求超时" : e.errMsg.includes("fail") && (s = "网络连接失败"));
      var r = new Error(s);
      r.original = e, t(r);
    }
  }]);
  return _class;
}())();
exports.http = t; 
 			}); 
		define("app.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";

var _regeneratorRuntime2 = require("@babel/runtime/helpers/regeneratorRuntime");
var _asyncToGenerator2 = require("@babel/runtime/helpers/asyncToGenerator");
Object.defineProperty(exports, Symbol.toStringTag, {
  value: "Module"
});
var t = require("./common/vendor.js"),
  e = require("./utils/error-handler.js"),
  o = require("./store/index.js"),
  i = require("./utils/card-data.js");
Math;
var s = {
  data: function data() {
    return {
      bluetoothInitialized: !1,
      bluetoothInitPromise: null
    };
  },
  onLaunch: function onLaunch() {
    console.log("ChameleonUltra App 启动"), e.installErrorHandler(this), this.initializeApp();
  },
  onShow: function onShow() {
    var _this = this;
    console.log("ChameleonUltra App 显示"), setTimeout(function () {
      _this.checkBluetoothStatus();
    }, 500);
  },
  onHide: function onHide() {
    console.log("ChameleonUltra App 隐藏"), this.saveAppState();
  },
  onError: function onError(t) {
    console.error("App Error:", t), e.errorHandler.handle(t, "system", "error", {
      source: "App.vue onError"
    });
  },
  methods: {
    initializeApp: function initializeApp() {
      var _this2 = this;
      return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee() {
        return _regeneratorRuntime2().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              _context.prev = 0;
              _context.next = 3;
              return _this2.checkStoragePermission();
            case 3:
              _context.next = 5;
              return _this2.loadUserSettings();
            case 5:
              _context.next = 7;
              return _this2.initCardsData();
            case 7:
              _context.next = 9;
              return _this2.initBluetooth();
            case 9:
              console.log("应用初始化完成");
              _context.next = 15;
              break;
            case 12:
              _context.prev = 12;
              _context.t0 = _context["catch"](0);
              e.errorHandler.handle(_context.t0, "system", "error", {
                source: "App初始化"
              });
            case 15:
            case "end":
              return _context.stop();
          }
        }, _callee, null, [[0, 12]]);
      }))();
    },
    checkStoragePermission: function checkStoragePermission() {
      return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee2() {
        return _regeneratorRuntime2().wrap(function _callee2$(_context2) {
          while (1) switch (_context2.prev = _context2.next) {
            case 0:
              _context2.prev = 0;
              return _context2.abrupt("return", (t.index.setStorageSync("app_test", "test"), t.index.removeStorageSync("app_test"), !0));
            case 4:
              _context2.prev = 4;
              _context2.t0 = _context2["catch"](0);
              throw new Error("存储权限检查失败");
            case 7:
            case "end":
              return _context2.stop();
          }
        }, _callee2, null, [[0, 4]]);
      }))();
    },
    loadUserSettings: function loadUserSettings() {
      var _this3 = this;
      return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee3() {
        var _e;
        return _regeneratorRuntime2().wrap(function _callee3$(_context3) {
          while (1) switch (_context3.prev = _context3.next) {
            case 0:
              try {
                _e = t.index.getStorageSync("user_settings") || {};
                _this3.$store.commit("device/UPDATE_SETTINGS", _e), _this3.$store.dispatch("device/loadSettings");
              } catch (e) {
                console.warn("加载用户配置失败:", e);
              }
            case 1:
            case "end":
              return _context3.stop();
          }
        }, _callee3);
      }))();
    },
    initCardsData: function initCardsData() {
      var _this4 = this;
      return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee4() {
        return _regeneratorRuntime2().wrap(function _callee4$(_context4) {
          while (1) switch (_context4.prev = _context4.next) {
            case 0:
              _context4.prev = 0;
              _context4.next = 3;
              return _this4.$store.dispatch("cards/initCards");
            case 3:
              console.log("卡包数据初始化完成");
              _context4.next = 9;
              break;
            case 6:
              _context4.prev = 6;
              _context4.t0 = _context4["catch"](0);
              console.warn("初始化卡包数据失败:", _context4.t0);
            case 9:
            case "end":
              return _context4.stop();
          }
        }, _callee4, null, [[0, 6]]);
      }))();
    },
    initBluetooth: function initBluetooth() {
      var _this5 = this;
      return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee5() {
        return _regeneratorRuntime2().wrap(function _callee5$(_context5) {
          while (1) switch (_context5.prev = _context5.next) {
            case 0:
              if (!_this5.bluetoothInitPromise) {
                _context5.next = 2;
                break;
              }
              return _context5.abrupt("return", _this5.bluetoothInitPromise);
            case 2:
              _this5.bluetoothInitPromise = new Promise(function (e, o) {
                t.index.openBluetoothAdapter({
                  success: function success(t) {
                    console.log("蓝牙适配器初始化成功:", t), _this5.bluetoothInitialized = !0, e(!0);
                  },
                  fail: function fail(t) {
                    console.warn("蓝牙初始化失败:", t), 10001 === t.errCode ? (console.warn("蓝牙未打开，请打开蓝牙后重试"), _this5.bluetoothInitialized = !1, e(!1)) : 10002 === t.errCode ? (console.warn("没有找到指定设备"), _this5.bluetoothInitialized = !1, e(!1)) : t.errMsg && t.errMsg.includes("already opened") ? (console.log("蓝牙适配器已经打开，无需重复初始化"), _this5.bluetoothInitialized = !0, e(!0)) : (console.warn("蓝牙初始化失败，请检查设备蓝牙功能"), _this5.bluetoothInitialized = !1, e(!1));
                  }
                });
              });
              _context5.prev = 3;
              _context5.next = 6;
              return _this5.bluetoothInitPromise;
            case 6:
              return _context5.abrupt("return", _context5.sent);
            case 9:
              _context5.prev = 9;
              _context5.t0 = _context5["catch"](3);
              return _context5.abrupt("return", (console.warn("蓝牙初始化异常:", _context5.t0), _this5.bluetoothInitialized = !1, !1));
            case 12:
            case "end":
              return _context5.stop();
          }
        }, _callee5, null, [[3, 9]]);
      }))();
    },
    checkBluetoothStatus: function checkBluetoothStatus() {
      var _this6 = this;
      return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee6() {
        return _regeneratorRuntime2().wrap(function _callee6$(_context6) {
          while (1) switch (_context6.prev = _context6.next) {
            case 0:
              if (_this6.bluetoothInitialized) {
                _context6.next = 6;
                break;
              }
              console.log("蓝牙未初始化，尝试重新初始化...");
              _context6.next = 4;
              return _this6.initBluetooth();
            case 4:
              if (_context6.sent) {
                _context6.next = 6;
                break;
              }
              return _context6.abrupt("return", void console.warn("蓝牙初始化失败，跳过状态检查"));
            case 6:
              t.index.getBluetoothAdapterState({
                success: function success(t) {
                  console.log("蓝牙状态检查成功:", t), _this6.$store.commit("device/UPDATE_BLUETOOTH_STATE", {
                    available: t.available,
                    discovering: t.discovering
                  });
                },
                fail: function fail(t) {
                  console.warn("获取蓝牙状态失败:", t), 10001 === t.errCode && (_this6.bluetoothInitialized = !1, _this6.bluetoothInitPromise = null), _this6.$store.commit("device/UPDATE_BLUETOOTH_STATE", {
                    available: !1,
                    discovering: !1
                  });
                }
              });
            case 7:
            case "end":
              return _context6.stop();
          }
        }, _callee6);
      }))();
    },
    saveAppState: function saveAppState() {
      try {
        var _e2 = this.$store.state.device.settings || {};
        t.index.setStorageSync("user_settings", _e2);
        var _o = this.$store.state.cards.cards || [];
        _o.length > 0 && t.index.setStorageSync("user_cards", _o);
      } catch (e) {
        console.warn("保存应用状态失败:", e);
      }
    }
  }
};
var r = t._export_sfc(s, [["render", function (t, e, o, i, s, r) {
  return {};
}]]);
function n() {
  var e = t.createSSRApp(r);
  return e.use(o.store), e.config.globalProperties.$CardDataUtils = i.CardDataUtils, {
    app: e
  };
}
n().app.mount("#app"), exports.createApp = n; 
 			}); 	require("app.js");
 		__wxRoute = 'components/card-data-viewer/card-data-viewer';__wxRouteBegin = true; 	__wxAppCurrentFile__ = 'components/card-data-viewer/card-data-viewer.js';	define("components/card-data-viewer/card-data-viewer.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";

var _createForOfIteratorHelper2 = require("../../@babel/runtime/helpers/createForOfIteratorHelper");
var _objectSpread2 = require("../../@babel/runtime/helpers/objectSpread2");
var _typeof2 = require("../../@babel/runtime/helpers/typeof");
var _toConsumableArray2 = require("../../@babel/runtime/helpers/toConsumableArray");
var t = require("../../common/vendor.js"),
  e = require("../../utils/chameleon-protocol.js"),
  i = {
    name: "CardDataViewer",
    props: {
      card: {
        type: Object,
        required: !0
      },
      editable: {
        type: Boolean,
        default: !1
      }
    },
    data: function data() {
      return {
        isEditing: !1,
        editableCard: null,
        editingBlock: null,
        editingPage: null,
        tempEditValue: "",
        quickEditValue: "",
        showEditDialog: !1
      };
    },
    computed: {
      isMifareClassic: function isMifareClassic() {
        return this.card.tag === e.TagType.MIFARE_1024 || this.card.tag === e.TagType.MIFARE_2048 || this.card.tag === e.TagType.MIFARE_4096;
      },
      isNTAG: function isNTAG() {
        return this.card.tag === e.TagType.NTAG_213 || this.card.tag === e.TagType.NTAG_215 || this.card.tag === e.TagType.NTAG_216;
      },
      isEM410X: function isEM410X() {
        return this.card.tag === e.TagType.EM410X;
      },
      displayCard: function displayCard() {
        return this.isEditing ? this.editableCard : this.card;
      },
      quickEditPlaceholder: function quickEditPlaceholder() {
        return "\u8BF7\u8F93\u5165\u5B8C\u6574\u7684\u5361\u7247\u6570\u636E\uFF0C\u6BCF\u884C\u4EE3\u8868\u4E00\u4E2A".concat(this.isMifareClassic ? "块" : "页面", "\u7684\u6570\u636E\n\u4F8B\u5982:\nFF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF\n00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00");
      },
      sectors: function sectors() {
        if (!this.isMifareClassic || !this.displayCard.data) return [];
        var t = [];
        for (var _e = 0; _e < this.displayCard.data.length; _e += 4) {
          var _i = this.displayCard.data.slice(_e, _e + 4);
          t.push(_i);
        }
        return t;
      },
      pages: function pages() {
        return this.isNTAG && this.displayCard.data ? this.displayCard.data : [];
      },
      sectorCount: function sectorCount() {
        return this.sectors.length;
      },
      blockCount: function blockCount() {
        return this.getAllBlocks.length;
      },
      pageCount: function pageCount() {
        return this.pages.length;
      },
      getAllBlocks: function getAllBlocks() {
        if (this.isMifareClassic) {
          if (this.displayCard.data && this.displayCard.data.length > 0) return this.displayCard.data;
          if (this.displayCard.sectors && this.displayCard.sectors.length > 0) {
            var _t = [];
            return this.displayCard.sectors.forEach(function (e) {
              e.blocks && e.blocks.length > 0 ? _t.push.apply(_t, _toConsumableArray2(e.blocks)) : Array.isArray(e) && e.length > 0 && _t.push.apply(_t, _toConsumableArray2(e));
            }), _t;
          }
          {
            var _t2 = [];
            return this.sectors.forEach(function (e) {
              _t2.push.apply(_t2, _toConsumableArray2(e));
            }), _t2;
          }
        }
        return this.displayCard.pages && this.displayCard.pages.length > 0 ? this.displayCard.pages : this.displayCard.data && this.displayCard.data.length > 0 ? this.displayCard.data : this.pages;
      },
      dataSize: function dataSize() {
        return this.card.data ? this.card.data.reduce(function (t, e) {
          return t + (e.length || 0);
        }, 0) : 0;
      }
    },
    watch: {
      card: {
        handler: function handler(t) {
          t && !this.isEditing && (this.editableCard = this.deepCloneCard(t));
        },
        immediate: !0,
        deep: !0
      }
    },
    methods: {
      convertToArray: function convertToArray(t) {
        if (!t) return [];
        if (Array.isArray(t)) return t;
        if ("object" == _typeof2(t)) {
          if ("number" == typeof t.length) return Array.from(t);
          return Object.keys(t).map(function (t) {
            return parseInt(t);
          }).filter(function (t) {
            return !isNaN(t);
          }).sort(function (t, e) {
            return t - e;
          }).map(function (e) {
            return t[e];
          });
        }
        return [];
      },
      formatBlockData: function formatBlockData(t) {
        try {
          var _e2 = this.convertToArray(t);
          return 0 === _e2.length ? "无数据" : _e2.map(function (t) {
            return t.toString(16).padStart(2, "0").toUpperCase();
          }).join(" ");
        } catch (e) {
          return console.error("formatBlockData error:", e, t), "数据错误";
        }
      },
      formatPageData: function formatPageData(t) {
        return this.formatBlockData(t);
      },
      getBlockTypeName: function getBlockTypeName(t) {
        return 3 === t ? "扇区尾块" : "数据块";
      },
      getPageTypeName: function getPageTypeName(t) {
        return t < 4 ? "头部页面" : t >= this.pageCount - 5 ? "配置页面" : "用户页面";
      },
      formatKeyA: function formatKeyA(t) {
        try {
          var _e3 = this.convertToArray(t);
          if (_e3.length < 6) return "未知";
          return _e3.slice(0, 6).map(function (t) {
            return t.toString(16).padStart(2, "0").toUpperCase();
          }).join(" ");
        } catch (e) {
          return console.error("formatKeyA error:", e, t), "未知";
        }
      },
      formatKeyB: function formatKeyB(t) {
        try {
          var _e4 = this.convertToArray(t);
          if (_e4.length < 16) return "未知";
          return _e4.slice(10, 16).map(function (t) {
            return t.toString(16).padStart(2, "0").toUpperCase();
          }).join(" ");
        } catch (e) {
          return console.error("formatKeyB error:", e, t), "未知";
        }
      },
      formatAccessBits: function formatAccessBits(t) {
        try {
          var _e5 = this.convertToArray(t);
          if (_e5.length < 10) return "未知";
          return _e5.slice(6, 10).map(function (t) {
            return t.toString(16).padStart(2, "0").toUpperCase();
          }).join(" ");
        } catch (e) {
          return console.error("formatAccessBits error:", e, t), "未知";
        }
      },
      formatUID: function formatUID(t) {
        try {
          var _e6 = this.convertToArray(t);
          if (_e6.length < 4) return "未知";
          return _e6.slice(0, 4).map(function (t) {
            return t.toString(16).padStart(2, "0").toUpperCase();
          }).join(" ");
        } catch (e) {
          return console.error("formatUID error:", e, t), "未知";
        }
      },
      formatEM410XData: function formatEM410XData() {
        if (!this.card.data || 0 === this.card.data.length) return "无数据";
        var t = this.card.data[0];
        return this.formatBlockData(t);
      },
      copyEMData: function copyEMData() {
        var e = "EM410X\u6570\u636E:\n\u5B8C\u6574\u6570\u636E: ".concat(this.formatEM410XData(), "\nUID: ").concat(this.card.uid);
        t.index.setClipboardData({
          data: e,
          success: function success() {
            t.index.showToast({
              title: "已复制EM410X数据",
              icon: "success"
            });
          }
        });
      },
      copyAllData: function copyAllData() {
        var _this = this;
        if (!this.card.data || 0 === this.card.data.length) return void t.index.showToast({
          title: "无数据可复制",
          icon: "none"
        });
        var e = this.card.data.map(function (t, e) {
          return "\u5757 ".concat(e, ": ").concat(_this.formatBlockData(t));
        }).join("\n");
        t.index.setClipboardData({
          data: e,
          success: function success() {
            t.index.showToast({
              title: "已复制全部数据",
              icon: "success"
            });
          }
        });
      },
      copyBlockData: function copyBlockData(e) {
        var i = this.formatBlockData(e);
        t.index.setClipboardData({
          data: i,
          success: function success() {
            t.index.showToast({
              title: "已复制到剪贴板",
              icon: "success"
            });
          }
        });
      },
      copyPageData: function copyPageData(t) {
        this.copyBlockData(t);
      },
      deepCloneCard: function deepCloneCard(t) {
        var e = _objectSpread2(_objectSpread2({}, t), {}, {
          data: t.data ? t.data.map(function (t) {
            if (t instanceof Uint8Array) return Array.from(t);
            if (Array.isArray(t)) return _toConsumableArray2(t);
            if (t && "object" == _typeof2(t)) {
              var _e7 = Object.keys(t);
              if (_e7.every(function (t) {
                return !isNaN(parseInt(t));
              })) {
                var _i2 = [];
                for (var _a = 0; _a < _e7.length; _a++) _i2[_a] = t[_a];
                return _i2;
              }
            }
            return console.warn("🔍 deepCloneCard - 未知数据块格式:", t), [];
          }) : []
        });
        return console.log("🔍 deepCloneCard - 原始数据:", t.data ? t.data.length : 0, "块"), console.log("🔍 deepCloneCard - 克隆数据:", e.data ? e.data.length : 0, "块"), e;
      },
      startEditing: function startEditing() {
        this.isEditing = !0, this.editableCard = this.deepCloneCard(this.card), this.editableCard.data || (this.editableCard.data = []), console.log("🔍 开始编辑 - 原始卡片:", this.card), console.log("🔍 开始编辑 - 克隆后的editableCard:", this.editableCard), console.log("🔍 开始编辑 - 原始数据块数量:", this.card.data ? this.card.data.length : 0), console.log("🔍 开始编辑 - 克隆数据块数量:", this.editableCard.data ? this.editableCard.data.length : 0), this.$emit("edit-start");
      },
      saveChanges: function saveChanges() {
        this.exitEditing();
      },
      exitEditing: function exitEditing() {
        this.isEditing = !1, console.log("🔍 退出编辑 - 原始卡片数据:", this.card), console.log("🔍 退出编辑 - 编辑后数据:", this.editableCard), console.log("🔍 退出编辑 - 数据块数量:", this.editableCard.data ? this.editableCard.data.length : 0), this.$emit("data-changed", this.editableCard), t.index.showToast({
          title: "编辑完成，数据已保存",
          icon: "success"
        });
      },
      editBlock: function editBlock(t, e, i) {
        this.editingBlock = {
          sectorIndex: t,
          blockIndex: e
        }, this.editingPage = null, this.tempEditValue = this.formatBlockData(i), this.$refs.editPopup.open();
      },
      editPage: function editPage(t, e) {
        this.editingPage = {
          pageIndex: t
        }, this.editingBlock = null, this.tempEditValue = this.formatPageData(e), this.$refs.editPopup.open();
      },
      isPageEditable: function isPageEditable(t) {
        return t >= 4 && t < this.pageCount - 5;
      },
      openQuickEdit: function openQuickEdit() {
        this.quickEditValue = this.convertCardDataToText(), this.$refs.quickEditPopup.open();
      },
      convertCardDataToText: function convertCardDataToText() {
        var _this2 = this;
        return this.getAllBlocks.map(function (t) {
          return _this2.convertToArray(t).map(function (t) {
            return t.toString(16).padStart(2, "0").toUpperCase();
          }).join(" ");
        }).join("\n");
      },
      isValidQuickEditData: function isValidQuickEditData() {
        if (!this.quickEditValue.trim()) return !1;
        var t = this.quickEditValue.trim().split("\n"),
          e = this.getAllBlocks.length;
        if (t.length !== e) return !1;
        var _iterator = _createForOfIteratorHelper2(t),
          _step;
        try {
          for (_iterator.s(); !(_step = _iterator.n()).done;) {
            var _i3 = _step.value;
            var _t3 = _i3.replace(/\s+/g, "").toUpperCase();
            if (!/^[0-9A-F]{32}$/.test(_t3)) return !1;
          }
        } catch (err) {
          _iterator.e(err);
        } finally {
          _iterator.f();
        }
        return !0;
      },
      getQuickEditValidationMessage: function getQuickEditValidationMessage() {
        if (!this.quickEditValue.trim()) return "请输入数据";
        var t = this.quickEditValue.trim().split("\n"),
          e = this.getAllBlocks.length;
        if (t.length !== e) return "\u9700\u8981".concat(e, "\u884C\u6570\u636E\uFF0C\u5F53\u524D: ").concat(t.length, "\u884C");
        for (var _i4 = 0; _i4 < t.length; _i4++) {
          var _e8 = t[_i4].replace(/\s+/g, "").toUpperCase();
          if (!/^[0-9A-F]{32}$/.test(_e8)) return "\u7B2C".concat(_i4 + 1, "\u884C\u6570\u636E\u683C\u5F0F\u9519\u8BEF\uFF0C\u9700\u898132\u4E2A\u5341\u516D\u8FDB\u5236\u5B57\u7B26");
        }
        return "数据格式正确";
      },
      closeQuickEditDialog: function closeQuickEditDialog() {
        this.$refs.quickEditPopup.close(), this.quickEditValue = "";
      },
      confirmQuickEdit: function confirmQuickEdit() {
        if (!this.isValidQuickEditData()) return void t.index.showToast({
          title: "数据格式不正确",
          icon: "none"
        });
        var e = this.quickEditValue.trim().split("\n").map(function (t) {
          var e = t.replace(/\s+/g, "").toUpperCase(),
            i = [];
          for (var _a2 = 0; _a2 < e.length; _a2 += 2) i.push(parseInt(e.substr(_a2, 2), 16));
          return i;
        });
        this.editableCard || (this.editableCard = this.deepCloneCard(this.card)), this.editableCard.data = e, this.isEditing = !0, this.closeQuickEditDialog(), t.index.showToast({
          title: '数据已更新，请点击"退出编辑"保存',
          icon: "success"
        });
      },
      isValidHexData: function isValidHexData() {
        if (!this.tempEditValue) return !1;
        var t = this.tempEditValue.replace(/\s+/g, "").toUpperCase();
        return !!/^[0-9A-F]*$/.test(t) && t.length % 2 == 0 && 32 === t.length;
      },
      getValidationMessage: function getValidationMessage() {
        if (!this.tempEditValue) return "请输入数据";
        var t = this.tempEditValue.replace(/\s+/g, "").toUpperCase();
        return /^[0-9A-F\s]*$/.test(this.tempEditValue) ? t.length % 2 != 0 ? "十六进制字符数必须为偶数" : 32 !== t.length ? "\u9700\u898116\u5B57\u8282\u6570\u636E (32\u4E2A\u5B57\u7B26)\uFF0C\u5F53\u524D: ".concat(t.length, "\u4E2A\u5B57\u7B26") : "数据格式正确" : "只能包含十六进制字符 (0-9, A-F) 和空格";
      },
      closeEditDialog: function closeEditDialog() {
        this.$refs.editPopup.close(), this.editingBlock = null, this.editingPage = null, this.tempEditValue = "";
      },
      confirmEdit: function confirmEdit() {
        if (!this.isValidHexData()) return void t.index.showToast({
          title: "数据格式不正确",
          icon: "none"
        });
        var e = this.tempEditValue.replace(/\s+/g, "").toUpperCase(),
          i = [];
        for (var _t4 = 0; _t4 < e.length; _t4 += 2) i.push(parseInt(e.substr(_t4, 2), 16));
        console.log("🔍 确认编辑 - 编辑前editableCard数据块数量:", this.editableCard.data ? this.editableCard.data.length : 0), console.log("🔍 确认编辑 - 要更新的字节数据:", i), this.editingBlock ? (console.log("🔍 确认编辑 - 更新块:", this.editingBlock.sectorIndex, this.editingBlock.blockIndex), this.updateBlockData(this.editingBlock.sectorIndex, this.editingBlock.blockIndex, i)) : this.editingPage && (console.log("🔍 确认编辑 - 更新页面:", this.editingPage.pageIndex), this.updatePageData(this.editingPage.pageIndex, i)), console.log("🔍 确认编辑 - 编辑后editableCard数据块数量:", this.editableCard.data ? this.editableCard.data.length : 0), console.log("🔍 确认编辑 - 编辑后editableCard:", this.editableCard), this.closeEditDialog(), t.index.showToast({
          title: "数据已更新",
          icon: "success"
        });
      },
      updateBlockData: function updateBlockData(t, e, i) {
        this.editableCard.data || (this.editableCard.data = []);
        var a = 4 * t + e;
        console.log("🔍 updateBlockData - 块位置:", a, "当前数组长度:", this.editableCard.data.length), a < this.editableCard.data.length ? (this.$set(this.editableCard.data, a, i), console.log("🔍 updateBlockData - 更新现有块:", a)) : console.warn("🔍 updateBlockData - 块位置超出范围:", a, "数组长度:", this.editableCard.data.length), console.log("🔍 updateBlockData - 更新后的数据:", this.editableCard.data[a]);
      },
      updatePageData: function updatePageData(t, e) {
        this.editableCard.data || (this.editableCard.data = []), console.log("🔍 updatePageData - 页面索引:", t, "当前数组长度:", this.editableCard.data.length), t < this.editableCard.data.length ? (this.$set(this.editableCard.data, t, e), console.log("🔍 updatePageData - 更新现有页面:", t)) : console.warn("🔍 updatePageData - 页面索引超出范围:", t, "数组长度:", this.editableCard.data.length), console.log("🔍 updatePageData - 更新后的数据:", this.editableCard.data[t]);
      }
    }
  };
if (!Array) {
  (t.resolveComponent("uni-icons") + t.resolveComponent("uni-popup"))();
}
Math || (function () {
  return "../../node-modules/@dcloudio/uni-ui/lib/uni-icons/uni-icons.js";
} + function () {
  return "../../node-modules/@dcloudio/uni-ui/lib/uni-popup/uni-popup.js";
})();
var a = t._export_sfc(i, [["render", function (e, i, a, s, r, o) {
  return t.e({
    a: o.isMifareClassic
  }, o.isMifareClassic ? t.e({
    b: a.editable
  }, a.editable ? t.e({
    c: !r.isEditing
  }, r.isEditing ? {} : {
    d: t.p({
      type: "compose",
      size: "20",
      color: "#FFF"
    }),
    e: t.o(function () {
      return o.openQuickEdit && o.openQuickEdit.apply(o, arguments);
    })
  }, {
    f: !r.isEditing
  }, r.isEditing ? {
    i: t.p({
      type: "checkmarkempty",
      size: "20",
      color: "#FFF"
    }),
    j: t.o(function () {
      return o.exitEditing && o.exitEditing.apply(o, arguments);
    })
  } : {
    g: t.p({
      type: "gear",
      size: "20",
      color: "#FFF"
    }),
    h: t.o(function () {
      return o.startEditing && o.startEditing.apply(o, arguments);
    })
  }) : {}, {
    k: r.isEditing
  }, (r.isEditing, {}), {
    l: t.f(o.sectors, function (e, i, a) {
      return {
        a: t.f(e, function (e, s, d) {
          return t.e({
            a: 0 === s
          }, 0 === s ? {
            b: t.t(i)
          } : {}, {
            c: t.t(4 * i + s),
            d: t.t(o.formatBlockData(e))
          }, r.isEditing ? {
            e: "b99b25cd-3-" + a + "-" + d,
            f: t.p({
              type: "compose",
              size: "18",
              color: "#FFF"
            }),
            g: t.o(function (t) {
              return o.editBlock(i, s, e);
            }, "".concat(i, "-").concat(s))
          } : {}, {
            h: "".concat(i, "-").concat(s),
            i: 3 === s ? 1 : "",
            j: s < 3 ? 1 : ""
          });
        }),
        b: i
      };
    }),
    m: r.isEditing
  }) : o.isNTAG ? t.e({
    o: a.editable
  }, a.editable ? t.e({
    p: !r.isEditing
  }, r.isEditing ? {} : {
    q: t.p({
      type: "compose",
      size: "20",
      color: "#FFF"
    }),
    r: t.o(function () {
      return o.openQuickEdit && o.openQuickEdit.apply(o, arguments);
    })
  }, {
    s: !r.isEditing
  }, r.isEditing ? {
    w: t.p({
      type: "checkmarkempty",
      size: "20",
      color: "#FFF"
    }),
    x: t.o(function () {
      return o.exitEditing && o.exitEditing.apply(o, arguments);
    })
  } : {
    t: t.p({
      type: "gear",
      size: "20",
      color: "#FFF"
    }),
    v: t.o(function () {
      return o.startEditing && o.startEditing.apply(o, arguments);
    })
  }) : {}, {
    y: r.isEditing
  }, (r.isEditing, {}), {
    z: t.f(o.pages, function (e, i, a) {
      return t.e({
        a: 0 === i
      }, (0 === i || 4 === i || o.pageCount, {}), {
        b: 4 === i,
        c: i === o.pageCount - 5,
        d: t.t(i),
        e: t.t(o.formatPageData(e)),
        f: 0 === i
      }, 0 === i ? {
        g: t.t(o.formatUID(e))
      } : {}, r.isEditing ? t.e({
        h: o.isPageEditable(i)
      }, o.isPageEditable(i) ? {
        i: "b99b25cd-7-" + a,
        j: t.p({
          type: "compose",
          size: "18",
          color: "#FFF"
        }),
        k: t.o(function (t) {
          return o.editPage(i, e);
        }, i)
      } : {}) : {}, {
        l: i,
        m: i < 4 ? 1 : "",
        n: i >= 4 && i < o.pageCount - 5 ? 1 : "",
        o: i >= o.pageCount - 5 ? 1 : ""
      });
    }),
    A: r.isEditing
  }) : o.isEM410X ? t.e({
    C: a.editable
  }, a.editable ? {
    D: t.p({
      type: "paperclip",
      size: "20",
      color: "#FFF"
    }),
    E: t.o(function (t) {
      return o.copyEMData();
    })
  } : {}, {
    F: t.t(o.formatEM410XData()),
    G: t.t(a.card.uid)
  }) : t.e({
    H: a.editable
  }, a.editable ? {
    I: t.p({
      type: "paperclip",
      size: "20",
      color: "#FFF"
    }),
    J: t.o(function (t) {
      return o.copyAllData();
    })
  } : {}, {
    K: t.f(a.card.data, function (e, i, a) {
      return {
        a: t.t(i),
        b: t.t(o.formatBlockData(e)),
        c: i
      };
    })
  }), {
    n: o.isNTAG,
    B: o.isEM410X,
    L: t.t(a.card.type || "卡片数据"),
    M: o.quickEditPlaceholder,
    N: r.quickEditValue,
    O: t.o(function (t) {
      return r.quickEditValue = t.detail.value;
    }),
    P: t.t(o.isMifareClassic ? "块" : "页面"),
    Q: t.t(o.getAllBlocks.length),
    R: t.t(o.getQuickEditValidationMessage()),
    S: o.isValidQuickEditData ? "" : 1,
    T: t.o(function () {
      return o.closeQuickEditDialog && o.closeQuickEditDialog.apply(o, arguments);
    }),
    U: !o.isValidQuickEditData,
    V: t.o(function () {
      return o.confirmQuickEdit && o.confirmQuickEdit.apply(o, arguments);
    }),
    W: t.sr("quickEditPopup", "b99b25cd-10"),
    X: t.p({
      type: "dialog",
      "mask-click": !1
    }),
    Y: t.t(r.editingBlock ? "\u7F16\u8F91\u5757 ".concat(4 * r.editingBlock.sectorIndex + r.editingBlock.blockIndex) : r.editingPage ? "\u7F16\u8F91\u9875\u9762 ".concat(r.editingPage.pageIndex) : "编辑数据"),
    Z: (r.editingBlock && r.editingBlock.blockIndex, 47),
    aa: r.tempEditValue,
    ab: t.o(function (t) {
      return r.tempEditValue = t.detail.value;
    }),
    ac: t.t(r.editingBlock && 3 === r.editingBlock.blockIndex ? "扇区尾块格式: KeyA(6字节) + 访问位(4字节) + KeyB(6字节)" : "请输入16字节的十六进制数据"),
    ad: t.t(o.getValidationMessage()),
    ae: o.isValidHexData ? "" : 1,
    af: t.o(function () {
      return o.closeEditDialog && o.closeEditDialog.apply(o, arguments);
    }),
    ag: !o.isValidHexData,
    ah: t.o(function () {
      return o.confirmEdit && o.confirmEdit.apply(o, arguments);
    }),
    ai: t.sr("editPopup", "b99b25cd-11"),
    aj: t.p({
      type: "dialog",
      "mask-click": !1
    })
  });
}], ["__scopeId", "data-v-b99b25cd"]]);
wx.createComponent(a); 
 			}); 	require("components/card-data-viewer/card-data-viewer.js");
 		__wxRoute = 'components/setting-item';__wxRouteBegin = true; 	__wxAppCurrentFile__ = 'components/setting-item.js';	define("components/setting-item.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";

var e = require("../common/vendor.js"),
  t = {
    name: "SettingItem",
    props: {
      label: {
        type: String,
        required: !0
      },
      options: {
        type: Array,
        required: !0,
        default: function _default() {
          return [];
        }
      },
      value: {
        type: Number,
        default: 0
      }
    },
    computed: {
      optionLabels: function optionLabels() {
        return this.options.map(function (e) {
          return e.label;
        });
      },
      currentIndex: function currentIndex() {
        var _this = this;
        var e = this.options.findIndex(function (e) {
          return e.value === _this.value;
        });
        return e >= 0 ? e : 0;
      },
      currentLabel: function currentLabel() {
        var _this2 = this;
        var e = this.options.find(function (e) {
          return e.value === _this2.value;
        });
        return e ? e.label : "未知";
      }
    },
    methods: {
      handleChange: function handleChange(e) {
        var t = e.detail.value,
          n = this.options[t];
        n && this.$emit("change", n.value);
      }
    }
  };
if (!Array) {
  e.resolveComponent("uni-icons")();
}
Math;
var n = e._export_sfc(t, [["render", function (t, n, o, r, a, i) {
  return {
    a: e.t(o.label),
    b: e.t(i.currentLabel),
    c: e.p({
      type: "arrowdown",
      size: "14",
      color: "#999"
    }),
    d: i.optionLabels,
    e: i.currentIndex,
    f: e.o(function () {
      return i.handleChange && i.handleChange.apply(i, arguments);
    })
  };
}], ["__scopeId", "data-v-a80667a0"]]);
wx.createComponent(n); 
 			}); 	require("components/setting-item.js");
 		__wxRoute = 'node-modules/@dcloudio/uni-ui/lib/uni-icons/uni-icons';__wxRouteBegin = true; 	__wxAppCurrentFile__ = 'node-modules/@dcloudio/uni-ui/lib/uni-icons/uni-icons.js';	define("node-modules/@dcloudio/uni-ui/lib/uni-icons/uni-icons.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";

var t = require("../../../../../common/vendor.js"),
  e = {
    name: "UniIcons",
    emits: ["click"],
    props: {
      type: {
        type: String,
        default: ""
      },
      color: {
        type: String,
        default: "#333333"
      },
      size: {
        type: [Number, String],
        default: 16
      },
      customPrefix: {
        type: String,
        default: ""
      },
      fontFamily: {
        type: String,
        default: ""
      }
    },
    data: function data() {
      return {
        icons: t.fontData
      };
    },
    computed: {
      unicode: function unicode() {
        var _this = this;
        var t = this.icons.find(function (t) {
          return t.font_class === _this.type;
        });
        return t ? t.unicode : "";
      },
      iconSize: function iconSize() {
        return "number" == typeof (t = this.size) || /^[0-9]*$/g.test(t) ? t + "px" : t;
        var t;
      },
      styleObj: function styleObj() {
        return "" !== this.fontFamily ? "color: ".concat(this.color, "; font-size: ").concat(this.iconSize, "; font-family: ").concat(this.fontFamily, ";") : "color: ".concat(this.color, "; font-size: ").concat(this.iconSize, ";");
      }
    },
    methods: {
      _onClick: function _onClick() {
        this.$emit("click");
      }
    }
  };
var i = t._export_sfc(e, [["render", function (e, i, o, n, s, c) {
  return {
    a: t.s(c.styleObj),
    b: t.n("uniui-" + o.type),
    c: t.n(o.customPrefix),
    d: t.n(o.customPrefix ? o.type : ""),
    e: t.o(function () {
      return c._onClick && c._onClick.apply(c, arguments);
    })
  };
}]]);
wx.createComponent(i); 
 			}); 	require("node-modules/@dcloudio/uni-ui/lib/uni-icons/uni-icons.js");
 		__wxRoute = 'node-modules/@dcloudio/uni-ui/lib/uni-load-more/uni-load-more';__wxRouteBegin = true; 	__wxAppCurrentFile__ = 'node-modules/@dcloudio/uni-ui/lib/uni-load-more/uni-load-more.js';	define("node-modules/@dcloudio/uni-ui/lib/uni-load-more/uni-load-more.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";

var e = require("../../../../../common/vendor.js");
var n;
setTimeout(function () {
  n = e.index.getDeviceInfo().platform;
}, 16);
var _e$initVueI18n = e.initVueI18n(e.messages),
  o = _e$initVueI18n.t,
  t = {
    name: "UniLoadMore",
    emits: ["clickLoadMore"],
    props: {
      status: {
        type: String,
        default: "more"
      },
      showIcon: {
        type: Boolean,
        default: !0
      },
      iconType: {
        type: String,
        default: "auto"
      },
      iconSize: {
        type: Number,
        default: 24
      },
      color: {
        type: String,
        default: "#777777"
      },
      contentText: {
        type: Object,
        default: function _default() {
          return {
            contentdown: "",
            contentrefresh: "",
            contentnomore: ""
          };
        }
      },
      showText: {
        type: Boolean,
        default: !0
      }
    },
    data: function data() {
      return {
        webviewHide: !1,
        platform: n,
        imgBase64: "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6QzlBMzU3OTlEOUM0MTFFOUI0NTZDNERBQURBQzI4RkUiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6QzlBMzU3OUFEOUM0MTFFOUI0NTZDNERBQURBQzI4RkUiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpDOUEzNTc5N0Q5QzQxMUU5QjQ1NkM0REFBREFDMjhGRSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpDOUEzNTc5OEQ5QzQxMUU5QjQ1NkM0REFBREFDMjhGRSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pt+ALSwAAA6CSURBVHja1FsLkFZVHb98LM+F5bHL8khA1iSeiyQBCRM+YGqKUnnJTDLGI0BGZlKDIU2MMglUiDApEZvSsZnQtBRJtKwQNKQMFYeRDR10WOLd8ljYXdh+v8v5fR3Od+797t1dnOnO/Ofce77z+J//+b/P+ZqtXbs2sJ9MJhNUV1cHJ06cCJo3bx7EPc2aNcvpy7pWrVoF+/fvDyoqKoI2bdoE9fX1F7TjN8a+EXBn/fkfvw942Tf+wYMHg9mzZwfjxo0LDhw4EPa1x2MbFw/fOGfPng1qa2tzcCkILsLDydq2bRsunpOTMM7TD/W/tZDZhPdeKD+yGxHhdu3aBV27dg3OnDlzMVANMheLAO3btw8KCwuDmpoaX5OxbgUIMEq7K8IcPnw4KCsrC/r37x8cP378/4cAXAB3vqSkJMuiDhTkw+XcuXNhOWbMmKBly5YhUT8xArhyFvP0BfwRsAuwxJZJsm/nzp2DTp06he/OU+cZ64K6o0ePBkOHDg2GDx8e6gEbJ5Q/NHNuAJQ1hgBeHUDlR7nVTkY8rQAvAi4z34vR/mPs1FoRsaCgIJThI0eOBC1atEiFGGV+5MiRoS45efJkqFjJFXV1dQuA012m2WcwTw98fy6CqBdsaiIO4CScrGPHjvk4odhavPquRtFWXEC25VgkREKOCh/qDSq+vn37htzD/mZTOmOc5U7zKzBPEedygWshcDyWvs30igAbU+6oyMgJBCFhwQE0fccxN60Ay9iebbjoDh06hMowjQxT4fXq1SskArmHZpkArvixp/kWzHdMeArExSJEaiXIjjRjRJ4DaAGWpibLzXN3Fm1vA5teBgh3j1Rv3bp1YgKwPdmf2p9zcyNYYgPKMfY0T5f5nNYdw158nJ8QawW4CLKwiOBSEgO/hok2eBydR+3dYH+PLxA5J8Vv0KBBwenTp0P2JWAx6+yFEBfs8lMY+y0SWMBNI9E4ThKi58VKTg3FQZS1RQF1cz27eC0QHMu+3E0SkUowjhVt5VdaWhp07949ZHv2Qd1EjDXM2cla1M0nl3GxAs3J9yREzyTdFVKVFOaE9qRA8GM0WebRuo9JGZKA7Mv2SeS/Z8+eoQ9BArMfFrLGo6jvxbhHbJZnKX2Rzz1O7QhJJ9Cs2ZMaWIyq/zhdeqPNfIoHd58clIQD+JSXl4dKlyIAuBdVXZwFVWKspSSoxE++h8x4k3uCnEhE4I5KwRiFWGOU0QWKiCYLbdoRMRKAu2kQ9vkfLU6dOhX06NEjlH+yMRZSinnuyWnYosVcji8CEA/6Cg2JF+IIUBqnGKUTCNwtwBN4f89RiK1R96DEgO2o0NDmtEdvVFdVVYV+P3UAPUEs6GFwV3PHmXkD4vh74iDFJysVI/MlaQhwKeBNTLYX5VuA8T4/gZxA4MRGFxDB6R7OmYPfyykGRJbyie+XnGYnQIC/coH9+vULiYrxrkL9ZA9+0ykaHIfEpM7ge8TiJ2CsHYwyMfafAF1yCGBHYIbCVDjDjKt7BeB51D+LgQa6OkG7IDYEEtvQ7lnXLKLtLdLuJBpE4gPUXcW2+PkZwOex+4cGDhwYDBkyRL7/HFcEwUGPo/8uWRUpYnfxGHco8HkewLHLyYmAawAPuIFZxhOpDfJQ8gbUv41yORAptMWBNr6oqMhWird5+u+iHmBb2nhjDV7HWBNQTgK8y11l5NetWzc5ULscAtSj7nbNI0skhWeUZCc0W4nyH/jO4Vz0u1IeYhbk4AiwM6tjxIWByHsoZ9qcIBPJd/y+DwPfBESOmCa/QF3WiZHucLlEDpNxcNhmheEOPgdQNx6/VZFQzFZ5TN08AHXQt2Ii3EdyFuUsPtTcGPhW5iMiCNELvz+Gdn9huG4HUJaW/w3g0wxV0XaG7arG2WeKiUWYM4Y7GO5ezshTARbbWGw/DvXkpp/ivVvE0JVoMxN4rpGzJMhE5Pl+xlATsDIqikP9F9D2z3h9nOksEUFhK+qO4rcPkoalMQ/HqJLIyb3F3JdjrCcw1yZ8joyJLR5gCo54etlag7qIoeNh1N1BRYj3DTFJ0elotxPlVzkGuYAmL0VSJVGAJA41c4Z6A3BzTLfn0HYwYKEI6CUAMzZEWvLsIcQOo1AmmyyM72nHJCfYsogflGV6jEk9vyQZXSuq6w4c16NsGcGZbwOPr+H1RkOk2LEzjNepxQkihHSCQ4ynAYNRx2zMKV92CQMWqj8J0BRE8EShxRFN6YrfCRhC0x3r/Zm4IbQCcmJoV0kMamllccR6FjHqUC5F2R/wS2dcymOlfAKOS4KmzQb5cpNC2MC7JhVn5wjXoJ44rYhLh8n0eXOCorJxa7POjbSlCGVczr34/RsAmrcvo9s+wGp3tzVhntxiXiJ4nvEYb4FJkf0O8HocAePmLvCxnL0AORraVekJk6TYjDabRVXfRE2lCN1h6ZQRN1+InUbsCpKwoBZHh0dODN9JBCUffItXxEavTQkUtnfTVAplCWL3JISz29h4NjotnuSsQKJCk8dF+kJR6RARjrqFVmfPnj3ZbK8cIJ0msd6jgHPGtfVTQ8VLmlvh4mct9sobRmPic0DyDQQnx/NlfYUgyz59+oScsH379pAwXABD32nTpoUHIToESeI5mnbE/UqDdyLcafEBf2MCqgC7NwxIbMREJQ0g4D4sfJwnD+AmRrII05cfMWJE+L1169bQr+fip06dGp4oJ83lmYd5wj/EmMa4TaHivo4EeCguYZBnkB5g2aWA69OIEnUHOaGysjIYMGBAMGnSpODYsWPZwCpFmm4lNq+4gSLQA7jcX8DwtjEyRC8wjabnXEx9kfWnTJkSJkAo90xpJVV+FmcVNeYAF5zWngS4C4O91MBxmAv8blLEpbjI5sz9MTdAhcgkCT1RO8mZkAjfiYpTEvStAS53Uw1vAiUGgZ3GpuQEYvoiBqlIan7kSDHnTwJQFNiPu0+5VxCVYhcZIjNrdXUDdp+Eq5AZ3Gkg8QAyVZRZIk4Tl4QAbF9cXJxNYZMAtAokgs4BrNxEpCtteXg7DDTMDKYNSuQdKsnJBek7HxewvxaosWxLYXtw+cJp18217wql4aKCfBNoEu0O5VU+PhctJ0YeXD4C6JQpyrlpSLTojpGGGN5YwNziChdIZLk4lvLcFJ9jMX3QdiImY9bmGQU+TRUL5CHITTRlgF8D9ouD1MfmLoEPl5xokIumZ2cfgMpHt47IW9N64Hsh7wQYYjyIugWuF5fCqYncXRd5vPMWyizzvhi/32+nvG0dZc9vR6fZOu0md5e+uC408FvKSIOZwXlGvxPv95izA2Vtvg1xKFWARI+vMX66HUhpQQb643uW1bSjuTWyw2SBvDrBvjFic1eGGlz5esq3ko9uSIlBRqPuFcCv8F4WIcN12nVaBd0SaYwI6PDDImR11JkqgHcPmQssjxIn6bUshygDFJUTxPMpHk+jfjPgupgdnYV2R/g7xSjtpah8RJBewhwf0gGK6XI92u4wXFEU40afJ4DN4h5LcAd+40HI3JgJecuT0c062W0i2hQJUTcxan3/CMW1PF2K6bbA+Daz4xRs1D3Br1Cm0OihKCqizW78/nXAF/G5TXrEcVzaNMH6CyMswqsAHqDyDLEyou8lwOXnKF8DjI6KjV3KzMBiXkDH8ij/H214J5A596ekrZ3F0zXlWeL7+P5eUrNo3/QwC15uxthuzidy7DzKRwEDaAViiDgKbTbz7CJnzo0bN7pIfIiid8SuPwn25o3QCmpnyjlZkyxPP8EomCJzrGb7GJMx7tNsq4MT2xMUYaiErZOluTzKsnz3gwCeCZyVRZJfYplNEokEjwrPtxlxjeYAk+F1F74VAzPxQRNYYdtpOUvWs8J1sGhBJMNsb7igN8plJs1eSmLIhLKE4rvaCX27gOhLpLOsIzJ7qn/i+wZzcvSOZ23/du8TZjwV8zHIXoP4R3ifBxiFz1dcVpa3aPntPE+c6TmIWE9EtcMmAcPdWAhYhAXxcLOQi9L1WhD1Sc8p1d2oL7XGiRKp8F4A2i8K/nfI+y/gsTDJ/YC/8+AD5Uh04KHiGl+cIFPnBDDrPMjwRGkLXyxO4VGbfQWnDH2v0bVWE3C9QOXlepbgjEfIJQI6XDG3z5ahD9cw2pS78ipB85wyScNTvsVzlzzhL8/jRrnmVjfFJK/m3m4nj9vbgQTguT8XZTjsm672R5uJKEaQmBI/c58gyus8ZDagLpEVSJBIyHp4jn++xqPV71OgQgJYEWOtZ/haxRtKmWOBu8xdBLftWltsY84zE6WIEy/eIOWL+BaayMx+KHtL7EAkqdNDLiEXmEMUHniedtJqg9HmZtfvt26vNi0BdG3Ft3g8ZOf7PAu59TxtzivLNIekyi+wD1i8CuUiD9FXAa8C+/xS3JPmZnomyc7H+fb4/Se0bk41Fel621r4cgVxbq91V4jVqwB7HTe2M7jgB+QWHavZkDRPmZcASoZEmBx6i75bGjPcMdL4/VKGFAGWZkGzPG0XAbdL9A81G5LOmUnC9hHKJeO7dcUMjblSl12867ElFTtaGl20xvvLGPdVz/8TVuU7y0x1PG7vtNg24oz9Uo/Z412++VFWI7Fcog9tu9Lm6gvRmIPv9x1xmQAu6RDkXtbOtlGEmpgD5Nvnyc0dcv0EE6cfdi1HmhMf9wDF3k3gtRvEedhxjpgfqPb9PU9iEJHnyOUA7bQUXh6kq/D7l2iTjWv7XOD530BDr8jIrus+srXjt4MzumJMHuTsBa63YKE1+RR5lBjEikCCnWKWiHdzOgKO+nRIBAF88za/IFmJ3eMZov4CYxGBabcpGL8EYx+SeMXJeRwHNsV/h+vdxeuhEpN3ZyNY78Gm2fknJxVGhyjixPiQvVkNzT1elD9Py/aTAL64Hb9vcYmC9zfdXdT/C1LeGbg4rnBaAihDFJH12W5ulfNCNe/xTsP3bp8ikzJs5BF+5PNfAQYAPaseTdsEcaYAAAAASUVORK5CYII="
      };
    },
    computed: {
      iconSnowWidth: function iconSnowWidth() {
        return 2 * (Math.floor(this.iconSize / 24) || 1);
      },
      contentdownText: function contentdownText() {
        return this.contentText.contentdown || o("uni-load-more.contentdown");
      },
      contentrefreshText: function contentrefreshText() {
        return this.contentText.contentrefresh || o("uni-load-more.contentrefresh");
      },
      contentnomoreText: function contentnomoreText() {
        return this.contentText.contentnomore || o("uni-load-more.contentnomore");
      }
    },
    mounted: function mounted() {},
    methods: {
      onClick: function onClick() {
        this.$emit("clickLoadMore", {
          detail: {
            status: this.status
          }
        });
      }
    }
  };
var i = e._export_sfc(t, [["render", function (n, o, t, i, c, A) {
  return e.e({
    a: !c.webviewHide && ("circle" === t.iconType || "auto" === t.iconType && "android" === c.platform) && "loading" === t.status && t.showIcon
  }, !c.webviewHide && ("circle" === t.iconType || "auto" === t.iconType && "android" === c.platform) && "loading" === t.status && t.showIcon ? {
    b: t.color,
    c: t.iconSize / 12,
    d: t.color,
    e: t.iconSize / 12,
    f: t.color,
    g: t.iconSize / 12,
    h: t.iconSize + "px",
    i: t.iconSize + "px"
  } : !c.webviewHide && "loading" === t.status && t.showIcon ? {
    k: c.imgBase64,
    l: t.iconSize + "px",
    m: t.iconSize + "px"
  } : {}, {
    j: !c.webviewHide && "loading" === t.status && t.showIcon,
    n: t.showText
  }, t.showText ? {
    o: e.t("more" === t.status ? A.contentdownText : "loading" === t.status ? A.contentrefreshText : A.contentnomoreText),
    p: t.color
  } : {}, {
    q: e.o(function () {
      return A.onClick && A.onClick.apply(A, arguments);
    })
  });
}]]);
wx.createComponent(i); 
 			}); 	require("node-modules/@dcloudio/uni-ui/lib/uni-load-more/uni-load-more.js");
 		__wxRoute = 'node-modules/@dcloudio/uni-ui/lib/uni-popup-dialog/uni-popup-dialog';__wxRouteBegin = true; 	__wxAppCurrentFile__ = 'node-modules/@dcloudio/uni-ui/lib/uni-popup-dialog/uni-popup-dialog.js';	define("node-modules/@dcloudio/uni-ui/lib/uni-popup-dialog/uni-popup-dialog.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";

var e = require("../../../../../common/vendor.js"),
  _e$initVueI18n = e.initVueI18n(e.messages$1),
  t = _e$initVueI18n.t,
  o = {
    name: "uniPopupDialog",
    mixins: [e.popup],
    emits: ["confirm", "close", "update:modelValue", "input"],
    props: {
      inputType: {
        type: String,
        default: "text"
      },
      showClose: {
        type: Boolean,
        default: !0
      },
      modelValue: {
        type: [Number, String],
        default: ""
      },
      placeholder: {
        type: [String, Number],
        default: ""
      },
      type: {
        type: String,
        default: "error"
      },
      mode: {
        type: String,
        default: "base"
      },
      title: {
        type: String,
        default: ""
      },
      content: {
        type: String,
        default: ""
      },
      beforeClose: {
        type: Boolean,
        default: !1
      },
      cancelText: {
        type: String,
        default: ""
      },
      confirmText: {
        type: String,
        default: ""
      },
      maxlength: {
        type: Number,
        default: -1
      },
      focus: {
        type: Boolean,
        default: !0
      }
    },
    data: function data() {
      return {
        dialogType: "error",
        val: ""
      };
    },
    computed: {
      okText: function okText() {
        return this.confirmText || t("uni-popup.ok");
      },
      closeText: function closeText() {
        return this.cancelText || t("uni-popup.cancel");
      },
      placeholderText: function placeholderText() {
        return this.placeholder || t("uni-popup.placeholder");
      },
      titleText: function titleText() {
        return this.title || t("uni-popup.title");
      }
    },
    watch: {
      type: function type(e) {
        this.dialogType = e;
      },
      mode: function mode(e) {
        "input" === e && (this.dialogType = "info");
      },
      value: function value(e) {
        this.setVal(e);
      },
      modelValue: function modelValue(e) {
        this.setVal(e);
      },
      val: function val(e) {
        this.$emit("update:modelValue", e);
      }
    },
    created: function created() {
      this.popup.disableMask(), "input" === this.mode ? (this.dialogType = "info", this.val = this.value, this.val = this.modelValue) : this.dialogType = this.type;
    },
    methods: {
      setVal: function setVal(e) {
        -1 != this.maxlength && "input" === this.mode ? this.val = e.slice(0, this.maxlength) : this.val = e;
      },
      onOk: function onOk() {
        "input" === this.mode ? this.$emit("confirm", this.val) : this.$emit("confirm"), this.beforeClose || this.popup.close();
      },
      closeDialog: function closeDialog() {
        this.$emit("close"), this.beforeClose || this.popup.close();
      },
      close: function close() {
        this.popup.close();
      }
    }
  };
var l = e._export_sfc(o, [["render", function (t, o, l, i, s, p) {
  return e.e({
    a: e.t(p.titleText),
    b: e.n("uni-popup__" + s.dialogType),
    c: "base" === l.mode
  }, "base" === l.mode ? {
    d: e.t(l.content)
  } : {
    e: l.maxlength,
    f: l.inputType,
    g: p.placeholderText,
    h: l.focus,
    i: s.val,
    j: e.o(function (e) {
      return s.val = e.detail.value;
    })
  }, {
    k: l.showClose
  }, l.showClose ? {
    l: e.t(p.closeText),
    m: e.o(function () {
      return p.closeDialog && p.closeDialog.apply(p, arguments);
    })
  } : {}, {
    n: e.t(p.okText),
    o: e.n(l.showClose ? "uni-border-left" : ""),
    p: e.o(function () {
      return p.onOk && p.onOk.apply(p, arguments);
    })
  });
}]]);
wx.createComponent(l); 
 			}); 	require("node-modules/@dcloudio/uni-ui/lib/uni-popup-dialog/uni-popup-dialog.js");
 		__wxRoute = 'node-modules/@dcloudio/uni-ui/lib/uni-popup/uni-popup';__wxRouteBegin = true; 	__wxAppCurrentFile__ = 'node-modules/@dcloudio/uni-ui/lib/uni-popup/uni-popup.js';	define("node-modules/@dcloudio/uni-ui/lib/uni-popup/uni-popup.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";

var t = require("../../../../../common/vendor.js"),
  s = {
    name: "uniPopup",
    components: {},
    emits: ["change", "maskClick"],
    props: {
      animation: {
        type: Boolean,
        default: !0
      },
      type: {
        type: String,
        default: "center"
      },
      isMaskClick: {
        type: Boolean,
        default: null
      },
      maskClick: {
        type: Boolean,
        default: null
      },
      backgroundColor: {
        type: String,
        default: "none"
      },
      safeArea: {
        type: Boolean,
        default: !0
      },
      maskBackgroundColor: {
        type: String,
        default: "rgba(0, 0, 0, 0.4)"
      },
      borderRadius: {
        type: String
      }
    },
    watch: {
      type: {
        handler: function handler(t) {
          this.config[t] && this[this.config[t]](!0);
        },
        immediate: !0
      },
      isDesktop: {
        handler: function handler(t) {
          this.config[t] && this[this.config[this.type]](!0);
        },
        immediate: !0
      },
      maskClick: {
        handler: function handler(t) {
          this.mkclick = t;
        },
        immediate: !0
      },
      isMaskClick: {
        handler: function handler(t) {
          this.mkclick = t;
        },
        immediate: !0
      },
      showPopup: function showPopup(t) {}
    },
    data: function data() {
      return {
        duration: 300,
        ani: [],
        showPopup: !1,
        showTrans: !1,
        popupWidth: 0,
        popupHeight: 0,
        config: {
          top: "top",
          bottom: "bottom",
          center: "center",
          left: "left",
          right: "right",
          message: "top",
          dialog: "center",
          share: "bottom"
        },
        maskClass: {
          position: "fixed",
          bottom: 0,
          top: 0,
          left: 0,
          right: 0,
          backgroundColor: "rgba(0, 0, 0, 0.4)"
        },
        transClass: {
          backgroundColor: "transparent",
          borderRadius: this.borderRadius || "0",
          position: "fixed",
          left: 0,
          right: 0
        },
        maskShow: !0,
        mkclick: !0,
        popupstyle: "top"
      };
    },
    computed: {
      getStyles: function getStyles() {
        var t = {
          backgroundColor: this.bg
        };
        return this.borderRadius, t = Object.assign(t, {
          borderRadius: this.borderRadius
        }), t;
      },
      isDesktop: function isDesktop() {
        return this.popupWidth >= 500 && this.popupHeight >= 500;
      },
      bg: function bg() {
        return "" === this.backgroundColor || "none" === this.backgroundColor ? "transparent" : this.backgroundColor;
      }
    },
    mounted: function mounted() {
      var _this = this;
      (function () {
        var _t$index$getWindowInf = t.index.getWindowInfo(),
          s = _t$index$getWindowInf.windowWidth,
          i = _t$index$getWindowInf.windowHeight,
          o = _t$index$getWindowInf.windowTop,
          e = _t$index$getWindowInf.safeArea,
          a = _t$index$getWindowInf.screenHeight,
          r = _t$index$getWindowInf.safeAreaInsets;
        _this.popupWidth = s, _this.popupHeight = i + (o || 0), e && _this.safeArea ? _this.safeAreaInsets = a - e.bottom : _this.safeAreaInsets = 0;
      })();
    },
    unmounted: function unmounted() {
      this.setH5Visible();
    },
    activated: function activated() {
      this.setH5Visible(!this.showPopup);
    },
    deactivated: function deactivated() {
      this.setH5Visible(!0);
    },
    created: function created() {
      null === this.isMaskClick && null === this.maskClick ? this.mkclick = !0 : this.mkclick = null !== this.isMaskClick ? this.isMaskClick : this.maskClick, this.animation ? this.duration = 300 : this.duration = 0, this.messageChild = null, this.clearPropagation = !1, this.maskClass.backgroundColor = this.maskBackgroundColor;
    },
    methods: {
      setH5Visible: function setH5Visible() {
        var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : !0;
      },
      closeMask: function closeMask() {
        this.maskShow = !1;
      },
      disableMask: function disableMask() {
        this.mkclick = !1;
      },
      clear: function clear(t) {
        t.stopPropagation(), this.clearPropagation = !0;
      },
      open: function open(t) {
        if (this.showPopup) return;
        t && -1 !== ["top", "center", "bottom", "left", "right", "message", "dialog", "share"].indexOf(t) || (t = this.type), this.config[t] ? (this[this.config[t]](), this.$emit("change", {
          show: !0,
          type: t
        })) : console.error("缺少类型：", t);
      },
      close: function close(t) {
        var _this2 = this;
        this.showTrans = !1, this.$emit("change", {
          show: !1,
          type: this.type
        }), clearTimeout(this.timer), this.timer = setTimeout(function () {
          _this2.showPopup = !1;
        }, 300);
      },
      touchstart: function touchstart() {
        this.clearPropagation = !1;
      },
      onTap: function onTap() {
        this.clearPropagation ? this.clearPropagation = !1 : (this.$emit("maskClick"), this.mkclick && this.close());
      },
      top: function top(t) {
        var _this3 = this;
        this.popupstyle = this.isDesktop ? "fixforpc-top" : "top", this.ani = ["slide-top"], this.transClass = {
          position: "fixed",
          left: 0,
          right: 0,
          backgroundColor: this.bg,
          borderRadius: this.borderRadius || "0"
        }, t || (this.showPopup = !0, this.showTrans = !0, this.$nextTick(function () {
          _this3.showPoptrans(), _this3.messageChild && "message" === _this3.type && _this3.messageChild.timerClose();
        }));
      },
      bottom: function bottom(t) {
        this.popupstyle = "bottom", this.ani = ["slide-bottom"], this.transClass = {
          position: "fixed",
          left: 0,
          right: 0,
          bottom: 0,
          paddingBottom: this.safeAreaInsets + "px",
          backgroundColor: this.bg,
          borderRadius: this.borderRadius || "0"
        }, t || this.showPoptrans();
      },
      center: function center(t) {
        this.popupstyle = "center", this.ani = ["fade"], this.transClass = {
          position: "fixed",
          display: "flex",
          flexDirection: "column",
          bottom: 0,
          left: 0,
          right: 0,
          top: 0,
          justifyContent: "center",
          alignItems: "center",
          borderRadius: this.borderRadius || "0"
        }, t || this.showPoptrans();
      },
      left: function left(t) {
        this.popupstyle = "left", this.ani = ["slide-left"], this.transClass = {
          position: "fixed",
          left: 0,
          bottom: 0,
          top: 0,
          backgroundColor: this.bg,
          borderRadius: this.borderRadius || "0",
          display: "flex",
          flexDirection: "column"
        }, t || this.showPoptrans();
      },
      right: function right(t) {
        this.popupstyle = "right", this.ani = ["slide-right"], this.transClass = {
          position: "fixed",
          bottom: 0,
          right: 0,
          top: 0,
          backgroundColor: this.bg,
          borderRadius: this.borderRadius || "0",
          display: "flex",
          flexDirection: "column"
        }, t || this.showPoptrans();
      },
      showPoptrans: function showPoptrans() {
        var _this4 = this;
        this.$nextTick(function () {
          _this4.showPopup = !0, _this4.showTrans = !0;
        });
      }
    }
  };
if (!Array) {
  t.resolveComponent("uni-transition")();
}
Math;
var i = t._export_sfc(s, [["render", function (s, i, o, e, a, r) {
  return t.e({
    a: a.showPopup
  }, a.showPopup ? t.e({
    b: a.maskShow
  }, a.maskShow ? {
    c: t.o(r.onTap),
    d: t.p({
      name: "mask",
      "mode-class": "fade",
      styles: a.maskClass,
      duration: a.duration,
      show: a.showTrans
    })
  } : {}, {
    e: t.s(r.getStyles),
    f: t.n(a.popupstyle),
    g: t.o(function () {
      return r.clear && r.clear.apply(r, arguments);
    }),
    h: t.o(r.onTap),
    i: t.p({
      "mode-class": a.ani,
      name: "content",
      styles: a.transClass,
      duration: a.duration,
      show: a.showTrans
    }),
    j: t.o(function () {
      return r.touchstart && r.touchstart.apply(r, arguments);
    }),
    k: t.n(a.popupstyle),
    l: t.n(r.isDesktop ? "fixforpc-z-index" : "")
  }) : {});
}]]);
wx.createComponent(i); 
 			}); 	require("node-modules/@dcloudio/uni-ui/lib/uni-popup/uni-popup.js");
 		__wxRoute = 'node-modules/@dcloudio/uni-ui/lib/uni-search-bar/uni-search-bar';__wxRouteBegin = true; 	__wxAppCurrentFile__ = 'node-modules/@dcloudio/uni-ui/lib/uni-search-bar/uni-search-bar.js';	define("node-modules/@dcloudio/uni-ui/lib/uni-search-bar/uni-search-bar.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";

var e = require("../../../../../common/vendor.js"),
  _e$initVueI18n = e.initVueI18n(e.messages$2),
  t = _e$initVueI18n.t,
  a = {
    name: "UniSearchBar",
    emits: ["input", "update:modelValue", "clear", "cancel", "confirm", "blur", "focus"],
    props: {
      placeholder: {
        type: String,
        default: ""
      },
      radius: {
        type: [Number, String],
        default: 5
      },
      clearButton: {
        type: String,
        default: "auto"
      },
      cancelButton: {
        type: String,
        default: "auto"
      },
      cancelText: {
        type: String,
        default: ""
      },
      bgColor: {
        type: String,
        default: "#F8F8F8"
      },
      textColor: {
        type: String,
        default: "#000000"
      },
      maxlength: {
        type: [Number, String],
        default: 100
      },
      value: {
        type: [Number, String],
        default: ""
      },
      modelValue: {
        type: [Number, String],
        default: ""
      },
      focus: {
        type: Boolean,
        default: !1
      },
      readonly: {
        type: Boolean,
        default: !1
      }
    },
    data: function data() {
      return {
        show: !1,
        showSync: !1,
        searchVal: ""
      };
    },
    computed: {
      cancelTextI18n: function cancelTextI18n() {
        return this.cancelText || t("uni-search-bar.cancel");
      },
      placeholderText: function placeholderText() {
        return this.placeholder || t("uni-search-bar.placeholder");
      }
    },
    watch: {
      modelValue: {
        immediate: !0,
        handler: function handler(e) {
          this.searchVal = e, e && (this.show = !0);
        }
      },
      focus: {
        immediate: !0,
        handler: function handler(e) {
          var _this = this;
          if (e) {
            if (this.readonly) return;
            this.show = !0, this.$nextTick(function () {
              _this.showSync = !0;
            });
          }
        }
      },
      searchVal: function searchVal(e, t) {
        this.$emit("input", e), this.$emit("update:modelValue", e);
      }
    },
    methods: {
      searchClick: function searchClick() {
        var _this2 = this;
        this.readonly || this.show || (this.show = !0, this.$nextTick(function () {
          _this2.showSync = !0;
        }));
      },
      clear: function clear() {
        var _this3 = this;
        this.searchVal = "", this.$nextTick(function () {
          _this3.$emit("clear", {
            value: ""
          });
        });
      },
      cancel: function cancel() {
        this.readonly || (this.$emit("cancel", {
          value: this.searchVal
        }), this.searchVal = "", this.show = !1, this.showSync = !1, e.index.hideKeyboard());
      },
      confirm: function confirm() {
        e.index.hideKeyboard(), this.$emit("confirm", {
          value: this.searchVal
        });
      },
      blur: function blur() {
        e.index.hideKeyboard(), this.$emit("blur", {
          value: this.searchVal
        });
      },
      emitFocus: function emitFocus(e) {
        this.$emit("focus", e.detail);
      }
    }
  };
if (!Array) {
  e.resolveComponent("uni-icons")();
}
Math;
var l = e._export_sfc(a, [["render", function (t, a, l, c, r, o) {
  return e.e({
    a: e.p({
      color: "#c0c4cc",
      size: "18",
      type: "search"
    }),
    b: r.show || r.searchVal
  }, r.show || r.searchVal ? {
    c: r.showSync,
    d: l.readonly,
    e: o.placeholderText,
    f: l.maxlength,
    g: l.textColor,
    h: e.o(function () {
      return o.confirm && o.confirm.apply(o, arguments);
    }),
    i: e.o(function () {
      return o.blur && o.blur.apply(o, arguments);
    }),
    j: e.o(function () {
      return o.emitFocus && o.emitFocus.apply(o, arguments);
    }),
    k: r.searchVal,
    l: e.o(function (e) {
      return r.searchVal = e.detail.value;
    })
  } : {
    m: e.t(l.placeholder)
  }, {
    n: r.show && ("always" === l.clearButton || "auto" === l.clearButton && "" !== r.searchVal) && !l.readonly
  }, r.show && ("always" === l.clearButton || "auto" === l.clearButton && "" !== r.searchVal) && !l.readonly ? {
    o: e.p({
      color: "#c0c4cc",
      size: "20",
      type: "clear"
    }),
    p: e.o(function () {
      return o.clear && o.clear.apply(o, arguments);
    })
  } : {}, {
    q: l.radius + "px",
    r: l.bgColor,
    s: e.o(function () {
      return o.searchClick && o.searchClick.apply(o, arguments);
    }),
    t: "always" === l.cancelButton || r.show && "auto" === l.cancelButton
  }, "always" === l.cancelButton || r.show && "auto" === l.cancelButton ? {
    v: e.t(o.cancelTextI18n),
    w: e.o(function () {
      return o.cancel && o.cancel.apply(o, arguments);
    })
  } : {});
}]]);
wx.createComponent(l); 
 			}); 	require("node-modules/@dcloudio/uni-ui/lib/uni-search-bar/uni-search-bar.js");
 		__wxRoute = 'node-modules/@dcloudio/uni-ui/lib/uni-transition/uni-transition';__wxRouteBegin = true; 	__wxAppCurrentFile__ = 'node-modules/@dcloudio/uni-ui/lib/uni-transition/uni-transition.js';	define("node-modules/@dcloudio/uni-ui/lib/uni-transition/uni-transition.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";

var _toConsumableArray2 = require("../../../../../@babel/runtime/helpers/toConsumableArray");
var _objectSpread2 = require("../../../../../@babel/runtime/helpers/objectSpread2");
var t = require("../../../../../common/vendor.js"),
  i = {
    name: "uniTransition",
    emits: ["click", "change"],
    props: {
      show: {
        type: Boolean,
        default: !1
      },
      modeClass: {
        type: [Array, String],
        default: function _default() {
          return "fade";
        }
      },
      duration: {
        type: Number,
        default: 300
      },
      styles: {
        type: Object,
        default: function _default() {
          return {};
        }
      },
      customClass: {
        type: String,
        default: ""
      },
      onceRender: {
        type: Boolean,
        default: !1
      }
    },
    data: function data() {
      return {
        isShow: !1,
        transform: "",
        opacity: 0,
        animationData: {},
        durationTime: 300,
        config: {}
      };
    },
    watch: {
      show: {
        handler: function handler(t) {
          t ? this.open() : this.isShow && this.close();
        },
        immediate: !0
      }
    },
    computed: {
      stylesObject: function stylesObject() {
        var t = _objectSpread2(_objectSpread2({}, this.styles), {}, {
            "transition-duration": this.duration / 1e3 + "s"
          }),
          i = "";
        for (var _s in t) {
          i += this.toLine(_s) + ":" + t[_s] + ";";
        }
        return i;
      },
      transformStyles: function transformStyles() {
        return "transform:" + this.transform + ";opacity:" + this.opacity + ";" + this.stylesObject;
      }
    },
    created: function created() {
      this.config = {
        duration: this.duration,
        timingFunction: "ease",
        transformOrigin: "50% 50%",
        delay: 0
      }, this.durationTime = this.duration;
    },
    methods: {
      init: function init() {
        var i = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
        i.duration && (this.durationTime = i.duration), this.animation = t.createAnimation(Object.assign(this.config, i), this);
      },
      onClick: function onClick() {
        this.$emit("click", {
          detail: this.isShow
        });
      },
      step: function step(t) {
        var _this = this;
        var i = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
        return this.animation ? (Object.keys(t).forEach(function (i) {
          var _this$animation;
          var s = t[i];
          "function" == typeof _this.animation[i] && (Array.isArray(s) ? (_this$animation = _this.animation)[i].apply(_this$animation, _toConsumableArray2(s)) : _this.animation[i](s));
        }), this.animation.step(i), this) : this;
      },
      run: function run(t) {
        this.animation && this.animation.run(t);
      },
      open: function open() {
        var _this2 = this;
        clearTimeout(this.timer), this.isShow = !0, this.transform = this.styleInit(!1).transform || "", this.opacity = this.styleInit(!1).opacity || 0, this.$nextTick(function () {
          _this2.timer = setTimeout(function () {
            _this2.animation = t.createAnimation(_this2.config, _this2), _this2.tranfromInit(!1).step(), _this2.animation.run(function () {
              _this2.transform = "", _this2.opacity = _this2.styleInit(!1).opacity || 1, _this2.$emit("change", {
                detail: _this2.isShow
              });
            });
          }, 80);
        });
      },
      close: function close(t) {
        var _this3 = this;
        this.animation && this.tranfromInit(!0).step().run(function () {
          _this3.isShow = !1, _this3.animationData = null, _this3.animation = null;
          var _this3$styleInit = _this3.styleInit(!1),
            t = _this3$styleInit.opacity,
            i = _this3$styleInit.transform;
          _this3.opacity = t || 1, _this3.transform = i, _this3.$emit("change", {
            detail: _this3.isShow
          });
        });
      },
      styleInit: function styleInit(t) {
        var _this4 = this;
        var i = {
          transform: "",
          opacity: 1
        };
        var s = function s(t, _s2) {
          var a = _this4.animationType(t)[_s2];
          _s2.startsWith("fade") ? i.opacity = a : i.transform += a + " ";
        };
        return "string" == typeof this.modeClass ? s(t, this.modeClass) : this.modeClass.forEach(function (i) {
          return s(t, i);
        }), i;
      },
      tranfromInit: function tranfromInit(t) {
        var _this5 = this;
        var i = function i(t, _i) {
          var s = null;
          "fade" === _i ? s = t ? 0 : 1 : (s = t ? "-100%" : "0", "zoom-in" === _i && (s = t ? .8 : 1), "zoom-out" === _i && (s = t ? 1.2 : 1), "slide-right" === _i && (s = t ? "100%" : "0"), "slide-bottom" === _i && (s = t ? "100%" : "0")), _this5.animation[_this5.animationMode()[_i]](s);
        };
        return "string" == typeof this.modeClass ? i(t, this.modeClass) : this.modeClass.forEach(function (s) {
          i(t, s);
        }), this.animation;
      },
      animationType: function animationType(t) {
        return {
          fade: t ? 1 : 0,
          "slide-top": "translateY(".concat(t ? "0" : "-100%", ")"),
          "slide-right": "translateX(".concat(t ? "0" : "100%", ")"),
          "slide-bottom": "translateY(".concat(t ? "0" : "100%", ")"),
          "slide-left": "translateX(".concat(t ? "0" : "-100%", ")"),
          "zoom-in": "scaleX(".concat(t ? 1 : .8, ") scaleY(").concat(t ? 1 : .8, ")"),
          "zoom-out": "scaleX(".concat(t ? 1 : 1.2, ") scaleY(").concat(t ? 1 : 1.2, ")")
        };
      },
      animationMode: function animationMode() {
        return {
          fade: "opacity",
          "slide-top": "translateY",
          "slide-right": "translateX",
          "slide-bottom": "translateY",
          "slide-left": "translateX",
          "zoom-in": "scale",
          "zoom-out": "scale"
        };
      },
      toLine: function toLine(t) {
        return t.replace(/([A-Z])/g, "-$1").toLowerCase();
      }
    }
  };
var s = t._export_sfc(i, [["render", function (i, s, a, n, o, e) {
  return {
    a: o.isShow,
    b: o.animationData,
    c: t.n(a.customClass),
    d: t.s(e.transformStyles),
    e: t.o(function () {
      return e.onClick && e.onClick.apply(e, arguments);
    })
  };
}]]);
wx.createComponent(s); 
 			}); 	require("node-modules/@dcloudio/uni-ui/lib/uni-transition/uni-transition.js");
 		__wxRoute = 'pages/connect/connect';__wxRouteBegin = true; 	__wxAppCurrentFile__ = 'pages/connect/connect.js';	define("pages/connect/connect.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";

var _slicedToArray2 = require("../../@babel/runtime/helpers/slicedToArray");
var _regeneratorRuntime2 = require("../../@babel/runtime/helpers/regeneratorRuntime");
var _asyncToGenerator2 = require("../../@babel/runtime/helpers/asyncToGenerator");
var _objectSpread2 = require("../../@babel/runtime/helpers/objectSpread2");
var e = require("../../common/vendor.js"),
  o = require("../../services/bluetooth.js"),
  t = require("../../utils/chameleon-protocol.js"),
  i = require("../../utils/firmware.js"),
  n = {
    name: "ConnectPage",
    data: function data() {
      return {
        isScanning: !1,
        isConnected: !1,
        isConnecting: !1,
        foundDevices: [],
        connectedDevice: null,
        deviceInfo: null,
        batteryInfo: {},
        activationDialogVisible: !1,
        activationCode: "",
        activationError: "",
        activationLoading: !1,
        scanTimer: null,
        lastScanTime: 0,
        firmwareDialogVisible: !1,
        firmwareCheckDone: !1,
        updateInfo: {
          hasUpdate: !1,
          version: "",
          notes: "",
          downloadUrl: ""
        },
        updateCheckDone: !1,
        loadingText: {
          contentdown: "正在扫描设备...",
          contentrefresh: "扫描中...",
          contentnomore: "没有更多设备"
        }
      };
    },
    computed: _objectSpread2({
      statusClass: function statusClass() {
        return this.isConnected ? "status-connected" : this.isConnecting ? "status-connecting" : this.isScanning ? "status-scanning" : "status-disconnected";
      },
      statusText: function statusText() {
        return this.isConnected ? "已连接" : this.isConnecting ? "连接中..." : this.isScanning ? "扫描中..." : "未连接";
      },
      isDFU: function isDFU() {
        return o.bluetoothService.isDFU;
      }
    }, e.mapGetters("device", ["isConnected", "deviceInfo", "batteryInfo", "licenseKey", "isActivated", "trialCount", "chipId"])),
    onLoad: function onLoad() {
      this.initBluetooth();
    },
    onShow: function onShow() {
      this.isConnected || this.startScan(), this.isConnected && this.loadActivationInfo();
    },
    onUnload: function onUnload() {
      this.cleanup();
    },
    onHide: function onHide() {
      this.isScanning && this.stopScan();
    },
    methods: _objectSpread2(_objectSpread2({}, e.mapActions("device", ["getLicenseKey", "getTrialCount", "getDeviceChipID", "verifyActivationCode", "getDeviceInfo"])), {}, {
      initBluetooth: function initBluetooth() {
        var _this = this;
        return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee() {
          return _regeneratorRuntime2().wrap(function _callee$(_context) {
            while (1) switch (_context.prev = _context.next) {
              case 0:
                _context.prev = 0;
                console.log("[ConnectPage] 初始化蓝牙服务...");
                o.bluetoothService.on("deviceFound", _this.onDeviceFound);
                o.bluetoothService.on("connected", _this.onDeviceConnected);
                o.bluetoothService.on("disconnected", _this.onDeviceDisconnected);
                o.bluetoothService.on("error", _this.onBluetoothError);
                _context.next = 8;
                return o.bluetoothService.initialize();
              case 8:
                console.log("[ConnectPage] 蓝牙服务初始化完成");
                _this.checkConnectionStatus();
                _context.next = 15;
                break;
              case 12:
                _context.prev = 12;
                _context.t0 = _context["catch"](0);
                console.error("[ConnectPage] 蓝牙初始化失败", _context.t0), _this.showError("蓝牙初始化失败: " + _context.t0.message);
              case 15:
              case "end":
                return _context.stop();
            }
          }, _callee, null, [[0, 12]]);
        }))();
      },
      startScan: function startScan() {
        var _this2 = this;
        return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee2() {
          return _regeneratorRuntime2().wrap(function _callee2$(_context2) {
            while (1) switch (_context2.prev = _context2.next) {
              case 0:
                _context2.prev = 0;
                console.log("[ConnectPage] 开始扫描设备...");
                _this2.foundDevices = [];
                _this2.isScanning = !0;
                _this2.lastScanTime = Date.now();
                _context2.next = 7;
                return o.bluetoothService.startScan();
              case 7:
                _this2.scanTimer = setTimeout(function () {
                  _this2.stopScan();
                }, 1e4);
                _context2.next = 13;
                break;
              case 10:
                _context2.prev = 10;
                _context2.t0 = _context2["catch"](0);
                console.error("[ConnectPage] 扫描失败", _context2.t0), _this2.isScanning = !1, _this2.showError("扫描失败: " + _context2.t0.message);
              case 13:
              case "end":
                return _context2.stop();
            }
          }, _callee2, null, [[0, 10]]);
        }))();
      },
      stopScan: function stopScan() {
        var _this3 = this;
        return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee3() {
          return _regeneratorRuntime2().wrap(function _callee3$(_context3) {
            while (1) switch (_context3.prev = _context3.next) {
              case 0:
                _context3.prev = 0;
                _context3.next = 3;
                return o.bluetoothService.stopScan();
              case 3:
                _this3.isScanning = !1;
                _this3.scanTimer && (clearTimeout(_this3.scanTimer), _this3.scanTimer = null);
                console.log("[ConnectPage] 停止扫描");
                _context3.next = 11;
                break;
              case 8:
                _context3.prev = 8;
                _context3.t0 = _context3["catch"](0);
                console.error("[ConnectPage] 停止扫描失败", _context3.t0);
              case 11:
              case "end":
                return _context3.stop();
            }
          }, _callee3, null, [[0, 8]]);
        }))();
      },
      connectDevice: function connectDevice(t) {
        var _this4 = this;
        return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee4() {
          return _regeneratorRuntime2().wrap(function _callee4$(_context4) {
            while (1) switch (_context4.prev = _context4.next) {
              case 0:
                _context4.prev = 0;
                console.log("[ConnectPage] 连接设备", t);
                _this4.isConnecting = !0;
                e.index.showLoading({
                  title: "正在连接设备...",
                  mask: !0
                });
                _context4.next = 6;
                return _this4.stopScan();
              case 6:
                _context4.next = 8;
                return o.bluetoothService.connectToDevice(t);
              case 8:
                console.log("[ConnectPage] 设备连接成功");
                _this4.checkFirmwareCompatibility();
                _context4.next = 15;
                break;
              case 12:
                _context4.prev = 12;
                _context4.t0 = _context4["catch"](0);
                console.error("[ConnectPage] 连接失败", _context4.t0), _this4.isConnecting = !1, e.index.hideLoading(), _this4.showError("连接失败: " + _context4.t0.message);
              case 15:
              case "end":
                return _context4.stop();
            }
          }, _callee4, null, [[0, 12]]);
        }))();
      },
      disconnect: function disconnect() {
        var _this5 = this;
        return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee5() {
          return _regeneratorRuntime2().wrap(function _callee5$(_context5) {
            while (1) switch (_context5.prev = _context5.next) {
              case 0:
                _context5.prev = 0;
                _context5.next = 3;
                return o.bluetoothService.disconnect();
              case 3:
                _this5.connectedDevice = null;
                _this5.deviceInfo = null;
                _this5.batteryInfo = {};
                _this5.isConnected = !1;
                e.index.showToast({
                  title: "已断开连接",
                  icon: "success"
                });
                _context5.next = 13;
                break;
              case 10:
                _context5.prev = 10;
                _context5.t0 = _context5["catch"](0);
                console.error("[ConnectPage] 断开连接失败", _context5.t0), _this5.showError("断开连接失败: " + _context5.t0.message);
              case 13:
              case "end":
                return _context5.stop();
            }
          }, _callee5, null, [[0, 10]]);
        }))();
      },
      refreshDeviceInfo: function refreshDeviceInfo() {
        var _this6 = this;
        return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee6() {
          var _yield$Promise$all, _yield$Promise$all2, _t, _i;
          return _regeneratorRuntime2().wrap(function _callee6$(_context6) {
            while (1) switch (_context6.prev = _context6.next) {
              case 0:
                if (!_this6.isConnected) {
                  _context6.next = 15;
                  break;
                }
                _context6.prev = 1;
                e.index.showLoading({
                  title: "正在获取设备信息...",
                  mask: !1
                });
                _context6.next = 5;
                return Promise.all([_this6.getDeviceInfo(), o.bluetoothService.getBatteryInfo()]);
              case 5:
                _yield$Promise$all = _context6.sent;
                _yield$Promise$all2 = _slicedToArray2(_yield$Promise$all, 2);
                _t = _yield$Promise$all2[0];
                _i = _yield$Promise$all2[1];
                _this6.deviceInfo = _t, _this6.batteryInfo = _i, console.log("[ConnectPage] 设备信息已更新", _t, _i), _this6.$store.commit("device/SET_DEVICE_INFO", _t), _this6.$store.commit("device/SET_BATTERY_INFO", _i), e.index.hideLoading(), _this6.checkForUpdates();
                _context6.next = 15;
                break;
              case 12:
                _context6.prev = 12;
                _context6.t0 = _context6["catch"](1);
                console.error("[ConnectPage] 获取设备信息失败", _context6.t0), e.index.hideLoading(), _this6.showError("获取设备信息失败: " + _context6.t0.message);
              case 15:
              case "end":
                return _context6.stop();
            }
          }, _callee6, null, [[1, 12]]);
        }))();
      },
      checkConnectionStatus: function checkConnectionStatus() {
        this.isConnected = o.bluetoothService.isConnected, this.isConnected && (this.connectedDevice = o.bluetoothService.connectedDevice, this.refreshDeviceInfo());
      },
      onDeviceFound: function onDeviceFound(e) {
        console.log("[ConnectPage] 发现设备", e);
        var o = this.foundDevices.findIndex(function (o) {
          return o.deviceId === e.deviceId;
        });
        e.lastSeen = Date.now(), o >= 0 ? this.foundDevices.splice(o, 1, e) : this.foundDevices.push(e), this.foundDevices.sort(function (e, o) {
          return (o.RSSI || -100) - (e.RSSI || -100);
        });
      },
      onDeviceConnected: function onDeviceConnected(t) {
        var _this7 = this;
        return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee7() {
          return _regeneratorRuntime2().wrap(function _callee7$(_context7) {
            while (1) switch (_context7.prev = _context7.next) {
              case 0:
                if (!(console.log("[ConnectPage] 设备连接成功", t), _this7.isConnecting = !1, _this7.isConnected = !0, _this7.connectedDevice = t, e.index.hideLoading(), _this7.foundDevices = [], _this7.$store.commit("device/SET_CONNECTED_DEVICE", t), _this7.$store.commit("device/SET_CONNECTION_STATUS", !0), o.bluetoothService.isDFU)) {
                  _context7.next = 2;
                  break;
                }
                return _context7.abrupt("return", (console.log("[ConnectPage] 设备处于 DFU 模式，显示固件损坏提示"), void _this7.$refs.dfuPopup.open()));
              case 2:
                e.index.showToast({
                  title: "设备连接成功",
                  icon: "success",
                  duration: 1500
                });
                _context7.next = 5;
                return _this7.delay(1e3);
              case 5:
                _context7.prev = 5;
                console.log("[ConnectPage] 开始获取设备信息");
                _context7.next = 9;
                return _this7.getDeviceInfoWithRetry();
              case 9:
                _context7.t0 = _this7.isDFU;
                if (_context7.t0) {
                  _context7.next = 19;
                  break;
                }
                console.log("[ConnectPage] 开始加载激活信息");
                _context7.next = 14;
                return _this7.loadActivationInfo();
              case 14:
                console.log("[ConnectPage] 准备检查固件更新");
                _context7.next = 17;
                return _this7.delay(1e3);
              case 17:
                _context7.next = 19;
                return _this7.checkForUpdates();
              case 19:
                _context7.next = 24;
                break;
              case 21:
                _context7.prev = 21;
                _context7.t1 = _context7["catch"](5);
                console.error("[ConnectPage] 获取设备信息或激活信息失败", _context7.t1);
              case 24:
              case "end":
                return _context7.stop();
            }
          }, _callee7, null, [[5, 21]]);
        }))();
      },
      getDeviceInfoWithRetry: function getDeviceInfoWithRetry() {
        var _arguments = arguments,
          _this8 = this;
        return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee8() {
          var e, t, i, _i2, _n;
          return _regeneratorRuntime2().wrap(function _callee8$(_context8) {
            while (1) switch (_context8.prev = _context8.next) {
              case 0:
                e = _arguments.length > 0 && _arguments[0] !== undefined ? _arguments[0] : 3;
                t = 0, i = null;
              case 2:
                if (!(t <= e)) {
                  _context8.next = 24;
                  break;
                }
                _context8.prev = 3;
                if (!(console.log("[ConnectPage] \u5C1D\u8BD5\u83B7\u53D6\u8BBE\u5907\u4FE1\u606F (\u5C1D\u8BD5 ".concat(t + 1, "/").concat(e + 1, ")")), !o.bluetoothService.isConnected)) {
                  _context8.next = 6;
                  break;
                }
                throw new Error("设备未连接");
              case 6:
                _context8.next = 8;
                return _this8.getDeviceInfo();
              case 8:
                _i2 = _context8.sent;
                _context8.next = 11;
                return o.bluetoothService.getBatteryInfo();
              case 11:
                _n = _context8.sent;
                return _context8.abrupt("return", (_this8.deviceInfo = _i2, _this8.batteryInfo = _n, _this8.$store.commit("device/SET_DEVICE_INFO", _i2), _this8.$store.commit("device/SET_BATTERY_INFO", _n), console.log("[ConnectPage] 成功获取设备信息:", _i2), _i2));
              case 15:
                _context8.prev = 15;
                _context8.t0 = _context8["catch"](3);
                if (!(console.error("[ConnectPage] \u83B7\u53D6\u8BBE\u5907\u4FE1\u606F\u5931\u8D25 (\u5C1D\u8BD5 ".concat(t + 1, "/").concat(e + 1, ")"), _context8.t0), i = _context8.t0, _context8.t0.message.includes("设备未连接"))) {
                  _context8.next = 19;
                  break;
                }
                return _context8.abrupt("break", 24);
              case 19:
                _context8.next = 21;
                return _this8.delay(1e3);
              case 21:
                t++;
              case 22:
                _context8.next = 2;
                break;
              case 24:
                throw i || new Error("无法获取设备信息");
              case 25:
              case "end":
                return _context8.stop();
            }
          }, _callee8, null, [[3, 15]]);
        }))();
      },
      delay: function delay(e) {
        return new Promise(function (o) {
          return setTimeout(o, e);
        });
      },
      checkFirmwareCompatibility: function checkFirmwareCompatibility() {
        var _this9 = this;
        return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee9() {
          var _e;
          return _regeneratorRuntime2().wrap(function _callee9$(_context9) {
            while (1) switch (_context9.prev = _context9.next) {
              case 0:
                if (!_this9.isConnected) {
                  _context9.next = 12;
                  break;
                }
                _context9.prev = 1;
                console.log("[ConnectPage] 检查固件兼容性");
                _context9.next = 5;
                return o.bluetoothService.getCustomGitCommitHash();
              case 5:
                _e = _context9.sent;
                console.log("[ConnectPage] 自定义固件版本:", _e), i.isFirmwareCompatible(_e) ? (console.log("[ConnectPage] 固件兼容"), _this9.firmwareCheckDone = !0) : (console.warn("[ConnectPage] 固件不兼容:", _e), _this9.showFirmwareDialog());
                _context9.next = 12;
                break;
              case 9:
                _context9.prev = 9;
                _context9.t0 = _context9["catch"](1);
                console.error("[ConnectPage] 检查固件兼容性失败:", _context9.t0), _this9.showFirmwareDialog();
              case 12:
              case "end":
                return _context9.stop();
            }
          }, _callee9, null, [[1, 9]]);
        }))();
      },
      onDeviceDisconnected: function onDeviceDisconnected(o) {
        console.log("[ConnectPage] 设备断开连接", o), this.isConnected = !1, this.connectedDevice = null, this.deviceInfo = null, this.batteryInfo = {}, this.$store.commit("device/SET_CONNECTION_STATUS", !1), this.$store.commit("device/SET_CONNECTED_DEVICE", null), e.index.showToast({
          title: "设备已断开",
          icon: "none"
        });
      },
      onBluetoothError: function onBluetoothError(o) {
        console.error("[ConnectPage] 蓝牙错误", o), this.isConnecting = !1, e.index.hideLoading(), this.showError("蓝牙错误: " + o.message);
      },
      formatTime: function formatTime(e) {
        if (!e) return "未知";
        var o = Date.now() - e;
        if (o < 1e3) return "刚刚";
        if (o < 6e4) return Math.floor(o / 1e3) + "秒前";
        if (o < 36e5) return Math.floor(o / 6e4) + "分钟前";
        return new Date(e).toLocaleTimeString();
      },
      getModelName: function getModelName(e) {
        return t.ChameleonProtocol.getDeviceModelName(e);
      },
      getModeName: function getModeName(e) {
        return t.ChameleonProtocol.getDeviceModeName(e);
      },
      showError: function showError(o) {
        e.index.showModal({
          title: "错误",
          content: o,
          showCancel: !1
        });
      },
      goBack: function goBack() {
        e.index.navigateBack();
      },
      loadActivationInfo: function loadActivationInfo() {
        var _this10 = this;
        return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee10() {
          var _o, _t2, _i3;
          return _regeneratorRuntime2().wrap(function _callee10$(_context10) {
            while (1) switch (_context10.prev = _context10.next) {
              case 0:
                _context10.prev = 0;
                if (!_this10.isConnected) {
                  _context10.next = 15;
                  break;
                }
                e.index.showLoading({
                  title: "加载中...",
                  mask: !0
                }), console.log("[ConnectPage] 开始获取激活码");
                _context10.next = 5;
                return _this10.getLicenseKey();
              case 5:
                _o = _context10.sent;
                console.log("[ConnectPage] 获取激活码结果:", _o ? "已激活" : "未激活"), console.log("[ConnectPage] 开始获取试用次数");
                _context10.next = 9;
                return _this10.getTrialCount();
              case 9:
                _t2 = _context10.sent;
                console.log("[ConnectPage] 获取试用次数结果:", _t2), console.log("[ConnectPage] 开始获取设备芯片ID");
                _context10.next = 13;
                return _this10.getDeviceChipID();
              case 13:
                _i3 = _context10.sent;
                return _context10.abrupt("return", (console.log("[ConnectPage] 获取设备芯片ID结果:", _i3), e.index.hideLoading(), {
                  licenseKey: _o,
                  trialCount: _t2,
                  chipId: _i3
                }));
              case 15:
                _context10.next = 20;
                break;
              case 17:
                _context10.prev = 17;
                _context10.t0 = _context10["catch"](0);
                return _context10.abrupt("return", (console.error("[ConnectPage] 加载激活信息失败", _context10.t0), null));
              case 20:
              case "end":
                return _context10.stop();
            }
          }, _callee10, null, [[0, 17]]);
        }))();
      },
      showActivationDialog: function showActivationDialog() {
        var _this11 = this;
        this.activationDialogVisible = !0, this.activationCode = "", this.activationError = "", this.$nextTick(function () {
          _this11.$refs.activationPopup.open();
        });
      },
      hideActivationDialog: function hideActivationDialog() {
        var _this12 = this;
        this.$refs.activationPopup.close(), setTimeout(function () {
          _this12.activationDialogVisible = !1;
        }, 200);
      },
      submitActivationCode: function submitActivationCode() {
        var _this13 = this;
        return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee11() {
          var _i4, _n2;
          return _regeneratorRuntime2().wrap(function _callee11$(_context11) {
            while (1) switch (_context11.prev = _context11.next) {
              case 0:
                if (!_this13.activationCode) {
                  _context11.next = 38;
                  break;
                }
                if (!(12 === _this13.activationCode.length)) {
                  _context11.next = 35;
                  break;
                }
                _this13.activationLoading = !0;
                _context11.prev = 3;
                _i4 = "轮询固件 v1.0.0";
                _context11.prev = 5;
                _context11.next = 8;
                return o.bluetoothService.getCustomGitCommitHash();
              case 8:
                _i4 = _context11.sent;
                _context11.next = 14;
                break;
              case 11:
                _context11.prev = 11;
                _context11.t0 = _context11["catch"](5);
                console.error("[ConnectPage] 获取自定义版本失败", _context11.t0);
              case 14:
                _context11.next = 16;
                return _this13.verifyActivationCode({
                  code: _this13.activationCode,
                  firmwareVersion: _i4
                });
              case 16:
                _n2 = _context11.sent;
                if (!_n2.success) {
                  _context11.next = 24;
                  break;
                }
                e.index.showToast({
                  title: "激活成功",
                  icon: "success"
                });
                _this13.hideActivationDialog();
                _context11.next = 22;
                return _this13.loadActivationInfo();
              case 22:
                _context11.next = 25;
                break;
              case 24:
                _this13.activationError = _n2.message || "激活失败";
              case 25:
                _context11.next = 30;
                break;
              case 27:
                _context11.prev = 27;
                _context11.t1 = _context11["catch"](3);
                console.error("[ConnectPage] 激活失败", _context11.t1), _this13.activationError = "激活失败: " + _context11.t1.message;
              case 30:
                _context11.prev = 30;
                _this13.activationLoading = !1;
                return _context11.finish(30);
              case 33:
                _context11.next = 36;
                break;
              case 35:
                _this13.activationError = "激活码必须为12位";
              case 36:
                _context11.next = 39;
                break;
              case 38:
                _this13.activationError = "请输入激活码";
              case 39:
              case "end":
                return _context11.stop();
            }
          }, _callee11, null, [[3, 27, 30, 33], [5, 11]]);
        }))();
      },
      cleanup: function cleanup() {
        o.bluetoothService.off("deviceFound", this.onDeviceFound), o.bluetoothService.off("connected", this.onDeviceConnected), o.bluetoothService.off("disconnected", this.onDeviceDisconnected), o.bluetoothService.off("error", this.onBluetoothError), this.scanTimer && (clearTimeout(this.scanTimer), this.scanTimer = null), this.isScanning && this.stopScan();
      },
      copyText: function copyText(o) {
        var _this14 = this;
        e.index.setClipboardData({
          data: o,
          success: function success() {
            e.index.showToast({
              title: "已复制到剪贴板",
              icon: "success"
            });
          },
          fail: function fail(e) {
            console.error("[ConnectPage] 复制文本失败", e), _this14.showError("复制文本失败");
          }
        });
      },
      showFirmwareDialog: function showFirmwareDialog() {
        this.firmwareDialogVisible = !0, this.$refs.firmwarePopup.open();
      },
      hideFirmwareDialog: function hideFirmwareDialog() {
        this.firmwareDialogVisible = !1, this.$refs.firmwarePopup.close();
      },
      flashFirmware: function flashFirmware() {
        console.log("[ConnectPage] 开始自动刷入兼容固件");
        var o = this.connectedDevice;
        console.log("[ConnectPage] 当前连接的设备:", o), e.index.navigateTo({
          url: "/pages/firmware/firmware?autoFlash=true",
          success: function success(e) {
            console.log("[ConnectPage] 跳转到固件页面成功，将自动开始刷入固件");
            try {
              var _t3 = e.eventChannel;
              console.log("[ConnectPage] 事件通道:", _t3), _t3 && _t3.emit ? (console.log("[ConnectPage] 正在传递设备信息"), _t3.emit("flashDevice", o)) : console.error("[ConnectPage] 无法获取事件通道或emit方法不存在");
            } catch (t) {
              console.error("[ConnectPage] 传递设备信息时出错:", t);
            }
          },
          fail: function fail(o) {
            console.error("[ConnectPage] 跳转到固件页面失败", o), e.index.showToast({
              title: "跳转固件页面失败",
              icon: "none"
            });
          }
        });
      },
      hideDFUDialog: function hideDFUDialog(e) {
        console.log("[ConnectPage] 隐藏 DFU 对话框", e), this.$refs.dfuPopup.close(), "cancel" === e && (o.bluetoothService.disconnect(), this.isConnecting = !1, this.isConnected = !1, this.connectedDevice = null, this.$store.commit("device/SET_CONNECTED_DEVICE", null), this.$store.commit("device/SET_CONNECTION_STATUS", !1));
      },
      flashDFUFirmware: function flashDFUFirmware() {
        var _this15 = this;
        return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee12() {
          var o;
          return _regeneratorRuntime2().wrap(function _callee12$(_context12) {
            while (1) switch (_context12.prev = _context12.next) {
              case 0:
                console.log("[ConnectPage] 开始刷入 DFU 固件");
                o = _this15.connectedDevice;
                console.log("[ConnectPage] 当前连接的DFU设备:", o), e.index.navigateTo({
                  url: "/pages/firmware/firmware?autoDFU=true",
                  success: function success(e) {
                    console.log("[ConnectPage] 跳转到固件页面成功，将自动开始刷入固件");
                    try {
                      var _t4 = e.eventChannel;
                      console.log("[ConnectPage] 事件通道:", _t4), _t4 && _t4.emit ? (console.log("[ConnectPage] 正在传递DFU设备信息"), _t4.emit("dfuDevice", o)) : console.error("[ConnectPage] 无法获取事件通道或emit方法不存在");
                    } catch (t) {
                      console.error("[ConnectPage] 传递DFU设备信息时出错:", t);
                    }
                  },
                  fail: function fail(o) {
                    console.error("[ConnectPage] 跳转到固件页面失败", o), e.index.showToast({
                      title: "跳转固件页面失败",
                      icon: "none"
                    });
                  }
                });
              case 3:
              case "end":
                return _context12.stop();
            }
          }, _callee12);
        }))();
      },
      checkForUpdates: function checkForUpdates() {
        var _this16 = this;
        return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee13() {
          var _e2, _e3, _o2;
          return _regeneratorRuntime2().wrap(function _callee13$(_context13) {
            while (1) switch (_context13.prev = _context13.next) {
              case 0:
                if (!(_this16.isConnected && _this16.deviceInfo)) {
                  _context13.next = 29;
                  break;
                }
                if (_this16.chipId) {
                  _context13.next = 14;
                  break;
                }
                console.log("[ConnectPage] 芯片ID为空，尝试重新获取");
                _context13.prev = 3;
                _context13.next = 6;
                return _this16.getDeviceChipID();
              case 6:
                _e2 = _context13.sent;
                if (!(console.log("[ConnectPage] 重新获取芯片ID结果:", _e2), !_e2)) {
                  _context13.next = 9;
                  break;
                }
                return _context13.abrupt("return", void console.log("[ConnectPage] 无法获取芯片ID，取消检查更新"));
              case 9:
                _context13.next = 14;
                break;
              case 11:
                _context13.prev = 11;
                _context13.t0 = _context13["catch"](3);
                return _context13.abrupt("return", void console.error("[ConnectPage] 获取芯片ID失败:", _context13.t0));
              case 14:
                console.log("[ConnectPage] 开始检查固件更新，芯片ID:", _this16.chipId);
                _context13.prev = 15;
                _e3 = _this16.deviceInfo.version;
                console.log("[ConnectPage] 当前固件版本:", _e3);
                _context13.next = 20;
                return i.checkFirmwareUpdate(_e3, _this16.chipId);
              case 20:
                _o2 = _context13.sent;
                _o2 && _o2.need_update ? (console.log("[ConnectPage] 发现新版本:", _o2), _this16.updateInfo = {
                  hasUpdate: !0,
                  version: _o2.firmware_info.version || "未知版本",
                  downloadUrl: _o2.firmware_info.download_url || ""
                }, _this16.showUpdateDialog()) : console.log("[ConnectPage] 已是最新版本"), _this16.updateCheckDone = !0;
                _context13.next = 27;
                break;
              case 24:
                _context13.prev = 24;
                _context13.t1 = _context13["catch"](15);
                console.error("[ConnectPage] 检查更新失败:", _context13.t1);
              case 27:
                _context13.next = 30;
                break;
              case 29:
                console.log("[ConnectPage] 无法检查更新：设备未连接或缺少设备信息");
              case 30:
              case "end":
                return _context13.stop();
            }
          }, _callee13, null, [[3, 11], [15, 24]]);
        }))();
      },
      showUpdateDialog: function showUpdateDialog() {
        this.$refs.updatePopup.open();
      },
      hideUpdateDialog: function hideUpdateDialog() {
        this.$refs.updatePopup.close();
      },
      goToUpdateFirmware: function goToUpdateFirmware() {
        e.index.navigateTo({
          url: "/pages/firmware/firmware?updateUrl=" + encodeURIComponent(this.updateInfo.downloadUrl)
        });
      }
    })
  };
if (!Array) {
  (e.resolveComponent("uni-icons") + e.resolveComponent("uni-load-more") + e.resolveComponent("uni-popup-dialog") + e.resolveComponent("uni-popup"))();
}
Math || (function () {
  return "../../node-modules/@dcloudio/uni-ui/lib/uni-icons/uni-icons.js";
} + function () {
  return "../../node-modules/@dcloudio/uni-ui/lib/uni-load-more/uni-load-more.js";
} + function () {
  return "../../node-modules/@dcloudio/uni-ui/lib/uni-popup-dialog/uni-popup-dialog.js";
} + function () {
  return "../../node-modules/@dcloudio/uni-ui/lib/uni-popup/uni-popup.js";
})();
var c = e._export_sfc(n, [["render", function (o, t, i, n, c, s) {
  return e.e({
    a: c.isConnected
  }, c.isConnected ? e.e({
    b: e.p({
      type: o.isActivated ? "checkmarkempty" : "info",
      size: "16",
      color: o.isActivated ? "#4CAF50" : "#FF9800"
    }),
    c: e.t(o.isActivated ? "已激活" : "未激活"),
    d: e.o(s.loadActivationInfo),
    e: e.p({
      type: "refresh",
      size: "30",
      color: "#666"
    }),
    f: o.isActivated
  }, o.isActivated ? {
    g: e.t(o.licenseKey),
    h: e.o(function (e) {
      return s.copyText(o.licenseKey);
    }),
    i: e.p({
      type: "paperplane",
      size: "14",
      color: "#666"
    }),
    j: e.t(o.chipId || "未知"),
    k: e.o(function (e) {
      return s.copyText(o.chipId);
    }),
    l: e.p({
      type: "paperplane",
      size: "14",
      color: "#666"
    })
  } : {
    m: e.t(o.trialCount.remainingCount || "未知"),
    n: e.t(o.chipId || "未知"),
    o: e.p({
      type: "paperplane",
      size: "14",
      color: "#666"
    }),
    p: e.o(function (e) {
      return s.copyText(o.chipId);
    })
  }, {
    q: !o.isActivated
  }, o.isActivated ? {} : {
    r: e.t(c.isConnected ? "激活" : "请先连接"),
    s: e.o(function () {
      return s.showActivationDialog && s.showActivationDialog.apply(s, arguments);
    }),
    t: !c.isConnected
  }, {
    v: o.isActivated ? 1 : ""
  }) : {}, {
    w: e.t(s.statusText),
    x: e.n(s.statusClass),
    y: c.connectedDevice
  }, c.connectedDevice ? {
    z: e.t(c.connectedDevice.name),
    A: e.t(c.connectedDevice.deviceId),
    B: e.t(c.connectedDevice.RSSI)
  } : {}, {
    C: !c.isConnected
  }, c.isConnected ? {} : {
    D: e.t(c.isScanning ? "正在扫描..." : "扫描设备"),
    E: c.isScanning,
    F: e.o(function () {
      return s.startScan && s.startScan.apply(s, arguments);
    })
  }, {
    G: c.isConnected
  }, c.isConnected ? {
    H: e.o(function () {
      return s.disconnect && s.disconnect.apply(s, arguments);
    })
  } : {}, {
    I: !c.isConnected
  }, c.isConnected ? {} : e.e({
    J: e.t(c.foundDevices.length),
    K: 0 === c.foundDevices.length && !c.isScanning
  }, 0 !== c.foundDevices.length || c.isScanning ? {} : {
    L: e.p({
      type: "bluetooth",
      size: "60",
      color: "#cccccc"
    })
  }, {
    M: c.isScanning
  }, c.isScanning ? {
    N: e.p({
      status: "loading",
      "content-text": c.loadingText
    })
  } : {}, {
    O: c.foundDevices.length > 0
  }, c.foundDevices.length > 0 ? {
    P: e.f(c.foundDevices, function (o, t, i) {
      return {
        a: e.t(o.name || "未知设备"),
        b: e.t(o.deviceId),
        c: e.t(o.RSSI),
        d: "b4f65ab7-7-" + i,
        e: e.t(s.formatTime(o.lastSeen)),
        f: o.deviceId,
        g: e.o(function (e) {
          return s.connectDevice(o);
        }, o.deviceId)
      };
    }),
    Q: e.p({
      type: "right",
      size: "16",
      color: "#cccccc"
    })
  } : {}), {
    R: c.isConnected && c.deviceInfo
  }, c.isConnected && c.deviceInfo ? {
    S: e.o(s.refreshDeviceInfo),
    T: e.p({
      type: "refresh",
      size: "30"
    }),
    U: e.t(c.deviceInfo.version || "未知"),
    V: e.t(c.deviceInfo.model || "未知"),
    W: e.t(c.batteryInfo.level || "未知"),
    X: e.t(c.deviceInfo.mode || "未知")
  } : {}, {
    Y: c.activationLoading,
    Z: c.activationCode,
    aa: e.o(function (e) {
      return c.activationCode = e.detail.value;
    }),
    ab: c.activationError
  }, c.activationError ? {
    ac: e.t(c.activationError)
  } : {}, {
    ad: c.activationLoading
  }, c.activationLoading ? {
    ae: e.p({
      status: "loading",
      "content-text": {
        contentdown: "激活中..."
      }
    })
  } : {}, {
    af: e.o(s.hideActivationDialog),
    ag: e.o(s.submitActivationCode),
    ah: e.p({
      type: "info",
      title: "设备激活",
      "before-close": !0
    }),
    ai: e.sr("activationPopup", "b4f65ab7-9"),
    aj: c.activationDialogVisible,
    ak: e.p({
      type: "dialog",
      "mask-click": !1,
      animation: !0
    }),
    al: e.o(s.hideFirmwareDialog),
    am: e.o(s.flashFirmware),
    an: e.p({
      type: "warning",
      title: "固件不兼容",
      confirmText: "刷入固件",
      "before-close": !0
    }),
    ao: e.sr("firmwarePopup", "b4f65ab7-12"),
    ap: e.p({
      type: "dialog",
      "mask-click": !1,
      animation: !0
    }),
    aq: e.o(s.hideDFUDialog),
    ar: e.o(s.flashDFUFirmware),
    as: e.p({
      type: "warning",
      title: "固件可能已损坏",
      cancelText: "取消",
      confirmText: "刷入最新固件",
      "before-close": !0
    }),
    at: e.sr("dfuPopup", "b4f65ab7-14"),
    av: e.p({
      type: "dialog",
      "mask-click": !1,
      animation: !0
    }),
    aw: e.t(c.updateInfo.version || ""),
    ax: c.updateInfo.notes
  }, c.updateInfo.notes ? {
    ay: e.t(c.updateInfo.notes)
  } : {}, {
    az: e.o(s.hideUpdateDialog),
    aA: e.o(s.goToUpdateFirmware),
    aB: e.p({
      type: "info",
      title: "发现新固件",
      cancelText: "稍后再说",
      confirmText: "立即更新",
      "before-close": !0
    }),
    aC: e.sr("updatePopup", "b4f65ab7-16"),
    aD: e.p({
      type: "dialog",
      "mask-click": !1,
      animation: !0
    })
  });
}], ["__scopeId", "data-v-b4f65ab7"]]);
wx.createPage(c); 
 			}); 	require("pages/connect/connect.js");
 		__wxRoute = 'pages/home/home';__wxRouteBegin = true; 	__wxAppCurrentFile__ = 'pages/home/home.js';	define("pages/home/home.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";

var _regeneratorRuntime2 = require("../../@babel/runtime/helpers/regeneratorRuntime");
var _asyncToGenerator2 = require("../../@babel/runtime/helpers/asyncToGenerator");
var _objectSpread2 = require("../../@babel/runtime/helpers/objectSpread2");
var e = require("../../common/vendor.js"),
  t = require("../../services/bluetooth.js"),
  o = {
    name: "HomePage",
    data: function data() {
      return {
        refreshing: !1,
        recentActivities: [{
          id: 1,
          title: "读取了卡片 UID: 04 5A 3B 2C",
          time: Date.now() - 3e5,
          icon: "scan",
          iconColor: "#FF9800"
        }, {
          id: 2,
          title: "切换到卡槽 3",
          time: Date.now() - 6e5,
          icon: "wallet",
          iconColor: "#4CAF50"
        }, {
          id: 3,
          title: "导入了 Mifare Classic 卡片",
          time: Date.now() - 12e5,
          icon: "folder",
          iconColor: "#2196F3"
        }]
      };
    },
    computed: _objectSpread2(_objectSpread2({}, e.mapGetters("device", ["isConnected", "isConnecting", "connectedDevice", "deviceInfo", "batteryInfo", "deviceStatusText", "deviceModelName", "deviceModeName", "batteryStatusText", "activeSlot"])), {}, {
      deviceDisplayName: function deviceDisplayName() {
        return this.connectedDevice ? this.connectedDevice.name || "Chameleon 设备" : "Chameleon Ultra";
      },
      deviceIconType: function deviceIconType() {
        return this.isConnected ? "checkmarkempty" : this.isConnecting ? "loop" : "closeempty";
      },
      deviceIconColor: function deviceIconColor() {
        return this.isConnected ? "#4CAF50" : this.isConnecting ? "#FF9800" : "#999";
      },
      statusColor: function statusColor() {
        return this.isConnected ? "#4CAF50" : this.isConnecting ? "#FF9800" : "#999";
      },
      signalStrengthText: function signalStrengthText() {
        if (!this.connectedDevice || !this.connectedDevice.RSSI) return "未知";
        var e = this.connectedDevice.RSSI;
        return e > -50 ? "强" : e > -70 ? "中" : e > -90 ? "弱" : "很弱";
      }
    }),
    onLoad: function onLoad() {
      this.initPage();
    },
    onShow: function onShow() {
      this.checkDeviceStatus();
    },
    onPullDownRefresh: function onPullDownRefresh() {
      this.refreshPage();
    },
    methods: _objectSpread2(_objectSpread2({}, e.mapActions("device", ["loadSettings", "refreshDeviceInfo", "syncConnectionStatus"])), {}, {
      initPage: function initPage() {
        var _this = this;
        return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee() {
          return _regeneratorRuntime2().wrap(function _callee$(_context) {
            while (1) switch (_context.prev = _context.next) {
              case 0:
                _context.prev = 0;
                _context.next = 3;
                return _this.loadSettings();
              case 3:
                _this.syncConnectionStatus();
                _context.t0 = _this.isConnected;
                if (!_context.t0) {
                  _context.next = 8;
                  break;
                }
                _context.next = 8;
                return _this.checkDeviceStatus();
              case 8:
                _context.next = 13;
                break;
              case 10:
                _context.prev = 10;
                _context.t1 = _context["catch"](0);
                console.error("[HomePage] 初始化失败", _context.t1);
              case 13:
              case "end":
                return _context.stop();
            }
          }, _callee, null, [[0, 10]]);
        }))();
      },
      checkDeviceStatus: function checkDeviceStatus() {
        var _this2 = this;
        return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee2() {
          return _regeneratorRuntime2().wrap(function _callee2$(_context2) {
            while (1) switch (_context2.prev = _context2.next) {
              case 0:
                if (!(_this2.isConnected && !t.bluetoothService.isDFU)) {
                  _context2.next = 9;
                  break;
                }
                _context2.prev = 1;
                _context2.next = 4;
                return _this2.refreshDeviceInfo();
              case 4:
                _context2.next = 9;
                break;
              case 6:
                _context2.prev = 6;
                _context2.t0 = _context2["catch"](1);
                console.error("[HomePage] 检查设备状态失败", _context2.t0);
              case 9:
              case "end":
                return _context2.stop();
            }
          }, _callee2, null, [[1, 6]]);
        }))();
      },
      refreshPage: function refreshPage() {
        var _this3 = this;
        return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee3() {
          return _regeneratorRuntime2().wrap(function _callee3$(_context3) {
            while (1) switch (_context3.prev = _context3.next) {
              case 0:
                if (!t.bluetoothService.isDFU) {
                  _context3.next = 4;
                  break;
                }
                e.index.stopPullDownRefresh();
                _context3.next = 20;
                break;
              case 4:
                _context3.prev = 4;
                _this3.refreshing = !0;
                _context3.t0 = _this3.isConnected;
                if (!_context3.t0) {
                  _context3.next = 10;
                  break;
                }
                _context3.next = 10;
                return _this3.refreshDeviceInfo();
              case 10:
                _context3.next = 12;
                return new Promise(function (e) {
                  return setTimeout(e, 1e3);
                });
              case 12:
                _context3.next = 17;
                break;
              case 14:
                _context3.prev = 14;
                _context3.t1 = _context3["catch"](4);
                console.error("[HomePage] 刷新失败", _context3.t1), e.index.showToast({
                  title: "刷新失败",
                  icon: "error"
                });
              case 17:
                _context3.prev = 17;
                _this3.refreshing = !1, e.index.stopPullDownRefresh();
                return _context3.finish(17);
              case 20:
              case "end":
                return _context3.stop();
            }
          }, _callee3, null, [[4, 14, 17, 20]]);
        }))();
      },
      refreshDeviceInfo: function refreshDeviceInfo() {
        var _this4 = this;
        return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee4() {
          return _regeneratorRuntime2().wrap(function _callee4$(_context4) {
            while (1) switch (_context4.prev = _context4.next) {
              case 0:
                if (!(_this4.isConnected && !t.bluetoothService.isDFU)) {
                  _context4.next = 16;
                  break;
                }
                _context4.prev = 1;
                e.index.showLoading({
                  title: "刷新中..."
                });
                _context4.next = 5;
                return _this4.$store.dispatch("device/refreshDeviceInfo");
              case 5:
                e.index.showToast({
                  title: "刷新成功",
                  icon: "success"
                });
                _context4.next = 11;
                break;
              case 8:
                _context4.prev = 8;
                _context4.t0 = _context4["catch"](1);
                console.error("[HomePage] 刷新设备信息失败", _context4.t0), e.index.showToast({
                  title: "刷新失败",
                  icon: "error"
                });
              case 11:
                _context4.prev = 11;
                e.index.hideLoading();
                return _context4.finish(11);
              case 14:
                _context4.next = 17;
                break;
              case 16:
                e.index.showToast({
                  title: "设备未连接",
                  icon: "none"
                });
              case 17:
              case "end":
                return _context4.stop();
            }
          }, _callee4, null, [[1, 8, 11, 14]]);
        }))();
      },
      goToConnect: function goToConnect() {
        e.index.switchTab({
          url: "/pages/connect/connect"
        });
      },
      goToSlots: function goToSlots() {
        this.isConnected && e.index.switchTab({
          url: "/pages/slots/slots"
        });
      },
      goToCards: function goToCards() {
        this.isConnected && e.index.switchTab({
          url: "/pages/cards/cards"
        });
      },
      goToReader: function goToReader() {
        this.isConnected && e.index.switchTab({
          url: "/pages/reader/reader"
        });
      },
      goToGeofence: function goToGeofence() {
        this.isConnected && e.index.navigateTo({
          url: "/pages/geofence/geofence"
        });
      },
      goToSettings: function goToSettings() {
        e.index.navigateTo({
          url: "/pages/settings/settings"
        });
      },
      viewAllActivity: function viewAllActivity() {
        e.index.navigateTo({
          url: "/pages/activity/activity"
        });
      },
      showConnectionRequired: function showConnectionRequired() {
        var _this5 = this;
        e.index.showModal({
          title: "需要连接设备",
          content: "此功能需要先连接 Chameleon 设备，是否立即连接？",
          confirmText: "去连接",
          success: function success(e) {
            e.confirm && _this5.goToConnect();
          }
        });
      },
      formatTime: function formatTime(e) {
        if (!e) return "未知时间";
        var t = Date.now() - e;
        if (t < 6e4) return "刚刚";
        if (t < 36e5) return Math.floor(t / 6e4) + "分钟前";
        if (t < 864e5) return Math.floor(t / 36e5) + "小时前";
        return new Date(e).toLocaleDateString();
      }
    })
  };
if (!Array) {
  e.resolveComponent("uni-icons")();
}
Math;
var i = e._export_sfc(o, [["render", function (t, o, i, n, s, c) {
  return e.e({
    a: e.p({
      type: c.deviceIconType,
      size: 40,
      color: c.deviceIconColor
    }),
    b: e.t(c.deviceDisplayName),
    c: e.t(t.deviceStatusText),
    d: c.statusColor,
    e: !t.isConnected
  }, t.isConnected ? {
    g: e.o(c.refreshDeviceInfo),
    h: e.p({
      type: "refresh",
      size: "30",
      color: "#666"
    })
  } : {
    f: e.o(function () {
      return c.goToConnect && c.goToConnect.apply(c, arguments);
    })
  }, {
    i: t.isConnected && t.deviceInfo
  }, t.isConnected && t.deviceInfo ? {
    j: e.t(t.deviceModelName),
    k: e.t(t.deviceInfo.version || "未知"),
    l: e.t(t.deviceModeName),
    m: e.t(t.batteryStatusText),
    n: e.t(t.activeSlot + 1),
    o: e.t(c.signalStrengthText)
  } : {}, {
    p: !t.isConnected
  }, (t.isConnected, {}), {
    q: e.p({
      type: "wallet",
      size: "32",
      color: "#4CAF50"
    }),
    r: !t.isConnected
  }, t.isConnected ? {} : {
    s: e.p({
      type: "locked",
      size: "20",
      color: "#999"
    })
  }, {
    t: t.isConnected ? "" : 1,
    v: e.o(function () {
      return c.goToSlots && c.goToSlots.apply(c, arguments);
    }),
    w: e.p({
      type: "folder",
      size: "32",
      color: "#2196F3"
    }),
    x: !t.isConnected
  }, t.isConnected ? {} : {
    y: e.p({
      type: "locked",
      size: "20",
      color: "#999"
    })
  }, {
    z: t.isConnected ? "" : 1,
    A: e.o(function () {
      return c.goToCards && c.goToCards.apply(c, arguments);
    }),
    B: e.p({
      type: "scan",
      size: "32",
      color: "#FF9800"
    }),
    C: !t.isConnected
  }, t.isConnected ? {} : {
    D: e.p({
      type: "locked",
      size: "20",
      color: "#999"
    })
  }, {
    E: t.isConnected ? "" : 1,
    F: e.o(function () {
      return c.goToReader && c.goToReader.apply(c, arguments);
    }),
    G: e.p({
      type: "location",
      size: "32",
      color: "#E91E63"
    }),
    H: !t.isConnected
  }, t.isConnected ? {} : {
    I: e.p({
      type: "locked",
      size: "20",
      color: "#999"
    })
  }, {
    J: t.isConnected ? "" : 1,
    K: e.o(function () {
      return c.goToGeofence && c.goToGeofence.apply(c, arguments);
    }),
    L: e.p({
      type: "gear",
      size: "32",
      color: "#9C27B0"
    }),
    M: e.o(function () {
      return c.goToSettings && c.goToSettings.apply(c, arguments);
    })
  });
}], ["__scopeId", "data-v-971c2681"]]);
wx.createPage(i); 
 			}); 	require("pages/home/home.js");
 		__wxRoute = 'pages/slots/slots';__wxRouteBegin = true; 	__wxAppCurrentFile__ = 'pages/slots/slots.js';	define("pages/slots/slots.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";

var _defineProperty2 = require("../../@babel/runtime/helpers/defineProperty");
var _regeneratorRuntime2 = require("../../@babel/runtime/helpers/regeneratorRuntime");
var _asyncToGenerator2 = require("../../@babel/runtime/helpers/asyncToGenerator");
var _objectSpread2 = require("../../@babel/runtime/helpers/objectSpread2");
var t = require("../../common/vendor.js"),
  e = require("../../utils/chameleon-protocol.js"),
  s = {
    name: "SlotsPage",
    data: function data() {
      return {
        isRefreshing: !1,
        showGlobalSettingsPopup: !1
      };
    },
    computed: _objectSpread2(_objectSpread2(_objectSpread2(_objectSpread2({}, t.mapState("slots", ["slots", "activeSlot", "isLoading", "isUpdating", "lastError", "slotSettings"])), t.mapGetters("slots", ["activeSlotData", "validSlots", "slotStatistics"])), t.mapGetters("device", ["isConnected"])), {}, {
      statistics: function statistics() {
        return this.slotStatistics || {
          usedSlots: 0,
          emptySlots: 16
        };
      }
    }),
    onLoad: function onLoad() {
      this.initPage();
    },
    onShow: function onShow() {
      this.isConnected && this.checkSlotsData();
    },
    onPullDownRefresh: function onPullDownRefresh() {
      this.refreshSlots();
    },
    methods: _objectSpread2(_objectSpread2({}, t.mapActions("slots", ["loadAllSlots", "setActiveSlot", "clearSlot", "loadSlotSettings", "saveSlotSettings", "enableSlotFrequency"])), {}, {
      initPage: function initPage() {
        var _this = this;
        return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee() {
          return _regeneratorRuntime2().wrap(function _callee$(_context) {
            while (1) switch (_context.prev = _context.next) {
              case 0:
                _context.prev = 0;
                _context.next = 3;
                return _this.loadSlotSettings();
              case 3:
                _context.t0 = _this.isConnected;
                if (!_context.t0) {
                  _context.next = 7;
                  break;
                }
                _context.next = 7;
                return _this.loadAllSlots();
              case 7:
                _context.next = 12;
                break;
              case 9:
                _context.prev = 9;
                _context.t1 = _context["catch"](0);
                console.error("[SlotsPage] 初始化失败", _context.t1), _this.showError("初始化失败: " + _context.t1.message);
              case 12:
              case "end":
                return _context.stop();
            }
          }, _callee, null, [[0, 9]]);
        }))();
      },
      checkSlotsData: function checkSlotsData() {
        var _this2 = this;
        return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee2() {
          return _regeneratorRuntime2().wrap(function _callee2$(_context2) {
            while (1) switch (_context2.prev = _context2.next) {
              case 0:
                if (!_this2.isConnected) {
                  _context2.next = 7;
                  break;
                }
                _context2.t0 = 0 !== _this2.statistics.usedSlots || _this2.isLoading;
                if (_context2.t0) {
                  _context2.next = 5;
                  break;
                }
                _context2.next = 5;
                return _this2.refreshSlots();
              case 5:
                _context2.next = 8;
                break;
              case 7:
                _this2.showConnectionRequired();
              case 8:
              case "end":
                return _context2.stop();
            }
          }, _callee2);
        }))();
      },
      refreshSlots: function refreshSlots() {
        var _this3 = this;
        return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee3() {
          return _regeneratorRuntime2().wrap(function _callee3$(_context3) {
            while (1) switch (_context3.prev = _context3.next) {
              case 0:
                if (!_this3.isConnected) {
                  _context3.next = 16;
                  break;
                }
                _context3.prev = 1;
                _this3.isRefreshing = !0;
                _context3.next = 5;
                return _this3.loadAllSlots();
              case 5:
                t.index.showToast({
                  title: "刷新成功",
                  icon: "success"
                });
                _context3.next = 11;
                break;
              case 8:
                _context3.prev = 8;
                _context3.t0 = _context3["catch"](1);
                console.error("[SlotsPage] 刷新失败", _context3.t0), _this3.showError("刷新失败: " + _context3.t0.message);
              case 11:
                _context3.prev = 11;
                _this3.isRefreshing = !1, t.index.stopPullDownRefresh();
                return _context3.finish(11);
              case 14:
                _context3.next = 17;
                break;
              case 16:
                _this3.showConnectionRequired();
              case 17:
              case "end":
                return _context3.stop();
            }
          }, _callee3, null, [[1, 8, 11, 14]]);
        }))();
      },
      handleSlotClick: function handleSlotClick(e) {
        var _this4 = this;
        this.isConnected ? this.slotSettings.quickSwitch && e.enabled ? this.switchToSlot(e.id) : this.isSlotUsed(e) ? t.index.navigateTo({
          url: "/pages/card-detail/card-detail?slotId=".concat(e.id)
        }) : t.index.showActionSheet({
          itemList: ["从卡包添加卡片", "手动添加HF卡片", "手动添加LF卡片"],
          success: function success(t) {
            if (0 === t.tapIndex) _this4.addCardFromPackage(e.id);else {
              var _s = 1 === t.tapIndex ? "hf" : "lf";
              _this4.addCard(e.id, _s);
            }
          }
        }) : this.showConnectionRequired();
      },
      showSlotSettings: function showSlotSettings(e) {
        var _this5 = this;
        e.nickname || e.id;
        var s = e.id === this.activeSlot,
          o = this.isSlotUsed(e),
          i = e.hf && e.hf.enabled && "UNKNOWN" !== e.hf.tagType,
          a = e.lf && e.lf.enabled && "UNKNOWN" !== e.lf.tagType,
          l = [];
        o ? (l.push("查看详细信息"), s || l.push("设为活动卡槽"), i && l.push("HF卡片设置"), a && l.push("LF卡片设置"), i || (l.push("从卡包添加HF卡片"), l.push("手动添加HF卡片")), a || (l.push("从卡包添加LF卡片"), l.push("手动添加LF卡片")), l.push("清空卡槽")) : (l.push("从卡包添加卡片"), l.push("手动添加HF卡片"), l.push("手动添加LF卡片")), t.index.showActionSheet({
          itemList: l,
          success: function () {
            var _success = _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee4(t) {
              return _regeneratorRuntime2().wrap(function _callee4$(_context4) {
                while (1) switch (_context4.prev = _context4.next) {
                  case 0:
                    _context4.t0 = l[t.tapIndex];
                    _context4.next = _context4.t0 === "查看详细信息" ? 3 : _context4.t0 === "设为活动卡槽" ? 5 : _context4.t0 === "HF卡片设置" ? 8 : _context4.t0 === "LF卡片设置" ? 10 : _context4.t0 === "清空卡槽" ? 12 : _context4.t0 === "从卡包添加卡片" ? 14 : _context4.t0 === "从卡包添加HF卡片" ? 16 : _context4.t0 === "从卡包添加LF卡片" ? 18 : _context4.t0 === "手动添加HF卡片" ? 20 : _context4.t0 === "手动添加LF卡片" ? 22 : 23;
                    break;
                  case 3:
                    _this5.showSlotDetails(e);
                    return _context4.abrupt("break", 23);
                  case 5:
                    _context4.next = 7;
                    return _this5.switchToSlot(e.id);
                  case 7:
                    return _context4.abrupt("break", 23);
                  case 8:
                    _this5.editSlotCard(e.id, "hf");
                    return _context4.abrupt("break", 23);
                  case 10:
                    _this5.editSlotCard(e.id, "lf");
                    return _context4.abrupt("break", 23);
                  case 12:
                    _this5.clearSlotWithConfirm(e.id);
                    return _context4.abrupt("break", 23);
                  case 14:
                    _this5.addCardFromPackage(e.id);
                    return _context4.abrupt("break", 23);
                  case 16:
                    _this5.addCardFromPackage(e.id, "hf");
                    return _context4.abrupt("break", 23);
                  case 18:
                    _this5.addCardFromPackage(e.id, "lf");
                    return _context4.abrupt("break", 23);
                  case 20:
                    _this5.addCard(e.id, "hf");
                    return _context4.abrupt("break", 23);
                  case 22:
                    _this5.addCard(e.id, "lf");
                  case 23:
                  case "end":
                    return _context4.stop();
                }
              }, _callee4);
            }));
            function success(_x) {
              return _success.apply(this, arguments);
            }
            return success;
          }()
        });
      },
      toggleSlotFrequency: function toggleSlotFrequency(e, s, o) {
        var _this6 = this;
        return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee5() {
          var i, _t;
          return _regeneratorRuntime2().wrap(function _callee5$(_context5) {
            while (1) switch (_context5.prev = _context5.next) {
              case 0:
                _context5.prev = 0;
                _context5.next = 3;
                return _this6.enableSlotFrequency({
                  slotId: e,
                  frequency: s,
                  enabled: o
                });
              case 3:
                i = o ? "启用" : "禁用";
                t.index.showToast({
                  title: "\u5DF2".concat(i, "\u5361\u69FD").concat(e + 1, "\u7684").concat(s, "\u9891\u7387"),
                  icon: "success"
                });
                _context5.next = 12;
                break;
              case 7:
                _context5.prev = 7;
                _context5.t0 = _context5["catch"](0);
                console.error("[SlotsPage] \u8BBE\u7F6E".concat(s, "\u9891\u7387\u5931\u8D25:"), _context5.t0);
                _t = o ? "启用" : "禁用";
                _this6.showError("".concat(_t).concat(s, "\u9891\u7387\u5931\u8D25: ").concat(_context5.t0.message));
              case 12:
              case "end":
                return _context5.stop();
            }
          }, _callee5, null, [[0, 7]]);
        }))();
      },
      showSlotDetails: function showSlotDetails(e) {
        var _this7 = this;
        return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee6() {
          var _o, _t2, _t3;
          return _regeneratorRuntime2().wrap(function _callee6$(_context6) {
            while (1) switch (_context6.prev = _context6.next) {
              case 0:
                _context6.prev = 0;
                t.index.showLoading({
                  title: "获取详细信息..."
                });
                _o = "\u5361\u69FD\u7F16\u53F7: ".concat(e.id + 1, "\n");
                if (!(_o += "\u6635\u79F0: ".concat(e.nickname || "\u5361\u69FD ".concat(e.id + 1), "\n"), _o += "\u72B6\u6001: ".concat(e.id === _this7.activeSlot ? "当前活动" : "未激活", "\n\n"), e.hf && e.hf.enabled && "UNKNOWN" !== e.hf.tagType)) {
                  _context6.next = 19;
                  break;
                }
                _o += "HF频率 (13.56MHz):\n", _o += "  \u7C7B\u578B: ".concat(_this7.getTagTypeName(e.hf.tagType), "\n"), e.hf.name && (_o += "  \u540D\u79F0: ".concat(e.hf.name, "\n"));
                _context6.prev = 5;
                console.log("[SlotsPage] \u6B63\u5728\u83B7\u53D6\u5361\u69FD".concat(e.id, "\u7684HF UID..."));
                _context6.next = 9;
                return _this7.$store.dispatch("slots/getHfCardUID", e.id);
              case 9:
                _t2 = _context6.sent;
                _t2 && _t2.uid && (_o += "  UID: ".concat(_t2.uid, "\n"));
                _context6.next = 16;
                break;
              case 13:
                _context6.prev = 13;
                _context6.t0 = _context6["catch"](5);
                console.warn("[SlotsPage] 获取HF UID失败:", _context6.t0.message), _o += "  UID: 获取失败\n";
              case 16:
                _o += "  状态: 已启用\n\n";
                _context6.next = 20;
                break;
              case 19:
                e.hf && (_o += "HF频率: 已禁用\n\n");
              case 20:
                if (!(e.lf && e.lf.enabled && "UNKNOWN" !== e.lf.tagType)) {
                  _context6.next = 36;
                  break;
                }
                _o += "LF频率 (125KHz):\n", _o += "  \u7C7B\u578B: ".concat(_this7.getTagTypeName(e.lf.tagType), "\n"), e.lf.name && (_o += "  \u540D\u79F0: ".concat(e.lf.name, "\n"));
                _context6.prev = 22;
                console.log("[SlotsPage] \u6B63\u5728\u83B7\u53D6\u5361\u69FD".concat(e.id, "\u7684LF UID..."));
                _context6.next = 26;
                return _this7.$store.dispatch("slots/getLfCardUID", e.id);
              case 26:
                _t3 = _context6.sent;
                _t3 && (_o += "  UID: ".concat(_t3, "\n"));
                _context6.next = 33;
                break;
              case 30:
                _context6.prev = 30;
                _context6.t1 = _context6["catch"](22);
                console.warn("[SlotsPage] 获取LF UID失败:", _context6.t1.message), _o += "  UID: 获取失败\n";
              case 33:
                _o += "  状态: 已启用\n";
                _context6.next = 37;
                break;
              case 36:
                e.lf && (_o += "LF频率: 已禁用\n");
              case 37:
                _this7.isSlotUsed(e) || (_o += "此卡槽为空\n"), t.index.hideLoading(), t.index.showModal({
                  title: "\u5361\u69FD ".concat(e.id + 1, " \u8BE6\u60C5"),
                  content: _o,
                  showCancel: !1,
                  confirmText: "确定"
                });
                _context6.next = 43;
                break;
              case 40:
                _context6.prev = 40;
                _context6.t2 = _context6["catch"](0);
                t.index.hideLoading(), console.error("[SlotsPage] 显示卡槽详情失败:", _context6.t2), _this7.showError("获取详情失败: " + _context6.t2.message);
              case 43:
              case "end":
                return _context6.stop();
            }
          }, _callee6, null, [[0, 40], [5, 13], [22, 30]]);
        }))();
      },
      switchToSlot: function switchToSlot(e) {
        var _this8 = this;
        return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee7() {
          return _regeneratorRuntime2().wrap(function _callee7$(_context7) {
            while (1) switch (_context7.prev = _context7.next) {
              case 0:
                _context7.prev = 0;
                _context7.next = 3;
                return _this8.setActiveSlot(e);
              case 3:
                t.index.showToast({
                  title: "\u5DF2\u5207\u6362\u5230\u5361\u69FD ".concat(e + 1),
                  icon: "success"
                });
                _context7.next = 9;
                break;
              case 6:
                _context7.prev = 6;
                _context7.t0 = _context7["catch"](0);
                console.error("[SlotsPage] 切换卡槽失败", _context7.t0), _this8.showError("切换失败: " + _context7.t0.message);
              case 9:
              case "end":
                return _context7.stop();
            }
          }, _callee7, null, [[0, 6]]);
        }))();
      },
      switchToPrevSlot: function switchToPrevSlot() {
        var _this9 = this;
        return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee8() {
          var t;
          return _regeneratorRuntime2().wrap(function _callee8$(_context8) {
            while (1) switch (_context8.prev = _context8.next) {
              case 0:
                if (_this9.isConnected) {
                  _context8.next = 2;
                  break;
                }
                return _context8.abrupt("return", void _this9.showConnectionRequired());
              case 2:
                t = _this9.activeSlot > 0 ? _this9.activeSlot - 1 : 15;
                _context8.next = 5;
                return _this9.switchToSlot(t);
              case 5:
              case "end":
                return _context8.stop();
            }
          }, _callee8);
        }))();
      },
      switchToNextSlot: function switchToNextSlot() {
        var _this10 = this;
        return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee9() {
          var t;
          return _regeneratorRuntime2().wrap(function _callee9$(_context9) {
            while (1) switch (_context9.prev = _context9.next) {
              case 0:
                if (_this10.isConnected) {
                  _context9.next = 2;
                  break;
                }
                return _context9.abrupt("return", void _this10.showConnectionRequired());
              case 2:
                t = _this10.activeSlot < 15 ? _this10.activeSlot + 1 : 0;
                _context9.next = 5;
                return _this10.switchToSlot(t);
              case 5:
              case "end":
                return _context9.stop();
            }
          }, _callee9);
        }))();
      },
      showGlobalSettings: function showGlobalSettings() {
        this.showGlobalSettingsPopup = !0;
      },
      closeGlobalSettings: function closeGlobalSettings() {
        this.showGlobalSettingsPopup = !1;
      },
      updateGlobalSetting: function updateGlobalSetting(t, e) {
        var s = _objectSpread2(_objectSpread2({}, this.slotSettings), {}, _defineProperty2({}, t, e));
        this.$store.commit("slots/SET_SLOT_SETTINGS", s), this.saveSlotSettings();
      },
      copyCardNumber: function copyCardNumber(e) {
        t.index.setClipboardData({
          data: e,
          success: function success() {
            t.index.showToast({
              title: "卡号已复制",
              icon: "success"
            });
          },
          fail: function fail() {
            t.index.showToast({
              title: "复制失败",
              icon: "error"
            });
          }
        });
      },
      clearSlotWithConfirm: function clearSlotWithConfirm(e) {
        var _this11 = this;
        return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee11() {
          var s;
          return _regeneratorRuntime2().wrap(function _callee11$(_context11) {
            while (1) switch (_context11.prev = _context11.next) {
              case 0:
                s = _this11.slots[e];
                s && _this11.isSlotUsed(s) ? t.index.showModal({
                  title: "确认清空",
                  content: "\u786E\u5B9A\u8981\u6E05\u7A7A\u5361\u69FD ".concat(e + 1, " (").concat(s.nickname || "\u5361\u69FD ".concat(e + 1), ") \u5417\uFF1F\u6B64\u64CD\u4F5C\u4E0D\u53EF\u6062\u590D\u3002"),
                  confirmText: "清空",
                  confirmColor: "#ff4444",
                  success: function () {
                    var _success2 = _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee10(s) {
                      return _regeneratorRuntime2().wrap(function _callee10$(_context10) {
                        while (1) switch (_context10.prev = _context10.next) {
                          case 0:
                            if (!s.confirm) {
                              _context10.next = 10;
                              break;
                            }
                            _context10.prev = 1;
                            _context10.next = 4;
                            return _this11.clearSlot(e);
                          case 4:
                            t.index.showToast({
                              title: "卡槽已清空",
                              icon: "success"
                            });
                            _context10.next = 10;
                            break;
                          case 7:
                            _context10.prev = 7;
                            _context10.t0 = _context10["catch"](1);
                            console.error("[SlotsPage] 清空卡槽失败", _context10.t0), _this11.showError("清空失败: " + _context10.t0.message);
                          case 10:
                          case "end":
                            return _context10.stop();
                        }
                      }, _callee10, null, [[1, 7]]);
                    }));
                    function success(_x2) {
                      return _success2.apply(this, arguments);
                    }
                    return success;
                  }()
                }) : t.index.showToast({
                  title: "卡槽已为空",
                  icon: "none"
                });
              case 2:
              case "end":
                return _context11.stop();
            }
          }, _callee11);
        }))();
      },
      addCard: function addCard(e) {
        var s = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : "hf";
        t.index.navigateTo({
          url: "/pages/slot-edit/slot-edit?slotId=".concat(e, "&frequency=").concat(s, "&isNew=true")
        });
      },
      addCardFromPackage: function addCardFromPackage(e) {
        var s = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;
        var o = "/pages/card-select/card-select?slotId=".concat(e, "&mode=deploy");
        s && (o += "&frequency=".concat(s)), t.index.navigateTo({
          url: o
        });
      },
      editSlotCard: function editSlotCard(e) {
        var s = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : "hf";
        var o = this.slots[e];
        if (!o) return void this.showError("找不到指定的卡槽");
        "hf" === s && o.hf && "UNKNOWN" !== o.hf.tagType || "lf" === s && o.lf && "UNKNOWN" !== o.lf.tagType ? t.index.navigateTo({
          url: "/pages/slot-edit/slot-edit?slotId=".concat(e, "&frequency=").concat(s)
        }) : this.showError("\u8BE5\u5361\u69FD\u6CA1\u6709".concat(s.toUpperCase(), "\u5361\u7247"));
      },
      isSlotUsed: function isSlotUsed(t) {
        if (!t) return !1;
        var e = t.hf && t.hf.tagType && "UNKNOWN" !== t.hf.tagType,
          s = t.lf && t.lf.tagType && "UNKNOWN" !== t.lf.tagType;
        return e || s;
      },
      getTagTypeName: function getTagTypeName(t) {
        return e.ChameleonProtocol.getTagTypeName(t);
      },
      formatCardNumber: function formatCardNumber(t) {
        return t ? t.length > 12 ? t.substring(0, 4) + "..." + t.substring(t.length - 4) : t : "";
      },
      showConnectionRequired: function showConnectionRequired() {
        t.index.showModal({
          title: "需要连接设备",
          content: "此功能需要先连接 Chameleon 设备，是否立即连接？",
          confirmText: "去连接",
          success: function success(e) {
            e.confirm && t.index.navigateTo({
              url: "/pages/connect/connect"
            });
          }
        });
      },
      showError: function showError(e) {
        t.index.showModal({
          title: "错误",
          content: e,
          showCancel: !1
        });
      },
      editSlot: function editSlot(e, s) {
        if (!this.isConnected) return void this.showConnectionRequired();
        var o = this.slots[e];
        if (!o) return void this.showError("找不到指定的卡槽");
        console.log("[SlotsPage] 编辑卡槽:", {
          slotId: e,
          frequency: s,
          slotDisplayNumber: e + 1,
          slot: o
        });
        if (!("hf" === s && o.hf && "UNKNOWN" !== o.hf.tagType || "lf" === s && o.lf && "UNKNOWN" !== o.lf.tagType)) return void this.addNewCard(e, s);
        var i = "/pages/slot-edit/slot-edit?slotId=".concat(e, "&frequency=").concat(s, "&isNew=false");
        console.log("[SlotsPage] 跳转到编辑页面，URL:", i), t.index.navigateTo({
          url: i
        });
      },
      addNewCard: function addNewCard(e) {
        var s = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;
        this.isConnected ? s ? t.index.navigateTo({
          url: "/pages/slot-edit/slot-edit?slotId=".concat(e, "&frequency=").concat(s, "&isNew=true")
        }) : t.index.showActionSheet({
          itemList: ["添加HF卡片 (13.56MHz)", "添加LF卡片 (125KHz)"],
          success: function success(s) {
            var o = 0 === s.tapIndex ? "hf" : "lf";
            t.index.navigateTo({
              url: "/pages/slot-edit/slot-edit?slotId=".concat(e, "&frequency=").concat(o, "&isNew=true")
            });
          }
        }) : this.showConnectionRequired();
      }
    })
  };
if (!Array) {
  (t.resolveComponent("uni-icons") + t.resolveComponent("uni-load-more"))();
}
Math || (function () {
  return "../../node-modules/@dcloudio/uni-ui/lib/uni-icons/uni-icons.js";
} + function () {
  return "../../node-modules/@dcloudio/uni-ui/lib/uni-load-more/uni-load-more.js";
})();
var o = t._export_sfc(s, [["render", function (e, s, o, i, a, l) {
  return t.e({
    a: e.activeSlotData
  }, e.activeSlotData ? t.e({
    b: t.p({
      type: "checkmarkempty",
      size: "16",
      color: "#4CAF50"
    }),
    c: t.t(e.activeSlot + 1),
    d: t.t(e.activeSlotData.nickname || "\u5361\u69FD ".concat(e.activeSlot + 1)),
    e: e.activeSlotData.displayInfo.hfCard
  }, e.activeSlotData.displayInfo.hfCard ? {
    f: t.p({
      type: "card",
      size: "16",
      color: "#2196F3"
    }),
    g: t.t(l.getTagTypeName(e.activeSlotData.displayInfo.hfCard.type))
  } : {}, {
    h: e.activeSlotData.displayInfo.lfCard
  }, e.activeSlotData.displayInfo.lfCard ? {
    i: t.p({
      type: "wifi",
      size: "16",
      color: "#FF9800"
    }),
    j: t.t(l.getTagTypeName(e.activeSlotData.displayInfo.lfCard.type))
  } : {}) : {}, {
    k: t.p({
      type: "left",
      size: "30"
    }),
    l: t.o(function () {
      return l.switchToPrevSlot && l.switchToPrevSlot.apply(l, arguments);
    }),
    m: !e.isConnected,
    n: t.p({
      type: "right",
      size: "30"
    }),
    o: t.o(function () {
      return l.switchToNextSlot && l.switchToNextSlot.apply(l, arguments);
    }),
    p: !e.isConnected,
    q: e.isLoading ? 1 : "",
    r: t.p({
      type: "refresh",
      size: "30"
    }),
    s: t.o(function () {
      return l.refreshSlots && l.refreshSlots.apply(l, arguments);
    }),
    t: e.isLoading,
    v: t.t(l.statistics.usedSlots),
    w: t.t(l.statistics.emptySlots),
    x: e.isLoading
  }, e.isLoading ? {
    y: t.p({
      status: "loading",
      "content-text": "加载中..."
    })
  } : {
    z: t.f(e.validSlots, function (s, o, i) {
      return t.e({
        a: t.t(s.id + 1),
        b: t.t(s.nickname || "\u5361\u69FD ".concat(s.id + 1)),
        c: s.id === e.activeSlot
      }, s.id === e.activeSlot ? {
        d: "66e607d7-7-" + i,
        e: t.p({
          type: "checkmarkempty",
          size: "14",
          color: "#4CAF50"
        })
      } : (l.isSlotUsed(s), {}), {
        f: l.isSlotUsed(s),
        g: "66e607d7-8-" + i,
        h: t.o(function (t) {
          return l.showSlotSettings(s);
        }, s.id),
        i: s.hf && s.hf.tagType && "UNKNOWN" !== s.hf.tagType
      }, s.hf && s.hf.tagType && "UNKNOWN" !== s.hf.tagType ? {
        j: "66e607d7-9-" + i,
        k: t.p({
          type: "card",
          size: "16",
          color: "#2196F3"
        }),
        l: t.t(s.hf.enabled ? "启用" : "禁用"),
        m: s.hf.enabled ? 1 : "",
        n: s.hf.enabled ? "" : 1,
        o: s.hf.enabled,
        p: t.o(function (t) {
          return l.toggleSlotFrequency(s.id, "HF", t.detail.value);
        }, s.id),
        q: t.o(function () {}, s.id),
        r: t.t(s.hf.name || l.getTagTypeName(s.hf.tagType)),
        s: "66e607d7-10-" + i,
        t: t.p({
          type: "compose",
          size: "14",
          color: "#999"
        }),
        v: t.o(function (t) {
          return l.editSlot(s.id, "hf");
        }, s.id)
      } : {}, {
        w: s.lf && s.lf.tagType && "UNKNOWN" !== s.lf.tagType
      }, s.lf && s.lf.tagType && "UNKNOWN" !== s.lf.tagType ? {
        x: "66e607d7-11-" + i,
        y: t.p({
          type: "wifi",
          size: "16",
          color: "#FF9800"
        }),
        z: t.t(s.lf.enabled ? "启用" : "禁用"),
        A: s.lf.enabled ? 1 : "",
        B: s.lf.enabled ? "" : 1,
        C: s.lf.enabled,
        D: t.o(function (t) {
          return l.toggleSlotFrequency(s.id, "LF", t.detail.value);
        }, s.id),
        E: t.o(function () {}, s.id),
        F: t.t(s.lf.name || l.getTagTypeName(s.lf.tagType)),
        G: "66e607d7-12-" + i,
        H: t.p({
          type: "compose",
          size: "14",
          color: "#999"
        }),
        I: t.o(function (t) {
          return l.editSlot(s.id, "lf");
        }, s.id)
      } : {}, {
        J: !l.isSlotUsed(s)
      }, l.isSlotUsed(s) ? {} : {
        K: "66e607d7-13-" + i,
        L: t.p({
          type: "plus",
          size: "18",
          color: "#999"
        }),
        M: t.o(function (t) {
          return l.addNewCard(s.id);
        }, s.id)
      }, {
        N: s.id,
        O: s.id === e.activeSlot ? 1 : "",
        P: l.isSlotUsed(s) ? 1 : "",
        Q: s.enabled ? "" : 1,
        R: t.o(function (t) {
          return l.handleSlotClick(s);
        }, s.id)
      });
    }),
    A: t.p({
      type: "gear",
      size: "32",
      color: "#666"
    })
  }, {
    B: a.showGlobalSettingsPopup
  }, a.showGlobalSettingsPopup ? {
    C: t.p({
      type: "close",
      size: "18",
      color: "#666"
    }),
    D: t.o(function () {
      return l.closeGlobalSettings && l.closeGlobalSettings.apply(l, arguments);
    }),
    E: e.slotSettings.showEmptySlots,
    F: t.o(function (t) {
      return l.updateGlobalSetting("showEmptySlots", t.detail.value);
    }),
    G: e.slotSettings.quickSwitch,
    H: t.o(function (t) {
      return l.updateGlobalSetting("quickSwitch", t.detail.value);
    }),
    I: t.o(function () {}),
    J: t.o(function () {
      return l.closeGlobalSettings && l.closeGlobalSettings.apply(l, arguments);
    })
  } : {});
}], ["__scopeId", "data-v-66e607d7"]]);
wx.createPage(o); 
 			}); 	require("pages/slots/slots.js");
 		__wxRoute = 'pages/slot-edit/slot-edit';__wxRouteBegin = true; 	__wxAppCurrentFile__ = 'pages/slot-edit/slot-edit.js';	define("pages/slot-edit/slot-edit.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";

var _toConsumableArray2 = require("../../@babel/runtime/helpers/toConsumableArray");
var _typeof2 = require("../../@babel/runtime/helpers/typeof");
require("../../@babel/runtime/helpers/Arrayincludes");
var _regeneratorRuntime2 = require("../../@babel/runtime/helpers/regeneratorRuntime");
var _asyncToGenerator2 = require("../../@babel/runtime/helpers/asyncToGenerator");
var _objectSpread2 = require("../../@babel/runtime/helpers/objectSpread2");
var t = require("../../common/vendor.js"),
  a = require("../../utils/chameleon-protocol.js"),
  e = require("../../services/bluetooth.js"),
  s = {
    name: "SlotEditPage",
    data: function data() {
      return {
        slotId: 0,
        frequency: "hf",
        isNew: !1,
        cardData: {
          name: "",
          uid: "",
          sak: "",
          atqa: "",
          ats: "",
          tagType: a.TagType.UNKNOWN
        },
        emulatorSettings: {
          gen1aEnabled: !1,
          gen2Enabled: !1,
          antiCollEnabled: !1,
          detectionEnabled: !1,
          writeMode: "normal"
        },
        isLoading: !1,
        loadingText: "处理中...",
        showSuccessToast: !1,
        successMessage: "",
        selectedTypeIndex: 0,
        writeModeIndex: 0,
        availableTypes: [{
          value: a.TagType.MIFARE_1024,
          name: "MIFARE Classic 1K"
        }, {
          value: a.TagType.MIFARE_2048,
          name: "MIFARE Classic 2K"
        }, {
          value: a.TagType.MIFARE_4096,
          name: "MIFARE Classic 4K"
        }, {
          value: a.TagType.MIFARE_Mini,
          name: "MIFARE Mini"
        }, {
          value: a.TagType.NTAG_213,
          name: "NTAG213"
        }, {
          value: a.TagType.NTAG_215,
          name: "NTAG215"
        }, {
          value: a.TagType.NTAG_216,
          name: "NTAG216"
        }, {
          value: a.TagType.MIFARE_Ultralight,
          name: "MIFARE Ultralight"
        }, {
          value: a.TagType.MIFARE_Ultralight_C,
          name: "MIFARE Ultralight C"
        }, {
          value: a.TagType.UNKNOWN,
          name: "未知类型"
        }],
        writeModes: [{
          value: "normal",
          name: "正常"
        }, {
          value: "denied",
          name: "拒绝"
        }, {
          value: "deceive",
          name: "欺骗"
        }, {
          value: "shadow",
          name: "影子"
        }],
        formErrors: {},
        cardSearchQuery: "",
        showCardPackage: !1,
        currentCardFilter: "all",
        selectedCardDetail: null,
        cardFilters: [{
          id: "all",
          name: "全部",
          icon: "list",
          count: 0
        }, {
          id: "hf",
          name: "HF",
          icon: "creditcard",
          count: 0
        }, {
          id: "lf",
          name: "LF",
          icon: "wifi",
          count: 0
        }, {
          id: "mifare",
          name: "Mifare",
          icon: "tag",
          count: 0
        }, {
          id: "em410x",
          name: "EM410X",
          icon: "key",
          count: 0
        }]
      };
    },
    computed: _objectSpread2(_objectSpread2(_objectSpread2(_objectSpread2(_objectSpread2({}, t.mapState("slots", ["slots"])), t.mapState("cards", ["cards"])), t.mapGetters("device", ["isConnected"])), t.mapGetters("cards", ["filteredCards"])), {}, {
      pageTitle: function pageTitle() {
        return this.isNew ? "添加卡片" : "编辑卡片";
      },
      canSave: function canSave() {
        return this.cardData.name.trim().length > 0 && 0 === Object.keys(this.formErrors).length && !this.isLoading;
      },
      selectedTypeName: function selectedTypeName() {
        var t = this.availableTypes[this.selectedTypeIndex];
        return t ? t.name : "未知类型";
      },
      selectedWriteMode: function selectedWriteMode() {
        return this.writeModes[this.writeModeIndex] || this.writeModes[0];
      },
      isHFCard: function isHFCard() {
        var t = this.availableTypes[this.selectedTypeIndex];
        return t && a.ChameleonProtocol.isHighFrequency(t.value);
      },
      isMifareClassic: function isMifareClassic() {
        var t = this.availableTypes[this.selectedTypeIndex];
        return !!t && [a.TagType.MIFARE_1024, a.TagType.MIFARE_2048, a.TagType.MIFARE_4096, a.TagType.MIFARE_Mini].includes(t.value);
      },
      isNTAG: function isNTAG() {
        var t = this.availableTypes[this.selectedTypeIndex];
        return !!t && [a.TagType.NTAG_213, a.TagType.NTAG_215, a.TagType.NTAG_216].includes(t.value);
      },
      isMifareUltralight: function isMifareUltralight() {
        var t = this.availableTypes[this.selectedTypeIndex];
        return !!t && [a.TagType.MIFARE_Ultralight, a.TagType.MIFARE_Ultralight_C].includes(t.value);
      },
      filteredPackageCards: function filteredPackageCards() {
        var t = this.cards || [];
        if ("all" === this.currentCardFilter) t = "hf" === this.frequency ? t.filter(function (t) {
          return 2 === t.getFrequency();
        }) : t.filter(function (t) {
          return 1 === t.getFrequency();
        });else switch (this.currentCardFilter) {
          case "hf":
            t = t.filter(function (t) {
              return 2 === t.getFrequency();
            });
            break;
          case "lf":
            t = t.filter(function (t) {
              return 1 === t.getFrequency();
            });
            break;
          case "mifare":
            t = t.filter(function (t) {
              return t.isMifareClassic() || t.isMifareUltralight();
            });
            break;
          case "em410x":
            t = t.filter(function (t) {
              return t.tag === a.TagType.EM410X;
            });
        }
        if (this.cardSearchQuery.trim()) {
          var _a = this.cardSearchQuery.toLowerCase();
          t = t.filter(function (t) {
            return t.name.toLowerCase().includes(_a) || t.uid.toLowerCase().includes(_a) || t.getTypeString().toLowerCase().includes(_a);
          });
        }
        return this.updateFilterCounts(), t;
      }
    }),
    onLoad: function onLoad(t) {
      this.initPage(t);
    },
    methods: _objectSpread2(_objectSpread2(_objectSpread2({}, t.mapActions("slots", ["loadSlot", "getMifareEmulatorSettings", "setMifareEmulatorSettings"])), t.mapActions("cards", ["loadCardsFromStorage"])), {}, {
      initPage: function initPage(a) {
        var _this = this;
        return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee() {
          var _s, _i;
          return _regeneratorRuntime2().wrap(function _callee$(_context) {
            while (1) switch (_context.prev = _context.next) {
              case 0:
                _context.prev = 0;
                _this.slotId = parseInt(a.slotId || 0), _this.frequency = a.frequency || "hf", _this.isNew = "true" === a.isNew;
                _s = "true" === a.fromPackage, _i = a.cardData;
                console.log("[SlotEdit] 初始化页面参数:", {
                  slotId: _this.slotId,
                  slotDisplayNumber: _this.slotId + 1,
                  frequency: _this.frequency,
                  isNew: _this.isNew,
                  fromPackage: _s,
                  originalSlotId: a.slotId
                });
                t.index.setNavigationBarTitle({
                  title: _this.pageTitle
                });
                t.index.setNavigationBarColor({
                  frontColor: "#000000",
                  backgroundColor: "#ffffff"
                });
                if (!_this.isNew) {
                  _context.next = 15;
                  break;
                }
                if (!(_s && _i)) {
                  _context.next = 12;
                  break;
                }
                _context.next = 10;
                return _this.loadCardFromPackage(_i);
              case 10:
                _context.next = 13;
                break;
              case 12:
                _this.setDefaultValues();
              case 13:
                _context.next = 17;
                break;
              case 15:
                _context.next = 17;
                return _this.loadExistingCard();
              case 17:
                _context.t0 = _this.isMifareClassic;
                if (!_context.t0) {
                  _context.next = 21;
                  break;
                }
                _context.next = 21;
                return _this.loadEmulatorSettings();
              case 21:
                _this.validateForm();
                _context.prev = 22;
                _context.next = 25;
                return _this.loadCardsFromStorage();
              case 25:
                _context.next = 30;
                break;
              case 27:
                _context.prev = 27;
                _context.t1 = _context["catch"](22);
                console.warn("[SlotEdit] 预加载卡包数据失败:", _context.t1);
              case 30:
                _context.next = 35;
                break;
              case 32:
                _context.prev = 32;
                _context.t2 = _context["catch"](0);
                console.error("[SlotEdit] 初始化失败:", _context.t2), _this.showError("初始化失败: " + _context.t2.message);
              case 35:
              case "end":
                return _context.stop();
            }
          }, _callee, null, [[0, 32], [22, 27]]);
        }))();
      },
      loadExistingCard: function loadExistingCard() {
        var _this2 = this;
        return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee2() {
          var _t, _e, _s2;
          return _regeneratorRuntime2().wrap(function _callee2$(_context2) {
            while (1) switch (_context2.prev = _context2.next) {
              case 0:
                if (!_this2.isConnected) {
                  _context2.next = 27;
                  break;
                }
                _context2.prev = 1;
                _this2.isLoading = !0, _this2.loadingText = "加载卡片数据...";
                _t = _this2.slots[_this2.slotId];
                if (_t) {
                  _context2.next = 6;
                  break;
                }
                throw new Error("找不到指定的卡槽");
              case 6:
                _e = "hf" === _this2.frequency ? _t.hf : _t.lf;
                if (!(!_e || _e.tagType === a.TagType.UNKNOWN)) {
                  _context2.next = 9;
                  break;
                }
                throw new Error("\u8BE5\u5361\u69FD\u6CA1\u6709".concat(_this2.frequency.toUpperCase(), "\u5361\u7247"));
              case 9:
                _this2.cardData.name = _e.name || "\u5361\u69FD ".concat(_this2.slotId + 1), _this2.cardData.tagType = _e.tagType;
                _s2 = _this2.availableTypes.findIndex(function (t) {
                  return t.value === _e.tagType;
                });
                _this2.selectedTypeIndex = _s2 >= 0 ? _s2 : 0;
                _context2.t0 = "hf" === _this2.frequency && _this2.isHFCard;
                if (!_context2.t0) {
                  _context2.next = 17;
                  break;
                }
                _this2.loadingText = "读取卡片详情...";
                _context2.next = 17;
                return _this2.loadHFCardDetails();
              case 17:
                _context2.next = 22;
                break;
              case 19:
                _context2.prev = 19;
                _context2.t1 = _context2["catch"](1);
                console.error("[SlotEdit] 加载卡片数据失败:", _context2.t1), _this2.showError("加载卡片数据失败: " + _context2.t1.message);
              case 22:
                _context2.prev = 22;
                _this2.isLoading = !1, _this2.loadingText = "处理中...";
                return _context2.finish(22);
              case 25:
                _context2.next = 28;
                break;
              case 27:
                _this2.showConnectionRequired();
              case 28:
              case "end":
                return _context2.stop();
            }
          }, _callee2, null, [[1, 19, 22, 25]]);
        }))();
      },
      loadHFCardDetails: function loadHFCardDetails() {
        var _this3 = this;
        return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee3() {
          var _t2, _a2, _a3;
          return _regeneratorRuntime2().wrap(function _callee3$(_context3) {
            while (1) switch (_context3.prev = _context3.next) {
              case 0:
                _context3.prev = 0;
                _context3.next = 3;
                return e.bluetoothService.setActiveSlot(_this3.slotId);
              case 3:
                _context3.next = 5;
                return _this3.$store.dispatch("slots/getHfCardUID", _this3.slotId);
              case 5:
                _t2 = _context3.sent;
                if (_t2) {
                  _this3.cardData.uid = _this3.formatHexData(_t2.uid);
                  _a2 = _t2.uid ? _t2.uid.replace(/\s/g, "").length / 2 : 4;
                  if (void 0 !== _t2.sak) {
                    _a3 = "number" == typeof _t2.sak ? _t2.sak : parseInt(_t2.sak, 16);
                    _this3.cardData.sak = _a3.toString(16).padStart(2, "0").toUpperCase();
                  } else _this3.cardData.sak = _this3.getDefaultSAK(_this3.cardData.tagType, _a2);
                  _t2.atqa ? _this3.cardData.atqa = _this3.formatHexData(_t2.atqa) : _this3.cardData.atqa = _this3.getDefaultATQA(_this3.cardData.tagType, _a2), _this3.cardData.ats = _this3.formatHexData(_t2.ats);
                }
                _context3.next = 12;
                break;
              case 9:
                _context3.prev = 9;
                _context3.t0 = _context3["catch"](0);
                console.warn("[SlotEdit] 获取HF卡片详情失败:", _context3.t0.message);
              case 12:
              case "end":
                return _context3.stop();
            }
          }, _callee3, null, [[0, 9]]);
        }))();
      },
      setDefaultValues: function setDefaultValues() {
        this.cardData = {
          name: "\u5361\u69FD ".concat(this.slotId + 1),
          uid: "",
          sak: "",
          atqa: "",
          ats: "",
          tagType: a.TagType.MIFARE_1024
        };
        var t = this.availableTypes.findIndex(function (t) {
          return t.value === a.TagType.MIFARE_1024;
        });
        this.selectedTypeIndex = t >= 0 ? t : 0;
      },
      loadCardFromPackage: function loadCardFromPackage(e) {
        var _this4 = this;
        return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee4() {
          var _s3, _t3, _t4, _t5;
          return _regeneratorRuntime2().wrap(function _callee4$(_context4) {
            while (1) switch (_context4.prev = _context4.next) {
              case 0:
                try {
                  _s3 = JSON.parse(decodeURIComponent(e));
                  if (console.log("[SlotEdit] 从卡包加载卡片:", _s3.name), _this4.cardData.name = _s3.name || "\u5361\u69FD ".concat(_this4.slotId + 1), _s3.uid) {
                    _t3 = _s3.uid.replace(/\s/g, "");
                    _this4.cardData.uid = _this4.formatHexData(_t3);
                  } else _this4.cardData.uid = "";
                  if (_s3.tag) {
                    _t4 = _this4.availableTypes.findIndex(function (t) {
                      return t.value === _s3.tag;
                    });
                    -1 !== _t4 && (_this4.selectedTypeIndex = _t4, _this4.cardData.tagType = _s3.tag, a.ChameleonProtocol.isHighFrequency(_s3.tag) ? _this4.frequency = "hf" : _this4.frequency = "lf");
                  }
                  if (_this4.isHFCard) {
                    _t5 = _s3.uid ? _s3.uid.replace(/\s/g, "").length / 2 : 4;
                    void 0 !== _s3.sak && null !== _s3.sak ? _this4.cardData.sak = "number" == typeof _s3.sak ? _s3.sak.toString(16).padStart(2, "0").toUpperCase() : _s3.sak.toString() : _this4.cardData.sak = _this4.getDefaultSAK(_s3.tag, _t5), _s3.atqa && _s3.atqa.length > 0 ? _this4.cardData.atqa = Array.isArray(_s3.atqa) ? Array.from(_s3.atqa).map(function (t) {
                      return t.toString(16).padStart(2, "0");
                    }).join(" ").toUpperCase() : _s3.atqa : _this4.cardData.atqa = _this4.getDefaultATQA(_s3.tag, _t5), _s3.ats && _s3.ats.length > 0 ? _this4.cardData.ats = Array.isArray(_s3.ats) ? Array.from(_s3.ats).map(function (t) {
                      return t.toString(16).padStart(2, "0");
                    }).join(" ").toUpperCase() : _s3.ats : _this4.cardData.ats = "";
                  }
                  _s3.data && _s3.data.length > 0 && (_this4.cardData.data = _s3.data.map(function (t) {
                    return Array.isArray(t) ? Array.from(t) : t;
                  })), t.index.showToast({
                    title: "卡片数据已加载",
                    icon: "success"
                  });
                } catch (s) {
                  console.error("[SlotEdit] 加载卡包数据失败:", s), t.index.showToast({
                    title: "加载卡片数据失败",
                    icon: "error"
                  }), _this4.setDefaultValues();
                }
              case 1:
              case "end":
                return _context4.stop();
            }
          }, _callee4);
        }))();
      },
      loadEmulatorSettings: function loadEmulatorSettings() {
        var _this5 = this;
        return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee5() {
          var _t6, _a4;
          return _regeneratorRuntime2().wrap(function _callee5$(_context5) {
            while (1) switch (_context5.prev = _context5.next) {
              case 0:
                _context5.prev = 0;
                _context5.next = 3;
                return e.bluetoothService.getMifareEmulatorSettings();
              case 3:
                _t6 = _context5.sent;
                _this5.emulatorSettings = {
                  gen1aEnabled: _t6.gen1aEnabled || !1,
                  gen2Enabled: _t6.gen2Enabled || !1,
                  antiCollEnabled: _t6.antiCollEnabled || !1,
                  detectionEnabled: _t6.detectionEnabled || !1,
                  writeMode: _t6.writeMode || "normal"
                };
                _a4 = _this5.writeModes.findIndex(function (t) {
                  return t.value === _this5.emulatorSettings.writeMode;
                });
                _this5.writeModeIndex = _a4 >= 0 ? _a4 : 0, console.log("[SlotEdit] 加载模拟器设置成功:", _this5.emulatorSettings);
                _context5.next = 12;
                break;
              case 9:
                _context5.prev = 9;
                _context5.t0 = _context5["catch"](0);
                console.warn("[SlotEdit] 加载模拟器设置失败:", _context5.t0.message), _this5.emulatorSettings = {
                  gen1aEnabled: !1,
                  gen2Enabled: !1,
                  antiCollEnabled: !1,
                  detectionEnabled: !1,
                  writeMode: "normal"
                }, _this5.writeModeIndex = 0;
              case 12:
              case "end":
                return _context5.stop();
            }
          }, _callee5, null, [[0, 9]]);
        }))();
      },
      formatHexData: function formatHexData(t) {
        var a = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : !1;
        if (!t) return "";
        var e = t.toString().replace(/[^0-9A-Fa-f]/g, "");
        return a ? e.toUpperCase() : e.replace(/(.{2})/g, "$1 ").trim().toUpperCase();
      },
      formatHexInput: function formatHexInput(t, a) {
        var _this6 = this;
        var e = a.detail.value.replace(/[^0-9A-Fa-f\s]/g, "");
        if ("sak" === t) {
          var _a5 = e.replace(/\s/g, "").substring(0, 2).toUpperCase();
          this.cardData[t] = _a5;
        } else {
          e = e.replace(/\s+/g, " ");
          var _a6 = e.replace(/\s/g, "").replace(/(.{2})/g, "$1 ").trim().toUpperCase();
          this.cardData[t] = _a6;
        }
        this.$nextTick(function () {
          _this6.validateField(t);
        });
      },
      handlePaste: function handlePaste(t, a) {
        var _this7 = this;
        var e;
        var s = (null == (e = a.clipboardData) ? void 0 : e.getData("text")) || "",
          i = this.formatHexData(s);
        this.cardData[t] = i, a.preventDefault(), this.$nextTick(function () {
          _this7.validateField(t);
        });
      },
      copyHexData: function copyHexData(a) {
        var e = this.cardData[a];
        if (!e) return;
        var s = e.replace(/\s/g, "");
        t.index.setClipboardData({
          data: s,
          success: function success() {
            t.index.showToast({
              title: "已复制",
              icon: "success",
              duration: 1e3
            });
          }
        });
      },
      validateForm: function validateForm() {
        if (this.formErrors = {}, this.cardData.name.trim()) {
          var _t7 = this.getUTF8ByteLength(this.cardData.name);
          _t7 > 32 && (this.formErrors.name = "\u540D\u79F0\u8FC7\u957F\uFF0C\u6700\u591A\u652F\u630132\u5B57\u8282 (\u5F53\u524D: ".concat(_t7, "\u5B57\u8282)"));
        } else this.formErrors.name = "请输入卡片名称";
        this.isHFCard && (this.validateUID(), this.validateSAK(), this.validateATQA(), this.validateATS());
      },
      getUTF8ByteLength: function getUTF8ByteLength(t) {
        var a = 0;
        for (var _e2 = 0; _e2 < t.length; _e2++) {
          var _s4 = t.charCodeAt(_e2);
          a += _s4 < 128 ? 1 : _s4 < 2048 ? 2 : 3;
        }
        return a;
      },
      validateField: function validateField(t) {
        switch (t) {
          case "uid":
            this.validateUID();
            break;
          case "sak":
            this.validateSAK();
            break;
          case "atqa":
            this.validateATQA();
            break;
          case "ats":
            this.validateATS();
        }
      },
      getDefaultATQA: function getDefaultATQA(t) {
        var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;
        if (null !== e) {
          if (7 === e) return "00 44";
          if (4 === e) return "00 04";
        }
        switch (t) {
          case a.TagType.MIFARE_1024:
          case a.TagType.MIFARE_2048:
          case a.TagType.MIFARE_4096:
            return "00 04";
          case a.TagType.MIFARE_Ultralight:
          case a.TagType.NTAG_213:
          case a.TagType.NTAG_215:
          case a.TagType.NTAG_216:
            return "00 44";
          default:
            return "00 04";
        }
      },
      getDefaultSAK: function getDefaultSAK(t) {
        var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;
        if (null !== e) {
          if (7 === e) return "08";
          if (4 === e) switch (t) {
            case a.TagType.MIFARE_1024:
              return "08";
            case a.TagType.MIFARE_2048:
              return "18";
            case a.TagType.MIFARE_4096:
              return "38";
            default:
              return "08";
          }
        }
        switch (t) {
          case a.TagType.MIFARE_1024:
            return "08";
          case a.TagType.MIFARE_2048:
            return "18";
          case a.TagType.MIFARE_4096:
            return "38";
          case a.TagType.MIFARE_Ultralight:
          case a.TagType.NTAG_213:
          case a.TagType.NTAG_215:
          case a.TagType.NTAG_216:
            return "00";
          default:
            return "08";
        }
      },
      validateUID: function validateUID() {
        var t = this.cardData.uid.replace(/\s/g, "");
        if (!t) return void (this.formErrors.uid = "请输入UID");
        if (!/^[0-9A-Fa-f]+$/.test(t)) return void (this.formErrors.uid = "UID必须为十六进制格式");
        [8, 14, 20].includes(t.length) ? delete this.formErrors.uid : this.formErrors.uid = "UID长度必须为4、7或10字节 (当前: " + t.length / 2 + "字节)";
      },
      validateSAK: function validateSAK() {
        var t = this.cardData.sak.replace(/\s/g, "");
        t ? /^[0-9A-Fa-f]{2}$/.test(t) ? delete this.formErrors.sak : this.formErrors.sak = "SAK必须为1字节十六进制" : this.formErrors.sak = "请输入SAK";
      },
      validateATQA: function validateATQA() {
        var t = this.cardData.atqa.replace(/\s/g, "");
        t ? /^[0-9A-Fa-f]{4}$/.test(t) ? delete this.formErrors.atqa : this.formErrors.atqa = "ATQA必须为2字节十六进制" : this.formErrors.atqa = "请输入ATQA";
      },
      validateATS: function validateATS() {
        var t = this.cardData.ats.replace(/\s/g, "");
        t ? /^[0-9A-Fa-f]*$/.test(t) ? t.length % 2 == 0 ? delete this.formErrors.ats : this.formErrors.ats = "ATS长度必须为偶数" : this.formErrors.ats = "ATS必须为十六进制格式" : delete this.formErrors.ats;
      },
      onTypeChange: function onTypeChange(t) {
        this.selectedTypeIndex = t.detail.value;
        var a = this.availableTypes[this.selectedTypeIndex];
        this.cardData.tagType = a.value, this.validateForm(), this.isMifareClassic && this.loadEmulatorSettings();
      },
      onGen1AChange: function onGen1AChange(t) {
        var _this8 = this;
        return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee6() {
          return _regeneratorRuntime2().wrap(function _callee6$(_context6) {
            while (1) switch (_context6.prev = _context6.next) {
              case 0:
                _this8.emulatorSettings.gen1aEnabled = t.detail.value;
                _context6.next = 3;
                return _this8.updateEmulatorSetting("gen1a", t.detail.value);
              case 3:
                _this8.showSuccessMessage("GEN1A模式已更新");
              case 4:
              case "end":
                return _context6.stop();
            }
          }, _callee6);
        }))();
      },
      onGen2Change: function onGen2Change(t) {
        var _this9 = this;
        return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee7() {
          return _regeneratorRuntime2().wrap(function _callee7$(_context7) {
            while (1) switch (_context7.prev = _context7.next) {
              case 0:
                _this9.emulatorSettings.gen2Enabled = t.detail.value;
                _context7.next = 3;
                return _this9.updateEmulatorSetting("gen2", t.detail.value);
              case 3:
                _this9.showSuccessMessage("GEN2模式已更新");
              case 4:
              case "end":
                return _context7.stop();
            }
          }, _callee7);
        }))();
      },
      onAntiCollChange: function onAntiCollChange(t) {
        var _this10 = this;
        return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee8() {
          return _regeneratorRuntime2().wrap(function _callee8$(_context8) {
            while (1) switch (_context8.prev = _context8.next) {
              case 0:
                _this10.emulatorSettings.antiCollEnabled = t.detail.value;
                _context8.next = 3;
                return _this10.updateEmulatorSetting("antiColl", t.detail.value);
              case 3:
                _this10.showSuccessMessage("防冲突模式已更新");
              case 4:
              case "end":
                return _context8.stop();
            }
          }, _callee8);
        }))();
      },
      onDetectionChange: function onDetectionChange(t) {
        var _this11 = this;
        return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee9() {
          return _regeneratorRuntime2().wrap(function _callee9$(_context9) {
            while (1) switch (_context9.prev = _context9.next) {
              case 0:
                _this11.emulatorSettings.detectionEnabled = t.detail.value;
                _context9.next = 3;
                return _this11.updateEmulatorSetting("detection", t.detail.value);
              case 3:
                _this11.showSuccessMessage("检测模式已更新");
              case 4:
              case "end":
                return _context9.stop();
            }
          }, _callee9);
        }))();
      },
      onWriteModeChange: function onWriteModeChange(t) {
        var _this12 = this;
        return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee10() {
          var a;
          return _regeneratorRuntime2().wrap(function _callee10$(_context10) {
            while (1) switch (_context10.prev = _context10.next) {
              case 0:
                _this12.writeModeIndex = t.detail.value;
                a = _this12.writeModes[_this12.writeModeIndex];
                _this12.emulatorSettings.writeMode = a.value;
                _context10.next = 5;
                return _this12.updateEmulatorSetting("writeMode", a.value);
              case 5:
                _this12.showSuccessMessage("写入模式已更新");
              case 6:
              case "end":
                return _context10.stop();
            }
          }, _callee10);
        }))();
      },
      updateEmulatorSetting: function updateEmulatorSetting(t, a) {
        var _this13 = this;
        return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee11() {
          return _regeneratorRuntime2().wrap(function _callee11$(_context11) {
            while (1) switch (_context11.prev = _context11.next) {
              case 0:
                _context11.prev = 0;
                _context11.t0 = (console.log("[SlotEdit] \u66F4\u65B0\u6A21\u62DF\u5668\u8BBE\u7F6E: ".concat(t, " = ").concat(a, ", \u5361\u69FDID: ").concat(_this13.slotId, " (UI\u663E\u793A: \u5361\u69FD").concat(_this13.slotId + 1, ")")), t);
                _context11.next = _context11.t0 === "gen1a" ? 4 : _context11.t0 === "gen2" ? 7 : _context11.t0 === "antiColl" ? 10 : _context11.t0 === "detection" ? 13 : _context11.t0 === "writeMode" ? 16 : 19;
                break;
              case 4:
                _context11.next = 6;
                return e.bluetoothService.setMf1Gen1aMode(_this13.slotId, a);
              case 6:
                return _context11.abrupt("break", 20);
              case 7:
                _context11.next = 9;
                return e.bluetoothService.setMf1Gen2Mode(_this13.slotId, a);
              case 9:
                return _context11.abrupt("break", 20);
              case 10:
                _context11.next = 12;
                return e.bluetoothService.setMf1UseFirstBlockColl(_this13.slotId, a);
              case 12:
                return _context11.abrupt("break", 20);
              case 13:
                _context11.next = 15;
                return e.bluetoothService.setMf1DetectionMode(_this13.slotId, a);
              case 15:
                return _context11.abrupt("break", 20);
              case 16:
                _context11.next = 18;
                return e.bluetoothService.setMf1WriteMode(_this13.slotId, a);
              case 18:
                return _context11.abrupt("break", 20);
              case 19:
                console.warn("[SlotEdit] \u672A\u77E5\u7684\u6A21\u62DF\u5668\u8BBE\u7F6E: ".concat(t));
              case 20:
                _context11.next = 22;
                return _this13.loadEmulatorSettings();
              case 22:
                _context11.next = 30;
                break;
              case 24:
                _context11.prev = 24;
                _context11.t1 = _context11["catch"](0);
                console.error("[SlotEdit] 更新模拟器设置失败:", _context11.t1);
                _this13.showError("更新设置失败: " + _context11.t1.message);
                _context11.next = 30;
                return _this13.loadEmulatorSettings();
              case 30:
              case "end":
                return _context11.stop();
            }
          }, _callee11, null, [[0, 24]]);
        }))();
      },
      saveSlot: function saveSlot() {
        var _this14 = this;
        return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee12() {
          return _regeneratorRuntime2().wrap(function _callee12$(_context12) {
            while (1) switch (_context12.prev = _context12.next) {
              case 0:
                if (!_this14.canSave) {
                  _context12.next = 21;
                  break;
                }
                if (!_this14.isConnected) {
                  _context12.next = 20;
                  break;
                }
                _context12.prev = 2;
                if (!(_this14.isLoading = !0, _this14.loadingText = "验证数据...", _this14.validateForm(), Object.keys(_this14.formErrors).length > 0)) {
                  _context12.next = 5;
                  break;
                }
                return _context12.abrupt("return", void _this14.showError("请检查输入的数据格式"));
              case 5:
                _this14.loadingText = "保存到设备...";
                _context12.next = 8;
                return _this14.saveCardToDevice();
              case 8:
                _this14.showSuccessMessage("保存成功");
                setTimeout(function () {
                  _this14.goBack();
                }, 1500);
                _context12.next = 15;
                break;
              case 12:
                _context12.prev = 12;
                _context12.t0 = _context12["catch"](2);
                console.error("[SlotEdit] 保存失败:", _context12.t0), _this14.showError("保存失败: " + _context12.t0.message);
              case 15:
                _context12.prev = 15;
                _this14.isLoading = !1, _this14.loadingText = "处理中...";
                return _context12.finish(15);
              case 18:
                _context12.next = 21;
                break;
              case 20:
                _this14.showConnectionRequired();
              case 21:
              case "end":
                return _context12.stop();
            }
          }, _callee12, null, [[2, 12, 15, 18]]);
        }))();
      },
      saveCardToDevice: function saveCardToDevice() {
        var _this15 = this;
        return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee13() {
          var _t8, _s5, _t9, _t10;
          return _regeneratorRuntime2().wrap(function _callee13$(_context13) {
            while (1) switch (_context13.prev = _context13.next) {
              case 0:
                _context13.prev = 0;
                _t8 = _this15.getUTF8ByteLength(_this15.cardData.name);
                if (!(_t8 > 32)) {
                  _context13.next = 4;
                  break;
                }
                throw new Error("\u5361\u7247\u540D\u79F0\u8FC7\u957F\uFF0CUTF-8\u7F16\u7801\u540E\u8D85\u8FC732\u5B57\u8282 (".concat(_t8, "\u5B57\u8282)"));
              case 4:
                console.log("[SlotEdit] 准备激活卡槽:", _this15.slotId, "类型:", _typeof2(_this15.slotId));
                _context13.next = 7;
                return _this15.$store.dispatch("slots/setActiveSlot", _this15.slotId);
              case 7:
                _s5 = _this15.availableTypes[_this15.selectedTypeIndex];
                _context13.next = 10;
                return e.bluetoothService.setSlotType(_this15.slotId, _s5.value);
              case 10:
                _context13.next = 12;
                return e.bluetoothService.enableSlot(_this15.slotId, _this15.frequency, !0);
              case 12:
                _context13.next = 14;
                return e.bluetoothService.setSlotDataDefault(_this15.slotId, _s5.value);
              case 14:
                _context13.t0 = _this15.cardData.data && _this15.cardData.data.length > 0;
                if (!_context13.t0) {
                  _context13.next = 20;
                  break;
                }
                console.log("[SlotEdit] 开始写入卡片数据块...");
                _context13.next = 19;
                return _this15.writeActualCardData(_s5);
              case 19:
                console.log("[SlotEdit] 卡片数据块写入完成");
              case 20:
                if (!_this15.isHFCard) {
                  _context13.next = 26;
                  break;
                }
                _t9 = {
                  uid: _this15.cardData.uid.replace(/\s/g, ""),
                  sak: parseInt(_this15.cardData.sak.replace(/\s/g, ""), 16),
                  atqa: _this15.cardData.atqa.replace(/\s/g, ""),
                  ats: _this15.cardData.ats.replace(/\s/g, "")
                };
                console.log("[SlotEdit] 🔧 设置防冲突数据 (最后步骤，确保不被覆盖):", _t9);
                _context13.next = 25;
                return e.bluetoothService.setMf1AntiCollision(_this15.slotId, _t9);
              case 25:
                console.log("[SlotEdit] ✅ 防冲突数据设置完成");
              case 26:
                if (!(_s5.value === a.TagType.EM410X)) {
                  _context13.next = 30;
                  break;
                }
                _t10 = _this15.cardData.uid.replace(/\s/g, "");
                _context13.next = 30;
                return e.bluetoothService.setEM410XEmulatorID(_this15.slotId, _t10);
              case 30:
                _context13.next = 32;
                return _this15.$store.dispatch("slots/setSlotTagName", {
                  slotId: _this15.slotId,
                  frequency: _this15.frequency,
                  name: _this15.cardData.name
                });
              case 32:
                _context13.next = 34;
                return e.bluetoothService.saveSlotData();
              case 34:
                _context13.next = 36;
                return _this15.updateLocalSlotData(_s5);
              case 36:
                console.log("[SlotEdit] 卡片数据已保存到设备");
                _context13.next = 42;
                break;
              case 39:
                _context13.prev = 39;
                _context13.t1 = _context13["catch"](0);
                throw console.error("[SlotEdit] 保存卡片数据失败:", _context13.t1), _context13.t1;
              case 42:
              case "end":
                return _context13.stop();
            }
          }, _callee13, null, [[0, 39]]);
        }))();
      },
      writeActualCardData: function writeActualCardData(t) {
        var _this16 = this;
        return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee14() {
          return _regeneratorRuntime2().wrap(function _callee14$(_context14) {
            while (1) switch (_context14.prev = _context14.next) {
              case 0:
                _context14.prev = 0;
                console.log("[SlotEdit] \u5F00\u59CB\u5199\u5165\u5B9E\u9645\u5361\u7247\u6570\u636E\uFF0C\u6570\u636E\u5757\u6570\u91CF: ".concat(_this16.cardData.data.length));
                if (!_this16.isMifareClassic) {
                  _context14.next = 7;
                  break;
                }
                _context14.next = 5;
                return _this16.writeMifareClassicData();
              case 5:
                _context14.next = 13;
                break;
              case 7:
                if (!(_this16.isNTAG || _this16.isMifareUltralight)) {
                  _context14.next = 12;
                  break;
                }
                _context14.next = 10;
                return _this16.writeUltralightData();
              case 10:
                _context14.next = 13;
                break;
              case 12:
                console.log("[SlotEdit] \u5361\u7247\u7C7B\u578B ".concat(t.name, " \u4E0D\u652F\u6301\u6570\u636E\u5199\u5165"));
              case 13:
                _context14.next = 18;
                break;
              case 15:
                _context14.prev = 15;
                _context14.t0 = _context14["catch"](0);
                throw console.error("[SlotEdit] 写入实际卡片数据失败:", _context14.t0), _context14.t0;
              case 18:
              case "end":
                return _context14.stop();
            }
          }, _callee14, null, [[0, 15]]);
        }))();
      },
      writeMifareClassicData: function writeMifareClassicData() {
        var _this17 = this;
        return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee15() {
          var _t11, _a7, _s6, _i2, _a8, _e3, r;
          return _regeneratorRuntime2().wrap(function _callee15$(_context15) {
            while (1) switch (_context15.prev = _context15.next) {
              case 0:
                _context15.prev = 0;
                _t11 = _this17.cardData.data;
                _a7 = [], _s6 = 0;
                _i2 = 0;
              case 4:
                if (!(_i2 < _t11.length)) {
                  _context15.next = 20;
                  break;
                }
                _context15.t0 = (_t11[_i2] && 0 === _t11[_i2].length || _a7.length >= 128) && _a7.length > 0;
                if (!_context15.t0) {
                  _context15.next = 12;
                  break;
                }
                _context15.next = 9;
                return e.bluetoothService.setMf1BlockData(_s6, new Uint8Array(_a7));
              case 9:
                console.log("[SlotEdit] \u5DF2\u5199\u5165\u5757 ".concat(_s6, " \u5230 ").concat(_s6 + Math.floor(_a7.length / 16) - 1));
                _a7 = [];
                _s6 = _i2;
              case 12:
                if (!(_t11[_i2] && _t11[_i2].length > 0)) {
                  _context15.next = 15;
                  break;
                }
                _e3 = Array.isArray(_t11[_i2]) ? _t11[_i2] : Array.from(_t11[_i2]);
                (_a8 = _a7).push.apply(_a8, _toConsumableArray2(_e3));
              case 15:
                r = Math.round(_i2 / _t11.length * 100);
                r % 10 == 0 && console.log("[SlotEdit] \u5199\u5165\u8FDB\u5EA6: ".concat(r, "%"));
              case 17:
                _i2++;
                _context15.next = 4;
                break;
              case 20:
                _context15.t1 = _a7.length > 0;
                if (!_context15.t1) {
                  _context15.next = 25;
                  break;
                }
                _context15.next = 24;
                return e.bluetoothService.setMf1BlockData(_s6, new Uint8Array(_a7));
              case 24:
                console.log("[SlotEdit] \u5DF2\u5199\u5165\u6700\u540E\u6279\u6B21\u5757\u6570\u636E\uFF0C\u8D77\u59CB\u5757: ".concat(_s6));
              case 25:
                console.log("[SlotEdit] Mifare Classic数据写入完成");
                _context15.next = 31;
                break;
              case 28:
                _context15.prev = 28;
                _context15.t2 = _context15["catch"](0);
                throw console.error("[SlotEdit] 写入Mifare Classic数据失败:", _context15.t2), _context15.t2;
              case 31:
              case "end":
                return _context15.stop();
            }
          }, _callee15, null, [[0, 28]]);
        }))();
      },
      writeUltralightData: function writeUltralightData() {
        var _this18 = this;
        return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee16() {
          var _t12;
          return _regeneratorRuntime2().wrap(function _callee16$(_context16) {
            while (1) switch (_context16.prev = _context16.next) {
              case 0:
                _context16.prev = 0;
                console.log("[SlotEdit] Ultralight/NTAG数据写入暂未完全实现");
                _t12 = _this18.cardData.data;
                console.log("[SlotEdit] Ultralight/NTAG\u9875\u9762\u6570\u91CF: ".concat(_t12.length));
                _context16.next = 9;
                break;
              case 6:
                _context16.prev = 6;
                _context16.t0 = _context16["catch"](0);
                throw console.error("[SlotEdit] 写入Ultralight数据失败:", _context16.t0), _context16.t0;
              case 9:
              case "end":
                return _context16.stop();
            }
          }, _callee16, null, [[0, 6]]);
        }))();
      },
      updateLocalSlotData: function updateLocalSlotData(t) {
        var _this19 = this;
        return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee17() {
          var _t13, _a9;
          return _regeneratorRuntime2().wrap(function _callee17$(_context17) {
            while (1) switch (_context17.prev = _context17.next) {
              case 0:
                _context17.prev = 0;
                console.log("[SlotEdit] 开始更新本地卡槽数据...");
                console.log("[SlotEdit] 等待设备数据同步...");
                _context17.next = 5;
                return new Promise(function (t) {
                  return setTimeout(t, 1e3);
                });
              case 5:
                console.log("[SlotEdit] 重新激活卡槽...");
                _context17.next = 8;
                return e.bluetoothService.setActiveSlot(_this19.slotId);
              case 8:
                if (!_this19.isHFCard) {
                  _context17.next = 20;
                  break;
                }
                _context17.prev = 9;
                console.log("[SlotEdit] 开始强制刷新HF卡片数据...");
                _context17.next = 13;
                return e.bluetoothService.getMf1AntiCollData(_this19.slotId);
              case 13:
                _t13 = _context17.sent;
                if (console.log("[SlotEdit] 从设备读取到的HF数据:", _t13), _t13) {
                  _a9 = {
                    uid: _this19.cardData.uid,
                    sak: _this19.cardData.sak,
                    atqa: _this19.cardData.atqa,
                    ats: _this19.cardData.ats
                  };
                  _this19.cardData.uid = _this19.formatHexData(_t13.uid), _this19.cardData.sak = _t13.sak.toString(16).padStart(2, "0").toUpperCase(), _this19.cardData.atqa = _this19.formatHexData(_t13.atqa), _this19.cardData.ats = _this19.formatHexData(_t13.ats), console.log("[SlotEdit] 数据对比:"), console.log("  旧数据:", _a9), console.log("  新数据:", {
                    uid: _this19.cardData.uid,
                    sak: _this19.cardData.sak,
                    atqa: _this19.cardData.atqa,
                    ats: _this19.cardData.ats
                  });
                  _a9.uid !== _this19.cardData.uid || _a9.sak !== _this19.cardData.sak || _a9.atqa !== _this19.cardData.atqa || _a9.ats !== _this19.cardData.ats ? console.log("[SlotEdit] ✅ 数据已成功更新") : console.warn("[SlotEdit] ⚠️ 数据没有变化，可能存在问题");
                } else console.warn("[SlotEdit] ⚠️ 从设备读取到空的HF数据");
                _context17.next = 20;
                break;
              case 17:
                _context17.prev = 17;
                _context17.t0 = _context17["catch"](9);
                console.error("[SlotEdit] ❌ 强制刷新HF卡片数据失败:", _context17.t0);
              case 20:
                console.log("[SlotEdit] 刷新所有卡槽数据...");
                _context17.next = 23;
                return _this19.$store.dispatch("slots/loadAllSlots");
              case 23:
                console.log("[SlotEdit] ✅ 本地卡槽数据更新完成");
                _context17.next = 29;
                break;
              case 26:
                _context17.prev = 26;
                _context17.t1 = _context17["catch"](0);
                console.error("[SlotEdit] ❌ 更新本地卡槽数据失败:", _context17.t1);
              case 29:
              case "end":
                return _context17.stop();
            }
          }, _callee17, null, [[0, 26], [9, 17]]);
        }))();
      },
      clearSlotData: function clearSlotData() {
        var _this20 = this;
        return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee19() {
          return _regeneratorRuntime2().wrap(function _callee19$(_context19) {
            while (1) switch (_context19.prev = _context19.next) {
              case 0:
                _this20.isConnected ? t.index.showModal({
                  title: "确认清空",
                  content: "\u786E\u5B9A\u8981\u6E05\u7A7A\u5361\u69FD ".concat(_this20.slotId + 1, " \u7684\u6570\u636E\u5417\uFF1F\u6B64\u64CD\u4F5C\u4E0D\u53EF\u6062\u590D\u3002"),
                  confirmText: "清空",
                  confirmColor: "#ff4444",
                  success: function () {
                    var _success = _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee18(a) {
                      return _regeneratorRuntime2().wrap(function _callee18$(_context18) {
                        while (1) switch (_context18.prev = _context18.next) {
                          case 0:
                            if (!a.confirm) {
                              _context18.next = 15;
                              break;
                            }
                            _context18.prev = 1;
                            _this20.isLoading = !0;
                            _context18.next = 5;
                            return _this20.$store.dispatch("slots/clearSlot", _this20.slotId);
                          case 5:
                            t.index.showToast({
                              title: "卡槽已清空",
                              icon: "success"
                            });
                            setTimeout(function () {
                              _this20.goBack();
                            }, 1e3);
                            _context18.next = 12;
                            break;
                          case 9:
                            _context18.prev = 9;
                            _context18.t0 = _context18["catch"](1);
                            console.error("[SlotEdit] 清空卡槽失败:", _context18.t0), _this20.showError("清空失败: " + _context18.t0.message);
                          case 12:
                            _context18.prev = 12;
                            _this20.isLoading = !1;
                            return _context18.finish(12);
                          case 15:
                          case "end":
                            return _context18.stop();
                        }
                      }, _callee18, null, [[1, 9, 12, 15]]);
                    }));
                    function success(_x) {
                      return _success.apply(this, arguments);
                    }
                    return success;
                  }()
                }) : _this20.showConnectionRequired();
              case 1:
              case "end":
                return _context19.stop();
            }
          }, _callee19);
        }))();
      },
      goBack: function goBack() {
        t.index.navigateBack();
      },
      hexStringToBytes: function hexStringToBytes(t) {
        if (!t) return [];
        var a = t.replace(/\s/g, ""),
          e = [];
        for (var _s7 = 0; _s7 < a.length; _s7 += 2) e.push(parseInt(a.substr(_s7, 2), 16));
        return e;
      },
      showConnectionRequired: function showConnectionRequired() {
        t.index.showModal({
          title: "需要连接设备",
          content: "此功能需要先连接 Chameleon 设备，是否立即连接？",
          confirmText: "去连接",
          success: function success(a) {
            a.confirm && t.index.navigateTo({
              url: "/pages/connect/connect"
            });
          }
        });
      },
      showError: function showError(a) {
        t.index.showModal({
          title: "错误",
          content: a,
          showCancel: !1
        });
      },
      showSuccessMessage: function showSuccessMessage(t) {
        var _this21 = this;
        this.successMessage = t, this.showSuccessToast = !0, setTimeout(function () {
          _this21.showSuccessToast = !1;
        }, 2e3);
      },
      showCardPackagePop: function showCardPackagePop() {
        var _this22 = this;
        return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee20() {
          var a;
          return _regeneratorRuntime2().wrap(function _callee20$(_context20) {
            while (1) switch (_context20.prev = _context20.next) {
              case 0:
                _context20.prev = 0;
                console.log("[SlotEdit] 显示卡包选择弹窗");
                t.index.showToast({
                  title: "正在加载卡包...",
                  icon: "loading",
                  duration: 1e3
                });
                _context20.next = 5;
                return _this22.loadCardsFromStorage();
              case 5:
                console.log("[SlotEdit] 卡包数据加载完成，卡片数量:", (null == (a = _this22.cards) ? void 0 : a.length) || 0);
                _this22.updateFilterCounts();
                _this22.currentCardFilter = "all";
                _this22.$refs.cardPackagePopup ? (_this22.$refs.cardPackagePopup.open(), console.log("[SlotEdit] 卡包弹窗已打开")) : (console.error("[SlotEdit] 找不到卡包弹窗引用"), t.index.showToast({
                  title: "弹窗组件未找到",
                  icon: "error"
                }));
                _context20.next = 14;
                break;
              case 11:
                _context20.prev = 11;
                _context20.t0 = _context20["catch"](0);
                console.error("[SlotEdit] 加载卡包失败:", _context20.t0), t.index.showToast({
                  title: "加载卡包失败: " + _context20.t0.message,
                  icon: "error"
                });
              case 14:
              case "end":
                return _context20.stop();
            }
          }, _callee20, null, [[0, 11]]);
        }))();
      },
      closeCardPackage: function closeCardPackage() {
        this.$refs.cardPackagePopup.close(), this.cardSearchQuery = "";
      },
      handleCardSearch: function handleCardSearch() {},
      selectCardFromPackage: function selectCardFromPackage(a) {
        try {
          this.processCardSelection(a);
        } catch (e) {
          console.error("[SlotEdit] 选择卡片失败:", e), t.index.showToast({
            title: "导入卡片失败",
            icon: "error"
          });
        }
      },
      processCardSelection: function processCardSelection(a) {
        try {
          this.cardData.name = a.name, a.uid ? this.cardData.uid = this.formatHexData(a.uid.replace(/\s/g, "")) : this.cardData.uid = "";
          var _e4 = this.availableTypes.findIndex(function (t) {
            return t.value === a.tag;
          });
          if (-1 !== _e4 && (this.selectedTypeIndex = _e4, this.onTypeChange({
            detail: {
              value: _e4
            }
          })), 2 === a.getFrequency()) {
            var _t14 = this.cardData.uid ? this.cardData.uid.replace(/\s/g, "").length / 2 : 4;
            void 0 !== a.sak && null !== a.sak ? this.cardData.sak = "number" == typeof a.sak ? a.sak.toString(16).padStart(2, "0").toUpperCase() : a.sak.toString() : this.cardData.sak = this.getDefaultSAK(a.tag, _t14), a.atqa && a.atqa.length > 0 ? this.cardData.atqa = Array.from(a.atqa).map(function (t) {
              return t.toString(16).padStart(2, "0");
            }).join(" ").toUpperCase() : this.cardData.atqa = this.getDefaultATQA(a.tag, _t14), a.ats && a.ats.length > 0 ? this.cardData.ats = Array.from(a.ats).map(function (t) {
              return t.toString(16).padStart(2, "0");
            }).join(" ").toUpperCase() : this.cardData.ats = "";
          }
          a.data && a.data.length > 0 && (this.cardData.data = a.data.map(function (t) {
            return Array.from(t);
          })), this.closeCardPackage(), this.validateForm(), t.index.showToast({
            title: "卡片数据已导入",
            icon: "success"
          }), console.log("[SlotEdit] 从卡包选择卡片:", a.name);
        } catch (e) {
          console.error("[SlotEdit] 处理卡片选择失败:", e), t.index.showToast({
            title: "导入卡片失败",
            icon: "error"
          });
        }
      },
      goToCards: function goToCards() {
        this.closeCardPackage(), t.index.navigateTo({
          url: "/pages/cards/cards"
        });
      },
      selectCardFilter: function selectCardFilter(t) {
        this.currentCardFilter = t;
      },
      updateFilterCounts: function updateFilterCounts() {
        var t = this.cards || [];
        this.cardFilters.forEach(function (e) {
          switch (e.id) {
            case "all":
              e.count = t.length;
              break;
            case "hf":
              e.count = t.filter(function (t) {
                return 2 === t.getFrequency();
              }).length;
              break;
            case "lf":
              e.count = t.filter(function (t) {
                return 1 === t.getFrequency();
              }).length;
              break;
            case "mifare":
              e.count = t.filter(function (t) {
                return t.isMifareClassic() || t.isMifareUltralight();
              }).length;
              break;
            case "em410x":
              e.count = t.filter(function (t) {
                return t.tag === a.TagType.EM410X;
              }).length;
          }
        });
      },
      showCardDetails: function showCardDetails(t) {
        this.selectedCardDetail = t, this.$refs.cardDetailPopup.open();
      },
      closeCardDetails: function closeCardDetails() {
        this.selectedCardDetail = null, this.$refs.cardDetailPopup.close();
      },
      selectDetailCard: function selectDetailCard() {
        this.selectedCardDetail && (this.selectCardFromPackage(this.selectedCardDetail), this.closeCardDetails());
      },
      formatUID: function formatUID(t) {
        return t ? t.replace(/(.{2})/g, "$1 ").trim().toUpperCase() : "";
      },
      formatHex: function formatHex(t) {
        return "number" == typeof t ? "0x" + t.toString(16).padStart(2, "0").toUpperCase() : t;
      },
      formatHexArray: function formatHexArray(t) {
        return t && 0 !== t.length ? Array.from(t).map(function (t) {
          return t.toString(16).padStart(2, "0");
        }).join(" ").toUpperCase() : "";
      },
      getCardDataSize: function getCardDataSize(t) {
        return t.data && 0 !== t.data.length ? t.isMifareClassic() ? "".concat(t.data.length, " \u5757") : t.isMifareUltralight() ? "".concat(t.data.length, " \u9875") : "".concat(t.data.length, " \u5B57\u8282") : "无数据";
      },
      formatTime: function formatTime(t) {
        if (!t) return "";
        return new Date(t).toLocaleString("zh-CN", {
          year: "numeric",
          month: "2-digit",
          day: "2-digit",
          hour: "2-digit",
          minute: "2-digit"
        });
      },
      getCardIcon: function getCardIcon(t) {
        return 1 === t.getFrequency() ? "wifi" : "creditcard";
      },
      getCardTypeName: function getCardTypeName(t) {
        var a = this.availableTypes.find(function (a) {
          return a.value === t.tag;
        });
        return a ? a.name : "未知类型";
      }
    })
  };
if (!Array) {
  (t.resolveComponent("uni-icons") + t.resolveComponent("uni-load-more") + t.resolveComponent("uni-search-bar") + t.resolveComponent("uni-popup"))();
}
Math || (function () {
  return "../../node-modules/@dcloudio/uni-ui/lib/uni-icons/uni-icons.js";
} + function () {
  return "../../node-modules/@dcloudio/uni-ui/lib/uni-load-more/uni-load-more.js";
} + function () {
  return "../../node-modules/@dcloudio/uni-ui/lib/uni-search-bar/uni-search-bar.js";
} + function () {
  return "../../node-modules/@dcloudio/uni-ui/lib/uni-popup/uni-popup.js";
})();
var i = t._export_sfc(s, [["render", function (a, e, s, i, r, o) {
  return t.e({
    a: t.p({
      type: "folder-add",
      size: "16",
      color: "#007AFF"
    }),
    b: t.o(function () {
      return o.showCardPackagePop && o.showCardPackagePop.apply(o, arguments);
    }),
    c: t.t(r.slotId + 1),
    d: r.formErrors.name ? 1 : "",
    e: t.o([function (t) {
      return r.cardData.name = t.detail.value;
    }, function () {
      return o.validateForm && o.validateForm.apply(o, arguments);
    }]),
    f: r.cardData.name,
    g: t.t(o.getUTF8ByteLength(r.cardData.name)),
    h: o.getUTF8ByteLength(r.cardData.name) > 25 ? 1 : "",
    i: o.getUTF8ByteLength(r.cardData.name) > 32 ? 1 : "",
    j: r.formErrors.name
  }, r.formErrors.name ? {
    k: t.t(r.formErrors.name)
  } : {}, {
    l: t.t(o.selectedTypeName),
    m: t.p({
      type: "down",
      size: "16",
      color: "#999"
    }),
    n: r.selectedTypeIndex,
    o: r.availableTypes,
    p: t.o(function () {
      return o.onTypeChange && o.onTypeChange.apply(o, arguments);
    }),
    q: o.isHFCard
  }, o.isHFCard ? t.e({
    r: r.formErrors.uid ? 1 : "",
    s: t.o([function (t) {
      return r.cardData.uid = t.detail.value;
    }, function (t) {
      return o.formatHexInput("uid", t);
    }]),
    t: t.o(function () {
      return o.validateUID && o.validateUID.apply(o, arguments);
    }),
    v: r.cardData.uid,
    w: r.cardData.uid
  }, r.cardData.uid ? {
    x: t.p({
      type: "copy",
      size: "16",
      color: "#666"
    }),
    y: t.o(function (t) {
      return o.copyHexData("uid");
    })
  } : {}, {
    z: r.formErrors.uid
  }, r.formErrors.uid ? {
    A: t.t(r.formErrors.uid)
  } : {}, {
    B: r.formErrors.sak ? 1 : "",
    C: t.o([function (t) {
      return r.cardData.sak = t.detail.value;
    }, function (t) {
      return o.formatHexInput("sak", t);
    }]),
    D: t.o(function () {
      return o.validateSAK && o.validateSAK.apply(o, arguments);
    }),
    E: r.cardData.sak,
    F: r.cardData.sak
  }, r.cardData.sak ? {
    G: t.p({
      type: "copy",
      size: "16",
      color: "#666"
    }),
    H: t.o(function (t) {
      return o.copyHexData("sak");
    })
  } : {}, {
    I: r.formErrors.sak
  }, r.formErrors.sak ? {
    J: t.t(r.formErrors.sak)
  } : {}, {
    K: r.formErrors.atqa ? 1 : "",
    L: t.o([function (t) {
      return r.cardData.atqa = t.detail.value;
    }, function (t) {
      return o.formatHexInput("atqa", t);
    }]),
    M: t.o(function () {
      return o.validateATQA && o.validateATQA.apply(o, arguments);
    }),
    N: r.cardData.atqa,
    O: r.cardData.atqa
  }, r.cardData.atqa ? {
    P: t.p({
      type: "copy",
      size: "16",
      color: "#666"
    }),
    Q: t.o(function (t) {
      return o.copyHexData("atqa");
    })
  } : {}, {
    R: r.formErrors.atqa
  }, r.formErrors.atqa ? {
    S: t.t(r.formErrors.atqa)
  } : {}, {
    T: r.formErrors.ats ? 1 : "",
    U: t.o([function (t) {
      return r.cardData.ats = t.detail.value;
    }, function (t) {
      return o.formatHexInput("ats", t);
    }]),
    V: t.o(function () {
      return o.validateATS && o.validateATS.apply(o, arguments);
    }),
    W: r.cardData.ats,
    X: r.cardData.ats
  }, r.cardData.ats ? {
    Y: t.p({
      type: "copy",
      size: "16",
      color: "#666"
    }),
    Z: t.o(function (t) {
      return o.copyHexData("ats");
    })
  } : {}, {
    aa: r.formErrors.ats
  }, r.formErrors.ats ? {
    ab: t.t(r.formErrors.ats)
  } : {}) : {}, {
    ac: o.isMifareClassic
  }, o.isMifareClassic ? {
    ad: r.emulatorSettings.gen1aEnabled,
    ae: t.o(function () {
      return o.onGen1AChange && o.onGen1AChange.apply(o, arguments);
    }),
    af: r.isLoading,
    ag: r.emulatorSettings.gen2Enabled,
    ah: t.o(function () {
      return o.onGen2Change && o.onGen2Change.apply(o, arguments);
    }),
    ai: r.isLoading,
    aj: r.emulatorSettings.antiCollEnabled,
    ak: t.o(function () {
      return o.onAntiCollChange && o.onAntiCollChange.apply(o, arguments);
    }),
    al: r.isLoading,
    am: r.emulatorSettings.detectionEnabled,
    an: t.o(function () {
      return o.onDetectionChange && o.onDetectionChange.apply(o, arguments);
    }),
    ao: r.isLoading,
    ap: t.t(o.selectedWriteMode.name),
    aq: t.p({
      type: "down",
      size: "16",
      color: "#999"
    }),
    ar: r.writeModeIndex,
    as: r.writeModes,
    at: t.o(function () {
      return o.onWriteModeChange && o.onWriteModeChange.apply(o, arguments);
    })
  } : {}, {
    av: !r.isNew
  }, r.isNew ? {} : {
    aw: t.p({
      type: "trash",
      size: "18",
      color: "#ff4444"
    }),
    ax: t.o(function () {
      return o.clearSlotData && o.clearSlotData.apply(o, arguments);
    }),
    ay: r.isLoading
  }, {
    az: t.t(r.isLoading ? "保存中..." : "保存"),
    aA: o.canSave ? "" : 1,
    aB: t.o(function () {
      return o.saveSlot && o.saveSlot.apply(o, arguments);
    }),
    aC: !o.canSave || r.isLoading,
    aD: r.isLoading
  }, r.isLoading ? {
    aE: t.p({
      status: "loading",
      "content-text": r.loadingText
    })
  } : {}, {
    aF: r.showSuccessToast
  }, r.showSuccessToast ? {
    aG: t.p({
      type: "checkmarkempty",
      size: "24",
      color: "#4CAF50"
    }),
    aH: t.t(r.successMessage)
  } : {}, {
    aI: t.p({
      type: "close",
      size: "20",
      color: "#666"
    }),
    aJ: t.o(function () {
      return o.closeCardPackage && o.closeCardPackage.apply(o, arguments);
    }),
    aK: t.o(o.handleCardSearch),
    aL: t.o(o.handleCardSearch),
    aM: t.o(function (t) {
      return r.cardSearchQuery = t;
    }),
    aN: t.p({
      placeholder: "搜索卡片名称、UID或类型",
      focus: !1,
      "bg-color": "#f8f8f8",
      modelValue: r.cardSearchQuery
    }),
    aO: t.f(r.cardFilters, function (a, e, s) {
      return t.e({
        a: "7f581d10-13-" + s + ",7f581d10-10",
        b: t.p({
          type: a.icon,
          size: "14",
          color: r.currentCardFilter === a.id ? "#007AFF" : "#666"
        }),
        c: t.t(a.name),
        d: a.count > 0
      }, a.count > 0 ? {
        e: t.t(a.count)
      } : {}, {
        f: a.id,
        g: t.n({
          active: r.currentCardFilter === a.id
        }),
        h: t.o(function (t) {
          return o.selectCardFilter(a.id);
        }, a.id)
      });
    }),
    aP: 0 === o.filteredPackageCards.length
  }, 0 === o.filteredPackageCards.length ? {
    aQ: t.p({
      type: "folder",
      size: "60",
      color: "#ccc"
    }),
    aR: t.p({
      type: "plus",
      size: "16",
      color: "#007AFF"
    }),
    aS: t.o(function () {
      return o.goToCards && o.goToCards.apply(o, arguments);
    })
  } : {
    aT: t.f(o.filteredPackageCards, function (a, e, s) {
      return t.e({
        a: "7f581d10-16-" + s + ",7f581d10-10",
        b: t.p({
          type: o.getCardIcon(a),
          size: "20",
          color: "#fff"
        }),
        c: a.color,
        d: t.t(a.name),
        e: t.t(o.getCardTypeName(a)),
        f: a.uid
      }, a.uid ? {
        g: t.t(o.formatUID(a.uid))
      } : {}, {
        h: t.t(2 === a.getFrequency() ? "HF" : "LF"),
        i: t.n(2 === a.getFrequency() ? "hf" : "lf"),
        j: "7f581d10-17-" + s + ",7f581d10-10",
        k: t.o(function (t) {
          return o.showCardDetails(a);
        }, a.id),
        l: a.id,
        m: t.o(function (t) {
          return o.selectCardFromPackage(a);
        }, a.id),
        n: t.o(function (t) {
          return o.showCardDetails(a);
        }, a.id)
      });
    }),
    aU: t.p({
      type: "eye",
      size: "16",
      color: "#666"
    })
  }, {
    aV: t.sr("cardPackagePopup", "7f581d10-10"),
    aW: t.p({
      type: "bottom",
      "safe-area": !1
    }),
    aX: r.selectedCardDetail
  }, r.selectedCardDetail ? t.e({
    aY: t.t(r.selectedCardDetail.name),
    aZ: t.p({
      type: "close",
      size: "20",
      color: "#666"
    }),
    ba: t.o(function () {
      return o.closeCardDetails && o.closeCardDetails.apply(o, arguments);
    }),
    bb: t.t(o.getCardTypeName(r.selectedCardDetail)),
    bc: r.selectedCardDetail.uid
  }, r.selectedCardDetail.uid ? {
    bd: t.t(r.selectedCardDetail.uid)
  } : {}, {
    be: t.t(2 === r.selectedCardDetail.getFrequency() ? "HF (13.56MHz)" : "LF (125kHz)"),
    bf: r.selectedCardDetail.sak
  }, r.selectedCardDetail.sak ? {
    bg: t.t(o.formatHex(r.selectedCardDetail.sak))
  } : {}, {
    bh: r.selectedCardDetail.atqa && r.selectedCardDetail.atqa.length > 0
  }, r.selectedCardDetail.atqa && r.selectedCardDetail.atqa.length > 0 ? {
    bi: t.t(o.formatHexArray(r.selectedCardDetail.atqa))
  } : {}, {
    bj: r.selectedCardDetail.ats && r.selectedCardDetail.ats.length > 0
  }, r.selectedCardDetail.ats && r.selectedCardDetail.ats.length > 0 ? {
    bk: t.t(o.formatHexArray(r.selectedCardDetail.ats))
  } : {}, {
    bl: t.t(o.getCardDataSize(r.selectedCardDetail)),
    bm: t.t(o.formatTime(r.selectedCardDetail.createdAt)),
    bn: t.t(o.formatTime(r.selectedCardDetail.modifiedAt)),
    bo: t.o(function () {
      return o.closeCardDetails && o.closeCardDetails.apply(o, arguments);
    }),
    bp: t.o(function () {
      return o.selectDetailCard && o.selectDetailCard.apply(o, arguments);
    })
  }) : {}, {
    bq: t.sr("cardDetailPopup", "7f581d10-18"),
    br: t.p({
      type: "center"
    })
  });
}], ["__scopeId", "data-v-7f581d10"]]);
wx.createPage(i); 
 			}); 	require("pages/slot-edit/slot-edit.js");
 		__wxRoute = 'pages/cards/cards';__wxRouteBegin = true; 	__wxAppCurrentFile__ = 'pages/cards/cards.js';	define("pages/cards/cards.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";

var _defineProperty2 = require("../../@babel/runtime/helpers/defineProperty");
var _toConsumableArray2 = require("../../@babel/runtime/helpers/toConsumableArray");
var _regeneratorRuntime2 = require("../../@babel/runtime/helpers/regeneratorRuntime");
var _asyncToGenerator2 = require("../../@babel/runtime/helpers/asyncToGenerator");
var _objectSpread2 = require("../../@babel/runtime/helpers/objectSpread2");
var e = require("../../common/vendor.js"),
  t = require("../../utils/chameleon-protocol.js"),
  a = require("../../utils/card-import-export.js"),
  s = {
    name: "Cards",
    data: function data() {
      return {
        searchKeyword: "",
        showAddMenu: !1,
        showSortMenu: !1,
        showImportMenu: !1,
        showExportMenu: !1,
        showCardEdit: !1,
        isSelecting: !1,
        selectedCards: [],
        currentCard: null,
        isEditing: !1,
        cardForm: {
          id: "",
          name: "",
          tag: t.TagType.UNKNOWN,
          uid: "",
          sak: "",
          atqa: "",
          ats: "",
          color: "#007AFF"
        },
        cardTypeOptions: [{
          value: t.TagType.EM410X,
          label: "EM410X",
          frequency: "LF"
        }, {
          value: t.TagType.MIFARE_1024,
          label: "Mifare Classic 1K",
          frequency: "HF"
        }, {
          value: t.TagType.MIFARE_2048,
          label: "Mifare Classic 2K",
          frequency: "HF"
        }, {
          value: t.TagType.MIFARE_4096,
          label: "Mifare Classic 4K",
          frequency: "HF"
        }, {
          value: t.TagType.NTAG_213,
          label: "NTAG213",
          frequency: "HF"
        }, {
          value: t.TagType.NTAG_215,
          label: "NTAG215",
          frequency: "HF"
        }, {
          value: t.TagType.NTAG_216,
          label: "NTAG216",
          frequency: "HF"
        }],
        colorOptions: [{
          value: "#007AFF",
          label: "蓝色"
        }, {
          value: "#FF3B30",
          label: "红色"
        }, {
          value: "#34C759",
          label: "绿色"
        }, {
          value: "#FF9500",
          label: "橙色"
        }, {
          value: "#AF52DE",
          label: "紫色"
        }, {
          value: "#FF2D92",
          label: "粉色"
        }, {
          value: "#5AC8FA",
          label: "青色"
        }, {
          value: "#FFCC00",
          label: "黄色"
        }],
        sortOptions: [{
          value: "modified",
          label: "修改时间"
        }, {
          value: "created",
          label: "创建时间"
        }, {
          value: "name",
          label: "名称"
        }, {
          value: "type",
          label: "类型"
        }],
        importOptions: [{
          value: "file",
          label: "从文件导入",
          icon: "📁"
        }, {
          value: "slot",
          label: "从卡槽导入",
          icon: "🔄"
        }],
        exportOptions: [{
          value: "json",
          label: "JSON格式",
          icon: "📄"
        }, {
          value: "dump",
          label: "Dump格式",
          icon: "📋"
        }, {
          value: "bin",
          label: "二进制格式",
          icon: "💾"
        }],
        isDevelopmentMode: !1
      };
    },
    computed: _objectSpread2(_objectSpread2(_objectSpread2({}, e.mapState("cards", ["cards", "categories", "currentCategory", "viewMode", "sortBy", "sortOrder", "statistics", "loading", "error"])), e.mapGetters("cards", ["filteredCards", "cardCount", "hfCards", "lfCards", "hasError"])), {}, {
      displayCards: function displayCards() {
        return this.filteredCards;
      },
      hasCards: function hasCards() {
        return this.cardCount > 0;
      },
      isHFCard: function isHFCard() {
        return this.cardForm.tag !== t.TagType.EM410X;
      }
    }),
    onLoad: function onLoad() {
      var _this = this;
      return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee() {
        return _regeneratorRuntime2().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              _context.next = 2;
              return _this.initCards();
            case 2:
            case "end":
              return _context.stop();
          }
        }, _callee);
      }))();
    },
    methods: _objectSpread2(_objectSpread2({}, e.mapActions("cards", ["initCards", "createCard", "updateCard", "deleteCard", "deleteCards", "cloneCard", "deployCardToSlot", "importCardFromSlot", "setSearchQuery", "clearError"])), {}, {
      onSearch: function onSearch() {
        this.$store.commit("cards/SET_SEARCH_KEYWORD", this.searchKeyword);
      },
      clearSearch: function clearSearch() {
        this.searchKeyword = "", this.$store.commit("cards/SET_SEARCH_KEYWORD", "");
      },
      selectCategory: function selectCategory(e) {
        this.$store.commit("cards/SET_CURRENT_CATEGORY", e);
      },
      toggleViewMode: function toggleViewMode() {
        var e = "grid" === this.viewMode ? "list" : "grid";
        this.$store.commit("cards/SET_VIEW_MODE", e);
      },
      setSortBy: function setSortBy(e) {
        this.$store.commit("cards/SET_SORT", {
          sortBy: e,
          sortOrder: this.sortOrder
        }), this.showSortMenu = !1;
      },
      setSortOrder: function setSortOrder(e) {
        this.$store.commit("cards/SET_SORT", {
          sortBy: this.sortBy,
          sortOrder: e
        }), this.showSortMenu = !1;
      },
      selectCard: function selectCard(t) {
        this.isSelecting ? this.toggleCardSelection(t.id) : e.index.navigateTo({
          url: "/pages/card-detail/card-detail?id=".concat(t.id)
        });
      },
      toggleCardSelection: function toggleCardSelection(e) {
        this.isSelecting || (this.isSelecting = !0);
        var t = this.selectedCards.indexOf(e);
        t > -1 ? (this.selectedCards.splice(t, 1), 0 === this.selectedCards.length && (this.isSelecting = !1)) : this.selectedCards.push(e);
      },
      selectAll: function selectAll() {
        this.selectedCards.length === this.displayCards.length ? (this.selectedCards = [], this.isSelecting = !1) : (this.selectedCards = this.displayCards.map(function (e) {
          return e.id;
        }), this.isSelecting = !0);
      },
      cancelSelection: function cancelSelection() {
        this.selectedCards = [], this.isSelecting = !1;
      },
      deleteSelected: function deleteSelected() {
        var _this2 = this;
        return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee2() {
          return _regeneratorRuntime2().wrap(function _callee2$(_context2) {
            while (1) switch (_context2.prev = _context2.next) {
              case 0:
                if (!(0 === _this2.selectedCards.length)) {
                  _context2.next = 2;
                  break;
                }
                return _context2.abrupt("return");
              case 2:
                _context2.next = 4;
                return _this2.showConfirm("确认删除", "\u786E\u5B9A\u8981\u5220\u9664\u9009\u4E2D\u7684 ".concat(_this2.selectedCards.length, " \u5F20\u5361\u7247\u5417\uFF1F\u6B64\u64CD\u4F5C\u4E0D\u53EF\u64A4\u9500\u3002"));
              case 4:
                if (!_context2.sent) {
                  _context2.next = 14;
                  break;
                }
                _context2.prev = 5;
                _context2.next = 8;
                return _this2.deleteCards(_this2.selectedCards);
              case 8:
                _this2.cancelSelection();
                _context2.next = 14;
                break;
              case 11:
                _context2.prev = 11;
                _context2.t0 = _context2["catch"](5);
                console.error("删除卡片失败:", _context2.t0);
              case 14:
              case "end":
                return _context2.stop();
            }
          }, _callee2, null, [[5, 11]]);
        }))();
      },
      exportSelected: function exportSelected() {
        return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee3() {
          return _regeneratorRuntime2().wrap(function _callee3$(_context3) {
            while (1) switch (_context3.prev = _context3.next) {
              case 0:
                e.index.showToast({
                  title: "功能开发中",
                  icon: "none"
                });
              case 1:
              case "end":
                return _context3.stop();
            }
          }, _callee3);
        }))();
      },
      importFromFile: function importFromFile() {
        var _this3 = this;
        return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee4() {
          var _t, _a;
          return _regeneratorRuntime2().wrap(function _callee4$(_context4) {
            while (1) switch (_context4.prev = _context4.next) {
              case 0:
                _this3.showAddMenu = !1;
                _context4.prev = 1;
                _context4.next = 4;
                return _this3.chooseFile();
              case 4:
                _t = _context4.sent;
                if (_t) {
                  _context4.next = 7;
                  break;
                }
                return _context4.abrupt("return", void console.log("[Cards] 用户取消文件选择"));
              case 7:
                console.log("[Cards] \u7528\u6237\u9009\u62E9\u6587\u4EF6: ".concat(_t.name));
                e.index.showLoading({
                  title: "正在导入...",
                  mask: !0
                });
                _context4.next = 11;
                return _this3.processImportFile(_t);
              case 11:
                e.index.hideLoading();
                e.index.showToast({
                  title: "导入成功",
                  icon: "success",
                  duration: 2e3
                });
                _context4.next = 20;
                break;
              case 15:
                _context4.prev = 15;
                _context4.t0 = _context4["catch"](1);
                e.index.hideLoading(), console.error("[Cards] 文件导入失败:", _context4.t0);
                _a = "导入失败";
                _context4.t0.message && (_a = _context4.t0.message.includes("格式不支持") ? "文件格式不支持，请选择 JSON、Dump、Bin 或 NFC 格式的文件" : _context4.t0.message.includes("文件过大") ? "文件过大，请选择小于10MB的文件" : _context4.t0.message.includes("文件为空") ? "文件内容为空，请选择有效的卡片数据文件" : _context4.t0.message.includes("没有找到有效的卡片数据") ? "文件中没有找到有效的卡片数据，请检查文件内容" : _context4.t0.message), e.index.showModal({
                  title: "导入失败",
                  content: _a,
                  showCancel: !1,
                  confirmText: "确定"
                });
              case 20:
              case "end":
                return _context4.stop();
            }
          }, _callee4, null, [[1, 15]]);
        }))();
      },
      importFromSlot: function importFromSlot() {
        var _this4 = this;
        return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee6() {
          var t, a;
          return _regeneratorRuntime2().wrap(function _callee6$(_context6) {
            while (1) switch (_context6.prev = _context6.next) {
              case 0:
                _this4.showAddMenu = !1;
                t = _this4.$store.state.slots.slots.filter(function (e, t) {
                  return e.enabled;
                });
                if (!(0 === t.length)) {
                  _context6.next = 4;
                  break;
                }
                return _context6.abrupt("return", void e.index.showToast({
                  title: "没有可用的卡槽",
                  icon: "none"
                }));
              case 4:
                a = t.map(function (e, t) {
                  return "\u5361\u69FD".concat(t + 1, ": ").concat(e.name || "未命名");
                });
                e.index.showActionSheet({
                  itemList: a,
                  success: function () {
                    var _success = _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee5(e) {
                      var _t2;
                      return _regeneratorRuntime2().wrap(function _callee5$(_context5) {
                        while (1) switch (_context5.prev = _context5.next) {
                          case 0:
                            _context5.prev = 0;
                            _t2 = e.tapIndex;
                            _context5.next = 4;
                            return _this4.importCardFromSlot(_t2);
                          case 4:
                            _context5.next = 9;
                            break;
                          case 6:
                            _context5.prev = 6;
                            _context5.t0 = _context5["catch"](0);
                            console.error("从卡槽导入失败:", _context5.t0);
                          case 9:
                          case "end":
                            return _context5.stop();
                        }
                      }, _callee5, null, [[0, 6]]);
                    }));
                    function success(_x) {
                      return _success.apply(this, arguments);
                    }
                    return success;
                  }()
                });
              case 6:
              case "end":
                return _context6.stop();
            }
          }, _callee6);
        }))();
      },
      deployCard: function deployCard(t) {
        var _this5 = this;
        return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee8() {
          var a;
          return _regeneratorRuntime2().wrap(function _callee8$(_context8) {
            while (1) switch (_context8.prev = _context8.next) {
              case 0:
                a = _this5.$store.state.slots.slots.map(function (e, t) {
                  return "\u5361\u69FD".concat(t + 1, ": ").concat(e.name || "空闲").concat(e.enabled ? " (已占用)" : "");
                });
                e.index.showActionSheet({
                  itemList: a,
                  success: function () {
                    var _success2 = _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee7(e) {
                      var _a2;
                      return _regeneratorRuntime2().wrap(function _callee7$(_context7) {
                        while (1) switch (_context7.prev = _context7.next) {
                          case 0:
                            _context7.prev = 0;
                            _a2 = e.tapIndex;
                            _context7.next = 4;
                            return _this5.deployCardToSlot({
                              cardId: t.id,
                              slotIndex: _a2
                            });
                          case 4:
                            _context7.next = 9;
                            break;
                          case 6:
                            _context7.prev = 6;
                            _context7.t0 = _context7["catch"](0);
                            console.error("部署卡片失败:", _context7.t0);
                          case 9:
                          case "end":
                            return _context7.stop();
                        }
                      }, _callee7, null, [[0, 6]]);
                    }));
                    function success(_x2) {
                      return _success2.apply(this, arguments);
                    }
                    return success;
                  }()
                });
              case 2:
              case "end":
                return _context8.stop();
            }
          }, _callee8);
        }))();
      },
      showCardMenu: function showCardMenu(t) {
        var _this6 = this;
        e.index.showActionSheet({
          itemList: ["写卡", "编辑", "复制", "导出", "删除"],
          success: function success(a) {
            switch (a.tapIndex) {
              case 0:
                _this6.writeCard(t);
                break;
              case 1:
                e.index.navigateTo({
                  url: "/pages/card-detail/card-detail?id=".concat(t.id, "&mode=edit")
                });
                break;
              case 2:
                _this6.duplicateCard(t);
                break;
              case 3:
                _this6.exportCard(t);
                break;
              case 4:
                _this6.confirmDeleteCard(t);
            }
          }
        });
      },
      duplicateCard: function duplicateCard(e) {
        var _this7 = this;
        return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee9() {
          var _t3;
          return _regeneratorRuntime2().wrap(function _callee9$(_context9) {
            while (1) switch (_context9.prev = _context9.next) {
              case 0:
                _context9.prev = 0;
                _t3 = _objectSpread2(_objectSpread2({}, e), {}, {
                  id: void 0,
                  name: "".concat(e.name, " - \u526F\u672C"),
                  createdAt: void 0,
                  modifiedAt: void 0
                });
                _context9.next = 4;
                return _this7.createCard(_t3);
              case 4:
                _context9.next = 9;
                break;
              case 6:
                _context9.prev = 6;
                _context9.t0 = _context9["catch"](0);
                console.error("复制卡片失败:", _context9.t0);
              case 9:
              case "end":
                return _context9.stop();
            }
          }, _callee9, null, [[0, 6]]);
        }))();
      },
      exportCard: function exportCard(t) {
        return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee10() {
          return _regeneratorRuntime2().wrap(function _callee10$(_context10) {
            while (1) switch (_context10.prev = _context10.next) {
              case 0:
                e.index.showToast({
                  title: "功能开发中",
                  icon: "none"
                });
              case 1:
              case "end":
                return _context10.stop();
            }
          }, _callee10);
        }))();
      },
      writeCard: function writeCard(t) {
        t.data && 0 !== t.data.length ? (console.log("[Cards] 准备写入卡片:", t.name), e.index.navigateTo({
          url: "/pages/card-write/card-write?cardId=".concat(t.id)
        })) : e.index.showToast({
          title: "该卡片没有可写入的数据",
          icon: "none"
        });
      },
      confirmDeleteCard: function confirmDeleteCard(e) {
        var _this8 = this;
        return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee11() {
          return _regeneratorRuntime2().wrap(function _callee11$(_context11) {
            while (1) switch (_context11.prev = _context11.next) {
              case 0:
                _context11.next = 2;
                return _this8.showConfirm("确认删除", "\u786E\u5B9A\u8981\u5220\u9664\u5361\u7247\"".concat(e.name, "\"\u5417\uFF1F\u6B64\u64CD\u4F5C\u4E0D\u53EF\u64A4\u9500\u3002"));
              case 2:
                if (!_context11.sent) {
                  _context11.next = 11;
                  break;
                }
                _context11.prev = 3;
                _context11.next = 6;
                return _this8.deleteCard(e.id);
              case 6:
                _context11.next = 11;
                break;
              case 8:
                _context11.prev = 8;
                _context11.t0 = _context11["catch"](3);
                console.error("删除卡片失败:", _context11.t0);
              case 11:
              case "end":
                return _context11.stop();
            }
          }, _callee11, null, [[3, 8]]);
        }))();
      },
      getCategoryIcon: function getCategoryIcon(e) {
        return {
          list: "list",
          creditcard: "wallet",
          tag: "tags",
          key: "locked",
          shield: "checkmarkempty",
          chip: "gear",
          dots: "more-filled"
        }[e] || "paperplane";
      },
      getTypeIcon: function getTypeIcon(e) {
        if (this.$CardDataUtils) {
          var _t4 = this.$CardDataUtils.getTypeInfo(e);
          return this.getCategoryIcon(_t4.icon);
        }
        return "paperplane";
      },
      getTypeName: function getTypeName(e) {
        if (this.$CardDataUtils) {
          return this.$CardDataUtils.getTypeInfo(e).name;
        }
        return "未知类型";
      },
      formatUID: function formatUID(e) {
        return e ? e.replace(/(.{2})/g, "$1 ").trim().substring(0, 11) + (e.length > 8 ? "..." : "") : "";
      },
      formatSize: function formatSize(e) {
        return this.$CardDataUtils ? this.$CardDataUtils.formatSize(e) : "".concat(e, " B");
      },
      getCardSize: function getCardSize(e) {
        return JSON.stringify(e.data || {}).length;
      },
      formatTime: function formatTime(e) {
        var t = new Date(e),
          a = new Date() - t;
        return a < 6e4 ? "刚刚" : a < 36e5 ? "".concat(Math.floor(a / 6e4), "\u5206\u949F\u524D") : a < 864e5 ? "".concat(Math.floor(a / 36e5), "\u5C0F\u65F6\u524D") : a < 6048e5 ? "".concat(Math.floor(a / 864e5), "\u5929\u524D") : t.toLocaleDateString();
      },
      showConfirm: function () {
        var _showConfirm = _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee12(t, a) {
          return _regeneratorRuntime2().wrap(function _callee12$(_context12) {
            while (1) switch (_context12.prev = _context12.next) {
              case 0:
                return _context12.abrupt("return", new Promise(function (s) {
                  e.index.showModal({
                    title: t,
                    content: a,
                    success: function success(e) {
                      s(e.confirm);
                    }
                  });
                }));
              case 1:
              case "end":
                return _context12.stop();
            }
          }, _callee12);
        }));
        function showConfirm(_x3, _x4) {
          return _showConfirm.apply(this, arguments);
        }
        return showConfirm;
      }(),
      loadMore: function loadMore() {},
      chooseFile: function () {
        var _chooseFile = _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee13() {
          return _regeneratorRuntime2().wrap(function _callee13$(_context13) {
            while (1) switch (_context13.prev = _context13.next) {
              case 0:
                return _context13.abrupt("return", new Promise(function (t, a) {
                  e.index.chooseMessageFile({
                    count: 1,
                    type: "file",
                    success: function success(s) {
                      var r = s.tempFiles[0];
                      if (r) {
                        r.name.toLowerCase().split(".").pop();
                        var _s = e.index.getFileSystemManager();
                        if (!r.path || 0 === r.size) return void a(new Error("文件为空或无效"));
                        console.log("[Cards] \u5FAE\u4FE1\u5C0F\u7A0B\u5E8F\u8BFB\u53D6\u6587\u4EF6: ".concat(r.name, ", \u8DEF\u5F84: ").concat(r.path, ", \u5927\u5C0F: ").concat(r.size)), _s.readFile({
                          filePath: r.path,
                          success: function success(e) {
                            var s = e.data;
                            if (!s || 0 === s.byteLength) return void a(new Error("文件内容为空"));
                            var o = new Uint8Array(s);
                            console.log("[Cards] \u6587\u4EF6\u8BFB\u53D6\u6210\u529F\uFF0C\u4E8C\u8FDB\u5236\u5927\u5C0F: ".concat(o.length, " \u5B57\u8282"));
                            var i = r.name.toLowerCase().split(".").pop();
                            if ("bin" === i || "dump" === i) t({
                              name: r.name,
                              content: s,
                              size: r.size
                            });else try {
                              var _e = new TextDecoder("utf-8").decode(o);
                              t({
                                name: r.name,
                                content: _e,
                                size: r.size
                              });
                            } catch (n) {
                              console.log("[Cards] \u6587\u672C\u89E3\u7801\u5931\u8D25\uFF0C\u4F5C\u4E3A\u4E8C\u8FDB\u5236\u5904\u7406: ".concat(n.message)), t({
                                name: r.name,
                                content: s,
                                size: r.size
                              });
                            }
                          },
                          fail: function fail(e) {
                            console.error("[Cards] \u6587\u4EF6\u8BFB\u53D6\u5931\u8D25: ".concat(JSON.stringify(e))), a(new Error("\u6587\u4EF6\u8BFB\u53D6\u5931\u8D25: ".concat(e.errMsg || "未知错误")));
                          }
                        });
                      } else t(null);
                    },
                    fail: function fail(e) {
                      console.error("[Cards] \u5FAE\u4FE1\u5C0F\u7A0B\u5E8F\u9009\u62E9\u6587\u4EF6\u5931\u8D25: ".concat(JSON.stringify(e))), a(new Error("\u6587\u4EF6\u9009\u62E9\u5931\u8D25: ".concat(e.errMsg || "未知错误")));
                    }
                  });
                }));
              case 1:
              case "end":
                return _context13.stop();
            }
          }, _callee13);
        }));
        function chooseFile() {
          return _chooseFile.apply(this, arguments);
        }
        return chooseFile;
      }(),
      processImportFile: function processImportFile(t) {
        var _this9 = this;
        return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee14() {
          var s, r, o, l, c, h, _e2, _t5, g, p, m, _e3, _t6, _t7, _a3;
          return _regeneratorRuntime2().wrap(function _callee14$(_context14) {
            while (1) switch (_context14.prev = _context14.next) {
              case 0:
                s = null, r = !1, o = !1;
                _context14.prev = 1;
                if (!(console.log("[Cards] \u5F00\u59CB\u5904\u7406\u6587\u4EF6\u5BFC\u5165 - \u6587\u4EF6\u540D: ".concat(t.name, ", \u5927\u5C0F: ").concat(t.size)), s = _this9.showProgressDialog("卡片导入", "正在检查文件..."), t.size > 10485760)) {
                  _context14.next = 4;
                  break;
                }
                throw new Error("文件过大，请选择小于10MB的文件");
              case 4:
                _this9.updateProgressDialog(s, "正在检测文件格式...");
                _context14.prev = 5;
                l = a.CardImportExport.detectFormat(t.content, t.name), r = !0, console.log("[Cards] \u68C0\u6D4B\u5230\u6587\u4EF6\u683C\u5F0F: ".concat(l));
                _context14.next = 12;
                break;
              case 9:
                _context14.prev = 9;
                _context14.t0 = _context14["catch"](5);
                throw console.error("[Cards] 文件格式检测失败:", _context14.t0), new Error("\u6587\u4EF6\u683C\u5F0F\u4E0D\u652F\u6301: ".concat(_context14.t0.message));
              case 12:
                _this9.updateProgressDialog(s, "\u6B63\u5728\u89E3\u6790".concat(_this9.getFormatName(l), "\u683C\u5F0F\u6587\u4EF6..."));
                _context14.prev = 13;
                c = a.CardImportExport.importCards(t.content, l, t.name), o = !0, console.log("[Cards] 文件解析完成");
                _context14.next = 20;
                break;
              case 17:
                _context14.prev = 17;
                _context14.t1 = _context14["catch"](13);
                throw console.error("[Cards] 文件解析失败:", _context14.t1), new Error("\u6587\u4EF6\u89E3\u6790\u5931\u8D25: ".concat(_context14.t1.message));
              case 20:
                if (!(c && c.needsUidSelection)) {
                  _context14.next = 26;
                  break;
                }
                console.log("[Cards] 需要用户选择UID长度");
                s && _this9.closeProgressDialog(s);
                _context14.next = 25;
                return _this9.showUidSelectionDialog(c);
              case 25:
                return _context14.abrupt("return", void _context14.sent);
              case 26:
                h = Array.isArray(c) ? c : [c];
                if (!(!h || 0 === h.length)) {
                  _context14.next = 29;
                  break;
                }
                throw new Error("文件中没有找到有效的卡片数据，请检查文件格式是否正确");
              case 29:
                _this9.updateProgressDialog(s, "\u89E3\u6790\u51FA ".concat(h.length, " \u5F20\u5361\u7247\uFF0C\u6B63\u5728\u5904\u7406..."));
                for (_e2 = 0; _e2 < h.length; _e2++) {
                  _t5 = h[_e2];
                  _t5.name && _t5.uid || (console.warn("[Cards] \u5361\u7247 ".concat(_e2 + 1, " \u6570\u636E\u4E0D\u5B8C\u6574:"), _t5), _t5.name || (_t5.name = "\u5BFC\u5165\u5361\u7247 ".concat(_e2 + 1)), _t5.uid || (_t5.uid = "00 00 00 00"));
                }
                g = 0, p = [];
                m = h.length;
                _e3 = 0;
              case 34:
                if (!(_e3 < h.length)) {
                  _context14.next = 49;
                  break;
                }
                _t6 = h[_e3];
                _this9.updateProgressDialog(s, "\u5BFC\u5165\u5361\u7247 (".concat(_e3 + 1, "/").concat(m, "): ").concat(_t6.name || "无名卡片"), _e3 / m * 100);
                _context14.prev = 37;
                _context14.next = 40;
                return _this9.createCard(_t6);
              case 40:
                g++;
                _context14.next = 46;
                break;
              case 43:
                _context14.prev = 43;
                _context14.t2 = _context14["catch"](37);
                console.error("[Cards] 创建卡片失败:", _context14.t2, _t6), p.push({
                  name: _t6.name || "无名卡片",
                  error: _context14.t2.message || "创建失败"
                });
              case 46:
                _e3++;
                _context14.next = 34;
                break;
              case 49:
                if (!(s && _this9.closeProgressDialog(s), s = null, 0 === g)) {
                  _context14.next = 51;
                  break;
                }
                throw new Error("所有卡片创建失败，请检查卡片数据格式");
              case 51:
                g < h.length ? (console.warn("[Cards] \u90E8\u5206\u5361\u7247\u5BFC\u5165\u5931\u8D25: \u6210\u529F ".concat(g, "/").concat(h.length)), _this9.showImportResultDialog("部分导入成功", "\u5171 ".concat(h.length, " \u5F20\u5361\u7247\uFF0C\u6210\u529F\u5BFC\u5165 ").concat(g, " \u5F20\uFF0C\u5931\u8D25 ").concat(p.length, " \u5F20\u3002"), p)) : e.index.showModal({
                  title: "导入成功",
                  content: "\u6210\u529F\u5BFC\u5165\u4E86 ".concat(g, " \u5F20\u5361\u7247\u3002"),
                  showCancel: !1,
                  confirmText: "完成"
                }), console.log("[Cards] \u6210\u529F\u5BFC\u5165 ".concat(g, " \u5F20\u5361\u7247"));
                _context14.next = 59;
                break;
              case 54:
                _context14.prev = 54;
                _context14.t3 = _context14["catch"](1);
                s && _this9.closeProgressDialog(s), console.error("[Cards] 文件导入失败:", _context14.t3);
                _t7 = "导入失败", _a3 = "导入过程中发生错误";
                r ? o ? (_t7 = "卡片创建失败", _context14.t3.message && (_a3 = _context14.t3.message.includes("所有卡片创建失败") ? "所有卡片创建失败，请检查卡片数据格式\n\n可能的原因：\n1. 卡片数据不完整\n2. 卡片类型不受支持\n3. 卡片数据已损坏" : _context14.t3.message)) : (_t7 = "文件解析失败", _context14.t3.message && (_a3 = _context14.t3.message.includes("没有找到有效的卡片数据") ? "文件中没有找到有效的卡片数据，请检查文件内容\n\n如果这是一个有效的卡片文件，请联系我们并提供样例" : _context14.t3.message.includes("解析失败") ? "\u6587\u4EF6\u89E3\u6790\u5931\u8D25: ".concat(_context14.t3.message.replace("文件解析失败: ", ""), "\n\n\u8BF7\u68C0\u67E5\u6587\u4EF6\u683C\u5F0F\u662F\u5426\u6B63\u786E") : _context14.t3.message)) : (_t7 = "文件格式检测失败", _context14.t3.message && (_a3 = _context14.t3.message.includes("格式不支持") ? "文件格式不支持，请选择 JSON、Dump、Bin 或 NFC 格式的文件\n\n支持格式包括：\n- 卡片包JSON\n- Chameleon Dump\n- Mifare Classic dump\n- Proxmark3 dump\n- Flipper NFC\n- 原始二进制" : _context14.t3.message.includes("文件过大") ? "文件过大，请选择小于10MB的文件" : _context14.t3.message.includes("文件为空") ? "文件内容为空，请选择有效的卡片数据文件" : _context14.t3.message)), e.index.showModal({
                  title: _t7,
                  content: _a3,
                  showCancel: !1,
                  confirmText: "确定"
                });
              case 59:
              case "end":
                return _context14.stop();
            }
          }, _callee14, null, [[1, 54], [5, 9], [13, 17], [37, 43]]);
        }))();
      },
      showProgressDialog: function showProgressDialog(t, a) {
        var s = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;
        return e.index.showLoading({
          title: a || t,
          mask: !0
        }), {
          title: t,
          message: a,
          progress: s,
          timestamp: Date.now()
        };
      },
      updateProgressDialog: function updateProgressDialog(t, a) {
        var s = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : -1;
        t && (t.message = a, s >= 0 && (t.progress = s), e.index.showLoading({
          title: a,
          mask: !0
        }));
      },
      closeProgressDialog: function closeProgressDialog(t) {
        t && e.index.hideLoading();
      },
      showImportResultDialog: function showImportResultDialog(t, a) {
        var s = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];
        var r = a + "\n\n";
        if (s.length > 0) {
          var _e4 = s.slice(0, 5);
          r += "失败的卡片：\n", _e4.forEach(function (e, t) {
            r += "".concat(t + 1, ". ").concat(e.name, ": ").concat(e.error, "\n");
          }), s.length > 5 && (r += "... \u53CA\u5176\u4ED6 ".concat(s.length - 5, " \u5F20\n"));
        }
        e.index.showModal({
          title: t,
          content: r,
          showCancel: !1,
          confirmText: "完成"
        });
      },
      getFormatName: function getFormatName(e) {
        return {
          json: "JSON",
          dump: "Dump",
          bin: "二进制",
          proxmark3: "Proxmark3",
          flipper: "Flipper NFC",
          mct: "Mifare Classic Tool",
          plain_hex: "十六进制"
        }[e] || e;
      },
      showUidSelectionDialog: function showUidSelectionDialog(t) {
        var _this10 = this;
        return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee16() {
          var s, r, o, i, n, d, l, c, h, g;
          return _regeneratorRuntime2().wrap(function _callee16$(_context16) {
            while (1) switch (_context16.prev = _context16.next) {
              case 0:
                s = t.tagType, r = t.cardName, o = t.bytes, i = o.slice(0, 4).map(function (e) {
                  return e.toString(16).padStart(2, "0");
                }).join(" ").toUpperCase();
                n = "";
                if (136 === o[0] && o.length >= 14) {
                  n = [].concat(_toConsumableArray2(o.slice(1, 4)), _toConsumableArray2(o.slice(4, 8))).map(function (e) {
                    return e.toString(16).padStart(2, "0");
                  }).join(" ").toUpperCase();
                } else n = o.slice(0, 7).map(function (e) {
                  return e.toString(16).padStart(2, "0");
                }).join(" ").toUpperCase();
                d = null, l = null;
                o.length > 5 && (d = o[5]), o.length > 7 && (l = [o[7], o[6]]);
                c = a.CardImportExport.getDefaultSAK(s, 7), h = a.CardImportExport.getDefaultATQA(s, 7), g = "\u68C0\u6D4B\u5230".concat(_this10.getTagTypeName(s), "\u5361\u7247\u6570\u636E\uFF0C\u8BF7\u9009\u62E9UID\u957F\u5EA6\uFF1A\n\n4\u4F4DUID: ").concat(i, "\nSAK: ").concat(null !== d ? "0x" + d.toString(16).padStart(2, "0") + " (从数据提取)" : "未知", "\nATQA: ").concat(null !== l ? l.map(function (e) {
                  return e.toString(16).padStart(2, "0");
                }).join(" ") + " (从数据提取)" : "未知", "\n\n7\u4F4DUID: ").concat(n, "\nSAK: 0x").concat(c.toString(16).padStart(2, "0"), " (\u9ED8\u8BA4\u503C)\nATQA: ").concat(h.map(function (e) {
                  return e.toString(16).padStart(2, "0");
                }).join(" "), " (\u9ED8\u8BA4\u503C)\n\n\u6CE8\u610F\uFF1A4\u4F4DUID\u7684SAK\u548CATQA\u4ECE\u5361\u7247\u6570\u636E\u4E2D\u63D0\u53D6\uFF0C7\u4F4DUID\u4F7F\u7528\u9ED8\u8BA4\u503C\u3002");
                return _context16.abrupt("return", new Promise(function (s) {
                  e.index.showModal({
                    title: "选择UID长度",
                    content: g,
                    showCancel: !0,
                    cancelText: "7位UID",
                    confirmText: "4位UID",
                    success: function () {
                      var _success3 = _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee15(o) {
                        var _i, _n;
                        return _regeneratorRuntime2().wrap(function _callee15$(_context15) {
                          while (1) switch (_context15.prev = _context15.next) {
                            case 0:
                              _context15.prev = 0;
                              _i = o.confirm ? 4 : 7, _n = a.CardImportExport.createCardWithUidLength(t, _i, r);
                              _context15.next = 4;
                              return _this10.createCard(_n);
                            case 4:
                              e.index.showToast({
                                title: "\u6210\u529F\u5BFC\u5165".concat(_i, "\u4F4DUID\u5361\u7247"),
                                icon: "success"
                              });
                              console.log("\u6210\u529F\u5BFC\u5165\u5361\u7247\uFF0CUID\u957F\u5EA6: ".concat(_i, "\u4F4D, UID: ").concat(_n.uid, ", SAK: 0x").concat(_n.sak.toString(16).padStart(2, "0"), ", ATQA: ").concat(_n.atqa.map(function (e) {
                                return e.toString(16).padStart(2, "0");
                              }).join(" ")));
                              s();
                              _context15.next = 12;
                              break;
                            case 9:
                              _context15.prev = 9;
                              _context15.t0 = _context15["catch"](0);
                              console.error("创建卡片失败:", _context15.t0), e.index.showToast({
                                title: "导入失败",
                                icon: "error"
                              }), s();
                            case 12:
                            case "end":
                              return _context15.stop();
                          }
                        }, _callee15, null, [[0, 9]]);
                      }));
                      function success(_x5) {
                        return _success3.apply(this, arguments);
                      }
                      return success;
                    }(),
                    fail: function fail() {
                      s();
                    }
                  });
                }));
              case 7:
              case "end":
                return _context16.stop();
            }
          }, _callee16);
        }))();
      },
      getTagTypeName: function getTagTypeName(e) {
        var _t$TagType$MIFARE_;
        return (_t$TagType$MIFARE_ = {}, _defineProperty2(_t$TagType$MIFARE_, t.TagType.MIFARE_1024, "Mifare Classic 1K"), _defineProperty2(_t$TagType$MIFARE_, t.TagType.MIFARE_2048, "Mifare Classic 2K"), _defineProperty2(_t$TagType$MIFARE_, t.TagType.MIFARE_4096, "Mifare Classic 4K"), _defineProperty2(_t$TagType$MIFARE_, t.TagType.NTAG_213, "NTAG213"), _defineProperty2(_t$TagType$MIFARE_, t.TagType.NTAG_215, "NTAG215"), _defineProperty2(_t$TagType$MIFARE_, t.TagType.NTAG_216, "NTAG216"), _defineProperty2(_t$TagType$MIFARE_, t.TagType.EM410X, "EM410X"), _t$TagType$MIFARE_)[e] || "未知类型";
      },
      showAddCardForm: function showAddCardForm() {
        this.isEditing = !1, this.resetCardForm(), this.showCardEdit = !0;
      },
      editCard: function editCard(e) {
        this.isEditing = !0, this.currentCard = e, this.cardForm = {
          id: e.id,
          name: e.name,
          tag: e.tag,
          uid: e.uid,
          sak: e.sak ? e.sak.toString(16).padStart(2, "0") : "",
          atqa: e.atqa ? Array.from(e.atqa).map(function (e) {
            return e.toString(16).padStart(2, "0");
          }).join(" ") : "",
          ats: e.ats ? Array.from(e.ats).map(function (e) {
            return e.toString(16).padStart(2, "0");
          }).join(" ") : "",
          color: e.color || "#007AFF"
        }, this.showCardEdit = !0;
      },
      saveCard: function saveCard() {
        var _this11 = this;
        return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee17() {
          var _t8;
          return _regeneratorRuntime2().wrap(function _callee17$(_context17) {
            while (1) switch (_context17.prev = _context17.next) {
              case 0:
                _context17.prev = 0;
                if (_this11.cardForm.name.trim()) {
                  _context17.next = 3;
                  break;
                }
                throw new Error("请输入卡片名称");
              case 3:
                if (_this11.cardForm.uid.trim()) {
                  _context17.next = 5;
                  break;
                }
                throw new Error("请输入UID");
              case 5:
                if (/^[0-9A-Fa-f\s]+$/.test(_this11.cardForm.uid)) {
                  _context17.next = 7;
                  break;
                }
                throw new Error("UID格式无效");
              case 7:
                _t8 = {
                  name: _this11.cardForm.name,
                  tag: _this11.cardForm.tag,
                  uid: _this11.cardForm.uid,
                  color: _this11.cardForm.color
                };
                _this11.isHFCard && (_this11.cardForm.sak && (_t8.sak = parseInt(_this11.cardForm.sak, 16)), _this11.cardForm.atqa && (_t8.atqa = new Uint8Array(_this11.cardForm.atqa.split(" ").filter(function (e) {
                  return e.trim();
                }).map(function (e) {
                  return parseInt(e, 16);
                }))), _this11.cardForm.ats && (_t8.ats = new Uint8Array(_this11.cardForm.ats.split(" ").filter(function (e) {
                  return e.trim();
                }).map(function (e) {
                  return parseInt(e, 16);
                }))));
                if (!_this11.isEditing) {
                  _context17.next = 14;
                  break;
                }
                _context17.next = 12;
                return _this11.updateCard({
                  id: _this11.cardForm.id,
                  updates: _t8
                });
              case 12:
                _context17.next = 16;
                break;
              case 14:
                _context17.next = 16;
                return _this11.createCard(_t8);
              case 16:
                _this11.closeCardForm();
                e.index.showToast({
                  title: _this11.isEditing ? "卡片更新成功" : "卡片创建成功",
                  icon: "success"
                });
                _context17.next = 23;
                break;
              case 20:
                _context17.prev = 20;
                _context17.t0 = _context17["catch"](0);
                console.error("[Cards] 保存卡片失败:", _context17.t0), e.index.showToast({
                  title: _context17.t0.message || "保存失败",
                  icon: "error"
                });
              case 23:
              case "end":
                return _context17.stop();
            }
          }, _callee17, null, [[0, 20]]);
        }))();
      },
      closeCardForm: function closeCardForm() {
        this.showCardEdit = !1, this.resetCardForm();
      },
      resetCardForm: function resetCardForm() {
        this.cardForm = {
          id: "",
          name: "",
          tag: t.TagType.UNKNOWN,
          uid: "",
          sak: "",
          atqa: "",
          ats: "",
          color: "#007AFF"
        }, this.currentCard = null;
      },
      cloneCardAction: function cloneCardAction(t) {
        var _this12 = this;
        return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee18() {
          var _a4;
          return _regeneratorRuntime2().wrap(function _callee18$(_context18) {
            while (1) switch (_context18.prev = _context18.next) {
              case 0:
                _context18.prev = 0;
                _a4 = "".concat(t.name, " (\u526F\u672C)");
                _context18.next = 4;
                return _this12.cloneCard({
                  id: t.id,
                  newName: _a4
                });
              case 4:
                e.index.showToast({
                  title: "卡片克隆成功",
                  icon: "success"
                });
                _context18.next = 10;
                break;
              case 7:
                _context18.prev = 7;
                _context18.t0 = _context18["catch"](0);
                console.error("[Cards] 克隆卡片失败:", _context18.t0), e.index.showToast({
                  title: "克隆失败",
                  icon: "error"
                });
              case 10:
              case "end":
                return _context18.stop();
            }
          }, _callee18, null, [[0, 7]]);
        }))();
      },
      deleteCardAction: function deleteCardAction(t) {
        var _this13 = this;
        return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee19() {
          return _regeneratorRuntime2().wrap(function _callee19$(_context19) {
            while (1) switch (_context19.prev = _context19.next) {
              case 0:
                _context19.prev = 0;
                _context19.next = 3;
                return e.index.showModal({
                  title: "确认删除",
                  content: "\u786E\u5B9A\u8981\u5220\u9664\u5361\u7247\"".concat(t.name, "\"\u5417\uFF1F\u6B64\u64CD\u4F5C\u4E0D\u53EF\u6062\u590D\u3002")
                });
              case 3:
                _context19.t0 = _context19.sent.confirm;
                if (!_context19.t0) {
                  _context19.next = 8;
                  break;
                }
                _context19.next = 7;
                return _this13.deleteCard(t.id);
              case 7:
                e.index.showToast({
                  title: "卡片删除成功",
                  icon: "success"
                });
              case 8:
                _context19.next = 13;
                break;
              case 10:
                _context19.prev = 10;
                _context19.t1 = _context19["catch"](0);
                console.error("[Cards] 删除卡片失败:", _context19.t1), e.index.showToast({
                  title: "删除失败",
                  icon: "error"
                });
              case 13:
              case "end":
                return _context19.stop();
            }
          }, _callee19, null, [[0, 10]]);
        }))();
      },
      formatDate: function formatDate(e) {
        if (!e) return "";
        return new Date(e).toLocaleDateString("zh-CN", {
          month: "short",
          day: "numeric",
          hour: "2-digit",
          minute: "2-digit"
        });
      },
      getCardTypeName: function getCardTypeName(e) {
        var t = this.cardTypeOptions.find(function (t) {
          return t.value === e;
        });
        return t ? t.label : "未知类型";
      },
      getCardIcon: function getCardIcon(e) {
        return 1 === e.getFrequency() ? "wifi" : "creditcard";
      }
    })
  };
if (!Array) {
  e.resolveComponent("uni-icons")();
}
Math;
var r = e._export_sfc(s, [["render", function (t, a, s, r, o, i) {
  return e.e({
    a: e.p({
      type: "search",
      size: "18",
      color: "#999999"
    }),
    b: e.o([function (e) {
      return o.searchKeyword = e.detail.value;
    }, function () {
      return i.onSearch && i.onSearch.apply(i, arguments);
    }]),
    c: o.searchKeyword,
    d: o.searchKeyword
  }, o.searchKeyword ? {
    e: e.p({
      type: "clear",
      size: "16",
      color: "#999999"
    }),
    f: e.o(function () {
      return i.clearSearch && i.clearSearch.apply(i, arguments);
    })
  } : {}, {
    g: e.p({
      type: "bars",
      size: "20",
      color: "#666666"
    }),
    h: e.o(function (e) {
      return o.showSortMenu = !0;
    }),
    i: e.p({
      type: "plus",
      size: "20",
      color: "#666666"
    }),
    j: e.o(function (e) {
      return o.showAddMenu = !0;
    }),
    k: e.f(t.categories, function (a, s, r) {
      return {
        a: "c46d9c99-4-" + r,
        b: e.p({
          type: i.getCategoryIcon(a.icon),
          size: "18",
          color: "inherit"
        }),
        c: e.t(a.name),
        d: e.t(a.count),
        e: a.id,
        f: e.n({
          active: t.currentCategory === a.id
        }),
        g: e.o(function (e) {
          return i.selectCategory(a.id);
        }, a.id)
      };
    }),
    l: e.t(t.statistics.totalCards),
    m: e.t(i.formatSize(t.statistics.totalSize)),
    n: o.selectedCards.length > 0
  }, o.selectedCards.length > 0 ? {
    o: e.t(o.selectedCards.length)
  } : {}, {
    p: "grid" === t.viewMode
  }, "grid" === t.viewMode ? {
    q: e.f(i.displayCards, function (t, a, s) {
      return e.e(o.isSelecting ? e.e({
        a: o.selectedCards.includes(t.id)
      }, o.selectedCards.includes(t.id) ? {
        b: "c46d9c99-5-" + s,
        c: e.p({
          type: "checkmarkempty",
          size: "16",
          color: "#ffffff"
        })
      } : {}, {
        d: e.n({
          checked: o.selectedCards.includes(t.id)
        })
      }) : {}, {
        e: "c46d9c99-6-" + s,
        f: e.p({
          type: i.getTypeIcon(t.type),
          size: "24",
          color: "#ffffff"
        }),
        g: e.n("type-".concat(t.type)),
        h: t.favorite
      }, t.favorite ? {
        i: "c46d9c99-7-" + s,
        j: e.p({
          type: "star-filled",
          size: "18",
          color: "#FFD700"
        })
      } : {}, {
        k: e.t(t.name),
        l: e.t(i.getTypeName(t.type)),
        m: e.t(i.formatSize(i.getCardSize(t))),
        n: t.uid
      }, t.uid ? {
        o: e.t(i.formatUID(t.uid))
      } : {}, {
        p: t.tags && t.tags.length > 0
      }, t.tags && t.tags.length > 0 ? e.e({
        q: e.f(t.tags.slice(0, 2), function (t, a, s) {
          return {
            a: e.t(t),
            b: t
          };
        }),
        r: t.tags.length > 2
      }, t.tags.length > 2 ? {
        s: e.t(t.tags.length - 2)
      } : {}) : {}, {
        t: e.t(i.formatTime(t.modifiedAt || t.createdAt)),
        v: t.id,
        w: e.n({
          selected: o.selectedCards.includes(t.id)
        }),
        x: e.o(function (e) {
          return i.selectCard(t);
        }, t.id),
        y: e.o(function (e) {
          return i.toggleCardSelection(t.id);
        }, t.id)
      });
    }),
    r: o.isSelecting
  } : {
    s: e.f(i.displayCards, function (t, a, s) {
      return e.e(o.isSelecting ? e.e({
        a: o.selectedCards.includes(t.id)
      }, o.selectedCards.includes(t.id) ? {
        b: "c46d9c99-8-" + s,
        c: e.p({
          type: "checkmarkempty",
          size: "16",
          color: "#ffffff"
        })
      } : {}, {
        d: e.n({
          checked: o.selectedCards.includes(t.id)
        })
      }) : {}, {
        e: "c46d9c99-9-" + s,
        f: e.p({
          type: i.getTypeIcon(t.type),
          size: "32",
          color: "#000000"
        }),
        g: e.n("type-".concat(t.type)),
        h: e.t(t.name),
        i: t.favorite
      }, t.favorite ? {
        j: "c46d9c99-10-" + s,
        k: e.p({
          type: "star-filled",
          size: "16",
          color: "#FFD700"
        })
      } : {}, {
        l: e.t(i.getTypeName(t.type)),
        m: t.uid
      }, t.uid ? {
        n: e.t(i.formatUID(t.uid))
      } : {}, {
        o: t.description
      }, t.description ? {
        p: e.t(t.description)
      } : {}, {
        q: t.tags && t.tags.length > 0
      }, t.tags && t.tags.length > 0 ? {
        r: e.f(t.tags.slice(0, 3), function (t, a, s) {
          return {
            a: e.t(t),
            b: t
          };
        })
      } : {}, {
        s: e.t(i.formatTime(t.modifiedAt || t.createdAt)),
        t: "c46d9c99-11-" + s,
        v: e.o(function (e) {
          return i.deployCard(t);
        }, t.id),
        w: "c46d9c99-12-" + s,
        x: e.o(function (e) {
          return i.showCardMenu(t);
        }, t.id),
        y: t.id,
        z: e.n({
          selected: o.selectedCards.includes(t.id)
        }),
        A: e.o(function (e) {
          return i.selectCard(t);
        }, t.id),
        B: e.o(function (e) {
          return i.toggleCardSelection(t.id);
        }, t.id)
      });
    }),
    t: o.isSelecting,
    v: e.p({
      type: "upload",
      size: "18",
      color: "#666666"
    }),
    w: e.p({
      type: "more-filled",
      size: "18",
      color: "#666666"
    })
  }, {
    x: 0 === i.displayCards.length && !t.loading
  }, 0 !== i.displayCards.length || t.loading ? {} : e.e({
    y: e.p({
      type: "folder-add",
      size: "80",
      color: "#cccccc"
    }),
    z: e.t(o.searchKeyword ? "未找到匹配的卡片" : "暂无卡片数据"),
    A: !o.searchKeyword
  }, o.searchKeyword ? {} : {
    B: e.o(function (e) {
      return o.showAddMenu = !0;
    })
  }), {
    C: t.loading
  }, (t.loading, {}), {
    D: e.o(function () {
      return i.loadMore && i.loadMore.apply(i, arguments);
    }),
    E: o.isSelecting
  }, o.isSelecting ? {
    F: e.o(function () {
      return i.cancelSelection && i.cancelSelection.apply(i, arguments);
    }),
    G: e.t(o.selectedCards.length === i.displayCards.length ? "取消全选" : "全选"),
    H: e.o(function () {
      return i.selectAll && i.selectAll.apply(i, arguments);
    }),
    I: e.t(o.selectedCards.length),
    J: e.o(function () {
      return i.deleteSelected && i.deleteSelected.apply(i, arguments);
    }),
    K: 0 === o.selectedCards.length,
    L: e.t(o.selectedCards.length),
    M: e.o(function () {
      return i.exportSelected && i.exportSelected.apply(i, arguments);
    }),
    N: 0 === o.selectedCards.length
  } : {}, {
    O: o.showAddMenu
  }, o.showAddMenu ? {
    P: e.p({
      type: "close",
      size: "20",
      color: "#999999"
    }),
    Q: e.o(function (e) {
      return o.showAddMenu = !1;
    }),
    R: e.p({
      type: "upload",
      size: "24",
      color: "#007AFF"
    }),
    S: e.o(function () {
      return i.importFromFile && i.importFromFile.apply(i, arguments);
    }),
    T: e.p({
      type: "download",
      size: "24",
      color: "#007AFF"
    }),
    U: e.o(function () {
      return i.importFromSlot && i.importFromSlot.apply(i, arguments);
    }),
    V: e.o(function () {}),
    W: e.o(function (e) {
      return o.showAddMenu = !1;
    })
  } : {}, {
    X: o.showSortMenu
  }, o.showSortMenu ? e.e({
    Y: e.p({
      type: "close",
      size: "20",
      color: "#999999"
    }),
    Z: e.o(function (e) {
      return o.showSortMenu = !1;
    }),
    aa: e.f(o.sortOptions, function (a, s, r) {
      return e.e({
        a: e.t(a.label),
        b: t.sortBy === a.value
      }, t.sortBy === a.value ? {
        c: "c46d9c99-18-" + r,
        d: e.p({
          type: "checkmarkempty",
          size: "18",
          color: "#007AFF"
        })
      } : {}, {
        e: a.value,
        f: e.n({
          active: t.sortBy === a.value
        }),
        g: e.o(function (e) {
          return i.setSortBy(a.value);
        }, a.value)
      });
    }),
    ab: "asc" === t.sortOrder
  }, "asc" === t.sortOrder ? {
    ac: e.p({
      type: "checkmarkempty",
      size: "18",
      color: "#007AFF"
    })
  } : {}, {
    ad: e.n({
      active: "asc" === t.sortOrder
    }),
    ae: e.o(function (e) {
      return i.setSortOrder("asc");
    }),
    af: "desc" === t.sortOrder
  }, "desc" === t.sortOrder ? {
    ag: e.p({
      type: "checkmarkempty",
      size: "18",
      color: "#007AFF"
    })
  } : {}, {
    ah: e.n({
      active: "desc" === t.sortOrder
    }),
    ai: e.o(function (e) {
      return i.setSortOrder("desc");
    }),
    aj: e.o(function () {}),
    ak: e.o(function (e) {
      return o.showSortMenu = !1;
    })
  }) : {});
}], ["__scopeId", "data-v-c46d9c99"]]);
wx.createPage(r); 
 			}); 	require("pages/cards/cards.js");
 		__wxRoute = 'pages/card-detail/card-detail';__wxRouteBegin = true; 	__wxAppCurrentFile__ = 'pages/card-detail/card-detail.js';	define("pages/card-detail/card-detail.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";

var _typeof2 = require("../../@babel/runtime/helpers/typeof");
var _regeneratorRuntime2 = require("../../@babel/runtime/helpers/regeneratorRuntime");
var _asyncToGenerator2 = require("../../@babel/runtime/helpers/asyncToGenerator");
var _objectSpread2 = require("../../@babel/runtime/helpers/objectSpread2");
var a = require("../../common/vendor.js"),
  t = require("../../utils/chameleon-protocol.js"),
  e = {
    name: "CardDetail",
    components: {
      CardDataViewer: function CardDataViewer() {
        return "../../components/card-data-viewer/card-data-viewer.js";
      }
    },
    data: function data() {
      return {
        mode: "view",
        cardId: null,
        formData: {
          name: "",
          tag: t.TagType.UNKNOWN,
          uid: "",
          sak: "",
          atqa: "",
          ats: "",
          color: "#007AFF",
          data: []
        },
        newTag: "",
        sectorsText: "",
        pagesText: "",
        jsonDataText: "",
        isDataEditing: !1,
        hasUnsavedChanges: !1,
        uidError: "",
        jsonError: "",
        showActions: !1,
        cardTypes: [{
          value: t.TagType.EM410X,
          name: "EM410X"
        }, {
          value: t.TagType.MIFARE_1024,
          name: "Mifare Classic 1K"
        }, {
          value: t.TagType.MIFARE_2048,
          name: "Mifare Classic 2K"
        }, {
          value: t.TagType.MIFARE_4096,
          name: "Mifare Classic 4K"
        }, {
          value: t.TagType.NTAG_213,
          name: "NTAG213"
        }, {
          value: t.TagType.NTAG_215,
          name: "NTAG215"
        }, {
          value: t.TagType.NTAG_216,
          name: "NTAG216"
        }],
        colorOptions: [{
          value: "#007AFF",
          name: "蓝色"
        }, {
          value: "#FF3B30",
          name: "红色"
        }, {
          value: "#34C759",
          name: "绿色"
        }, {
          value: "#FF9500",
          name: "橙色"
        }, {
          value: "#AF52DE",
          name: "紫色"
        }, {
          value: "#FF2D92",
          name: "粉色"
        }, {
          value: "#5AC8FA",
          name: "青色"
        }, {
          value: "#FFCC00",
          name: "黄色"
        }]
      };
    },
    computed: _objectSpread2(_objectSpread2(_objectSpread2({}, a.mapState("cards", ["cards"])), a.mapGetters("cards", ["getCardById"])), {}, {
      isEditMode: function isEditMode() {
        return "edit" === this.mode;
      },
      card: function card() {
        return this.getCardById(this.cardId) || {};
      },
      typeInfo: function typeInfo() {
        var a = this.card.tag || this.formData.tag,
          t = this.cardTypes.find(function (t) {
            return t.value === a;
          });
        return {
          name: t ? t.name : "未知类型",
          color: this.card.color || this.formData.color || "#007AFF"
        };
      },
      selectedType: function selectedType() {
        var _this = this;
        return this.cardTypes.find(function (a) {
          return a.value === _this.formData.tag;
        }) || this.cardTypes[0];
      },
      selectedTypeIndex: function selectedTypeIndex() {
        var _this2 = this;
        return this.cardTypes.findIndex(function (a) {
          return a.value === _this2.formData.tag;
        });
      },
      isHFCard: function isHFCard() {
        return this.formData.tag !== t.TagType.EM410X;
      },
      isFormValid: function isFormValid() {
        return this.formData.name.trim().length > 0 && this.formData.uid.trim().length > 0 && /^[0-9A-Fa-f\s]+$/.test(this.formData.uid);
      }
    }),
    onLoad: function onLoad(a) {
      var _this3 = this;
      return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee() {
        return _regeneratorRuntime2().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              _this3.cardId = a.id;
              _this3.mode = a.mode || "view";
              _context.next = 4;
              return _this3.initCards();
            case 4:
              _this3.initViewMode();
            case 5:
            case "end":
              return _context.stop();
          }
        }, _callee);
      }))();
    },
    methods: _objectSpread2(_objectSpread2({}, a.mapActions("cards", ["initCards", "createCard", "updateCard", "deleteCard", "cloneCard", "exportCards", "deployCardToSlot"])), {}, {
      onCardDataChanged: function onCardDataChanged(t) {
        var _this4 = this;
        this.hasUnsavedChanges = !0, console.log("🔍 卡片数据变更 - 更新前原始卡片:", this.card), console.log("🔍 卡片数据变更 - 接收到的更新数据:", t), console.log("🔍 卡片数据变更 - 数据块数量:", t.data ? t.data.length : 0);
        var e = t.data.map(function (a, t) {
            if (a instanceof Uint8Array) return a;
            if (Array.isArray(a)) return new Uint8Array(a);
            if (a && "object" == _typeof2(a)) {
              console.warn("🔍 发现异常数据块格式:", a);
              var _e = Object.keys(a);
              if (_e.every(function (a) {
                return !isNaN(parseInt(a));
              })) {
                var _t = [];
                for (var _i = 0; _i < _e.length; _i++) _t[_i] = void 0 !== a[_i] ? a[_i] : 0;
                return new Uint8Array(_t);
              }
              {
                var _a = _this4.card.data && _this4.card.data[t];
                if (_a) {
                  if (_a instanceof Uint8Array) return _a;
                  if (Array.isArray(_a)) return new Uint8Array(_a);
                }
                return new Uint8Array(16);
              }
            }
            return console.warn("🔍 发现未知数据块格式:", a), new Uint8Array(16);
          }),
          i = {
            data: e,
            modifiedAt: new Date().toISOString()
          };
        console.log("🔍 卡片数据变更 - 原始数据类型检查:"), t.data.forEach(function (a, t) {
          console.log("  \u5757".concat(t, ": ").concat(a.constructor.name, ", \u957F\u5EA6: ").concat(a.length));
        }), console.log("🔍 卡片数据变更 - 处理后数据类型检查:"), e.forEach(function (a, t) {
          console.log("  \u5757".concat(t, ": ").concat(a.constructor.name, ", \u957F\u5EA6: ").concat(a.length));
        }), console.log("🔍 卡片数据变更 - 准备保存的updates:", i), this.updateCard({
          id: this.cardId,
          updates: i
        }).then(function () {
          _this4.hasUnsavedChanges = !1, console.log("🔍 卡片数据变更 - 保存后的卡片:", _this4.card), a.index.showToast({
            title: "卡片数据已保存",
            icon: "success"
          });
        }).catch(function (t) {
          console.error("🔍 卡片数据变更 - 保存失败:", t), a.index.showToast({
            title: "保存失败: " + t.message,
            icon: "none"
          });
        });
      },
      onEditStart: function onEditStart() {
        this.isDataEditing = !0;
      },
      onEditCancel: function onEditCancel() {
        this.isDataEditing = !1, this.hasUnsavedChanges = !1;
      },
      initViewMode: function initViewMode() {
        this.card && this.card.id ? this.loadCardData() : (a.index.showToast({
          title: "卡片不存在",
          icon: "error"
        }), setTimeout(function () {
          a.index.navigateBack();
        }, 1500));
      },
      loadCardData: function loadCardData() {
        this.formData = {
          name: this.card.name || "",
          tag: this.card.tag || t.TagType.UNKNOWN,
          uid: this.card.uid || "",
          sak: this.card.sak ? this.card.sak.toString(16).padStart(2, "0") : "",
          atqa: this.card.atqa ? Array.from(this.card.atqa).map(function (a) {
            return a.toString(16).padStart(2, "0");
          }).join(" ") : "",
          ats: this.card.ats ? Array.from(this.card.ats).map(function (a) {
            return a.toString(16).padStart(2, "0");
          }).join(" ") : "",
          color: this.card.color || "#007AFF",
          data: this.card.data || []
        }, this.card.sectors && (this.sectorsText = this.card.sectors.map(function (a) {
          return a.join(" ");
        }).join("\n")), this.card.pages && (this.pagesText = this.card.pages.join("\n")), this.jsonDataText = JSON.stringify(this.card.data || {}, null, 2);
      },
      toggleEditMode: function toggleEditMode() {
        this.isEditMode ? this.cancelEdit() : this.editCard();
      },
      editCard: function editCard() {
        this.mode = "edit", this.loadCardData(), this.showActions = !1;
      },
      cancelEdit: function cancelEdit() {
        this.mode = "view", this.loadCardData(), this.clearErrors();
      },
      saveCard: function saveCard() {
        var _this5 = this;
        return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee2() {
          var _t2, _e2;
          return _regeneratorRuntime2().wrap(function _callee2$(_context2) {
            while (1) switch (_context2.prev = _context2.next) {
              case 0:
                if (!_this5.isFormValid) {
                  _context2.next = 17;
                  break;
                }
                _context2.prev = 1;
                _t2 = _this5.validateCardData();
                if (_t2.isValid) {
                  _context2.next = 5;
                  break;
                }
                return _context2.abrupt("return", void a.index.showToast({
                  title: _t2.errors[0],
                  icon: "error"
                }));
              case 5:
                _e2 = _this5.prepareCardData();
                _context2.next = 8;
                return _this5.updateCard({
                  id: _this5.cardId,
                  updates: _e2
                });
              case 8:
                _this5.mode = "view";
                a.index.showToast({
                  title: "卡片更新成功",
                  icon: "success"
                });
                _context2.next = 15;
                break;
              case 12:
                _context2.prev = 12;
                _context2.t0 = _context2["catch"](1);
                console.error("保存卡片失败:", _context2.t0), a.index.showToast({
                  title: "保存失败",
                  icon: "error"
                });
              case 15:
                _context2.next = 18;
                break;
              case 17:
                a.index.showToast({
                  title: "请检查输入信息",
                  icon: "error"
                });
              case 18:
              case "end":
                return _context2.stop();
            }
          }, _callee2, null, [[1, 12]]);
        }))();
      },
      validateCardData: function validateCardData() {
        var a = [];
        return this.formData.name.trim() || a.push("卡片名称不能为空"), this.formData.uid.trim() ? /^[0-9A-Fa-f\s]+$/.test(this.formData.uid) || a.push("UID格式无效，只能包含十六进制字符和空格") : a.push("UID不能为空"), this.formData.tag === t.TagType.UNKNOWN && a.push("请选择卡片类型"), {
          isValid: 0 === a.length,
          errors: a
        };
      },
      prepareCardData: function prepareCardData() {
        var a = {
          name: this.formData.name.trim(),
          tag: this.formData.tag,
          uid: this.formData.uid.trim(),
          color: this.formData.color,
          data: this.formData.data || []
        };
        return this.isHFCard && (this.formData.sak && (a.sak = parseInt(this.formData.sak, 16)), this.formData.atqa && (a.atqa = new Uint8Array(this.formData.atqa.split(" ").filter(function (a) {
          return a.trim();
        }).map(function (a) {
          return parseInt(a, 16);
        }))), this.formData.ats && (a.ats = new Uint8Array(this.formData.ats.split(" ").filter(function (a) {
          return a.trim();
        }).map(function (a) {
          return parseInt(a, 16);
        })))), a;
      },
      onTypeChange: function onTypeChange(a) {
        var t = this.cardTypes[a.detail.value].value;
        this.formData.tag = t, this.clearTypeSpecificData();
      },
      clearTypeSpecificData: function clearTypeSpecificData() {
        this.formData.tag === t.TagType.EM410X && (this.formData.sak = "", this.formData.atqa = "", this.formData.ats = ""), this.clearErrors();
      },
      onUIDInput: function onUIDInput() {
        this.validateUID();
      },
      validateUID: function validateUID() {
        var a;
        if (this.uidError = "", !this.formData.uid) return;
        var t = this.formData.uid.replace(/\s/g, "");
        switch (this.formData.type) {
          case "mifare_classic":
          case "mifare_ultralight":
            /^[0-9A-Fa-f]{8,20}$/.test(t) || (this.uidError = "UID格式无效，应为4-10字节的十六进制数据");
            break;
          case "em410x":
            /^[0-9A-Fa-f]{10}$/.test(t) || (this.uidError = "EM410X UID应为5字节的十六进制数据");
        }
        if (!this.uidError && t.length > 0) {
          var _e3 = (null == (a = t.match(/.{2}/g)) ? void 0 : a.join(" ")) || t;
          this.formData.uid !== _e3 && (this.formData.uid = _e3);
        }
      },
      onSectorsInput: function onSectorsInput() {
        try {
          var _a2 = this.sectorsText.split("\n").filter(function (a) {
            return a.trim();
          });
          this.formData.sectors = _a2.map(function (a) {
            return a.trim().split(/\s+/).filter(function (a) {
              return a;
            });
          });
        } catch (a) {
          console.error("解析扇区数据失败:", a);
        }
      },
      onJsonDataInput: function onJsonDataInput() {
        this.jsonError = "";
        try {
          this.jsonDataText.trim() ? this.formData.data = JSON.parse(this.jsonDataText) : this.formData.data = {};
        } catch (a) {
          this.jsonError = "JSON格式错误";
        }
      },
      onFavoriteChange: function onFavoriteChange(a) {
        this.formData.favorite = a.detail.value;
      },
      addTag: function addTag() {
        this.newTag.trim() && !this.formData.tags.includes(this.newTag.trim()) && (this.formData.tags.push(this.newTag.trim()), this.newTag = "");
      },
      removeTag: function removeTag(a) {
        this.formData.tags.splice(a, 1);
      },
      duplicateCard: function duplicateCard() {
        var _this6 = this;
        return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee3() {
          var _t3;
          return _regeneratorRuntime2().wrap(function _callee3$(_context3) {
            while (1) switch (_context3.prev = _context3.next) {
              case 0:
                _context3.prev = 0;
                _t3 = _objectSpread2(_objectSpread2({}, _this6.card), {}, {
                  id: void 0,
                  name: "".concat(_this6.card.name, " - \u526F\u672C"),
                  createdAt: void 0,
                  modifiedAt: void 0
                });
                _context3.next = 4;
                return _this6.createCard(_t3);
              case 4:
                _this6.showActions = !1;
                a.index.showToast({
                  title: "卡片已复制",
                  icon: "success"
                });
                _context3.next = 11;
                break;
              case 8:
                _context3.prev = 8;
                _context3.t0 = _context3["catch"](0);
                console.error("复制卡片失败:", _context3.t0), a.index.showToast({
                  title: "复制失败",
                  icon: "error"
                });
              case 11:
              case "end":
                return _context3.stop();
            }
          }, _callee3, null, [[0, 8]]);
        }))();
      },
      exportCard: function exportCard() {
        var _this7 = this;
        return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee4() {
          return _regeneratorRuntime2().wrap(function _callee4$(_context4) {
            while (1) switch (_context4.prev = _context4.next) {
              case 0:
                _this7.showActions = !1, a.index.showToast({
                  title: "功能开发中",
                  icon: "none"
                });
              case 1:
              case "end":
                return _context4.stop();
            }
          }, _callee4);
        }))();
      },
      deployToSlot: function deployToSlot() {
        var _this8 = this;
        return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee6() {
          var t;
          return _regeneratorRuntime2().wrap(function _callee6$(_context6) {
            while (1) switch (_context6.prev = _context6.next) {
              case 0:
                _this8.showActions = !1;
                t = _this8.$store.state.slots.slots.map(function (a, t) {
                  return "\u5361\u69FD".concat(t + 1, ": ").concat(a.name || "空闲").concat(a.enabled ? " (已占用)" : "");
                });
                a.index.showActionSheet({
                  itemList: t,
                  success: function () {
                    var _success = _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee5(a) {
                      return _regeneratorRuntime2().wrap(function _callee5$(_context5) {
                        while (1) switch (_context5.prev = _context5.next) {
                          case 0:
                            _context5.prev = 0;
                            _context5.next = 3;
                            return _this8.deployCardToSlot({
                              cardId: _this8.card.id,
                              slotIndex: a.tapIndex
                            });
                          case 3:
                            _context5.next = 8;
                            break;
                          case 5:
                            _context5.prev = 5;
                            _context5.t0 = _context5["catch"](0);
                            console.error("部署卡片失败:", _context5.t0);
                          case 8:
                          case "end":
                            return _context5.stop();
                        }
                      }, _callee5, null, [[0, 5]]);
                    }));
                    function success(_x) {
                      return _success.apply(this, arguments);
                    }
                    return success;
                  }()
                });
              case 3:
              case "end":
                return _context6.stop();
            }
          }, _callee6);
        }))();
      },
      confirmDeleteCard: function confirmDeleteCard() {
        var _this9 = this;
        return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee7() {
          return _regeneratorRuntime2().wrap(function _callee7$(_context7) {
            while (1) switch (_context7.prev = _context7.next) {
              case 0:
                _this9.showActions = !1;
                _context7.next = 3;
                return _this9.showConfirm("确认删除", "\u786E\u5B9A\u8981\u5220\u9664\u5361\u7247\"".concat(_this9.card.name, "\"\u5417\uFF1F\u6B64\u64CD\u4F5C\u4E0D\u53EF\u64A4\u9500\u3002"));
              case 3:
                if (!_context7.sent) {
                  _context7.next = 14;
                  break;
                }
                _context7.prev = 4;
                _context7.next = 7;
                return _this9.deleteCard(_this9.card.id);
              case 7:
                a.index.showToast({
                  title: "卡片已删除",
                  icon: "success"
                });
                setTimeout(function () {
                  a.index.navigateBack();
                }, 1500);
                _context7.next = 14;
                break;
              case 11:
                _context7.prev = 11;
                _context7.t0 = _context7["catch"](4);
                console.error("删除卡片失败:", _context7.t0);
              case 14:
              case "end":
                return _context7.stop();
            }
          }, _callee7, null, [[4, 11]]);
        }))();
      },
      clearErrors: function clearErrors() {
        this.uidError = "", this.jsonError = "";
      },
      getDataSize: function getDataSize() {
        return this.isEditMode ? JSON.stringify(this.formData.data || {}).length : JSON.stringify(this.card.data || {}).length;
      },
      formatSize: function formatSize(a) {
        return this.$CardDataUtils ? this.$CardDataUtils.formatSize(a) : "".concat(a, " B");
      },
      formatDateTime: function formatDateTime(a) {
        if (!a) return "";
        return new Date(a).toLocaleString("zh-CN", {
          year: "numeric",
          month: "2-digit",
          day: "2-digit",
          hour: "2-digit",
          minute: "2-digit",
          second: "2-digit"
        });
      },
      showConfirm: function () {
        var _showConfirm = _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee8(t, e) {
          return _regeneratorRuntime2().wrap(function _callee8$(_context8) {
            while (1) switch (_context8.prev = _context8.next) {
              case 0:
                return _context8.abrupt("return", new Promise(function (i) {
                  a.index.showModal({
                    title: t,
                    content: e,
                    success: function success(a) {
                      i(a.confirm);
                    }
                  });
                }));
              case 1:
              case "end":
                return _context8.stop();
            }
          }, _callee8);
        }));
        function showConfirm(_x2, _x3) {
          return _showConfirm.apply(this, arguments);
        }
        return showConfirm;
      }()
    })
  };
if (!Array) {
  (a.resolveComponent("uni-icons") + a.resolveComponent("card-data-viewer"))();
}
Math || (function () {
  return "../../node-modules/@dcloudio/uni-ui/lib/uni-icons/uni-icons.js";
} + function () {
  return "../../components/card-data-viewer/card-data-viewer.js";
})();
var i = a._export_sfc(e, [["render", function (t, e, i, o, r, s) {
  return a.e({
    a: a.t(s.isEditMode ? "编辑卡片" : "卡片详情"),
    b: a.p({
      type: s.isEditMode ? "closeempty" : "compose",
      size: "16",
      color: "#ffffff"
    }),
    c: a.t(s.isEditMode ? "取消" : "编辑"),
    d: a.o(function () {
      return s.toggleEditMode && s.toggleEditMode.apply(s, arguments);
    }),
    e: !s.isEditMode
  }, s.isEditMode ? {} : {
    f: a.p({
      type: "more-filled",
      size: "16",
      color: "#ffffff"
    }),
    g: a.o(function (a) {
      return r.showActions = !0;
    })
  }, {
    h: !s.isEditMode
  }, s.isEditMode ? {} : {
    i: a.t(s.typeInfo.name),
    j: s.typeInfo.color
  }, {
    k: s.isEditMode
  }, s.isEditMode ? {
    l: r.formData.name,
    m: a.o(function (a) {
      return r.formData.name = a.detail.value;
    })
  } : {
    n: a.t(s.card.name)
  }, {
    o: s.isEditMode
  }, s.isEditMode ? {
    p: a.t(s.selectedType.name),
    q: r.cardTypes,
    r: s.selectedTypeIndex,
    s: a.o(function () {
      return s.onTypeChange && s.onTypeChange.apply(s, arguments);
    })
  } : {
    t: a.t(s.typeInfo.name)
  }, {
    v: s.isEditMode
  }, s.isEditMode ? {
    w: r.formData.description,
    x: a.o(function (a) {
      return r.formData.description = a.detail.value;
    })
  } : {
    y: a.t(s.card.description || "无描述")
  }, {
    z: s.isEditMode
  }, s.isEditMode ? {
    A: a.f(r.formData.tags, function (t, e, i) {
      return {
        a: a.t(t),
        b: a.o(function (a) {
          return s.removeTag(e);
        }, e),
        c: e
      };
    }),
    B: a.o(function () {
      return s.addTag && s.addTag.apply(s, arguments);
    }),
    C: r.newTag,
    D: a.o(function (a) {
      return r.newTag = a.detail.value;
    })
  } : a.e({
    E: a.f(s.card.tags, function (t, e, i) {
      return {
        a: a.t(t),
        b: t
      };
    }),
    F: !s.card.tags || 0 === s.card.tags.length
  }, (s.card.tags && s.card.tags.length, {})), {
    G: s.isEditMode
  }, s.isEditMode ? {
    H: r.formData.favorite,
    I: a.o(function () {
      return s.onFavoriteChange && s.onFavoriteChange.apply(s, arguments);
    })
  } : {
    J: a.t(s.card.favorite ? "已收藏" : "未收藏")
  }, {
    K: a.t(s.formatSize(s.getDataSize())),
    L: "mifare_classic" === r.formData.type
  }, "mifare_classic" === r.formData.type ? a.e({
    M: s.isEditMode
  }, s.isEditMode ? {
    N: a.o([function (a) {
      return r.formData.uid = a.detail.value;
    }, function () {
      return s.onUIDInput && s.onUIDInput.apply(s, arguments);
    }]),
    O: r.formData.uid
  } : {
    P: a.t(s.card.uid || "未设置")
  }, {
    Q: r.uidError
  }, r.uidError ? {
    R: a.t(r.uidError)
  } : {}, {
    S: s.isEditMode
  }, s.isEditMode ? {
    T: r.formData.sak,
    U: a.o(function (a) {
      return r.formData.sak = a.detail.value;
    })
  } : {
    V: a.t(s.card.sak || "未设置")
  }, {
    W: s.isEditMode
  }, s.isEditMode ? {
    X: r.formData.atqa,
    Y: a.o(function (a) {
      return r.formData.atqa = a.detail.value;
    })
  } : {
    Z: a.t(s.card.atqa || "未设置")
  }, {
    aa: s.isEditMode
  }, s.isEditMode ? {
    ab: a.o([function (a) {
      return r.sectorsText = a.detail.value;
    }, function () {
      return s.onSectorsInput && s.onSectorsInput.apply(s, arguments);
    }]),
    ac: r.sectorsText
  } : {
    ad: a.o(s.onCardDataChanged),
    ae: a.o(s.onEditStart),
    af: a.o(s.onEditCancel),
    ag: a.p({
      card: s.card,
      editable: !0
    })
  }) : "em410x" === r.formData.type ? a.e({
    ai: s.isEditMode
  }, s.isEditMode ? {
    aj: a.o([function (a) {
      return r.formData.uid = a.detail.value;
    }, function () {
      return s.onUIDInput && s.onUIDInput.apply(s, arguments);
    }]),
    ak: r.formData.uid
  } : {
    al: a.t(s.card.uid || "未设置")
  }, {
    am: r.uidError
  }, r.uidError ? {
    an: a.t(r.uidError)
  } : {}, {
    ao: s.isEditMode
  }, s.isEditMode ? {
    ap: r.formData.rawData,
    aq: a.o(function (a) {
      return r.formData.rawData = a.detail.value;
    })
  } : {
    ar: a.o(s.onCardDataChanged),
    as: a.o(s.onEditStart),
    at: a.o(s.onEditCancel),
    av: a.p({
      card: s.card,
      editable: !0
    })
  }) : a.e({
    aw: s.isEditMode
  }, s.isEditMode ? a.e({
    ax: a.o([function (a) {
      return r.jsonDataText = a.detail.value;
    }, function () {
      return s.onJsonDataInput && s.onJsonDataInput.apply(s, arguments);
    }]),
    ay: r.jsonDataText,
    az: r.jsonError
  }, r.jsonError ? {
    aA: a.t(r.jsonError)
  } : {}) : {
    aB: a.o(s.onCardDataChanged),
    aC: a.o(s.onEditStart),
    aD: a.o(s.onEditCancel),
    aE: a.p({
      card: s.card,
      editable: !0
    })
  }), {
    ah: "em410x" === r.formData.type,
    aF: a.t(s.card.id),
    aG: a.t(s.formatDateTime(s.card.createdAt)),
    aH: a.t(s.formatDateTime(s.card.modifiedAt || s.card.createdAt)),
    aI: a.t(s.formatSize(s.getDataSize())),
    aJ: s.isEditMode
  }, s.isEditMode ? {
    aK: a.p({
      type: "closeempty",
      size: "16",
      color: "#333333"
    }),
    aL: a.o(function () {
      return s.cancelEdit && s.cancelEdit.apply(s, arguments);
    }),
    aM: a.p({
      type: "checkmarkempty",
      size: "16",
      color: "#ffffff"
    }),
    aN: a.o(function () {
      return s.saveCard && s.saveCard.apply(s, arguments);
    }),
    aO: !s.isFormValid
  } : {}, {
    aP: !s.isEditMode
  }, s.isEditMode ? {} : {
    aQ: a.p({
      type: "download",
      size: "16",
      color: "#007AFF"
    }),
    aR: a.o(function () {
      return s.deployToSlot && s.deployToSlot.apply(s, arguments);
    }),
    aS: a.p({
      type: "paperclip",
      size: "16",
      color: "#007AFF"
    }),
    aT: a.o(function () {
      return s.duplicateCard && s.duplicateCard.apply(s, arguments);
    }),
    aU: a.p({
      type: "upload",
      size: "16",
      color: "#007AFF"
    }),
    aV: a.o(function () {
      return s.exportCard && s.exportCard.apply(s, arguments);
    })
  }, {
    aW: r.showActions
  }, r.showActions ? {
    aX: a.o(function (a) {
      return r.showActions = !1;
    }),
    aY: a.o(function () {
      return s.editCard && s.editCard.apply(s, arguments);
    }),
    aZ: a.o(function () {
      return s.duplicateCard && s.duplicateCard.apply(s, arguments);
    }),
    ba: a.o(function () {
      return s.exportCard && s.exportCard.apply(s, arguments);
    }),
    bb: a.o(function () {
      return s.deployToSlot && s.deployToSlot.apply(s, arguments);
    }),
    bc: a.o(function () {
      return s.confirmDeleteCard && s.confirmDeleteCard.apply(s, arguments);
    }),
    bd: a.o(function () {}),
    be: a.o(function (a) {
      return r.showActions = !1;
    })
  } : {});
}], ["__scopeId", "data-v-fdb5dbe3"]]);
wx.createPage(i); 
 			}); 	require("pages/card-detail/card-detail.js");
 		__wxRoute = 'pages/card-select/card-select';__wxRouteBegin = true; 	__wxAppCurrentFile__ = 'pages/card-select/card-select.js';	define("pages/card-select/card-select.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";

var _regeneratorRuntime2 = require("../../@babel/runtime/helpers/regeneratorRuntime");
var _asyncToGenerator2 = require("../../@babel/runtime/helpers/asyncToGenerator");
var _toConsumableArray2 = require("../../@babel/runtime/helpers/toConsumableArray");
var _objectSpread2 = require("../../@babel/runtime/helpers/objectSpread2");
var e = require("../../common/vendor.js"),
  t = require("../../utils/chameleon-protocol.js"),
  r = {
    name: "CardSelectPage",
    data: function data() {
      return {
        slotId: 0,
        mode: "select",
        frequency: null,
        searchQuery: "",
        currentCategory: "all",
        viewMode: "list",
        sortBy: "modified",
        sortOrder: "desc",
        selectedCard: null,
        detailCard: null,
        showSortMenu: !1,
        loading: !1,
        pageSize: 20,
        currentPage: 1,
        sortOptions: [{
          value: "name",
          label: "按名称排序"
        }, {
          value: "created",
          label: "按创建时间"
        }, {
          value: "modified",
          label: "按修改时间"
        }, {
          value: "type",
          label: "按类型排序"
        }]
      };
    },
    computed: _objectSpread2(_objectSpread2(_objectSpread2({}, e.mapState("cards", ["cards"])), e.mapGetters("cards", ["categories"])), {}, {
      filteredCards: function filteredCards() {
        var _this = this;
        var e = this.cards || [];
        if (this.frequency && ("hf" === this.frequency ? e = e.filter(function (e) {
          return 2 === e.getFrequency();
        }) : "lf" === this.frequency && (e = e.filter(function (e) {
          return 1 === e.getFrequency();
        }))), "all" !== this.currentCategory && (e = e.filter(function (e) {
          switch (_this.currentCategory) {
            case "hf":
              return 2 === e.getFrequency();
            case "lf":
              return 1 === e.getFrequency();
            case "mifare_classic":
              return e.isMifareClassic();
            case "mifare_ultralight":
              return e.isMifareUltralight();
            case "em410x":
              return e.tag === t.TagType.EM410X;
            case "ntag":
              return e.isNTAG();
            default:
              return !0;
          }
        })), this.searchQuery.trim()) {
          var _t = this.searchQuery.toLowerCase();
          e = e.filter(function (e) {
            return e.name.toLowerCase().includes(_t) || e.uid.toLowerCase().includes(_t) || e.getTypeString().toLowerCase().includes(_t);
          });
        }
        return e;
      },
      sortedCards: function sortedCards() {
        var _this2 = this;
        var e = _toConsumableArray2(this.filteredCards);
        return e.sort(function (e, t) {
          var r = 0;
          switch (_this2.sortBy) {
            case "name":
              r = e.name.localeCompare(t.name);
              break;
            case "created":
              r = new Date(e.createdAt) - new Date(t.createdAt);
              break;
            case "modified":
              r = new Date(e.modifiedAt) - new Date(t.modifiedAt);
              break;
            case "type":
              r = e.getTypeString().localeCompare(t.getTypeString());
          }
          return "desc" === _this2.sortOrder ? -r : r;
        }), e;
      },
      displayCards: function displayCards() {
        var e = this.currentPage * this.pageSize;
        return this.sortedCards.slice(0, e);
      }
    }),
    onLoad: function onLoad(t) {
      this.slotId = parseInt(t.slotId) || 0, this.mode = t.mode || "select", this.frequency = t.frequency || null;
      var r = "deploy" === this.mode ? "选择卡片部署" : "选择卡片";
      this.frequency && (r += " (".concat(this.frequency.toUpperCase(), ")")), e.index.setNavigationBarTitle({
        title: r
      }), this.initData();
    },
    methods: _objectSpread2(_objectSpread2({}, e.mapActions("cards", ["loadCards"])), {}, {
      initData: function initData() {
        var _this3 = this;
        return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee() {
          return _regeneratorRuntime2().wrap(function _callee$(_context) {
            while (1) switch (_context.prev = _context.next) {
              case 0:
                _context.prev = 0;
                _this3.loading = !0;
                _context.next = 4;
                return _this3.loadCards();
              case 4:
                _context.next = 9;
                break;
              case 6:
                _context.prev = 6;
                _context.t0 = _context["catch"](0);
                console.error("[CardSelect] 初始化失败:", _context.t0), e.index.showToast({
                  title: "加载失败",
                  icon: "error"
                });
              case 9:
                _context.prev = 9;
                _this3.loading = !1;
                return _context.finish(9);
              case 12:
              case "end":
                return _context.stop();
            }
          }, _callee, null, [[0, 6, 9, 12]]);
        }))();
      },
      handleSearch: function handleSearch() {
        this.currentPage = 1;
      },
      selectCategory: function selectCategory(e) {
        this.currentCategory = e, this.currentPage = 1;
      },
      toggleViewMode: function toggleViewMode() {
        this.viewMode = "grid" === this.viewMode ? "list" : "grid";
      },
      setSortBy: function setSortBy(e) {
        this.sortBy === e ? this.sortOrder = "asc" === this.sortOrder ? "desc" : "asc" : (this.sortBy = e, this.sortOrder = "desc"), this.showSortMenu = !1, this.$refs.sortPopup.close();
      },
      loadMore: function loadMore() {
        this.displayCards.length < this.sortedCards.length && this.currentPage++;
      },
      selectCard: function selectCard(e) {
        this.selectedCard = e, "deploy" === this.mode ? this.deployCard() : this.returnResult(e);
      },
      showCardDetails: function showCardDetails(e) {
        this.detailCard = e, this.$refs.detailPopup.open();
      },
      closeCardDetails: function closeCardDetails() {
        this.detailCard = null, this.$refs.detailPopup.close();
      },
      deploySelectedCard: function deploySelectedCard() {
        this.detailCard && (this.selectedCard = this.detailCard, this.closeCardDetails(), this.deployCard());
      },
      deployCard: function deployCard() {
        var _this4 = this;
        return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee2() {
          var _t2, _r;
          return _regeneratorRuntime2().wrap(function _callee2$(_context2) {
            while (1) switch (_context2.prev = _context2.next) {
              case 0:
                if (_this4.selectedCard) try {
                  e.index.showLoading({
                    title: "部署中..."
                  });
                  _t2 = encodeURIComponent(JSON.stringify({
                    id: _this4.selectedCard.id,
                    name: _this4.selectedCard.name,
                    uid: _this4.selectedCard.uid,
                    tag: _this4.selectedCard.tag,
                    sak: _this4.selectedCard.sak,
                    atqa: _this4.selectedCard.atqa,
                    ats: _this4.selectedCard.ats,
                    data: _this4.selectedCard.data
                  }));
                  e.index.hideLoading();
                  _r = "/pages/slot-edit/slot-edit?slotId=".concat(_this4.slotId, "&cardData=").concat(_t2, "&isNew=true&fromPackage=true");
                  if (_this4.frequency) _r += "&frequency=".concat(_this4.frequency);else {
                    _r += "&frequency=".concat(2 === _this4.selectedCard.getFrequency() ? "hf" : "lf");
                  }
                  e.index.redirectTo({
                    url: _r
                  });
                } catch (t) {
                  e.index.hideLoading(), console.error("[CardSelect] 部署失败:", t), e.index.showToast({
                    title: "部署失败",
                    icon: "error"
                  });
                } else e.index.showToast({
                  title: "请选择卡片",
                  icon: "error"
                });
              case 1:
              case "end":
                return _context2.stop();
            }
          }, _callee2);
        }))();
      },
      returnResult: function returnResult(t) {
        var r = getCurrentPages(),
          a = r[r.length - 2];
        a && a.$vm.onCardSelected && a.$vm.onCardSelected(t), e.index.navigateBack();
      },
      goToCards: function goToCards() {
        e.index.navigateTo({
          url: "/pages/cards/cards"
        });
      },
      getCardIcon: function getCardIcon(e) {
        return e.isMifareClassic() ? "creditcard" : e.isMifareUltralight() ? "tag" : e.tag === t.TagType.EM410X ? "key" : e.isNTAG() ? "chip" : "creditcard";
      },
      getCardTypeName: function getCardTypeName(e) {
        return e.getTypeString();
      },
      formatUID: function formatUID(e) {
        return e ? e.replace(/(.{2})/g, "$1 ").trim().toUpperCase() : "";
      },
      formatTime: function formatTime(e) {
        if (!e) return "";
        var t = new Date(e),
          r = new Date() - t;
        return r < 6e4 ? "刚刚" : r < 36e5 ? "".concat(Math.floor(r / 6e4), "\u5206\u949F\u524D") : r < 864e5 ? "".concat(Math.floor(r / 36e5), "\u5C0F\u65F6\u524D") : r < 6048e5 ? "".concat(Math.floor(r / 864e5), "\u5929\u524D") : t.toLocaleDateString();
      }
    })
  };
if (!Array) {
  (e.resolveComponent("uni-search-bar") + e.resolveComponent("uni-icons") + e.resolveComponent("uni-popup"))();
}
Math || (function () {
  return "../../node-modules/@dcloudio/uni-ui/lib/uni-search-bar/uni-search-bar.js";
} + function () {
  return "../../node-modules/@dcloudio/uni-ui/lib/uni-icons/uni-icons.js";
} + function () {
  return "../../node-modules/@dcloudio/uni-ui/lib/uni-popup/uni-popup.js";
})();
var a = e._export_sfc(r, [["render", function (t, r, a, d, o, s) {
  return e.e({
    a: e.o(s.handleSearch),
    b: e.o(s.handleSearch),
    c: e.o(function (e) {
      return o.searchQuery = e;
    }),
    d: e.p({
      placeholder: "搜索卡片名称、UID或类型",
      focus: !1,
      "bg-color": "#f8f8f8",
      "cancel-color": "#007AFF",
      modelValue: o.searchQuery
    }),
    e: e.f(t.categories, function (t, r, a) {
      return e.e({
        a: "63df2d62-1-" + a,
        b: e.p({
          type: t.icon,
          size: "16",
          color: o.currentCategory === t.id ? "#007AFF" : "#666"
        }),
        c: e.t(t.name),
        d: t.count > 0
      }, t.count > 0 ? {
        e: e.t(t.count)
      } : {}, {
        f: t.id,
        g: e.n({
          active: o.currentCategory === t.id
        }),
        h: e.o(function (e) {
          return s.selectCategory(t.id);
        }, t.id)
      });
    }),
    f: e.p({
      type: "grid" === o.viewMode ? "list" : "th",
      size: "18",
      color: "#666"
    }),
    g: e.o(function () {
      return s.toggleViewMode && s.toggleViewMode.apply(s, arguments);
    }),
    h: e.p({
      type: "funnel",
      size: "18",
      color: "#666"
    }),
    i: e.o(function (e) {
      return o.showSortMenu = !0;
    }),
    j: 0 === s.displayCards.length
  }, 0 === s.displayCards.length ? {
    k: e.p({
      type: "folder",
      size: "80",
      color: "#ccc"
    }),
    l: e.p({
      type: "plus",
      size: "16",
      color: "#007AFF"
    }),
    m: e.o(function () {
      return s.goToCards && s.goToCards.apply(s, arguments);
    })
  } : "grid" === o.viewMode ? {
    o: e.f(s.displayCards, function (t, r, a) {
      return e.e({
        a: "63df2d62-6-" + a,
        b: e.p({
          type: s.getCardIcon(t),
          size: "24",
          color: "#fff"
        }),
        c: t.color,
        d: e.t(t.name),
        e: e.t(s.getCardTypeName(t)),
        f: t.uid
      }, t.uid ? {
        g: e.t(s.formatUID(t.uid))
      } : {}, {
        h: e.t(2 === t.getFrequency() ? "HF" : "LF"),
        i: e.n(2 === t.getFrequency() ? "hf" : "lf"),
        j: t.id,
        k: e.o(function (e) {
          return s.selectCard(t);
        }, t.id),
        l: e.o(function (e) {
          return s.showCardDetails(t);
        }, t.id)
      });
    })
  } : {
    p: e.f(s.displayCards, function (t, r, a) {
      return e.e({
        a: "63df2d62-7-" + a,
        b: e.p({
          type: s.getCardIcon(t),
          size: "28",
          color: "#fff"
        }),
        c: t.color,
        d: e.t(t.name),
        e: e.t(2 === t.getFrequency() ? "HF" : "LF"),
        f: e.n(2 === t.getFrequency() ? "hf" : "lf"),
        g: e.t(s.getCardTypeName(t)),
        h: t.uid
      }, t.uid ? {
        i: e.t(s.formatUID(t.uid))
      } : {}, {
        j: e.t(s.formatTime(t.modifiedAt)),
        k: "63df2d62-8-" + a,
        l: e.o(function (e) {
          return s.showCardDetails(t);
        }, t.id),
        m: t.id,
        n: e.o(function (e) {
          return s.selectCard(t);
        }, t.id),
        o: e.o(function (e) {
          return s.showCardDetails(t);
        }, t.id)
      });
    }),
    q: e.p({
      type: "eye",
      size: "18",
      color: "#666"
    })
  }, {
    n: "grid" === o.viewMode,
    r: e.o(function () {
      return s.loadMore && s.loadMore.apply(s, arguments);
    }),
    s: "deploy" === o.mode
  }, "deploy" === o.mode ? {
    t: e.t(o.slotId + 1),
    v: e.p({
      type: "upload",
      size: "16",
      color: "#fff"
    }),
    w: !o.selectedCard,
    x: e.o(function () {
      return s.deployCard && s.deployCard.apply(s, arguments);
    })
  } : {}, {
    y: e.p({
      type: "close",
      size: "20",
      color: "#666"
    }),
    z: e.o(function (e) {
      return o.showSortMenu = !1;
    }),
    A: e.f(o.sortOptions, function (t, r, a) {
      return e.e({
        a: e.t(t.label),
        b: o.sortBy === t.value
      }, o.sortBy === t.value ? {
        c: "63df2d62-12-" + a + ",63df2d62-10",
        d: e.p({
          type: "checkmarkempty",
          size: "16",
          color: "#007AFF"
        })
      } : {}, {
        e: t.value,
        f: e.n({
          active: o.sortBy === t.value
        }),
        g: e.o(function (e) {
          return s.setSortBy(t.value);
        }, t.value)
      });
    }),
    B: e.sr("sortPopup", "63df2d62-10"),
    C: e.p({
      type: "bottom"
    }),
    D: o.detailCard
  }, o.detailCard ? e.e({
    E: e.t(o.detailCard.name),
    F: e.p({
      type: "close",
      size: "20",
      color: "#666"
    }),
    G: e.o(function () {
      return s.closeCardDetails && s.closeCardDetails.apply(s, arguments);
    }),
    H: e.t(s.getCardTypeName(o.detailCard)),
    I: o.detailCard.uid
  }, o.detailCard.uid ? {
    J: e.t(o.detailCard.uid)
  } : {}, {
    K: e.t(2 === o.detailCard.getFrequency() ? "HF (13.56MHz)" : "LF (125kHz)"),
    L: e.t(s.formatTime(o.detailCard.createdAt)),
    M: e.t(s.formatTime(o.detailCard.modifiedAt)),
    N: e.o(function () {
      return s.closeCardDetails && s.closeCardDetails.apply(s, arguments);
    }),
    O: "deploy" === o.mode
  }, "deploy" === o.mode ? {
    P: e.o(function () {
      return s.deploySelectedCard && s.deploySelectedCard.apply(s, arguments);
    })
  } : {}) : {}, {
    Q: e.sr("detailPopup", "63df2d62-13"),
    R: e.p({
      type: "center"
    })
  });
}], ["__scopeId", "data-v-63df2d62"]]);
wx.createPage(a); 
 			}); 	require("pages/card-select/card-select.js");
 		__wxRoute = 'pages/reader/reader';__wxRouteBegin = true; 	__wxAppCurrentFile__ = 'pages/reader/reader.js';	define("pages/reader/reader.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";

require("../../@babel/runtime/helpers/Arrayincludes");
var _toConsumableArray2 = require("../../@babel/runtime/helpers/toConsumableArray");
var _regeneratorRuntime2 = require("../../@babel/runtime/helpers/regeneratorRuntime");
var _asyncToGenerator2 = require("../../@babel/runtime/helpers/asyncToGenerator");
var _objectSpread2 = require("../../@babel/runtime/helpers/objectSpread2");
var e = require("../../common/vendor.js"),
  t = require("../../utils/card-reader.js"),
  a = require("../../utils/chameleon-protocol.js"),
  s = require("../../utils/card-save.js"),
  r = require("../../services/bluetooth.js"),
  i = {
    name: "ReaderPage",
    data: function data() {
      return {
        isInitializing: !1,
        customKey: "",
        customKeys: [],
        useDefaultKeys: !0,
        useNestedAttack: !1,
        useBackdoorAttack: !0,
        showDetailedProgress: !0,
        showKeyDictionary: !1,
        selectedDictionaryKeys: [0, 1, 2],
        selectedStrategy: "standard",
        autoRetryFailedSectors: !0,
        showPresetMenu: !1,
        saveCardName: "",
        saveCompleteData: !0,
        saveReadTime: !0
      };
    },
    computed: _objectSpread2(_objectSpread2(_objectSpread2(_objectSpread2({}, e.mapState("device", ["isConnected"])), e.mapState("reader", ["currentMode", "readingState", "isReaderMode", "currentCard", "progress", "readHistory", "statistics", "lastError"])), e.mapGetters("reader", ["currentStatus", "supportedCardTypes", "readingStatistics", "recentReads", "canStartReading"])), {}, {
      showProgress: function showProgress() {
        return "reading" === this.readingState || "analyzing" === this.readingState;
      },
      keyDictionaryNames: function keyDictionaryNames() {
        return a.gMifareClassicKeyNames;
      },
      keyDictionary: function keyDictionary() {
        return a.gMifareClassicKeys;
      },
      shouldShowAdvancedRead: function shouldShowAdvancedRead() {
        return !!this.isMifareClassic(this.currentCard.type) && this.currentCard.isComplete && this.currentCard.hasErrors && this.currentCard.accessibleSectors < this.totalSectorCount;
      },
      totalSectorCount: function totalSectorCount() {
        if (!this.currentCard.type) return 16;
        var e = this.currentCard.type.toLowerCase();
        return e.includes("4k") ? 40 : e.includes("2k") ? 32 : e.includes("mini") ? 5 : 16;
      }
    }),
    onLoad: function onLoad() {
      var _this = this;
      return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee() {
        return _regeneratorRuntime2().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              _context.t0 = _this.isConnected && !_this.isReaderMode;
              if (!_context.t0) {
                _context.next = 4;
                break;
              }
              _context.next = 4;
              return _this.handleInitializeReader();
            case 4:
            case "end":
              return _context.stop();
          }
        }, _callee);
      }))();
    },
    onShow: function onShow() {
      var _this2 = this;
      return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee2() {
        return _regeneratorRuntime2().wrap(function _callee2$(_context2) {
          while (1) switch (_context2.prev = _context2.next) {
            case 0:
              _context2.t0 = _this2.isConnected && !_this2.isReaderMode;
              if (!_context2.t0) {
                _context2.next = 4;
                break;
              }
              _context2.next = 4;
              return _this2.handleInitializeReader();
            case 4:
            case "end":
              return _context2.stop();
          }
        }, _callee2);
      }))();
    },
    methods: _objectSpread2(_objectSpread2({}, e.mapActions("reader", ["initializeReader", "switchMode", "scanCard", "stopReading", "saveToCardPackage", "cleanup"])), {}, {
      handleSwitchMode: function handleSwitchMode(t) {
        var _this3 = this;
        return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee3() {
          var _a;
          return _regeneratorRuntime2().wrap(function _callee3$(_context3) {
            while (1) switch (_context3.prev = _context3.next) {
              case 0:
                if (!("scanning" !== _this3.readingState && "reading" !== _this3.readingState)) {
                  _context3.next = 13;
                  break;
                }
                _context3.prev = 1;
                _context3.next = 4;
                return _this3.switchMode(t);
              case 4:
                _a = _context3.sent;
                _a.success || e.index.showToast({
                  title: _a.error,
                  icon: "none"
                });
                _context3.next = 11;
                break;
              case 8:
                _context3.prev = 8;
                _context3.t0 = _context3["catch"](1);
                e.index.showToast({
                  title: "模式切换失败",
                  icon: "none"
                });
              case 11:
                _context3.next = 14;
                break;
              case 13:
                e.index.showToast({
                  title: "正在读取中，请稍后",
                  icon: "none"
                });
              case 14:
              case "end":
                return _context3.stop();
            }
          }, _callee3, null, [[1, 8]]);
        }))();
      },
      handleInitializeReader: function handleInitializeReader() {
        var _this4 = this;
        return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee4() {
          var _t;
          return _regeneratorRuntime2().wrap(function _callee4$(_context4) {
            while (1) switch (_context4.prev = _context4.next) {
              case 0:
                if (_this4.isInitializing) {
                  _context4.next = 15;
                  break;
                }
                _this4.isInitializing = !0;
                _context4.prev = 2;
                _context4.next = 5;
                return _this4.initializeReader();
              case 5:
                _t = _context4.sent;
                _t.success ? e.index.showToast({
                  title: "读卡模式已启动",
                  icon: "success"
                }) : e.index.showToast({
                  title: _t.error || "初始化失败",
                  icon: "none"
                });
                _context4.next = 12;
                break;
              case 9:
                _context4.prev = 9;
                _context4.t0 = _context4["catch"](2);
                e.index.showToast({
                  title: "初始化失败",
                  icon: "none"
                });
              case 12:
                _context4.prev = 12;
                _this4.isInitializing = !1;
                return _context4.finish(12);
              case 15:
              case "end":
                return _context4.stop();
            }
          }, _callee4, null, [[2, 9, 12, 15]]);
        }))();
      },
      handleScanAction: function handleScanAction() {
        var _this5 = this;
        return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee5() {
          var _t2;
          return _regeneratorRuntime2().wrap(function _callee5$(_context5) {
            while (1) switch (_context5.prev = _context5.next) {
              case 0:
                if (!("scanning" === _this5.readingState || "reading" === _this5.readingState)) {
                  _context5.next = 5;
                  break;
                }
                _context5.next = 3;
                return _this5.stopReading();
              case 3:
                _context5.next = 16;
                break;
              case 5:
                _context5.prev = 5;
                e.index.showLoading({
                  title: "正在扫描..."
                });
                _context5.next = 9;
                return _this5.scanCard();
              case 9:
                _t2 = _context5.sent;
                e.index.hideLoading(), _t2.success ? _t2.card ? e.index.showToast({
                  title: "扫描成功",
                  icon: "success"
                }) : e.index.showToast({
                  title: "未检测到卡片",
                  icon: "none"
                }) : e.index.showToast({
                  title: _t2.error || "扫描失败",
                  icon: "none"
                });
                _context5.next = 16;
                break;
              case 13:
                _context5.prev = 13;
                _context5.t0 = _context5["catch"](5);
                e.index.hideLoading(), e.index.showToast({
                  title: "扫描失败",
                  icon: "none"
                });
              case 16:
              case "end":
                return _context5.stop();
            }
          }, _callee5, null, [[5, 13]]);
        }))();
      },
      saveToCardPackage: function saveToCardPackage() {
        var _this6 = this;
        return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee6() {
          return _regeneratorRuntime2().wrap(function _callee6$(_context6) {
            while (1) switch (_context6.prev = _context6.next) {
              case 0:
                _context6.prev = 0;
                if (_this6.currentCard.uid) {
                  _context6.next = 3;
                  break;
                }
                return _context6.abrupt("return", void e.index.showToast({
                  title: "没有可保存的卡片数据",
                  icon: "none"
                }));
              case 3:
                _this6.showSaveOptions();
                _context6.next = 9;
                break;
              case 6:
                _context6.prev = 6;
                _context6.t0 = _context6["catch"](0);
                console.error("[Reader] 保存到卡包失败:", _context6.t0), e.index.showToast({
                  title: "保存失败",
                  icon: "none"
                });
              case 9:
              case "end":
                return _context6.stop();
            }
          }, _callee6, null, [[0, 6]]);
        }))();
      },
      goToCardWrite: function goToCardWrite() {
        e.index.showModal({
          title: "写卡功能",
          content: "写卡功能需要从卡包中选择卡片。是否前往卡包选择要写入的卡片？",
          confirmText: "前往卡包",
          cancelText: "取消",
          success: function success(t) {
            t.confirm && e.index.navigateTo({
              url: "/pages/cards/cards"
            });
          }
        });
      },
      showSaveOptions: function showSaveOptions() {
        this.saveCardName = this.generateCardName(), this.$refs.saveOptionsPopup.open();
      },
      closeSaveOptions: function closeSaveOptions() {
        this.$refs.saveOptionsPopup.close();
      },
      generateCardName: function generateCardName() {
        return "".concat(this.getCardTypeName(this.currentCard.type), " ").concat(this.currentCard.uid.replace(/\s/g, "").substring(0, 8), " (").concat(new Date().toLocaleString("zh-CN", {
          month: "2-digit",
          day: "2-digit",
          hour: "2-digit",
          minute: "2-digit"
        }), ")");
      },
      executeSave: function executeSave() {
        var _this7 = this;
        return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee7() {
          var _t3, _a2;
          return _regeneratorRuntime2().wrap(function _callee7$(_context7) {
            while (1) switch (_context7.prev = _context7.next) {
              case 0:
                _context7.prev = 0;
                e.index.showLoading({
                  title: "保存中..."
                });
                _t3 = _this7.convertToCardSave(_this7.currentCard, _this7.saveCardName);
                _context7.next = 5;
                return _this7.$store.dispatch("cards/createCard", _t3);
              case 5:
                _a2 = _context7.sent;
                e.index.hideLoading(), _this7.closeSaveOptions(), _a2.success ? (e.index.showToast({
                  title: "已保存到卡包",
                  icon: "success"
                }), _this7.showSaveSuccessOptions()) : e.index.showToast({
                  title: _a2.error || "保存失败",
                  icon: "none"
                });
                _context7.next = 12;
                break;
              case 9:
                _context7.prev = 9;
                _context7.t0 = _context7["catch"](0);
                e.index.hideLoading(), console.error("[Reader] 保存失败:", _context7.t0), e.index.showToast({
                  title: "保存失败",
                  icon: "none"
                });
              case 12:
              case "end":
                return _context7.stop();
            }
          }, _callee7, null, [[0, 9]]);
        }))();
      },
      convertToCardSave: function convertToCardSave(e, t) {
        var r = a.TagType.UNKNOWN;
        this.isMifareClassic(e.type) ? r = e.type.includes("4k") ? a.TagType.MIFARE_4096 : e.type.includes("2k") ? a.TagType.MIFARE_2048 : a.TagType.MIFARE_1024 : this.isMifareUltralight(e.type) ? r = a.TagType.NTAG_213 : "em410x" === e.type && (r = a.TagType.EM410X);
        var i = [];
        e.sectors && e.sectors.length > 0 ? e.sectors.forEach(function (e) {
          e.blocks && e.blocks.length > 0 && e.blocks.forEach(function (e) {
            Array.isArray(e) && i.push(new Uint8Array(e));
          });
        }) : e.pages && e.pages.length > 0 && e.pages.forEach(function (e) {
          Array.isArray(e) && i.push(new Uint8Array(e));
        });
        var o = e.uid;
        "string" == typeof o && (o = o.replace(/\s/g, ""));
        var c = 0;
        e.sak && (c = "string" == typeof e.sak ? parseInt(e.sak.replace(/\s/g, ""), 16) : e.sak);
        var n = new Uint8Array(0);
        if (e.atqa) if (Array.isArray(e.atqa)) n = new Uint8Array(e.atqa);else if ("string" == typeof e.atqa) {
          var _t4,
            _a3 = e.atqa.trim();
          _t4 = _a3.includes(" ") ? _a3.split(" ").filter(function (e) {
            return e;
          }).map(function (e) {
            return parseInt(e, 16);
          }) : _a3.match(/.{1,2}/g).map(function (e) {
            return parseInt(e, 16);
          }), n = new Uint8Array(_t4);
        }
        var d = new Uint8Array(0);
        if (e.ats) if (Array.isArray(e.ats)) d = new Uint8Array(e.ats);else if ("string" == typeof e.ats) {
          var _t5 = e.ats.split(" ").map(function (e) {
            return parseInt(e, 16);
          });
          d = new Uint8Array(_t5);
        }
        return new s.CardSave({
          name: t,
          uid: o,
          tag: r,
          sak: c,
          atqa: n,
          ats: d,
          data: i,
          color: this.getCardTypeColor(e.type)
        });
      },
      showSaveSuccessOptions: function showSaveSuccessOptions() {
        e.index.showModal({
          title: "保存成功",
          content: "卡片已保存到卡包，是否查看卡包？",
          confirmText: "查看卡包",
          cancelText: "继续读取",
          success: function success(t) {
            t.confirm && e.index.navigateTo({
              url: "/pages/cards/cards"
            });
          }
        });
      },
      showAdvancedReadOptions: function showAdvancedReadOptions() {
        this.$refs.advancedReadPopup.open();
      },
      closeAdvancedReadPopup: function closeAdvancedReadPopup() {
        this.$refs.advancedReadPopup.close();
      },
      showSectorDetails: function showSectorDetails() {
        this.currentCard.sectors && 0 !== this.currentCard.sectors.length ? e.index.navigateTo({
          url: "/pages/sector-details/sector-details"
        }) : e.index.showToast({
          title: "没有扇区数据",
          icon: "none"
        });
      },
      showPageDetails: function showPageDetails() {
        this.currentCard.pages && 0 !== this.currentCard.pages.length ? this.$refs.pageDetailsPopup.open() : e.index.showToast({
          title: "没有页面数据",
          icon: "none"
        });
      },
      closePageDetailsPopup: function closePageDetailsPopup() {
        this.$refs.pageDetailsPopup.close();
      },
      formatKeyInput: function formatKeyInput(e) {
        var t = e.detail.value.replace(/[^0-9A-Fa-f]/g, "").toUpperCase();
        t.length > 12 && (t = t.substring(0, 12)), this.customKey = t;
      },
      addCustomKey: function addCustomKey() {
        12 === this.customKey.length ? this.customKeys.includes(this.customKey) ? e.index.showToast({
          title: "密钥已存在",
          icon: "none"
        }) : (this.customKeys.push(this.customKey), this.customKey = "", e.index.showToast({
          title: "密钥已添加",
          icon: "success"
        })) : e.index.showToast({
          title: "密钥必须是12位十六进制字符",
          icon: "none"
        });
      },
      removeCustomKey: function removeCustomKey(e) {
        this.customKeys.splice(e, 1);
      },
      toggleDefaultKeys: function toggleDefaultKeys(e) {
        this.useDefaultKeys = e.detail.value;
      },
      toggleBackdoorAttack: function toggleBackdoorAttack(e) {
        this.useBackdoorAttack = e.detail.value;
      },
      toggleNestedAttack: function toggleNestedAttack(e) {
        this.useNestedAttack = e.detail.value;
      },
      toggleDetailedProgress: function toggleDetailedProgress(e) {
        this.showDetailedProgress = e.detail.value;
      },
      startAdvancedRead: function startAdvancedRead() {
        var _this8 = this;
        return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee8() {
          var _a4;
          return _regeneratorRuntime2().wrap(function _callee8$(_context8) {
            while (1) switch (_context8.prev = _context8.next) {
              case 0:
                _this8.closeAdvancedReadPopup();
                _context8.prev = 1;
                if (_this8.validateReadConfiguration()) {
                  _context8.next = 4;
                  break;
                }
                return _context8.abrupt("return");
              case 4:
                if (!(!r.bluetoothService || !r.bluetoothService.isConnected)) {
                  _context8.next = 6;
                  break;
                }
                return _context8.abrupt("return", void e.index.showToast({
                  title: "蓝牙服务未连接",
                  icon: "none"
                }));
              case 6:
                _a4 = new t.CardDataReader(r.bluetoothService);
                if (!("smart" === _this8.selectedStrategy)) {
                  _context8.next = 12;
                  break;
                }
                _context8.next = 10;
                return _this8.performSmartRecovery(_a4);
              case 10:
                _context8.next = 14;
                break;
              case 12:
                _context8.next = 14;
                return _this8.performDictionaryAttack(_a4);
              case 14:
                _context8.next = 19;
                break;
              case 16:
                _context8.prev = 16;
                _context8.t0 = _context8["catch"](1);
                console.error("[Reader] 高级读取失败:", _context8.t0), e.index.hideLoading(), e.index.showToast({
                  title: "读取失败: " + _context8.t0.message,
                  icon: "none",
                  duration: 3e3
                });
              case 19:
              case "end":
                return _context8.stop();
            }
          }, _callee8, null, [[1, 16]]);
        }))();
      },
      performSmartRecovery: function performSmartRecovery(t) {
        var _this9 = this;
        return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee9() {
          var a, _s, _r, _i, _o;
          return _regeneratorRuntime2().wrap(function _callee9$(_context9) {
            while (1) switch (_context9.prev = _context9.next) {
              case 0:
                console.log("[Reader] 开始智能密钥恢复..."), e.index.showLoading({
                  title: "智能恢复中...",
                  mask: !0
                });
                _context9.prev = 1;
                _s = _toConsumableArray2(_this9.customKeys);
                _context9.next = 5;
                return t.smartKeyRecovery({
                  uid: _this9.currentCard.uid,
                  sak: _this9.currentCard.sak,
                  atqa: _this9.currentCard.atqa
                }, _s, function (t) {
                  _this9.$store.commit("reader/UPDATE_PROGRESS", {
                    message: t.message || "",
                    percentage: t.percentage || 0,
                    phase: t.phase || "",
                    current: t.current || 0,
                    total: t.total || 0,
                    details: t.details || []
                  }), t.message && e.index.showLoading({
                    title: t.message,
                    mask: !0
                  }), console.log("[Reader] \u8FDB\u5EA6: ".concat(t.message, " ").concat(t.percentage, "%"));
                });
              case 5:
                _r = _context9.sent;
                e.index.hideLoading();
                _i = _objectSpread2(_objectSpread2(_objectSpread2({}, _this9.currentCard), _r), {}, {
                  attackMethods: _r.attackMethods || [],
                  phases: _r.phases || [],
                  isComplete: _r.isComplete || !1,
                  hasErrors: _r.hasErrors || !1,
                  readTime: _r.readTime || new Date().toISOString()
                });
                _this9.$store.commit("reader/SET_CURRENT_CARD", _i);
                _o = _r.attackMethods ? _r.attackMethods.join(" → ") : "未知";
                e.index.showModal({
                  title: "智能恢复完成",
                  content: "\u5361\u7247\u7C7B\u578B: ".concat(null == (a = _r.cardType) ? void 0 : a.toUpperCase(), "\n\u6210\u529F\u7387: ").concat(_r.successRate, "%\n\u653B\u51FB\u65B9\u5F0F: ").concat(_o, "\n\u627E\u5230\u5BC6\u94A5: ").concat(_r.foundKeys, "/").concat(_r.totalKeys),
                  showCancel: !1,
                  confirmText: "查看详情",
                  success: function success(e) {
                    e.confirm && _this9.showSectorDetails();
                  }
                }), console.log("[Reader] 智能恢复完成:", _r);
                _context9.next = 16;
                break;
              case 13:
                _context9.prev = 13;
                _context9.t0 = _context9["catch"](1);
                throw console.error("[Reader] 智能恢复失败:", _context9.t0), _context9.t0;
              case 16:
              case "end":
                return _context9.stop();
            }
          }, _callee9, null, [[1, 13]]);
        }))();
      },
      performDictionaryAttack: function performDictionaryAttack(t) {
        var _this10 = this;
        return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee10() {
          var a, _s2, _r2, _i2;
          return _regeneratorRuntime2().wrap(function _callee10$(_context10) {
            while (1) switch (_context10.prev = _context10.next) {
              case 0:
                console.log("[Reader] 开始密钥字典攻击..."), e.index.showLoading({
                  title: "正在读取...",
                  mask: !0
                });
                _context10.prev = 1;
                a = _this10.selectedDictionaryKeys.map(function (e) {
                  return _this10.keyDictionary[e].map(function (e) {
                    return e.toString(16).padStart(2, "0");
                  }).join("").toUpperCase();
                });
                _s2 = [].concat(_toConsumableArray2(_this10.customKeys), _toConsumableArray2(a));
                "quick" === _this10.selectedStrategy ? _s2 = a.slice(0, 5) : "deep" === _this10.selectedStrategy && (_this10.useNestedAttack = !0);
                _context10.next = 7;
                return t.dictionaryAttack({
                  uid: _this10.currentCard.uid,
                  sak: _this10.currentCard.sak,
                  atqa: _this10.currentCard.atqa
                }, _s2, function (t) {
                  _this10.$store.commit("reader/UPDATE_PROGRESS", {
                    message: t.message || "",
                    percentage: t.percentage || 0,
                    current: t.current || 0,
                    total: t.total || 0,
                    details: t.details || []
                  }), t.message && e.index.showLoading({
                    title: t.message,
                    mask: !0
                  });
                });
              case 7:
                _r2 = _context10.sent;
                e.index.hideLoading();
                _i2 = _objectSpread2(_objectSpread2(_objectSpread2({}, _this10.currentCard), _r2), {}, {
                  isComplete: _r2.isComplete || !1,
                  hasErrors: _r2.hasErrors || !1
                });
                _this10.$store.commit("reader/SET_CURRENT_CARD", _i2), e.index.showToast({
                  title: "\u8BFB\u53D6\u5B8C\u6210\uFF0C\u6210\u529F\u7387 ".concat(_r2.successRate, "%"),
                  icon: "success",
                  duration: 3e3
                }), console.log("[Reader] 字典攻击完成:", _r2);
                _context10.next = 16;
                break;
              case 13:
                _context10.prev = 13;
                _context10.t0 = _context10["catch"](1);
                throw console.error("[Reader] 字典攻击失败:", _context10.t0), _context10.t0;
              case 16:
              case "end":
                return _context10.stop();
            }
          }, _callee10, null, [[1, 13]]);
        }))();
      },
      validateReadConfiguration: function validateReadConfiguration() {
        return !(0 === this.selectedDictionaryKeys.length && 0 === this.customKeys.length && !this.useDefaultKeys) || (e.index.showToast({
          title: "请至少选择一种密钥来源",
          icon: "none"
        }), !1);
      },
      buildReadOptions: function buildReadOptions() {
        var _this11 = this;
        var e = this.selectedDictionaryKeys.map(function (e) {
          return _this11.keyDictionary[e].map(function (e) {
            return e.toString(16).padStart(2, "0");
          }).join("").toUpperCase();
        });
        var t = [].concat(_toConsumableArray2(this.customKeys), _toConsumableArray2(e));
        return "quick" === this.selectedStrategy ? t = e.slice(0, 5) : "deep" === this.selectedStrategy && (this.useNestedAttack = !0), {
          useDefaultKeys: this.useDefaultKeys,
          customKeys: t,
          useNestedAttack: this.useNestedAttack,
          showDetailedProgress: this.showDetailedProgress,
          autoRetryFailedSectors: this.autoRetryFailedSectors,
          strategy: this.selectedStrategy
        };
      },
      toggleKeyDictionary: function toggleKeyDictionary() {
        this.showKeyDictionary = !this.showKeyDictionary;
      },
      toggleDictionaryKey: function toggleDictionaryKey(e) {
        var t = this.selectedDictionaryKeys.indexOf(e);
        t > -1 ? this.selectedDictionaryKeys.splice(t, 1) : this.selectedDictionaryKeys.push(e);
      },
      selectAllDictionaryKeys: function selectAllDictionaryKeys() {
        this.selectedDictionaryKeys = Array.from({
          length: this.keyDictionaryNames.length
        }, function (e, t) {
          return t;
        });
      },
      clearDictionarySelection: function clearDictionarySelection() {
        this.selectedDictionaryKeys = [];
      },
      selectCommonKeys: function selectCommonKeys() {
        this.selectedDictionaryKeys = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9];
      },
      formatDictionaryKey: function formatDictionaryKey(e) {
        if (e >= this.keyDictionary.length) return "";
        return this.keyDictionary[e].map(function (e) {
          return e.toString(16).padStart(2, "0");
        }).join("").toUpperCase();
      },
      selectStrategy: function selectStrategy(e) {
        this.selectedStrategy = e, "quick" === e ? (this.selectedDictionaryKeys = [0, 1, 2, 3, 4], this.useNestedAttack = !1, this.useBackdoorAttack = !1) : "standard" === e ? (this.selectedDictionaryKeys = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9], this.useNestedAttack = !1, this.useBackdoorAttack = !0) : "deep" === e ? (this.selectAllDictionaryKeys(), this.useNestedAttack = !0, this.useBackdoorAttack = !0, this.autoRetryFailedSectors = !0) : "smart" === e && (this.selectAllDictionaryKeys(), this.useNestedAttack = !0, this.useBackdoorAttack = !0, this.autoRetryFailedSectors = !0, this.showDetailedProgress = !0);
      },
      toggleAutoRetry: function toggleAutoRetry(e) {
        this.autoRetryFailedSectors = e.detail.value;
      },
      clearCustomKeys: function clearCustomKeys() {
        var _this12 = this;
        e.index.showModal({
          title: "确认清空",
          content: "确定要清空所有自定义密钥吗？",
          success: function success(t) {
            t.confirm && (_this12.customKeys = [], e.index.showToast({
              title: "已清空自定义密钥",
              icon: "success"
            }));
          }
        });
      },
      showPresetMenu: function showPresetMenu() {
        var _this13 = this;
        e.index.showActionSheet({
          itemList: ["新手模式", "专家模式", "自定义模式"],
          success: function success(e) {
            _this13.applyPreset(e.tapIndex);
          }
        });
      },
      applyPreset: function applyPreset(t) {
        switch (t) {
          case 0:
            this.selectedStrategy = "quick", this.useDefaultKeys = !0, this.useNestedAttack = !1, this.showDetailedProgress = !0, this.autoRetryFailedSectors = !0, this.selectedDictionaryKeys = [0, 1, 2, 3, 4];
            break;
          case 1:
            this.selectedStrategy = "deep", this.useDefaultKeys = !0, this.useNestedAttack = !0, this.showDetailedProgress = !0, this.autoRetryFailedSectors = !0, this.selectAllDictionaryKeys();
        }
        e.index.showToast({
          title: "预设已应用",
          icon: "success"
        });
      },
      showKeyDictionaryHelp: function showKeyDictionaryHelp() {
        e.index.showModal({
          title: "密钥字典说明",
          content: "密钥字典包含常用的Mifare Classic密钥，这些密钥可以解锁大多数扇区。选择更多密钥可以提高读取成功率，但会增加读取时间。",
          showCancel: !1
        });
      },
      toggleSaveCompleteData: function toggleSaveCompleteData(e) {
        this.saveCompleteData = e.detail.value;
      },
      toggleSaveReadTime: function toggleSaveReadTime(e) {
        this.saveReadTime = e.detail.value;
      },
      exportCardData: function exportCardData() {
        var _this14 = this;
        return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee11() {
          var a, _s3;
          return _regeneratorRuntime2().wrap(function _callee11$(_context11) {
            while (1) switch (_context11.prev = _context11.next) {
              case 0:
                _context11.prev = 0;
                a = _this14.currentCard;
                if (a.uid) {
                  _context11.next = 4;
                  break;
                }
                return _context11.abrupt("return", void e.index.showToast({
                  title: "没有可导出的数据",
                  icon: "none"
                }));
              case 4:
                _s3 = "卡片信息导出\n";
                _s3 += "\u5BFC\u51FA\u65F6\u95F4: ".concat(new Date().toLocaleString(), "\n\n"), _s3 += "UID: ".concat(a.uid, "\n"), _s3 += "\u7C7B\u578B: ".concat(_this14.getCardTypeName(a.type), "\n"), _s3 += "\u534F\u8BAE: ".concat(a.protocol || "未知", "\n"), a.sak && (_s3 += "SAK: ".concat(a.sak, "\n")), a.atqa && (_s3 += "ATQA: ".concat(a.atqa, "\n")), a.ats && (_s3 += "ATS: ".concat(a.ats, "\n")), _s3 += "\n\u6570\u636E\u5B8C\u6574\u6027: ".concat(a.isComplete ? "完整" : "不完整", "\n"), a.hasErrors && a.errorMessage && (_s3 += "\u9519\u8BEF\u4FE1\u606F: ".concat(a.errorMessage, "\n")), a.sectors && a.sectors.length > 0 && (_s3 += "\n扇区数据:\n", a.sectors.forEach(function (e, a) {
                  e.readable && (_s3 += t.CardDataFormatter.formatMifareClassicSector(e, a) + "\n\n");
                })), a.pages && a.pages.length > 0 && (_s3 += "\n页面数据:\n", _s3 += t.CardDataFormatter.formatMifareUltralightPages(a.pages) + "\n"), e.index.setClipboardData({
                  data: _s3,
                  success: function success() {
                    e.index.showToast({
                      title: "数据已复制到剪贴板",
                      icon: "success"
                    });
                  }
                });
                _context11.next = 11;
                break;
              case 8:
                _context11.prev = 8;
                _context11.t0 = _context11["catch"](0);
                e.index.showToast({
                  title: "导出失败",
                  icon: "none"
                });
              case 11:
              case "end":
                return _context11.stop();
            }
          }, _callee11, null, [[0, 8]]);
        }))();
      },
      loadHistoryCard: function loadHistoryCard(t) {
        this.$store.commit("reader/SET_CURRENT_CARD", t), e.index.showToast({
          title: "已加载历史记录",
          icon: "success"
        });
      },
      clearHistory: function clearHistory() {
        var _this15 = this;
        e.index.showModal({
          title: "确认清空",
          content: "确定要清空所有读取历史吗？",
          success: function success(t) {
            t.confirm && (_this15.$store.commit("reader/CLEAR_HISTORY"), e.index.showToast({
              title: "历史记录已清空",
              icon: "success"
            }));
          }
        });
      },
      dismissError: function dismissError() {
        this.$store.commit("reader/CLEAR_ERROR");
      },
      showErrorDetails: function showErrorDetails() {
        this.lastError && this.$refs.errorDetailsPopup.open();
      },
      closeErrorDetailsPopup: function closeErrorDetailsPopup() {
        this.$refs.errorDetailsPopup.close();
      },
      retryLastOperation: function retryLastOperation() {
        var _this16 = this;
        return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee12() {
          return _regeneratorRuntime2().wrap(function _callee12$(_context12) {
            while (1) switch (_context12.prev = _context12.next) {
              case 0:
                _this16.closeErrorDetailsPopup();
                _this16.dismissError();
                if (!(_this16.currentCard.uid && _this16.isMifareClassic(_this16.currentCard.type))) {
                  _context12.next = 6;
                  break;
                }
                _this16.showAdvancedReadOptions();
                _context12.next = 8;
                break;
              case 6:
                _context12.next = 8;
                return _this16.handleScanAction();
              case 8:
              case "end":
                return _context12.stop();
            }
          }, _callee12);
        }))();
      },
      getScanIcon: function getScanIcon() {
        switch (this.readingState) {
          case "scanning":
            return "refreshempty";
          case "reading":
            return "download";
          case "analyzing":
            return "gear";
          case "completed":
            return "checkmarkempty";
          case "error":
            return "closeempty";
          default:
            return "scan";
        }
      },
      getScanIconColor: function getScanIconColor() {
        switch (this.readingState) {
          case "scanning":
          case "reading":
          case "analyzing":
            return "#007AFF";
          case "completed":
            return "#4CAF50";
          case "error":
            return "#f44336";
          default:
            return "#999";
        }
      },
      getScanTitle: function getScanTitle() {
        switch (this.readingState) {
          case "scanning":
            return "正在扫描...";
          case "reading":
            return "正在读取...";
          case "analyzing":
            return "正在分析...";
          case "completed":
            return "读取完成";
          case "error":
            return "读取失败";
          default:
            return "将卡片靠近设备";
        }
      },
      getScanDescription: function getScanDescription() {
        if (!this.isConnected) return "请先连接设备";
        if (!this.isReaderMode) return "请先启动读卡模式";
        switch (this.readingState) {
          case "scanning":
            return "正在搜索卡片信号...";
          case "reading":
            return "正在读取卡片数据...";
          case "analyzing":
            return "正在分析卡片类型...";
          case "completed":
            return "数据读取成功";
          case "error":
            return this.lastError ? this.lastError.message : "读取过程中出现错误";
          default:
            return "\u70B9\u51FB\u5F00\u59CB\u626B\u63CF".concat(this.currentMode.toUpperCase(), "\u5361\u7247");
        }
      },
      getScanButtonText: function getScanButtonText() {
        return "scanning" === this.readingState || "reading" === this.readingState ? "停止扫描" : "开始扫描";
      },
      getCardTypeIcon: function getCardTypeIcon(e) {
        var t = {
          mifare_classic: "creditcard",
          mifare_classic_1k: "creditcard",
          mifare_classic_2k: "creditcard",
          mifare_classic_4k: "creditcard",
          mifare_classic_mini: "creditcard",
          mifare_ultralight: "tag",
          ntag: "chip",
          ntag_213: "chip",
          ntag_215: "chip",
          ntag_216: "chip",
          em410x: "key",
          t55xx: "shield",
          iso14443a: "wifi",
          iso14443b: "wifi",
          iso15693: "radio"
        };
        if (!t[e] && e) {
          var _t6 = e.toLowerCase();
          if (_t6.includes("mifare_classic")) return "creditcard";
          if (_t6.includes("ultralight")) return "tag";
          if (_t6.includes("ntag")) return "chip";
          if (_t6.includes("em410x")) return "key";
        }
        return t[e] || "creditcard";
      },
      getCardTypeName: function getCardTypeName(e) {
        if (this.currentCard && this.currentCard.typeDisplay) return this.currentCard.typeDisplay;
        var t = {
          mifare_classic: "Mifare Classic",
          mifare_classic_1k: "Mifare Classic 1K",
          mifare_classic_2k: "Mifare Classic 2K",
          mifare_classic_4k: "Mifare Classic 4K",
          mifare_classic_mini: "Mifare Classic Mini",
          mifare_ultralight: "Mifare Ultralight",
          ntag: "NTAG",
          ntag_213: "NTAG213",
          ntag_215: "NTAG215",
          ntag_216: "NTAG216",
          em410x: "EM410X",
          t55xx: "T55XX",
          iso14443a: "ISO14443A",
          iso14443b: "ISO14443B",
          iso15693: "ISO15693"
        };
        if (!t[e] && e) {
          var _t7 = e.toLowerCase();
          if (_t7.includes("mifare_classic")) return _t7.includes("4k") ? "Mifare Classic 4K" : _t7.includes("2k") ? "Mifare Classic 2K" : _t7.includes("mini") ? "Mifare Classic Mini" : "Mifare Classic 1K";
          if (_t7.includes("ultralight")) return "Mifare Ultralight";
          if (_t7.includes("ntag")) return "NTAG";
        }
        return t[e] || "未知类型";
      },
      getCardTypeColor: function getCardTypeColor(e) {
        var t = {
          mifare_classic: "#FF6B35",
          mifare_classic_1k: "#FF6B35",
          mifare_classic_2k: "#FF8C42",
          mifare_classic_4k: "#FFAD42",
          mifare_classic_mini: "#FF4757",
          mifare_ultralight: "#4ECDC4",
          ntag: "#FFEAA7",
          ntag_213: "#FFEAA7",
          ntag_215: "#FFD93D",
          ntag_216: "#FFA502",
          em410x: "#45B7D1",
          t55xx: "#96CEB4",
          iso14443a: "#74B9FF",
          iso14443b: "#A29BFE",
          iso15693: "#6C5CE7"
        };
        if (!t[e] && e) {
          var _t8 = e.toLowerCase();
          if (_t8.includes("mifare_classic")) return "#FF6B35";
          if (_t8.includes("ultralight")) return "#4ECDC4";
          if (_t8.includes("ntag")) return "#FFEAA7";
          if (_t8.includes("em410x")) return "#45B7D1";
        }
        return t[e] || "#DDA0DD";
      },
      formatTime: function formatTime(e) {
        if (!e) return "未知";
        return new Date(e).toLocaleString();
      },
      formatRelativeTime: function formatRelativeTime(e) {
        if (!e) return "未知";
        var t = new Date(),
          a = new Date(e),
          s = t - a,
          r = Math.floor(s / 6e4),
          i = Math.floor(s / 36e5),
          o = Math.floor(s / 864e5);
        return r < 1 ? "刚刚" : r < 60 ? "".concat(r, "\u5206\u949F\u524D") : i < 24 ? "".concat(i, "\u5C0F\u65F6\u524D") : o < 7 ? "".concat(o, "\u5929\u524D") : a.toLocaleDateString();
      },
      isMifareClassic: function isMifareClassic(e) {
        return this.$store.getters["reader/isMifareClassicType"](e);
      },
      isMifareUltralight: function isMifareUltralight(e) {
        return this.$store.getters["reader/isMifareUltralightType"](e);
      },
      formatBlockData: function formatBlockData(e) {
        return e && Array.isArray(e) ? e.map(function (e) {
          return e.toString(16).padStart(2, "0").toUpperCase();
        }).join(" ") : "无数据";
      },
      formatKey: function formatKey(e) {
        return e && Array.isArray(e) ? e.map(function (e) {
          return e.toString(16).padStart(2, "0").toUpperCase();
        }).join("") : "未知";
      },
      getBlockTypeName: function getBlockTypeName(e) {
        return 3 === e ? "扇区尾块" : 0 === e ? "数据块0" : "\u6570\u636E\u5757".concat(e);
      },
      copyBlockData: function copyBlockData(t) {
        if (!t || !Array.isArray(t)) return void e.index.showToast({
          title: "无数据可复制",
          icon: "none"
        });
        var a = this.formatBlockData(t);
        e.index.setClipboardData({
          data: a,
          success: function success() {
            e.index.showToast({
              title: "块数据已复制",
              icon: "success"
            });
          }
        });
      },
      parseAccessBits: function parseAccessBits(e) {
        if (!e || !Array.isArray(e) || e.length < 16) return "无法解析";
        var t = [e[6], e[7], e[8]],
          a = t[1] >> 4 & 15,
          s = 15 & t[1],
          r = t[2] >> 4 & 15;
        return 0 === a && 0 === s && 0 === r ? "默认访问权限" : 1 === a && 0 === s && 0 === r ? "只读访问" : 0 === a && 1 === s && 0 === r ? "读写访问" : "\u81EA\u5B9A\u4E49\u6743\u9650 (".concat(t.map(function (e) {
          return e.toString(16).padStart(2, "0");
        }).join(" "), ")");
      },
      formatPageData: function formatPageData(e) {
        return e && Array.isArray(e) ? e.map(function (e) {
          return e.toString(16).padStart(2, "0").toUpperCase();
        }).join(" ") : "无数据";
      },
      copyPageData: function copyPageData(t) {
        if (!t || !Array.isArray(t)) return void e.index.showToast({
          title: "无数据可复制",
          icon: "none"
        });
        var a = this.formatPageData(t);
        e.index.setClipboardData({
          data: a,
          success: function success() {
            e.index.showToast({
              title: "页面数据已复制",
              icon: "success"
            });
          }
        });
      },
      isSpecialPage: function isSpecialPage(e) {
        return e <= 3;
      },
      getPageTypeName: function getPageTypeName(e) {
        switch (e) {
          case 0:
          case 1:
            return "UID/BCC";
          case 2:
            return "BCC/内部";
          case 3:
            return "OTP/锁定";
          default:
            return "用户数据";
        }
      },
      getPageInfo: function getPageInfo(e, t) {
        if (!t || !Array.isArray(t)) return "无数据";
        switch (e) {
          case 0:
            return "UID\u524D4\u5B57\u8282: ".concat(t.slice(0, 3).map(function (e) {
              return e.toString(16).padStart(2, "0");
            }).join(" "));
          case 1:
            return "UID\u540E4\u5B57\u8282: ".concat(t.slice(0, 4).map(function (e) {
              return e.toString(16).padStart(2, "0");
            }).join(" "));
          case 2:
            return "BCC\u6821\u9A8C: ".concat(t[0].toString(16).padStart(2, "0"), ", \u5185\u90E8\u6570\u636E: ").concat(t[1].toString(16).padStart(2, "0"));
          case 3:
            return "OTP: ".concat(t.slice(0, 4).map(function (e) {
              return e.toString(16).padStart(2, "0");
            }).join(" "));
          default:
            return "用户自定义数据";
        }
      }
    }),
    onUnload: function onUnload() {
      this.cleanup();
    }
  };
if (!Array) {
  (e.resolveComponent("uni-icons") + e.resolveComponent("uni-popup"))();
}
Math || (function () {
  return "../../node-modules/@dcloudio/uni-ui/lib/uni-icons/uni-icons.js";
} + function () {
  return "../../node-modules/@dcloudio/uni-ui/lib/uni-popup/uni-popup.js";
})();
var o = e._export_sfc(i, [["render", function (t, a, s, r, i, o) {
  return e.e({
    a: e.p({
      type: t.isConnected ? "checkmarkempty" : "closeempty",
      color: t.isConnected ? "#4CAF50" : "#f44336",
      size: "20"
    }),
    b: e.t(t.isConnected ? "设备已连接" : "设备未连接"),
    c: t.isConnected ? 1 : "",
    d: e.p({
      type: "scan",
      color: t.isReaderMode ? "#007AFF" : "#999",
      size: "20"
    }),
    e: e.t(t.isReaderMode ? "读卡模式" : "待激活"),
    f: t.isReaderMode ? 1 : "",
    g: e.p({
      type: "wifi",
      color: "#007AFF",
      size: "24"
    }),
    h: "hf" === t.currentMode ? 1 : "",
    i: e.o(function (e) {
      return o.handleSwitchMode("hf");
    }),
    j: e.p({
      type: "radio",
      color: "#FF9500",
      size: "24"
    }),
    k: "lf" === t.currentMode ? 1 : "",
    l: e.o(function (e) {
      return o.handleSwitchMode("lf");
    }),
    m: e.f(t.supportedCardTypes, function (t, a, s) {
      return {
        a: "77ae6d1e-4-" + s,
        b: e.p({
          type: o.getCardTypeIcon(t),
          color: "#666",
          size: "20"
        }),
        c: e.t(o.getCardTypeName(t)),
        d: t
      };
    }),
    n: "scanning" === t.readingState || "reading" === t.readingState
  }, ("scanning" === t.readingState || t.readingState, {}), {
    o: e.p({
      type: o.getScanIcon(),
      color: o.getScanIconColor(),
      size: "64"
    }),
    p: e.t(o.getScanTitle()),
    q: e.t(o.getScanDescription()),
    r: o.showProgress
  }, o.showProgress ? e.e({
    s: e.t(t.progress.message),
    t: e.t(t.progress.percentage || 0),
    v: (t.progress.percentage || 0) + "%",
    w: t.progress.current && t.progress.total
  }, t.progress.current && t.progress.total ? e.e({
    x: e.t(t.progress.current),
    y: e.t(t.progress.total),
    z: t.progress.eta
  }, t.progress.eta ? {
    A: e.t(t.progress.eta)
  } : {}) : {}, {
    B: t.progress.details && t.progress.details.length > 0
  }, t.progress.details && t.progress.details.length > 0 ? {
    C: e.f(t.progress.details.slice(-3), function (t, a, s) {
      return {
        a: "77ae6d1e-6-" + s,
        b: e.p({
          type: t.success ? "checkmarkempty" : t.error ? "closeempty" : "gear",
          color: t.success ? "#4CAF50" : t.error ? "#f44336" : "#007AFF",
          size: "14"
        }),
        c: e.t(t.message),
        d: a,
        e: t.success ? 1 : "",
        f: t.error ? 1 : ""
      };
    })
  } : {}) : {}, {
    D: "scanning" === t.readingState || "reading" === t.readingState ? 1 : "",
    E: e.p({
      type: "scanning" === t.readingState || "reading" === t.readingState ? "closeempty" : "scan",
      color: "white",
      size: "20"
    }),
    F: e.t(o.getScanButtonText()),
    G: t.canStartReading ? "" : 1,
    H: "scanning" === t.readingState || "reading" === t.readingState ? 1 : "",
    I: !t.canStartReading,
    J: e.o(function () {
      return o.handleScanAction && o.handleScanAction.apply(o, arguments);
    }),
    K: !t.isReaderMode && t.isConnected
  }, !t.isReaderMode && t.isConnected ? {
    L: e.p({
      type: "gear",
      color: "white",
      size: "20"
    }),
    M: e.t(i.isInitializing ? "初始化中..." : "启动读卡模式"),
    N: e.o(function () {
      return o.handleInitializeReader && o.handleInitializeReader.apply(o, arguments);
    }),
    O: i.isInitializing
  } : {}, {
    P: t.currentCard.uid
  }, t.currentCard.uid ? e.e({
    Q: e.t(o.getCardTypeName(t.currentCard.type)),
    R: o.getCardTypeColor(t.currentCard.type),
    S: e.t(t.currentCard.uid),
    T: t.currentCard.sak
  }, t.currentCard.sak ? {
    U: e.t(t.currentCard.sak)
  } : {}, {
    V: t.currentCard.atqa
  }, t.currentCard.atqa ? {
    W: e.t(t.currentCard.atqa)
  } : {}, {
    X: t.currentCard.ats
  }, t.currentCard.ats ? {
    Y: e.t(t.currentCard.ats)
  } : {}, {
    Z: e.t(t.currentCard.protocol || "未知"),
    aa: e.t(o.formatTime(t.currentCard.readTime)),
    ab: void 0 !== t.currentCard.accessibleSectors
  }, void 0 !== t.currentCard.accessibleSectors ? {
    ac: e.t(t.currentCard.accessibleSectors),
    ad: e.t(o.totalSectorCount)
  } : {}, {
    ae: e.p({
      type: t.currentCard.isComplete ? "checkmarkempty" : "closeempty",
      color: t.currentCard.isComplete ? "#4CAF50" : "#f44336",
      size: "16"
    }),
    af: e.t(t.currentCard.isComplete ? "数据完整" : t.currentCard.hasErrors ? "数据不完整" : "基本信息"),
    ag: t.currentCard.isComplete ? 1 : "",
    ah: t.currentCard.hasErrors ? 1 : "",
    ai: t.currentCard.hasErrors && t.currentCard.errorMessage
  }, t.currentCard.hasErrors && t.currentCard.errorMessage ? {
    aj: e.t(t.currentCard.errorMessage)
  } : {}, {
    ak: e.p({
      type: "wallet",
      color: "white",
      size: "16"
    }),
    al: e.o(function () {
      return o.saveToCardPackage && o.saveToCardPackage.apply(o, arguments);
    }),
    am: e.p({
      type: "compose",
      color: "white",
      size: "16"
    }),
    an: e.o(function () {
      return o.goToCardWrite && o.goToCardWrite.apply(o, arguments);
    }),
    ao: o.isMifareClassic(t.currentCard.type) && o.shouldShowAdvancedRead
  }, o.isMifareClassic(t.currentCard.type) && o.shouldShowAdvancedRead ? {
    ap: e.p({
      type: "gear",
      color: "white",
      size: "16"
    }),
    aq: e.o(function () {
      return o.showAdvancedReadOptions && o.showAdvancedReadOptions.apply(o, arguments);
    })
  } : {}, {
    ar: o.isMifareClassic(t.currentCard.type)
  }, o.isMifareClassic(t.currentCard.type) ? {
    as: e.p({
      type: "list",
      color: "white",
      size: "16"
    }),
    at: e.o(function () {
      return o.showSectorDetails && o.showSectorDetails.apply(o, arguments);
    })
  } : {}, {
    av: o.isMifareUltralight(t.currentCard.type)
  }, o.isMifareUltralight(t.currentCard.type) ? {
    aw: e.p({
      type: "list",
      color: "white",
      size: "16"
    }),
    ax: e.o(function () {
      return o.showPageDetails && o.showPageDetails.apply(o, arguments);
    })
  } : {}, {
    ay: e.p({
      type: "download",
      color: "white",
      size: "16"
    }),
    az: e.o(function () {
      return o.exportCardData && o.exportCardData.apply(o, arguments);
    })
  }) : {}, {
    aA: t.recentReads.length > 0
  }, t.recentReads.length > 0 ? {
    aB: e.o(function () {
      return o.clearHistory && o.clearHistory.apply(o, arguments);
    }),
    aC: e.f(t.recentReads, function (t, a, s) {
      return {
        a: "77ae6d1e-16-" + s,
        b: e.p({
          type: o.getCardTypeIcon(t.type),
          color: "#666",
          size: "20"
        }),
        c: e.t(t.uid),
        d: e.t(o.getCardTypeName(t.type)),
        e: e.t(o.formatRelativeTime(t.timestamp)),
        f: t.id,
        g: e.o(function (e) {
          return o.loadHistoryCard(t);
        }, t.id)
      };
    })
  } : {}, {
    aD: e.t(t.statistics.totalReads),
    aE: e.t(t.statistics.successfulReads),
    aF: e.t(t.statistics.successRate),
    aG: e.t(t.statistics.hfReads),
    aH: e.t(t.statistics.lfReads),
    aI: e.p({
      type: "gear",
      size: "20",
      color: "#007AFF"
    }),
    aJ: e.o(function () {
      return o.showPresetMenu && o.showPresetMenu.apply(o, arguments);
    }),
    aK: e.o(o.closeAdvancedReadPopup),
    aL: e.p({
      type: "closeempty",
      size: "24"
    }),
    aM: e.p({
      type: "help",
      size: "16",
      color: "#007AFF"
    }),
    aN: e.o(function () {
      return o.showKeyDictionaryHelp && o.showKeyDictionaryHelp.apply(o, arguments);
    }),
    aO: e.t(o.keyDictionaryNames.length),
    aP: e.t(i.showKeyDictionary ? "收起" : "展开"),
    aQ: e.o(function () {
      return o.toggleKeyDictionary && o.toggleKeyDictionary.apply(o, arguments);
    }),
    aR: i.showKeyDictionary
  }, i.showKeyDictionary ? {
    aS: e.f(o.keyDictionaryNames, function (t, a, s) {
      return {
        a: e.t(t),
        b: e.t(o.formatDictionaryKey(a)),
        c: "77ae6d1e-21-" + s + ",77ae6d1e-17",
        d: e.p({
          type: i.selectedDictionaryKeys.includes(a) ? "checkmarkempty" : "circle",
          color: i.selectedDictionaryKeys.includes(a) ? "#007AFF" : "#ccc",
          size: "20"
        }),
        e: a,
        f: i.selectedDictionaryKeys.includes(a) ? 1 : "",
        g: e.o(function (e) {
          return o.toggleDictionaryKey(a);
        }, a)
      };
    })
  } : {}, {
    aT: e.o(function () {
      return o.selectAllDictionaryKeys && o.selectAllDictionaryKeys.apply(o, arguments);
    }),
    aU: e.o(function () {
      return o.clearDictionarySelection && o.clearDictionarySelection.apply(o, arguments);
    }),
    aV: e.o(function () {
      return o.selectCommonKeys && o.selectCommonKeys.apply(o, arguments);
    }),
    aW: e.o([function (e) {
      return i.customKey = e.detail.value;
    }, function () {
      return o.formatKeyInput && o.formatKeyInput.apply(o, arguments);
    }]),
    aX: i.customKey,
    aY: e.o(function () {
      return o.addCustomKey && o.addCustomKey.apply(o, arguments);
    }),
    aZ: i.customKeys.length > 0
  }, i.customKeys.length > 0 ? {
    ba: e.t(i.customKeys.length),
    bb: e.o(function () {
      return o.clearCustomKeys && o.clearCustomKeys.apply(o, arguments);
    }),
    bc: e.f(i.customKeys, function (t, a, s) {
      return {
        a: e.t(t),
        b: e.o(function (e) {
          return o.removeCustomKey(a);
        }, a),
        c: "77ae6d1e-22-" + s + ",77ae6d1e-17",
        d: a
      };
    }),
    bd: e.p({
      type: "closeempty",
      size: "16",
      color: "#f44336"
    })
  } : {}, {
    be: e.p({
      type: "flash",
      color: "quick" === i.selectedStrategy ? "#007AFF" : "#999",
      size: "20"
    }),
    bf: e.p({
      type: "quick" === i.selectedStrategy ? "checkmarkempty" : "circle",
      color: "quick" === i.selectedStrategy ? "#007AFF" : "#ccc",
      size: "20"
    }),
    bg: "quick" === i.selectedStrategy ? 1 : "",
    bh: e.o(function (e) {
      return o.selectStrategy("quick");
    }),
    bi: e.p({
      type: "gear",
      color: "standard" === i.selectedStrategy ? "#007AFF" : "#999",
      size: "20"
    }),
    bj: e.p({
      type: "standard" === i.selectedStrategy ? "checkmarkempty" : "circle",
      color: "standard" === i.selectedStrategy ? "#007AFF" : "#ccc",
      size: "20"
    }),
    bk: "standard" === i.selectedStrategy ? 1 : "",
    bl: e.o(function (e) {
      return o.selectStrategy("standard");
    }),
    bm: e.p({
      type: "search",
      color: "deep" === i.selectedStrategy ? "#007AFF" : "#999",
      size: "20"
    }),
    bn: e.p({
      type: "deep" === i.selectedStrategy ? "checkmarkempty" : "circle",
      color: "deep" === i.selectedStrategy ? "#007AFF" : "#ccc",
      size: "20"
    }),
    bo: "deep" === i.selectedStrategy ? 1 : "",
    bp: e.o(function (e) {
      return o.selectStrategy("deep");
    }),
    bq: e.p({
      type: "star",
      color: "smart" === i.selectedStrategy ? "#007AFF" : "#999",
      size: "20"
    }),
    br: e.p({
      type: "smart" === i.selectedStrategy ? "checkmarkempty" : "circle",
      color: "smart" === i.selectedStrategy ? "#007AFF" : "#ccc",
      size: "20"
    }),
    bs: "smart" === i.selectedStrategy ? 1 : "",
    bt: e.o(function (e) {
      return o.selectStrategy("smart");
    }),
    bv: i.useDefaultKeys,
    bw: e.o(function () {
      return o.toggleDefaultKeys && o.toggleDefaultKeys.apply(o, arguments);
    }),
    bx: i.useBackdoorAttack,
    by: e.o(function () {
      return o.toggleBackdoorAttack && o.toggleBackdoorAttack.apply(o, arguments);
    }),
    bz: i.useNestedAttack,
    bA: e.o(function () {
      return o.toggleNestedAttack && o.toggleNestedAttack.apply(o, arguments);
    }),
    bB: i.showDetailedProgress,
    bC: e.o(function () {
      return o.toggleDetailedProgress && o.toggleDetailedProgress.apply(o, arguments);
    }),
    bD: i.autoRetryFailedSectors,
    bE: e.o(function () {
      return o.toggleAutoRetry && o.toggleAutoRetry.apply(o, arguments);
    }),
    bF: e.o(function () {
      return o.closeAdvancedReadPopup && o.closeAdvancedReadPopup.apply(o, arguments);
    }),
    bG: e.o(function () {
      return o.startAdvancedRead && o.startAdvancedRead.apply(o, arguments);
    }),
    bH: e.sr("advancedReadPopup", "77ae6d1e-17"),
    bI: e.p({
      type: "bottom",
      "background-color": "#fff"
    }),
    bJ: e.o(o.closePageDetailsPopup),
    bK: e.p({
      type: "closeempty",
      size: "24"
    }),
    bL: t.currentCard.pages
  }, t.currentCard.pages ? {
    bM: e.f(t.currentCard.pages, function (t, a, s) {
      return e.e({
        a: e.t(a),
        b: e.t(o.getPageTypeName(a)),
        c: e.t(o.formatPageData(t)),
        d: "77ae6d1e-33-" + s + ",77ae6d1e-31",
        e: e.o(function (e) {
          return o.copyPageData(t);
        }, a),
        f: o.isSpecialPage(a)
      }, o.isSpecialPage(a) ? {
        g: e.t(o.getPageInfo(a, t))
      } : {}, {
        h: a,
        i: o.isSpecialPage(a) ? 1 : "",
        j: o.isSpecialPage(a) ? "" : 1
      });
    }),
    bN: e.p({
      type: "paperclip",
      size: "14",
      color: "#007AFF"
    })
  } : {}, {
    bO: e.sr("pageDetailsPopup", "77ae6d1e-31"),
    bP: e.p({
      type: "center",
      "background-color": "#fff"
    }),
    bQ: e.o(o.closeErrorDetailsPopup),
    bR: e.p({
      type: "closeempty",
      size: "24"
    }),
    bS: t.lastError
  }, t.lastError ? e.e({
    bT: e.p({
      type: "closeempty",
      color: "#f44336",
      size: "32"
    }),
    bU: e.t(t.lastError.title || "读取失败"),
    bV: e.t(t.lastError.message),
    bW: t.lastError.details
  }, t.lastError.details ? {
    bX: e.t(t.lastError.details)
  } : {}, {
    bY: t.lastError.suggestions && t.lastError.suggestions.length > 0
  }, t.lastError.suggestions && t.lastError.suggestions.length > 0 ? {
    bZ: e.f(t.lastError.suggestions, function (t, a, s) {
      return {
        a: e.t(a + 1),
        b: e.t(t),
        c: a
      };
    })
  } : {}, {
    ca: e.t(o.formatTime(t.lastError.timestamp))
  }) : {}, {
    cb: e.o(function () {
      return o.retryLastOperation && o.retryLastOperation.apply(o, arguments);
    }),
    cc: e.o(function () {
      return o.closeErrorDetailsPopup && o.closeErrorDetailsPopup.apply(o, arguments);
    }),
    cd: e.sr("errorDetailsPopup", "77ae6d1e-34"),
    ce: e.p({
      type: "center",
      "background-color": "#fff"
    }),
    cf: e.o(o.closeSaveOptions),
    cg: e.p({
      type: "closeempty",
      size: "24"
    }),
    ch: e.p({
      type: o.getCardTypeIcon(t.currentCard.type),
      color: o.getCardTypeColor(t.currentCard.type),
      size: "32"
    }),
    ci: e.t(o.getCardTypeName(t.currentCard.type)),
    cj: e.t(t.currentCard.uid),
    ck: e.t(t.currentCard.uid),
    cl: t.currentCard.sak
  }, t.currentCard.sak ? {
    cm: e.t(t.currentCard.sak)
  } : {}, {
    cn: t.currentCard.atqa
  }, t.currentCard.atqa ? {
    co: e.t(t.currentCard.atqa)
  } : {}, {
    cp: e.t(o.formatTime(t.currentCard.readTime)),
    cq: void 0 !== t.currentCard.accessibleSectors
  }, void 0 !== t.currentCard.accessibleSectors ? {
    cr: e.t(t.currentCard.accessibleSectors),
    cs: e.t(o.totalSectorCount)
  } : {}, {
    ct: i.saveCardName,
    cv: e.o(function (e) {
      return i.saveCardName = e.detail.value;
    }),
    cw: i.saveCompleteData,
    cx: e.o(function () {
      return o.toggleSaveCompleteData && o.toggleSaveCompleteData.apply(o, arguments);
    }),
    cy: i.saveReadTime,
    cz: e.o(function () {
      return o.toggleSaveReadTime && o.toggleSaveReadTime.apply(o, arguments);
    }),
    cA: e.o(function () {
      return o.closeSaveOptions && o.closeSaveOptions.apply(o, arguments);
    }),
    cB: e.o(function () {
      return o.executeSave && o.executeSave.apply(o, arguments);
    }),
    cC: e.sr("saveOptionsPopup", "77ae6d1e-37"),
    cD: e.p({
      type: "center",
      "background-color": "#fff"
    }),
    cE: t.lastError
  }, t.lastError ? {
    cF: e.p({
      type: "closeempty",
      color: "#f44336",
      size: "20"
    }),
    cG: e.t(t.lastError.message),
    cH: e.o(function () {
      return o.showErrorDetails && o.showErrorDetails.apply(o, arguments);
    }),
    cI: e.o(function () {
      return o.dismissError && o.dismissError.apply(o, arguments);
    })
  } : {});
}], ["__scopeId", "data-v-77ae6d1e"]]);
wx.createPage(o); 
 			}); 	require("pages/reader/reader.js");
 		__wxRoute = 'pages/card-write/card-write';__wxRouteBegin = true; 	__wxAppCurrentFile__ = 'pages/card-write/card-write.js';	define("pages/card-write/card-write.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";

var _defineProperty2 = require("../../@babel/runtime/helpers/defineProperty");
var _regeneratorRuntime2 = require("../../@babel/runtime/helpers/regeneratorRuntime");
var _asyncToGenerator2 = require("../../@babel/runtime/helpers/asyncToGenerator");
var _objectSpread2 = require("../../@babel/runtime/helpers/objectSpread2");
var e = require("../../common/vendor.js"),
  t = require("../../utils/chameleon-protocol.js"),
  r = require("../../services/bluetooth.js"),
  i = {
    name: "CardWritePage",
    data: function data() {
      return {
        currentStep: 0,
        steps: [{
          title: "选择卡片"
        }, {
          title: "检测魔术卡"
        }, {
          title: "写入数据"
        }],
        selectedCard: null,
        availableCards: [],
        detecting: !1,
        magicCardDetected: !1,
        detectedMagicType: null,
        isCardCompatible: !0,
        writeProgress: -1,
        currentWriteStep: "",
        writeETA: "",
        writeErrors: [],
        writeWarnings: []
      };
    },
    computed: _objectSpread2(_objectSpread2(_objectSpread2(_objectSpread2({}, e.mapState("device", ["isConnected"])), e.mapState("reader", ["isReaderMode"])), e.mapGetters("cards", ["allCards"])), {}, {
      canProceed: function canProceed() {
        switch (this.currentStep) {
          case 0:
            return null !== this.selectedCard;
          case 1:
            return this.magicCardDetected;
          default:
            return !1;
        }
      },
      canWrite: function canWrite() {
        return this.isConnected && this.selectedCard && this.magicCardDetected;
      }
    }),
    onLoad: function onLoad(t) {
      var _this = this;
      return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee() {
        var _e;
        return _regeneratorRuntime2().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              _context.next = 2;
              return _this.loadAvailableCards();
            case 2:
              _context.next = 4;
              return _this.checkReaderMode();
            case 4:
              if (!t.cardId) {
                _context.next = 7;
                break;
              }
              _e = _this.availableCards.find(function (e) {
                return e.id === t.cardId;
              });
              _e ? (_this.selectedCard = _e, console.log("[CardWrite] 预选卡片:", _e.name), _this.isConnected && _this.isReaderMode && setTimeout(function () {
                _this.currentStep = 1;
              }, 500)) : console.warn("[CardWrite] 未找到指定的卡片ID:", t.cardId);
            case 7:
              0 === _this.availableCards.length && e.index.showModal({
                title: "没有可写入的卡片",
                content: "卡包中没有可写入的卡片，请先读取一些卡片并保存到卡包中。",
                confirmText: "去读卡",
                cancelText: "返回",
                success: function success(t) {
                  t.confirm ? e.index.redirectTo({
                    url: "/pages/reader/reader"
                  }) : e.index.navigateBack();
                }
              });
            case 8:
            case "end":
              return _context.stop();
          }
        }, _callee);
      }))();
    },
    methods: _objectSpread2(_objectSpread2({}, e.mapActions("cards", ["loadCards"])), {}, {
      loadAvailableCards: function loadAvailableCards() {
        var _this2 = this;
        return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee2() {
          return _regeneratorRuntime2().wrap(function _callee2$(_context2) {
            while (1) switch (_context2.prev = _context2.next) {
              case 0:
                _context2.prev = 0;
                _context2.next = 3;
                return _this2.loadCards();
              case 3:
                _this2.availableCards = _this2.allCards.filter(function (e) {
                  return e.uid && "" !== e.uid.trim() && e.data && e.data.length > 0;
                });
                console.log("[CardWrite] 加载可写入卡片:", _this2.availableCards.length);
                _context2.next = 10;
                break;
              case 7:
                _context2.prev = 7;
                _context2.t0 = _context2["catch"](0);
                console.error("[CardWrite] 加载卡片失败:", _context2.t0), e.index.showToast({
                  title: "加载卡片失败",
                  icon: "none"
                });
              case 10:
              case "end":
                return _context2.stop();
            }
          }, _callee2, null, [[0, 7]]);
        }))();
      },
      checkReaderMode: function checkReaderMode() {
        var _this3 = this;
        return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee3() {
          return _regeneratorRuntime2().wrap(function _callee3$(_context3) {
            while (1) switch (_context3.prev = _context3.next) {
              case 0:
                if (!_this3.isConnected) {
                  _context3.next = 16;
                  break;
                }
                if (_this3.isReaderMode) {
                  _context3.next = 14;
                  break;
                }
                _context3.prev = 2;
                e.index.showLoading({
                  title: "设置读卡模式..."
                });
                _context3.next = 6;
                return r.bluetoothService.setReaderDeviceMode(!0);
              case 6:
                _this3.$store.commit("reader/SET_READER_MODE", !0);
                e.index.hideLoading();
                console.log("[CardWrite] 读卡模式已启动");
                _context3.next = 14;
                break;
              case 11:
                _context3.prev = 11;
                _context3.t0 = _context3["catch"](2);
                e.index.hideLoading(), console.error("[CardWrite] 设置读卡模式失败:", _context3.t0), e.index.showToast({
                  title: "读卡模式启动失败",
                  icon: "none"
                });
              case 14:
                _context3.next = 17;
                break;
              case 16:
                e.index.showModal({
                  title: "设备未连接",
                  content: "写卡功能需要连接到Chameleon设备，请先连接设备。",
                  confirmText: "去连接",
                  cancelText: "返回",
                  success: function success(t) {
                    t.confirm ? e.index.redirectTo({
                      url: "/pages/connect/connect"
                    }) : e.index.navigateBack();
                  }
                });
              case 17:
              case "end":
                return _context3.stop();
            }
          }, _callee3, null, [[2, 11]]);
        }))();
      },
      showCardSelection: function showCardSelection() {
        0 !== this.availableCards.length ? this.$refs.cardSelectionPopup.open() : e.index.showToast({
          title: "没有可写入的卡片",
          icon: "none"
        });
      },
      closeCardSelection: function closeCardSelection() {
        this.$refs.cardSelectionPopup.close();
      },
      selectCard: function selectCard(e) {
        this.selectedCard = e, this.closeCardSelection(), console.log("[CardWrite] 选择卡片:", e.name);
      },
      startDetection: function startDetection() {
        var _this4 = this;
        return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee4() {
          var _t;
          return _regeneratorRuntime2().wrap(function _callee4$(_context4) {
            while (1) switch (_context4.prev = _context4.next) {
              case 0:
                if (!_this4.isConnected) {
                  _context4.next = 26;
                  break;
                }
                _this4.detecting = !0, _this4.magicCardDetected = !1;
                _context4.prev = 2;
                console.log("[CardWrite] 开始检测魔术卡...");
                _context4.next = 6;
                return r.bluetoothService.detectMagicCardType();
              case 6:
                _t = _context4.sent;
                if (_t.success) {
                  _context4.next = 9;
                  break;
                }
                throw new Error(_t.error || "未检测到支持的魔术卡");
              case 9:
                _this4.detectedMagicType = _t.type;
                _this4.magicCardDetected = !0;
                _context4.next = 13;
                return _this4.checkCardCompatibility();
              case 13:
                _this4.isCardCompatible = _context4.sent;
                console.log("[CardWrite] 检测到魔术卡类型:", _this4.detectedMagicType);
                e.index.showToast({
                  title: "\u68C0\u6D4B\u6210\u529F: ".concat(_this4.getMagicCardName(_this4.detectedMagicType)),
                  icon: "success"
                });
                _context4.next = 21;
                break;
              case 18:
                _context4.prev = 18;
                _context4.t0 = _context4["catch"](2);
                console.error("[CardWrite] 魔术卡检测失败:", _context4.t0), e.index.showToast({
                  title: _context4.t0.message || "检测失败",
                  icon: "none"
                });
              case 21:
                _context4.prev = 21;
                _this4.detecting = !1;
                return _context4.finish(21);
              case 24:
                _context4.next = 27;
                break;
              case 26:
                e.index.showToast({
                  title: "设备未连接",
                  icon: "none"
                });
              case 27:
              case "end":
                return _context4.stop();
            }
          }, _callee4, null, [[2, 18, 21, 24]]);
        }))();
      },
      restartDetection: function restartDetection() {
        this.magicCardDetected = !1, this.detectedMagicType = null;
      },
      checkCardCompatibility: function checkCardCompatibility() {
        var _this5 = this;
        return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee5() {
          var _e2;
          return _regeneratorRuntime2().wrap(function _callee5$(_context5) {
            while (1) switch (_context5.prev = _context5.next) {
              case 0:
                if (!(!_this5.selectedCard || !_this5.detectedMagicType)) {
                  _context5.next = 2;
                  break;
                }
                return _context5.abrupt("return", !1);
              case 2:
                _context5.prev = 2;
                _context5.next = 5;
                return r.bluetoothService.verifyCardCompatibility(_this5.selectedCard, _this5.detectedMagicType);
              case 5:
                _e2 = _context5.sent;
                return _context5.abrupt("return", (_e2.warnings && _e2.warnings.length > 0 && (_this5.writeWarnings = _e2.warnings), _e2.compatible));
              case 9:
                _context5.prev = 9;
                _context5.t0 = _context5["catch"](2);
                return _context5.abrupt("return", (console.error("[CardWrite] 兼容性检查失败:", _context5.t0), !1));
              case 12:
              case "end":
                return _context5.stop();
            }
          }, _callee5, null, [[2, 9]]);
        }))();
      },
      startWrite: function startWrite() {
        var _this6 = this;
        return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee6() {
          var _t2;
          return _regeneratorRuntime2().wrap(function _callee6$(_context6) {
            while (1) switch (_context6.prev = _context6.next) {
              case 0:
                if (!_this6.canWrite) {
                  _context6.next = 13;
                  break;
                }
                _this6.writeProgress = 0, _this6.writeErrors = [], _this6.currentWriteStep = "准备写入...";
                _context6.prev = 2;
                console.log("[CardWrite] 开始写入数据...");
                _context6.next = 6;
                return r.bluetoothService.writeMagicCard(_this6.selectedCard, _this6.detectedMagicType, function (e, t) {
                  _this6.writeProgress = e, _this6.currentWriteStep = t;
                });
              case 6:
                _t2 = _context6.sent;
                _t2.failedBlocks && _t2.failedBlocks.length > 0 && (_this6.writeErrors = _t2.failedBlocks.map(function (e) {
                  return {
                    block: e,
                    message: "写入失败"
                  };
                })), console.log("[CardWrite] 写入完成，结果:", _t2), _t2.success ? e.index.showToast({
                  title: "写入成功",
                  icon: "success"
                }) : e.index.showToast({
                  title: "\u5199\u5165\u5B8C\u6210\uFF0C".concat(_this6.writeErrors.length, "\u4E2A\u5757\u5931\u8D25"),
                  icon: "none"
                });
                _context6.next = 13;
                break;
              case 10:
                _context6.prev = 10;
                _context6.t0 = _context6["catch"](2);
                console.error("[CardWrite] 写入失败:", _context6.t0), e.index.showToast({
                  title: _context6.t0.message || "写入失败",
                  icon: "none"
                }), _this6.writeProgress = -1;
              case 13:
              case "end":
                return _context6.stop();
            }
          }, _callee6, null, [[2, 10]]);
        }))();
      },
      goBack: function goBack() {
        this.currentStep > 0 && this.currentStep--;
      },
      goNext: function goNext() {
        this.currentStep < 2 && this.canProceed && this.currentStep++;
      },
      finishWrite: function finishWrite() {
        e.index.navigateBack();
      },
      writeAgain: function writeAgain() {
        this.writeProgress = -1, this.writeErrors = [], this.writeWarnings = [];
      },
      delay: function delay(e) {
        return new Promise(function (t) {
          return setTimeout(t, e);
        });
      },
      formatUID: function formatUID(e) {
        return e ? e.replace(/(.{2})/g, "$1 ").trim().toUpperCase() : "";
      },
      getCardIcon: function getCardIcon(e) {
        return e >= t.TagType.MIFARE_1024 && e <= t.TagType.MIFARE_4096 ? "creditcard" : e >= t.TagType.NTAG_213 && e <= t.TagType.MIFARE_Ultralight_EV1_164B ? "chip" : e === t.TagType.EM410X ? "key" : "creditcard";
      },
      getCardTypeName: function getCardTypeName(e) {
        var _t$TagType$MIFARE_;
        return (_t$TagType$MIFARE_ = {}, _defineProperty2(_t$TagType$MIFARE_, t.TagType.MIFARE_1024, "Mifare Classic 1K"), _defineProperty2(_t$TagType$MIFARE_, t.TagType.MIFARE_2048, "Mifare Classic 2K"), _defineProperty2(_t$TagType$MIFARE_, t.TagType.MIFARE_4096, "Mifare Classic 4K"), _defineProperty2(_t$TagType$MIFARE_, t.TagType.NTAG_213, "NTAG213"), _defineProperty2(_t$TagType$MIFARE_, t.TagType.NTAG_215, "NTAG215"), _defineProperty2(_t$TagType$MIFARE_, t.TagType.NTAG_216, "NTAG216"), _defineProperty2(_t$TagType$MIFARE_, t.TagType.EM410X, "EM410X"), _t$TagType$MIFARE_)[e] || "未知类型";
      },
      getCardDataSize: function getCardDataSize(e) {
        if (!e.data) return "0 KB";
        return "".concat((16 * e.data.length / 1024).toFixed(1), " KB");
      },
      getMagicCardName: function getMagicCardName(e) {
        return {
          gen1: "Gen1 魔术卡",
          gen2: "Gen2 魔术卡",
          gen3: "Gen3 魔术卡",
          ntag: "NTAG 魔术卡"
        }[e] || "未知魔术卡";
      },
      getMagicCardColor: function getMagicCardColor(e) {
        return {
          gen1: "#FF6B35",
          gen2: "#4ECDC4",
          gen3: "#45B7D1",
          ntag: "#96CEB4"
        }[e] || "#999";
      },
      getMagicCardFeatures: function getMagicCardFeatures(e) {
        return {
          gen1: "后门指令访问",
          gen2: "直接块写入",
          gen3: "高级写入模式",
          ntag: "标准ISO14443写入"
        }[e] || "标准写入";
      },
      getDataBlockCount: function getDataBlockCount() {
        return this.selectedCard && this.selectedCard.data ? this.selectedCard.data.length : 0;
      }
    })
  };
if (!Array) {
  (e.resolveComponent("uni-icons") + e.resolveComponent("uni-popup"))();
}
Math || (function () {
  return "../../node-modules/@dcloudio/uni-ui/lib/uni-icons/uni-icons.js";
} + function () {
  return "../../node-modules/@dcloudio/uni-ui/lib/uni-popup/uni-popup.js";
})();
var a = e._export_sfc(i, [["render", function (t, r, i, a, s, c) {
  var o;
  return e.e({
    a: e.p({
      type: t.isConnected ? "checkmarkempty" : "closeempty",
      color: t.isConnected ? "#4CAF50" : "#f44336",
      size: "20"
    }),
    b: e.t(t.isConnected ? "设备已连接" : "设备未连接"),
    c: t.isConnected ? 1 : "",
    d: e.p({
      type: "scan",
      color: t.isReaderMode ? "#007AFF" : "#999",
      size: "20"
    }),
    e: e.t(t.isReaderMode ? "读卡模式" : "待激活"),
    f: t.isReaderMode ? 1 : "",
    g: e.f(s.steps, function (t, r, i) {
      return e.e({
        a: s.currentStep > r
      }, s.currentStep > r ? {
        b: "64ca8dc1-2-" + i,
        c: e.p({
          type: "checkmarkempty",
          color: "white",
          size: "16"
        })
      } : {
        d: e.t(r + 1)
      }, {
        e: e.t(t.title),
        f: r,
        g: s.currentStep >= r ? 1 : "",
        h: s.currentStep === r ? 1 : "",
        i: s.currentStep > r ? 1 : ""
      });
    }),
    h: 0 === s.currentStep
  }, 0 === s.currentStep ? e.e({
    i: e.t(s.steps[0].title),
    j: s.selectedCard
  }, s.selectedCard ? {
    k: e.p({
      type: c.getCardIcon(s.selectedCard.tag),
      color: s.selectedCard.color || "#007AFF",
      size: "32"
    }),
    l: e.t(s.selectedCard.name),
    m: e.t(c.formatUID(s.selectedCard.uid)),
    n: e.t(c.getCardTypeName(s.selectedCard.tag)),
    o: e.p({
      type: "forward",
      color: "#007AFF",
      size: "16"
    }),
    p: e.o(function () {
      return c.showCardSelection && c.showCardSelection.apply(c, arguments);
    })
  } : {
    q: e.p({
      type: "plus",
      color: "#999",
      size: "48"
    }),
    r: e.o(function () {
      return c.showCardSelection && c.showCardSelection.apply(c, arguments);
    })
  }, {
    s: 0 === s.availableCards.length
  }, 0 === s.availableCards.length ? {
    t: e.p({
      type: "info",
      color: "#999",
      size: "32"
    })
  } : {}) : {}, {
    v: 1 === s.currentStep
  }, 1 === s.currentStep ? e.e({
    w: e.t(s.steps[1].title),
    x: !s.magicCardDetected
  }, s.magicCardDetected ? e.e({
    G: e.p({
      type: "checkmarkempty",
      color: "#4CAF50",
      size: "32"
    }),
    H: e.t(c.getMagicCardName(s.detectedMagicType)),
    I: c.getMagicCardColor(s.detectedMagicType),
    J: e.t(c.getMagicCardName(s.detectedMagicType)),
    K: e.t(c.getMagicCardFeatures(s.detectedMagicType)),
    L: e.t(s.isCardCompatible ? "兼容" : "可能不兼容"),
    M: s.isCardCompatible ? 1 : "",
    N: s.isCardCompatible ? "" : 1,
    O: !s.isCardCompatible
  }, s.isCardCompatible ? {} : {
    P: e.p({
      type: "info",
      color: "#FF9500",
      size: "20"
    })
  }, {
    Q: e.p({
      type: "refreshempty",
      color: "#007AFF",
      size: "16"
    }),
    R: e.o(function () {
      return c.restartDetection && c.restartDetection.apply(c, arguments);
    })
  }) : {
    y: s.detecting ? 1 : "",
    z: e.p({
      type: s.detecting ? "refreshempty" : "scan",
      color: s.detecting ? "#007AFF" : "#999",
      size: "64"
    }),
    A: e.t(s.detecting ? "正在检测魔术卡..." : "将魔术卡靠近设备"),
    B: e.t(s.detecting ? "请保持卡片位置不变" : "支持 Gen1、Gen2、NTAG 等类型"),
    C: e.p({
      type: "scan",
      color: "white",
      size: "16"
    }),
    D: e.t(s.detecting ? "检测中..." : "开始检测"),
    E: !t.isConnected || s.detecting,
    F: e.o(function () {
      return c.startDetection && c.startDetection.apply(c, arguments);
    })
  }) : {}, {
    S: 2 === s.currentStep
  }, 2 === s.currentStep ? e.e({
    T: e.t(s.steps[2].title),
    U: -1 === s.writeProgress
  }, -1 === s.writeProgress ? e.e({
    V: e.p({
      type: "forward",
      color: "#007AFF",
      size: "24"
    }),
    W: e.t(null == (o = s.selectedCard) ? void 0 : o.name),
    X: e.t(c.getMagicCardName(s.detectedMagicType)),
    Y: e.t(c.getDataBlockCount()),
    Z: s.writeWarnings.length > 0
  }, s.writeWarnings.length > 0 ? {
    aa: e.p({
      type: "info",
      color: "#FF9500",
      size: "20"
    }),
    ab: e.f(s.writeWarnings, function (t, r, i) {
      return {
        a: e.t(t),
        b: r
      };
    })
  } : {}) : s.writeProgress >= 0 && s.writeProgress < 100 ? e.e({
    ad: e.t(s.writeProgress),
    ae: s.writeProgress + "%",
    af: e.t(s.currentWriteStep),
    ag: s.writeETA
  }, s.writeETA ? {
    ah: e.t(s.writeETA)
  } : {}, {
    ai: s.writeErrors.length > 0
  }, s.writeErrors.length > 0 ? {
    aj: e.f(s.writeErrors, function (t, r, i) {
      return {
        a: e.t(t.block),
        b: e.t(t.message),
        c: r
      };
    })
  } : {}) : 100 === s.writeProgress ? e.e({
    al: e.p({
      type: "checkmarkempty",
      color: "#4CAF50",
      size: "64"
    }),
    am: e.t(0 === s.writeErrors.length ? "所有数据写入成功" : "\u5199\u5165\u5B8C\u6210\uFF0C".concat(s.writeErrors.length, " \u4E2A\u5757\u5199\u5165\u5931\u8D25")),
    an: s.writeErrors.length > 0
  }, s.writeErrors.length > 0 ? {
    ao: e.f(s.writeErrors, function (t, r, i) {
      return {
        a: e.t(t.block),
        b: r
      };
    })
  } : {}) : {}, {
    ac: s.writeProgress >= 0 && s.writeProgress < 100,
    ak: 100 === s.writeProgress
  }) : {}, {
    ap: s.currentStep > 0 && -1 === s.writeProgress
  }, s.currentStep > 0 && -1 === s.writeProgress ? {
    aq: e.p({
      type: "back",
      color: "#666",
      size: "16"
    }),
    ar: e.o(function () {
      return c.goBack && c.goBack.apply(c, arguments);
    })
  } : {}, {
    as: s.currentStep < 2
  }, s.currentStep < 2 ? {
    at: e.p({
      type: "forward",
      color: "white",
      size: "16"
    }),
    av: !c.canProceed,
    aw: e.o(function () {
      return c.goNext && c.goNext.apply(c, arguments);
    })
  } : {}, {
    ax: 2 === s.currentStep && -1 === s.writeProgress
  }, 2 === s.currentStep && -1 === s.writeProgress ? {
    ay: e.p({
      type: "download",
      color: "white",
      size: "16"
    }),
    az: !c.canWrite,
    aA: e.o(function () {
      return c.startWrite && c.startWrite.apply(c, arguments);
    })
  } : {}, {
    aB: 100 === s.writeProgress
  }, 100 === s.writeProgress ? {
    aC: e.p({
      type: "checkmarkempty",
      color: "white",
      size: "16"
    }),
    aD: e.o(function () {
      return c.finishWrite && c.finishWrite.apply(c, arguments);
    })
  } : {}, {
    aE: 100 === s.writeProgress
  }, 100 === s.writeProgress ? {
    aF: e.p({
      type: "refreshempty",
      color: "#666",
      size: "16"
    }),
    aG: e.o(function () {
      return c.writeAgain && c.writeAgain.apply(c, arguments);
    })
  } : {}, {
    aH: e.o(c.closeCardSelection),
    aI: e.p({
      type: "closeempty",
      size: "24"
    }),
    aJ: e.f(s.availableCards, function (t, r, i) {
      return e.e({
        a: "64ca8dc1-22-" + i + ",64ca8dc1-20",
        b: e.p({
          type: c.getCardIcon(t.tag),
          color: t.color || "#007AFF",
          size: "24"
        }),
        c: e.t(t.name),
        d: e.t(c.formatUID(t.uid)),
        e: e.t(c.getCardTypeName(t.tag)),
        f: e.t(c.getCardDataSize(t)),
        g: s.selectedCard && s.selectedCard.id === t.id
      }, s.selectedCard && s.selectedCard.id === t.id ? {
        h: "64ca8dc1-23-" + i + ",64ca8dc1-20",
        i: e.p({
          type: "checkmarkempty",
          color: "#007AFF",
          size: "20"
        })
      } : {}, {
        j: t.id,
        k: s.selectedCard && s.selectedCard.id === t.id ? 1 : "",
        l: e.o(function (e) {
          return c.selectCard(t);
        }, t.id)
      });
    }),
    aK: e.sr("cardSelectionPopup", "64ca8dc1-20"),
    aL: e.p({
      type: "bottom",
      "background-color": "#fff"
    })
  });
}], ["__scopeId", "data-v-64ca8dc1"]]);
wx.createPage(a); 
 			}); 	require("pages/card-write/card-write.js");
 		__wxRoute = 'pages/sector-details/sector-details';__wxRouteBegin = true; 	__wxAppCurrentFile__ = 'pages/sector-details/sector-details.js';	define("pages/sector-details/sector-details.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";

var _objectSpread2 = require("../../@babel/runtime/helpers/objectSpread2");
var a = require("../../common/vendor.js"),
  t = require("../../utils/chameleon-protocol.js"),
  e = {
    name: "SectorDetails",
    components: {
      CardDataViewer: function CardDataViewer() {
        return "../../components/card-data-viewer/card-data-viewer.js";
      }
    },
    data: function data() {
      return {
        cardData: {},
        sectors: [],
        viewMode: "sectors",
        isDataEditing: !1,
        hasUnsavedChanges: !1
      };
    },
    computed: {
      totalSectors: function totalSectors() {
        return this.sectors.length;
      },
      accessibleSectors: function accessibleSectors() {
        return this.sectors.filter(function (a) {
          return a.readable;
        }).length;
      },
      successRate: function successRate() {
        return 0 === this.totalSectors ? 0 : Math.round(this.accessibleSectors / this.totalSectors * 100);
      },
      unifiedCardData: function unifiedCardData() {
        var a = [];
        return this.sectors.forEach(function (t, e) {
          if (t.readable && t.blocks) t.blocks.forEach(function (t) {
            a.push(t);
          });else for (var _r = 0; _r < 4; _r++) a.push(new Array(16).fill(0));
        }), {
          tag: t.TagType.MIFARE_1024,
          uid: this.cardData.uid || [],
          data: a,
          type: this.cardData.type || "Mifare Classic"
        };
      }
    },
    onLoad: function onLoad(a) {
      this.loadCardData();
    },
    methods: {
      loadCardData: function loadCardData() {
        var a = this.$store.state.reader.currentCard;
        a && (this.cardData = a, this.sectors = a.sectors || []);
      },
      onCardDataChanged: function onCardDataChanged(t) {
        this.hasUnsavedChanges = !0;
        var e = [];
        for (var _a = 0; _a < t.data.length; _a += 4) {
          var _r2 = Math.floor(_a / 4),
            o = this.sectors[_r2] || {
              readable: !0
            };
          e.push(_objectSpread2(_objectSpread2({}, o), {}, {
            blocks: t.data.slice(_a, _a + 4)
          }));
        }
        this.sectors = e;
        var r = _objectSpread2(_objectSpread2({}, this.cardData), {}, {
          sectors: e,
          data: t.data,
          modifiedAt: new Date().toISOString()
        });
        this.$store.commit("reader/SET_CURRENT_CARD", r), this.hasUnsavedChanges = !1, a.index.showToast({
          title: "扇区数据已更新",
          icon: "success"
        });
      },
      onEditStart: function onEditStart() {
        this.isDataEditing = !0;
      },
      onEditCancel: function onEditCancel() {
        this.isDataEditing = !1, this.hasUnsavedChanges = !1, this.loadCardData();
      },
      goBack: function goBack() {
        a.index.navigateBack();
      },
      formatUID: function formatUID(a) {
        return a && Array.isArray(a) ? a.map(function (a) {
          return a.toString(16).padStart(2, "0").toUpperCase();
        }).join(" ") : "未知";
      },
      formatKey: function formatKey(a) {
        return a && Array.isArray(a) ? a.map(function (a) {
          return a.toString(16).padStart(2, "0").toUpperCase();
        }).join(" ") : "未知";
      },
      formatBlockData: function formatBlockData(a) {
        return a && Array.isArray(a) ? a.map(function (a) {
          return a.toString(16).padStart(2, "0").toUpperCase();
        }).join(" ") : "无数据";
      },
      formatBlockDataWithKeys: function formatBlockDataWithKeys(a, t, e) {
        return a && Array.isArray(a) ? 3 === t ? this.formatTrailerBlock(a, e) : this.formatBlockData(a) : "无数据";
      },
      formatTrailerBlock: function formatTrailerBlock(a, t) {
        if (!a || !Array.isArray(a) || a.length < 16) return "无数据";
        var e = "",
          r = "",
          o = "";
        return e = t.keyA && Array.isArray(t.keyA) ? t.keyA.map(function (a) {
          return a.toString(16).padStart(2, "0").toUpperCase();
        }).join(" ") : a.slice(0, 6).map(function (a) {
          return a.toString(16).padStart(2, "0").toUpperCase();
        }).join(" "), r = a.slice(6, 10).map(function (a) {
          return a.toString(16).padStart(2, "0").toUpperCase();
        }).join(" "), o = t.keyB && Array.isArray(t.keyB) ? t.keyB.map(function (a) {
          return a.toString(16).padStart(2, "0").toUpperCase();
        }).join(" ") : a.slice(10, 16).map(function (a) {
          return a.toString(16).padStart(2, "0").toUpperCase();
        }).join(" "), "".concat(e, " ").concat(r, " ").concat(o);
      },
      getBlockTypeName: function getBlockTypeName(a) {
        return 3 === a ? "扇区尾块" : 0 === a ? "数据块0" : "\u6570\u636E\u5757".concat(a);
      },
      copyBlockData: function copyBlockData(t) {
        if (!t || !Array.isArray(t)) return void a.index.showToast({
          title: "无数据可复制",
          icon: "none"
        });
        var e = this.formatBlockData(t);
        a.index.setClipboardData({
          data: e,
          success: function success() {
            a.index.showToast({
              title: "块数据已复制",
              icon: "success"
            });
          }
        });
      },
      parseAccessBits: function parseAccessBits(a) {
        if (!a || !Array.isArray(a) || a.length < 16) return "无法解析";
        var t = [a[6], a[7], a[8]],
          e = t[1] >> 4 & 15,
          r = 15 & t[1],
          o = t[2] >> 4 & 15;
        return 0 === e && 0 === r && 0 === o ? "默认访问权限" : 1 === e && 0 === r && 0 === o ? "只读访问" : 0 === e && 1 === r && 0 === o ? "读写访问" : "\u81EA\u5B9A\u4E49\u6743\u9650 (".concat(t.map(function (a) {
          return a.toString(16).padStart(2, "0");
        }).join(" "), ")");
      },
      exportAllData: function exportAllData() {
        var t = {
            cardInfo: this.cardData,
            sectors: this.sectors,
            exportTime: new Date().toISOString()
          },
          e = JSON.stringify(t, null, 2);
        a.index.setClipboardData({
          data: e,
          success: function success() {
            a.index.showToast({
              title: "全部数据已复制",
              icon: "success"
            });
          }
        });
      }
    }
  };
if (!Array) {
  (a.resolveComponent("uni-icons") + a.resolveComponent("card-data-viewer"))();
}
Math || (function () {
  return "../../node-modules/@dcloudio/uni-ui/lib/uni-icons/uni-icons.js";
} + function () {
  return "../../components/card-data-viewer/card-data-viewer.js";
})();
var r = a._export_sfc(e, [["render", function (t, e, r, o, s, i) {
  return a.e({
    a: a.t(s.cardData.type || "未知卡片"),
    b: a.t(i.formatUID(s.cardData.uid)),
    c: a.t(i.accessibleSectors),
    d: a.t(i.totalSectors),
    e: a.t(i.successRate),
    f: a.p({
      type: "download",
      size: "16",
      color: "white"
    }),
    g: a.o(function () {
      return i.exportAllData && i.exportAllData.apply(i, arguments);
    }),
    h: "sectors" === s.viewMode ? 1 : "",
    i: a.o(function (a) {
      return s.viewMode = "sectors";
    }),
    j: "unified" === s.viewMode ? 1 : "",
    k: a.o(function (a) {
      return s.viewMode = "unified";
    }),
    l: "unified" === s.viewMode
  }, "unified" === s.viewMode ? {
    m: a.o(i.onCardDataChanged),
    n: a.o(i.onEditStart),
    o: a.o(i.onEditCancel),
    p: a.p({
      card: i.unifiedCardData,
      editable: !0
    })
  } : {
    q: a.f(s.sectors, function (t, e, r) {
      return a.e({
        a: a.t(e),
        b: "3320a0d2-2-" + r,
        c: a.p({
          type: t.readable ? "checkmarkempty" : "closeempty",
          color: t.readable ? "#4CAF50" : "#f44336",
          size: "16"
        }),
        d: a.t(t.readable ? "可读" : "不可读"),
        e: t.readable && t.blocks
      }, t.readable && t.blocks ? {
        f: a.f(t.blocks, function (o, s, c) {
          return {
            a: a.t(4 * e + s),
            b: a.t(i.getBlockTypeName(s)),
            c: "3320a0d2-3-" + r + "-" + c,
            d: a.o(function (a) {
              return i.copyBlockData(o);
            }, s),
            e: a.t(i.formatBlockDataWithKeys(o, s, t)),
            f: s,
            g: 3 === s ? 1 : "",
            h: s < 3 ? 1 : ""
          };
        }),
        g: a.p({
          type: "paperclip",
          size: "14",
          color: "#007AFF"
        })
      } : {}, {
        h: !t.readable
      }, t.readable ? {} : {
        i: "3320a0d2-4-" + r,
        j: a.p({
          type: "info",
          size: "16",
          color: "#999"
        })
      }, {
        k: e,
        l: t.readable ? 1 : "",
        m: t.readable ? "" : 1
      });
    })
  });
}], ["__scopeId", "data-v-3320a0d2"]]);
wx.createPage(r); 
 			}); 	require("pages/sector-details/sector-details.js");
 		__wxRoute = 'pages/settings/settings';__wxRouteBegin = true; 	__wxAppCurrentFile__ = 'pages/settings/settings.js';	define("pages/settings/settings.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";

var _regeneratorRuntime2 = require("../../@babel/runtime/helpers/regeneratorRuntime");
var _toConsumableArray2 = require("../../@babel/runtime/helpers/toConsumableArray");
var _asyncToGenerator2 = require("../../@babel/runtime/helpers/asyncToGenerator");
var _objectSpread2 = require("../../@babel/runtime/helpers/objectSpread2");
var e = require("../../common/vendor.js"),
  t = require("../../utils/chameleon-protocol.js"),
  i = require("../../services/bluetooth.js"),
  o = {
    name: "SettingsPage",
    components: {
      SettingItem: function SettingItem() {
        return "../../components/setting-item.js";
      }
    },
    data: function data() {
      return {
        deviceSettings: null,
        slotPollingConfig: new Array(16).fill(!1),
        originalSlotPollingConfig: new Array(16).fill(!1),
        loading: !1,
        currentPollingDelay: 350
      };
    },
    computed: _objectSpread2(_objectSpread2({}, e.mapGetters("device", ["isConnected", "deviceInfo", "batteryInfo", "deviceModelName", "deviceModeName", "batteryStatusText"])), {}, {
      animationOptions: function animationOptions() {
        return t.ChameleonProtocol.getAnimationOptions();
      },
      buttonConfigOptions: function buttonConfigOptions() {
        return t.ChameleonProtocol.getButtonConfigOptions();
      }
    }),
    onLoad: function onLoad() {
      this.isConnected && this.loadDeviceSettings();
    },
    onShow: function onShow() {
      if (this.isConnected) if (this.deviceSettings) {
        var _e = this.$store.getters["device/deviceSettings"];
        _e && (this.deviceSettings = _objectSpread2({}, _e));
      } else this.loadDeviceSettings();
    },
    methods: _objectSpread2(_objectSpread2({}, e.mapActions("device", ["updateDeviceSettings"])), {}, {
      goBack: function goBack() {
        e.index.navigateBack();
      },
      goToConnect: function goToConnect() {
        e.index.switchTab({
          url: "/pages/connect/connect"
        });
      },
      loadDeviceSettings: function loadDeviceSettings() {
        var _this = this;
        return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee() {
          var _e2, _t, _i;
          return _regeneratorRuntime2().wrap(function _callee$(_context) {
            while (1) switch (_context.prev = _context.next) {
              case 0:
                if (!_this.isConnected) {
                  _context.next = 26;
                  break;
                }
                _this.loading = !0;
                _context.prev = 2;
                console.log("[SettingsPage] 开始加载设备设置...");
                _context.next = 6;
                return i.bluetoothService.getDeviceSettings();
              case 6:
                _e2 = _context.sent;
                console.log("[SettingsPage] 设备设置加载完成:", _e2);
                _context.next = 10;
                return _this.delay(200);
              case 10:
                _context.next = 12;
                return i.bluetoothService.getSlotPollingConfig();
              case 12:
                _t = _context.sent;
                console.log("[SettingsPage] 卡槽轮询配置:", _t), _this.deviceSettings = _e2, _this.slotPollingConfig = _toConsumableArray2(_t), _this.originalSlotPollingConfig = _toConsumableArray2(_t), _this.currentPollingDelay = _e2.autoPollingDelay || 350, _this.updateDeviceSettings(_e2), _this.$store.dispatch("device/saveSettings"), console.log("[SettingsPage] 所有设置加载完成");
                _context.next = 21;
                break;
              case 16:
                _context.prev = 16;
                _context.t0 = _context["catch"](2);
                console.error("[SettingsPage] 加载设备设置失败", _context.t0);
                _i = "加载设置失败";
                _context.t0.message.includes("超时") ? _i = "设备响应超时，请重试" : _context.t0.message.includes("未连接") && (_i = "设备连接丢失"), e.index.showToast({
                  title: _i,
                  icon: "error",
                  duration: 3e3
                }), _context.t0.message.includes("未连接") && setTimeout(function () {
                  _this.goToConnect();
                }, 1500);
              case 21:
                _context.prev = 21;
                _this.loading = !1;
                return _context.finish(21);
              case 24:
                _context.next = 27;
                break;
              case 26:
                e.index.showToast({
                  title: "设备未连接",
                  icon: "error"
                });
              case 27:
              case "end":
                return _context.stop();
            }
          }, _callee, null, [[2, 16, 21, 24]]);
        }))();
      },
      delay: function delay(e) {
        return new Promise(function (t) {
          return setTimeout(t, e);
        });
      },
      getAnimationDescription: function getAnimationDescription(e) {
        var t = this.animationOptions.find(function (t) {
          return t.value === e;
        });
        return t ? t.desc : "未知动画模式";
      },
      updateAnimation: function updateAnimation(t) {
        var _this2 = this;
        return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee2() {
          return _regeneratorRuntime2().wrap(function _callee2$(_context2) {
            while (1) switch (_context2.prev = _context2.next) {
              case 0:
                if (!_this2.deviceSettings) {
                  _context2.next = 13;
                  break;
                }
                _context2.prev = 1;
                _context2.next = 4;
                return i.bluetoothService.setAnimationMode(t);
              case 4:
                _context2.next = 6;
                return i.bluetoothService.saveDeviceSettings();
              case 6:
                _this2.deviceSettings.animation = t;
                e.index.showToast({
                  title: "动画设置已更新",
                  icon: "success"
                });
                _context2.next = 13;
                break;
              case 10:
                _context2.prev = 10;
                _context2.t0 = _context2["catch"](1);
                console.error("[SettingsPage] 更新动画设置失败", _context2.t0), e.index.showToast({
                  title: "设置失败",
                  icon: "error"
                });
              case 13:
              case "end":
                return _context2.stop();
            }
          }, _callee2, null, [[1, 10]]);
        }))();
      },
      updateButtonConfig: function updateButtonConfig(o, n, s) {
        var _this3 = this;
        return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee3() {
          var a, l;
          return _regeneratorRuntime2().wrap(function _callee3$(_context3) {
            while (1) switch (_context3.prev = _context3.next) {
              case 0:
                if (!_this3.deviceSettings) {
                  _context3.next = 23;
                  break;
                }
                _context3.prev = 1;
                a = "A" === o ? t.ButtonType.A : t.ButtonType.B;
                if (!n) {
                  _context3.next = 11;
                  break;
                }
                _context3.next = 6;
                return i.bluetoothService.setLongButtonConfig(a, s);
              case 6:
                _context3.next = 8;
                return i.bluetoothService.saveDeviceSettings();
              case 8:
                "A" === o ? _this3.deviceSettings.buttonALongPress = s : _this3.deviceSettings.buttonBLongPress = s;
                _context3.next = 16;
                break;
              case 11:
                _context3.next = 13;
                return i.bluetoothService.setButtonConfig(a, s);
              case 13:
                _context3.next = 15;
                return i.bluetoothService.saveDeviceSettings();
              case 15:
                "A" === o ? _this3.deviceSettings.buttonAPress = s : _this3.deviceSettings.buttonBPress = s;
              case 16:
                l = t.ChameleonProtocol.getButtonConfigName(s);
                e.index.showToast({
                  title: "\u6309\u94AE".concat(o).concat(n ? "长按" : "", "\u8BBE\u7F6E\u4E3A: ").concat(l),
                  icon: "success"
                });
                _context3.next = 23;
                break;
              case 20:
                _context3.prev = 20;
                _context3.t0 = _context3["catch"](1);
                console.error("[SettingsPage] 更新按钮配置失败", _context3.t0), e.index.showToast({
                  title: "设置失败",
                  icon: "error"
                });
              case 23:
              case "end":
                return _context3.stop();
            }
          }, _callee3, null, [[1, 20]]);
        }))();
      },
      updateBLEPairing: function updateBLEPairing(t) {
        var _this4 = this;
        return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee4() {
          return _regeneratorRuntime2().wrap(function _callee4$(_context4) {
            while (1) switch (_context4.prev = _context4.next) {
              case 0:
                if (!_this4.deviceSettings) {
                  _context4.next = 15;
                  break;
                }
                _context4.prev = 1;
                _context4.next = 4;
                return i.bluetoothService.setBLEPairEnabled(t);
              case 4:
                _context4.next = 6;
                return i.bluetoothService.saveDeviceSettings();
              case 6:
                _this4.deviceSettings.pairingEnabled = t;
                _this4.updateDeviceSettings(_this4.deviceSettings);
                _this4.$store.dispatch("device/saveSettings");
                e.index.showToast({
                  title: "BLE配对已" + (t ? "启用" : "禁用"),
                  icon: "success"
                });
                _context4.next = 15;
                break;
              case 12:
                _context4.prev = 12;
                _context4.t0 = _context4["catch"](1);
                console.error("[SettingsPage] 更新BLE配对设置失败", _context4.t0), e.index.showToast({
                  title: "设置失败",
                  icon: "error"
                });
              case 15:
              case "end":
                return _context4.stop();
            }
          }, _callee4, null, [[1, 12]]);
        }))();
      },
      showBLEKeyDialog: function showBLEKeyDialog() {
        e.index.showModal({
          title: "设置BLE连接密钥",
          editable: !0,
          placeholderText: "请输入6位数字密钥",
          success: function () {
            var _success = _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee5(t) {
              var _n, s;
              return _regeneratorRuntime2().wrap(function _callee5$(_context5) {
                while (1) switch (_context5.prev = _context5.next) {
                  case 0:
                    if (!(t.confirm && t.content)) {
                      _context5.next = 18;
                      break;
                    }
                    _n = t.content.trim();
                    if (/^\d{6}$/.test(_n)) {
                      _context5.next = 4;
                      break;
                    }
                    return _context5.abrupt("return", void e.index.showToast({
                      title: "密钥必须是6位数字",
                      icon: "error"
                    }));
                  case 4:
                    s = parseInt(_n);
                    if (!(s <= 0 || s > 4294967295)) {
                      _context5.next = 7;
                      break;
                    }
                    return _context5.abrupt("return", void e.index.showToast({
                      title: "密钥数值超出范围",
                      icon: "error"
                    }));
                  case 7:
                    _context5.prev = 7;
                    _context5.next = 10;
                    return i.bluetoothService.setBLEConnectKey(_n);
                  case 10:
                    _context5.next = 12;
                    return i.bluetoothService.saveDeviceSettings();
                  case 12:
                    e.index.showToast({
                      title: "BLE密钥设置成功",
                      icon: "success"
                    });
                    _context5.next = 18;
                    break;
                  case 15:
                    _context5.prev = 15;
                    _context5.t0 = _context5["catch"](7);
                    console.error("[SettingsPage] 设置BLE密钥失败", _context5.t0), e.index.showToast({
                      title: "设置失败",
                      icon: "error"
                    });
                  case 18:
                  case "end":
                    return _context5.stop();
                }
              }, _callee5, null, [[7, 15]]);
            }));
            function success(_x) {
              return _success.apply(this, arguments);
            }
            return success;
          }()
        });
      },
      updateAutoPolling: function updateAutoPolling(t) {
        var _this5 = this;
        return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee6() {
          return _regeneratorRuntime2().wrap(function _callee6$(_context6) {
            while (1) switch (_context6.prev = _context6.next) {
              case 0:
                if (!_this5.deviceSettings) {
                  _context6.next = 13;
                  break;
                }
                _context6.prev = 1;
                _context6.next = 4;
                return i.bluetoothService.setAutoPolling(t);
              case 4:
                _context6.next = 6;
                return i.bluetoothService.saveDeviceSettings();
              case 6:
                _this5.deviceSettings.autoPolling = t;
                e.index.showToast({
                  title: "自动轮询已" + (t ? "启用" : "禁用"),
                  icon: "success"
                });
                _context6.next = 13;
                break;
              case 10:
                _context6.prev = 10;
                _context6.t0 = _context6["catch"](1);
                console.error("[SettingsPage] 更新自动轮询设置失败", _context6.t0), e.index.showToast({
                  title: "设置失败",
                  icon: "error"
                });
              case 13:
              case "end":
                return _context6.stop();
            }
          }, _callee6, null, [[1, 10]]);
        }))();
      },
      updateICPolling: function updateICPolling(t) {
        var _this6 = this;
        return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee7() {
          return _regeneratorRuntime2().wrap(function _callee7$(_context7) {
            while (1) switch (_context7.prev = _context7.next) {
              case 0:
                if (!_this6.deviceSettings) {
                  _context7.next = 13;
                  break;
                }
                _context7.prev = 1;
                _context7.next = 4;
                return i.bluetoothService.setICPolling(t);
              case 4:
                _context7.next = 6;
                return i.bluetoothService.saveDeviceSettings();
              case 6:
                _this6.deviceSettings.icPollingEnabled = t;
                e.index.showToast({
                  title: "IC轮询已" + (t ? "启用" : "禁用"),
                  icon: "success"
                });
                _context7.next = 13;
                break;
              case 10:
                _context7.prev = 10;
                _context7.t0 = _context7["catch"](1);
                console.error("[SettingsPage] 更新IC轮询设置失败", _context7.t0), e.index.showToast({
                  title: "设置失败",
                  icon: "error"
                });
              case 13:
              case "end":
                return _context7.stop();
            }
          }, _callee7, null, [[1, 10]]);
        }))();
      },
      updateIDPolling: function updateIDPolling(t) {
        var _this7 = this;
        return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee8() {
          return _regeneratorRuntime2().wrap(function _callee8$(_context8) {
            while (1) switch (_context8.prev = _context8.next) {
              case 0:
                if (!_this7.deviceSettings) {
                  _context8.next = 13;
                  break;
                }
                _context8.prev = 1;
                _context8.next = 4;
                return i.bluetoothService.setIDPolling(t);
              case 4:
                _context8.next = 6;
                return i.bluetoothService.saveDeviceSettings();
              case 6:
                _this7.deviceSettings.idPollingEnabled = t;
                e.index.showToast({
                  title: "ID轮询已" + (t ? "启用" : "禁用"),
                  icon: "success"
                });
                _context8.next = 13;
                break;
              case 10:
                _context8.prev = 10;
                _context8.t0 = _context8["catch"](1);
                console.error("[SettingsPage] 更新ID轮询设置失败", _context8.t0), e.index.showToast({
                  title: "设置失败",
                  icon: "error"
                });
              case 13:
              case "end":
                return _context8.stop();
            }
          }, _callee8, null, [[1, 10]]);
        }))();
      },
      onPollingDelayInput: function onPollingDelayInput(e) {
        this.currentPollingDelay = e.detail.value;
      },
      updatePollingDelay: function updatePollingDelay(t) {
        var _this8 = this;
        return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee9() {
          var o;
          return _regeneratorRuntime2().wrap(function _callee9$(_context9) {
            while (1) switch (_context9.prev = _context9.next) {
              case 0:
                if (_this8.deviceSettings) {
                  _context9.next = 2;
                  break;
                }
                return _context9.abrupt("return");
              case 2:
                o = t.detail.value;
                _context9.prev = 3;
                _context9.next = 6;
                return i.bluetoothService.setAutoPollingDelay(o);
              case 6:
                _context9.next = 8;
                return i.bluetoothService.saveDeviceSettings();
              case 8:
                _this8.deviceSettings.pollingDelay = o;
                _this8.currentPollingDelay = o;
                e.index.showToast({
                  title: "\u8F6E\u8BE2\u5EF6\u8FDF\u5DF2\u8BBE\u7F6E\u4E3A ".concat(o, "ms"),
                  icon: "success"
                });
                _context9.next = 16;
                break;
              case 13:
                _context9.prev = 13;
                _context9.t0 = _context9["catch"](3);
                console.error("[SettingsPage] 更新轮询延迟设置失败", _context9.t0), e.index.showToast({
                  title: "设置失败",
                  icon: "error"
                });
              case 16:
              case "end":
                return _context9.stop();
            }
          }, _callee9, null, [[3, 13]]);
        }))();
      },
      toggleSlotPolling: function toggleSlotPolling(e) {
        var t = !this.slotPollingConfig[e];
        this.$set(this.slotPollingConfig, e, t);
      },
      hasSlotPollingChanges: function hasSlotPollingChanges() {
        for (var _e3 = 0; _e3 < 16; _e3++) if (this.slotPollingConfig[_e3] !== this.originalSlotPollingConfig[_e3]) return !0;
        return !1;
      },
      saveSlotPollingConfig: function saveSlotPollingConfig() {
        var _this9 = this;
        return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee10() {
          return _regeneratorRuntime2().wrap(function _callee10$(_context10) {
            while (1) switch (_context10.prev = _context10.next) {
              case 0:
                _context10.prev = 0;
                e.index.showLoading({
                  title: "保存中..."
                });
                _context10.next = 4;
                return i.bluetoothService.setSlotPollingConfigListAndSave(_this9.slotPollingConfig);
              case 4:
                _this9.originalSlotPollingConfig = _toConsumableArray2(_this9.slotPollingConfig);
                e.index.hideLoading();
                e.index.showToast({
                  title: "卡槽轮询配置已保存",
                  icon: "success"
                });
                _context10.next = 12;
                break;
              case 9:
                _context10.prev = 9;
                _context10.t0 = _context10["catch"](0);
                console.error("[SettingsPage] 保存卡槽轮询配置失败", _context10.t0), e.index.hideLoading(), e.index.showToast({
                  title: "保存失败",
                  icon: "error"
                });
              case 12:
              case "end":
                return _context10.stop();
            }
          }, _callee10, null, [[0, 9]]);
        }))();
      },
      resetSlotPollingConfig: function resetSlotPollingConfig() {
        this.slotPollingConfig = _toConsumableArray2(this.originalSlotPollingConfig);
      },
      updateCompatible8Slots: function updateCompatible8Slots(t) {
        var _this10 = this;
        return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee11() {
          return _regeneratorRuntime2().wrap(function _callee11$(_context11) {
            while (1) switch (_context11.prev = _context11.next) {
              case 0:
                if (!_this10.deviceSettings) {
                  _context11.next = 15;
                  break;
                }
                _context11.prev = 1;
                _context11.next = 4;
                return i.bluetoothService.setCompatible8Slots(t);
              case 4:
                _context11.next = 6;
                return i.bluetoothService.saveDeviceSettings();
              case 6:
                _this10.deviceSettings.compatible8Slots = t;
                _this10.updateDeviceSettings(_this10.deviceSettings);
                _this10.$store.dispatch("device/saveSettings");
                e.index.showToast({
                  title: "8卡槽兼容模式已" + (t ? "启用" : "禁用"),
                  icon: "success"
                });
                _context11.next = 15;
                break;
              case 12:
                _context11.prev = 12;
                _context11.t0 = _context11["catch"](1);
                console.error("[SettingsPage] 更新8卡槽兼容模式失败", _context11.t0), e.index.showToast({
                  title: "设置失败",
                  icon: "error"
                }), _this10.deviceSettings.compatible8Slots = !t;
              case 15:
              case "end":
                return _context11.stop();
            }
          }, _callee11, null, [[1, 12]]);
        }))();
      },
      refreshSettings: function refreshSettings() {
        var _this11 = this;
        return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee12() {
          return _regeneratorRuntime2().wrap(function _callee12$(_context12) {
            while (1) switch (_context12.prev = _context12.next) {
              case 0:
                _context12.prev = 0;
                e.index.showLoading({
                  title: "刷新中..."
                });
                _context12.next = 4;
                return _this11.loadDeviceSettings();
              case 4:
                e.index.hideLoading();
                e.index.showToast({
                  title: "设置已刷新",
                  icon: "success"
                });
                _context12.next = 11;
                break;
              case 8:
                _context12.prev = 8;
                _context12.t0 = _context12["catch"](0);
                console.error("[SettingsPage] 刷新设置失败", _context12.t0), e.index.hideLoading(), e.index.showToast({
                  title: "刷新失败",
                  icon: "error"
                });
              case 11:
              case "end":
                return _context12.stop();
            }
          }, _callee12, null, [[0, 8]]);
        }))();
      },
      goToFirmwarePage: function goToFirmwarePage() {
        e.index.navigateTo({
          url: "/pages/firmware/firmware"
        });
      },
      enterDFUMode: function enterDFUMode() {
        var _this12 = this;
        return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee14() {
          return _regeneratorRuntime2().wrap(function _callee14$(_context14) {
            while (1) switch (_context14.prev = _context14.next) {
              case 0:
                if (_this12.isConnected) try {
                  e.index.showModal({
                    title: "进入DFU模式",
                    content: "设备将进入DFU模式，这将断开当前连接。是否继续？",
                    success: function () {
                      var _success2 = _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee13(t) {
                        return _regeneratorRuntime2().wrap(function _callee13$(_context13) {
                          while (1) switch (_context13.prev = _context13.next) {
                            case 0:
                              if (!t.confirm) {
                                _context13.next = 13;
                                break;
                              }
                              e.index.showLoading({
                                title: "正在进入DFU模式...",
                                mask: !0
                              });
                              _context13.prev = 2;
                              _context13.next = 5;
                              return i.bluetoothService.enterDFUMode();
                            case 5:
                              e.index.hideLoading();
                              e.index.showToast({
                                title: "已进入DFU模式",
                                icon: "success"
                              });
                              setTimeout(function () {
                                e.index.switchTab({
                                  url: "/pages/connect/connect"
                                });
                              }, 1500);
                              _context13.next = 13;
                              break;
                            case 10:
                              _context13.prev = 10;
                              _context13.t0 = _context13["catch"](2);
                              e.index.hideLoading(), console.error("[SettingsPage] 进入DFU模式失败", _context13.t0), e.index.showToast({
                                title: "进入DFU模式失败: " + _context13.t0.message,
                                icon: "none",
                                duration: 3e3
                              });
                            case 13:
                            case "end":
                              return _context13.stop();
                          }
                        }, _callee13, null, [[2, 10]]);
                      }));
                      function success(_x2) {
                        return _success2.apply(this, arguments);
                      }
                      return success;
                    }()
                  });
                } catch (t) {
                  console.error("[SettingsPage] 进入DFU模式失败", t), e.index.showToast({
                    title: "操作失败: " + t.message,
                    icon: "none",
                    duration: 3e3
                  });
                } else e.index.showToast({
                  title: "设备未连接",
                  icon: "error"
                });
              case 1:
              case "end":
                return _context14.stop();
            }
          }, _callee14);
        }))();
      }
    })
  };
if (!Array) {
  (e.resolveComponent("uni-icons") + e.resolveComponent("uni-load-more") + e.resolveComponent("setting-item"))();
}
Math || (function () {
  return "../../node-modules/@dcloudio/uni-ui/lib/uni-icons/uni-icons.js";
} + function () {
  return "../../node-modules/@dcloudio/uni-ui/lib/uni-load-more/uni-load-more.js";
})();
var n = e._export_sfc(o, [["render", function (t, i, o, n, s, a) {
  return e.e({
    a: !t.isConnected
  }, t.isConnected ? e.e({
    d: s.loading
  }, s.loading ? {
    e: e.p({
      status: "loading",
      "content-text": "正在加载设备设置..."
    })
  } : s.deviceSettings ? e.e({
    g: e.p({
      type: "gear-filled",
      size: "20",
      color: "#667eea"
    }),
    h: e.t(t.deviceModelName),
    i: e.t(t.deviceInfo ? t.deviceInfo.version : "未知"),
    j: e.t(t.deviceModeName),
    k: e.t(t.batteryStatusText),
    l: e.p({
      type: "gear-filled",
      size: "20",
      color: "#667eea"
    }),
    m: e.f(a.animationOptions, function (t, i, o) {
      return {
        a: e.t(t.label),
        b: t.value,
        c: s.deviceSettings.animation === t.value ? 1 : "",
        d: e.o(function (e) {
          return a.updateAnimation(t.value);
        }, t.value)
      };
    }),
    n: e.t(a.getAnimationDescription(s.deviceSettings.animation)),
    o: e.p({
      type: "gear",
      size: "20",
      color: "#667eea"
    }),
    p: e.o(function (e) {
      return a.updateButtonConfig("A", !1, e);
    }),
    q: e.p({
      label: "按钮A (短按)",
      options: a.buttonConfigOptions,
      value: s.deviceSettings.buttonAPress
    }),
    r: e.o(function (e) {
      return a.updateButtonConfig("B", !1, e);
    }),
    s: e.p({
      label: "按钮B (短按)",
      options: a.buttonConfigOptions,
      value: s.deviceSettings.buttonBPress
    }),
    t: e.o(function (e) {
      return a.updateButtonConfig("A", !0, e);
    }),
    v: e.p({
      label: "按钮A (长按)",
      options: a.buttonConfigOptions,
      value: s.deviceSettings.buttonALongPress
    }),
    w: e.o(function (e) {
      return a.updateButtonConfig("B", !0, e);
    }),
    x: e.p({
      label: "按钮B (长按)",
      options: a.buttonConfigOptions,
      value: s.deviceSettings.buttonBLongPress
    }),
    y: e.p({
      type: "wifi",
      size: "20",
      color: "#667eea"
    }),
    z: s.deviceSettings.pairingEnabled,
    A: e.o(function (e) {
      return a.updateBLEPairing(e.detail.value);
    }),
    B: s.deviceSettings.pairingEnabled
  }, s.deviceSettings.pairingEnabled ? {
    C: e.o(function () {
      return a.showBLEKeyDialog && a.showBLEKeyDialog.apply(a, arguments);
    })
  } : {}, {
    D: s.deviceSettings.pairingEnabled
  }, (s.deviceSettings.pairingEnabled, {}), {
    E: e.p({
      type: "loop",
      size: "20",
      color: "#667eea"
    }),
    F: s.deviceSettings.autoPolling,
    G: e.o(function (e) {
      return a.updateAutoPolling(e.detail.value);
    }),
    H: s.deviceSettings.icPollingEnabled,
    I: e.o(function (e) {
      return a.updateICPolling(e.detail.value);
    }),
    J: s.deviceSettings.idPollingEnabled,
    K: e.o(function (e) {
      return a.updateIDPolling(e.detail.value);
    }),
    L: e.t(s.currentPollingDelay),
    M: s.currentPollingDelay,
    N: e.o(function () {
      return a.onPollingDelayInput && a.onPollingDelayInput.apply(a, arguments);
    }),
    O: e.o(function () {
      return a.updatePollingDelay && a.updatePollingDelay.apply(a, arguments);
    }),
    P: e.p({
      type: "folder",
      size: "20",
      color: "#667eea"
    }),
    Q: e.f(s.slotPollingConfig, function (t, i, o) {
      return {
        a: e.t(i + 1),
        b: t ? 1 : "",
        c: i,
        d: t ? 1 : "",
        e: e.o(function (e) {
          return a.toggleSlotPolling(i);
        }, i)
      };
    }),
    R: a.hasSlotPollingChanges()
  }, a.hasSlotPollingChanges() ? {
    S: e.p({
      type: "checkmarkempty",
      size: "16",
      color: "#fff"
    }),
    T: e.o(function () {
      return a.saveSlotPollingConfig && a.saveSlotPollingConfig.apply(a, arguments);
    }),
    U: e.p({
      type: "refreshempty",
      size: "16",
      color: "#666"
    }),
    V: e.o(function () {
      return a.resetSlotPollingConfig && a.resetSlotPollingConfig.apply(a, arguments);
    })
  } : {}, {
    W: e.p({
      type: "settings",
      size: "20",
      color: "#667eea"
    }),
    X: s.deviceSettings.compatible8Slots,
    Y: e.o(function (e) {
      return a.updateCompatible8Slots(e.detail.value);
    }),
    Z: e.p({
      type: "download",
      size: "20",
      color: "#667eea"
    }),
    aa: e.p({
      type: "refresh",
      size: "16",
      color: "#fff"
    }),
    ab: e.o(function () {
      return a.goToFirmwarePage && a.goToFirmwarePage.apply(a, arguments);
    }),
    ac: e.p({
      type: "gear",
      size: "16",
      color: "#fff"
    }),
    ad: e.o(function () {
      return a.enterDFUMode && a.enterDFUMode.apply(a, arguments);
    }),
    ae: e.p({
      type: "refreshempty",
      size: "18",
      color: "#666"
    }),
    af: e.o(function () {
      return a.refreshSettings && a.refreshSettings.apply(a, arguments);
    })
  }) : {
    ag: e.p({
      type: "closeempty",
      size: "60",
      color: "#ff5722"
    }),
    ah: e.o(function () {
      return a.loadDeviceSettings && a.loadDeviceSettings.apply(a, arguments);
    })
  }, {
    f: s.deviceSettings
  }) : {
    b: e.p({
      type: "info",
      size: "60",
      color: "#999"
    }),
    c: e.o(function () {
      return a.goToConnect && a.goToConnect.apply(a, arguments);
    })
  });
}], ["__scopeId", "data-v-3baa783e"]]);
wx.createPage(n); 
 			}); 	require("pages/settings/settings.js");
 		__wxRoute = 'pages/firmware/firmware';__wxRouteBegin = true; 	__wxAppCurrentFile__ = 'pages/firmware/firmware.js';	define("pages/firmware/firmware.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";

var _regeneratorRuntime2 = require("../../@babel/runtime/helpers/regeneratorRuntime");
var _asyncToGenerator2 = require("../../@babel/runtime/helpers/asyncToGenerator");
var _objectSpread2 = require("../../@babel/runtime/helpers/objectSpread2");
var e = require("../../common/vendor.js"),
  t = require("../../services/bluetooth.js"),
  a = require("../../utils/dfu.js"),
  i = require("../../utils/firmware.js"),
  s = {
    name: "FirmwarePage",
    data: function data() {
      return {
        isChecking: !1,
        isUpdating: !1,
        updateProgress: 0,
        updateAvailable: !1,
        updateInfo: null,
        updateStatusText: '点击"检查更新"按钮获取最新固件',
        updateSuccess: !1,
        updateResultMessage: "",
        chipId: "",
        customVersion: "",
        isFlashing: !1,
        progress: 0
      };
    },
    computed: _objectSpread2({}, e.mapGetters("device", ["isConnected", "deviceInfo", "deviceModelName"])),
    onLoad: function onLoad(e) {
      var _this = this;
      if (console.log("[FirmwarePage] 页面加载，参数:", e), this.loadDeviceInfo(), e && "true" === e.autoDFU) {
        console.log("[FirmwarePage] 检测到autoDFU参数，准备自动开始刷入最新DFU固件");
        try {
          var _e = this.getOpenerEventChannel();
          if (console.log("[FirmwarePage] 事件通道:", _e), _e && _e.on) {
            var _t = !1;
            _e.on("dfuDevice", function (e) {
              console.log("[FirmwarePage] 接收到DFU设备信息:", e), _t = !0, setTimeout(function () {
                _this.flashLatestDFUFirmware(e);
              }, 500);
            }), setTimeout(function () {
              _t || (console.log("[FirmwarePage] 未在超时时间内接收到DFU设备信息，将自动扫描DFU设备"), _this.flashLatestDFUFirmware());
            }, 3e3);
          } else console.log("[FirmwarePage] 未获取到事件通道，将自动扫描DFU设备"), setTimeout(function () {
            _this.flashLatestDFUFirmware();
          }, 500);
        } catch (t) {
          console.error("[FirmwarePage] 处理自动DFU参数时出错:", t), setTimeout(function () {
            _this.flashLatestDFUFirmware();
          }, 500);
        }
      }
      if (e && "true" === e.autoFlash) {
        console.log("[FirmwarePage] 检测到autoFlash参数，准备自动开始刷入兼容固件");
        try {
          var _e2 = this.getOpenerEventChannel();
          if (console.log("[FirmwarePage] 事件通道:", _e2), _e2 && _e2.on) {
            var _t2 = !1;
            _e2.on("flashDevice", function (e) {
              console.log("[FirmwarePage] 接收到flash设备信息:", e), _t2 = !0, setTimeout(function () {
                _this.autoFlashCompatibleFirmware(e);
              }, 500);
            }), setTimeout(function () {
              _t2 || (console.log("[FirmwarePage] 未在超时时间内接收到flash设备信息，将使用当前连接设备"), _this.autoFlashCompatibleFirmware());
            }, 3e3);
          } else console.log("[FirmwarePage] 未获取到事件通道，将使用当前连接设备"), setTimeout(function () {
            _this.autoFlashCompatibleFirmware();
          }, 500);
        } catch (t) {
          console.error("[FirmwarePage] 处理自动Flash参数时出错:", t), setTimeout(function () {
            _this.autoFlashCompatibleFirmware();
          }, 500);
        }
      }
    },
    methods: {
      goBack: function goBack() {
        e.index.navigateBack();
      },
      goToConnect: function goToConnect() {
        e.index.switchTab({
          url: "/pages/connect/connect"
        });
      },
      loadDeviceInfo: function loadDeviceInfo() {
        var _this2 = this;
        return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee() {
          return _regeneratorRuntime2().wrap(function _callee$(_context) {
            while (1) switch (_context.prev = _context.next) {
              case 0:
                if (!t.bluetoothService.isDFU) {
                  _context.next = 4;
                  break;
                }
                console.log("[FirmwarePage] DFU模式，跳过加载设备信息");
                _context.next = 24;
                break;
              case 4:
                if (!_this2.isConnected) {
                  _context.next = 24;
                  break;
                }
                _context.prev = 5;
                _context.next = 8;
                return t.bluetoothService.getDeviceChipID();
              case 8:
                _this2.chipId = _context.sent;
                _context.prev = 9;
                _context.next = 12;
                return t.bluetoothService.getCustomGitCommitHash();
              case 12:
                _this2.customVersion = _context.sent;
                _context.next = 18;
                break;
              case 15:
                _context.prev = 15;
                _context.t0 = _context["catch"](9);
                console.error("[FirmwarePage] 获取自定义版本失败", _context.t0), _this2.customVersion = "";
              case 18:
                console.log("[FirmwarePage] 设备信息加载完成", {
                  chipId: _this2.chipId,
                  customVersion: _this2.customVersion
                });
                _context.next = 24;
                break;
              case 21:
                _context.prev = 21;
                _context.t1 = _context["catch"](5);
                console.error("[FirmwarePage] 加载设备信息失败", _context.t1), _this2.showError("加载设备信息失败: " + _context.t1.message);
              case 24:
              case "end":
                return _context.stop();
            }
          }, _callee, null, [[5, 21], [9, 15]]);
        }))();
      },
      checkUpdate: function checkUpdate() {
        var _this3 = this;
        return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee2() {
          return _regeneratorRuntime2().wrap(function _callee2$(_context2) {
            while (1) switch (_context2.prev = _context2.next) {
              case 0:
                if (!(!_this3.isChecking && !_this3.isUpdating)) {
                  _context2.next = 20;
                  break;
                }
                _this3.isChecking = !0, _this3.updateStatusText = "正在检查更新...";
                _context2.prev = 2;
                _context2.t0 = _this3.chipId;
                if (_context2.t0) {
                  _context2.next = 7;
                  break;
                }
                _context2.next = 7;
                return _this3.loadDeviceInfo();
              case 7:
                _context2.next = 9;
                return i.checkFirmwareUpdate(_this3.customVersion, _this3.chipId);
              case 9:
                _this3.updateInfo = _context2.sent;
                _this3.updateInfo.need_update ? (_this3.updateAvailable = !0, _this3.updateStatusText = "\u53D1\u73B0\u65B0\u7248\u672C: ".concat(_this3.updateInfo.firmware_info.version)) : (_this3.updateAvailable = !1, _this3.updateStatusText = _this3.updateInfo.message || "当前已是最新版本");
                console.log("[FirmwarePage] 检查更新结果", _this3.updateInfo);
                _context2.next = 17;
                break;
              case 14:
                _context2.prev = 14;
                _context2.t1 = _context2["catch"](2);
                console.error("[FirmwarePage] 检查更新失败", _context2.t1), _this3.updateStatusText = "检查更新失败: " + _context2.t1.message;
              case 17:
                _context2.prev = 17;
                _this3.isChecking = !1;
                return _context2.finish(17);
              case 20:
              case "end":
                return _context2.stop();
            }
          }, _callee2, null, [[2, 14, 17, 20]]);
        }))();
      },
      startUpdate: function startUpdate() {
        var _this4 = this;
        return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee3() {
          var _s, _yield$i$unpackFirmwa, _o, r, u, _a, n;
          return _regeneratorRuntime2().wrap(function _callee3$(_context3) {
            while (1) switch (_context3.prev = _context3.next) {
              case 0:
                if (!(!_this4.isUpdating && _this4.updateAvailable)) {
                  _context3.next = 87;
                  break;
                }
                _this4.isUpdating = !0, _this4.updateProgress = 0, _this4.updateStatusText = "准备下载固件...";
                _context3.prev = 2;
                _this4.updateStatusText = "正在下载固件...";
                _context3.next = 6;
                return i.downloadFirmware(_this4.updateInfo.firmware_info.download_url);
              case 6:
                _s = _context3.sent;
                _this4.updateStatusText = "正在解析固件...";
                _context3.next = 10;
                return i.unpackFirmware(_s);
              case 10:
                _yield$i$unpackFirmwa = _context3.sent;
                _o = _yield$i$unpackFirmwa.applicationDat;
                r = _yield$i$unpackFirmwa.applicationBin;
                i.validateFirmware(_o, r), _this4.updateStatusText = "正在进入 DFU 模式...";
                _context3.prev = 14;
                _context3.next = 17;
                return t.bluetoothService.enterDFUMode();
              case 17:
                _this4.updateStatusText = "等待设备进入 DFU 模式...";
                _context3.next = 20;
                return _this4.delay(3e3);
              case 20:
                _context3.next = 30;
                break;
              case 22:
                _context3.prev = 22;
                _context3.t0 = _context3["catch"](14);
                if (!(!_context3.t0.message.includes("超时") && !_context3.t0.message.includes("重启"))) {
                  _context3.next = 26;
                  break;
                }
                throw _context3.t0;
              case 26:
                console.log("[FirmwarePage] 设备可能已进入DFU模式，继续流程");
                _this4.updateStatusText = "设备正在重启进入 DFU 模式...";
                _context3.next = 30;
                return _this4.delay(3e3);
              case 30:
                _this4.updateStatusText = "正在扫描 DFU 设备...";
                _context3.next = 33;
                return t.bluetoothService.initialize();
              case 33:
                _context3.next = 35;
                return t.bluetoothService.startScan();
              case 35:
                _context3.next = 37;
                return _this4.scanDFUDevice();
              case 37:
                u = _context3.sent;
                if (u) {
                  _context3.next = 40;
                  break;
                }
                throw new Error("未找到 DFU 模式的设备，请重试");
              case 40:
                _this4.updateStatusText = "正在连接 DFU 设备...";
                _context3.prev = 41;
                _context3.next = 44;
                return t.bluetoothService.connectToDevice(u);
              case 44:
                _context3.next = 62;
                break;
              case 46:
                _context3.prev = 46;
                _context3.t1 = _context3["catch"](41);
                console.error("[FirmwarePage] 首次连接DFU设备失败，尝试重新扫描", _context3.t1);
                _this4.updateStatusText = "重新扫描 DFU 设备...";
                _context3.next = 52;
                return _this4.delay(2e3);
              case 52:
                _context3.next = 54;
                return t.bluetoothService.startScan();
              case 54:
                _context3.next = 56;
                return _this4.scanDFUDevice();
              case 56:
                _a = _context3.sent;
                if (_a) {
                  _context3.next = 59;
                  break;
                }
                throw new Error("重新扫描未找到 DFU 设备，请重启设备后重试");
              case 59:
                _this4.updateStatusText = "重新连接 DFU 设备...";
                _context3.next = 62;
                return t.bluetoothService.connectToDevice(_a);
              case 62:
                n = new a.DFUCommunicator(t.bluetoothService);
                _this4.updateStatusText = "正在刷入固件...";
                _context3.next = 66;
                return n.flashFirmware(1, _o, function (e) {
                  _this4.updateProgress = Math.floor(e / 2), _this4.updateStatusText = "\u6B63\u5728\u5237\u5165\u56FA\u4EF6 (1/2): ".concat(2 * _this4.updateProgress, "%");
                });
              case 66:
                _context3.next = 68;
                return n.flashFirmware(2, r, function (e) {
                  _this4.updateProgress = 50 + Math.floor(e / 2), _this4.updateStatusText = "\u6B63\u5728\u5237\u5165\u56FA\u4EF6 (2/2): ".concat(e, "%");
                });
              case 68:
                _this4.updateProgress = 100;
                _this4.updateStatusText = "固件更新完成，设备正在重启...";
                _context3.next = 72;
                return _this4.delay(3e3);
              case 72:
                _this4.updateSuccess = !0;
                _this4.updateResultMessage = "固件已成功更新到最新版本，设备将重新连接。";
                _this4.$refs.resultPopup.open();
                _context3.next = 77;
                return t.bluetoothService.initialize();
              case 77:
                _context3.next = 79;
                return t.bluetoothService.startScan();
              case 79:
                _context3.next = 84;
                break;
              case 81:
                _context3.prev = 81;
                _context3.t2 = _context3["catch"](2);
                console.error("[FirmwarePage] 更新固件失败", _context3.t2), _this4.updateSuccess = !1, _this4.updateResultMessage = "更新失败: " + _context3.t2.message, _this4.$refs.resultPopup.open(), _this4.updateStatusText = "更新失败: " + _context3.t2.message;
              case 84:
                _context3.prev = 84;
                _this4.isUpdating = !1;
                return _context3.finish(84);
              case 87:
              case "end":
                return _context3.stop();
            }
          }, _callee3, null, [[2, 81, 84, 87], [14, 22], [41, 46]]);
        }))();
      },
      scanDFUDevice: function scanDFUDevice() {
        var _this5 = this;
        return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee5() {
          return _regeneratorRuntime2().wrap(function _callee5$(_context5) {
            while (1) switch (_context5.prev = _context5.next) {
              case 0:
                return _context5.abrupt("return", new Promise(function (e) {
                  var a = 0,
                    i = [];
                  var s = function s(e) {
                    e.name && (e.name.startsWith("CU-") || e.name.startsWith("CL-")) && (console.log("[FirmwarePage] 发现DFU设备:", e), i.push(e));
                  };
                  t.bluetoothService.on("deviceFound", s);
                  var o = setInterval( /*#__PURE__*/_asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee4() {
                    return _regeneratorRuntime2().wrap(function _callee4$(_context4) {
                      while (1) switch (_context4.prev = _context4.next) {
                        case 0:
                          if (!(a++, i.length > 0)) {
                            _context4.next = 2;
                            break;
                          }
                          return _context4.abrupt("return", (clearInterval(o), t.bluetoothService.off("deviceFound", s), void e(i[0])));
                        case 2:
                          if (!(a >= 15)) {
                            _context4.next = 4;
                            break;
                          }
                          return _context4.abrupt("return", (clearInterval(o), t.bluetoothService.off("deviceFound", s), void e(null)));
                        case 4:
                          if (!(_this5.updateStatusText = "\u6B63\u5728\u626B\u63CFDFU\u8BBE\u5907 (".concat(a, "/15)..."), a % 3 == 0)) {
                            _context4.next = 17;
                            break;
                          }
                          _context4.prev = 5;
                          _context4.next = 8;
                          return t.bluetoothService.stopScan();
                        case 8:
                          _context4.next = 10;
                          return _this5.delay(500);
                        case 10:
                          _context4.next = 12;
                          return t.bluetoothService.startScan();
                        case 12:
                          _context4.next = 17;
                          break;
                        case 14:
                          _context4.prev = 14;
                          _context4.t0 = _context4["catch"](5);
                          console.error("[FirmwarePage] 重新启动扫描失败", _context4.t0);
                        case 17:
                        case "end":
                          return _context4.stop();
                      }
                    }, _callee4, null, [[5, 14]]);
                  })), 1e3);
                }));
              case 1:
              case "end":
                return _context5.stop();
            }
          }, _callee5);
        }))();
      },
      closeResultDialog: function closeResultDialog() {
        this.$refs.resultPopup.close(), this.updateSuccess && e.index.switchTab({
          url: "/pages/connect/connect"
        });
      },
      showError: function showError(t) {
        e.index.showToast({
          title: t,
          icon: "none",
          duration: 3e3
        });
      },
      delay: function delay(e) {
        return new Promise(function (t) {
          return setTimeout(t, e);
        });
      },
      flashLatestDFUFirmware: function flashLatestDFUFirmware() {
        var _arguments = arguments,
          _this6 = this;
        return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee6() {
          var e, _o2, _e3, _yield$i$unpackFirmwa2, r, u, _e4, n;
          return _regeneratorRuntime2().wrap(function _callee6$(_context6) {
            while (1) switch (_context6.prev = _context6.next) {
              case 0:
                e = _arguments.length > 0 && _arguments[0] !== undefined ? _arguments[0] : null;
                if (!_this6.isUpdating) {
                  _context6.next = 3;
                  break;
                }
                return _context6.abrupt("return", (console.log("[FirmwarePage] 已经在更新中，忽略重复调用"), !1));
              case 3:
                _this6.isUpdating = !0, _this6.updateProgress = 0, _this6.updateStatusText = "准备下载最新DFU固件...";
                _context6.prev = 4;
                _this6.updateStatusText = "正在下载最新DFU固件...";
                _o2 = null;
                _e3 = 1;
              case 8:
                if (!(_e3 <= 3)) {
                  _context6.next = 28;
                  break;
                }
                _context6.prev = 9;
                console.log("[FirmwarePage] \u5C1D\u8BD5\u4E0B\u8F7D\u56FA\u4EF6 (".concat(_e3, "/3)"));
                _context6.next = 13;
                return i.downloadLatestDFUFirmware();
              case 13:
                _o2 = _context6.sent;
                console.log("[FirmwarePage] 固件下载成功，数据大小:", _o2.byteLength);
                return _context6.abrupt("break", 28);
              case 18:
                _context6.prev = 18;
                _context6.t0 = _context6["catch"](9);
                if (!(console.error("[FirmwarePage] \u7B2C".concat(_e3, "\u6B21\u4E0B\u8F7D\u56FA\u4EF6\u5931\u8D25:"), _context6.t0), 3 === _e3)) {
                  _context6.next = 22;
                  break;
                }
                throw new Error("下载固件失败，请检查网络连接后重试");
              case 22:
                _this6.updateStatusText = "\u4E0B\u8F7D\u5931\u8D25\uFF0C\u6B63\u5728\u91CD\u8BD5 (".concat(_e3, "/3)...");
                _context6.next = 25;
                return _this6.delay(2e3);
              case 25:
                _e3++;
                _context6.next = 8;
                break;
              case 28:
                if (_o2 && _o2 instanceof ArrayBuffer) {
                  _context6.next = 30;
                  break;
                }
                throw new Error("下载的固件数据无效");
              case 30:
                _this6.updateStatusText = "正在解析固件...";
                _context6.next = 33;
                return i.unpackFirmware(_o2);
              case 33:
                _yield$i$unpackFirmwa2 = _context6.sent;
                r = _yield$i$unpackFirmwa2.applicationDat;
                u = _yield$i$unpackFirmwa2.applicationBin;
                i.validateFirmware(r, u);
                _context6.t1 = e;
                if (_context6.t1) {
                  _context6.next = 48;
                  break;
                }
                _this6.updateStatusText = "正在初始化蓝牙...";
                _context6.next = 42;
                return t.bluetoothService.initialize();
              case 42:
                _this6.updateStatusText = "正在扫描DFU设备...";
                _context6.next = 45;
                return t.bluetoothService.startScan();
              case 45:
                _context6.next = 47;
                return _this6.scanDFUDevice();
              case 47:
                _context6.t1 = e = _context6.sent;
              case 48:
                if (_context6.t1) {
                  _context6.next = 50;
                  break;
                }
                throw new Error("未找到DFU模式的设备，请确保设备已进入DFU模式");
              case 50:
                if (!(!t.bluetoothService.isConnected || t.bluetoothService.deviceId !== e.deviceId)) {
                  _context6.next = 73;
                  break;
                }
                _this6.updateStatusText = "正在连接DFU设备...";
                _context6.prev = 52;
                _context6.next = 55;
                return t.bluetoothService.connectToDevice(e);
              case 55:
                _context6.next = 73;
                break;
              case 57:
                _context6.prev = 57;
                _context6.t2 = _context6["catch"](52);
                console.error("[FirmwarePage] 首次连接DFU设备失败，尝试重新扫描", _context6.t2);
                _this6.updateStatusText = "重新扫描DFU设备...";
                _context6.next = 63;
                return _this6.delay(2e3);
              case 63:
                _context6.next = 65;
                return t.bluetoothService.startScan();
              case 65:
                _context6.next = 67;
                return _this6.scanDFUDevice();
              case 67:
                _e4 = _context6.sent;
                if (_e4) {
                  _context6.next = 70;
                  break;
                }
                throw new Error("重新扫描未找到DFU设备，请重启设备后重试");
              case 70:
                _this6.updateStatusText = "重新连接DFU设备...";
                _context6.next = 73;
                return t.bluetoothService.connectToDevice(_e4);
              case 73:
                n = new a.DFUCommunicator(t.bluetoothService);
                _this6.updateStatusText = "正在刷入固件...";
                _context6.next = 77;
                return n.flashFirmware(1, r, function (e) {
                  _this6.updateProgress = Math.floor(e / 2), _this6.updateStatusText = "\u6B63\u5728\u5237\u5165\u56FA\u4EF6(1/2): ".concat(2 * _this6.updateProgress, "%");
                });
              case 77:
                _context6.next = 79;
                return n.flashFirmware(2, u, function (e) {
                  _this6.updateProgress = 50 + Math.floor(e / 2), _this6.updateStatusText = "\u6B63\u5728\u5237\u5165\u56FA\u4EF6(2/2): ".concat(e, "%");
                });
              case 79:
                _this6.updateProgress = 100;
                _this6.updateStatusText = "固件更新完成，设备正在重启...";
                _context6.next = 83;
                return _this6.delay(3e3);
              case 83:
                _this6.updateSuccess = !0;
                _this6.updateResultMessage = "最新固件已成功刷入，设备将重新连接。";
                _this6.$refs.resultPopup.open();
                _context6.next = 88;
                return t.bluetoothService.initialize();
              case 88:
                _context6.next = 90;
                return t.bluetoothService.startScan();
              case 90:
                return _context6.abrupt("return", !0);
              case 93:
                _context6.prev = 93;
                _context6.t3 = _context6["catch"](4);
                return _context6.abrupt("return", (console.error("[FirmwarePage] 刷入最新DFU固件失败", _context6.t3), _this6.updateSuccess = !1, _this6.updateResultMessage = "刷入失败: " + _context6.t3.message, _this6.$refs.resultPopup.open(), _this6.updateStatusText = "刷入失败: " + _context6.t3.message, !1));
              case 96:
                _context6.prev = 96;
                _this6.isUpdating = !1;
                return _context6.finish(96);
              case 99:
              case "end":
                return _context6.stop();
            }
          }, _callee6, null, [[4, 93, 96, 99], [9, 18], [52, 57]]);
        }))();
      },
      updateProgress: function updateProgress(e) {
        this.progress = e;
      },
      autoFlashCompatibleFirmware: function autoFlashCompatibleFirmware() {
        var _arguments2 = arguments,
          _this7 = this;
        return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee7() {
          var e, _o3, _e5, _yield$i$unpackFirmwa3, r, u, n, _e6, c;
          return _regeneratorRuntime2().wrap(function _callee7$(_context7) {
            while (1) switch (_context7.prev = _context7.next) {
              case 0:
                e = _arguments2.length > 0 && _arguments2[0] !== undefined ? _arguments2[0] : null;
                if (!_this7.isUpdating) {
                  _context7.next = 3;
                  break;
                }
                return _context7.abrupt("return", (console.log("[FirmwarePage] 已经在更新中，忽略重复调用"), !1));
              case 3:
                _this7.isUpdating = !0, _this7.updateProgress = 0, _this7.updateStatusText = "准备自动刷入兼容固件...";
                _context7.prev = 4;
                if (!(!e && _this7.isConnected && (e = {
                  deviceId: t.bluetoothService.deviceId,
                  name: t.bluetoothService.deviceName
                }, console.log("[FirmwarePage] 使用当前连接设备:", e)), !e)) {
                  _context7.next = 7;
                  break;
                }
                throw new Error("未找到设备信息，无法进行自动刷入");
              case 7:
                _this7.updateStatusText = "正在下载最新兼容固件...";
                _o3 = null;
                _e5 = 1;
              case 10:
                if (!(_e5 <= 3)) {
                  _context7.next = 30;
                  break;
                }
                _context7.prev = 11;
                console.log("[FirmwarePage] \u5C1D\u8BD5\u4E0B\u8F7D\u517C\u5BB9\u56FA\u4EF6 (".concat(_e5, "/3)"));
                _context7.next = 15;
                return i.downloadLatestDFUFirmware();
              case 15:
                _o3 = _context7.sent;
                console.log("[FirmwarePage] 兼容固件下载成功，数据大小:", _o3.byteLength);
                return _context7.abrupt("break", 30);
              case 20:
                _context7.prev = 20;
                _context7.t0 = _context7["catch"](11);
                if (!(console.error("[FirmwarePage] \u7B2C".concat(_e5, "\u6B21\u4E0B\u8F7D\u517C\u5BB9\u56FA\u4EF6\u5931\u8D25:"), _context7.t0), 3 === _e5)) {
                  _context7.next = 24;
                  break;
                }
                throw new Error("下载兼容固件失败，请检查网络连接后重试");
              case 24:
                _this7.updateStatusText = "\u4E0B\u8F7D\u5931\u8D25\uFF0C\u6B63\u5728\u91CD\u8BD5 (".concat(_e5, "/3)...");
                _context7.next = 27;
                return _this7.delay(2e3);
              case 27:
                _e5++;
                _context7.next = 10;
                break;
              case 30:
                if (_o3 && _o3 instanceof ArrayBuffer) {
                  _context7.next = 32;
                  break;
                }
                throw new Error("下载的兼容固件数据无效");
              case 32:
                _this7.updateStatusText = "正在解析兼容固件...";
                _context7.next = 35;
                return i.unpackFirmware(_o3);
              case 35:
                _yield$i$unpackFirmwa3 = _context7.sent;
                r = _yield$i$unpackFirmwa3.applicationDat;
                u = _yield$i$unpackFirmwa3.applicationBin;
                i.validateFirmware(r, u), _this7.updateStatusText = "正在进入 DFU 模式...";
                _context7.prev = 39;
                _context7.next = 42;
                return t.bluetoothService.enterDFUMode();
              case 42:
                _this7.updateStatusText = "等待设备进入 DFU 模式...";
                _context7.next = 45;
                return _this7.delay(3e3);
              case 45:
                _context7.next = 55;
                break;
              case 47:
                _context7.prev = 47;
                _context7.t1 = _context7["catch"](39);
                if (!(!_context7.t1.message.includes("超时") && !_context7.t1.message.includes("重启"))) {
                  _context7.next = 51;
                  break;
                }
                throw _context7.t1;
              case 51:
                console.log("[FirmwarePage] 设备可能已进入DFU模式，继续流程");
                _this7.updateStatusText = "设备正在重启进入 DFU 模式...";
                _context7.next = 55;
                return _this7.delay(3e3);
              case 55:
                _this7.updateStatusText = "正在扫描 DFU 设备...";
                _context7.next = 58;
                return t.bluetoothService.initialize();
              case 58:
                _context7.next = 60;
                return t.bluetoothService.startScan();
              case 60:
                _context7.next = 62;
                return _this7.scanDFUDevice();
              case 62:
                n = _context7.sent;
                if (n) {
                  _context7.next = 65;
                  break;
                }
                throw new Error("未找到 DFU 模式的设备，请重试");
              case 65:
                _this7.updateStatusText = "正在连接 DFU 设备...";
                _context7.prev = 66;
                _context7.next = 69;
                return t.bluetoothService.connectToDevice(n);
              case 69:
                _context7.next = 87;
                break;
              case 71:
                _context7.prev = 71;
                _context7.t2 = _context7["catch"](66);
                console.error("[FirmwarePage] 首次连接DFU设备失败，尝试重新扫描", _context7.t2);
                _this7.updateStatusText = "重新扫描 DFU 设备...";
                _context7.next = 77;
                return _this7.delay(2e3);
              case 77:
                _context7.next = 79;
                return t.bluetoothService.startScan();
              case 79:
                _context7.next = 81;
                return _this7.scanDFUDevice();
              case 81:
                _e6 = _context7.sent;
                if (_e6) {
                  _context7.next = 84;
                  break;
                }
                throw new Error("重新扫描未找到 DFU 设备，请重启设备后重试");
              case 84:
                _this7.updateStatusText = "重新连接 DFU 设备...";
                _context7.next = 87;
                return t.bluetoothService.connectToDevice(_e6);
              case 87:
                c = new a.DFUCommunicator(t.bluetoothService);
                _this7.updateStatusText = "正在刷入兼容固件...";
                _context7.next = 91;
                return c.flashFirmware(1, r, function (e) {
                  _this7.updateProgress = Math.floor(e / 2), _this7.updateStatusText = "\u6B63\u5728\u5237\u5165\u517C\u5BB9\u56FA\u4EF6 (1/2): ".concat(2 * _this7.updateProgress, "%");
                });
              case 91:
                _context7.next = 93;
                return c.flashFirmware(2, u, function (e) {
                  _this7.updateProgress = 50 + Math.floor(e / 2), _this7.updateStatusText = "\u6B63\u5728\u5237\u5165\u517C\u5BB9\u56FA\u4EF6 (2/2): ".concat(e, "%");
                });
              case 93:
                _this7.updateProgress = 100;
                _this7.updateStatusText = "兼容固件更新完成，设备正在重启...";
                _context7.next = 97;
                return _this7.delay(3e3);
              case 97:
                _this7.updateSuccess = !0;
                _this7.updateResultMessage = "兼容固件已成功刷入，设备将重新连接。";
                _this7.$refs.resultPopup.open();
                _context7.next = 102;
                return t.bluetoothService.initialize();
              case 102:
                _context7.next = 104;
                return t.bluetoothService.startScan();
              case 104:
                return _context7.abrupt("return", !0);
              case 107:
                _context7.prev = 107;
                _context7.t3 = _context7["catch"](4);
                return _context7.abrupt("return", (console.error("[FirmwarePage] 自动刷入兼容固件失败", _context7.t3), _this7.updateSuccess = !1, _this7.updateResultMessage = "自动刷入失败: " + _context7.t3.message, _this7.$refs.resultPopup.open(), _this7.updateStatusText = "自动刷入失败: " + _context7.t3.message, !1));
              case 110:
                _context7.prev = 110;
                _this7.isUpdating = !1;
                return _context7.finish(110);
              case 113:
              case "end":
                return _context7.stop();
            }
          }, _callee7, null, [[4, 107, 110, 113], [11, 20], [39, 47], [66, 71]]);
        }))();
      }
    }
  };
if (!Array) {
  (e.resolveComponent("uni-icons") + e.resolveComponent("uni-popup-dialog") + e.resolveComponent("uni-popup"))();
}
Math || (function () {
  return "../../node-modules/@dcloudio/uni-ui/lib/uni-icons/uni-icons.js";
} + function () {
  return "../../node-modules/@dcloudio/uni-ui/lib/uni-popup-dialog/uni-popup-dialog.js";
} + function () {
  return "../../node-modules/@dcloudio/uni-ui/lib/uni-popup/uni-popup.js";
})();
var o = e._export_sfc(s, [["render", function (t, a, i, s, o, r) {
  return e.e({
    a: !t.isConnected
  }, t.isConnected ? e.e({
    d: e.p({
      type: "info-filled",
      size: "20",
      color: "#667eea"
    }),
    e: e.t(t.deviceModelName),
    f: e.t(t.deviceInfo ? t.deviceInfo.version : "未知"),
    g: e.t(o.chipId || "未知"),
    h: e.p({
      type: "download-filled",
      size: "20",
      color: "#667eea"
    }),
    i: e.t(o.updateStatusText),
    j: o.isUpdating
  }, o.isUpdating ? {
    k: "".concat(r.updateProgress, "%"),
    l: e.t(r.updateProgress)
  } : {}, {
    m: e.p({
      type: "refresh",
      size: "16",
      color: "#fff"
    }),
    n: e.t(o.isChecking ? "检查中..." : "检查更新"),
    o: e.o(function () {
      return r.checkUpdate && r.checkUpdate.apply(r, arguments);
    }),
    p: o.isUpdating || o.isChecking,
    q: e.p({
      type: "download",
      size: "16",
      color: "#fff"
    }),
    r: e.t(o.isUpdating ? "更新中..." : "开始更新"),
    s: e.o(function () {
      return r.startUpdate && r.startUpdate.apply(r, arguments);
    }),
    t: o.isUpdating || !o.updateAvailable || o.isChecking,
    v: o.updateInfo && o.updateInfo.firmware_info
  }, o.updateInfo && o.updateInfo.firmware_info ? {
    w: e.t(o.updateInfo.firmware_info.version)
  } : {}, {
    x: e.p({
      type: "help-filled",
      size: "20",
      color: "#667eea"
    })
  }) : {
    b: e.p({
      type: "info",
      size: "60",
      color: "#999"
    }),
    c: e.o(function () {
      return r.goToConnect && r.goToConnect.apply(r, arguments);
    })
  }, {
    y: e.t(o.updateResultMessage),
    z: e.o(r.closeResultDialog),
    A: e.p({
      type: o.updateSuccess ? "success" : "error",
      title: o.updateSuccess ? "更新成功" : "更新失败",
      confirmText: "确定",
      "before-close": !0
    }),
    B: e.sr("resultPopup", "2926a4f6-6"),
    C: e.p({
      type: "dialog",
      "mask-click": !1,
      animation: !0
    })
  });
}], ["__scopeId", "data-v-2926a4f6"]]);
wx.createPage(o); 
 			}); 	require("pages/firmware/firmware.js");
 		__wxRoute = 'pages/geofence/geofence';__wxRouteBegin = true; 	__wxAppCurrentFile__ = 'pages/geofence/geofence.js';	define("pages/geofence/geofence.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";

var _regeneratorRuntime2 = require("../../@babel/runtime/helpers/regeneratorRuntime");
var _asyncToGenerator2 = require("../../@babel/runtime/helpers/asyncToGenerator");
var _toConsumableArray2 = require("../../@babel/runtime/helpers/toConsumableArray");
var _objectSpread2 = require("../../@babel/runtime/helpers/objectSpread2");
var e = require("../../common/vendor.js"),
  t = {
    name: "GeofencePage",
    data: function data() {
      return {
        mapCenter: {
          latitude: 39.908775,
          longitude: 116.39674
        },
        mapScale: 16,
        drawingMode: !1,
        drawingPoints: [],
        newGeofence: {
          name: "",
          slotId: 0,
          polygon: []
        },
        selectedGeofence: null,
        debounceTimer: null,
        mapRendering: !1,
        mapTapDisabled: !1,
        lastTapTime: 0,
        mapUpdateQueue: []
      };
    },
    computed: _objectSpread2(_objectSpread2(_objectSpread2(_objectSpread2(_objectSpread2({}, e.mapGetters("device", ["isConnected"])), e.mapGetters("geofence", ["enabledGeofences", "canEnableGeofence", "statistics"])), e.mapState("slots", ["slots"])), e.mapState("geofence", ["geofences", "currentPosition", "currentGeofence", "isWatching", "autoSwitchEnabled", "locationPermission"])), {}, {
      markers: function markers() {
        var e = [];
        return this.currentPosition && e.push({
          id: "current",
          latitude: this.currentPosition.latitude,
          longitude: this.currentPosition.longitude,
          iconPath: "/static/icons/location-current.png",
          title: "当前位置",
          width: 30,
          height: 30
        }), this.drawingMode && this.drawingPoints.forEach(function (t, o) {
          e.push({
            id: "drawing_".concat(o),
            latitude: t.latitude,
            longitude: t.longitude,
            iconPath: "/static/icons/drawing-point.png",
            width: 20,
            height: 20
          });
        }), e;
      },
      polygons: function polygons() {
        var e = [];
        return this.geofences.forEach(function (t) {
          t.polygon && t.polygon.length >= 3 && e.push({
            points: t.polygon,
            strokeColor: t.enabled ? "#007AFF" : "#999999",
            fillColor: t.enabled ? "#007AFF33" : "#99999933",
            strokeWidth: 2
          });
        }), this.drawingMode && this.drawingPoints.length >= 3 && e.push({
          points: this.drawingPoints,
          strokeColor: "#FF9500",
          fillColor: "#FF950033",
          strokeWidth: 2
        }), e;
      },
      availableSlots: function availableSlots() {
        var e, t;
        var o = [];
        for (var n = 0; n < 16; n++) {
          var i = this.slots ? this.slots[n] : null,
            a = (null == (e = null == i ? void 0 : i.hf) ? void 0 : e.enabled) && "UNKNOWN" !== i.hf.tagType,
            s = (null == (t = null == i ? void 0 : i.lf) ? void 0 : t.enabled) && "UNKNOWN" !== i.lf.tagType,
            c = a || s;
          var l = "\u5361\u69FD".concat(n + 1),
            d = [];
          a && i.hf.name ? d.push("HF:".concat(i.hf.name)) : a && d.push("HF:".concat(i.hf.tagType)), s && i.lf.name ? d.push("LF:".concat(i.lf.name)) : s && d.push("LF:".concat(i.lf.tagType)), d.length > 0 ? l += " (".concat(d.join(", "), ") \u2713") : l += " (空卡槽)", o.push({
            value: n,
            label: l,
            disabled: !c,
            hasCard: c,
            cardInfo: {
              hf: a ? {
                name: i.hf.name,
                type: i.hf.tagType,
                enabled: i.hf.enabled
              } : null,
              lf: s ? {
                name: i.lf.name,
                type: i.lf.tagType,
                enabled: i.lf.enabled
              } : null
            }
          });
        }
        return o;
      },
      canSaveGeofence: function canSaveGeofence() {
        return "" !== this.newGeofence.name.trim() && this.newGeofence.polygon.length >= 3 && this.availableSlots[this.newGeofence.slotId] && !this.availableSlots[this.newGeofence.slotId].disabled;
      },
      selectedSlotInfo: function selectedSlotInfo() {
        return this.availableSlots[this.newGeofence.slotId] || null;
      },
      includePoints: function includePoints() {
        var e = [];
        return this.currentPosition && e.push({
          latitude: this.currentPosition.latitude,
          longitude: this.currentPosition.longitude
        }), this.drawingMode && this.drawingPoints.length > 0 && e.push.apply(e, _toConsumableArray2(this.drawingPoints)), this.selectedGeofence && this.selectedGeofence.polygon && e.push.apply(e, _toConsumableArray2(this.selectedGeofence.polygon)), e.length > 1 ? e : null;
      }
    }),
    onLoad: function onLoad() {
      var _this = this;
      return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee() {
        return _regeneratorRuntime2().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              _context.prev = 0;
              if (!(e.index.showLoading({
                title: "初始化中..."
              }), _this.isConnected)) {
                _context.next = 11;
                break;
              }
              _context.prev = 2;
              _context.next = 5;
              return _this.loadAllSlots();
            case 5:
              console.log("[围栏页面] 卡槽数据加载完成");
              _context.next = 11;
              break;
            case 8:
              _context.prev = 8;
              _context.t0 = _context["catch"](2);
              console.warn("[围栏页面] 卡槽数据加载失败，将在设备连接后重试:", _context.t0);
            case 11:
              _context.next = 13;
              return _this.initializeGeofence();
            case 13:
              _context.next = 15;
              return _this.getCurrentLocationAndCenter();
            case 15:
              _this.setupDebounceControl();
              _this.setupDeviceConnectionWatcher();
              e.index.hideLoading();
              _context.next = 23;
              break;
            case 20:
              _context.prev = 20;
              _context.t1 = _context["catch"](0);
              e.index.hideLoading(), console.error("[围栏页面] 初始化失败:", _context.t1), _this.showError("初始化失败: " + _context.t1.message);
            case 23:
            case "end":
              return _context.stop();
          }
        }, _callee, null, [[0, 20], [2, 8]]);
      }))();
    },
    onUnload: function onUnload() {
      this.isWatching && this.stopWatching(), this.debounceTimer && (clearTimeout(this.debounceTimer), this.debounceTimer = null);
    },
    onShow: function onShow() {
      this.autoSwitchEnabled && !this.isWatching && this.startWatching().catch(function (e) {
        console.warn("[围栏页面] 恢复监听失败:", e);
      });
    },
    onHide: function onHide() {
      this.debounceTimer && (clearTimeout(this.debounceTimer), this.debounceTimer = null);
    },
    methods: _objectSpread2(_objectSpread2(_objectSpread2({}, e.mapActions("geofence", ["initialize", "getCurrentPosition", "startWatching", "stopWatching", "toggleAutoSwitch", "addGeofence", "updateGeofence", "deleteGeofence"])), e.mapActions("slots", ["loadAllSlots"])), {}, {
      setupDebounceControl: function setupDebounceControl() {
        var _this2 = this;
        this.$watch(function () {
          return [_this2.drawingPoints, _this2.currentPosition, _this2.geofences, _this2.selectedGeofence];
        }, this.debouncedUpdateMap, {
          deep: !0
        });
      },
      setupDeviceConnectionWatcher: function setupDeviceConnectionWatcher() {
        var _this3 = this;
        this.$watch(function () {
          return _this3.isConnected;
        }, /*#__PURE__*/function () {
          var _ref = _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee2(t, o) {
            return _regeneratorRuntime2().wrap(function _callee2$(_context2) {
              while (1) switch (_context2.prev = _context2.next) {
                case 0:
                  if (!(t && !o)) {
                    _context2.next = 12;
                    break;
                  }
                  _context2.prev = 1;
                  e.index.showLoading({
                    title: "更新卡槽数据..."
                  });
                  _context2.next = 5;
                  return _this3.loadAllSlots();
                case 5:
                  console.log("[围栏页面] 设备连接后卡槽数据刷新完成");
                  e.index.hideLoading();
                  _context2.next = 12;
                  break;
                case 9:
                  _context2.prev = 9;
                  _context2.t0 = _context2["catch"](1);
                  e.index.hideLoading(), console.error("[围栏页面] 设备连接后卡槽数据刷新失败:", _context2.t0);
                case 12:
                case "end":
                  return _context2.stop();
              }
            }, _callee2, null, [[1, 9]]);
          }));
          return function (_x, _x2) {
            return _ref.apply(this, arguments);
          };
        }(), {
          immediate: !1
        });
      },
      debouncedUpdateMap: function debouncedUpdateMap() {
        var _this4 = this;
        this.debounceTimer && clearTimeout(this.debounceTimer), this.debounceTimer = setTimeout(function () {
          _this4.mapRendering = !0, _this4.$nextTick(function () {
            _this4.mapRendering = !1;
          });
        }, 100);
      },
      initializeGeofence: function initializeGeofence() {
        var _this5 = this;
        return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee3() {
          return _regeneratorRuntime2().wrap(function _callee3$(_context3) {
            while (1) switch (_context3.prev = _context3.next) {
              case 0:
                _context3.prev = 0;
                _context3.next = 3;
                return _this5.initialize();
              case 3:
                _context3.next = 8;
                break;
              case 5:
                _context3.prev = 5;
                _context3.t0 = _context3["catch"](0);
                throw console.error("[围栏页面] 围栏模块初始化失败:", _context3.t0), _context3.t0;
              case 8:
              case "end":
                return _context3.stop();
            }
          }, _callee3, null, [[0, 5]]);
        }))();
      },
      getCurrentLocationAndCenter: function getCurrentLocationAndCenter() {
        var _this6 = this;
        return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee4() {
          var _e;
          return _regeneratorRuntime2().wrap(function _callee4$(_context4) {
            while (1) switch (_context4.prev = _context4.next) {
              case 0:
                _context4.prev = 0;
                _context4.next = 3;
                return _this6.getCurrentPosition();
              case 3:
                _e = _context4.sent;
                _this6.mapCenter = {
                  latitude: _e.latitude,
                  longitude: _e.longitude
                };
                _context4.next = 10;
                break;
              case 7:
                _context4.prev = 7;
                _context4.t0 = _context4["catch"](0);
                console.warn("[围栏页面] 获取当前位置失败:", _context4.t0);
              case 10:
              case "end":
                return _context4.stop();
            }
          }, _callee4, null, [[0, 7]]);
        }))();
      },
      toggleAutoSwitchFunction: function toggleAutoSwitchFunction() {
        var _this7 = this;
        return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee5() {
          var _t;
          return _regeneratorRuntime2().wrap(function _callee5$(_context5) {
            while (1) switch (_context5.prev = _context5.next) {
              case 0:
                _context5.prev = 0;
                _context5.next = 3;
                return _this7.toggleAutoSwitch();
              case 3:
                _t = _this7.autoSwitchEnabled ? "围栏功能已启用" : "围栏功能已关闭";
                e.index.showToast({
                  title: _t,
                  icon: "success"
                });
                _context5.next = 10;
                break;
              case 7:
                _context5.prev = 7;
                _context5.t0 = _context5["catch"](0);
                console.error("[围栏页面] 切换自动切换功能失败:", _context5.t0), _this7.showError("操作失败: " + _context5.t0.message);
              case 10:
              case "end":
                return _context5.stop();
            }
          }, _callee5, null, [[0, 7]]);
        }))();
      },
      onMapTap: function onMapTap(t) {
        var _this8 = this;
        var o = Date.now();
        if (this.mapTapDisabled || o - this.lastTapTime < 200) return;
        if (this.lastTapTime = o, !this.drawingMode) return;
        this.mapTapDisabled = !0, setTimeout(function () {
          _this8.mapTapDisabled = !1;
        }, 150);
        var n = {
          latitude: t.detail.latitude,
          longitude: t.detail.longitude
        };
        this.drawingPoints.push(n), this.$nextTick(function () {
          e.index.vibrateShort({
            success: function success() {},
            fail: function fail() {}
          });
        }), this.drawingPoints.length >= 3 && e.index.showToast({
          title: "".concat(this.drawingPoints.length, "\u4E2A\u70B9"),
          icon: "none",
          duration: 1e3
        });
      },
      centerToCurrentLocation: function centerToCurrentLocation() {
        var _this9 = this;
        return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee6() {
          var _t2;
          return _regeneratorRuntime2().wrap(function _callee6$(_context6) {
            while (1) switch (_context6.prev = _context6.next) {
              case 0:
                _context6.prev = 0;
                e.index.showLoading({
                  title: "定位中..."
                });
                _context6.next = 4;
                return _this9.getCurrentPosition();
              case 4:
                _t2 = _context6.sent;
                _this9.mapCenter = {
                  latitude: _t2.latitude,
                  longitude: _t2.longitude
                }, e.index.hideLoading();
                _context6.next = 11;
                break;
              case 8:
                _context6.prev = 8;
                _context6.t0 = _context6["catch"](0);
                e.index.hideLoading(), _this9.showError("定位失败: " + _context6.t0.message);
              case 11:
              case "end":
                return _context6.stop();
            }
          }, _callee6, null, [[0, 8]]);
        }))();
      },
      manualCheckGeofence: function manualCheckGeofence() {
        var _this10 = this;
        return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee7() {
          var _t3;
          return _regeneratorRuntime2().wrap(function _callee7$(_context7) {
            while (1) switch (_context7.prev = _context7.next) {
              case 0:
                _context7.prev = 0;
                e.index.showLoading({
                  title: "检查围栏中..."
                });
                _context7.next = 4;
                return _this10.getCurrentPosition();
              case 4:
                _t3 = _context7.sent;
                _context7.next = 7;
                return _this10.$store.dispatch("geofence/handlePositionUpdate", _t3);
              case 7:
                e.index.hideLoading();
                e.index.showToast({
                  title: "围栏检查完成",
                  icon: "success"
                });
                _context7.next = 14;
                break;
              case 11:
                _context7.prev = 11;
                _context7.t0 = _context7["catch"](0);
                e.index.hideLoading(), _this10.showError("围栏检查失败: " + _context7.t0.message);
              case 14:
              case "end":
                return _context7.stop();
            }
          }, _callee7, null, [[0, 11]]);
        }))();
      },
      showAddGeofenceDialog: function showAddGeofenceDialog() {
        this.isConnected ? this.$refs.addDialog.open() : this.showError("请先连接设备");
      },
      hideAddDialog: function hideAddDialog() {
        this.$refs.addDialog.close();
      },
      startDrawing: function startDrawing() {
        this.drawingMode = !0, this.drawingPoints = [], this.hideAddDialog(), e.index.showToast({
          title: "请在地图上点击绘制围栏",
          icon: "none",
          duration: 3e3
        });
      },
      cancelDrawing: function cancelDrawing() {
        var _this11 = this;
        e.index.showModal({
          title: "确认取消",
          content: "确定要取消绘制吗？已添加的点将被清除。",
          confirmColor: "#ff0000",
          success: function success(t) {
            t.confirm && (_this11.drawingMode = !1, _this11.drawingPoints = [], e.index.showToast({
              title: "已取消绘制",
              icon: "none"
            }));
          }
        });
      },
      finishDrawing: function finishDrawing() {
        this.drawingPoints.length < 3 ? this.showError("至少需要3个点才能创建围栏") : (e.index.vibrateShort(), this.newGeofence = {
          name: "",
          slotId: 0,
          polygon: _toConsumableArray2(this.drawingPoints)
        }, this.drawingMode = !1, this.showConfigDialog());
      },
      showConfigDialog: function showConfigDialog() {
        this.$refs.configDialog.open();
      },
      hideConfigDialog: function hideConfigDialog() {
        this.$refs.configDialog.close(), this.newGeofence = {
          name: "",
          slotId: 0,
          polygon: []
        }, this.drawingPoints = [];
      },
      onSlotChange: function onSlotChange(e) {
        this.newGeofence.slotId = parseInt(e.detail.value);
      },
      refreshSlotsData: function refreshSlotsData() {
        var _this12 = this;
        return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee8() {
          return _regeneratorRuntime2().wrap(function _callee8$(_context8) {
            while (1) switch (_context8.prev = _context8.next) {
              case 0:
                if (!_this12.isConnected) {
                  _context8.next = 14;
                  break;
                }
                _context8.prev = 1;
                e.index.showLoading({
                  title: "刷新卡槽数据..."
                });
                _context8.next = 5;
                return _this12.loadAllSlots();
              case 5:
                e.index.hideLoading();
                e.index.showToast({
                  title: "卡槽数据已刷新",
                  icon: "success",
                  duration: 1500
                });
                _context8.next = 12;
                break;
              case 9:
                _context8.prev = 9;
                _context8.t0 = _context8["catch"](1);
                e.index.hideLoading(), console.error("[围栏页面] 刷新卡槽数据失败:", _context8.t0), _this12.showError("刷新失败: " + _context8.t0.message);
              case 12:
                _context8.next = 15;
                break;
              case 14:
                _this12.showError("请先连接设备");
              case 15:
              case "end":
                return _context8.stop();
            }
          }, _callee8, null, [[1, 9]]);
        }))();
      },
      saveGeofence: function saveGeofence() {
        var _this13 = this;
        return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee9() {
          return _regeneratorRuntime2().wrap(function _callee9$(_context9) {
            while (1) switch (_context9.prev = _context9.next) {
              case 0:
                _context9.prev = 0;
                e.index.showLoading({
                  title: "保存中..."
                });
                _context9.next = 4;
                return _this13.addGeofence(_this13.newGeofence);
              case 4:
                e.index.hideLoading();
                e.index.showToast({
                  title: "围栏创建成功",
                  icon: "success"
                });
                _this13.hideConfigDialog();
                _context9.next = 12;
                break;
              case 9:
                _context9.prev = 9;
                _context9.t0 = _context9["catch"](0);
                e.index.hideLoading(), _this13.showError("保存失败: " + _context9.t0.message);
              case 12:
              case "end":
                return _context9.stop();
            }
          }, _callee9, null, [[0, 9]]);
        }))();
      },
      selectGeofence: function selectGeofence(e) {
        if (this.selectedGeofence = e, e.polygon && e.polygon.length > 0) {
          var _t4 = this.calculatePolygonCenter(e.polygon);
          this.mapCenter = _t4;
        }
      },
      editGeofence: function editGeofence(t) {
        e.index.navigateTo({
          url: "/pages/geofence-edit/geofence-edit?id=".concat(t.id)
        });
      },
      toggleGeofenceEnabled: function toggleGeofenceEnabled(t) {
        var _this14 = this;
        return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee10() {
          var _o;
          return _regeneratorRuntime2().wrap(function _callee10$(_context10) {
            while (1) switch (_context10.prev = _context10.next) {
              case 0:
                _context10.prev = 0;
                _context10.next = 3;
                return _this14.updateGeofence({
                  id: t.id,
                  updates: {
                    enabled: !t.enabled
                  }
                });
              case 3:
                _o = t.enabled ? "围栏已禁用" : "围栏已启用";
                e.index.showToast({
                  title: _o,
                  icon: "success"
                });
                _context10.next = 10;
                break;
              case 7:
                _context10.prev = 7;
                _context10.t0 = _context10["catch"](0);
                _this14.showError("操作失败: " + _context10.t0.message);
              case 10:
              case "end":
                return _context10.stop();
            }
          }, _callee10, null, [[0, 7]]);
        }))();
      },
      deleteGeofenceConfirm: function deleteGeofenceConfirm(t) {
        var _this15 = this;
        return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee12() {
          return _regeneratorRuntime2().wrap(function _callee12$(_context12) {
            while (1) switch (_context12.prev = _context12.next) {
              case 0:
                e.index.showModal({
                  title: "确认删除",
                  content: "\u786E\u5B9A\u8981\u5220\u9664\u56F4\u680F\"".concat(t.name, "\"\u5417\uFF1F"),
                  success: function () {
                    var _success = _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee11(o) {
                      return _regeneratorRuntime2().wrap(function _callee11$(_context11) {
                        while (1) switch (_context11.prev = _context11.next) {
                          case 0:
                            if (!o.confirm) {
                              _context11.next = 10;
                              break;
                            }
                            _context11.prev = 1;
                            _context11.next = 4;
                            return _this15.deleteGeofence(t.id);
                          case 4:
                            e.index.showToast({
                              title: "删除成功",
                              icon: "success"
                            });
                            _context11.next = 10;
                            break;
                          case 7:
                            _context11.prev = 7;
                            _context11.t0 = _context11["catch"](1);
                            _this15.showError("删除失败: " + _context11.t0.message);
                          case 10:
                          case "end":
                            return _context11.stop();
                        }
                      }, _callee11, null, [[1, 7]]);
                    }));
                    function success(_x3) {
                      return _success.apply(this, arguments);
                    }
                    return success;
                  }()
                });
              case 1:
              case "end":
                return _context12.stop();
            }
          }, _callee12);
        }))();
      },
      calculatePolygonCenter: function calculatePolygonCenter(e) {
        var t = 0,
          o = 0;
        return e.forEach(function (e) {
          t += e.latitude, o += e.longitude;
        }), {
          latitude: t / e.length,
          longitude: o / e.length
        };
      },
      showError: function showError(t) {
        e.index.showModal({
          title: "错误",
          content: t,
          showCancel: !1
        });
      },
      onMapRegionChange: function onMapRegionChange(e) {},
      onMarkerTap: function onMarkerTap(t) {
        var _this16 = this;
        var o = t.detail.markerId;
        if (!this.drawingMode || !o.startsWith("drawing_")) return;
        var n = parseInt(o.split("_")[1]);
        isNaN(n) || n < 0 || n >= this.drawingPoints.length || e.index.showActionSheet({
          itemList: ["删除此点"],
          success: function success(t) {
            0 === t.tapIndex && (_this16.drawingPoints.splice(n, 1), e.index.vibrateShort(), _this16.drawingPoints.length < 3 ? e.index.showToast({
              title: "请至少添加3个点",
              icon: "none"
            }) : e.index.showToast({
              title: "已删除一个点",
              icon: "none"
            }));
          }
        });
      }
    })
  };
if (!Array) {
  (e.resolveComponent("uni-icons") + e.resolveComponent("uni-popup-dialog") + e.resolveComponent("uni-popup"))();
}
Math || (function () {
  return "../../node-modules/@dcloudio/uni-ui/lib/uni-icons/uni-icons.js";
} + function () {
  return "../../node-modules/@dcloudio/uni-ui/lib/uni-popup-dialog/uni-popup-dialog.js";
} + function () {
  return "../../node-modules/@dcloudio/uni-ui/lib/uni-popup/uni-popup.js";
})();
var o = e._export_sfc(t, [["render", function (t, o, n, i, a, s) {
  var c;
  return e.e({
    a: e.p({
      type: t.isConnected ? "wifi" : "wifi-off",
      size: 16,
      color: t.isConnected ? "#4CAF50" : "#f44336"
    }),
    b: e.t(t.isConnected ? "已连接" : "未连接"),
    c: t.isConnected ? 1 : "",
    d: e.p({
      type: t.isWatching ? "eye" : "eye-slash",
      size: 16,
      color: t.isWatching ? "#2196F3" : "#999"
    }),
    e: e.t(t.isWatching ? "监听中" : "已停止"),
    f: t.isWatching ? 1 : "",
    g: e.p({
      type: "location",
      size: 16,
      color: "#FF9800"
    }),
    h: e.t(t.statistics.enabledGeofences || 0),
    i: e.t(t.statistics.totalGeofences || 0),
    j: e.p({
      type: t.autoSwitchEnabled ? "checkmarkempty" : "close",
      size: "16"
    }),
    k: e.t(t.autoSwitchEnabled ? "关闭" : "启用"),
    l: t.autoSwitchEnabled ? 1 : "",
    m: t.canEnableGeofence ? "" : 1,
    n: e.o(function () {
      return s.toggleAutoSwitchFunction && s.toggleAutoSwitchFunction.apply(s, arguments);
    }),
    o: !t.canEnableGeofence,
    p: a.mapCenter.latitude,
    q: a.mapCenter.longitude,
    r: a.mapScale,
    s: s.markers,
    t: s.polygons,
    v: e.o(function () {
      return s.onMapRegionChange && s.onMapRegionChange.apply(s, arguments);
    }),
    w: e.o(function () {
      return s.onMarkerTap && s.onMarkerTap.apply(s, arguments);
    }),
    x: e.o(function () {
      return s.onMapTap && s.onMapTap.apply(s, arguments);
    }),
    y: s.includePoints,
    z: e.p({
      type: "location",
      size: "16"
    }),
    A: e.o(function () {
      return s.centerToCurrentLocation && s.centerToCurrentLocation.apply(s, arguments);
    }),
    B: !t.currentPosition,
    C: !a.drawingMode
  }, a.drawingMode ? {} : {
    D: e.p({
      type: "plus",
      size: "16"
    }),
    E: e.o(function () {
      return s.showAddGeofenceDialog && s.showAddGeofenceDialog.apply(s, arguments);
    }),
    F: !t.isConnected
  }, {
    G: a.drawingMode
  }, a.drawingMode ? {
    H: e.p({
      type: "checkmarkempty",
      size: "16"
    }),
    I: e.o(function () {
      return s.finishDrawing && s.finishDrawing.apply(s, arguments);
    }),
    J: a.drawingPoints.length < 3
  } : {}, {
    K: t.autoSwitchEnabled && !a.drawingMode
  }, t.autoSwitchEnabled && !a.drawingMode ? {
    L: e.p({
      type: "refresh",
      size: "16"
    }),
    M: e.o(function () {
      return s.manualCheckGeofence && s.manualCheckGeofence.apply(s, arguments);
    })
  } : {}, {
    N: a.drawingMode
  }, a.drawingMode ? {
    O: e.t(a.drawingPoints.length),
    P: e.o(function () {
      return s.cancelDrawing && s.cancelDrawing.apply(s, arguments);
    }),
    Q: e.o(function () {
      return s.finishDrawing && s.finishDrawing.apply(s, arguments);
    }),
    R: a.drawingPoints.length < 3
  } : {}, {
    S: e.t(t.statistics.enabledGeofences || 0),
    T: e.t(t.statistics.totalGeofences || 0),
    U: t.geofences.length > 0
  }, t.geofences.length > 0 ? {
    V: e.p({
      type: "plus",
      size: "16"
    }),
    W: e.o(function () {
      return s.showAddGeofenceDialog && s.showAddGeofenceDialog.apply(s, arguments);
    }),
    X: !t.isConnected
  } : {}, {
    Y: t.geofences.length > 0
  }, t.geofences.length > 0 ? {
    Z: e.f(t.geofences, function (o, n, i) {
      return e.e({
        a: e.t(o.name),
        b: "5cad4b6b-9-" + i,
        c: e.t(o.slotId + 1),
        d: "5cad4b6b-10-" + i,
        e: e.t(o.polygon.length),
        f: o.triggerCount > 0
      }, o.triggerCount > 0 ? {
        g: "5cad4b6b-11-" + i,
        h: e.p({
          type: "loop",
          size: "12",
          color: "#FF9800"
        }),
        i: e.t(o.triggerCount)
      } : {}, {
        j: o.enabled ? 1 : "",
        k: e.t(o.enabled ? "启用" : "禁用"),
        l: "5cad4b6b-12-" + i,
        m: e.o(function (e) {
          return s.editGeofence(o);
        }, o.id),
        n: "5cad4b6b-13-" + i,
        o: e.p({
          type: o.enabled ? "eye-slash" : "eye",
          size: "14"
        }),
        p: e.t(o.enabled ? "禁用" : "启用"),
        q: e.o(function (e) {
          return s.toggleGeofenceEnabled(o);
        }, o.id),
        r: "5cad4b6b-14-" + i,
        s: e.o(function (e) {
          return s.deleteGeofenceConfirm(o);
        }, o.id),
        t: e.o(function () {}, o.id),
        v: t.currentGeofence && t.currentGeofence.id === o.id
      }, (t.currentGeofence && (t.currentGeofence.id, o.id), {}), {
        w: o.id,
        x: o.enabled ? 1 : "",
        y: t.currentGeofence && t.currentGeofence.id === o.id ? 1 : "",
        z: e.o(function (e) {
          return s.selectGeofence(o);
        }, o.id)
      });
    }),
    aa: e.p({
      type: "wallet",
      size: "12",
      color: "#666"
    }),
    ab: e.p({
      type: "location-filled",
      size: "12",
      color: "#666"
    }),
    ac: e.p({
      type: "compose",
      size: "14"
    }),
    ad: e.p({
      type: "trash",
      size: "14"
    })
  } : {
    ae: e.p({
      type: "location",
      size: "48",
      color: "#E0E0E0"
    }),
    af: e.p({
      type: "plus",
      size: "16"
    }),
    ag: e.o(function () {
      return s.showAddGeofenceDialog && s.showAddGeofenceDialog.apply(s, arguments);
    }),
    ah: !t.isConnected
  }, {
    ai: t.currentPosition
  }, t.currentPosition ? e.e({
    aj: e.t(t.currentPosition.latitude.toFixed(6)),
    ak: e.t(t.currentPosition.longitude.toFixed(6)),
    al: t.currentGeofence
  }, t.currentGeofence ? {
    am: e.t(t.currentGeofence.name),
    an: e.t(t.currentGeofence.slotId + 1)
  } : (t.autoSwitchEnabled, {}), {
    ao: t.autoSwitchEnabled,
    ap: t.isWatching
  }, t.isWatching ? {
    aq: e.t(t.enabledGeofences.length)
  } : {}) : {}, {
    ar: e.o(s.startDrawing),
    as: e.o(s.hideAddDialog),
    at: e.p({
      type: "info",
      title: "提示",
      content: "请在地图上点击至少3个点来创建围栏区域，完成后点击右上角的+号。",
      confirmText: "开始绘制"
    }),
    av: e.sr("addDialog", "5cad4b6b-17"),
    aw: e.p({
      type: "dialog",
      "mask-click": !1
    }),
    ax: e.p({
      type: "close",
      size: "16"
    }),
    ay: e.o(function () {
      return s.hideConfigDialog && s.hideConfigDialog.apply(s, arguments);
    }),
    az: a.newGeofence.name,
    aA: e.o(function (e) {
      return a.newGeofence.name = e.detail.value;
    }),
    aB: e.p({
      type: "refresh",
      size: "14"
    }),
    aC: e.o(function () {
      return s.refreshSlotsData && s.refreshSlotsData.apply(s, arguments);
    }),
    aD: !t.isConnected,
    aE: e.t((null == (c = s.availableSlots[a.newGeofence.slotId]) ? void 0 : c.label) || "请选择卡槽"),
    aF: e.p({
      type: "arrowdown",
      size: "14"
    }),
    aG: s.availableSlots,
    aH: e.o(function () {
      return s.onSlotChange && s.onSlotChange.apply(s, arguments);
    }),
    aI: e.t(a.newGeofence.polygon.length),
    aJ: s.selectedSlotInfo
  }, s.selectedSlotInfo ? e.e({
    aK: s.selectedSlotInfo.cardInfo.hf
  }, s.selectedSlotInfo.cardInfo.hf ? {
    aL: e.p({
      type: "card",
      size: "14",
      color: "#2196F3"
    }),
    aM: e.t(s.selectedSlotInfo.cardInfo.hf.name || s.selectedSlotInfo.cardInfo.hf.type)
  } : {}, {
    aN: s.selectedSlotInfo.cardInfo.lf
  }, s.selectedSlotInfo.cardInfo.lf ? {
    aO: e.p({
      type: "wifi",
      size: "14",
      color: "#FF9800"
    }),
    aP: e.t(s.selectedSlotInfo.cardInfo.lf.name || s.selectedSlotInfo.cardInfo.lf.type)
  } : {}, {
    aQ: !s.selectedSlotInfo.hasCard
  }, s.selectedSlotInfo.hasCard ? {} : {
    aR: e.p({
      type: "close",
      size: "14",
      color: "#ccc"
    })
  }) : {}, {
    aS: e.o(function () {
      return s.hideConfigDialog && s.hideConfigDialog.apply(s, arguments);
    }),
    aT: e.o(function () {
      return s.saveGeofence && s.saveGeofence.apply(s, arguments);
    }),
    aU: !s.canSaveGeofence,
    aV: e.sr("configDialog", "5cad4b6b-19"),
    aW: e.p({
      type: "center",
      "mask-click": !1
    })
  });
}], ["__scopeId", "data-v-5cad4b6b"]]);
wx.createPage(o); 
 			}); 	require("pages/geofence/geofence.js");
 		__wxRoute = 'pages/geofence-edit/geofence-edit';__wxRouteBegin = true; 	__wxAppCurrentFile__ = 'pages/geofence-edit/geofence-edit.js';	define("pages/geofence-edit/geofence-edit.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";

var _regeneratorRuntime2 = require("../../@babel/runtime/helpers/regeneratorRuntime");
var _asyncToGenerator2 = require("../../@babel/runtime/helpers/asyncToGenerator");
var _toConsumableArray2 = require("../../@babel/runtime/helpers/toConsumableArray");
var _objectSpread2 = require("../../@babel/runtime/helpers/objectSpread2");
var t = require("../../common/vendor.js"),
  e = {
    name: "GeofenceEditPage",
    data: function data() {
      return {
        geofenceId: "",
        geofence: null,
        formData: {
          name: "",
          slotId: 0,
          enabled: !0,
          polygon: []
        },
        mapCenter: {
          latitude: 39.908775,
          longitude: 116.39674
        },
        tempPoints: [],
        editingMode: !1,
        mapTapDisabled: !1
      };
    },
    computed: _objectSpread2(_objectSpread2(_objectSpread2({}, t.mapGetters("geofence", ["getGeofenceById"])), t.mapState("slots", ["slots"])), {}, {
      availableSlots: function availableSlots() {
        var t, e;
        var o = [];
        for (var i = 0; i < 16; i++) {
          var n = this.slots ? this.slots[i] : null,
            a = n && ((null == (t = n.hf) ? void 0 : t.enabled) || (null == (e = n.lf) ? void 0 : e.enabled));
          o.push({
            value: i,
            label: "\u5361\u69FD".concat(i + 1).concat(a ? " ✓" : " (空)"),
            disabled: !a
          });
        }
        return o;
      },
      canSave: function canSave() {
        return "" !== this.formData.name.trim() && this.formData.polygon.length >= 3 && this.availableSlots[this.formData.slotId] && !this.availableSlots[this.formData.slotId].disabled;
      },
      mapMarkers: function mapMarkers() {
        return this.tempPoints.map(function (t, e) {
          return {
            id: "point_".concat(e),
            latitude: t.latitude,
            longitude: t.longitude,
            iconPath: "/static/icons/edit-point.png",
            width: 24,
            height: 24,
            title: "\u70B9 ".concat(e + 1)
          };
        });
      },
      mapPolygons: function mapPolygons() {
        return this.tempPoints.length >= 3 ? [{
          points: this.tempPoints,
          strokeColor: "#007AFF",
          fillColor: "#007AFF33",
          strokeWidth: 2
        }] : [];
      }
    }),
    onLoad: function onLoad(t) {
      t.id && (this.geofenceId = t.id, this.loadGeofence());
    },
    methods: _objectSpread2(_objectSpread2({}, t.mapActions("geofence", ["updateGeofence", "getCurrentPosition"])), {}, {
      loadGeofence: function loadGeofence() {
        if (this.geofence = this.getGeofenceById(this.geofenceId), !this.geofence) return this.showError("围栏不存在"), void this.goBack();
        this.formData = {
          name: this.geofence.name,
          slotId: this.geofence.slotId,
          enabled: this.geofence.enabled,
          polygon: _toConsumableArray2(this.geofence.polygon)
        }, this.formData.polygon.length > 0 && (this.mapCenter = this.calculatePolygonCenter(this.formData.polygon));
      },
      onSlotChange: function onSlotChange(t) {
        this.formData.slotId = parseInt(t.detail.value);
      },
      removePoint: function removePoint(t) {
        this.formData.polygon.splice(t, 1);
      },
      clearPoints: function clearPoints() {
        var _this = this;
        t.index.showModal({
          title: "确认操作",
          content: "确定要清空所有点位吗？",
          success: function success(t) {
            t.confirm && (_this.formData.polygon = []);
          }
        });
      },
      editOnMap: function editOnMap() {
        this.tempPoints = _toConsumableArray2(this.formData.polygon), this.editingMode = !0, this.$refs.mapDialog.open();
      },
      closeMapDialog: function closeMapDialog() {
        this.editingMode = !1, this.tempPoints = [], this.$refs.mapDialog.close();
      },
      centerToCurrentLocation: function centerToCurrentLocation() {
        var _this2 = this;
        return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee() {
          var _e;
          return _regeneratorRuntime2().wrap(function _callee$(_context) {
            while (1) switch (_context.prev = _context.next) {
              case 0:
                _context.prev = 0;
                t.index.showLoading({
                  title: "定位中..."
                });
                _context.next = 4;
                return _this2.getCurrentPosition();
              case 4:
                _e = _context.sent;
                _e && (_this2.mapCenter = {
                  latitude: _e.latitude,
                  longitude: _e.longitude
                }, _this2.tempPoints.length < 3 && (_this2.tempPoints.push({
                  latitude: _e.latitude,
                  longitude: _e.longitude
                }), t.index.showToast({
                  title: "已添加当前位置",
                  icon: "none"
                }))), t.index.hideLoading();
                _context.next = 11;
                break;
              case 8:
                _context.prev = 8;
                _context.t0 = _context["catch"](0);
                t.index.hideLoading(), t.index.showToast({
                  title: "定位失败",
                  icon: "none"
                });
              case 11:
              case "end":
                return _context.stop();
            }
          }, _callee, null, [[0, 8]]);
        }))();
      },
      fitPolygon: function fitPolygon() {
        this.tempPoints.length < 2 ? t.index.showToast({
          title: "至少需要2个点",
          icon: "none"
        }) : t.index.showToast({
          title: "已适应围栏范围",
          icon: "none"
        });
      },
      addPointAtCurrentLocation: function addPointAtCurrentLocation() {
        var _this3 = this;
        return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee2() {
          var _e2;
          return _regeneratorRuntime2().wrap(function _callee2$(_context2) {
            while (1) switch (_context2.prev = _context2.next) {
              case 0:
                _context2.prev = 0;
                t.index.showLoading({
                  title: "定位中..."
                });
                _context2.next = 4;
                return _this3.getCurrentPosition();
              case 4:
                _e2 = _context2.sent;
                _e2 && (_this3.tempPoints.push({
                  latitude: _e2.latitude,
                  longitude: _e2.longitude
                }), t.index.showToast({
                  title: "已添加当前位置",
                  icon: "success"
                })), t.index.hideLoading();
                _context2.next = 11;
                break;
              case 8:
                _context2.prev = 8;
                _context2.t0 = _context2["catch"](0);
                t.index.hideLoading(), t.index.showToast({
                  title: "定位失败",
                  icon: "none"
                });
              case 11:
              case "end":
                return _context2.stop();
            }
          }, _callee2, null, [[0, 8]]);
        }))();
      },
      onMapTap: function onMapTap(e) {
        var _this4 = this;
        if (!this.editingMode) return;
        if (this.mapTapDisabled) return;
        this.mapTapDisabled = !0, setTimeout(function () {
          _this4.mapTapDisabled = !1;
        }, 500);
        var o = {
          latitude: e.detail.latitude,
          longitude: e.detail.longitude
        };
        this.tempPoints.push(o), t.index.vibrateShort(), t.index.showToast({
          title: "\u5DF2\u6DFB\u52A0\u70B9 ".concat(this.tempPoints.length),
          icon: "none"
        });
      },
      onMarkerTap: function onMarkerTap(e) {
        var _this5 = this;
        if (!this.editingMode) return;
        var o = e.detail.markerId;
        if (!o.startsWith("point_")) return;
        var i = parseInt(o.split("_")[1]);
        isNaN(i) || i < 0 || i >= this.tempPoints.length || t.index.showActionSheet({
          itemList: ["删除此点", "在此位置添加点"],
          success: function success(e) {
            if (0 === e.tapIndex) _this5.tempPoints.splice(i, 1), t.index.vibrateShort(), t.index.showToast({
              title: "已删除点",
              icon: "none"
            });else if (1 === e.tapIndex) {
              var _e3 = _this5.tempPoints[i],
                _o = {
                  latitude: _e3.latitude + 1e-4,
                  longitude: _e3.longitude + 1e-4
                };
              _this5.tempPoints.splice(i + 1, 0, _o), t.index.showToast({
                title: "已添加点",
                icon: "none"
              });
            }
          }
        });
      },
      clearMapPoints: function clearMapPoints() {
        var _this6 = this;
        t.index.showModal({
          title: "确认操作",
          content: "确定要清空地图上的所有点位吗？",
          success: function success(t) {
            t.confirm && (_this6.tempPoints = []);
          }
        });
      },
      confirmMapChanges: function confirmMapChanges() {
        this.tempPoints.length < 3 ? this.showError("至少需要3个点才能形成围栏") : (this.formData.polygon = _toConsumableArray2(this.tempPoints), this.closeMapDialog(), t.index.showToast({
          title: "围栏区域已更新",
          icon: "success"
        }));
      },
      toggleEnabled: function toggleEnabled(t) {
        this.formData.enabled = t.detail.value;
      },
      saveChanges: function saveChanges() {
        var _this7 = this;
        return _asyncToGenerator2( /*#__PURE__*/_regeneratorRuntime2().mark(function _callee3() {
          return _regeneratorRuntime2().wrap(function _callee3$(_context3) {
            while (1) switch (_context3.prev = _context3.next) {
              case 0:
                if (!_this7.canSave) {
                  _context3.next = 15;
                  break;
                }
                _context3.prev = 1;
                t.index.showLoading({
                  title: "保存中..."
                });
                _context3.next = 5;
                return _this7.updateGeofence({
                  id: _this7.geofenceId,
                  updates: {
                    name: _this7.formData.name,
                    slotId: _this7.formData.slotId,
                    enabled: _this7.formData.enabled,
                    polygon: _this7.formData.polygon
                  }
                });
              case 5:
                t.index.hideLoading();
                t.index.showToast({
                  title: "保存成功",
                  icon: "success"
                });
                setTimeout(function () {
                  _this7.goBack();
                }, 1500);
                _context3.next = 13;
                break;
              case 10:
                _context3.prev = 10;
                _context3.t0 = _context3["catch"](1);
                t.index.hideLoading(), _this7.showError("保存失败: " + _context3.t0.message);
              case 13:
                _context3.next = 16;
                break;
              case 15:
                _this7.showError("请完善围栏信息");
              case 16:
              case "end":
                return _context3.stop();
            }
          }, _callee3, null, [[1, 10]]);
        }))();
      },
      goBack: function goBack() {
        t.index.navigateBack();
      },
      calculatePolygonCenter: function calculatePolygonCenter(t) {
        if (!t || 0 === t.length) return {
          latitude: 39.908775,
          longitude: 116.39674
        };
        var e = 0,
          o = 0;
        return t.forEach(function (t) {
          e += t.latitude, o += t.longitude;
        }), {
          latitude: e / t.length,
          longitude: o / t.length
        };
      },
      formatTime: function formatTime(t) {
        if (!t) return "-";
        return new Date(t).toLocaleString("zh-CN", {
          year: "numeric",
          month: "2-digit",
          day: "2-digit",
          hour: "2-digit",
          minute: "2-digit"
        });
      },
      showError: function showError(e) {
        t.index.showModal({
          title: "错误",
          content: e,
          showCancel: !1
        });
      }
    })
  };
if (!Array) {
  (t.resolveComponent("uni-icons") + t.resolveComponent("uni-popup"))();
}
Math || (function () {
  return "../../node-modules/@dcloudio/uni-ui/lib/uni-icons/uni-icons.js";
} + function () {
  return "../../node-modules/@dcloudio/uni-ui/lib/uni-popup/uni-popup.js";
})();
var o = t._export_sfc(e, [["render", function (e, o, i, n, a, s) {
  var l;
  return t.e({
    a: a.formData.name,
    b: t.o(function (t) {
      return a.formData.name = t.detail.value;
    }),
    c: t.t((null == (l = s.availableSlots[a.formData.slotId]) ? void 0 : l.label) || "请选择卡槽"),
    d: t.p({
      type: "arrowdown",
      size: "14"
    }),
    e: s.availableSlots,
    f: a.formData.slotId,
    g: t.o(function () {
      return s.onSlotChange && s.onSlotChange.apply(s, arguments);
    }),
    h: a.formData.enabled,
    i: t.o(function () {
      return s.toggleEnabled && s.toggleEnabled.apply(s, arguments);
    }),
    j: t.t(a.formData.polygon.length),
    k: a.formData.polygon.length > 0
  }, a.formData.polygon.length > 0 ? {
    l: t.f(a.formData.polygon, function (e, o, i) {
      return {
        a: t.t(o + 1),
        b: t.t(e.latitude.toFixed(6)),
        c: t.t(e.longitude.toFixed(6)),
        d: "b20df31c-1-" + i,
        e: t.o(function (t) {
          return s.removePoint(o);
        }, o),
        f: o
      };
    }),
    m: t.p({
      type: "close",
      size: "16"
    })
  } : {}, {
    n: t.o(function () {
      return s.clearPoints && s.clearPoints.apply(s, arguments);
    }),
    o: t.o(function () {
      return s.editOnMap && s.editOnMap.apply(s, arguments);
    }),
    p: a.geofence
  }, a.geofence ? {
    q: t.t(s.formatTime(a.geofence.createTime)),
    r: t.t(s.formatTime(a.geofence.updateTime)),
    s: t.t(a.geofence.triggerCount || 0),
    t: t.t(a.geofence.lastTriggerTime ? s.formatTime(a.geofence.lastTriggerTime) : "从未触发")
  } : {}, {
    v: t.o(function () {
      return s.goBack && s.goBack.apply(s, arguments);
    }),
    w: t.o(function () {
      return s.saveChanges && s.saveChanges.apply(s, arguments);
    }),
    x: !s.canSave,
    y: t.p({
      type: "close",
      size: "20"
    }),
    z: t.o(function () {
      return s.closeMapDialog && s.closeMapDialog.apply(s, arguments);
    }),
    A: a.mapCenter.latitude,
    B: a.mapCenter.longitude,
    C: s.mapMarkers,
    D: s.mapPolygons,
    E: a.tempPoints.length > 0 ? a.tempPoints : null,
    F: t.o(function () {
      return s.onMapTap && s.onMapTap.apply(s, arguments);
    }),
    G: t.o(function () {
      return s.onMarkerTap && s.onMarkerTap.apply(s, arguments);
    }),
    H: t.p({
      type: "location",
      size: "20",
      color: "#333"
    }),
    I: t.o(function () {
      return s.centerToCurrentLocation && s.centerToCurrentLocation.apply(s, arguments);
    }),
    J: t.p({
      type: "scan",
      size: "20",
      color: "#333"
    }),
    K: t.o(function () {
      return s.fitPolygon && s.fitPolygon.apply(s, arguments);
    }),
    L: a.tempPoints.length > 0
  }, a.tempPoints.length > 0 ? {
    M: t.p({
      type: "plusempty",
      size: "20",
      color: "#333"
    }),
    N: t.o(function () {
      return s.addPointAtCurrentLocation && s.addPointAtCurrentLocation.apply(s, arguments);
    })
  } : {}, {
    O: a.tempPoints.length > 0
  }, a.tempPoints.length > 0 ? {
    P: t.t(a.tempPoints.length)
  } : {}, {
    Q: t.o(function () {
      return s.clearMapPoints && s.clearMapPoints.apply(s, arguments);
    }),
    R: t.t(a.tempPoints.length),
    S: t.o(function () {
      return s.confirmMapChanges && s.confirmMapChanges.apply(s, arguments);
    }),
    T: a.tempPoints.length < 3,
    U: t.sr("mapDialog", "b20df31c-2"),
    V: t.p({
      type: "center",
      "mask-click": !1
    })
  });
}], ["__scopeId", "data-v-b20df31c"]]);
wx.createPage(o); 
 			}); 	require("pages/geofence-edit/geofence-edit.js");
 	